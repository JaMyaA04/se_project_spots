"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["6633"],{529306:function(e,t,n){n.d(t,{c:()=>o});var r=n(93199),i=n(547144),o={getNextPlanWithFeature:function(e,t){return(0,r.UT)(i.av.nextPlanWithFeature.show({planId:e,params:t}))}}},743445:function(e,t,n){n.d(t,{W:()=>o});var r=n(93199),i=n(547144),o={list:function(e){var t=e.params;return(0,r.UT)(i.av.segments.index({params:void 0===t?{}:t}))},delete:function(e){var t=e.id;return(0,r.pC)(i.av.segments.detail({id:t}))},create:function(e){var t=e.title,n=e.rules,o=e.visible,a=e.community_segment_consumer_attributes;return(0,r.Cu)(i.av.segments.index(),{title:t,rules:n,visible:o,community_segment_consumer_attributes:a})},show:function(e){var t=e.id;return(0,r.UT)(i.av.segments.detail({id:t}))},update:function(e){var t=e.id,n=e.title,o=e.rules;return(0,r.aU)(i.av.segments.detail({id:t}),{title:n,rules:o})},duplicate:function(e){var t=e.id,n=e.title;return(0,r.Cu)(i.av.segments.duplicate({id:t}),{title:n})},usageStatus:function(e){var t=e.id;return(0,r.UT)(i.av.segments.usageStatus({id:t}))},consumers:function(e){var t=e.id,n=e.params;return(0,r.UT)(i.av.segments.consumers({id:t,params:void 0===n?{}:n}))}}},486372:function(e,t,n){n.d(t,{G:()=>E});var r=n(552676),i=n(275271),o=n(739792),a=n(78456),s=n(757105),l=n(728120),c=n(883861),u=n(441342),d=n(39905),f=n(434519),m=n(170973),p=n(656450),b=n(767900),y="course-type-form",v=function(e){var t=e.onSubmit,n=e.courseSetting,i=void 0===n?{course_type:p.t}:n;return(0,r.jsx)(b.l,{id:y,onSubmit:t,defaultValues:{course_setting:i},validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,r.jsx)(m.q,{hideLabel:!0})})},h=n(775148),g=function(e){var t=e.hideForm;return(0,r.jsx)(f.u_.HeaderActions,{children:(0,r.jsx)(h.h,{ariaLabel:(0,o.t)("back"),name:"20-chevron-left",onClick:t,iconSize:20,buttonSize:28,iconClassName:"!text-dark",className:"mr-2",variant:"primary"})})},_=n(703281),x="space_type_form",j=function(e){var t=e.onSubmit,n=(0,u.wh)().currentCommunity;return(0,r.jsx)(b.l,{id:x,onSubmit:t,defaultValues:{post_type:"basic"},children:(0,r.jsx)(_.m,{hideLabel:!0,isCoursesEnabled:null==n?void 0:n.courses_feature_flag_enabled})})};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t=e.prefillData,n=e.selectedPostType,r=t&&"course_type"in t?t.course_type:null,o=!!r,a=S((0,i.useState)(null!=n?n:"basic"),2),s=a[0],l=a[1],c=S((0,i.useState)(n&&"course"!==n||o),2),u=c[0],d=c[1],f=S((0,i.useState)(!1),2),m=f[0],p=f[1],b=S((0,i.useState)("course"===n&&!o),2),y=b[0],v=b[1],h=S((0,i.useState)(r?{course_type:r}:void 0),2);return{postType:s,hasSelectedSpaceType:u,isLoading:m,isCourseSpace:y,courseSetting:h[0],setPostType:l,setHasSelectedSpaceType:d,setIsLoading:p,setIsCourseSpace:v,setCourseSetting:h[1]}},k=function(e){var t=e.prefillData,n=e.spaceGroupId,i=e.selectedPostType,a=(0,s.dd)(),u=O({prefillData:t,selectedPostType:i}),m=u.postType,p=u.hasSelectedSpaceType,b=u.isLoading,h=u.isCourseSpace,_=u.courseSetting,w=u.setPostType,S=u.setHasSelectedSpaceType,k=u.setIsLoading,P=u.setIsCourseSpace,N=u.setCourseSetting,C=h?(0,o.t)("spaces.form.create.course_types.choose_course_type"):p?(0,o.t)("spaces.form.create.space_titles.".concat(m)):(0,o.t)("spaces.form.create.space_types.choose_type"),E=function(){a.hide(),P(!1),N(void 0),S(!1),a.remove()};return(0,r.jsxs)(f.u_,{isOpen:a.visible,onClose:E,contentPortalId:"space-type-picker-modal",title:C,children:[(0,r.jsx)(f.u_.Overlay,{}),(0,r.jsxs)(f.u_.Content,{size:"md",children:[(0,r.jsxs)(f.u_.Header,{className:"!px-6 md:!px-8",children:[p&&(0,r.jsx)(g,{hideForm:function(){S(!1),"course"===m&&P(!0)}}),h&&(0,r.jsx)(g,{hideForm:function(){P(!1),S(!1)}}),(0,r.jsx)(f.u_.Title,{className:"w-auto",size:"sm",children:C}),(0,r.jsx)(f.u_.HeaderActions,{children:(0,r.jsx)(f.u_.CloseButton,{onClick:E})})]}),(0,r.jsxs)(f.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:[!p&&!h&&(0,r.jsx)(j,{onSubmit:function(e){var t=e.post_type;w(t),"course"===t?P(!0):S(!0)}}),h&&(0,r.jsx)(v,{onSubmit:function(e){N(e.course_setting),P(!1),S(!0)},courseSetting:_}),p&&(0,r.jsx)(l._,{onClose:E,post_type:m,courseSetting:_,hideSpaceTypePicker:!0,currentSpaceGroupId:n,setExternalLoadingState:k,prefillData:t,renderHeader:function(){return(0,r.jsx)(r.Fragment,{})},renderFooter:function(){return(0,r.jsx)(r.Fragment,{})}})]}),(0,r.jsx)(f.u_.Footer,{children:(0,r.jsx)(d.z,{form:p?c.e:h?y:x,type:"submit","data-testid":"create-space-button",variant:"circle",full:!0,large:!0,disabled:b,children:p?b?(0,o.t)("creating"):(0,o.t)("create_space"):(0,o.t)("spaces.form.create.space_types.next")})})]})]})};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t,n=e.spaceGroupId,a=e.prefillData,u=e.postType,m=(0,s.dd)(),p=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=p[0],y=p[1];return(0,r.jsxs)(f.u_,{isOpen:m.visible,onClose:m.hide,contentPortalId:"create-space-content-portal",title:(0,o.t)("create_space"),children:[(0,r.jsx)(f.u_.Overlay,{}),(0,r.jsxs)(f.u_.Content,{size:"md",children:[(0,r.jsxs)(f.u_.Header,{className:"!px-6 md:!px-8",children:[(0,r.jsx)(f.u_.Title,{size:"sm",children:(0,o.t)("create_space")}),(0,r.jsx)(f.u_.HeaderActions,{children:(0,r.jsx)(f.u_.CloseButton,{onClick:m.hide})})]}),(0,r.jsx)(f.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:(0,r.jsx)(l._,{onClose:m.hide,setExternalLoadingState:y,currentSpaceGroupId:n,post_type:u,prefillData:a,renderHeader:function(){return(0,r.jsx)(r.Fragment,{})},renderFooter:function(){return(0,r.jsx)(r.Fragment,{})}})}),(0,r.jsx)(f.u_.Footer,{children:(0,r.jsx)(d.z,{disabled:b,type:"submit",form:c.e,full:!0,large:!0,children:(0,o.t)(b?"creating":"create_space")})})]})]})},C=s.gk.create(function(e){var t=e.spaceGroupId,n=e.postType,i=e.prefillData,o=(0,u.wh)().currentCommunityMember;return(0,a.vb)(o)?(0,r.jsx)(k,{spaceGroupId:t,selectedPostType:n,prefillData:i}):(0,r.jsx)(N,{spaceGroupId:t,postType:n,prefillData:i})}),E=function(){return(0,s.dd)(C)}},334938:function(e,t,n){n.d(t,{I:()=>o});var r=n(552676),i=n(957363),o=function(e){var t=e.profile,n=e.className,o=void 0===n?"!h-[3rem] !w-[3rem]":n;return(0,r.jsx)(r.Fragment,{children:t.avatar_url?(0,r.jsx)("img",{src:t.avatar_url,alt:t.name,className:"rounded-full ".concat(o),loading:"lazy"}):(0,r.jsx)(i.JO,{type:"120-ai-bot",size:120,className:o})})}},7144:function(e,t,n){n.d(t,{x:()=>i});var r=n(441342),i=function(){var e=(0,r.wh)(),t=e.currentCommunity;return!!(!e.isLoading&&(null==t?void 0:t.analytics_filters_feature_flag_enabled))}},222542:function(e,t,n){n.d(t,{c:()=>G});var r=n(552676),i=n(757105),o=n(497202),a=n(739792),s=n(775148),l=n(957363),c=n(380171),u=n(381636),d=n(434519),f=n(275271),m=n(342417),p=n(522974),b=n(701168),y=n(60878),v=n(39905),h=n(970592),g=n(900795),_=function(e){var t=e.openFilePicker;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[(0,r.jsx)("div",{className:"text-dark",children:(0,r.jsx)(l.JO,{className:"!h-[25px] !w-[25px]",type:"25-arrow",size:25,useWithStrokeCurrentColor:!0})}),(0,r.jsx)(u.Z.LabelMd,{weight:"semibold",children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.title")}),(0,r.jsx)(u.Z.LabelSm,{as:"div",children:(0,r.jsx)(g.w,{content:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.description")})}),(0,r.jsx)(v.z,{variant:"secondary",onClick:function(e){e.stopPropagation(),t()},children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.button")})]})},x=function(e){var t=e.files,n=e.setFiles,i=e.openFilePicker;return(0,r.jsx)("div",{className:"flex size-full flex-col",children:(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"flex min-h-full w-full flex-col items-center justify-center gap-4 py-4",children:[(0,r.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-2",children:t.map(function(e){var i,o;return(0,r.jsxs)("div",{className:"text-dark bg-tertiary border-primary flex w-full max-w-[450px] flex-row justify-between rounded-lg border p-2 text-base",children:[(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)(l.JO,{className:"mr-3",type:"20-ai-file",size:20,useWithStrokeCurrentColor:!0}),(0,r.jsx)(u.Z.BodySm,{children:null==(i=e.file)?void 0:i.name})]}),(0,r.jsx)("div",{className:"flex",children:"valid"===e.status?(0,r.jsx)(l.JO,{type:"20-close",size:20,className:"cursor-pointer",useWithStrokeCurrentColor:!0,onClick:function(r){r.stopPropagation(),n(t.filter(function(t){var n,r;return(null==(n=t.file)?void 0:n.name)!==(null==(r=e.file)?void 0:r.name)}))}}):(0,r.jsx)(l.JO,{type:"loader",size:20,useWithStrokeCurrentColor:!0})})]},null==(o=e.file)?void 0:o.name)})}),(0,r.jsx)(v.z,{variant:"secondary",onClick:function(e){e.stopPropagation(),i()},children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.upload_more")})]})})})};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function S(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(e,t)||k(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}}var P=function(){var e=O((0,f.useState)(!1),2),t=e[0],n=e[1],i=O((0,f.useState)([]),2),l=i[0],g=i[1],P=(0,o.dd)(),N=G(),C=(0,h.lx)({onSuccess:function(){P.remove()}}),E=(0,p.A)(),I=E.uploadFile,A=E.status,L=E.response,T=E.isError,D=(0,y.pm)().error,M=(0,m.uI)({multiple:!0,accept:{"text/plain":[".txt"],"application/pdf":[".pdf"],"application/x-subrip":[".srt"]},noClick:l.length>0,maxSize:0x6400000,onDropAccepted:function(e){if(l.length+e.length>15)return void D((0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.max_files",{max_files:15}));e.forEach(function(e){I(e),g(function(t){return((function(e){if(Array.isArray(e))return j(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||k(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{file:e,signedId:null,status:"selected"}])})})},onDropRejected:function(e){e.forEach(function(e){D((0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.rejected",{file_name:e.file.name}))})}}),F=M.getRootProps,B=M.getInputProps,R=M.open;return(0,f.useEffect)(function(){T&&(L?L.filename&&(g(l.filter(function(e){var t;return(null==(t=e.file)?void 0:t.name)!==L.filename})),D((0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.file_upload_failed",{file_name:L.filename}))):(g([]),D((0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.uploader.errors.upload_failed")))),"completed"===A&&L&&l.find(function(e){var t;return(null==(t=e.file)?void 0:t.name)===L.filename&&"selected"===e.status})&&g(function(e){return e.map(function(e){var t;return L.filename===(null==(t=e.file)?void 0:t.name)?S(w({},e),{signedId:L.signed_id,status:"valid"}):e})})},[A,L,T,D,l]),(0,r.jsxs)(d.u_,{isOpen:P.visible,onClose:P.hide,children:[(0,r.jsx)(d.u_.Overlay,{}),(0,r.jsxs)(d.u_.Content,{size:"auto",className:"h-3 max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[500px]",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between px-5 py-4",children:[(0,r.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.title")}),(0,r.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,r.jsx)("li",{children:(0,r.jsx)(c.T,{placement:"bottom",content:(0,a.t)("quick_post_v2.header.close"),children:(0,r.jsx)(s.h,{variant:"secondary",iconSize:20,onClick:P.hide,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,a.t)("quick_post_v2.header.close")})})})})]}),(0,r.jsx)("div",{className:"flex h-full flex-row overflow-hidden pb-4",children:(0,r.jsxs)("div",S(w({},F()),{className:(0,b.A)("focus-within:border-secondary border-primary mx-4 mb-4 flex size-full items-center justify-center rounded-md border border-dashed",{"cursor-pointer":0===l.length}),children:[0===l.length&&(0,r.jsx)(_,{openFilePicker:R}),l.length>0&&(0,r.jsx)(x,{files:l,setFiles:g,openFilePicker:R}),(0,r.jsx)("input",S(w({},B()),{type:"file",className:"hidden"}))]}))}),(0,r.jsx)("footer",{className:"border-primary flex items-center justify-end border-t px-5 py-4","data-testid":"quick-post-footer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v.z,{type:"button",variant:"secondary",onClick:function(){P.hide(),N.show()},children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.back")}),(0,r.jsx)(v.z,{variant:"circle",type:"button",disabled:t||0===l.length||l.some(function(e){return"valid"!==e.status}),onClick:function(){n(!0),C.mutate(l.map(function(e){var t;return null!=(t=e.signedId)?t:""}).filter(function(e){return e.length>0}),{onError:function(){n(!1),D((0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.errors.upload_failed"))}})},children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.add")})]})})]})]})},N=i.gk.create(function(){return(0,r.jsx)(P,{})}),C=n(767900),E=n(500184),I=n(196619),A=n(359892),L=function(){var e,t;return(0,r.jsx)("div",{className:"flex-1 overflow-auto px-5 py-4","data-ai-scrollable":!0,children:(0,r.jsxs)("div",{className:"trix-v2 mx-auto grid h-full max-w-3xl grid-rows-[auto,auto,1fr]",children:[(0,r.jsx)(I.n,{maxLength:255,draggable:!1,name:"title",autoFocus:!0,placeholder:(0,a.t)("settings.community_bot.knowledge.custom.placeholders.title"),className:"bg-primary text-dark mb-2 block w-full resize-none border-none p-0 text-2xl font-bold focus:ring-0",rows:1,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},tabIndex:0}),(0,r.jsx)(A.$,(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},E.rp),t=t={placeholder:(0,a.t)("settings.community_bot.knowledge.custom.placeholders.body"),name:"body.body",className:"h-full",editorClassName:"h-full quick-post-modal--v2"},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e))]})})},T=n(227851),D=function(e){var t,n;return void 0===e||void 0===e.body||(null==e||null==(n=e.body)||null==(t=n.content)?void 0:t.length)===1&&"paragraph"===e.body.content[0].type&&!e.body.content[0].content},M=function(e){var t=e.label,n=e.onBack,i=(0,T.Gc)(),o=i.watch,s=i.formState.isSubmitting,l=o(),c=l.title,u=l.body,d=!c||D(u)||s;return(0,r.jsx)("footer",{className:"border-primary flex items-center justify-end border-t px-5 py-4","data-testid":"quick-post-footer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[n&&(0,r.jsx)(v.z,{type:"button",variant:"secondary",onClick:n,children:(0,a.t)("settings.community_bot.knowledge.custom.add_file_modal.footer.back")}),(0,r.jsx)(v.z,{disabled:d,type:"submit",variant:"circle",children:t})]})})},F=function(e){var t=e.defaultValues,n=e.onSubmit,i=e.actionLabel,o=e.onBack;return(0,r.jsxs)(C.l,{defaultValues:t,mode:"all",className:"h-[calc(100%-62px)]",formClassName:"h-full flex flex-col",onSubmit:n,children:[(0,r.jsx)(L,{}),(0,r.jsx)(M,{label:i,onBack:o})]})},B=function(e){var t=e.title,n=(0,o.dd)();return(0,r.jsxs)("header",{className:"border-primary flex items-center justify-between border-b px-5 py-4",children:[(0,r.jsx)(u.Z.TitleSm,{weight:"semibold",children:t}),(0,r.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,r.jsx)("li",{children:(0,r.jsx)(c.T,{placement:"bottom",content:(0,a.t)("quick_post_v2.header.close"),children:(0,r.jsx)(s.h,{variant:"secondary",iconSize:20,onClick:n.remove,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,a.t)("quick_post_v2.header.close")})})})})]})},R=function(){var e=(0,o.dd)(),t=(0,h.Y7)({onSuccess:e.remove}),n=G();return(0,r.jsxs)(d.u_,{isOpen:e.visible,onClose:e.hide,children:[(0,r.jsx)(d.u_.Overlay,{}),(0,r.jsxs)(d.u_.Content,{size:"auto",className:"h-full max-h-full max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[550px]",children:[(0,r.jsx)(B,{title:(0,a.t)("settings.community_bot.knowledge.custom.create_modal.title")}),(0,r.jsx)(F,{defaultValues:{},onSubmit:function(e){return t.mutate(e)},actionLabel:(0,a.t)("settings.community_bot.knowledge.custom.add"),onBack:function(){e.hide(),n.show()}})]})]})},q=i.gk.create(function(){return(0,r.jsx)(R,{})}),z=function(){var e=(0,o.dd)(),t=(0,i.dd)(q),n=(0,i.dd)(N);return(0,r.jsxs)(d.u_,{isOpen:e.visible,onClose:e.hide,children:[(0,r.jsx)(d.u_.Overlay,{}),(0,r.jsxs)(d.u_.Content,{size:"auto",className:"h-3 max-w-[720px] overflow-visible !rounded-t-none sm:h-full sm:!rounded-t-lg md:max-h-[80vh] lg:max-h-[260px]",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between px-8 pb-4 pt-6",children:[(0,r.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.title")}),(0,r.jsx)("ul",{className:"text-darkest flex list-none items-center space-x-2",children:(0,r.jsx)("li",{children:(0,r.jsx)(c.T,{placement:"bottom",content:(0,a.t)("quick_post_v2.header.close"),children:(0,r.jsx)(s.h,{variant:"secondary",iconSize:20,onClick:e.hide,iconClassName:"!text-dark",name:"20-close",ariaLabel:(0,a.t)("quick_post_v2.header.close"),className:"!p-0"})})})})]}),(0,r.jsxs)("div",{className:"flex h-full flex-row gap-6 px-6 pb-6",children:[(0,r.jsx)("button",{type:"button",className:"hover:border-secondary flex h-full w-1/2 cursor-pointer flex-col justify-center rounded-lg border","aria-label":(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.title"),onClick:function(){e.hide(),t.show()},children:(0,r.jsxs)("div",{className:"m-2 flex flex-col items-start justify-start gap-2 p-3",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.JO,{className:"!h-[36px] !w-[36px]",type:"36-ai-snippet",size:36})}),(0,r.jsx)(u.Z.LabelMd,{weight:"semibold",children:(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.title")}),(0,r.jsx)(u.Z.LabelXs,{children:(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.snippet.description")})]})}),(0,r.jsx)("button",{type:"button",className:"hover:border-secondary flex h-full w-1/2 cursor-pointer flex-col justify-center rounded-lg border","aria-label":(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.file.title"),onClick:function(){e.hide(),n.show()},children:(0,r.jsxs)("div",{className:"m-2 flex flex-col items-start justify-start gap-2 p-3",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.JO,{className:"!h-[36px] !w-[36px]",type:"36-ai-file",size:36})}),(0,r.jsx)(u.Z.LabelMd,{weight:"semibold",children:(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.file.title")}),(0,r.jsx)(u.Z.LabelXs,{children:(0,a.t)("settings.community_bot.knowledge.custom.add_content_modal.file.description")})]})})]})]})]})},U=i.gk.create(function(){return(0,r.jsx)(z,{})}),G=function(){return(0,i.dd)(U)}},533989:function(e,t,n){n.d(t,{S:()=>b});var r=n(552676),i=n(619803),o=n.n(i),a=n(30154),s=n(739792),l=n(656317),c=function(e){var t=e.value,n=e.onChange;return(0,r.jsx)(l.wn,{chip:(0,s.t)("settings.community_bot.knowledge.filters.name_chip"),title:(0,s.t)("settings.community_bot.knowledge.filters.name_title"),selectedText:t,onApply:function(e){return n(e||"")},isInitialOpen:!1,shouldShowRemoveButton:!0,children:(0,r.jsx)(l.xo,{name:"name-filter",placeholder:(0,s.t)("settings.community_bot.knowledge.filters.name_search_placeholder"),defaultValue:t})})},u=n(858610),d=function(e){var t=e.value,n=e.onChange;return(0,r.jsx)(u.Y,{localeNamespace:"community_bot.bot_builder.knowledge_page.filters.space_groups",isInitialOpen:!1,onApply:n,changeUrl:!1,value:t,shouldShowRemoveButton:!0})},f=n(744959),m=n(365260),p=function(e){var t,n=e.value,i=e.onChange,o=e.options,a=(null==(t=o.find(function(e){return e.value===n}))?void 0:t.label)||"";return(0,r.jsxs)(f.w,{onApply:function(e){if(null===e)i("");else e&&(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&"value"in e&&"string"==typeof e.value&&i(e.value)},children:[(0,r.jsx)(f.w.Chip,{renderSelectedValue:function(){return a},children:(0,s.t)("settings.community_bot.knowledge.filters.type_chip")}),(0,r.jsx)(f.w.Popover,{title:(0,s.t)("settings.community_bot.knowledge.filters.type_title"),isInitialOpen:!1,shouldShowRemoveButton:!0,children:(0,r.jsx)(m.d,{options:o,legend:(0,s.t)("settings.community_bot.knowledge.filters.type_legend"),value:n})})]})},b=function(e){var t=e.name,n=e.onNameChange,i=e.type,s=e.onTypeChange,l=e.typeOptions,u=e.spaceGroup,f=e.onSpaceGroupChange,m=e.showSpaceGroup,b=e.isModal;return(0,r.jsx)("div",{className:o()("bg-primary border-primary flex items-center justify-between gap-x-1 border-b py-3",void 0!==b&&b?"px-5":"px-6 lg:px-9"),children:(0,r.jsxs)(a.x,{children:[(0,r.jsx)(c,{value:t,onChange:n}),(0,r.jsx)(p,{value:i,onChange:s,options:l}),void 0!==m&&m&&f&&(0,r.jsx)(d,{value:u||"",onChange:f})]})})}},293291:function(e,t,n){n.d(t,{OH:()=>y,X5:()=>h,q_:()=>v,vQ:()=>g});var r=n(932699),i=n(131906),o=n(739792),a=n(441342),s=n(93199),l=n(547144),c=n(60878);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)})}}function m(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b=["internal_api","community_bot","agents"],y=function(e){var t=e.currentPage,n=e.perPage,r=void 0===n?10:n,o=e.enabled;return(0,i.useQuery)({queryKey:m(b).concat([t,r]),queryFn:function(){return(0,s.UT)(l.av.communityBot.agents.index({params:{page:t,per_page:r}}))},enabled:void 0===o||o,staleTime:3e5,cacheTime:6e5})},v=function(e){var t=e.id;return(0,i.useQuery)({queryKey:m(b).concat([t]),queryFn:function(){return(0,s.UT)(l.av.communityBot.agents.show({id:t}))}})},h=function(){var e=(0,c.pm)().success;return(0,i.useMutation)(function(){return f(function(){return p(this,function(e){switch(e.label){case 0:return[4,(0,s.Cu)(l.av.communityBot.agents.create())];case 1:return[2,e.sent()]}})})()},{onSuccess:function(){e((0,o.t)("changes_saved"))}})},g=function(e){var t=e.id,n=(0,i.useQueryClient)(),u=(0,c.pm)(),d=u.success,y=u.error,v=(0,a.wh)().refetch;return(0,i.useMutation)(function(e){var n=1===Object.keys(e).length&&"enabled"in e;return(0,s.aU)(l.av.communityBot.agents.update({id:t}),{community_bot_profile:n?{enabled:e.enabled}:(0,r.omit)(e,"enabled")})},{onSuccess:function(e){n.invalidateQueries(m(b).concat([e.id])),n.invalidateQueries(m(b)),d((0,o.t)("changes_saved"))},onError:function(e){return f(function(){var t,n;return p(this,function(i){switch(i.label){case 0:return[4,v()];case 1:return i.sent(),(null==e||null==(t=e.body)?void 0:t.error_details)?(n=(0,r.values)((0,r.omit)(e.body.error_details,"message","success")),y((0,r.flatten)(n).join(", "))):y((0,o.t)("request_failure_message")),[2]}})})()}})}},445665:function(e,t,n){n.d(t,{h$:()=>f,qN:()=>m,t8:()=>d});var r=n(131906),i=n(739792),o=n(93199),a=n(547144),s=n(60878);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var c=["internal_api","community_bot","spaces"],u=["internal_api","community_bot","setting"],d=function(e){var t=e.currentPage,n=e.name,i=e.type,s=e.spaceGroup;return(0,r.useQuery)({queryKey:[c,t,n,i,s],queryFn:function(){return(0,o.UT)(a.av.communityBot.spaces.index({params:l({page:t,per_page:10},n?{name:n}:{},i?{type:i}:{},s?{space_group:s}:{})}))}})},f=function(){return(0,r.useQuery)({queryKey:u,queryFn:function(){return(0,o.UT)(a.av.communityBot.setting.show())}})},m=function(){var e=(0,r.useQueryClient)(),t=(0,s.pm)(),n=t.success,d=t.error;return(0,r.useMutation)(function(e){var t={community_bot_setting:l({},e)};return(0,o.aU)(a.av.communityBot.setting.update(),t)},{onSuccess:function(){e.invalidateQueries(u),e.invalidateQueries(c),n((0,i.t)("changes_saved"))},onError:function(){d((0,i.t)("request_failure_message"))}})}},970592:function(e,t,n){n.d(t,{Ie:()=>m,Y7:()=>y,_W:()=>b,gh:()=>f,ln:()=>p,lx:()=>v});var r=n(131906),i=n(739792),o=n(93199),a=n(547144),s=n(435769),l=n(60878);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var d=["internal_api","community_bot","snippets"],f=function(e){var t=e.currentPage,n=e.title,i=e.type;return(0,r.useQuery)({queryKey:((function(e){if(Array.isArray(e))return c(e)})(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}}(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t,n,i]),queryFn:function(){return(0,o.UT)(a.av.communityBot.snippets.index({params:u({page:t,per_page:30},n?{title:n}:{},i?{type:i}:{})}))}})},m=function(e){var t=e.id;return(0,r.useQuery)(["snippets",t,"preview"],function(){return(0,o.UT)(a.av.communityBot.snippets.showPreview({id:t}))})},p=function(e){var t=e.onSuccess,n=(0,r.useQueryClient)(),c=(0,l.pm)(),u=c.success,f=c.error;return(0,r.useMutation)(function(e){return(0,o.pC)(a.av.communityBot.snippets.bulkDestroy(),{ids:e.ids})},{onSuccess:function(e,r){var o,a;n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:s.ib}),null==(o=r.ids)||o.forEach(function(e){n.invalidateQueries(["snippet",e])}),t(),u((0,i.t)("settings.community_bot.knowledge.custom.resources_deleted_success",{count:null==(a=r.ids)?void 0:a.length}))},onError:function(){f((0,i.t)("request_failure_message"))}})},b=function(e){var t=e.onSuccess,n=(0,r.useQueryClient)(),c=(0,l.pm)(),f=c.success,m=c.error;return(0,r.useMutation)(function(e){var t=e.id,n=u({},function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["id"]));return(0,o.aU)(a.av.communityBot.snippets.update({id:t}),n)},{onSuccess:function(e){n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:s.ib}),n.invalidateQueries(["snippets",e.id]),t(),f((0,i.t)("changes_saved"))},onError:function(){m((0,i.t)("request_failure_message"))}})},y=function(e){var t=e.onSuccess,n=(0,l.pm)(),c=n.success,u=n.error,f=(0,r.useQueryClient)();return(0,r.useMutation)(function(e){return(0,o.Cu)(a.av.communityBot.snippets.create(),{snippet:e})},{onSuccess:function(){f.invalidateQueries({queryKey:d}),f.invalidateQueries({queryKey:s.ib}),c((0,i.t)("settings.community_bot.knowledge.custom.resource_created_success")),t()},onError:function(){return u((0,i.t)("quick_post.toasts.failed_to_create"))}})},v=function(e){var t=e.onSuccess,n=(0,l.pm)(),c=n.success,u=n.error,f=(0,r.useQueryClient)();return(0,r.useMutation)(function(e){return(0,o.Cu)(a.av.communityBot.snippets.createFromFiles(),{files:e})},{onSuccess:function(){f.invalidateQueries({queryKey:d}),f.invalidateQueries({queryKey:s.ib}),c((0,i.t)("settings.community_bot.knowledge.custom.files_uploaded")),t()},onError:function(){return u((0,i.t)("quick_post.toasts.failed_to_create"))}})}},390505:function(e,t,n){n.d(t,{o:()=>e1});var r=n(552676),i=n(275271),o=n(932699),a=n(903225),s=n(739792),l=n(131906),c=n(861853),u=n(93199),d=n(698173),f=function(e,t){var n=(0,c.Dk)(),r=n.adminChats,i=n.memberChats,o=t?i:r,a=null==o?void 0:o.find(function(t){return t.id===e}),s=(0,l.useQuery)(["community-inbox","chat-room",e],function(){return(0,u.UT)(d.a.communityInbox.show({id:e}))},{enabled:!!e&&!a}),f=s.data;return{isChatLoading:s.isLoading,currentChat:a||f,error:s.error}},m=n(281772),p=n(977384),b=function(e){return e.inbox.messages},y=n(660512),v=n(72220),h=n(751169),g=n(60878),_=n(547144),x=n(710749);function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var w=function(e){var t=e.id,n=e.params,r=void 0===n?{per_page:20}:n,s=e.isDms,f=void 0!==s&&s,m=(0,c.Dk)(),p=m.setMessages,b=m.appendMessage,y=m.setScrollAction,v=m.setCurrentChatId,h=(0,a.TH)().pathname,g=(0,a.k6)(),w=h.startsWith("/messages/new");(0,i.useEffect)(function(){v(t)},[t,v]);var S=(0,l.useInfiniteQuery)(["community-inbox","chat-room","messages",t],function(e){var n,i=e.pageParam;return n=void 0===i?1:i,(0,u.UT)(d.a.communityInbox.fetchMessages({id:t,params:j({page:n},r)}))},{select:function(e){var t=e.pages,n=void 0===t?[]:t;return{pages:(0,o.flatten)(n.map(function(e){return e.records})),pageParams:n.map(function(e){return e.page}),pagesList:n}},enabled:!!t,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){1===e.pagesList.length&&y(x.aO.FIRST_LOAD),p(e.pages)},refetchOnWindowFocus:!1}),O=S.isLoading,k=S.fetchNextPage,P=S.hasNextPage,N=S.isFetching;return{isMessagesLoading:O,createMessage:(0,l.useMutation)(function(e){var n=e.formValues,r=e.botChatRoomId,i=t||r;return(0,u.Cu)(d.a.communityInbox.createMessage({id:Number(i)}),j({},n))},{onSuccess:function(e){y(x.aO.NEW_MESSAGE),b(e,f?"member":"admin"),w&&e.community_inbox_chat_id&&g.push((0,_.Gr)({id:String(e.community_inbox_chat_id)}))},onError:function(e){console.error("Error while creating message",e)}}).mutateAsync,hasNextPage:P,fetchNextPage:k,isFetching:N}},S=n(619803),O=n.n(S),k=n(801771),P=n(768129),N=n(441342),C=n(857338),E=n(767900),I=n(326120),A=n(381636),L=n(227851),T=n(117383),D=n(957363),M=n(380171),F=n(513467),B=n(515517),R=n(943544),q=function(){return(0,r.jsxs)("div",{className:"m-2 flex flex-col items-start gap-1",children:[(0,r.jsx)(A.Z.LabelSm,{weight:"medium",color:"text-[#F4F4F5]",children:(0,s.t)("community_inbox.admin_send_message_tooltip.title")}),(0,r.jsx)(A.Z.BodySm,{color:"text-[#D4D4D8]",children:(0,s.t)("community_inbox.admin_send_message_tooltip.description")})]})},z=function(e){var t=e.isSubmitting,n=e.isUploading,i=e.editorHasNoContent,o=e.handleSubmit,a=e.isDms,l=void 0===a||a,c=(0,L.Gc)().setValue,u=t||n,d=function(e){e&&c("pause_ai_minutes",e),o()},f=(0,B.q)(),m=function(){l?d():d(5)};return(0,T.y1)("enter",m,{enabled:!l&&!f,enableOnContentEditable:!0},[l,f]),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(M.T,{placement:"top",interactive:!1,arrow:l,content:l?(0,s.t)("community_inbox.send_message"):(0,r.jsx)(q,{}),children:(0,r.jsx)(F.o,{type:"submit",onClick:m,disabled:t||i()||n,id:"tiptap-send","aria-label":(0,s.t)("community_inbox.send_message"),icon:u?"loader":"28-message-send",size:u?20:28,isLight:!i(),shouldAnimateSpin:u,isSendButton:!0})}),!l&&(0,r.jsxs)(R.Lt,{className:"py-2",direction:"bottom-end",button:(0,r.jsx)(R.Lt.MenuButton,{id:"send-pause-ai",children:(0,r.jsx)(D.JO,{type:"16-chevron-down",className:"text-gray-400",size:16})}),children:[(0,r.jsx)("div",{className:"mb-1.5",children:(0,r.jsx)(A.Z.BodyXs,{weight:"font-bold",color:"text-light",children:(0,r.jsx)("span",{className:"uppercase",children:(0,s.t)("community_bot.pause_ai.send_and_pause_ai")})})}),(0,r.jsx)(R.Lt.Item,{onClick:function(){return d(5)},children:(0,r.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,r.jsx)(D.JO,{type:"16-pause-timer",size:16}),(0,r.jsx)(A.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.five_minutes")})]})}),(0,r.jsx)(R.Lt.Item,{onClick:function(){return d(15)},children:(0,r.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,r.jsx)(D.JO,{type:"16-pause-timer",size:16}),(0,r.jsx)(A.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.fifteen_minutes")})]})}),(0,r.jsx)(R.Lt.Item,{onClick:function(){return d(60)},children:(0,r.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,r.jsx)(D.JO,{type:"16-pause-timer",size:16}),(0,r.jsx)(A.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.one_hour")})]})}),(0,r.jsx)(R.Lt.Item,{onClick:function(){return d(525600)},children:(0,r.jsxs)("div",{className:"hover:bg-tertiary flex cursor-pointer items-center gap-2 rounded-md px-1 py-2",children:[(0,r.jsx)(D.JO,{type:"16-pause-timer",size:16}),(0,r.jsx)(A.Z.BodySm,{weight:"font-medium",children:(0,s.t)("community_bot.pause_ai.indefinitely")})]})})]})]})},U={body:{type:"doc",content:[]},pause_ai_minutes:null},G=function(e){var t=e.onSubmit,n=e.isProcessing,a=e.agentName,l=e.isDms,c=e.isPreviewMode,u=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=u.current;e&&(n?e.view.dom.blur():c||e.view.dom.focus())},[n,c]),(0,r.jsx)(E.l,{onSubmit:t,defaultValues:U,children:function(e){var i=e.getValues;return(0,r.jsxs)("div",{className:"group relative",children:[(0,r.jsx)(I.T,{menuBarComponent:z,placeholder:(0,s.t)("community_inbox.message_bot",{agent_name:(0,o.truncate)(a,{length:40})}),className:"!mb-2 !flex-row items-center justify-between !p-0 !py-[0.1875rem] !pr-4",messageBoxClassName:"grow",editorClassName:"px-4 py-3",onSubmit:function(e){var n=i().pause_ai_minutes;n?t({body:e,pause_ai_minutes:n}):t({body:e})},disabled:n,editorRef:u,menubarProps:{isDms:l},shouldShowPreviewBlocks:!1,shouldDisableEntities:!0},"message-box-".concat(a)),n&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"invisible mt-[-50px] rounded-lg bg-black px-3 py-2 group-hover:visible",children:(0,r.jsx)(A.Z.LabelSm,{weight:"font-medium",color:"text-white",children:(0,s.t)("community_inbox.please_wait_message")})})})]})}})},W=function(e){var t=e.aiPaused;return(0,r.jsx)("div",{className:"before:border-primary relative z-0 mx-5 flex items-center justify-center before:absolute before:bottom-0 before:left-0 before:top-1/2 before:z-[-1] before:m-0 before:w-full before:border-t before:border-solid before:content-['']",children:(0,r.jsxs)("span",{className:"bg-primary text-disabled text-xxs flex items-center gap-2 border-none px-[15px] py-[5px] font-bold uppercase",children:[(0,s.t)(t?"community_inbox.ai_paused":"community_inbox.ai_resumed"),(0,r.jsx)(D.JO,{type:"16-stars-ai",size:16})]})})},Q=function(e){var t=e.agentName;return(0,r.jsx)("div",{className:"bg-warning-light mx-1 my-4 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JO,{type:"16-info",size:16}),(0,r.jsx)(A.Z.LabelMd,{weight:"semibold",color:"text-dark dark:text-white",children:(0,s.t)("community_inbox.broadcast_mode",{agent_name:t})})]})})},Z=n(701168),K=n(39905),H=function(e){var t=e.communityBotProfile,n=e.conversationStatus,i=e.isDms,o=(0,a.k6)(),l=(0,c.Dk)().setCurrentBotProfile,u="getting_too_long"===n?(0,s.t)("community_inbox.conversation_getting_too_long"):(0,s.t)("community_inbox.conversation_too_long");return i?(0,r.jsxs)("div",{className:(0,Z.A)("mb-4 flex items-center gap-2 rounded-2xl p-3 pl-4",{"bg-amber-50 dark:bg-[#F59E0B26]":"getting_too_long"===n||"too_long"===n,"bg-red-50 dark:bg-[#EF444426]":"exceeded"===n}),children:[(0,r.jsx)("div",{className:"shrink-0 grow basis-0",children:(0,r.jsx)(A.Z.LabelSm,{weight:"medium",color:"text-[#545861] dark:text-[#E4E7EB]",children:u})}),(0,r.jsx)("div",{children:(0,r.jsx)(K.z,{variant:"circle",onClick:function(){l(t),o.push((0,_.W9)())},children:(0,s.t)("community_inbox.start_new_conversation")})})]}):"too_long"===n||"exceeded"===n?(0,r.jsx)("div",{className:(0,Z.A)("mb-4 flex items-center gap-2 rounded-2xl p-3 pl-4",{"bg-amber-50 dark:bg-[#F59E0B26]":"too_long"===n,"bg-red-50 dark:bg-[#EF444426]":"exceeded"===n}),children:(0,r.jsx)("div",{className:"shrink-0 grow basis-0",children:(0,r.jsx)(A.Z.LabelSm,{weight:"medium",color:"text-[#545861] dark:text-[#E4E7EB]",children:(0,s.t)("community_inbox.conversation_too_long_admin")})})}):null},V=n(664657),J=n(532602);let $=n.p+"static/react/components/SettingsApp/CommunityInbox/BotChatRoom/ChatWindow/thinking-0121ade9713134b6.gif";var Y=function(e){var t=e.name;return(0,r.jsx)(J.s,{isFullRounded:!0,name:t,size:"9",src:$})},X=function(e){var t=e.message,n=t.author_type,i=t.community_bot_profile,o=t.community_member,a=t.is_processing,s="community_member"===n,l=s?(null==o?void 0:o.name)||"":(null==i?void 0:i.name)||"",c=s?(null==o?void 0:o.avatar_url)||"":(null==i?void 0:i.avatar_url)||"",u=!s&&!(null==i?void 0:i.avatar_url);return a?(0,r.jsx)(Y,{name:l}):u?(0,r.jsx)(D.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px]"}):(0,r.jsx)(V.W,{src:c,name:l,size:"9",isFullRounded:!0})},ee=n(624804);function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var en=function(e){var t,n=e.sources,i=(t=(0,ee.k)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return et(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],l=n.length;if(!o){var c=1===l?(0,s.t)("community_inbox.messages.sources.count_singular"):(0,s.t)("community_inbox.messages.sources.count_plural",{count:l});return(0,r.jsx)(K.z,{variant:"secondary-light",type:"button",onClick:a,small:!0,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JO,{type:"16-ai-sources",size:16}),c]})})}return(0,r.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,r.jsx)("div",{className:"flex flex-col gap-2",children:n.map(function(e){return(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-default hover:text-default text-sm font-normal underline",children:e.title||e.url},"source-".concat(e.url))})}),(0,r.jsx)(K.z,{variant:"secondary-light",type:"button",onClick:a,small:!0,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JO,{type:"16-ai-sources",size:16}),(0,s.t)("community_inbox.messages.sources.hide")]})})]})},er=function(e){var t=e.authorName,n=e.timestamp,i=e.body,o=e.sources,a=e.isUserMessage,s=(0,C.H)(n).time;return(0,r.jsxs)("div",{className:"min-w-0 grow",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("div",{className:"max-w-[200px] truncate",children:(0,r.jsx)(A.Z.LabelSm,{weight:"semibold",color:"text-darkest",truncate:!0,children:t})}),(0,r.jsx)(A.Z.LabelSm,{weight:"medium",color:"text-timestamp",children:s})]}),(0,r.jsx)("div",{className:"text-dark whitespace-pre-line text-sm font-normal",children:(0,r.jsx)(I.T,{editable:!1,rich_text_body:i,shouldShowPreviewBlocks:a,shouldSupportCodeBlocks:!0,shouldSupportTables:!0})}),o&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(en,{sources:o})})]})},ei=function(e){var t,n,i=e.message,o=i.id,a=i.body,s=i.author_type,l=i.community_bot_profile,c=i.community_member,u=i.created_at,d=i.updated_at,f=i.sources,m="".concat(o,"-").concat(d),p="community_member"===s,b=p?null!=(t=null==c?void 0:c.name)?t:"":null!=(n=null==l?void 0:l.name)?n:"";return(0,r.jsx)("div",{className:"px-4 py-3",id:o.toString(),children:(0,r.jsxs)("div",{className:"flex w-full items-start justify-start gap-3",children:[(0,r.jsx)("div",{className:"pt-0.5",children:(0,r.jsx)(X,{message:i})}),(0,r.jsx)(er,{isUserMessage:p,authorName:b,timestamp:u,body:a,sources:f})]})},m)},eo=n(240761),ea=function(e){var t=e.createMessage,n=(0,c.Dk)().currentBotProfile;return(0,r.jsxs)("div",{className:"mx-2 mb-4 flex flex-col items-start",children:[(null==n?void 0:n.avatar_url)&&(0,r.jsx)("img",{src:null==n?void 0:n.avatar_url,alt:null==n?void 0:n.name,className:"mb-2 size-12 rounded-full",loading:"lazy"}),!(null==n?void 0:n.avatar_url)&&(0,r.jsx)("div",{children:(0,r.jsx)(D.JO,{type:"48-ai-bot",size:48,className:"mb-2 !h-[3rem] !w-[3rem]"})}),(0,r.jsx)(A.Z.TitleSm,{as:"h2",weight:"semibold",children:(0,s.t)("messaging.start_conversation")}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(A.Z.BodySm,{color:"text-default",children:(0,s.t)("messaging.bot_start_conversation",{name:null==n?void 0:n.name})})}),(null==n?void 0:n.suggested_questions)&&n.suggested_questions.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:n.suggested_questions.map(function(e){return(0,r.jsx)(eo.n,{question:e,onClick:function(){return t({body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}})}},e)})})]})},es=n(334938),el=function(e){var t=e.createMessage,n=(0,c.Dk)().currentBotProfile;if(!n)return null;var i=n.name,o=n.bio;return(0,r.jsxs)("div",{className:"mx-2 mb-4",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(es.I,{profile:n})}),(0,r.jsx)(A.Z.LabelMd,{as:"div",weight:"semibold",children:i}),o&&(0,r.jsx)("div",{className:"text-default mt-1 whitespace-pre-line text-sm font-normal",children:(0,r.jsx)(I.T,{editable:!1,rich_text_body:o})}),(null==n?void 0:n.suggested_questions)&&n.suggested_questions.length>0&&(0,r.jsx)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:n.suggested_questions.map(function(e){return(0,r.jsx)(eo.n,{question:e,onClick:function(){return t({body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}})}},e)})})]})},ec=n(87545),eu=n(22319),ed=function(e){var t=e.onRestart,n=(0,eu.TC)().isDarkAppearance;return(0,r.jsx)("div",{className:"mx-4 rounded-xl bg-[rgba(245,158,11,0.1)] p-4 dark:bg-[rgba(245,158,11,0.20)]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JO,{type:"16-ai-snooze",size:16,className:"text-[#191b1f] dark:text-white"}),(0,r.jsx)(A.Z.LabelSm,{weight:"semibold",color:"text-[#191b1f] dark:text-white",children:(0,s.t)("community_inbox.preview_paused_by_keywords")})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(A.Z.BodySm,{color:"text-[#545861] dark:text-gray-300",children:(0,s.t)("community_inbox.preview_paused_description")})})]}),(0,r.jsx)(ec.J,{onClick:t,variant:n?"light":"dark"})]})})},ef=function(e){return!(0,o.isNull)(null==e?void 0:e.id)&&(null==e?void 0:e.isAiSnoozed)},em=function(e){var t,n=e.messages,a=e.createMessage,s=e.isDms,l=e.fetchNextPage,c=e.hasNextPage,u=e.isLoading,d=e.isNewConversation,f=e.isPreviewMode,m=e.agentName,p=e.isProcessing,b=e.isDisabled,y=e.chatCommunityMember,v=e.currentChat,h=e.onRestart,g=(0,i.createRef)(),_=f&&!(null==n?void 0:n.length),j={id:null,isAiSnoozed:null},w=(0,N.wh)().currentCommunityMember,S=(null==w?void 0:w.id)===(null==y?void 0:y.id),E=(null==v?void 0:v.conversation_status)||"normal",I=f&&n.some(function(e){return e.pause_keywords_detected_in_preview}),A=s||!S,L=!f&&"normal"!==E;return t=f?!I:!s||"normal"===E||"getting_too_long"===E,(0,r.jsxs)("div",{className:O()("bg-primary flex w-full flex-col justify-between",d||f?"h-full":"lg:h-[calc(100%-64px)]",s?"h-[calc(100dvh-64px)]":"h-[calc(100dvh-120px)]"),children:[c&&(0,r.jsx)(P.Z,{componentId:x.Or,fetchNewPage:l,onEvent:"scrollUp",messageId:null,isLoading:u}),(0,r.jsxs)("div",{id:x.Or,className:"overflow-auto px-2",children:[n.map(function(e){var t,n,a=e.id,s=e.ai_snoozed,l=e.created_at,c=e.pause_keywords_detected_in_preview,u=(0,C.H)(l).day,d=!(0,o.isFunction)(g)&&(null==g?void 0:g.current)!==u;g&&!(0,o.isFunction)(g)&&(g.current=u);var m=f?!!c:s;return(t=j,((0,o.isNull)(null==t?void 0:t.id)&&(0,o.isNull)(null==t?void 0:t.isAiSnoozed)||(n=j,!(0,o.isNull)(null==n?void 0:n.id)&&!(null==n?void 0:n.isAiSnoozed)))&&m)?j={id:a,isAiSnoozed:m}:ef(j)&&!m&&(j={id:a,isAiSnoozed:!1}),(0,r.jsxs)(i.Fragment,{children:[!f&&(0,r.jsx)(k.J,{showDateChangeLine:d,day:u}),(0,r.jsx)(ei,{message:e}),j.id===a&&(0,r.jsx)(W,{aiPaused:!0})]},a)}),!f&&!ef(j)&&(null==v?void 0:v.ai_snoozed)&&(0,r.jsx)(W,{aiPaused:null==v?void 0:v.ai_snoozed}),!f&&ef(j)&&!(null==v?void 0:v.ai_snoozed)&&(0,r.jsx)(W,{aiPaused:null==v?void 0:v.ai_snoozed}),f&&!ef(j)&&I&&(0,r.jsx)(W,{aiPaused:!0}),f&&I&&h&&(0,r.jsx)(ed,{onRestart:h})]}),A&&(0,r.jsxs)("div",{className:O()("px-4",f?"py-2":"pt-2"),children:[d&&(0,r.jsx)(ea,{createMessage:a}),_&&(0,r.jsx)(el,{createMessage:a}),b&&(0,r.jsx)(Q,{agentName:m||""}),!b&&(0,r.jsxs)(r.Fragment,{children:[L&&(0,r.jsx)(H,{communityBotProfile:null==v?void 0:v.community_bot_profile,conversationStatus:E,isDms:s}),t&&(0,r.jsx)(G,{onSubmit:a,isProcessing:p,agentName:s?m:null==y?void 0:y.name,isDms:s,isPreviewMode:f})]})]})]})},ep=function(e){var t=e.isDms,n=e.children;return(0,r.jsx)("div",{className:O()("bg-primary flex size-full flex-row",{"max-h-[calc(100vh-64px)]":!t}),children:n})},eb=n(807730),ey=n(117617),ev=n(775148),eh=n(664470),eg=n(536394),e_=function(){var e=(0,c.Dk)().updateChat,t=(0,g.pm)(),n=(0,l.useMutation)(function(e){return eg.MW.pauseAi({id:e})},{onSuccess:function(n){e(n,"admin"),t.success((0,s.t)("messaging.actions.pause_ai_success"))},onError:function(e){console.error("Error while creating chat",e)}}),r=n.mutateAsync,i=n.isLoading,o=(0,l.useMutation)(function(e){return eg.MW.resumeAi({id:e})},{onSuccess:function(n){e(n,"admin"),t.success((0,s.t)("messaging.actions.resume_ai_success"))},onError:function(e){console.error("Error while creating chat",e)}});return{pauseAi:r,isPauseAiLoading:i,resumeAi:o.mutateAsync,isResumeAiLoading:o.isLoading}},ex=n(691525),ej=n(485712),ew=n(529306),eS=n(779869),eO=n(494375);function ek(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var eP=function(){var e=e_().isResumeAiLoading,t=(0,eS.w)(),n=(0,N.wh)(),i=n.currentCommunity,o=n.isLoading,l=(0,a.k6)();return(0,r.jsx)("button",{type:"button",onClick:function(){var e;return(e=function(){var e,n;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!i)return[2];return[4,ew.c.getNextPlanWithFeature(i.current_plan.id.toString(),{plan_feature_flag:"ai_agents"})];case 1:return n=(null==(e=r.sent())?void 0:e.plan_tier)||"enterprise",[4,t.show({planTier:n,source:eO.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,s.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,s.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,s.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0,onSuccess:function(){l.push("/settings/ai-agents/agents")}})];case 2:return r.sent(),[2]}})},function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){ek(o,r,i,a,s,"next",e)}function s(e){ek(o,r,i,a,s,"throw",e)}a(void 0)})})()},disabled:o,className:"h-[34px] rounded-full border bg-[#15803D] px-4 transition-all duration-300 hover:bg-[#15803D]/90",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(D.JO,{type:"16-ai-agent",size:16,className:"text-white"}),(0,r.jsx)(A.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)(e?"community_bot.ai_resuming":"community_bot.resume_ai")})]})})};function eN(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var eC=function(e){var t,n,r,i,o=(0,ex.wh)().currentCommunity;return{isAgentEligibleButDisabled:(!(null==(t=e.community_bot_profile)?void 0:t.enabled)||!(null==(n=e.community_bot_profile)?void 0:n.allow_direct_messages))&&(null==o?void 0:o.ai_agents_feature_flag_enabled),isChatDisabled:e.disabled&&(null==(r=e.community_bot_profile)?void 0:r.enabled)&&(null==(i=e.community_bot_profile)?void 0:i.allow_direct_messages)}},eE=function(e){var t=e.chat,n=(0,g.pm)(),i=(0,ex.wh)().currentCommunity,o=e_(),a=o.pauseAi,l=o.isPauseAiLoading,c=o.resumeAi,u=o.isResumeAiLoading,d=(0,ej.k)(t.community_bot_profile),f=eC(t),m=f.isAgentEligibleButDisabled,p=f.isChatDisabled,b=function(e){var r;return(r=function(){return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(p)return[2];if(!m)return[3,1];return d.show(),[3,4];case 1:return r.trys.push([1,3,,4]),[4,e?a(t.id):c(t.id)];case 2:return r.sent(),[3,4];case 3:return r.sent(),n.error((0,s.t)("messaging.actions.pause_ai_error")),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){eN(o,n,i,a,s,"next",e)}function s(e){eN(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(null==i?void 0:i.ai_agents_feature_flag_enabled)?"too_long"===t.conversation_status||"exceeded"===t.conversation_status?null:t.ai_snoozed?(0,r.jsx)(M.T,{enabled:p,content:(0,s.t)("community_bot.pause_ai.tooltip"),children:(0,r.jsx)("button",{type:"button",onClick:function(){return b(!1)},className:(0,Z.A)("h-[34px] rounded-full border bg-[#15803D] px-4 transition-all duration-300 hover:bg-[#15803D]/90",{"cursor-not-allowed opacity-80":p}),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(D.JO,{type:u?"loader":"16-ai-agent",size:16,className:"text-white"}),(0,r.jsx)(A.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)(u?"community_bot.ai_resuming":"community_bot.resume_ai")})]})})}):(0,r.jsx)(M.T,{enabled:p,content:(0,s.t)("community_bot.pause_ai.tooltip"),children:(0,r.jsx)("button",{type:"button",onClick:function(){return b(!0)},className:(0,Z.A)("hover:bg-secondary h-[34px] rounded-full border px-4 transition-all duration-300",{"cursor-not-allowed opacity-80":p}),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(D.JO,{type:l?"loader":"16-ai-snooze",size:16,className:"text-dark font-medium"}),(0,r.jsx)(A.Z.LabelSm,{weight:"medium",children:(0,s.t)(l?"community_bot.ai_pausing":"community_bot.pause_ai.title")})]})})}):(0,r.jsx)(eP,{})},eI=n(697485),eA=n(917335),eL=n(571807),eT=n(233516),eD=n(619347),eM=function(e){var t=e.profile;return(0,r.jsxs)(r.Fragment,{children:[!t.avatar_url&&(0,r.jsx)(D.JO,{type:"120-ai-bot",size:120,className:"mb-4 !h-[7.5rem] !w-[7.5rem]"}),t.avatar_url&&(0,r.jsx)("img",{src:t.avatar_url,alt:t.name,className:"mb-4 !h-[7.5rem] !w-[7.5rem] rounded-full",loading:"lazy"})]})},eF=n(121353),eB=n(25593),eR=n(918594),eq=n(693440),ez=n(291704),eU=function(e){var t=e.comments,n=e.fetchNextPage,i=e.hasNextPage,o=e.isLoading,a=e.error,l=e.scrollTargetId;return o?(0,r.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,r.jsx)(h.a,{})}):a?(0,r.jsx)("div",{className:"flex h-32 flex-col items-center justify-center px-6 text-center",children:(0,r.jsx)("p",{className:"text-sm text-[#dc2626]",children:(0,s.t)("community_inbox.profile.error_loading_comments")})}):0===t.length?(0,r.jsx)("div",{className:"flex h-32 flex-col items-center justify-center px-6 text-center",children:(0,r.jsx)("p",{className:"text-sm text-[#717680]",children:(0,s.t)("community_inbox.profile.no_comments")})}):(0,r.jsx)(eB.Z,{style:{overflow:"initial"},scrollThreshold:.5,next:n,hasMore:i,loader:(0,r.jsx)("div",{className:"px-6",children:(0,r.jsx)(h.a,{})}),dataLength:t.length,scrollableTarget:l,className:"",children:t.map(function(e){var t;return(0,r.jsxs)(eR.rU,{to:"/c/".concat(e.space_slug,"/").concat(e.post_slug,"#comment_wrapper_").concat(e.id),className:"border-primary flex flex-col items-start gap-2 self-stretch border-t px-6 py-4 first:border-t-0 last:border-b",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"text-sm font-normal text-[#717680]",children:[(0,s.t)("community_inbox.profile.commented_on")," "]}),(0,r.jsx)("span",{className:"text-dark dark:text-darkest text-sm font-medium",children:e.post_name||e.post_truncated_content}),(0,r.jsx)("span",{className:"mx-1.5 inline-flex items-center align-middle",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",className:"inline-block",children:(0,r.jsx)("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"#E4E7EB"})})}),(0,r.jsx)("span",{className:"text-sm font-normal text-[#717680]",children:(t=new Date(e.created_at),(0,eF.Z)(t,{addSuffix:!0}).replace("about ","").replace("less than a minute ago","1m ago").replace(/(\d+) minutes? ago/,"$1m ago").replace(/(\d+) hours? ago/,"$1h ago").replace(/(\d+) days? ago/,"$1d ago").replace(/(\d+) months? ago/,"$1mo ago").replace(/(\d+) years? ago/,"$1y ago"))})]}),(0,r.jsx)("div",{className:"text-sm font-normal leading-5 text-[#42464d]",children:"tiptap"===e.editor?(0,r.jsx)(eq.G,{tiptapBody:e.tiptap_body},e.updated_at):(0,r.jsx)(ez.P,{content:e.body_trix_content||""})})]},e.id)})})},eG=function(){return(0,r.jsxs)("div",{className:"group relative inline-block",children:[(0,r.jsx)("div",{className:"border-disabled cursor-default border-b",children:(0,r.jsx)(A.Z.LabelSm,{color:"text-disabled",children:(0,s.t)("community_inbox.privacy_notice.visibility")})}),(0,r.jsxs)("div",{className:"absolute bottom-8 left-1/2 z-[1100] hidden w-80 -translate-x-1/2 flex-col gap-1 rounded-lg bg-black px-4 py-3 text-start group-hover:flex",children:[(0,r.jsx)(A.Z.LabelSm,{weight:"bold",color:"text-white",children:(0,s.t)("community_inbox.privacy_notice.title")}),(0,r.jsx)(A.Z.BodySm,{color:"text-white",children:(0,s.t)("community_inbox.privacy_notice.message")})]})]})};function eW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eQ=function(e){var t,n,o=e.botProfile,l=e.conversationStatus,u=void 0===l?"normal":l,d=(0,eT.T)(),f=d.ref,m=d.height,b=(0,a.k6)(),y=(0,c.Dk)().setCurrentBotProfile,v=(t=(0,i.useState)("about"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eW(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eW(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],x=v[1],j=null==o?void 0:o.id,w=(0,eA.n)({profileId:j,enabled:"comments"===g}),S=w.fetchNextPage,O=w.hasNextPage,k=w.isLoading,P=w.error,N=w.comments,C=null!=(n=null==o?void 0:o.comments_count)?n:0,E=function(e){var t={body:{body:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]},attachments:[],localAttachments:[],localSgidToObjectMap:{}}};p.K.sendSuggestedQuestion(t)};return(0,r.jsxs)(eL.x,{children:[(0,r.jsx)("div",{ref:f,children:(0,r.jsx)(eD.S0.Header,{className:"!min-h-14",children:(0,r.jsx)(eI.h,{title:(0,s.t)("profile"),isDirect:!0})})}),(0,r.jsx)(eD.S0.Content,{noPadding:!0,heightGap:m,children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsxs)("div",{className:"px-6 py-5",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(eM,{profile:o}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,r.jsxs)("div",{className:"bg-tertiary dark:bg-secondary-dark flex h-6 items-center justify-center gap-1.5 rounded-full px-2 py-[3px]",children:[(0,r.jsx)(D.JO,{type:"16-ask-ai-gradient",size:16}),(0,r.jsx)("span",{className:"text-dark text-[12px] font-medium",children:(0,s.t)("community_bot.profile_tag")})]}),(0,r.jsx)(A.Z.TitleSm,{weight:"semibold",color:"text-dark",children:o.name})]})]}),o.enabled&&o.allow_direct_messages&&(0,r.jsx)("div",{children:(0,r.jsxs)("button",{type:"button",onClick:function(){y(o),b.push({pathname:(0,_.W9)()})},"aria-label":(0,s.t)("chat_space.header.new_conversation"),className:"border-primary hover:bg-tertiary text-dark dark:border-secondary dark:text-dark dark:hover:bg-secondary flex items-baseline whitespace-normal rounded-[1.25rem] border px-3.5 py-2 text-left text-sm font-medium transition-colors",children:[(0,r.jsx)(D.JO,{"aria-label":(0,s.t)("chat_space.header.new_conversation"),type:"new-conversation",className:"text-dark mr-1",useWithFillCurrentColor:!0,size:20}),(0,r.jsx)(A.Z.LabelSm,{weight:"medium",color:"text-dark",children:(0,s.t)("chat_space.header.new_conversation")})]})})]}),(0,r.jsx)("div",{className:"border-primary relative border-b",children:(0,r.jsxs)("div",{className:"flex gap-4 px-6",children:[(0,r.jsx)("button",{type:"button",className:(0,Z.A)("focus-visible:outline-secondary flex h-10 items-center justify-center border-b-2 border-transparent pb-3 pt-2 text-sm font-medium transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","about"===g?"border-darkest text-dark font-semibold":"text-default hover:text-dark"),onClick:function(){return x("about")},children:(0,s.t)("about")}),(0,r.jsxs)("button",{type:"button",className:(0,Z.A)("focus-visible:outline-secondary flex h-10 items-center justify-center border-b-2 border-transparent pb-3 pt-2 text-sm font-medium transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","comments"===g?"border-darkest text-dark font-semibold":"text-default hover:text-dark"),onClick:function(){return x("comments")},children:[(0,s.t)("comments.comments")," ",C>0&&C]})]})}),(0,r.jsx)("div",{className:"flex flex-1 flex-col overflow-y-auto",id:"bot-profile-railbar-scroll-target",children:"about"===g?(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 px-6 py-5",children:[o.bio&&(0,r.jsxs)("div",{className:"mb-5 flex flex-col gap-y-2",children:[(0,r.jsx)(A.Z.LabelSm,{weight:"semibold",color:"text-dark",children:(0,s.t)("community_inbox.profile.bio")}),(0,r.jsx)("div",{className:"text-default text-sm font-normal leading-5 tracking-tighter",children:(0,r.jsx)(I.T,{editable:!1,rich_text_body:o.bio,shouldShowPreviewBlocks:!1})})]}),o.suggested_questions&&o.suggested_questions.length>0&&(0,r.jsxs)("div",{className:"mb-5 flex flex-col gap-y-2",children:[(0,r.jsx)(A.Z.LabelSm,{weight:"semibold",color:"text-dark",children:(0,s.t)("community_bot.profiles.suggested_questions_label")}),(0,r.jsx)("div",{className:"flex flex-col items-start gap-2",children:o.suggested_questions.map(function(e){return(0,r.jsx)(eo.n,{question:e,onClick:function(){return E(e)},disabled:!o.enabled||!o.allow_direct_messages||"too_long"===u||"exceeded"===u},e)})})]})]}),(0,r.jsx)("div",{className:"shrink-0 px-6 pb-5 text-center",children:(0,r.jsx)(eG,{})})]}):(0,r.jsx)("div",{className:"flex flex-col",children:k?(0,r.jsx)("div",{className:"flex h-32 items-center justify-center",children:(0,r.jsx)(h.a,{})}):(0,r.jsx)(eU,{comments:N,fetchNextPage:S,hasNextPage:!!O,isLoading:!1,error:P,scrollTargetId:"bot-profile-railbar-scroll-target"})})})]})})]})},eZ=n(253035),eK=n(981261),eH=n(208054),eV={page_name:eK.$q.PROFILE_VIEW},eJ=function(e){var t=e.communityMember,n=void 0===t?{}:t,i=(0,eH.P$)({publicId:null==n?void 0:n.public_uid,params:eV}).getProfileInfoQuery,o=i.data,a=i.isLoading,l=(0,eT.T)(),c=l.ref,u=l.height;return(0,r.jsxs)(eL.x,{children:[(0,r.jsx)("div",{ref:c,children:(0,r.jsx)(eD.S0.Header,{className:"!min-h-14",children:(0,r.jsx)(eI.h,{title:(0,s.t)("profile"),isDirect:!0})})}),(0,r.jsx)(eD.S0.Content,{noPadding:!0,heightGap:u,children:a?(0,r.jsx)(h.a,{center:!0}):(0,r.jsx)(eZ.N,{memberPublicId:null==n?void 0:n.public_uid,member:void 0===o?{}:o,isFullPageProfile:!1,isRenderedOnRailBar:!0,shouldHideMessageButton:!0,shouldHideBadge:!0})})]})},e$=function(e){var t=e.author,n=void 0===t?{}:t,i=e.isDms,o=e.conversationStatus;return i?(0,r.jsx)(eQ,{botProfile:n,conversationStatus:void 0===o?"normal":o}):(0,r.jsx)(eJ,{communityMember:n})},eY=function(e){var t=e.isDms,n=e.chat,i=(0,c.Dk)().setCurrentBotProfile,o=(0,y.x)(),l=o.shouldShowRailBar,u=o.toggleShowRailBar,d=(0,a.k6)(),f=(0,ey.BT)(),m=n||{},p=m.community_member,b=m.community_bot_profile,v=t?b:p;return(0,r.jsxs)("div",{className:"border-primary bg-primary flex h-14 w-full items-center border-b px-6 py-1",children:[n?(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[f&&(0,r.jsx)(ev.h,{name:"24-arrow-left",iconSize:24,ariaLabel:(0,s.t)("back"),className:"mr-2",onClick:function(){return d.push(t?(0,_.yg)():(0,_.Hs)())}}),(0,r.jsx)("div",{className:"max-w-[200px] md:max-w-[300px]",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.Z.LabelMd,{weight:"semibold",as:"h2",truncate:!0,children:null==v?void 0:v.name}),v&&"status"in v&&("idle"===v.status||"online"===v.status)&&(0,r.jsx)(eb.E,{status:v.status})]})})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[!t&&(0,r.jsx)(eE,{chat:n}),v===b&&(null==b?void 0:b.enabled)&&(null==b?void 0:b.allow_direct_messages)&&(0,r.jsx)(M.T,{interactive:!1,content:(0,s.t)("chat_space.header.new_conversation"),children:(0,r.jsx)("button",{type:"button",className:"hover:bg-tertiary focus-visible:outline-secondary mt-1 hidden size-6 rounded transition-colors duration-200 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 lg:block",onClick:function(){i(b||null),d.push((0,_.W9)())},children:(0,r.jsx)(D.JO,{type:"new-conversation",className:"text-dark ml-0.5 mt-0.5",useWithFillCurrentColor:!0})})}),(0,r.jsx)("button",{type:"button",className:"hover:bg-tertiary focus-visible:outline-secondary mt-1 hidden size-6 rounded transition-colors duration-200 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 lg:block",onClick:u,children:(0,r.jsx)(D.JO,{"aria-label":l?(0,s.t)("chat_space.header.collapse_railbar"):(0,s.t)("chat_space.header.expand_railbar"),className:"text-dark ml-0.5 mt-0.5",useWithFillCurrentColor:!0,type:l?"rail-collapse-right":"rail-collapse-left"})})]})]}):(0,r.jsx)(eh.RN,{full:!0,children:(0,r.jsx)(eh.X2,{xxl:!0,extraLong:!0})}),l&&(0,r.jsx)(e$,{author:v,isDms:t,conversationStatus:(null==n?void 0:n.conversation_status)||"normal"})]})};function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e0(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var e1=function(e){var t,n,l,u,d,_=e.isDms,j=void 0!==_&&_,S=e.isNewConversation,O=void 0!==S&&S,k=e.previewId,P=e.onRestart,N=!!k,C=(t=(0,i.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eX(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eX(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=C[0],I=C[1],A=(0,a.UO)().id,L=null!=(d=null!=k?k:A?Number(A):E)?d:null,T=(0,x.vO)(),D=T.setFirstMessage,M=T.setScrollAction,F=T.adjustScroller,B=T.preparePagination,R=w({id:null!=L?L:0,isDms:j}),q=R.createMessage,z=R.fetchNextPage,U=R.hasNextPage,G=R.isFetching,W=(0,m.O)().createChat,Q=(0,a.k6)(),Z=(0,g.pm)(),K=(0,c.Dk)(),H=K.setCurrentChatId,V=K.currentBotProfile,J=K.adminMarkAsRead,$=K.memberMarkAsRead,Y=K.previewChat,X=K.setIsProcessing,ee=K.setPreviewChatProcessing,et=j?$:J,en=f(null!=L?L:0,j),er=en.isChatLoading,ei=en.currentChat;en.error&&(Q.push("/settings/ai-inbox"),Z.error((0,s.t)("community_inbox.chats.errors.not_found")));var eo=(null==ei||null==(n=ei.community_bot_profile)?void 0:n.name)||(null==V?void 0:V.name)||(0,s.t)("community_inbox.agent"),ea=N?!!(null==Y?void 0:Y.is_processing):!!(null==ei?void 0:ei.is_processing),es=!!(null==ei?void 0:ei.disabled)||(!(null==ei||null==(l=ei.community_bot_profile)?void 0:l.enabled)||!(null==ei||null==(u=ei.community_bot_profile)?void 0:u.allow_direct_messages))&&!N&&!O;(0,i.useEffect)(function(){L&&H(L)},[L,H]);var el=j?null==ei?void 0:ei.has_unread_messages_for_member:null==ei?void 0:ei.has_unread_messages_for_admin;(0,i.useEffect)(function(){el&&L&&et(L)},[L,et,el]);var ec=(0,v.a)(b),eu=(0,i.useMemo)(function(){return(null==ec?void 0:ec.length)?(0,o.sortBy)(ec||[],"created_at"):[]},[ec]);(0,i.useLayoutEffect)(function(){!G&&eu.length>0&&F()},[eu,G,F]);var ed=function(e){var t;return(t=function(){var t,n;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,,5]),t=L,!O)return[3,2];return[4,W(V)];case 1:I((n=r.sent()).id),t=n.id,r.label=2;case 2:return j&&(N?ee(!0):X(!0,"member")),[4,q({formValues:e,botChatRoomId:t})];case 3:return r.sent(),[3,5];case 4:return console.error("Error while creating message",r.sent()),j&&(N?ee(!1):X(!1,"member")),[3,5];case 5:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){e0(o,r,i,a,s,"next",e)}function s(e){e0(o,r,i,a,s,"throw",e)}a(void 0)})})()};(0,i.useEffect)(function(){var e=function(e){L&&ed(e)};return p.K.on("sendSuggestedQuestion",e),function(){p.K.off("sendSuggestedQuestion",e)}},[ed,L]);var ef=!N&&!ei&&!O;if(G||er||ef)return(0,r.jsx)(ep,{isDms:j,children:(0,r.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,r.jsx)(h.a,{})})});var eb=null==ei?void 0:ei.community_member,ey=!N&&!O;return(0,r.jsx)(y.G,{children:(0,r.jsxs)(ep,{isDms:j,children:[(0,r.jsxs)("div",{className:"w-full",children:[ey&&(0,r.jsx)(eY,{isDms:j,chat:ei}),(0,r.jsx)(em,{messages:O?[]:eu,createMessage:ed,isDms:j,fetchNextPage:function(){G||(B(),D(eu[0]),M(x.aO.PAGINATION),z())},hasNextPage:!!U,isLoading:G,isNewConversation:O,isPreviewMode:N,agentName:eo,isProcessing:ea,isDisabled:es,chatCommunityMember:eb,currentChat:ei,onRestart:P})]}),ey&&(0,r.jsx)("div",{id:"rail-bar-header"})]})})}},450583:function(e,t,n){n.d(t,{G:()=>s});var r=n(552676),i=n(227851),o=n(987435),a=n(28116),s=function(e){return function(t){var n=t.index,s=t.onApply,l=t.param,c=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["index","onApply","param"]),u=(0,o.R)().onClear,d="community_segment.rules.rules[".concat(n,"]");return(0,r.jsx)(i.Qr,{name:d,defaultValue:l,render:function(t){var i,o,l=t.field,d=l.value,f=l.onChange;return(0,r.jsx)(e,(i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},c),o=o={param:d,onApply:function(e){!e||(0,a.N)(e)?null==u||u(n):f(e),s(e)}},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i))}})}}},693723:function(e,t,n){n.d(t,{x:()=>c});var r=n(552676),i=n(619803),o=n.n(i),a=n(932699),s=n(767900),l=function(e){var t=e.children;return(0,r.jsx)("div",{className:"w-full",children:t})},c=function(e){var t=e.name,n=e.translationRoot,i=e.id,c=e.label,u=e.description,d=e.childrenWrapper,f=e.isHorizontal,m=e.hideLabel,p=e.placeholder,b=e.hidePlaceholder,y=e.hideDescription,v=e.rules,h=e.className,g=e.fullWidth,_=e.children,x=e.isDisabled,j=e.tooltipText,w=e.inlineReverse,S=e.inline;return(0,r.jsx)(s.l.Item,{id:null!=i?i:(0,a.uniqueId)("".concat(t,"-")),name:t,translationRoot:n,label:c,description:u,className:o()("flex gap-4",{"flex-col":!(void 0!==f&&f)},h),labelWrapperClassName:"!w-full !order-none !p-0",placeholder:p,hidePlaceholder:void 0!==b&&b,hideBorder:!0,hideLabel:void 0!==m&&m,hideDescription:void 0!==y&&y,childrenWrapper:void 0===d?l:d,rules:v,fullWidth:g,isDisabled:void 0!==x&&x,tooltipText:j,inlineReverse:void 0!==w&&w,inline:void 0!==S&&S,children:_})}},746135:function(e,t,n){n.d(t,{F:()=>l,L:()=>s});var r=n(275271),i=n(131906),o=n(251630);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var s=20,l=function(e){var t,n,l,c,u,d,f,m=null!=e?e:{},p=m.query,b=void 0===p?"":p,y=m.perPage,v=void 0===y?s:y,h=m.initialPage,g=void 0===h?1:h,_=m.options,x=["settings","invitation-links",b,v,g],j=a({getNextPageParam:function(e){var t=e.has_next_page,n=e.page;return t?Number(n)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===_?{}:_),w=(0,i.useInfiniteQuery)(x,function(e){var t=e.pageParam,n=void 0===t?g:t,r=1;n>0&&(r=n);var i=a({page:r,per_page:v},b&&{query:b});return o.bC.list({params:i})},j),S=(0,r.useMemo)(function(){var e,t;return null!=(t=null==(e=w.data)?void 0:e.pages)?t:[]},[null==(l=w.data)?void 0:l.pages]),O=null!=(d=null==(c=S[0])?void 0:c.count)?d:0,k=null!=(f=null==(u=S[0])?void 0:u.per_page)?f:v;return t=a({},w),n=n={queryKey:x,totalInvitationLinks:O,pageSize:k,pages:S},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t}},946837:function(e,t,n){n.d(t,{f$:()=>d,p6:()=>s,uf:()=>c,ze:()=>u});var r=n(994543),i=n(217123),o=n(932699),a=n(739792),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP";if(!e)return"";var n=new Date(e);return(0,r.default)(n)?(0,o.startCase)((0,i.default)(n,t)):""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.admin?(0,a.t)("role_admin"):e.moderator?(0,a.t)("moderator"):(0,a.t)("member")},c=function(e){return"CommunityMember"===e.type?l(e.roles):""},u=function(e){return e?(0,a.t)("settings.manage_members.subscribed"):(0,a.t)("settings.manage_members.unsubscribed")},d=function(e){return e?(0,a.t)(["invitation_status_column",e]):""}},901083:function(e,t,n){n.d(t,{CU:()=>A,EC:()=>R,Hz:()=>et,JN:()=>J,Jm:()=>V,LI:()=>K,Oq:()=>U,Q1:()=>ee,Q_:()=>Y,VX:()=>L,W9:()=>D,Yl:()=>q,en:()=>z,ih:()=>en,j7:()=>F,kQ:()=>$,nL:()=>T,pq:()=>W,r7:()=>B,s3:()=>X,sE:()=>Q,sm:()=>H,uN:()=>M,xz:()=>I,yE:()=>G,zu:()=>Z});var r=n(739792),i=n(831213),o=i.f.SpaceGroupsFilterV2,a=i.f.SpacesFilter,s=i.f.StatusFilter,l=i.f.MemberTagsFilter,c=i.f.PaywallsFilter,u=i.f.EventsFilter,d=i.f.HasPastDueSubscriptionFilter,f=i.f.JoinedCommunityDaysAgoFilter,m=i.f.LastLoggedInDaysAgoFilter,p=i.f.AvatarSet,b=i.f.ActivityScoreFilter,y=i.f.HeadlineFilter,v=i.f.NameFilter,h=i.f.LocationFilter,g=i.f.GeoLocationFilter,_=i.f.BioFilter,x=i.f.EmailFilter,j=i.f.InvitationLinksFilter,w=i.f.LevelFilter,S=i.f.EmailMarketingFilter,O=i.f.MemberFilter,k=i.f.InvitationStatusFilter,P=i.f.InvitedAtDaysAgoFilter,N=i.f.RoleFilter,C=i.f.SegmentFilter,E=i.f.AccessGroupsFilter,I={name:"geo_location",component:g,label:(0,r.t)("members_directory.header.search.filters.geo_location")},A={name:"name",component:v,label:(0,r.t)("members_directory.header.search.filters.name")},L={name:"email",component:x,label:(0,r.t)("members_directory.header.search.filters.email")},T={name:"subscribed_to_marketing_emails",component:S,label:(0,r.t)("members_directory.header.search.filters.email_marketing")},D={name:"member",component:O,label:(0,r.t)("members_directory.header.search.filters.member")},M={name:"invitation_status",component:k,label:(0,r.t)("members_directory.header.search.filters.invitation_status.title")},F={name:"invited_at_days_ago",component:P,label:(0,r.t)("members_directory.header.search.filters.invited_at_days_ago")},B={name:"invitation_link_ids",component:j,label:(0,r.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},R={name:"tags",component:l,label:(0,r.t)("members_directory.header.search.filters.tags.singular_title")},q={name:"spaces",component:a,label:(0,r.t)("members_directory.header.search.filters.spaces.singular_title")},z={name:"space_groups",component:o,label:(0,r.t)("members_directory.header.search.filters.space_groups.singular_title")},U={name:"online_status",component:s,label:(0,r.t)("members_directory.header.search.filters.online_status")},G={name:"bio",component:_,label:(0,r.t)("members_directory.header.search.filters.bio")},W={name:"headline",component:y,label:(0,r.t)("members_directory.header.search.filters.headline")},Q={name:"location",component:h,label:(0,r.t)("members_directory.header.search.filters.location")},Z={name:"paywalls",component:c,label:(0,r.t)("members_directory.header.search.filters.paywalls.singular_title")},K={name:"events",component:u,label:(0,r.t)("members_directory.header.search.filters.events.singular_title")},H={name:"has_past_due_subscription",component:d,label:(0,r.t)("members_directory.header.search.filters.has_past_due_subscription")},V={name:"joined_community_days_ago",component:f,label:(0,r.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,r.t)("members_directory.header.search.filters.joined_community_days_ago_available")},J={name:"last_logged_in_days_ago",component:m,label:(0,r.t)("members_directory.header.search.filters.last_logged_in_days_ago")},$={name:"is_avatar_set",component:p,label:(0,r.t)("members_directory.header.search.filters.avatar_set")},Y={name:"activity_score",component:b,label:(0,r.t)("members_directory.header.search.filters.activity_score")},X={name:"level",component:w,label:(0,r.t)("members_directory.header.search.filters.level")},ee={name:"role",component:N,label:(0,r.t)("members_directory.header.search.filters.role")},et={name:"segment_id",component:C,label:(0,r.t)("members_directory.header.search.filters.segments.singular_title")},en={name:"access_group_ids",component:E,label:(0,r.t)("members_directory.header.search.filters.access_groups.singular_title")}},822205:function(e,t,n){n.d(t,{C:()=>l,i:()=>c});var r=n(131906),i=n(93199),o=n(547144),a=n(966364);function s(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var l="archived-profile-fields",c=function(){return{getArchivedQueryOptions:(0,r.useQuery)({queryKey:[l],queryFn:function(){var e;return(e=function(){return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,i.UT)(o.av.profileFields.archivedList())]})},function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,l,"next",e)}function l(e){s(o,r,i,a,l,"throw",e)}a(void 0)})})()},select:function(e){return(0,a.fW)(e)}})}}},659520:function(e,t,n){n.d(t,{K:()=>f,k:()=>p});var r=n(131906),i=n(739792),o=n(93199),a=n(547144),s=n(208054),l=n(60878),c=n(420176),u=n(966364);function d(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var f="page-profile-fields",m=function(e){var t=e.visible_profile_fields,n=e.hidden_profile_fields;return{visibleFields:(0,u.fW)(t),hiddenFields:(0,u.fW)(n)}},p=function(e){var t=e.currentPage,n=(0,r.useQueryClient)(),u=(0,l.pm)(),p=[f,t];return{getOptions:(0,r.useQuery)({queryKey:p,queryFn:function(){var e;return(e=function(){var e;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,(0,o.UT)(a.av.profileFields.pageIndex(t))];case 1:if(!(e=n.sent()))return[2];return[2,m(e)]}})},function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)})})()}}),reorderFields:(0,r.useMutation)(function(e){var n=e.reorderedProfileFields,r=e.hideProfileField,i=e.unhideProfileField;return(0,o.Cu)(a.av.profileFields.pageFieldReorder(),{page_name:t,reordered_profile_fields:null==n?void 0:n.map(function(e){return e.id}),hide_profile_field_id:null==r?void 0:r.id,unhide_profile_field_id:null==i?void 0:i.id})},{onError:function(){u.error((0,i.t)("something_went_wrong"))},onSuccess:function(e){n.setQueryData(p,m(e)),n.invalidateQueries({queryKey:[(0,c.OT)()]}),n.removeQueries({queryKey:[s.Wx]})}})}}},420176:function(e,t,n){n.d(t,{Gn:()=>b,OT:()=>m,Yw:()=>y});var r=n(131906),i=n(756468),o=n(93199),a=n(547144),s=n(271066),l=n(326239);function c(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var m=function(e){var t="PROFILE_FIELD_DETAIL";return e?[t,e]:[t]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return("headline"===t?Object.values(s.Nd):Object.values(s.Nd).filter(function(e){return e!==s.Nd.COMMUNITY_VIEW})).map(function(t){var n=e.find(function(e){return e.name===t});return n?f(d({},n),{visible:n.visible}):{name:t,visible:!0}})},b=function(e){var t,n;return f(d({},e),(u(n={},l.PX[l.Z9.SELECT].CHOICES_ATTRIBUTES,e.choices),u(n,l.PX[l.Z9.NUMBER].NUMBER_OPTIONS,e.number_options),u(n,l.k_,p(e.pages,e.key)),u(n,l.xg.HIDDEN,null==(t=e.pages)?void 0:t.every(function(e){return!e.visible})),n))},y=function(e){var t=e.fieldId;return{getOptions:(0,r.useQuery)(m(t),function(){var e;return(e=function(){return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return(0,i.Z)(t,"Field ID is required"),[2,(0,o.UT)(a.av.profileFields.detail(t))]})},function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)})})()},{select:function(e){return b(e)},enabled:!!t})}}},966364:function(e,t,n){n.d(t,{Eu:()=>_,fW:()=>g,or:()=>x});var r=n(932699),i=n(131906),o=n(739792),a=n(237882),s=n(93199),l=n(547144),c=n(208054),u=n(60878),d=n(326239),f=n(659520),m=n(420176);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){b(o,r,i,a,s,"next",e)}function s(e){b(o,r,i,a,s,"throw",e)}a(void 0)})}}function v(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){if(e)return e.map(m.Gn)},_="profile-fields",x=function(){var e=(0,u.pm)(),t=(0,i.useQueryClient)(),n=(0,i.useQuery)([_],function(){return y(function(){return h(this,function(e){switch(e.label){case 0:return[4,(0,s.UT)(l.av.profileFields.index())];case 1:return[2,g(e.sent())]}})})()}),p=(0,i.useMutation)(function(e){return(0,s.Cu)(l.av.profileFields.index(),e)},{onSuccess:function(){return y(function(){return h(this,function(e){switch(e.label){case 0:return[4,n.refetch()];case 1:return e.sent(),[4,t.invalidateQueries({queryKey:[f.K]})];case 2:return e.sent(),[4,t.invalidateQueries({queryKey:[a.d]})];case 3:return e.sent(),t.removeQueries({queryKey:[c.Wx]}),[2]}})})()},onError:function(t){var n;e.error(null!=(n=t.errorDetails)?n:t.message)}}).mutateAsync,b=(0,i.useMutation)(function(e){var t=e.id,n=e.payload;return(0,s.gN)(l.av.profileFields.detail(t),n)},{onSuccess:function(e){return y(function(){return h(this,function(r){switch(r.label){case 0:return[4,n.refetch()];case 1:return r.sent(),[4,t.invalidateQueries({queryKey:[a.d]})];case 2:return r.sent(),t.removeQueries({queryKey:[f.K]}),t.removeQueries({queryKey:[c.Wx]}),[4,t.invalidateQueries({queryKey:(0,m.OT)(e.id)})];case 3:return r.sent(),[2]}})})()},onError:function(t){e.error(t.message)}}).mutateAsync,x=function(e){var t=e[d.AZ.FIELD_TYPE];return Object.values(d.PX[t])},j=function(e){var t=x(e),n=v(d.Yp).concat(["pages_attributes"],v(t));return(0,r.pick)(e,n)};return{getOptions:n,onNewProfileField:function(t,n){p(j(t),{onSuccess:function(){e.success((0,o.t)("profile_fields.field_modal.success_message")),n()}})},onEditProfileField:function(t,n,r){b({id:t,payload:j(n)},{onSuccess:function(){e.success((0,o.t)("changes_saved")),r()}})}}}},628998:function(e,t,n){n.d(t,{Gg:()=>f,L8:()=>c,V6:()=>u,hE:()=>d});var r=n(275271),i=n(122612),o=n.n(i),a=n(131906),s=n(743445);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}var c=20,u="segments",d="all",f=function(e){var t,n,i,f,m,p,b=e.perPage,y=void 0===b?c:b,v=e.initialPage,h=void 0===v?1:v,g=e.options,_=[u,d,y,h],x=(0,a.useInfiniteQuery)(l({queryKey:_,queryFn:function(e){var t=e.pageParam,n=void 0===t?h:t,r=1;"number"==typeof n&&n>0&&(r=n);var i={page:r,per_page:y};return s.W.list({params:i})},getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===g?{}:g)),j=(0,r.useMemo)(function(){var e;return(null==(e=x.data)?void 0:e.pages)||[]},[null==(i=x.data)?void 0:i.pages]),w=(null==(f=j[0])?void 0:f.per_page)||y,S=null!=(p=null==(m=j[0])?void 0:m.count)?p:0,O=(0,r.useMemo)(function(){return o()(j.map(function(e){return e.records}))},[j]);return t=l({},x),n=n={queryKey:_,segments:O,pageSize:w,pages:j,count:S},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t}},28083:function(e,t,n){n.d(t,{O5:()=>u,ed:()=>i,tz:()=>l,w5:()=>c});var r=n(779774),i=r.Ry().shape({prefill_token:r.Z_().optional()}),o=function(e){var t=["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].filter(function(t){return!0===e[t]});return t.length>0?t:void 0},a=function(e){var t={},n=o(e);return n&&(t.notification_type=n),"auto_rsvp_invited_attendees"in e&&"boolean"==typeof e.auto_rsvp_invited_attendees&&(t.event_auto_rsvp_enabled=e.auto_rsvp_invited_attendees),t},s=function(e){var t={};return e.notification_type&&(t.notification_type=e.notification_type),t},l=function(e,t){var n={};switch(e.name&&(n.name=e.name),e.access&&(n.visibility=e.access),e.space_group_id&&(n.space_group_id=e.space_group_id),t){case"basic":case"post":case"image":case"event":("default_notification_setting"in e||"auto_rsvp_invited_attendees"in e)&&Object.assign(n,a(e));break;case"chat":"notification_type"in e&&Object.assign(n,s(e))}return n},c=function(e){return e.space_type&&({posts:"basic",events:"event",chat:"chat",course:"course",members:"members",images:"image"})[e.space_type]||"basic"},u=function(e,t){var n=new URL("".concat(window.location.origin).concat(t));n.searchParams.delete("prefill_token"),e("".concat(n.pathname).concat(n.search))}},969588:function(e,t,n){n.d(t,{I:()=>c,WX:()=>s,le:()=>l});var r=n(552676),i=n(275271),o=n(955269);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,i.createContext)(null);s.displayName="CommunityMembersListContext";var l=function(){var e=(0,i.useContext)(s);return console.assert(e,"useCommunityMembersListContext is being used outside context provider."),e},c=function(e){var t,n=e.ids,i=e.children,l=(0,o.y)({ids:function(e){if(Array.isArray(e))return a(e)}(t=new Set(null!=n?n:[]))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),withDeleted:!0,enabled:!!(null==n?void 0:n.length)});return(0,r.jsx)(s.Provider,{value:l,children:i})}},764981:function(e,t,n){n.d(t,{I:()=>s.I,le:()=>s.le,Xg:()=>l});var r=n(552676),i=n(739792),o=n(664657),a=n(751169),s=n(969588),l=function(e){var t,n=e.id,l=e.isAvatarHidden,c=e.isLastNameHidden,u=(0,s.le)();if(!u||u.isLoading)return(0,r.jsx)(a.a,{center:!0,className:"!p-0"});var d=null==(t=u.data)?void 0:t.records.find(function(e){return e.id===n});if(!d)return(0,r.jsx)("span",{className:"break-normal text-sm",children:(0,i.t)("deactivated_member")});var f=d.first_name,m=d.name,p=d.avatar_url;return(0,r.jsxs)(r.Fragment,{children:[!l&&(0,r.jsx)("span",{className:"pl-3",children:(0,r.jsx)("div",{className:"float-left",children:(0,r.jsx)(o.W,{size:"6",src:null!=p?p:void 0,name:m})})}),(0,r.jsx)("span",{className:"break-normal text-sm",children:c?f:m})]})}},176454:function(e,t,n){n.d(t,{p:()=>l});var r=n(552676),i=n(275271),o=n(739792),a=n(884121),s="settings.workflows.view.header",l=function(e){var t=e.isDisabled,n=e.isLoading,l=e.isWorkflowActive,c=e.hasNoActions,u=e.hasActionsUnsaved,d=e.isDraft,f=void 0!==d&&d,m=e.onChange,p=(0,i.useCallback)(function(){return u?(0,o.t)([s,"incomplete_actions_message"]):f?(0,o.t)([s,"disabled_tooltip"]):c?(0,o.t)([s,"has_no_actions_message"]):(0,o.t)([s,"off_tooltip"])},[u,c,f]),b=(0,i.useCallback)(function(e){null==m||m(e)},[m]);return(0,r.jsx)(a.J,{isChecked:l,checkedLabel:(0,o.t)([s,"on_value"]),uncheckedLabel:(0,o.t)([s,"off_value"]),tooltipCheckedLabel:(0,o.t)([s,"on_tooltip"]),tooltipUncheckedLabel:p(),tooltipPlacement:"bottom",isLoading:n,isDisabled:t,onChange:b,containerClassName:"mx-auto",className:""})}},907406:function(e,t,n){n.d(t,{a:()=>l});var r=n(552676),i=n(770434),o=n(619803),a=n.n(o),s=function(e){var t=e.tooltipContent,n=e.className,i=e.children;return(0,r.jsx)("div",{className:a()("flex items-center justify-center",n,{"cursor-pointer":t}),children:i})},l=function(e){var t=e.tooltipContent,n=e.className,o=e.children;return t?(0,r.jsx)(i.Y,{placement:"top",content:t,children:(0,r.jsx)(s,{tooltipContent:t,className:n,children:o})}):(0,r.jsx)(s,{tooltipContent:t,className:n,children:o})}},711294:function(e,t,n){n.d(t,{W:()=>m});var r=n(552676),i=n(701168),o=n(957363),a=n(381636),s=n(907406),l=n(275271),c=n(739792),u=n(667521),d="settings.workflows",f=function(e){var t=e.actions,n=e.truncationLimit,r=(0,l.useMemo)(function(){return t.filter(function(e){return""!==e}).map(function(e){var t=(0,u.mR)(e);return{title:"".concat((0,c.t)([d,"action_types",e],{defaultValue:(0,c.t)([d,"action_types","unknown"])})),icon:t}})},[t]),i=(0,l.useMemo)(function(){return t.slice(n).map(function(e){return"".concat((0,c.t)([d,"action_types",e],{defaultValue:(0,c.t)([d,"action_types","unknown"])}))}).join(", ")},[t,n]),o=t.length-n;return{actions:o>1?r.slice(0,n):r,remainingActionsCount:o,remainingItemsTooltip:i}},m=function(e){var t=e.actions,n=void 0===t?[]:t,l=e.size,c=void 0===l?"lg":l,u=e.truncationLimit,d=void 0===u?2:u,m=e.className,p=f({actions:n,truncationLimit:d}),b=p.actions,y=p.remainingActionsCount,v=p.remainingItemsTooltip;return 0===n.length||d<1?(0,r.jsx)("div",{className:"py-[25px] leading-none",children:"-"}):(0,r.jsxs)("div",{className:(0,i.A)("flex items-center",{"gap-1":"md"===c,"gap-2":"lg"===c},m),children:[b.map(function(e,t){var n=e.title,i=e.icon;return(0,r.jsx)(s.a,{tooltipContent:n,children:(0,r.jsx)("div",{className:"bg-tertiary flex size-8 max-h-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,r.jsx)(o.JO,{type:i,size:16,className:"text-dark !h-4 !w-4 shrink-0"})})},"".concat(i,"-").concat(t))}),y>1&&(0,r.jsx)(s.a,{tooltipContent:v,children:(0,r.jsx)("div",{className:"bg-tertiary flex size-8 max-h-8 max-w-[2rem] shrink-0 items-center justify-center rounded-full",children:(0,r.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,r.jsx)("span",{className:(0,i.A)("text-dark flex",{"text-xxs":"md"===c}),children:"+".concat(y)})})})})]})}},904501:function(e,t,n){n.d(t,{u:()=>o});var r=n(552676),i=n(134870),o=function(e){var t=e.date,n=e.shouldIncludeTime?i.f.short_date_at_short_time:i.f.long_date;return(0,r.jsx)("span",{className:"break-normal",children:t?(0,i.w)({dateTime:new Date(t),format:n}):"-"})}},41051:function(e,t,n){n.d(t,{W:()=>o});var r=n(552676),i=n(381636),o=function(e){var t=e.children;return(0,r.jsx)(i.Z.LabelSm,{weight:"medium",children:(0,r.jsx)("span",{className:"break-normal",children:t})})}},155125:function(e,t,n){n.d(t,{m:()=>Q});var r=n(275271),i=n(932699),o=n(739792),a=n(105100),s=n(398930),l=n(706563),c=n(946837),u=n(902098),d=n(496835),f=n(55611),m=n(851290),p=n(967330),b=n(508407),y=n(11570),v=n(376492),h=function(e){var t=null==e?void 0:e.map(function(e){return String(e.value)}),n=(0,v.S)({params:{ids:t},enabled:!!(null==t?void 0:t.length)}).data;return(0,r.useMemo)(function(){return null==n?void 0:n.reduce(function(e,t){return e[String(t.id)]=t.name,e},{})},[n])},g=n(131906),_=n(251630),x=function(e){var t=e.ids;return(0,g.useQuery)(["workflows","events","list",t],function(){return _.S1.listEvents({params:{ids:t}})},{enabled:!(0,i.isEmpty)((0,i.compact)(t))})},j=function(e){var t=x({ids:null==e?void 0:e.value}).data,n=void 0===t?{}:t;return(0,r.useMemo)(function(){var e;return(null==(e=n.records)?void 0:e.reduce(function(e,t){return e[t.id]=t.name,e},{}))||{}},[n])},w=n(630713),S=function(){var e=(0,w.t)().memberTags;return(0,r.useMemo)(function(){return e.map(function(e){return{id:e.id,name:e.name}}).reduce(function(e,t){return e[t.id]=t.name,e},{})},[e])},O=n(248996),k=function(){var e=(0,O.y)().allPaywalls;return(0,r.useMemo)(function(){return e.reduce(function(e,t){return e[t.id]=t.display_name,e},{})},[e])},P=n(772582),N=function(){var e=(0,P.h)().segments;return(0,r.useMemo)(function(){return null==e?void 0:e.map(function(e){return{id:e.id,title:e.title}}).reduce(function(e,t){return e[t.id]=t.title,e},{})},[e])},C=n(254150),E=function(){var e=(0,C.t)({valueKey:"slug"}).visibleSpaceGroups;return(0,r.useMemo)(function(){return e.reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},I=n(441342),A=function(){var e=(0,I.nT)().helpers.spaceWithViewContentAccess();return(0,r.useMemo)(function(){return e.map(function(e){return{label:e.emoji?"".concat(e.emoji," ").concat(e.name):e.name,value:e.slug}}).reduce(function(e,t){return e[t.value]=t.label,e},{})},[e])},L="settings.workflows.view",T=function(e,t){return(0,a.T)(e,e.value?t[e.value]:null)},D=function(e){var t=e.filterParam,n=e.spaceNameMap,r=void 0===n?{}:n,a=e.tagsIdMap,v=void 0===a?{}:a,h=e.spaceGroupNameMap,g=void 0===h?{}:h,_=e.eventNameMap,x=void 0===_?{}:_,j=e.paywallsNameMap,w=void 0===j?{}:j,S=e.segmentsIdMap,O=void 0===S?{}:S,k=e.accessGroupNameMap,P=void 0===k?{}:k,N=t.key,C=t.value,E=(0,o.t)([L,"audience_filters",N],{defaultValue:(0,o.t)([L,"unknown"])}),I={name:u.d1,email:u.d1,headline:u.d1,spaces:function(e){return T(e,r)},tags:function(e){return T(e,v)},space_groups:function(e){return T(e,g)},events:function(e){return T(e,x)},paywalls:function(e){return T(e,w)},joined_community_days_ago:p.P,last_logged_in_days_ago:b.$,activity_score:d.i,geo_location:s.d,is_avatar_set:function(e){var t=e.value;return(0,f.c)(t)},member:function(e){var t=e.value;return(0,y.c)({selectedText:t})},segment_id:function(e){return O[Number(e.value)]},access_group_ids:function(e){return T(e,P)},invitation_status:function(e){var t=e.value;return(0,c.f$)(t)},invited_at_days_ago:l.l,subscribed_to_marketing_emails:function(e){var t=e.value;return(0,m.c)({selectedText:t})}};return(0,i.isFunction)(I[N])?{name:E,value:I[N](t)}:{name:E,value:C}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=A(),n=S(),o=E(),a=j(e.find(function(e){return"events"===e.key})),s=k(),l=N(),c=h(e.filter(function(e){return"access_group_ids"===e.key}));return(0,r.useMemo)(function(){var r=e.filter(function(e){return"profile_field"!==e.key});return(0,i.isEmpty)(r)?[]:r.map(function(e){return D({filterParam:e,spaceNameMap:t,tagsIdMap:n,spaceGroupNameMap:o,eventNameMap:a,paywallsNameMap:s,segmentsIdMap:l,accessGroupNameMap:c})})},[e,t,n,o,a,s,l,c])},F=n(822205),B=n(271066),R=n(781791),q=n(728847),z=function(e,t){var n=t.label,r=t.field_type,i=t.choices,o=null;if([B.Z9.TEXT,B.Z9.NUMBER,B.Z9.TEXTAREA,B.Z9.LINK].includes(r))o=(0,R.d)(e);else if([B.Z9.SELECT,B.Z9.CHECKBOX].includes(r)){var s=e.value,l=(void 0===i?[]:i).find(function(e){return e.id===Number(s)});o=(0,a.T)(e,l?l.value:s)}return{name:n,value:o}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,q.C)({platformFilters:[],component:function(){return null}}),n=t.customProfileFields,a=t.isLoadingProfileFields,s=(0,F.i)().getArchivedQueryOptions,l=s.data,c=void 0===l?[]:l,u=s.isLoading;return(0,r.useMemo)(function(){return(0,i.isEmpty)(e)||a||u?[]:e.filter(function(e){return"profile_field"===e.key}).map(function(e){var t=e.profile_field_id,r=n.find(function(e){return e.id===Number(t)});if(r)return z(e,r);var i=c.find(function(e){return e.id===Number(t)});return i?z(e,i):{name:(0,o.t)("settings.workflows.view.deleted_profile_field"),value:""}})},[e,a,u,n,c])};function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=M(e),n=U(e),i=(0,r.useMemo)(function(){return W(t).concat(W(n))},[t,n]);return{filters:i,hasFilters:i.length>0}}},748880:function(e,t,n){n.d(t,{q:()=>v});var r=n(131906),i=n(739792),o=n(251630),a=n(670216),s=n(906082),l=n(912369),c=n(441342),u=n(404393),d=n(779869),f=n(60878);function m(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)})}}function b(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var y="settings.workflows.view.header",v=function(e){var t=e.workflowId,n=e.isActive,m=(0,r.useQueryClient)(),v=(0,f.pm)(),h=v.success,g=v.error,_=(0,o.WX)(),x=function(){return p(function(){return b(this,function(e){switch(e.label){case 0:return[4,m.invalidateQueries(["workflows",t])];case 1:return e.sent(),[4,m.invalidateQueries(["all-workflows"])];case 2:return e.sent(),[2]}})})()},j=(0,c.wh)().currentCommunity,w=(null!=j?j:{}).current_plan_tier,S=(0,d.w)(),O=function(e){var t,n;S.show((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},(0,a.h)(e)&&{planTier:(0,s.gq)(w)}),n=n={subheading:e.body.message,isEmailHubRequired:(0,a.w)(e),source:(0,l.yf)(),onSuccess:function(){S.hide(),P({})},successButtonLabel:(0,i.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},k=(0,r.useMutation)(function(){return(0,u.Cp)(_.activate({id:t}))},{onSuccess:function(e,t){return p(function(){return b(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),t.onSuccessCallback?t.onSuccessCallback():h((0,i.t)([y,"workflow_activated"])),[2]}})})()},onError:function(e){return(0,a.h)(e)||(0,a.w)(e)?O(e):g((0,i.t)([y,"workflow_activation_error"]))}}),P=k.mutate,N=k.isLoading,C=(0,r.useMutation)(function(){return _.inactivate({id:t})},{onSuccess:function(){return p(function(){return b(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),h((0,i.t)([y,"workflow_deactivated"])),[2]}})})()},onError:function(){return g((0,i.t)([y,"workflow_deactivation_error"]))}}),E=C.mutate,I=C.isLoading;return{onActivateWorkflow:P,onDeactivateWorkflow:E,onChangeActiveStatus:function(){(n?E:function(){return P({})})()},isLoading:N||I}}},584555:function(e,t,n){n.d(t,{$m:()=>u,By:()=>l,Db:()=>b,Ep:()=>f,I3:()=>c,Ii:()=>d,PQ:()=>y,S7:()=>p,bI:()=>a,nQ:()=>s,qN:()=>o,uN:()=>m});var r=n(932699),i=n(906082),o={ALL:"all",ACTIVE:"active",INACTIVE:"inactive",DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived",IN_PROGRESS:"in_progress"},a={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",FAILED:"failed",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped"},s={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ALL:"all"},l={ONE_TIME:"one_time",RECURRING:"recurring"},c={DYNAMIC:"dynamic",BULK_ACTION:"bulk_action",SCHEDULED:"scheduled",ARCHIVED:"archived"},u=[c.DYNAMIC,c.BULK_ACTION,c.SCHEDULED,c.ARCHIVED],d={SUCCESS:"success",PARTIAL_SUCCESS:"partial_success",IN_PROGRESS:"in_progress",SKIPPED:"skipped",DUPLICATE_SKIPPED:"duplicate_skipped",FAILED:"failed",CANCELLED:"cancelled"},f=function(e){return{action_type:null!=e?e:"",id:(0,r.uniqueId)("action_"),api_params:{}}},m={ACCESS_GROUP:"AccessGroup",SPACE:"Space",PAYWALL:"Paywall",PAYWALL_COUPON:"PaywallCoupon",EVENT:"Posts::Event",MEMBER_TAG:"MemberTag",SPACE_GROUP:"SpaceGroup",POST_BASIC:"Posts::Basic",COMMUNITY:"Community",COURSE:"Space",PROFILE_FIELD:"ProfileField",RECURRING_EVENT_SETTING:"RecurringEventSetting",LESSON:"Lesson",QUIZ:"Lesson",SECTION:"Section",GAMIFICATION_LEVEL:"Gamification::Level",FORM:"Form",COMMUNITY_MEMBER_ADMIN:"CommunityMember"},p={BASIC:"basic",EVENT:"event",MEMBERS:"members",COURSE:"course",CHAT:"chat"},b=[i.Gb.enterprise,i.Gb.plus],y={ALL:"all",MH_ONLY:"mh_only",MH_WITH_LOWER_OR_HIGHER_TIER_PLAN:"mh_with_lower_or_higher_tier_plan",HIGHER_TIER_PLAN_ONLY:"higher_tier_plan_only",ENTERPRISE_AND_PLUS_ONLY:"enterprise_and_plus_only"}},630713:function(e,t,n){n.d(t,{t:()=>o});var r=n(547144),i=n(108684),o=function(){var e=(0,i.U)({api:r.av.memberTags.index}),t=e.records;return{memberTags:void 0===t?[]:t,isLoading:e.isLoading}}},912369:function(e,t,n){n.d(t,{Kg:()=>d,ko:()=>c,yf:()=>u});var r=n(275271),i=n(903225),o=n(824184),a=n(547144),s=n(494375),l="workflowSource",c=function(){var e=(0,i.TH)(),t=(0,o.U)();(0,r.useMemo)(function(){var n;if(e.pathname.includes(a.Lo.paywalls.index)?n=s.fe.PAYWALLS_WORKFLOWS_MODAL:e.pathname.includes(a.Lo.members.onboarding)?n=s.fe.ONBOARDING_WORKFLOWS_MODAL:t&&(n=s.fe.SPACE_WORKFLOWS_MODAL),n)try{sessionStorage.setItem(l,n)}catch(e){console.error("Failed to set workflow source in sessionStorage",e)}},[e,t])},u=function(){try{return sessionStorage.getItem(l)||s.fe.WORKFLOWS_UPGRADE_MODAL}catch(e){return console.error("Failed to get workflow source from sessionStorage",e),s.fe.WORKFLOWS_UPGRADE_MODAL}},d=function(){return{shouldGoBack:u()!==s.fe.WORKFLOWS_UPGRADE_MODAL}}},772582:function(e,t,n){n.d(t,{h:()=>a});var r=n(628998),i=n(547144),o=n(108684),a=function(){var e=(0,o.U)({api:i.av.segments.index,key:r.hE}),t=e.records,n=e.isLoading;return{segments:void 0===t?[]:t,isLoading:null!=n&&n}}},670216:function(e,t,n){n.d(t,{h:()=>r,w:()=>i});var r=function(e){var t,n;return!!(null==e||null==(n=e.body)||null==(t=n.data)?void 0:t.plan_limits_reached)},i=function(e){var t,n;return!!(null==e||null==(n=e.body)||null==(t=n.data)?void 0:t.marketing_hub_required)}},170973:function(e,t,n){n.d(t,{q:()=>l});var r=n(552676),i=n(739792),o=n(957363),a=n(767900),s=[{label:(0,i.t)("spaces.form.create.course_types.self_paced"),value:"self_paced",description:(0,i.t)("spaces.form.create.course_types.self_paced_info")},{label:(0,i.t)("spaces.form.create.course_types.structured"),value:"structured",description:(0,i.t)("spaces.form.create.course_types.structured_info")},{label:(0,i.t)("spaces.form.create.course_types.scheduled"),value:"scheduled",description:(0,i.t)("spaces.form.create.course_types.scheduled_info")}],l=function(e){var t=e.hideLabel;return(0,r.jsx)(a.l.Item,{name:"course_setting[course_type]",hideDescription:!0,rules:{required:(0,i.t)("spaces.form.create.choose_course_type"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",label:(0,i.t)("spaces.form.create.course_types.label"),hideLabel:t,children:(0,r.jsx)(a.l.RadioGroup,{variant:"box",name:"visibility",options:s,optionAlignment:"left",checkedIcon:(0,r.jsx)(o.JO,{type:"20-checkmark-circle",size:16})})})}},656450:function(e,t,n){n.d(t,{d:()=>r,t:()=>i});var r={self_paced:"self_paced",scheduled:"scheduled",structured:"structured"},i=r.self_paced},428865:function(e,t,n){n.d(t,{V:()=>c});var r=n(552676),i=n(227851),o=n(739792),a=n(651099),s=n(441342),l=n(767900),c=function(){var e=(0,i.qo)({name:"post_type"}),t=(0,s.wh)().currentCommunity,n=!!((null==t?void 0:t.ios_app_enabled)||(null==t?void 0:t.has_branded_app));if("chat"==e&&!n||"course"==e||"members"==e)return null;var c=[{label:(0,o.t)("spaces.form.create.notification_types.email"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".email_description")),value:"default_notification_setting"},{label:(0,o.t)("spaces.form.create.notification_types.inapp"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".inapp_description")),value:"default_in_app_notification_setting"},{label:(0,o.t)("spaces.form.create.notification_types.mobile"),description:(0,o.t)("spaces.form.create.notification_by_space_type.".concat(e,".mobile_description")),value:"default_mobile_notification_setting"}],u="chat"==e?(0,o.t)("spaces.form.create.notification_types.chat_label"):(0,o.t)("spaces.form.create.notification_types.label");return(0,r.jsx)(l.l.Item,{name:"notification_type",label:u,hideDescription:!0,hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:"chat"==e?(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(l.l.RadioGroup,{variant:"radio",name:"notification_type",verticalSpacing:"normal",options:a.M})}):(0,r.jsx)(l.l.CheckboxGroup,{name:"notification_type",options:c})})}},703281:function(e,t,n){n.d(t,{m:()=>a});var r=n(552676),i=n(739792),o=n(767900);function a(e){var t=e.disabled,n=e.isCoursesEnabled,a=e.hideLabel,s=[{label:(0,i.t)("spaces.form.create.space_types.post_label"),icon:{type:"post-2",viewBox:"0 0 20 20"},value:"basic"},{label:(0,i.t)("spaces.form.create.space_types.event_label"),icon:{type:"event",viewBox:"0 0 20 20"},value:"event"},{label:(0,i.t)("spaces.form.create.space_types.chat_label"),icon:{type:"chat-2",viewBox:"0 0 20 20"},value:"chat"}];return void 0!==n&&n&&s.push({label:(0,i.t)("spaces.form.create.space_types.course_label"),icon:{type:"book",viewBox:"0 0 20 20"},value:"course"}),s.push({label:(0,i.t)("spaces.form.create.space_types.members_label"),icon:{type:"20-space-picker-members",viewBox:"0 0 20 20"},value:"members"}),s.push({label:(0,i.t)("spaces.form.create.space_types.image_label"),icon:{type:"20-images",viewBox:"0 0 20 20"},value:"image"}),(0,r.jsx)(o.l.Item,{name:"post_type",hideLabel:void 0!==a&&a,label:(0,i.t)("spaces.form.create.space_types.label"),hideDescription:!0,rules:{required:"Please choose an access type!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,r.jsx)(o.l.RadioGroup,{className:"create-space__form__grid-type",disabled:void 0!==t&&t,variant:"box",fullWidth:!1,name:"space_type",options:s})})}},883861:function(e,t,n){n.d(t,{F:()=>J,e:()=>V});var r=n(552676),i=n(275271),o=n(932699),a=n(903225),s=n(739792),l=n(656450),c=n(256338),u=n(852770),d=n(906082),f=n(441342),m=n(547144),p=n(22270),b=n(720624),y=n(779869),v=n(494375),h=n(767900),g=n(382772),_=n(60878),x=n(28083),j=n(240507),w=n.n(j),S=n(227851),O=n(524330),k=n(380171),P=n(60589),N=n(381636),C=function(e){var t=e.spaceGroupMemberCount,n=e.chatSpaceMemberLimit,o=(0,f.e2)().helpers.findBy,a=(0,S.Gc)(),l=a.watch,c=a.setValue,u=l("space_group_id"),d=l("post_type"),m=o({id:u});(0,i.useEffect)(function(){m&&c("add_members_from_space_group",m.automatically_add_members_to_new_spaces)},[u]);var p=(0,P.Ug)({post_type:d})&&t>n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(N.Z.LabelSm,{weight:"semibold",children:(0,s.t)("settings.access_groups.admin.legacy_access.title")})}),(0,r.jsx)("div",{children:(0,r.jsx)(k.T,{role:"tooltip",content:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,r.jsx)(O.g,{square:!0,label:(0,s.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,r.jsx)(k.T,{content:(0,s.t)("members_in_space_group_limit_reached"),disabled:!p,children:(0,r.jsx)(h.l.Item,{name:"add_members_from_space_group",label:I18n.t("spaces.form.add_members_from_space_this_group"),hideBorder:!0,hideDescription:!0,className:"!mt-1 !pt-1",inline:!0,shouldToggleValueOnLabelClick:!0,isDisabled:p,children:(0,r.jsx)(h.l.ToggleSwitch,{variant:"small",disabled:p})})})]})};C.propTypes={spaceGroupMemberCount:w().number,chatSpaceMemberLimit:w().number};var E=n(615882),I=n(405521),A=n(434519);let L=function(){var e=(0,I.k)(),t=(0,f.e2)().records,n=(0,A.UV)().contentPortalElement;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:"Name is required!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,r.jsx)(h.l.Input,{ref:e,prefix:(0,r.jsx)(h.l.EmojiPickerV3Wrapper,{})})}),(0,r.jsx)(h.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:"Please choose a space group!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,r.jsx)(E.V,{variant:"form-input",spaceGroups:t,name:"space_group_id",appendTo:n})})]})};var T=n(39905),D=n(428892),M=function(e){var t=e.isLoading,n=void 0!==t&&t;return(0,r.jsx)(D.d.Footer,{sticky:!0,children:(0,r.jsx)(T.z,{type:"submit",variant:"circle",full:!0,disabled:n,form:V,children:n?(0,s.t)("creating"):(0,s.t)("create_space")})})},F=n(957363),B=function(e){var t=e.onClose;return(0,r.jsx)(D.d.Header,{addHeaderPadding:!0,title:(0,s.t)("spaces.form.create.title"),fixed:!0,Actions:(0,r.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,r.jsx)(F.JO,{type:"close"}),(0,r.jsx)("span",{className:"sr-only",children:(0,s.t)("drawer.close_panel")})]})})};function R(){return"event"!==(0,(0,S.Gc)().watch)("post_type")?null:(0,r.jsx)(h.l.Item,{name:"event_auto_rsvp_enabled",label:s.ZP.t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,r.jsx)(h.l.ToggleSwitch,{variant:"small"})})}var q=n(428865),z=n(703281);let U=function(){var e=[{label:s.ZP.t("spaces.form.create.visibility_types.open"),value:"open",info:s.ZP.t("spaces.form.create.visibility_types.open_info")},{label:s.ZP.t("spaces.form.create.visibility_types.private"),value:"private",info:s.ZP.t("spaces.form.create.visibility_types.private_info"),infoSubText:s.ZP.t("spaces.form.create.visibility_types.private_info_subtext")},{label:s.ZP.t("spaces.form.create.visibility_types.secret"),value:"secret",info:s.ZP.t("spaces.form.create.visibility_types.secret_info"),infoSubText:s.ZP.t("spaces.form.create.visibility_types.secret_info_subtext")}],t=(0,S.qo)({name:"post_type"}),n=(0,S.qo)({name:"visibility"}),i=(0,S.Gc)().setValue;return(0,P.EG)({post_type:t})?("draft"!=n&&i("visibility","draft"),(0,r.jsx)(h.l.Item,{hideBorder:!0,name:"visibility",label:s.ZP.t("courses.access"),description:s.ZP.t("courses.access_description")})):(0,r.jsx)(h.l.Item,{name:"visibility",hideDescription:!0,label:s.ZP.t("spaces.form.create.visibility_types.label"),rules:{required:"Please choose a visibility!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,r.jsx)(h.l.RadioGroup,{fullWidth:!1,variant:"box",name:"visibility",options:e})})};var G=function(e){var t,n;return null==(n=e.body)||null==(t=n.error_details)?void 0:t.max_space_limit};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function Z(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Q(o,r,i,a,s,"next",e)}function s(e){Q(o,r,i,a,s,"throw",e)}a(void 0)})}}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function H(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var V="create-space-form",J=function(e){var t,n=e.onClose,j=e.currentSpaceGroupId,w=e.post_type,S=void 0===w?"basic":w,O=e.courseSetting,k=void 0===O?{course_type:l.t}:O,P=e.prefillData,N=e.renderHeader,E=e.renderFooter,I=e.hideSpaceTypePicker,A=e.setExternalLoadingState,T=void 0===A?o.noop:A,D=(0,a.k6)(),F=(0,f.nT)().actions.refresh,Q=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),J=Q[0],$=Q[1],Y=(0,p.m)(),X=Y.createSpace,ee=Y.maxSpaceLimit,et=(0,f.wh)(),en=et.currentCommunity,er=et.currentCommunitySettings,ei=et.currentCommunityMember,eo=!!(null==ei?void 0:ei.is_admin),ea=(0,_.pm)(),es=(0,y.w)(),el=(0,f.e2)().helpers,ec=el.isDataLoading,eu=el.findBy,ed=(null==en?void 0:en.current_plan_tier)||"",ef=eu({id:j}),em={space_group_id:j,post_type:eo?S:"basic",visibility:"open",course_setting:k,emoji:"#",custom_emoji:g.j,notification_type:["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"],is_post_disabled:!0,event_auto_rsvp_enabled:!1,add_members_from_space_group:null==ef?void 0:ef.automatically_add_members_to_new_spaces,default_comment_sort:"oldest",default_member_sort:"latest",default_sort:"latest",hide_right_sidebar:"basic"===S};"chat"==S&&(em.notification_type="never");var ep=K({},em,P?(0,x.tz)(P,S):{});if(ec())return(0,r.jsx)(b.m,{});var eb=!(0,d.kw)(ed)&&!(0,d.gR)(ed)&&!!(null==ei?void 0:ei.is_admin)&&!!(null==er?void 0:er.upgrade_flows_for_space_creation_enabled),ey=function(){return Z(function(){return H(this,function(e){switch(e.label){case 0:return n(),D.push(m.Lo.content.spaces),[4,es.hide()];case 1:return e.sent(),[2]}})})()},ev=function(e){var t,n,r,i;return r=K({},(0,o.omit)(e,"notification_type","course_setting"),{default_notification_setting:(n="chat"===e.post_type?"all"==(t=e.notification_type)?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:"mentions"==t?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:e.notification_type).includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:n.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:n.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:n.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:n.includes("default_mention_in_app_notification_setting")?"all":"never"},"course"===e.post_type?{course_setting:e.course_setting}:{}),i=i={is_post_disabled:"event"===e.post_type&&e.is_post_disabled},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r};return(0,r.jsxs)(h.l,{id:V,onSubmit:function(e){return Z(function(){var t,r,i,o,a;return H(this,function(l){var c;switch(l.label){case 0:$(!0),T(!0),l.label=1;case 1:return l.trys.push([1,5,9,10]),[4,(c=e.space_group_id,Z(function(){return H(this,function(e){switch(e.label){case 0:if(!eb)return[3,2];return[4,ee(c)];case 1:e.sent(),e.label=2;case 2:return[2]}})})())];case 2:return l.sent(),[4,X(ev(e))];case 3:return t=l.sent(),[4,F()];case 4:return l.sent(),n(),D.push((0,m._v)({spaceSlug:t.slug})),[3,10];case 5:if(r=l.sent(),(0,u.dD)(r),console.error(r),i=r.firstErrorDetail,o=r.errorDetails,a=i||o,!(G(r)&&eb))return[3,7];return[4,Z(function(){return H(this,function(e){switch(e.label){case 0:return $(!1),T(!1),[4,es.show({planTier:ed&&(0,d.FZ)(ed)||void 0,onSuccess:ey,subheading:r.body.message,successButtonLabel:(0,s.t)("pricing_plans.upgrade_modal.actions.go_to_spaces"),source:v.fe.SPACE_LIMIT_UPGRADE_MODAL,showPlanDetails:!0})];case 1:return e.sent(),[2]}})})()];case 6:return l.sent(),[3,8];case 7:ea.error(a),l.label=8;case 8:return[3,10];case 9:return T(!1),[7];case 10:return[2]}})})()},defaultValues:ep,className:"create-space__form",children:[(void 0===N?B:N)({onClose:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)(L,{}),(0,c.Wk)(er)&&(0,r.jsx)(C,{spaceGroupMemberCount:(null==ef?void 0:ef.space_group_members_count)||0,chatSpaceMemberLimit:(null==en?void 0:en.chat_space_members_limit)||0}),eo&&!(void 0!==I&&I)&&(0,r.jsx)(z.m,{isCoursesEnabled:null==en?void 0:en.courses_feature_flag_enabled}),(0,r.jsx)(U,{}),(0,r.jsx)(q.V,{}),(0,r.jsx)(R,{})]}),(void 0===E?M:E)({isLoading:J})]})}},728120:function(e,t,n){n.d(t,{_:()=>a});var r=n(552676),i=n(441342),o=n(883861),a=function(e){return(0,r.jsx)(i.Br,{children:(0,r.jsx)(i.CM,{children:(0,r.jsx)(o.F,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e))})})}},651099:function(e,t,n){n.d(t,{M:()=>i,n:()=>o});var r=n(739792),i=[{value:"all",label:(0,r.t)("notification_settings.all.label"),description:(0,r.t)("notification_settings.all.description")},{value:"mentions",label:(0,r.t)("notification_settings.mentions.label"),description:(0,r.t)("notification_settings.mentions.description")},{value:"never",label:(0,r.t)("notification_settings.never.label"),description:(0,r.t)("notification_settings.never.description")}],o=[{value:"all",label:(0,r.t)("member_notification_settings.all.label"),description:(0,r.t)("member_notification_settings.all.description")},{value:"mentions",label:(0,r.t)("member_notification_settings.mentions.label"),description:(0,r.t)("member_notification_settings.mentions.description")},{value:"never",label:(0,r.t)("member_notification_settings.never.label"),description:(0,r.t)("member_notification_settings.never.description")}]},884690:function(e,t,n){n.d(t,{S:()=>a});var r=n(552676),i=n(22319),o=n(280219),a=function(e){var t=e.spaces,n=e.valueKey,a=void 0===n?"slug":n,s=(0,i.TC)().currentAppearance;return t.map(function(e){var t,n,i=e.name;return{richLabel:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.S,{className:"mr-1 inline !h-5 !w-5 align-text-top",emoji:e.emoji,appearance:s,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url}),(0,r.jsx)("span",{children:e.name})]}),label:i,value:null!=(n=null==(t=e[a])?void 0:t.toString())?n:""}})}},500184:function(e,t,n){n.d(t,{rp:()=>r});var r={disabledExtensions:["file","image","embeds","poll","cta","ai_copilot","horizontal_rule","code_block","mention","entities"],disabledSlashMenuCategories:["Upload","Embed"],disabledSlashMenuCommands:["image","giphy","audio","video","pdf","file","poll","code"]}},256338:function(e,t,n){n.d(t,{Sg:()=>o,Wk:()=>a,kk:()=>s,un:()=>r});var r={communitySetting:"CommunitySetting",paywall:"Paywall",invitationLink:"InvitationLink",memberBulkImport:"AsyncTasks::BulkCommunityMemberImportTask"},i=Object.freeze({ARCHIVED:"archived",ACTIVE:"active"}),o=function(e){return(null==e?void 0:e.status)===i.ARCHIVED},a=function(e){return!(null==e?void 0:e.block_access_groups_for_trials_enabled)},s=function(e){return e===r.paywall}},912979:function(e,t,n){n.d(t,{U:()=>r});var r=function(e){return e.memberTags.filter(function(e){var t=e.display_locations;return(null==t?void 0:t.member_directory)&&e.is_public})}},782705:function(e,t,n){n.d(t,{X:()=>r});var r={customize:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/customize")},audience:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/audience")},behavior:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/behavior")},knowledge:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/knowledge")},automations:function(e){var t=e.botPublicId;return"/settings/ai-agents/edit/".concat(t,"/automations")}}},376492:function(e,t,n){n.d(t,{S:()=>c});var r=n(275271),i=n(932699),o=n(131906),a=n(93199),s=n(547144),l=["access_groups","index"],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params,n=void 0===t?{}:t,c=e.enabled,u=(0,o.useInfiniteQuery)([l,n.ids],function(e){var t=e.pageParam;return(0,a.UT)(s.av.admin.accessGroups.index({params:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({page:void 0===t?1:t,per_page:100},n)}))},{enabled:void 0===c||c,getNextPageParam:function(e){return e.has_next_page?Number(e.page)+1:void 0}}),d=u.data,f=u.fetchNextPage,m=u.hasNextPage,p=u.isLoading,b=u.isError,y=u.refetch;return(0,r.useEffect)(function(){m&&f()},[d,f,m]),{data:(0,i.flatten)(null==d?void 0:d.pages.map(function(e){return e.records})),isError:b,refetch:y,isLoading:!!(p||m)}}},981779:function(e,t,n){n.d(t,{k:()=>s});var r=n(131906),i=n(93199),o=n(547144),a=n(65766),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.useQuery)({queryKey:[e],queryFn:function(){var e,n;return(0,i.UT)(o.av.paywalls.index({params:(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),n=n={status:t.status||a.dl},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e)}))}}),s=n.data,l=n.isLoading;return{paywalls:(void 0===s?[]:s).map(function(e){return{label:e.display_name,value:e.id.toString()}}),isPaywallsLoading:l}}},248996:function(e,t,n){n.d(t,{y:()=>u});var r=n(275271),i=n(131906),o=n(93199),a=n(78456),s=n(547144),l=n(441342),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.UT)(s.av.paywalls.index({params:e}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.wh)().currentCommunityMember,n="PAYWALLS"+JSON.stringify(e),o=(0,i.useQuery)({queryKey:[n],queryFn:function(){return c(e)},enabled:!!(0,a.vb)(t)}),s=o.data,u=void 0===s?[]:s,d=o.isSuccess,f=o.isLoading,m=(0,r.useMemo)(function(){return u?u.filter(function(e){return"active"===e.status}):[]},[u]),p=(0,r.useMemo)(function(){return!!m&&(null==m?void 0:m.length)>0},[m]);return{activePaywalls:m,isSuccess:d,hasActivePaywalls:p,hasPaywalls:(0,r.useMemo)(function(){return!!u&&(null==u?void 0:u.length)>0},[u]),isLoading:f,allPaywalls:u}}},108684:function(e,t,n){n.d(t,{U:()=>s});var r=n(275271),i=n(932699),o=n(131906),a=n(93199),s=function(e){var t=e.api,n=e.key,s=e.useParamsWrapper,l=void 0===s||s,c=(0,o.useInfiniteQuery)(["un-paginate",void 0===n?"tags":n,t],function(e){var n=e.pageParam,r=void 0===n?1:n;return(0,a.UT)(t(l?{params:{page:r}}:{page:r}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),u=c.data,d=c.fetchNextPage,f=c.hasNextPage,m=c.isLoading;return(0,r.useEffect)(function(){f&&d()},[f,d,u]),{records:(0,i.flatten)(null==u?void 0:u.pages.map(function(e){return e.records}))||[],isLoading:m||f,hasNextPage:f}}},955269:function(e,t,n){n.d(t,{y:()=>a});var r=n(131906),i=n(251630),o=n(60878),a=function(e){var t=e.ids,n=e.withDeleted,a=e.enabled,s=(0,o.pm)(),l=(0,i.WX)();return(0,r.useQuery)(["COMMUNITY_MEMBERS_LIST",t,n],function(){return l.fetchContacts({params:{ids:t,with_deleted:n}})},{enabled:a,onError:function(e){s.error(e.message)}})}},798349:function(e,t,n){n.d(t,{X:()=>g});var r=n(275271),i=n(855270),o=n(711951),a=n(932699),s=n(227851),l=n(691525),c=n(742470);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)})}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b=new i.lE,y=function(e){return[e.name,e.place_formatted].filter(Boolean).join(", ")},v=function(e){return e.features[0].properties.full_address},h=["country","region","district","place","locality","neighborhood"],g=function(e){var t=e.initialValue,n=e.shouldSkipLocationDetailRetrieve,i=void 0!==n&&n,u=e.locationTypes,d=void 0===u?h:u,g=e.name,_=m((0,r.useState)([]),2),x=_[0],j=_[1],w=m((0,r.useState)(!1),2),S=w[0],O=w[1],k=m((0,r.useState)(null),2),P=k[0],N=k[1],C=m((0,r.useState)(null!=t?t:null),2),E=C[0],I=C[1],A=(0,l.N3)(),L=(null==A?void 0:A.locale)||"en",T=(0,s.Gc)(),D=T.setValue,M=T.getValues,F=(0,c._)(),B=F.data,R=F.refetch,q=M(g),z=(0,o.Eh)({accessToken:null==B?void 0:B.token}),U=(0,r.useMemo)(function(){return(0,a.debounce)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f(function(){var n;return p(this,function(r){switch(r.label){case 0:if(!e)return[3,10];r.label=1;case 1:return r.trys.push([1,3,,9]),[4,z.suggest(e,{sessionToken:b,language:L,types:d.join(",")})];case 2:return j(r.sent().suggestions),[3,9];case 3:var i,o;if(!((void 0===(n=r.sent())?"undefined":(i=n)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)=="object"&&null!==n&&"statusCode"in n&&401===n.statusCode&&t<3))return[3,7];return[4,(o=1e3*t,new Promise(function(e){return setTimeout(e,o)}))];case 4:return r.sent(),[4,R()];case 5:return r.sent(),[4,U(e,t+1)];case 6:return r.sent(),[3,8];case 7:throw n;case 8:return[3,9];case 9:return[3,11];case 10:j([]),r.label=11;case 11:return[2]}})})()},300)},[z,L,d,R]),G=null==x?void 0:x.map(function(e){return{type:"mapbox_v6",text:e.name,value:e.mapbox_id,data:e,description:y(e)}}),W=(0,r.useMemo)(function(){return P?{type:"mapbox_v6",text:v(P),data:P,value:P.features[0].properties.mapbox_id,description:v(P)}:E?{type:"mapbox_v6",text:E.text,data:E.data,value:E.value,description:E.description}:null},[P,E]);return(0,r.useEffect)(function(){if((null==W?void 0:W.text)!==(null==q?void 0:q.text)){var e;D(g,{type:"mapbox_v6",text:null!=(e=null==W?void 0:W.text)?e:"",data:null==W?void 0:W.data},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})}},[W,g,D,null==q?void 0:q.text]),{handleClearLocation:function(){I(null),N(null),j([]),O(!0),D(g,{type:"mapbox_v6",text:"",data:{place_formatted:null,name:"",mapbox_id:null},value:""},{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},locationOptions:G,handleSuggestionSelect:function(e){return f(function(){var t;return p(this,function(n){switch(n.label){case 0:if(!e)return j([]),N(null),[2];n.label=1;case 1:var r;if(n.trys.push([1,3,,4]),i)return I(e),N(null),j([]),[2];if(r=e.value,!(t=null==x?void 0:x.find(function(e){return e.mapbox_id===r})))throw Error("Suggestion not found");return[4,z.retrieve(t,{sessionToken:b,language:L})];case 2:return N(n.sent()),I(null),j([]),[2];case 3:return console.error(n.sent()),N(null),I(null),j([]),[3,4];case 4:return[2]}})})()},value:W,debouncedSearch:U,hasNoSuggestions:(null==x?void 0:x.length)===0,displayValue:function(e){return(null==e?void 0:e.data)?"mapbox_id"in e.data?y(e.data):v(e.data):S?"":(null==t?void 0:t.text)||""}}}},742470:function(e,t,n){n.d(t,{_:()=>a});var r=n(131906),i=n(93199),o=n(290544),a=function(){return(0,r.useQuery)({queryKey:["mapbox-token"],queryFn:function(){return(0,i.Cu)((0,o.E)("mapbox_v6/token"))},onError:function(e){return console.error(e)}})}},721523:function(e,t,n){n.d(t,{t:()=>o});var r=n(793672),i=n(903225),o=function(e){var t=(0,i.TH)().search,n=(0,r.parse)(t,{ignoreQueryPrefix:!0});try{return e.cast(n)}catch(e){return console.error("Error parsing query params",e),{}}}},22270:function(e,t,n){n.d(t,{m:()=>l});var r=n(275271),i=n(93199),o=n(547144);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){var e=s((0,r.useState)(!1),2),t=e[0],n=e[1],a=s((0,r.useState)(null),2),l=a[0],c=a[1],u=s((0,r.useState)(!1),2),d=u[0],f=u[1];return{isJoined:t,joinSpace:function(e){return fetch((0,o.J6)(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({space_id:e})}).then(function(e){return e.json()}).then(function(){n(!0)}).catch(function(e){console.error(e)})},space:l,fetchSpace:function(e){return(0,i.t5)((0,o.Ox)(String(e))).then(function(e){return null==e?void 0:e.json()}).then(function(e){c(e)})},updateSpace:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(!0);var a=(null!=(n=FormData)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n)?e:JSON.stringify({space:e}),s=t||(null==l?void 0:l.id);if(!s)throw Error("Space ID is required");return(0,i.t5)((0,o.C1)(String(s)),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({method:"PATCH",body:a},r)).then(function(e){return null==e?void 0:e.json()}).then(function(e){return c(e),f(!1),e})},createSpace:function(e){var t=JSON.stringify({space:e});return(0,i.t5)(o.av.spaces.create(),{method:"POST",body:t,forReactQuery:!0})},maxSpaceLimit:function(e){return(0,i.t5)(o.av.spaces.maxSpaceLimit(e),{method:"GET",forReactQuery:!0})},isSubmitting:d,reSetWelcomeBannerPreference:function(e){return(0,i.gN)(o.av.spaces.resetSpaceWelcomeBannerPreferencePath(e))}}}},824184:function(e,t,n){n.d(t,{U:()=>i});var r=n(903225),i=function(){var e,t=(0,r.$B)("/c/:spaceSlug");return null==t||null==(e=t.params)?void 0:e.spaceSlug}},299725:function(e,t,n){n.d(t,{t:()=>l});var r=n(552676),i=n(227851),o=n(739792),a=n(767900),s=n(381636),l=function(e){var t=e.name,n=e.maxLength,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["name","maxLength"]),c=(0,(0,i.Gc)().watch)(t),u=(null==c?void 0:c.length)||0,d=n-u,f=new Intl.NumberFormat("en-US").format(d),m=new Intl.NumberFormat("en-US").format(n),p=u>n;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.l.Input,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({name:t,variant:"textarea",maxLength:n},l)),(0,r.jsx)("div",{className:"mt-2 text-left",children:(0,r.jsx)(s.Z.LabelXs,{color:p?"text-v2-danger":"text-default",children:(0,o.t)("community_bot.bot_builder.behavior_page.form.purpose.characters_left",{count:f,total:m})})})]})}},87545:function(e,t,n){n.d(t,{J:()=>a});var r=n(552676),i=n(739792),o=n(957363),a=function(e){var t=e.onClick,n=e.variant,a=void 0===n?"default":n;return(0,r.jsxs)("button",{type:"button",className:"".concat("text-xs-plus flex items-center justify-center gap-2 rounded-full border px-3.5 py-1.5 font-semibold"," ").concat("light"===a?"border-white bg-white text-gray-900 hover:bg-gray-100":"dark"===a?"border-[#2b2e33] bg-[#2b2e33] text-[#f7f9fa] hover:border-[#3a3d42] hover:bg-[#3a3d42]":"bg-primary text-darkest border-primary hover:bg-circle-button hover:text-circle-button"),onClick:t,children:[(0,r.jsx)(o.JO,{type:"20-reload",size:20}),(0,i.t)("community_inbox.reset_preview")]})}},114596:function(e,t,n){n.d(t,{g:()=>d});var r=n(552676),i=n(757105),o=n(497202),a=n(739792),s=n(293291),l=n(963549),c=function(e){var t=e.agent,n=(0,s.vQ)({id:t.id}).mutate,i=(0,o.dd)();return(0,r.jsx)(l.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",onConfirm:function(){n({enabled:!1}),i.hide()},title:(0,a.t)("community_bot.bot_builder.disable_modal.title",{name:t.name}),confirmText:(0,a.t)("community_bot.bot_builder.disable_modal.enable"),children:(0,a.t)("community_bot.bot_builder.disable_modal.description")})},u=i.gk.create(function(e){var t=e.agent;return(0,r.jsx)(c,{agent:t})}),d=function(e){return(0,i.dd)(u,{agent:e})}},485712:function(e,t,n){n.d(t,{k:()=>d});var r=n(552676),i=n(757105),o=n(497202),a=n(739792),s=n(293291),l=n(963549),c=function(e){var t=e.agent,n=(0,s.vQ)({id:t.id}).mutate,i=(0,o.dd)();return(0,r.jsx)(l.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",onConfirm:function(){n({enabled:!0}),i.hide()},title:(0,a.t)("community_bot.bot_builder.enable_modal.title",{name:t.name}),confirmText:(0,a.t)("community_bot.bot_builder.enable_modal.enable"),children:(0,a.t)("community_bot.bot_builder.enable_modal.description")})},u=i.gk.create(function(e){var t=e.agent;return(0,r.jsx)(c,{agent:t})}),d=function(e){return(0,i.dd)(u,{agent:e})}},619573:function(e,t,n){n.d(t,{y:()=>i});var r=n(552676),i=function(e){var t=e.type;return(0,r.jsx)("span",{className:"text-dark bg-secondary rounded-3xl px-2 py-1 text-center text-xs font-medium leading-[14px] tracking-normal",children:t})}},435769:function(e,t,n){n.d(t,{$w:()=>m,HH:()=>v,KC:()=>f,aW:()=>y,ib:()=>c});var r=n(131906),i=n(93199),o=n(547144);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=["internal_api","community_bot","custom_resources"],u=l(c).concat(["for_knowledge"]),d=l(c).concat(["for_import"]),f=function(e){var t=e.currentPage,n=e.snippetIds;return(0,r.useQuery)({queryKey:l(u).concat([n]),queryFn:function(){return(0,i.UT)(o.av.communityBot.customResources.index({params:{page:t,per_page:10,snippet_ids:n.join(","),imported:"true"}}))},keepPreviousData:!0})},m=function(e){var t=e.currentPage,n=e.snippetIds,a=e.title,c=e.type;return(0,r.useQuery)({queryKey:l(d).concat([n,a,c]),queryFn:function(){return(0,i.UT)(o.av.communityBot.customResources.index({params:s({page:t,per_page:10,snippet_ids:n.join(","),imported:"false"},a?{title:a}:{},c?{type:c}:{})}))},keepPreviousData:!0})},p=["internal_api","community_bot","community_resources","for_knowledge"],b=["internal_api","community_bot","community_resources","for_import"],y=function(e){var t=e.currentPage,n=e.spaceIds;return(0,r.useQuery)({queryKey:l(p).concat([n]),queryFn:function(){return(0,i.UT)(o.av.communityBot.communityResources.index({params:{page:t,per_page:10,imported:"true",space_ids:n.join(",")}}))},keepPreviousData:!0})},v=function(e){var t=e.currentPage,n=e.spaceIds,a=e.name,c=e.type,u=e.spaceGroup;return(0,r.useQuery)({queryKey:l(b).concat([n,a,c,u]),queryFn:function(){return(0,i.UT)(o.av.communityBot.communityResources.index({params:s({page:t,per_page:10,imported:"false",space_ids:n.join(",")},a?{name:a}:{},c?{type:c}:{},u?{space_group:u}:{})}))},keepPreviousData:!0})}}}]);
//# sourceMappingURL=/packs/js/6633-fc656e3ff76008dc.js.map