(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["3774"],{460344:function(e,t,r){var n={"./landing-page-pt/feature-1_1x.png":["561309","8903"],"./landing-page-en/feature-3_1x.png":["757803","4255"],"./landing-page-pt/feature-3_1x.png":["157211","5107"],"./landing-page-pt/feature-2_1x.png":["959538","5634"],"./landing-page-en/feature-2_1x.png":["391234","1947"],"./landing-page-en/feature-1_1x.png":["994167","989"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=460344,e.exports=i},950542:function(e,t,r){var n={"./landing-page-pt/feature-1_1x.png":["561309","8903"],"./landing-page-en/feature-3_1x.png":["757803","4255"],"./landing-page-pt/feature-3_1x.png":["157211","5107"],"./landing-page-pt/feature-2_1x.png":["959538","5634"],"./landing-page-en/feature-2_1x.png":["391234","1947"],"./landing-page-en/feature-1_1x.png":["994167","989"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=950542,e.exports=i},129631:function(e,t,r){var n={"./landing-page-en/feature-2_2x.png":["281128","8483"],"./landing-page-pt/feature-1_2x.png":["793279","662"],"./landing-page-pt/feature-3_2x.png":["185798","9110"],"./landing-page-pt/feature-2_2x.png":["748543","1568"],"./landing-page-en/feature-1_2x.png":["139382","3682"],"./landing-page-en/feature-3_2x.png":["570556","3421"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=129631,e.exports=i},265994:function(e,t,r){var n={"./landing-page-pt/feature-2_3x.png":["442","9762"],"./landing-page-en/feature-2_3x.png":["828552","9670"],"./landing-page-pt/feature-1_3x.png":["79230","9503"],"./landing-page-en/feature-1_3x.png":["779458","217"],"./landing-page-pt/feature-3_3x.png":["82259","5715"],"./landing-page-en/feature-3_3x.png":["854182","2398"]};function i(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(function(){return r.t(i,17)})}i.keys=()=>Object.keys(n),i.id=265994,e.exports=i},77065:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=77065,e.exports=t},32196:function(e,t,r){var n={"./authentication_form_controller.js":"73123","./back_controller.js":"421793","./collapsible_controller.js":"793736","./daterange_controller.js":"798206","./dropdown_controller.js":"396735","./flash_controller.js":"887818","./form_controller.js":"866677","./mobile_sidebar_controller.js":"848366","./multiselect_controller.js":"314486","./popup_controller.js":"202713","./react_mount_controller.ts":"38159","./recaptcha_controller.js":"399588","./reorder_controller.js":"178413","./reorderparent_controller.js":"122447","./toggle_controller.js":"128396","./validation_controller.js":"500557"};function i(e){return r(o(e))}function o(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=32196},637137:function(e,t,r){"use strict";e.exports=r.p+"static/images/circular-logo@2x-ca2edfc403dda74c.png"},533578:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-1x-217c5f2355307f08.png"},475834:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-2x-6b7bf11064134146.png"},289335:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/in-app-payments/mobile-4x-d82406b02b246d5b.png"},360954:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_1x-9ecd76904e5b75ff.png"},664:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_2x-d1cd1ab0eb08033c.png"},248706:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-1_4x-fb88d0dcf6d564de.png"},386542:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_1x-067b6767a175569b.png"},953894:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_2x-f50647782b3b9b0a.png"},754120:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-2_4x-5684315adb69bb5f.png"},368134:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_1x-d0ae75aae34bdd5f.png"},805131:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_2x-f8272786f47c15e0.png"},247324:function(e,t,r){"use strict";e.exports=r.p+"static/images/features/marketing-hub/landing-page/feature-3_4x-ceaebb07bb490cb4.png"},36191:function(e,t,r){var n=r(77065);n.keys().forEach(n)},824674:function(e,t,r){"use strict";var n=r(153416),i=r(739792),o=r(35136),a=r.n(o);r(301508),r(963504);var s=r(566019);r(325058).start(),r(279460).BL(),r(36191),r(722640),r(118271),window.I18n=i.ZP,(0,i.XJ)(),a().start(),window.initialiseTippy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=(0,s.ZP)(e.querySelectorAll("[data-tippy-content]"),{allowHTML:!0});document.addEventListener("touchstart",function e(){t.forEach(function(e){e.destroy()}),document.removeEventListener("touchstart",e)})},document.addEventListener("turbolinks:load",function(){if(window.initialiseTippy(),document.querySelectorAll(".iframe-mode")[0])for(var e=document.getElementsByTagName("a"),t=0,r=e.length;t<r;t++)e[t].target="_blank";window.location.href.includes("show_back_link=true")&&window.history.replaceState({},document.title,location.href.split("?")[0])}),document.addEventListener("turbolinks:click",function(e){var t=e.target;t.hash&&t.origin===window.location.origin&&t.pathname===window.location.pathname&&(Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(e.data.url,Turbolinks.uuid()),e.preventDefault())}),document.addEventListener("turbolinks:load",function(){if(window.location.hash){var e=document.getElementById(window.location.hash.slice(1));if(e)return void e.scrollIntoView(!0);var t=document.getElementsByName(window.location.hash.slice(1));t.length&&t[0].scrollIntoView(!0)}}),window.webview={isComingFromReactNativeWebview:!1,isComingFromReactNativeAuthenticatedWebview:!1,isInsideMobileWebview:!1,electronAPI:{},onLeaveLiveStream:null,onEndLiveStream:null},n.Z.start()},203176:function(e,t,r){"use strict";r.d(t,{L:()=>o});var n=r(93199),i=r(547144),o=function(){return{listAccessGroups:function(e){var t=e.params;return(0,n.UT)(i.av.admin.accessGroups.index({params:void 0===t?{}:t}))},createAccessGroup:function(e){return(0,n.Cu)(i.av.admin.accessGroups.create(),e)},showAccessGroup:function(e){return(0,n.UT)(i.av.admin.accessGroups.show(e))},updateAccessGroup:function(e){var t=e.id,r=e.params;return(0,n.aU)(i.av.admin.accessGroups.update(t),r)},destroyAccessGroup:function(e){return(0,n.pC)(i.av.admin.accessGroups.delete(e))},unarchiveAccessGroup:function(e){return(0,n.aU)(i.av.admin.accessGroups.unarchive(e))}}}},445555:function(e,t,r){"use strict";r.d(t,{H:()=>o});var n=r(93199),i=r(547144),o=function(){return{manageAccessGroupSources:function(e){var t=e.params;return(0,n.aU)(i.av.admin.accessGroupSources.manage(),t)}}}},783886:function(e,t,r){"use strict";r.d(t,{Y:()=>f});var n=r(93199),i=r(547144),o=r(698173);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var l=function(e,t){var r=new Date,n=new Date(r.getTime()-24*e*36e5),i=function(e){return e.toISOString().split("T")[0]};return{end_date:i(r),start_date:i(n),date_grouping:t}};function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var f={overview:{monthly_active_users:function(e){return(0,n.UT)(i.av.analytics.overview.monthly_active_users(a({},l(30,"monthly"),e)))},monthly_active_users_by_date:function(e){return(0,n.UT)(i.av.analytics.overview.monthly_active_users_by_date(e))},daily_active_members:function(e){return(0,n.UT)(i.av.analytics.overview.daily_active_members(a({},l(30,"monthly"),e)))},inactive_members:function(e){return(0,n.UT)(i.av.analytics.overview.inactive_members(a({},l(30,"monthly"),e)))},invitation_pending:function(e){return(0,n.UT)(i.av.analytics.overview.invitation_pending(a({},e,l(30,"monthly"))))},popular_spaces:function(e){return(0,n.UT)(i.av.analytics.overview.popular_spaces(a({},e,l(30,"monthly"))))},popular_posts:function(e){return(0,n.UT)(i.av.analytics.overview.popular_posts(a({},e,l(30,"monthly"))))},top_members:function(e){return(0,n.UT)(i.av.analytics.overview.top_members(a({},l(30,"monthly"),e)))},post_starters:function(e){return(0,n.UT)(i.av.analytics.overview.post_starters(a({},l(30,"monthly"),e)))},total_members:function(e){return(0,n.UT)(i.av.analytics.members.total_members(a({},e,l(30,"monthly"))))},active_members:function(e){return(0,n.UT)(i.av.analytics.members.active_members(a({},l(30,"monthly"),e)))},activity_scores:function(e){return(0,n.UT)(i.av.analytics.overview.activity_score(a({},e,l(30,"monthly"))))},monthly_active_members:function(e){return(0,n.UT)(i.av.analytics.overview.monthly_active_members(a({},l(365,"monthly"),e)))},monthly_new_members:function(e){return(0,n.UT)(i.av.analytics.overview.monthly_new_members(a({},l(365,"monthly"),e)))},member_distribution_by_country:function(e){return(0,n.UT)(i.av.analytics.members.member_distribution_by_country(s(a({},l(30,"monthly"),e),{filters:s(a({},e.filters||{}),{space_ids:"0",space_group_ids:"0"})})))},popular_day_and_time:function(e){return(0,n.UT)(i.av.analytics.members.popular_day_and_time(a({},l(90,"weekly"),e)))}},devices:{mobile_web_devices:function(e){return(0,n.UT)(i.av.analytics.devices.mobile_web_devices(e))},total_ios_devices:function(e){return(0,n.UT)(i.av.analytics.devices.total_ios_devices(e))},total_android_devices:function(e){return(0,n.UT)(i.av.analytics.devices.total_android_devices(e))},active_members_by_device:function(e){return(0,n.UT)(i.av.analytics.devices.active_members_by_device(e))},estimated_session_minutes:function(e){return(0,n.UT)(i.av.analytics.devices.estimated_session_minutes(e))},session_distribution_by_country:function(e){return(0,n.UT)(i.av.analytics.devices.session_distribution_by_country(e))},active_members:function(e){return(0,n.UT)(i.av.analytics.devices.active_members(e))},most_active_on_mobile:function(e){return(0,n.UT)(i.av.analytics.devices.most_active_on_mobile(e))}},events:{events_completed:function(e){return(0,n.UT)(o.a.analytics.events.events_completed(e))},total_rsvps:function(e){return(0,n.UT)(o.a.analytics.events.total_rsvps(e))},live_attendance:function(e){return(0,n.UT)(o.a.analytics.events.live_attendance(e))},tickets_sold:function(e){return(0,n.UT)(o.a.analytics.events.tickets_sold(e))},event_revenue:function(e){return(0,n.UT)(o.a.analytics.events.event_revenue(e))},popular_times:function(e){return(0,n.UT)(o.a.analytics.events.popular_times(e))},event_activity:function(e){return(0,n.UT)(o.a.analytics.events.event_activity(e))},popular_events:function(e){return(0,n.UT)(o.a.analytics.events.popular_events(e))},top_attendees:function(e){return(0,n.UT)(o.a.analytics.events.top_attendees(e))},total_rsvps_by_date:function(e){return(0,n.UT)(o.a.analytics.events.total_rsvps_by_date(e))}},live:{events_completed:function(e){return(0,n.UT)(i.av.analytics.live.events_completed(e))},total_rsvps:function(e){return(0,n.UT)(i.av.analytics.live.total_rsvps(e))},live_attendance:function(e){return(0,n.UT)(i.av.analytics.live.live_attendance(e))},tickets_sold:function(e){return(0,n.UT)(i.av.analytics.live.tickets_sold(e))},event_revenue:function(e){return(0,n.UT)(i.av.analytics.live.event_revenue(e))},popular_times:function(e){return(0,n.UT)(i.av.analytics.live.popular_times(e))},event_activity:function(e){return(0,n.UT)(i.av.analytics.live.event_activity(e))},popular_events:function(e){return(0,n.UT)(i.av.analytics.live.popular_events(e))},top_attendees:function(e){return(0,n.UT)(i.av.analytics.live.top_attendees(e))}},paywalls:{overview:{total_transactions:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.total_transactions(e))},total_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.total_revenue(e))},sales_breakdown:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.sales_breakdown(e))},revenue_breakdown:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.revenue_breakdown(e))},revenue_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.revenue_growth(e))},highest_grossing_paywalls:function(e){return(0,n.UT)(i.av.analytics.paywalls.overview.highest_grossing_paywalls(e))}},one_time:{total_transactions:function(e){return(0,n.UT)(i.av.analytics.paywalls.one_time.total_transactions(e))},total_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.one_time.total_revenue(e))},revenue_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.one_time.revenue_growth(e))},average_order_value:function(e){return(0,n.UT)(i.av.analytics.paywalls.one_time.average_order_value(e))},repurchases:function(e){return(0,n.UT)(i.av.analytics.paywalls.one_time.repurchases(e))}},installments:{active_installments:function(e){return(0,n.UT)(i.av.analytics.paywalls.installments.active_installments(e))},installment_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.installments.installment_revenue(e))},installments_revenue_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.installments.installments_revenue_growth(e))}},conversions:{rate_histogram:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.rate_histogram(e))},number_of_page_views:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.number_of_page_views(e))},number_of_conversions:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.number_of_conversions(e))},conversion_rate:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.conversion_rate(e))},number_of_first_time_visitors:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.number_of_first_time_visitors(e))},number_of_repeat_visitors:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.number_of_repeat_visitors(e))},median_time_to_convert:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,(0,n.UT)(i.av.analytics.paywalls.conversions.median_time_to_convert(e))];case 1:return[2,t.sent().median_time]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()},devices:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.devices(e))},browsers:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.browsers(e))},bounce_rate:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.bounce_rate(e))},referral_uris:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.referral_uris(e))},views_per_country:function(e){return(0,n.UT)(i.av.analytics.paywalls.conversions.views_per_country(e))}},subscriptions:{monthly_recurring_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.monthly_recurring_revenue(e))},annual_recurring_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.annual_recurring_revenue(e))},active_subscribers_count:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.active_subscribers_count(e))},net_monthly_recurring_revenue_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.net_monthly_recurring_revenue_growth(e))},new_subscribers_count:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.new_subscribers_count(e))},active_trials_count:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.active_trials_count(e))},trial_conversion:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.trial_conversion(e))},net_subscribers_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.net_subscribers_growth(e))},average_monthly_revenue:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.average_monthly_revenue(e))},churn_rate:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.churn_rate(e))},monthly_recurring_revenue_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.monthly_recurring_revenue_growth(e))},active_subscriptions_growth:function(e){return(0,n.UT)(i.av.analytics.paywalls.subscriptions.active_subscriptions_growth(e))}}},members:{total_members:function(e){return(0,n.UT)(i.av.analytics.members.total_members(e))},total_members_by_date:function(e){return(0,n.UT)(i.av.analytics.members.total_members_by_date(e))},active_members:function(e){return(0,n.UT)(i.av.analytics.members.active_members(e))},active_members_by_date:function(e){return(0,n.UT)(i.av.analytics.members.active_members_by_date(e))},new_members:function(e){return(0,n.UT)(i.av.analytics.members.new_members(e))},new_members_by_date:function(e){return(0,n.UT)(i.av.analytics.members.new_members_by_date(e))},activity_scores:function(e){return(0,n.UT)(i.av.analytics.members.activity_scores(e))},member_distribution_by_country:function(e){return(0,n.UT)(i.av.analytics.members.member_distribution_by_country(e))},top_members:function(e){return(0,n.UT)(i.av.analytics.members.top_members(e))},active_commenters:function(e){return(0,n.UT)(i.av.analytics.members.active_commenters(e))},post_starters:function(e){return(0,n.UT)(i.av.analytics.members.post_starters(e))},most_appreciated:function(e){return(0,n.UT)(i.av.analytics.members.most_appreciated(e))},popular_day_and_time:function(e){return(0,n.UT)(i.av.analytics.members.popular_day_and_time(e))}},messages:{conversations:function(e){return(0,n.UT)(i.av.analytics.messages.conversations(e))},chat_messages:function(e){return(0,n.UT)(i.av.analytics.messages.chat_messages(e))},message_senders:function(e){return(0,n.UT)(i.av.analytics.messages.message_senders(e))},direct_messages:function(e){return(0,n.UT)(i.av.analytics.messages.direct_messages(e))},new_dm_conversations:function(e){return(0,n.UT)(i.av.analytics.messages.new_dm_conversations(e))},group_chat_messages:function(e){return(0,n.UT)(i.av.analytics.messages.group_chat_messages(e))},new_group_chat_conversation:function(e){return(0,n.UT)(i.av.analytics.messages.new_group_chat_conversation(e))},chat_space_messages:function(e){return(0,n.UT)(i.av.analytics.messages.chat_space_messages(e))},live_room_messages:function(e){return(0,n.UT)(i.av.analytics.messages.live_room_messages(e))},most_active_members:function(e){return(0,n.UT)(i.av.analytics.messages.most_active_members(e))},conversations_by_date:function(e){return(0,n.UT)(i.av.analytics.messages.conversations_by_date(e))}},post_comments:{total_posts:function(e){return(0,n.UT)(i.av.analytics.post_comments.total_posts(e))},total_comments:function(e){return(0,n.UT)(i.av.analytics.post_comments.total_comments(e))},members_posts:function(e){return(0,n.UT)(i.av.analytics.post_comments.members_posts(e))},total_post_views:function(e){return(0,n.UT)(i.av.analytics.post_comments.total_post_views(e))},unique_member_post_views:function(e){return(0,n.UT)(i.av.analytics.post_comments.unique_member_post_views(e))},unique_public_post_views:function(e){return(0,n.UT)(i.av.analytics.post_comments.unique_public_post_views(d(u({},e),{filters:d(u({},e.filters||{}),{space_ids:"0",space_group_ids:"0"})})))},post_views:function(e){return(0,n.UT)(i.av.analytics.post_comments.post_views(e))},new_posts:function(e){return(0,n.UT)(i.av.analytics.post_comments.new_posts(e))},new_comments:function(e){return(0,n.UT)(i.av.analytics.post_comments.new_comments(e))},new_posts_with_score:function(e){return(0,n.UT)(i.av.analytics.post_comments.new_posts_with_score(e))},popular_comments:function(e){return(0,n.UT)(i.av.analytics.post_comments.popular_comments(e))},popular_posts:function(e){return(0,n.UT)(i.av.analytics.post_comments.popular_posts(e))}},websites:{unique_visitors:function(e){return(0,n.UT)(i.av.analytics.websites.unique_visitors(e))},unique_visitors_by_date:function(e){return(0,n.UT)(i.av.analytics.websites.unique_visitors_by_date(e))},page_views:function(e){return(0,n.UT)(i.av.analytics.websites.page_views(e))},page_views_by_date:function(e){return(0,n.UT)(i.av.analytics.websites.page_views_by_date(e))},bounce_rate:function(e){return(0,n.UT)(i.av.analytics.websites.bounce_rate(e))},bounce_rate_by_date:function(e){return(0,n.UT)(i.av.analytics.websites.bounce_rate_by_date(e))},browsers:function(e){return(0,n.UT)(i.av.analytics.websites.browsers(e))},devices:function(e){return(0,n.UT)(i.av.analytics.websites.devices(e))},countries:function(e){return(0,n.UT)(i.av.analytics.websites.countries(e))},activity:function(e){return(0,n.UT)(i.av.analytics.websites.activity(e))},operating_systems:function(e){return(0,n.UT)(i.av.analytics.websites.operating_systems(e))},traffic_sources:function(e){return(0,n.UT)(i.av.analytics.websites.traffic_sources(e))},pages:function(e){return(0,n.UT)(i.av.analytics.websites.pages(e))}},spaces:{popular_spaces:function(e){return(0,n.UT)(i.av.analytics.spaces.popular_spaces(e))},posts:function(e){return(0,n.UT)(i.av.analytics.spaces.posts(e))},comments:function(e){return(0,n.UT)(i.av.analytics.spaces.comments(e))}},courses:{course_enrollments:function(e){return(0,n.UT)(i.av.analytics.courses.course_enrollments(e))},course_completions:function(e){return(0,n.UT)(i.av.analytics.courses.course_completions(e))},completion_rate:function(e){return(0,n.UT)(i.av.analytics.courses.completion_rate(e))},course_activity:function(e){return(0,n.UT)(i.av.analytics.courses.course_activity(e))},completion_overview:function(e){return(0,n.UT)(i.av.analytics.courses.completion_overview(e))},popular_courses:function(e){return(0,n.UT)(i.av.analytics.courses.popular_courses(e))},active_students:function(e){return(0,n.UT)(i.av.analytics.courses.active_students(e))},dropout_students:function(e){return(0,n.UT)(i.av.analytics.courses.dropout_students(e))},quizzes:function(e){return(0,n.UT)(i.av.analytics.courses.quizzes(e))},course_enrollments_by_date:function(e){return(0,n.UT)(i.av.analytics.courses.course_enrollments_by_date(e))}}}},412956:function(e,t,r){"use strict";r.d(t,{v:()=>o});var n=r(93199),i=r(290544),o={configuration:function(){return(0,n.UT)((0,i.E)("".concat("crm/filters","/configuration")))}}},62880:function(e,t,r){"use strict";r.d(t,{G:()=>o});var n=r(93199),i=r(698173),o={create:function(e){return(0,n.Cu)(i.a.forms.create(),e)},index:function(e){return(0,n.UT)(i.a.forms.index(e))},show:function(e){return(0,n.UT)(i.a.forms.show(e))},update:function(e){return(0,n.gN)(i.a.forms.update(e.id),e)},destroy:function(e){return(0,n.pC)(i.a.forms.destroy(e))},duplicate:function(e){return(0,n.Cu)(i.a.forms.duplicate(e))}}},926816:function(e,t,r){"use strict";r.d(t,{G:()=>o});var n=r(93199),i=r(547144),o={show:function(){return(0,n.UT)(i.av.marketingEmailAddressSettings.show())},upsert:function(e){return(0,n.Cu)(i.av.marketingEmailAddressSettings.upsert(),e)},footerHtml:function(e){return(0,n.UT)(i.av.marketingEmailAddressSettings.footerHtml(e))}}},5463:function(e,t,r){"use strict";r.d(t,{t:()=>o});var n=r(93199),i=r(547144),o={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params;return(0,n.UT)(i.av.marketingEmailTemplates.index({params:void 0===t?{}:t}))},create:function(e){return(0,n.Cu)(i.av.marketingEmailTemplates.index(),e)},show:function(e){var t=e.id;return(0,n.UT)(i.av.marketingEmailTemplates.item({id:t}))},update:function(e){var t=e.id,r=e.body;return(0,n.aU)(i.av.marketingEmailTemplates.item({id:t}),r)},deleteTemplate:function(e){var t=e.id;return(0,n.pC)(i.av.marketingEmailTemplates.item({id:t}))},exists:function(){return(0,n.UT)(i.av.marketingEmailTemplates.exists())},disableSaveEmailTemplatePrompt:function(e){return(0,n.gN)(i.av.marketingEmailTemplates.disableSaveEmailTemplatePrompt(),e)}}},348641:function(e,t,r){"use strict";r.d(t,{D:()=>o});var n=r(93199),i=r(547144),o={show:function(){return(0,n.UT)(i.av.settings.mobileApp.show())},update:function(e){return(0,n.aU)(i.av.settings.mobileApp.update(),e)}}},847373:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(93199),i=r(547144),o={search:function(e){return function(){return(0,n.UT)(i.av.search.paywalls.index(e))}},index:function(e){return function(){return Object.keys(e).forEach(function(t){null===e[t]&&delete e[t]}),(0,n.UT)(i.av.paywalls.index({params:e}))}},getPaywall:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.UT)(i.av.paywalls.show({paywallId:e,params:t}))},createPaywall:function(e){return(0,n.Cu)(i.av.paywalls.create(),e)},updatePaywall:function(e,t){return(0,n.aU)(i.av.paywalls.update({paywallId:e}),t)},deletePaywall:function(e){return(0,n.pC)(i.av.paywalls.delete({paywallId:e}))},updateMemberAccess:function(e){return(0,n.Cu)(i.av.paywalls.updateMemberAccess({paywallId:e}))}}},503471:function(e,t,r){"use strict";r.d(t,{p:()=>o});var n=r(93199),i=r(547144),o={index:function(e){var t=e.paywallId,r=e.skipDateValidations,o=e.couponStatuses;return function(){var e,a;return(0,n.UT)(i.av.paywallCoupons.index({params:(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t?{paywall_id:t}:{}),a=a={skip_date_validations:r,status:o},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}),e)}))}},createPaywallCoupon:function(e){return(0,n.Cu)(i.av.paywallCoupons.create(),{paywall_coupon:e})},updatePaywallCoupon:function(e,t){return(0,n.aU)(i.av.paywallCoupons.update({paywallCouponId:e}),{paywall_coupon:t,forReactQuery:!0})},calculateDiscount:function(e){return(0,n.UT)(i.av.paywallCoupons.calculateDiscount({params:e}))},destroyPaywallCoupon:function(e){return(0,n.pC)(i.av.paywallCoupons.destroy({paywallCouponId:e}))},showPaywallCoupon:function(e){return(0,n.UT)(i.av.paywallCoupons.show({paywallCouponId:e}))}}},814640:function(e,t,r){"use strict";r.d(t,{p:()=>o});var n=r(93199),i=r(692463),o={create:function(e){return(0,n.Cu)(i.yT.create(),e)},refresh:function(){return(0,n.UT)(i.yT.refresh())}}},506097:function(e,t,r){"use strict";r.d(t,{v:()=>s});var n=r(93199),i=r(290544),o="connect/recommendations",a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.E)("".concat(o),e)},s={getRecommendations:function(e){return(0,n.UT)(a(e))},dismissRecommendation:function(e){var t;return(0,n.aU)((t=e,(0,i.E)("".concat(o,"/").concat(t,"/dismiss"))))}}},710909:function(e,t,r){"use strict";r.d(t,{W:()=>j});var n=function(e){return e.children},i=r(552676),o=r(275271),a=r(748132),s=r(701248);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t,r){var n;return(null==(n=e[t])?void 0:n[r])!=null},u=function(e,t,r,n,i,o){if(t+i>20||r+n>o)return!1;for(var a=t;a<t+i;a++)for(var s=r;s<r+n;s++)if(s>=o||c(e,a,s))return!1;return!0},d=function(e,t,r,n,i,o){for(var a=t;a<t+i;a++)for(var s=r;s<r+n;s++)e[a][s]=o},f=function(e,t,r){return"column"===e?{canExpand:function(e,t,n){var i=t.col+t.colSpan;if(i>=r)return!1;for(var o=t.row;o<t.row+t.rowSpan;o++)if(o>=n||c(e,o,i))return!1;return!0},expand:function(e,t){for(var r=t.col+t.colSpan,n=t.row;n<t.row+t.rowSpan;n++)e[n][r]=t.id},incrementSpan:function(e){e.colSpan++}}:{canExpand:function(e,r,n){var i=r.row+r.rowSpan;if(i>=n)return!1;for(var o=r.col;o<r.col+r.colSpan;o++)if(o>=t||c(e,i,o))return!1;return!0},expand:function(e,t){for(var r=t.row+t.rowSpan,n=t.col;n<t.col+t.colSpan;n++)e[r][n]=t.id},incrementSpan:function(e){e.rowSpan++}}},m=function(e,t,r,n){for(var i=!1;r.canExpand(e,t,n);)r.expand(e,t),r.incrementSpan(t),i=!0;return i},p=function(e,t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={colSpan:Math.min(e.baseColSpan,t),rowSpan:e.baseRowSpan,row:-1,col:-1,originalColSpan:e.baseColSpan,originalRowSpan:e.baseRowSpan},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r},b=function(e,t,r){for(var n=0;n<20;n++)for(var i=0;i<r;i++)if(u(e,n,i,t.colSpan,t.rowSpan,r))return t.row=n,t.col=i,d(e,n,i,t.colSpan,t.rowSpan,t.id),!0;return!1},h=function(e,t,r,n){for(var i=!0,o=0;i&&o<10;){i=!1,o++;var a=!0,s=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(-1!==d.row&&-1!==d.col){var p=f("column",n,n);m(e,d,p,r)&&(i=!0);var b=f("row",n,n);m(e,d,b,r)&&(i=!0)}}}catch(e){s=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}}},y=function(e,t){var r,n=Array.from({length:20},function(){return Array(t).fill(null)}),i=e.map(function(e){return p(e,t)}),o=!0,a=!1,s=void 0;try{for(var c,u,d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value;b(n,f,t)}}catch(e){a=!0,s=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw s}}var m=(c=Math).max.apply(c,((function(e){if(Array.isArray(e))return l(e)})(r=i.map(function(e){return e.row+e.rowSpan}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([0]));return h(n,i,m,t),i},v=r(701168);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){return e<1024?1:e<1440?2:3},j=Object.assign(function(e){var t=e.id,r=e.accentColor,l=e.children,c=e.title,u=e.gridItemClassName,d=e.description,f=_((0,o.useState)([]),2),m=f[0],p=f[1],b=_((0,o.useState)(function(){return"undefined"==typeof window?3:x(window.innerWidth)}),2),h=b[0],g=b[1];(0,o.useEffect)(function(){var e=function(){g(x(window.innerWidth))};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var j=(0,o.useMemo)(function(){return l?o.Children.toArray(l).filter(function(e){return(0,o.isValidElement)(e)&&e.type===n}).map(function(e){var t;return{baseColSpan:e.props.baseColSpan,baseRowSpan:e.props.baseRowSpan,children:e.props.children,enabled:null==(t=e.props.enabled)||t,id:e.props.id}}):[]},[l]),w=(0,o.useMemo)(function(){return j.filter(function(e){return e.enabled})},[j]);return(0,o.useEffect)(function(){p(y(w,h))},[w,h]),(0,i.jsxs)("div",{id:t,className:"relative overflow-x-hidden pt-10 pb-12",style:{"--accent-color":void 0===r?"#3F107B":r},children:[(0,i.jsx)("div",{className:"absolute top-1/4 left-1/4 w-[908px] h-[494px] rounded-full blur-[250px] opacity-40 bg-[var(--accent-color)]"}),(0,i.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-[908px] h-[494px] rounded-full blur-[150px] opacity-30 bg-[var(--accent-color)]"}),(0,i.jsx)("div",{className:"absolute inset-0 [background-image:linear-gradient(rgba(99,102,241,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(99,102,241,0.02)_1px,transparent_1px)] [background-size:4rem_4rem] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_50%,black,transparent)]"}),(0,i.jsx)("div",{className:"absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-[#0F0F35] to-transparent pointer-events-none z-20"}),(0,i.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-32 bg-gradient-to-t from-[#0F0F35] to-transparent pointer-events-none z-20"}),(0,i.jsxs)("div",{className:"container mx-auto px-4 py-12 relative z-10",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-8 mb-12",children:[(0,i.jsx)("h1",{className:"text-6xl lg:text-7xl font-bold text-white text-center leading-none",children:c}),d&&(0,i.jsx)("h2",{className:"text-center text-4xl font-medium leading-none tracking-[-0.5px] text-white",children:d})]}),(0,i.jsx)("div",{className:"grid auto-rows-[144px] gap-4 grid-flow-dense mx-auto",style:{gridTemplateColumns:"repeat(".concat(h,", ").concat(1===h?"100%":"405px",")"),maxWidth:1===h?"100%":"".concat(405*h+(h-1)*16,"px")},children:(0,i.jsx)(a.M,{mode:"sync",children:m.map(function(e,t){return(0,i.jsx)(s.E.div,{layout:!0,initial:{opacity:0,scale:.8,y:16},whileInView:{opacity:1,scale:1,y:0},viewport:{once:!0,amount:.25},exit:{opacity:0,scale:.8},transition:{duration:.4,delay:.05*t,layout:{duration:.4},ease:[.22,1,.36,1]},style:{gridColumn:"span ".concat(Math.min(e.colSpan,h)),gridRow:"span ".concat(e.rowSpan)},children:(0,i.jsx)("div",{className:(0,v.A)("bg-[#0e1628]/40 backdrop-blur-md border border-white/10 text-white rounded-3xl h-full transition-colors duration-300",u),children:e.children})},e.id)})})})]})]})},{Item:n})},738209:function(e,t,r){"use strict";r.d(t,{D:()=>u});var n=r(552676),i=r(275271),o=r(686511),a=r.n(o);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}var c=["#FF4F5D","#FFCB00","#01B5D6","#8B85E4"],u=function(){var e,t=(e=(0,i.useState)({width:"undefined"!=typeof window?window.innerWidth:0,height:"undefined"!=typeof window?window.innerHeight:0}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||l(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];(0,i.useEffect)(function(){var e=function(){o({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]);var u=(0,i.useMemo)(function(){return function(e){if(Array.isArray(e))return s(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||l(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},[]);return(0,n.jsx)(a(),{width:r.width,height:r.height,style:{zIndex:999999,position:"fixed",top:0,left:0},recycle:!1,numberOfPieces:200,colors:u})}},888621:function(e,t,r){"use strict";r.d(t,{k:()=>g});var n=r(552676),i=r(701248),o=r(275271),a=r(739792),s=r(701168),l=r(282406),c=[{id:"tab-community-growth",labelKey:"community_growth",sectionId:"community-growth"},{id:"tab-member-engagement",labelKey:"member_engagement",sectionId:"member-engagement"},{id:"tab-content-and-experience",labelKey:"content_and_experience",sectionId:"content-and-experience"},{id:"tab-email-highlights",labelKey:"email_highlights",sectionId:"email-highlights"},{id:"tab-business-impact",labelKey:"business_impact",sectionId:"business-impact"},{id:"tab-automation-and-efficiency",labelKey:"automation_and_efficiency",sectionId:"automation-and-efficiency"}],u=[{id:"tab-highlights",labelKey:"highlights",sectionId:"highlights"},{id:"tab-trending",labelKey:"trending",sectionId:"trending"},{id:"tab-key-moments",labelKey:"key_moments",sectionId:"key-moments"},{id:"tab-people",labelKey:"people",sectionId:"people"}],d={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1],staggerChildren:.05,delayChildren:.1}}},f={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.6,ease:[.22,1,.36,1]}}},m={type:"spring",stiffness:380,damping:30},p={default:{y:-20,opacity:0,backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"rgba(255, 255, 255, 0)",backdropFilter:"blur(0px)",transition:{duration:.3,ease:[.22,1,.36,1]},transitionEnd:{visibility:"hidden"}},scrolled:{y:0,opacity:1,visibility:"visible",backgroundColor:"rgba(255, 255, 255, 0.05)",borderColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(16px)",transition:{duration:.4,ease:[.22,1,.36,1]}}};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.tabConfig,r=e.scrollContext,n=void 0===r?"non-admin":r,i=h((0,o.useState)(null),2),a=i[0],s=i[1],l=h((0,o.useState)(!1),2),c=l[0],u=l[1],d=(0,o.useRef)(!1),f=(0,o.useRef)(null),m=(0,o.useRef)(null),p=(0,o.useRef)(null),b=(0,o.useRef)(new Map),y=(0,o.useRef)(null),v=(0,o.useRef)(new Set),g=(0,o.useCallback)(function(){if("admin"===n){var e=document.getElementById("panel");if(e)return e}return document.documentElement},[n]),_=(0,o.useCallback)(function(e){var r=t[e];if(r){var n=document.getElementById(r.sectionId);n&&(f.current&&clearTimeout(f.current),d.current=!0,s(e),n.scrollIntoView({behavior:"smooth",block:"start"}),f.current=setTimeout(function(){d.current=!1},1e3))}},[t]),x=(0,o.useCallback)(function(){var e=y.current||g();e&&u((e===document.documentElement?window.scrollY||document.documentElement.scrollTop||0:e.scrollTop||0)>.8*window.innerHeight)},[g]);(0,o.useEffect)(function(){y.current=g();var e=y.current;return x(),"admin"===n&&e!==document.documentElement?e.addEventListener("scroll",x,{passive:!0}):(window.addEventListener("scroll",x,{passive:!0}),document.addEventListener("scroll",x,{passive:!0})),function(){"admin"===n&&e!==document.documentElement?e.removeEventListener("scroll",x):(window.removeEventListener("scroll",x),document.removeEventListener("scroll",x))}},[n,g,x]);var j=(0,o.useCallback)(function(){if(!d.current){var e=0,t=null,r=!0,n=!1,i=void 0;try{for(var o,a=b.current.entries()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=h(o.value,2),c=l[0],u=l[1];u>e&&(e=u,t=c)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}e>.1?s(t):s(null)}},[]),w=(0,o.useCallback)(function(e){return t.findIndex(function(t){return t.sectionId===e})},[t]),O=(0,o.useCallback)(function(e){var t=w(e.target.id);-1!==t&&b.current.set(t,e.intersectionRatio)},[w]);return(0,o.useEffect)(function(){var e=y.current||g();m.current&&m.current.disconnect(),b.current.clear(),v.current.clear(),s(null),m.current=new IntersectionObserver(function(e){e.forEach(O),j()},{root:"admin"===n&&e!==document.documentElement?e:null,rootMargin:"-10%",threshold:.1});var r=function(e){if(!v.current.has(e)){var t=document.getElementById(e);t&&m.current&&(m.current.observe(t),v.current.add(e))}},i=function(){t.forEach(function(e){return r(e.sectionId)})};return i(),p.current&&p.current.disconnect(),p.current=new MutationObserver(function(){i()}),p.current.observe(document.body,{childList:!0,subtree:!0}),function(){var e,t;null==(e=m.current)||e.disconnect(),null==(t=p.current)||t.disconnect(),f.current&&clearTimeout(f.current)}},[n,g,O,j,t]),{selectedTab:a,isScrolled:c,scrollToSection:_}},v="eoy_recap_2025.navigation_tabs",g=(0,o.memo)(function(e){var t=e.scrollContext,r=void 0===t?l.d.NON_ADMIN:t,b=e.viewType,h=void 0===b?l.d.NON_ADMIN:b,g=e.thresholds,_=e.isLoading,x=void 0!==_&&_,j=(0,o.useMemo)(function(){var e=h===l.d.NON_ADMIN?u:c;return g?e.filter(function(e){return!(e.sectionId in g)||g[e.sectionId]}):e},[h,g]),w=y({tabConfig:j,scrollContext:r}),O=w.selectedTab,S=w.isScrolled,k=w.scrollToSection,N=r===l.d.ADMIN;return(0,n.jsx)("div",{className:(0,s.A)("fixed z-50 mx-auto mt-2 max-w-[calc(100vw-2rem)] md:max-w-none",{"left-1/2 -translate-x-1/2":!N,"left-[calc(50%+31.5px)] -translate-x-1/2":N}),children:(0,n.jsx)(i.E.div,{className:"rounded-full px-4 py-2 backdrop-blur-xl border border-solid shadow-lg shadow-black/5 overflow-x-auto md:overflow-x-visible scrollbar-hide",role:"tablist","aria-label":(0,a.t)([v,"aria_label"]),variants:p,initial:"default",animate:S?"scrolled":"default",children:(0,n.jsx)(i.E.div,{className:"flex items-center justify-center gap-2 flex-nowrap min-w-max",variants:d,initial:"hidden",animate:"visible",children:j.map(function(e,t){return(0,n.jsxs)(i.E.button,{id:e.id,className:(0,s.A)("relative px-5 py-3 rounded-full text-sm font-medium transition-colors",{"text-white":t===O,"text-white/70 hover:text-white focus-visible:text-white":t!==O}),onClick:function(){return k(t)},variants:f,whileHover:{scale:1.05},whileFocus:{scale:1.05},whileTap:{scale:.95},tabIndex:t===O?0:-1,"aria-selected":t===O,"aria-controls":e.sectionId,role:"tab",children:[t===O&&(0,n.jsx)(i.E.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white/10 border border-[#7079B4] rounded-full",transition:m}),(0,n.jsx)("span",{className:"relative z-10",children:x?(0,n.jsx)("span",{className:"inline-block h-4 w-16 rounded bg-white/20 animate-pulse"}):(0,a.t)([v,e.labelKey])})]},e.id)})})})})});g.displayName="NavigationTabs"},333398:function(e,t,r){"use strict";r.d(t,{D:()=>d});var n=r(552676),i=r(114103),o=r(701248),a=r(275271),s=["rgba(139, 92, 246, 0.85)","rgba(59, 130, 246, 0.85)","rgba(147, 197, 253, 0.85)","rgba(255, 255, 255, 0.9)"],l=function(){var e=new Uint32Array(1);return self.crypto.getRandomValues(e),e[0]/0x100000000},c=function(e,t){return l()*(t-e)+e},u=function(){var e,t="undefined"!=typeof navigator&&null!=(e=navigator.hardwareConcurrency)?e:4;return t<=4?120:t<=8?200:280},d=function(){var e=(0,i.J)(),t=(0,a.useMemo)(function(){return Array.from({length:u()},function(e,t){return{id:t,x:100*l(),y:100*l(),size:c(1,3.5),opacity:c(.15,.7),duration:c(10,30),delay:c(0,8),movementX:c(-40,40),movementY:c(-45,-10),color:s[Math.floor(l()*s.length)]}})},[]);return e?null:(0,n.jsx)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(function(e){return(0,n.jsx)(o.E.div,{className:"absolute rounded-full",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),width:e.size,height:e.size,backgroundColor:e.color,opacity:e.opacity,transform:"translate3d(0,0,0)",willChange:"transform, opacity"},animate:{opacity:[.35*e.opacity,e.opacity,.35*e.opacity],x:[0,e.movementX,0],y:[0,e.movementY,0]},transition:{duration:e.duration,delay:e.delay,repeat:1/0,ease:"easeInOut"}},e.id)})})}},243667:function(e,t,r){"use strict";function n(e,t){var r,n,i,o;return!(null==e||"number"==typeof e&&Number.isNaN(e))&&("number"!=typeof e||Number.isNaN(e)?"string"==typeof e?(n=null==t?void 0:t.string)?n(e):e.trim().length>0:Array.isArray(e)&&e.every(function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&null!==e&&!Array.isArray(e)})?(i=null==t?void 0:t.arrayOfObjects)?i(e):e.length>0:Array.isArray(e)?(o=null==t?void 0:t.array)?o(e):e.length>0:(null==t?void 0:t.other)?t.other(e):!!e:(r=null==t?void 0:t.number)?r(e):e>0)}r.d(t,{y:()=>n})},282406:function(e,t,r){"use strict";r.d(t,{d:()=>n});var n={ADMIN:"admin",NON_ADMIN:"non-admin"}},536564:function(e,t,r){"use strict";r.d(t,{t:()=>eY});var n=r(552676),i=r(275271),o=r(888621),a=r(701248),s=r(739792),l=r(497202),c=r(434519),u=r(757105),d=r(663676),f=function(e){var t=e.year,r=e.textColor;return(0,n.jsx)("div",{className:"absolute inset-0 translate-y-[-15%] flex items-start justify-center overflow-hidden pointer-events-none",children:(0,n.jsx)("div",{className:"text-[14rem] select-none font-black opacity-70 italic [line-height:0.8]",style:{color:void 0===r?"#1e1e7a":r},children:t})})},m=function(e){var t,r,i,o,a=e.communityDetails,s=null!=(o=null!=(i=null!=(r=null!=(t=a.icon_url)?t:a.dark_icon_url)?r:a.logo_url)?i:a.dark_logo_url)?o:void 0;return s?(0,n.jsx)("div",{className:"relative isolate flex items-center justify-center",children:(0,n.jsx)("img",{alt:"",className:"object-cover max-h-[9rem] max-w-[9rem] border-4 rounded-full border-[var(--accent-color)]",loading:"eager",src:s})}):null},p=r(701168),b=function(e){var t=e.value,r=e.label,i=e.fullWidth,o=e.forceLargeSize;return(0,n.jsxs)("div",{className:(0,p.A)("flex flex-col items-center bg-white/10 backdrop-blur-[1.84px] rounded-2xl justify-center px-4 py-6 gap-1.5 mix-blend-lighten",void 0!==i&&i&&(void 0!==o&&o?"col-span-2":"md:col-span-2")),style:{backgroundBlendMode:"plus-lighter"},children:[(0,n.jsx)("div",{className:"text-white text-center font-bold uppercase text-[44px] leading-none tracking-[-0.23px]",children:t}),(0,n.jsx)("div",{className:"text-white text-center font-medium uppercase text-[13px] leading-5 tracking-[-0.09px]",children:r})]})},h=function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var o,a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.fullWidth){o&&(t.push({label:o.label,value:o.value,fullWidth:!0}),o=void 0),t.push(l);continue}if(!o){o=l;continue}t.push(o,l),o=void 0}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}return o&&t.push({label:o.label,value:o.value,fullWidth:!0}),t},y=function(e){var t=e.forceLargeSize,r=void 0!==t&&t,i=h(e.stats.filter(function(e){return"number"==typeof e.value?e.value>0:"string"==typeof e.value&&"0"!==e.value&&""!==e.value.trim()}));return(0,n.jsx)("div",{className:(0,p.A)("w-full grid gap-4",r?"grid-cols-2":"flex flex-col lg:grid lg:grid-cols-2"),children:i.map(function(e){return(0,n.jsx)(b,{value:e.value,label:e.label,fullWidth:e.fullWidth,forceLargeSize:r},e.label)})})};let v=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/components/ShareableCard/assets/circle-logo-a8747cbc325ac4a2.png";var g=function(e){var t=e.poweredByText,r=void 0===t?(0,s.t)("powered_by"):t;return(0,n.jsxs)("div",{className:"text-center flex flex-col items-center gap-y-2.5",children:[(0,n.jsx)("p",{className:"text-white text-sm",children:r}),(0,n.jsx)("img",{src:v,alt:(0,s.t)("circle"),className:"object-contain max-h-[2.5rem]",loading:"eager"})]})};function _(){return(0,n.jsxs)("svg",{className:"absolute top-0 right-0 w-1/2 h-full translate-x-16",viewBox:"0 0 182 243",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("g",{filter:"url(#filter0_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"23.9348",cy:"46.947",r:"1.84107",fill:"white"})}),(0,n.jsx)("g",{filter:"url(#filter1_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"147.288",cy:"162.014",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{filter:"url(#filter2_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"143.6",cy:"62.5963",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{filter:"url(#filter3_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"89.2877",cy:"8.28479",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter4_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"4.60022",cy:"197.914",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter5_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"57.983",cy:"145.444",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter6_d_4155_12587)",children:(0,n.jsx)("circle",{cx:"182.272",cy:"237.497",r:"0.920533",fill:"white"})}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_4155_12587",x:"11.0474",y:"34.0596",width:"25.7725",height:"25.7749",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"2.20928",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"4.41856"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_4155_12587",x:"117.831",y:"132.557",width:"58.9168",height:"58.9141",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"6.44373",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"11.0464"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter2_d_4155_12587",x:"135.315",y:"54.3115",width:"16.5723",height:"16.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"3.68213",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"1.84107"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.14 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter3_d_4155_12587",x:"81.0029",y:"-4.76837e-06",width:"16.5723",height:"16.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"3.68213",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"1.84107"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.5 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter4_d_4155_12587",x:"-0.00244379",y:"193.312",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter5_d_4155_12587",x:"53.3804",y:"140.841",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter6_d_4155_12587",x:"177.669",y:"232.895",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12587"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12587",result:"shape"})]})]})]})}function x(){return(0,n.jsxs)("svg",{className:"absolute top-0 left-0 w-1/2 h-full -translate-x-12",viewBox:"0 0 156 207",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("g",{filter:"url(#filter0_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"126.108",cy:"116.908",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{filter:"url(#filter1_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"63.5221",cy:"56.1526",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{filter:"url(#filter2_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"140.85",cy:"8.28479",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter3_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"61.6783",cy:"158.331",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter4_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"27.608",cy:"109.543",r:"0.920533",fill:"white"})}),(0,n.jsx)("g",{opacity:"0.5",filter:"url(#filter5_d_4155_12595)",children:(0,n.jsx)("circle",{cx:"142.678",cy:"201.597",r:"0.920533",fill:"white"})}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("filter",{id:"filter0_d_4155_12595",x:"96.651",y:"87.4507",width:"58.9168",height:"58.9141",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"6.44373",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"11.0464"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 1 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter1_d_4155_12595",x:"55.2373",y:"47.8678",width:"16.5723",height:"16.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"3.68213",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"1.84107"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.5 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter2_d_4155_12595",x:"132.565",y:"-4.76837e-06",width:"16.5723",height:"16.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"3.68213",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"1.84107"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.5 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter3_d_4155_12595",x:"57.0757",y:"153.729",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter4_d_4155_12595",x:"23.0054",y:"104.941",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]}),(0,n.jsxs)("filter",{id:"filter5_d_4155_12595",x:"138.076",y:"196.994",width:"9.20801",height:"9.20533",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feMorphology",{radius:"1.84107",operator:"dilate",in:"SourceAlpha",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:"0.920533"}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.482353 0 0 0 0 0.380392 0 0 0 0 0.984314 0 0 0 0.3 0"}),(0,n.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4155_12595"}),(0,n.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4155_12595",result:"shape"})]})]})]})}var j=r(447455),w=(0,i.forwardRef)(function(e,t){var r=e.backgroundColor,i=void 0===r?"#090940":r,o=e.compact,a=void 0!==o&&o,s=e.forceLargeSize,l=void 0!==s&&s,c=e.communityDetails,u=e.scaleToFit,d=e.stats,b=e.subtitle,h=e.title,v=e.year,w=e.yearTextColor,O=e.scale,S=(0,j.C)(null==c?void 0:c.brand_color),k=(0,n.jsxs)("div",{className:(0,p.A)("w-full relative z-10 box-border flex flex-col gap-y-6"),children:[c&&(0,n.jsxs)("div",{className:"relative flex items-center justify-center w-full pt-16 overflow-hidden",style:{"--accent-color":S},children:[(0,n.jsx)(f,{textColor:void 0===w?"#1e1e7a":w,year:void 0===v?"2025":v}),(0,n.jsx)(_,{}),(0,n.jsx)(x,{}),(0,n.jsx)(m,{communityDetails:c})]}),(0,n.jsxs)("div",{className:"px-8 flex flex-col gap-8 pb-16",children:[(0,n.jsxs)("div",{className:"text-center relative z-20 isolate",children:[(0,n.jsx)("h1",{className:"mb-3 font-bold text-white text-[40px] leading-none",children:h}),(0,n.jsx)("p",{className:"font-medium text-white/50 text-2xl leading-none",children:b})]}),(0,n.jsx)(y,{forceLargeSize:l,stats:d}),(0,n.jsx)(g,{})]})]});return void 0!==u&&u?(0,n.jsx)("div",{className:"size-full flex items-center justify-center",children:(0,n.jsx)("div",{ref:t,className:"rounded-3xl border flex flex-col items-center relative overflow-hidden justify-center",style:{backgroundColor:i,borderColor:"rgba(255, 255, 255, 0.22)",transform:"scale(".concat(void 0===O?1:O,")"),transformOrigin:"center"},children:k})}):(0,n.jsx)("div",{ref:t,className:(0,p.A)("rounded-3xl border",a?"size-full":l?"w-auto min-h-screen":"min-h-screen w-full","flex flex-col items-center relative overflow-hidden",a?"justify-start":"justify-center"),style:{backgroundColor:i,borderColor:"rgba(255, 255, 255, 0.22)"},children:k})});w.displayName="ShareableCard";var O=r(39905),S=r(227851),k="eoy_recap_2025.shareable_recap_modal",N=function(e){var t=e.onCopyLink,r=e.onDownload,i=e.isLoading,o=e.isDownloading,a=!!(0,S.qo)({name:"eoy_recap_enabled_for_members"}),l=!!(0,S.qo)({name:"eoy_recap_enabled_for_non_members"});return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"w-full flex flex-col xl:flex-row items-start gap-4",children:[(0,n.jsx)(O.z,{type:"button",variant:"circle",onClick:t,disabled:!a&&!l||o||i,extraLarge:!0,children:(0,s.t)([k,"cta_copy_link"])}),(0,n.jsx)(O.z,{variant:"secondary",onClick:r,disabled:o||i,extraLarge:!0,children:o?(0,s.t)([k,"cta_downloading_image"]):(0,s.t)([k,"cta_download_image"])})]}),(0,n.jsx)("p",{className:"text-sm text-default max-w-[14rem]",children:(0,s.t)([k,"use_this_link"])})]})};N.displayName="ShareableRecapActions";var P=r(767900),C=r(131906),A=r(932699),I=r(251630),T=r(441342),E=r(60878),L=r(772447);function D(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var M=function(e){var t=e.onActivate,r=void 0===t?function(){}:t,n=(0,l.dd)(),o=(0,E.pm)(),a=(0,C.useQueryClient)(),c=(0,T.wh)().currentCommunity,u=(0,i.useMemo)(function(){var e,t;return{eoy_recap_enabled_for_members:null!=(e=null==c?void 0:c.eoy_recap_enabled_for_members)&&e,eoy_recap_enabled_for_non_members:null!=(t=null==c?void 0:c.eoy_recap_enabled_for_non_members)&&t}},[c]),d=(0,C.useMutation)(function(e){if(!c)return console.error("Community not found"),Promise.reject(Error("Community not found"));var t,r,n=(0,A.pick)(c,L.Ed),i=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,A.pick)(c,L.Oj)),r=r={eoy_recap_enabled_for_members:e.eoy_recap_enabled_for_members,eoy_recap_enabled_for_non_members:e.eoy_recap_enabled_for_non_members},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return I.$.update({community:n,community_setting:i})},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.invalidateQueries(["pundit-user"])];case 1:return e.sent(),o.success((0,s.t)("changes_saved")),r&&r(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){o.error((0,s.t)("error"))}}),f=d.mutate;return{modal:n,handleSubmit:function(e){f(e)},defaultValues:u,isLoading:d.isLoading}},R="eoy_recap_2025.enable_recap_modal",B=function(e){var t=e.name,r=e.isChecked,i=e.isDisabled,o=e.onChange,a="eoy_recap_enabled_for_members"===t?"member_recap":"non_member_recap";return(0,n.jsxs)("div",{className:(0,p.A)("flex items-start justify-between rounded-lg border p-4 transition-colors",{"bg-tertiary border-secondary":r,"border-primary bg-primary hover:bg-tertiary":!r}),children:[(0,n.jsxs)("div",{className:"flex-1 pr-4",children:[(0,n.jsx)("h3",{className:"mb-1 text-sm font-bold text-dark",children:(0,s.t)([R,"".concat(a,".title")])}),(0,n.jsx)("p",{className:"text-sm text-tertiary",children:(0,s.t)([R,"".concat(a,".description")])})]}),(0,n.jsx)(P.l.ToggleSwitch,{disabled:void 0!==i&&i,name:t,variant:"small",onToggleChange:o})]})};B.displayName="RecapToggleItem";var z=function(e){var t=e.isLoading,r=e.handleSubmit,i=!!(0,S.qo)({name:"eoy_recap_enabled_for_members"}),o=!!(0,S.qo)({name:"eoy_recap_enabled_for_non_members"});return(0,n.jsxs)("div",{className:"flex flex-col gap-4 max-w-xl",children:[(0,n.jsx)(B,{isChecked:i,isDisabled:t,name:"eoy_recap_enabled_for_members",onChange:function(e){return r({eoy_recap_enabled_for_members:e})}}),(0,n.jsx)(B,{isChecked:o,isDisabled:t,name:"eoy_recap_enabled_for_non_members",onChange:function(e){return r({eoy_recap_enabled_for_non_members:e})}})]})};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.designWidth,o=void 0===n?600:n,a=r.designHeight,s=void 0===a?800:a,l=r.maxScale,c=void 0===l?1:l,u=(t=(0,i.useState)(1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],m=(0,i.useCallback)(function(){if(e.current){var t=e.current.getBoundingClientRect();f(Math.min(t.width/o,t.height/s,c))}},[e,o,s,c]);return(0,i.useEffect)(function(){m();var t=new ResizeObserver(m);return e.current&&t.observe(e.current),function(){return t.disconnect()}},[e,m]),d};function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var G="eoy_recap_2025.shareable_recap_modal",q=function(e,t){var r,n,i,o,a;return[{value:(0,d.dm)(null!=(r=e.total_members)?r:0),label:(0,s.t)([t,"metrics.labels.total_members"]),fullWidth:!0},{value:(0,d.dm)(null!=(n=e.total_comments_and_likes)?n:0),label:(0,s.t)([t,"metrics.labels.total_comments_and_likes"])},{value:(0,d.dm)(null!=(i=e.total_posts)?i:0),label:(0,s.t)([t,"metrics.labels.total_posts"])},{value:(0,d.dm)(null!=(o=e.lessons_completed)?o:0),label:(0,s.t)([t,"metrics.labels.lessons_completed"])},{value:(0,d.dm)(null!=(a=e.engaged_hours)?a:0),label:(0,s.t)([t,"metrics.labels.engaged_hours"])}]},V=function(e){var t=e.cardRef,r=e.downloadCardRef,o=e.communityDetails,a=e.stats,l=e.title,c=e.totalMessages,u=e.onCopyLink,f=e.onDownload,m=e.isDownloading,p={backgroundColor:"#090940",year:"2025",stats:q(a,G),yearTextColor:"#1e1e7a",title:l,subtitle:(0,s.t)([G,"metrics.description"],{count:(0,d.dm)(null!=c?c:0)}),communityDetails:o},b=(0,i.useRef)(null),h=U(b,{designWidth:600,designHeight:800,maxScale:.95}),y=M({}),v=y.handleSubmit,g=y.defaultValues,_=y.isLoading;return(0,n.jsxs)("div",{className:"flex h-full",children:[(0,n.jsxs)("div",{className:"w-1/2 h-full bg-[#0F0F35] relative hidden md:flex items-center justify-center p-8",ref:b,children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 pointer-events-none size-[350px] rounded-[350px] opacity-30 bg-[#0B27AA] blur-[30px] rotate-[-90deg]"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 pointer-events-none w-[388px] h-[427px] rounded-[427px] bg-[#0B27AA] blur-[143px] rotate-[-90deg]"}),(0,n.jsx)("div",{className:"rounded-2xl p-4 origin-center relative z-10",children:(0,n.jsx)(w,Z({ref:t,scaleToFit:!0,scale:h,compact:!0},p))}),(0,n.jsx)("div",{className:"fixed left-[-9999px] top-0 pointer-events-none w-[600px] h-[800px]","aria-hidden":"true",children:(0,n.jsx)(w,Z({ref:r,compact:!0,forceLargeSize:!0,scaleToFit:!0},p))})]}),(0,n.jsxs)("div",{className:"size-full md:w-1/2 flex flex-col gap-8 lg:gap-12 p-8 lg:px-12 justify-center",children:[(0,n.jsx)("h2",{className:"text-dark text-4xl font-bold max-w-sm",children:(0,s.t)([G,"title"])}),(0,n.jsxs)(P.l,{onSubmit:v,defaultValues:g,className:"overflow-hidden",formClassName:"flex flex-col gap-8 lg:gap-12",children:[(0,n.jsx)(z,{isLoading:_,handleSubmit:v}),(0,n.jsx)(N,{onCopyLink:u,onDownload:f,isLoading:_,isDownloading:m})]})]})]})};V.displayName="ShareableRecapContent";var W=r(271131);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var K=function(e){var t,r=e.cardRef,n=e.title,o=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return H(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return{handleDownload:(0,i.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!r.current)return[2];i.label=1;case 1:return i.trys.push([1,3,4,5]),s(!0),[4,(0,W.jN)(r.current,{scale:5,backgroundColor:"#090940",fetch:{requestInit:{mode:"cors",credentials:"omit",cache:"no-cache"}}})];case 2:return e=i.sent(),(t=document.createElement("a")).download="".concat(n.replace(/\s+/g,"-"),"-2025-recap.png"),t.href=e,t.click(),[3,5];case 3:return console.error("Failed to download image:",i.sent()),[3,5];case 4:return s(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Q(o,n,i,a,s,"next",e)}function s(e){Q(o,n,i,a,s,"throw",e)}a(void 0)})})()},[r,n]),isDownloading:a}},J=r(915912),$=r.n(J),X=function(){var e=(0,E.pm)(),t=e.success,r=e.error;return{handleCopyLink:(0,i.useCallback)(function(){try{var e=window.location.origin;$()("".concat(e,"/2025"))?t((0,s.t)(["eoy_recap_2025.shareable_recap_modal","copy_link.success"])):r((0,s.t)("something_went_wrong"))}catch(e){r((0,s.t)("something_went_wrong"))}},[t,r])}},Y=function(e){var t=e.title,r=e.totalMessages,o=e.communityDetails,a=e.stats,s=(0,l.dd)(),u=(0,i.useRef)(null),d=(0,i.useRef)(null),f=K({cardRef:d,title:t}),m=f.handleDownload,p=f.isDownloading,b=X().handleCopyLink;return(0,n.jsxs)(c.u_,{isOpen:s.visible,onClose:s.hide,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsx)(c.u_.Content,{size:"full",children:(0,n.jsxs)(c.u_.Body,{className:"!p-0 overflow-hidden relative",children:[(0,n.jsx)(c.u_.CloseButton,{onClick:s.hide,className:"absolute top-4 right-4"}),(0,n.jsx)(V,{cardRef:u,downloadCardRef:d,communityDetails:o,stats:a,title:t,totalMessages:r,onCopyLink:b,onDownload:m,isDownloading:p})]})})]})};Y.displayName="ShareableRecapModalComponent";var ee=u.gk.create(function(e){var t=e.title,r=e.totalMessages,i=e.communityDetails,o=e.stats;return(0,n.jsx)(Y,{title:t,totalMessages:r,communityDetails:i,stats:o})}),et=function(){return(0,l.dd)(ee)},er=r(549882),en="eoy_recap_2025.members_non_members.hero",ei=function(e){var t,r,i,o,l=e.accentColor,c=void 0===l?"#2CAE6E":l,u=e.communityDetails,d=e.communityMember,f=e.isAdminView,m=e.totalMessages,p=e.stats,b=et(),h=null!=(o=null!=(i=null!=(r=null!=(t=u.icon_url)?t:u.dark_icon_url)?r:u.logo_url)?i:u.dark_logo_url)?o:void 0;return(0,n.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 size-[496px] rounded-[496px] blur-[150px]",style:{backgroundColor:c}}),(0,n.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-32 bg-gradient-to-t from-[#0F0F35] to-transparent pointer-events-none z-20"}),(0,n.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center px-4 text-center",children:[h&&(0,n.jsx)(a.E.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.6,ease:[.16,1,.3,1],delay:.2},whileHover:{scale:1.05},className:"mb-4 will-change-transform",children:(0,n.jsx)(a.E.div,{animate:{y:[0,-6,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"will-change-transform",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("img",{src:h,alt:(0,s.t)([en,"avatar_alt"]),className:"max-h-9 max-w-[14.375rem] object-cover",loading:"lazy",style:{borderColor:c}})})})}),(0,n.jsx)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:(0,n.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4 leading-none",children:u.name})}),(0,n.jsx)("div",{className:"relative mb-4",children:(0,n.jsx)("div",{className:"relative text-[120px] md:text-[180px] lg:text-[240px] font-black text-white leading-none tracking-tight italic",style:{textShadow:"0 24px 4px rgba(0, 0, 0, 0.25), 0 10px 0 ".concat(c)},children:(0,s.t)([en,"year"])})}),(0,n.jsx)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"mb-8",children:(0,n.jsx)("p",{className:"text-xl md:text-xl lg:text-2xl text-white max-w-3xl font-medium",children:(0,s.t)([en,"description"])})}),(0,n.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"flex flex-col items-center gap-4",children:[d&&(0,n.jsx)("button",{type:"button",className:"px-8 py-3 text-lg font-semibold text-white rounded-full transition-all duration-300 hover:shadow-lg bg-[--accent] hover:bg-[oklch(from_var(--accent)_calc(l*0.94)_c_h)]",style:{"--accent":c},onClick:function(){return b.show({title:(0,s.t)([en,"title"],{name:u.name}),totalMessages:null!=m?m:0,communityDetails:u,stats:null!=p?p:{total_members:0,total_comments_and_likes:0,total_posts:0,lessons_completed:0,engaged_hours:0}})},children:(0,s.t)([en,"cta"])}),void 0!==f&&f&&(0,n.jsx)("button",{type:"button",className:"text-white underline underline-offset-4 hover:text-blue-100 transition-colors",onClick:function(){return window.location.href=er.Fy.adminRecap2025()},children:(0,s.t)([en,"view_admin_recap"])})]})]})]})},eo=r(710909),ea="eoy_recap_2025.sections.what_we_talked_about",es=function(e){var t,r,i,o=e.memberEngagement;return(0,n.jsxs)(eo.W,{id:"trending",title:(0,s.t)([ea,"title"]),description:(0,s.t)([ea,"description"]),gridItemClassName:"rounded-3xl bg-gradient-to-b from-[#9447EB] to-[#7827D4] backdrop-blur-sm border-0",children:[(0,n.jsx)(eo.W.Item,{id:"top-topics",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ea,"bento_items.top_topics"])}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:[(0,n.jsx)("div",{className:"bg-white rounded-full py-3 z-50",children:(0,n.jsx)("p",{className:"text-center text-[1.875rem] font-bold tracking-[-0.826px] text-[#7E2DD8] w-[16rem]",children:null!=(r=o.top_topics)?r:"--"})}),(0,n.jsx)("div",{className:"absolute bg-[#A46AE5] rounded-full py-3 px-9 scale-90 translate-y-6 w-[16rem] h-14 z-10"}),(0,n.jsx)("div",{className:"absolute bg-white/15 rounded-full py-3 px-9 scale-[0.85] translate-y-10 w-[16rem] h-14"})]})]})}),(0,n.jsx)(eo.W.Item,{id:"most-active-day",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8 overflow-hidden gap-8 md:gap-16",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ea,"bento_items.most_active_day_or_month"])}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-row items-center justify-center size-full gap-4 mt-2",children:[(0,n.jsx)("div",{className:"bg-black/20 rounded-[2.25rem] p-12 z-50 min-w-40 h-full"}),(0,n.jsx)("div",{className:"bg-[#C38EFF] rounded-[2.25rem] p-12 z-50 flex flex-col items-center justify-center gap-1 min-w-[16rem] h-full",children:(0,n.jsx)("p",{className:"text-center text-5xl font-bold leading-none text-white",children:null!=(i=o.most_active_day)?i:"--"})}),(0,n.jsx)("div",{className:"bg-black/20 rounded-[2.25rem] p-12 z-50 min-w-40 h-full"})]})]})}),(0,n.jsx)(eo.W.Item,{id:"most-active-space",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8 overflow-hidden gap-8 md:gap-16",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ea,"bento_items.most_active_space"])}),(0,n.jsx)("div",{className:"flex-1 min-h-0 flex flex-col items-center justify-start size-full gap-4 mt-2",children:null==(t=o.most_active_spaces)?void 0:t.slice(0,3).map(function(e,t){return(0,n.jsx)("div",{className:(0,p.A)("rounded-full py-3 px-4 z-50",0===t?"bg-white":"bg-[#5A2299]"),children:(0,n.jsx)("p",{className:(0,p.A)("text-center text-[1.875rem] tracking-[-0.826px] w-[16rem] truncate",0===t?"font-bold text-[#7E2DD8]":"font-normal text-[#A867F1]"),children:null!=e?e:"--"})},null!=e?e:"space-".concat(t))})})]})})]})},el=r(282406),ec=r(957363),eu=r(592127),ed="eoy_recap_2025.sections.moments_that_stood_out",ef=function(e){var t,r,i,o,a,l,c,u,f,m,p,b,h=e.keyMoments;return(0,n.jsxs)(eo.W,{id:"key-moments",title:(0,s.t)([ed,"title"]),description:(0,s.t)([ed,"description"]),gridItemClassName:"rounded-3xl bg-gradient-to-b from-[#D63DBC] to-[#A32E8B] backdrop-blur-sm border-0",children:[h.top_post?(0,n.jsx)(eo.W.Item,{id:"top-post",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ed,"bento_items.top_post"])}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:[(0,n.jsx)("a",{href:"".concat(window.location.origin).concat(h.top_post.show_path),target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl py-5 px-4 z-50 w-[339px] cursor-pointer hover:shadow-lg transition-shadow",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("p",{className:"text-left text-[16.947px] font-bold tracking-[-0.826px] text-black line-clamp-2",children:null!=(o=h.top_post.display_title)?o:"--"}),(0,n.jsx)("div",{className:"rounded-full w-full h-3 bg-gray-200"}),(0,n.jsx)("div",{className:"rounded-full w-1/3 h-3 bg-gray-200"})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4 text-black",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(ec.JO,{type:"24-heart-outline",className:"size-4 text-black"}),(0,n.jsx)("span",{className:"text-base",children:(0,d.dm)(null!=(a=h.top_post.likes)?a:0)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(ec.JO,{type:"24-comment",className:"size-4 text-black"}),(0,n.jsx)("span",{className:"text-base",children:(0,d.dm)(null!=(l=h.top_post.comments)?l:0)})]})]})]})}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#C773B7] rounded-2xl scale-[0.9] translate-y-6 w-[339px] h-[178px] z-10"}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#BC59A9] rounded-2xl scale-[0.8] translate-y-12 w-[339px] h-[178px] z-[5]"})]})]})}):null,h.top_comment?(0,n.jsx)(eo.W.Item,{id:"top-comment",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ed,"bento_items.top_comment"])}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:[(0,n.jsx)("a",{href:"".concat(window.location.origin).concat(h.top_comment.show_path),target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl py-5 px-4 z-50 cursor-pointer hover:shadow-lg transition-shadow",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 w-[20.1875rem]",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,n.jsx)("div",{className:"size-7 min-w-7 bg-gray-200 rounded-full self-start",children:(null==(t=h.top_comment.user)?void 0:t.avatar_url)?(0,n.jsx)("img",{loading:"eager",src:h.top_comment.user.avatar_url,alt:h.top_comment.user.full_name,className:"size-full object-cover rounded-full"}):(0,n.jsx)("div",{className:"flex items-center justify-center size-full rounded-full bg-gray-200 text-black text-xs font-medium",children:(0,eu.Q)(null==(r=h.top_comment.user)?void 0:r.full_name)})}),(0,n.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2",children:[(0,n.jsx)("p",{className:"text-left text-sm font-semibold text-[#191B1F] line-clamp-3",children:null!=(c=null==(i=h.top_comment.user)?void 0:i.full_name)?c:"--"}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-left text-xs font-normal text-[#42464D] line-clamp-3",children:null!=(u=h.top_comment.display_title)?u:"--"})})]}),(0,n.jsx)("div",{className:"self-start",children:(0,n.jsx)(ec.JO,{type:"20-menu-dots-horizontal",className:"size-5 min-w-5 text-black"})})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,n.jsx)("p",{className:"text-center text-xxs font-medium text-[#191B1F]",children:(0,s.t)("comments.engagement_actions.liked")}),(0,n.jsx)("p",{className:"text-center text-xxs font-normal text-[#191B1F]",children:(0,s.t)("comments.engagement_actions.reply")})]}),(0,n.jsx)("p",{className:"text-center text-xxs font-normal text-[#191B1F]",children:(0,s.t)("comments.likes",{count:null!=(f=h.top_comment.likes)?f:0,formatted_count:(0,d.dm)(null!=(m=h.top_comment.likes)?m:0)})})]})]})}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#C773B7] rounded-2xl scale-[0.9] translate-y-6 w-[21.1875rem] h-[8.25rem] z-10"}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#BC59A9] rounded-2xl scale-[0.8] translate-y-12 w-[21.1875rem] h-[8.25rem] z-[5]"})]})]})}):null,h.top_course?(0,n.jsx)(eo.W.Item,{id:"top-course",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,s.t)([ed,"bento_items.top_course"])}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:[(0,n.jsx)("div",{className:"bg-white rounded-2xl p-3 z-50 min-w-[320px] min-h-[276px]",children:(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"w-full h-40 bg-gray-100 rounded-xl",children:h.top_course.cover_image_url?(0,n.jsx)("img",{loading:"eager",src:h.top_course.cover_image_url,alt:null!=(p=h.top_course.course)?p:"",className:"size-full object-cover rounded-xl"}):null}),(0,n.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,n.jsx)("p",{className:"text-left text-lg font-bold tracking-[-0.826px] text-black line-clamp-2",children:null!=(b=h.top_course.course)?b:"--"}),(0,n.jsx)("div",{className:"rounded-full w-full h-3 bg-gray-100"}),(0,n.jsx)("div",{className:"rounded-full w-1/3 h-3 bg-gray-100"})]})]})}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#C773B7] rounded-2xl scale-[0.9] translate-y-6 w-[320px] h-[276px] z-10"}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#BC59A9] rounded-2xl scale-[0.8] translate-y-12 w-[320px] h-[276px] z-[5]"})]})]})}):null]})},em=r(900795);let ep=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/PeopleWhoMadeThisYear/assets/first-f7f9a9cddcf4fa85.png",eb=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/PeopleWhoMadeThisYear/assets/second-1b59b9562e3ce6e6.png",eh=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/PeopleWhoMadeThisYear/assets/third-d2d0223d6090305a.png",ey=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/PeopleWhoMadeThisYear/assets/fourth-a724463b626471f1.png",ev=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/PeopleWhoMadeThisYear/assets/fifth-a87896abdf25bcab.png";var eg=r(243667),e_={1:ep,2:eb,3:eh,4:ey,5:ev},ex=["shrink-0 rounded-full z-10 size-36 absolute top-8 left-1/2 -translate-x-1/2","shrink-0 rounded-full absolute z-20 top-40 left-4 size-[7.5rem]","shrink-0 rounded-full absolute z-30 top-40 right-8 size-[6.594rem]"],ej="eoy_recap_2025.sections.people_who_made_this_year",ew=function(e){var t,r,i,o,a,l=e.people;return(0,n.jsxs)(eo.W,{id:"people",title:(0,s.t)([ej,"title"]),description:(0,s.t)([ej,"description"]),gridItemClassName:"rounded-3xl bg-gradient-to-b from-[#EA7B31] to-[#D26C28] backdrop-blur-sm border-0",children:[(0,n.jsx)(eo.W.Item,{id:"most-active-member",baseColSpan:1,baseRowSpan:3,enabled:(0,eg.y)(l.most_active_members,{array:function(e){return e.length>0}}),children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full overflow-hidden gap-10",children:[(0,n.jsx)("div",{className:"px-8 pt-8",children:(0,n.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,n.jsx)(em.w,{content:(0,s.t)([ej,"bento_items.most_active_members"])})})}),(0,n.jsx)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 items-center justify-center size-full relative mt-2",children:null==(t=l.most_active_members)?void 0:t.map(function(e,t){var r,i=t+1,o=e_[i],a=null!=(r=e.full_name)?r:"--";return(0,n.jsx)("div",{className:"bg-white rounded-2xl py-4 px-3 z-50 w-72",children:(0,n.jsx)("div",{className:"flex flex-row gap-1.5",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[o&&(0,n.jsx)("img",{src:o,alt:"Rank ".concat(i),className:"size-8 mr-1",loading:"lazy"}),e.avatar_url?(0,n.jsx)("img",{src:e.avatar_url,alt:a,className:"size-8 rounded-full",loading:"lazy"}):(0,n.jsx)("div",{"aria-label":a,className:"flex items-center justify-center size-8 rounded-full bg-gray-100 text-black text-xs font-medium animate-shimmer",children:(0,eu.Q)(a)}),(0,n.jsx)("p",{className:"text-left text-[16.947px] font-semibold tracking-[-0.826px] text-black line-clamp-2 truncate",children:a})]})})},a)})})]})}),(0,n.jsx)(eo.W.Item,{id:"most-engaged-member",baseColSpan:1,baseRowSpan:3,enabled:(0,eg.y)(l.most_engaged_members,{array:function(e){return e.length>0}}),children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,n.jsx)(em.w,{content:(0,s.t)([ej,"bento_items.most_engaged_members"])})}),(0,n.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:null==(r=l.most_engaged_members)?void 0:r.slice(0,3).map(function(e,t){var r,i=null!=(r=e.full_name)?r:"--";return e.avatar_url?(0,n.jsx)("img",{src:e.avatar_url,alt:i,className:ex[t],loading:"lazy"},i):(0,n.jsx)("div",{"aria-label":i,className:(0,p.A)("bg-[#FFB787] animate-shimmer",ex[t])},i)})})]})}),(0,n.jsx)(eo.W.Item,{id:"longest-streak",baseColSpan:1,baseRowSpan:3,enabled:(0,eg.y)(null==(i=l.longest_streak)?void 0:i.weeks,{number:function(e){return e>0}}),children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,n.jsx)(em.w,{content:(0,s.t)([ej,"bento_items.longest_streak"])})}),(0,n.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative mt-2",children:(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col items-center justify-center",children:[(0,n.jsx)("p",{className:"font-bold leading-none uppercase text-[#FFB787] text-[12.5rem]",children:(0,d.dm)(Math.ceil(null!=(a=null==(o=l.longest_streak)?void 0:o.weeks)?a:0))}),(0,n.jsx)("p",{className:"text-[32px] font-bold leading-none text-[#FFB787] mt-2",children:(0,s.t)([ej,"bento_items.most_engaged_member_timeframe.weeks"])})]})})]})})]})};let eO=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/Highlights/assets/direct-messages-4069e8bbd0e1a259.png",eS=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/Highlights/assets/members-d71d0a14c63d204b.png",ek=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/Highlights/assets/events-live-stream-hours-0839225f0e642800.png",eN=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/Highlights/assets/lessons-completed-aaabab3360494516.png",eP=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/Highlights/assets/posts-b2929b627b402cdf.png";var eC="eoy_recap_2025.sections.our_year_in_action",eA=function(e){var t,r,i,o,a,l,c,u,f,m,p,b,h,y,v=e.overview,g=e.topComment;return(0,n.jsxs)(eo.W,{id:"highlights",title:(0,s.t)([eC,"title"]),description:(0,s.t)([eC,"description"]),gridItemClassName:"rounded-3xl bg-gradient-to-b from-[#3F7BFF] to-[#0C45C3] backdrop-blur-sm border-0",children:[(0,n.jsx)(eo.W.Item,{id:"posts",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-8 pt-8",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(o=v.posts)?o:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.posts"])})]}),(0,n.jsx)("div",{className:"size-full flex items-end",children:(0,n.jsx)("img",{src:eP,alt:(0,s.t)([eC,"bento_items.posts"]),loading:"lazy"})})]})}),(0,n.jsx)(eo.W.Item,{id:"members",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-8 pt-8",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(a=v.members)?a:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.members"])})]}),(0,n.jsx)("div",{className:"size-full flex items-end rounded-2xl",children:(0,n.jsx)("img",{src:eS,alt:(0,s.t)([eC,"bento_items.members"]),className:"rounded-3xl",loading:"lazy"})})]})}),(0,n.jsx)(eo.W.Item,{id:"comments-and-likes",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col items-center h-full p-8",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start justify-start gap-1 w-full",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(l=v.comments_and_likes)?l:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.comments_and_likes"])})]}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex items-center justify-center size-full relative",children:[(0,n.jsx)("a",{href:(null==g?void 0:g.show_path)?"".concat(window.location.origin).concat(g.show_path):"#",target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-2xl py-5 px-4 z-50 cursor-pointer hover:shadow-lg transition-shadow",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,n.jsx)("div",{className:"size-7 min-w-7 bg-gray-200 rounded-full self-start",children:(null==g||null==(t=g.user)?void 0:t.avatar_url)?(0,n.jsx)("img",{loading:"eager",src:g.user.avatar_url,alt:g.user.full_name,className:"size-full object-cover rounded-full"}):(0,n.jsx)("div",{className:"flex items-center justify-center size-full rounded-full bg-gray-200 text-black text-xs font-medium",children:(0,eu.Q)(null==g||null==(r=g.user)?void 0:r.full_name)})}),(0,n.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2",children:[(0,n.jsx)("p",{className:"text-left text-sm font-semibold text-[#191B1F] line-clamp-3",children:null!=(c=null==g||null==(i=g.user)?void 0:i.full_name)?c:"--"}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-left text-xs font-normal text-[#42464D] line-clamp-3",children:null!=(u=null==g?void 0:g.display_title)?u:(0,s.t)([eC,"bento_items.dummy_content.content"])})})]}),(0,n.jsx)("div",{className:"self-start",children:(0,n.jsx)(ec.JO,{type:"20-menu-dots-horizontal",className:"size-5 min-w-5 text-black"})})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2",children:[(0,n.jsx)("p",{className:"text-center text-xxs font-medium text-[#191B1F]",children:(0,s.t)("comments.engagement_actions.liked")}),(0,n.jsx)("p",{className:"text-center text-xxs font-normal text-[#191B1F]",children:(0,s.t)("comments.engagement_actions.reply")})]}),(0,n.jsx)("p",{className:"text-center text-xxs font-normal text-[#191B1F]",children:(0,s.t)("comments.likes",{count:null!=(f=null==g?void 0:g.likes)?f:0,formatted_count:(0,d.dm)(null!=(m=null==g?void 0:g.likes)?m:0)})})]})]})}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#5A8DFF] rounded-2xl scale-[0.9] translate-y-6 w-[21.1875rem] h-[8.25rem] z-10"}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 bg-[#103DA2] rounded-2xl scale-[0.8] translate-y-12 w-[21.1875rem] h-[8.25rem] z-[5]"})]})]})}),(0,n.jsx)(eo.W.Item,{id:"direct-messages",baseColSpan:2,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col-reverse md:flex-row gap-4 md:gap-0 justify-between size-full overflow-hidden px-8",children:[(0,n.jsxs)("div",{className:"py-8 md:pb-0 min-w-fit",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(p=v.direct_messages)?p:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.direct_messages"])})]}),(0,n.jsx)("img",{src:eO,alt:(0,s.t)([eC,"bento_items.direct_messages"]),loading:"lazy",className:"object-cover rounded-2xl md:size-[30rem] size-[24rem]"})]})}),(0,n.jsx)(eo.W.Item,{id:"total-engaged-minutes",baseColSpan:1,baseRowSpan:3,children:(0,n.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,n.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,n.jsx)(em.w,{content:(0,s.t)([eC,"bento_items.total_engaged_minutes"])})}),(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col items-center justify-center gap-1",children:[(0,n.jsx)("p",{className:"font-bold leading-none uppercase text-[#9ECAFF] text-8xl",children:(0,d.dm)(null!=(b=v.total_hours_engaged)?b:0)}),(0,n.jsx)("p",{className:"text-center text-2xl font-bold leading-none text-[#9ECAFF]",children:(0,s.t)([eC,"bento_items.minutes"])})]})]})}),(0,n.jsx)(eo.W.Item,{id:"events-and-livestream-hours",baseColSpan:1,baseRowSpan:3,enabled:(0,eg.y)(v.events_live_stream_hours,{number:function(e){return e>0}}),children:(0,n.jsxs)("div",{className:"flex flex-col h-full items-start justify-end relative overflow-hidden rounded-2xl",children:[(0,n.jsxs)("div",{className:"flex flex-col p-8 mb-10",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(h=v.events_live_stream_hours)?h:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.events_and_live_stream_hours"])})]}),(0,n.jsx)("img",{src:ek,alt:(0,s.t)([eC,"bento_items.events_and_live_stream_hours"]),loading:"lazy",className:"w-[24rem] h-auto object-cover absolute top-0 -right-12"})]})}),(0,n.jsx)(eo.W.Item,{id:"lessons-completed",baseColSpan:2,baseRowSpan:3,enabled:(0,eg.y)(v.lessons_completed,{number:function(e){return e>0}}),children:(0,n.jsxs)("div",{className:"flex flex-col-reverse md:flex-row justify-center md:justify-between size-full overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-col mb-10 px-8 flex-1 min-h-0 md:pt-8 pt-0 justify-end md:justify-start",children:[(0,n.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,d.dm)(null!=(y=v.lessons_completed)?y:0)}),(0,n.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,s.t)([eC,"bento_items.lessons_completed"])})]}),(0,n.jsx)("img",{src:eN,alt:(0,s.t)([eC,"bento_items.lessons_completed"]),loading:"lazy",className:"block size-[42rem] h-auto"})]})})]})},eI=r(738209),eT=r(333398);let eE=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/DiscoverRanking/assets/business-and-financial-d29e807586ed5a5f.png",eL=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/DiscoverRanking/assets/connection-and-wellbeing-631c637aa9f81707.png",eD=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/DiscoverRanking/assets/creativity-and-culture-381d38bffdcfe778.png",eM=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/DiscoverRanking/assets/learning-and-exploration-7777b943ff13d61c.png";var eR={349283:{rank:1,category:"skill_and_career_growth"},45132:{rank:3,category:"skill_and_career_growth"},78212:{rank:5,category:"skill_and_career_growth"},4876:{rank:9,category:"skill_and_career_growth"},166029:{rank:12,category:"skill_and_career_growth"},32678:{rank:15,category:"skill_and_career_growth"},276226:{rank:18,category:"creativity_and_culture"},158392:{rank:19,category:"creativity_and_culture"},2216:{rank:22,category:"skill_and_career_growth"},241790:{rank:22,category:"skill_and_career_growth"},38883:{rank:23,category:"skill_and_career_growth"},5372:{rank:27,category:"skill_and_career_growth"},235796:{rank:28,category:"skill_and_career_growth"},28082:{rank:30,category:"skill_and_career_growth"},24745:{rank:30,category:"creativity_and_culture"},36663:{rank:34,category:"skill_and_career_growth"},9816:{rank:42,category:"skill_and_career_growth"},132687:{rank:45,category:"skill_and_career_growth"},244730:{rank:52,category:"skill_and_career_growth"},130548:{rank:57,category:"business_and_financial"},17567:{rank:71,category:"business_and_financial"},295086:{rank:75,category:"skill_and_career_growth"},57039:{rank:76,category:"creativity_and_culture"},117497:{rank:76,category:"skill_and_career_growth"},119397:{rank:77,category:"skill_and_career_growth"},158:{rank:77,category:"skill_and_career_growth"},219401:{rank:94,category:"skill_and_career_growth"},149:{rank:97,category:"skill_and_career_growth"},1534:{rank:99,category:"skill_and_career_growth"},113054:{rank:108,category:"skill_and_career_growth"},114861:{rank:112,category:"business_and_financial"},304955:{rank:115,category:"skill_and_career_growth"},53364:{rank:119,category:"skill_and_career_growth"},198338:{rank:130,category:"business_and_financial"},361294:{rank:147,category:"skill_and_career_growth"},199807:{rank:151,category:"skill_and_career_growth"},332503:{rank:153,category:"skill_and_career_growth"},23739:{rank:158,category:"skill_and_career_growth"},321616:{rank:162,category:"skill_and_career_growth"},79216:{rank:175,category:"business_and_financial"},5:{rank:1,category:"business_and_financial"}};let eB=r.p+"static/react/apps/EoyRecapApp/Sections/NonAdmins/DiscoverRanking/assets/skill-and-career-growth-b6478ee425d2c0c5.png";var ez="eoy_recap_2025.sections.discover_ranking",eF={learning_and_exploration:eM,business_and_financial:eE,connection_and_wellbeing:eL,creativity_and_culture:eD,skill_and_career_growth:eB},eU=function(e,t){var r=e.replace("#",""),n=Number.parseInt(r.slice(0,2),16),i=Number.parseInt(r.slice(2,4),16),o=Number.parseInt(r.slice(4,6),16);return"rgba(".concat(n,", ").concat(i,", ").concat(o,", ").concat(t,")")},eZ=function(e){var t=e.accentColor,r=void 0===t?"#633EDD":t,i=e.communityId,o=eR[void 0===i?2:i];return o?(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-12 relative",children:[(0,n.jsx)("div",{className:"flex flex-col gap-8",children:(0,n.jsx)("h1",{className:"text-6xl lg:text-7xl font-bold text-white text-center leading-none",children:(0,s.t)([ez,"title"])})}),(0,n.jsxs)("div",{className:"relative flex justify-center mt-[180px]",children:[(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-[-100px] size-[240px] rounded-full bg-gradient-to-br from-slate-700/40 to-slate-900/60 border-2 border-white/20 flex items-center justify-center z-10 backdrop-blur-sm",children:(0,n.jsx)("img",{src:eF[o.category],alt:o.category,loading:"eager"})}),(0,n.jsx)("div",{className:"flex flex-col items-center justify-end rounded-3xl border-2 border-white/20 w-full max-w-[417px] h-[439px] px-8 pt-[228px] pb-10",style:{backgroundImage:"linear-gradient(135deg, rgba(15, 15, 53, 0.91) 0%, ".concat(eU(r,.35)," 55%, ").concat(eU(r,.7)," 100%)")},children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,n.jsxs)("h2",{className:"text-7xl font-bold text-white leading-none",children:[(0,n.jsx)("span",{className:"align-super text-3xl leading-none text-center",children:"#"}),o.rank]}),(0,n.jsx)("p",{className:"text-4xl font-bold text-white/90 text-center tracking-widest uppercase break-words",children:(0,n.jsx)(em.w,{content:(0,s.t)([ez,"categories",o.category])})})]})})]})]})}):null},eG=r(271738),eq=r(500460),eV=function(e){var t=e.children;return e.isAdminView?(0,n.jsx)(eG.aH,{children:(0,n.jsx)(eq.f6,{children:(0,n.jsx)(E.VW,{children:(0,n.jsx)(u.yB,{children:t})})})}):(0,n.jsx)(u.yB,{children:t})},eW=r(78456);function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eH(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eK="eoy_recap_2025.enable_recap_banner",eJ=function(e){var t=e.communityDetails,r=e.stats,o=e.totalMessages,a=eQ((0,i.useState)(!0),2),l=a[0],c=a[1],u=eQ((0,i.useState)(!1),2),d=u[0],f=u[1],m=(0,T.wh)().currentCommunityMember,b=et();return l&&(0,eW.vb)(m)&&t?(0,n.jsxs)("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-30",children:[(0,n.jsx)("div",{className:"absolute inset-0 top-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-40 blur-3xl -z-10 animate-neon-glow"}),(0,n.jsx)("div",{className:"relative rounded-xl p-[2px] bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 animate-neon-border",children:(0,n.jsxs)("div",{className:(0,p.A)("relative items-start md:items-center flex justify-between gap-4 md:gap-20 flex-col md:flex-row h-auto rounded-[10px] bg-[rgba(15,15,53,0.95)] px-6 py-3 backdrop-blur-[16px] transition-all duration-300 ease-in-out","md:w-[462px] lg:w-[618px]",d?"opacity-0 -translate-y-2 pointer-events-none":"opacity-100 translate-y-0"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold leading-tight text-white",children:(0,s.t)([eK,"title"])}),(0,n.jsx)("p",{className:"text-xs leading-tight text-white/70",children:(0,s.t)([eK,"description"])})]}),(0,n.jsx)("button",{type:"button",className:"flex items-center justify-center gap-1.5 rounded-full bg-white py-1.5 px-3 text-sm font-medium text-black transition-colors hover:bg-white/90",onClick:function(){return b.show({title:(0,s.t)("eoy_recap_2025.members_non_members.hero.title",{name:t.name}),totalMessages:null!=o?o:0,communityDetails:t,stats:null!=r?r:{total_members:0,total_comments_and_likes:0,total_posts:0,lessons_completed:0,engaged_hours:0}})},children:(0,s.t)([eK,"cta"])}),(0,n.jsx)("button",{type:"button",className:"absolute -right-2 -top-2 flex size-6 items-center justify-center rounded-full bg-white text-black/70 shadow-sm transition-colors hover:bg-white/90",onClick:function(){f(!0),setTimeout(function(){c(!1)},300)},children:(0,n.jsx)(ec.JO,{type:"16-close",size:16,style:{"--icon-width":"16px"},"aria-label":(0,s.t)([eK,"close_aria_label"])})})]})})]}):null},e$=r(618361),eX=r(22319),eY=function(e){var t,r=e.community_member,a=e.community_details,s=e.metrics;if((0,i.useEffect)(function(){(0,eX.ss)();var e=document.documentElement;return e.style.scrollSnapType="y mandatory",e.style.scrollBehavior="smooth",function(){e.style.scrollSnapType="",e.style.scrollBehavior=""}},[]),!s)return null;var l=(0,j.C)(a.brand_color),c={total_members:s.highlights.members,total_comments_and_likes:s.highlights.comments_and_likes,total_posts:s.highlights.posts,lessons_completed:s.highlights.lessons_completed,engaged_hours:s.highlights.total_hours_engaged},u=!!s.key_moments.top_comment||!!s.key_moments.top_course||!!s.key_moments.top_post,d=!!s.people.longest_streak||s.people.most_active_members.length>0||s.people.most_engaged_members.length>0,f=null!=(t=null==r?void 0:r.admin)&&t;return(0,n.jsx)(eV,{isAdminView:f,children:(0,n.jsxs)("main",{className:"relative bg-[#0F0F35] overflow-x-hidden",children:[(0,n.jsx)(e$.c,{}),(0,n.jsx)(eI.D,{}),(0,n.jsx)(eT.D,{}),(0,n.jsx)(o.k,{scrollContext:el.d.NON_ADMIN,thresholds:{"key-moments":u,people:d}}),f&&(0,n.jsx)(eJ,{communityDetails:a,stats:c,totalMessages:s.highlights.direct_messages}),(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsx)(ei,{accentColor:l,communityDetails:a,communityMember:r,isAdminView:f,stats:c,totalMessages:s.highlights.direct_messages})}),s.highlights&&(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsx)(eA,{overview:s.highlights,topComment:s.key_moments.top_comment})}),s.trending&&(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsx)(es,{memberEngagement:s.trending})}),u&&(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsx)(ef,{keyMoments:s.key_moments})}),d&&(0,n.jsx)("div",{className:"snap-start min-h-screen",children:(0,n.jsx)(ew,{people:s.people})}),(0,n.jsx)(eZ,{communityId:a.id,accentColor:l})]})})}},503242:function(e,t,r){"use strict";r.d(t,{g:()=>bn});var n,i=r(552676),o=r(275271),a=r(472624),s=r(91946),l=r(72727),c=r(348029);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e;return(e=function(){var e,t,n,i,o,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:switch(null==(e=window)?void 0:e.locale){case"pt":return[3,1];case"es":return[3,3];case"fr":return[3,5];case"it":return[3,7]}return[3,9];case 1:return[4,r.e("878").then(r.bind(r,155926))];case 2:return t=s.sent(),(0,c.Z)({locale:t.default,weekStartsOn:1}),[3,11];case 3:return[4,r.e("7978").then(r.bind(r,34654))];case 4:return n=s.sent(),(0,c.Z)({locale:n.default,weekStartsOn:1}),[3,11];case 5:return[4,r.e("9788").then(r.bind(r,571933))];case 6:return i=s.sent(),(0,c.Z)({locale:i.default,weekStartsOn:1}),[3,11];case 7:return[4,r.e("1354").then(r.bind(r,508134))];case 8:return o=s.sent(),(0,c.Z)({locale:o.default,weekStartsOn:1}),[3,11];case 9:return[4,Promise.resolve().then(r.bind(r,125638))];case 10:a=s.sent(),(0,c.Z)({locale:a.default}),s.label=11;case 11:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)})})()},f=r(347858),m=r(916823);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var b=function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if("pt"!==(0,m.cm)())return[3,2];return[4,r.e("3009").then(r.t.bind(r,570775,23))];case 1:e=t.sent(),f.default.setDefaults({locale:e.Portuguese}),t.label=2;case 2:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()},h=r(852770),y=r(22319),v=r(38500),g=r(757105),_=r(764208),x=r(701800),j=r(625179),w=r(276012),O=r(218059),S=[x.C,O.Rl,_.x,g.yB,w.hg,v.JB,j.M],k=function(e){var t=e.children;return S.reduceRight(function(e,t){return(0,i.jsx)(t,{children:e})},t)},N=r(500460),P=r(641597),C=r(186463),A=r(535756),I=r(324777),T=r(932699),E=r(739792),L=r(441342),D=r(957363),M=r(346681),R=r(261193),B=function(){var e,t,r,n,o=(0,L.wh)(),a=o.currentCommunityMember,s=o.isViewOnlyMasquerading,l=o.masqueradingEntity,c=(0,y.wC)().masquerade_referrer_url,u=(0,R.D)(),d=(0,w.Vu)(),f=d.isBannerVisible,m=d.openViewMasqueradingSearch,p=d.openEditMasqueradingSearch,b=d.hideBanner;return c&&!u||f?(f?(e=(0,E.t)("view_only_masquerading.banner.title_not_selected"),t=(0,E.t)("view_only_masquerading.banner.title_selected"),r=(0,E.t)("view_only_masquerading.banner.placeholder"),n=m):s?(e=(0,E.t)("view_only_masquerading.banner.title_selected"),t=(0,E.t)("view_only_masquerading.banner.title_selected"),r=(0,T.truncate)((null==l?void 0:l.name)||"",{length:50}),n=m):(e=(0,E.t)("masquerade.banner.title"),t=(0,E.t)("masquerade.banner.title"),r=(0,T.truncate)((null==a?void 0:a.name)||"",{length:50}),n=p),(0,i.jsxs)("div",{className:"flex h-12 items-center justify-between bg-gray-900 px-6 dark:bg-gray-700",children:[(0,i.jsx)("div",{})," ",(0,i.jsxs)("div",{className:"flex","data-testid":"masquerade-banner",children:[(0,i.jsx)("div",{className:"mr-2",children:(0,i.jsx)(M.Di,{weight:"semibold",color:"text-feature-dark",children:e})}),(0,i.jsxs)("button",{type:"button",onClick:n,className:"flex","aria-label":t,children:[(0,i.jsx)("div",{className:"border-dark dark:border-secondary border-b border-dashed",children:(0,i.jsx)(M.Di,{color:"text-feature-dark",children:r})}),(0,i.jsx)("div",{children:(0,i.jsx)(D.JO,{type:"20-chevron-down-sm",className:"text-feature-dark ml-[3px]","aria-hidden":!0})})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"button",onClick:function(){b(),c&&(window.location.href=c)},children:(0,i.jsx)(M.Di,{color:"text-feature-dark",weight:"semibold",children:(0,E.t)("view_only_masquerading.banner.exit")})})})]})):null},z=r(528008),F=r(230967),U=r(903225),Z=r(925986),G=function(){return null},q=r(598222),V=r(260622),W=function(e){var t=e.isOpen,r=e.onClick;return(0,i.jsx)(V.T,{children:(0,i.jsx)("button",{type:"submit",className:"bg-support-widget float-right hidden size-14 self-end rounded-full text-white shadow-md lg:block",onClick:r,"aria-label":(0,E.t)("support_widget.floating_button_aria_label"),"aria-expanded":t,"aria-controls":"support-widget",children:(0,i.jsx)(D.JO,{type:t?"20-chevron-down":"chat",size:t?20:null})})})},H=function(e){var t=e.children;return(0,i.jsx)("div",{className:"xxl:h-full border-primary bg-primary hidden h-[min(658px,100vh-224px)] max-h-[658px] min-h-[80px] w-[400px] origin-bottom-right overflow-y-auto border lg:flex lg:flex-col",children:t})},Q=r(767900),K=r(933586),J=r(227851),$=function(e){var t=e.onSubmit,r=(0,J.Gc)(),n=r.handleSubmit,a=r.reset,s=(0,J.qo)({name:"message"}),l=(0,o.useRef)(null),c=function(){(0,K.Z)(l.current)};return(0,o.useEffect)(function(){c()},[]),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(Q.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,E.t)("support_widget.chatbot.message_placeholder"),ref:l,rows:1,onInput:c,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(n(t)(),a(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar max-h-[128px] resize-none !py-4 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,i.jsx)("div",{className:"text-circle pr-4 pt-4",children:s&&(0,i.jsx)(D.JO,{type:"tiptap-send",className:"cursor-pointer",onClick:function(){n(t)(),a()}})})]})},X=r(589252),Y=r(546122),ee=r(619803),et=r.n(ee),er=r(208807),en=function(e){var t=e.label,r=e.sublabel,n=e.event,o=e.value,a=e.selected,s=e.setSelected,l=e.process;return(0,i.jsxs)("button",{type:"button",className:et()("border-primary rounded-full border px-4 py-2 text-sm font-medium",{"hover:border-secondary cursor-pointer":null===a,"border-secondary bg-gray-100 dark:bg-gray-700":a===t,"cursor-not-allowed":null!==a,"w-full":r}),onClick:function(){null===a&&(s(t),l({event:n,value:o}))},children:[(0,i.jsx)(er.T1,{weight:"medium",children:t}),r&&(0,i.jsxs)(i.Fragment,{children:["  ",(0,i.jsx)(er.T1,{weight:"medium",color:"text-gray-400",children:r})]})]})};function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eo=function(e){var t,r,n,a=e.type,s=e.authorAvatarUrl,l=e.authorName,c=e.content,u=e.buttons,d=e.process,f=void 0===d?function(){}:d,m=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ei(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(0,L.wh)().currentCommunityMember,y={business:{avatarUrl:null!=s?s:"",name:null!=l?l:""},bot:{avatarUrl:"",name:(0,E.t)("support_widget.chatbot.name")},user:{avatarUrl:null!=(r=null==h?void 0:h.avatar_url)?r:"",name:null!=(n=null==h?void 0:h.name)?n:""}},v=u.map(function(e){var t,r,n=e.label;return(0,i.jsx)(en,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={selected:p,setSelected:b,process:f},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),n)});return(0,i.jsx)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,i.jsx)(M.Di,{weight:"semibold",color:"text-dark",children:y[a].name})}),(0,i.jsxs)("div",{className:"message-content pr-6",children:[(0,i.jsx)(Y.p,{children:(0,i.jsx)(X.Z,{html:c})}),v.length>0?(0,i.jsx)("div",{className:"mt-4 flex flex-row flex-wrap gap-2",children:v}):null]})]})})},ea=function(e){var t=e.addMessage,r=e.setIsUserInputEnabled,n=e.setProductArea,i=e.productArea,o=e.createChatMessage,a=e.sessionId,s=e.setSessionId,l=function(e){t("user",{content:e,buttons:[]}),r(!1),o({message:e,sessionId:a,productArea:i})};return function(e){var t=e.event,i=e.value;"start-chat"===t?(s(null),n(null),r(!0)):"post-message"==t&&l(i)}},es=r(131906),el=r(381881),ec=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)(function(e){var t=e.message,r=e.sessionId,n=e.productArea;return el.R.createChatMessage({message:t,sessionId:r,productArea:n}).then(function(e){return e.json()})},{onSuccess:t,onError:r})};function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ed(){return(ed=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ef(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||em(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function em(e,t){if(e){if("string"==typeof e)return eu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,t)}}var ep=function(){var e=(0,U.k6)(),t=ef((0,o.useState)(null),2),r=t[0],n=t[1],i=ef((0,o.useState)(null),2),a=i[0],s=i[1],l=ef((0,o.useState)(!1),2),c=l[0],u=l[1],d=ef((0,o.useState)([]),2),f=d[0],m=d[1],p=function(e,t){var r=ed({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(t));m(function(t){return((function(e){if(Array.isArray(e))return eu(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||em(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:new Date().getTime().toString(),type:e},r)])})},b=ec({onSuccess:function(e){n(e.result.session_id),u(!0),p("bot",{content:e.result.answer,buttons:[]})}}).mutate,h=ea({history:e,addMessage:p,setIsUserInputEnabled:u,setProductArea:s,productArea:a,createChatMessage:b,sessionId:r,setSessionId:n});return{sessionId:r,messages:f,isUserInputEnabled:c,process:h}},eb=function(){var e=ep(),t=e.messages,r=e.isUserInputEnabled,n=e.process;(0,o.useEffect)(function(){0==t.length&&n({event:"start-chat"})},[t.length,n]);var a=function(e){n({event:"post-message",value:e.message})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mb-6 mt-auto flex flex-col",children:t.map(function(e){var t,r;return(0,i.jsx)(eo,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={process:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),e.id)})}),r?(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10",children:(0,i.jsx)("div",{className:"border-primary border-t",children:(0,i.jsx)(Q.l,{onSubmit:a,children:(0,i.jsx)($,{onSubmit:a})})})}):null]})},eh=function(){var e=(0,U.k6)();return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"pointer-events-none absolute left-0 top-2.5 flex items-center pl-3 text-gray-500",children:(0,i.jsx)(D.JO,{type:"20-ai",size:20})}),(0,i.jsx)("input",{type:"text",className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,E.t)("support_widget.chatbot.what_do_you_need_help_with"),onFocus:function(){return e.push("/ask")}})]})},ey=function(){return(0,i.jsx)(eh,{})},ev=function(){var e=(0,Z.J1)(),t=e.isOpen,r=e.toggleWidget;return(0,i.jsxs)("div",{className:"fixed bottom-4 z-[60] flex flex-col",style:{right:48},children:[(0,i.jsx)(q.u,{show:t,children:(0,i.jsx)(U.VA,{children:(0,i.jsx)(H,{children:(0,i.jsxs)(U.rs,{children:[(0,i.jsx)(U.AW,{exact:!0,path:"/",component:ey},"path"),(0,i.jsx)(U.AW,{exact:!0,path:"/ask",component:eb},"path")]})})})}),(0,i.jsx)("div",{className:"-mr-5 mt-5 flex justify-end align-baseline",children:(0,i.jsx)(W,{isOpen:t,onClick:function(){r()}})})]})},eg=["/messages/new","/messages","/live","/workflows/edit","/workflows/new","/workflows/view","/discover","/settings/branded_apps_builder_ui","/settings/pages/edit","/settings/recap-2025","/2025"],e_=function(e){var t=e.showWidgetBot,r=(0,U.TH)(),n=(0,L.nT)().records,a=(0,L.wh)().currentCommunityMember,s=!(null==a?void 0:a.is_admin),l=n.filter(function(e){return"chat"===e.post_type}).map(function(e){return e.slug}),c=eg.concat(l).some(function(e){return r.pathname.includes(e)}),u=(0,Z.J1)().openWidget;return((0,o.useEffect)(function(){t&&u()},[]),s||c)?null:(0,i.jsx)(i.Fragment,{children:(0,F.createPortal)((0,i.jsx)(A.S,{renderFunc:G,children:(0,i.jsx)(ev,{})}),document.body)})},ex=r(547144),ej=r(545273),ew=r(63656);function eO(e){"undefined"!=typeof pendo&&pendo&&setTimeout(function(){try{var t,r,n,i;pendo.setGuidesDisabled(e),e?null==(t=(r=pendo).stopGuides)||t.call(r):null==(n=(i=pendo).loadGuides)||n.call(i)}catch(t){console.error("[Pendo] Error ".concat(e?"disabling":"enabling"," guides:"),t)}},1e3)}function eS(){var e=(0,U.TH)(),t=(0,ew.O)().isSitePageRoute,r=(0,ej.H)().isLivePage;(0,o.useEffect)(function(){t||r?eO(!0):eO(!1)},[t,r,e.pathname])}var ek=r(773371),eN=r(894414),eP=r(753564),eC=r(334568),eA=r(293291),eI=r(981097),eT=function(){var e=(0,U.TH)().pathname,t=(0,eA.OH)({currentPage:1}),r=t.data,n=t.isLoading,i=e.includes(eI.L.community_bot.knowledge)||e.includes(eI.L.community_bot.agents),o=!n&&r&&0===r.count;return i&&o},eE=function(){var e=(0,U.TH)().pathname,t=(0,eA.OH)({currentPage:1}),r=t.data,n=t.isLoading,i=e.includes(eI.L.community_inbox.index),o=!n&&r&&0===r.count;return i&&o},eL=r(618014),eD=r(333253),eM=r(436372),eR=r(454237),eB=r(311383);function ez(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eU=function(e){var t=e.children,r=e.hideAppBar,n=e.shouldHideSidebarNestedNavBar,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","hideAppBar","shouldHideSidebarNestedNavBar"]),s=(0,eL.l)(),l=s.config,c=s.setConfig,u=(0,eR.T)().isReactFlowWorkflowsRoute,d="/settings/recap-2025"===(0,eB.Z)().pathname;return(0,o.useEffect)(function(){c(function(e){return eF(ez({},e),{hideAppBar:null!=r?r:e.hideAppBar,shouldHideSidebarNestedNavBar:null!=n?n:e.shouldHideSidebarNestedNavBar})})},[r,n,c]),(0,eM.T)(),(0,i.jsx)(eD.a,eF(ez({},a),{disableRightSidebar:l.disableRightSidebar,renderLeftSidebar:l.renderLeftSidebar,disableSidebar:l.disableSidebar||u||d,hideAppBar:l.hideAppBar,shouldHideSidebarNestedNavBar:l.shouldHideSidebarNestedNavBar,children:t}))},eZ=function(e){var t,r,n=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,eM.M)(),(0,i.jsx)(eU,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={children:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function eG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eV=function(e){var t=e.shouldHideMainHeader,r=e.children,n=e.hideAppBar,o=e.shouldHideSidebarNestedNavBar,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["shouldHideMainHeader","children","hideAppBar","shouldHideSidebarNestedNavBar"]);return void 0===t||t?(0,i.jsx)(eL.S,{children:(0,i.jsx)(eZ,eq(eG({},a),{children:r}))}):(0,i.jsx)(eL.S,{children:(0,i.jsx)(eU,eq(eG({hideAppBar:void 0!==n&&n,shouldHideSidebarNestedNavBar:void 0!==o&&o},a),{children:r}))})},eW=r(706439),eH=r(29378),eQ=r(373786),eK=r(880981),eJ=r(960621),e$=r(765280),eX=(0,eJ.u)(function(){return r.e("7077").then(r.bind(r,293679))}),eY=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(eX,{})})},e0=(0,eJ.u)(function(){return r.e("529").then(r.bind(r,96585))}),e1=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(e0,{})})},e2=(0,eJ.u)(function(){return Promise.resolve().then(r.bind(r,548857))}),e3=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(e2,{})})},e6=(0,eJ.u)(function(){return r.e("1235").then(r.bind(r,799444))}),e5=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(e6,{})})},e4=(0,eJ.u)(function(){return Promise.all([r.e("7223"),r.e("8999")]).then(r.bind(r,156987))}),e7=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(e4,{})})},e9=r(691525),e8=r(51639),te=function(){var e=(0,e9.wh)().currentCommunity,t=(0,eH.Z1)(e)||(0,eH.Aq)(e);return(0,i.jsx)("div",{children:(0,i.jsx)(e8.K,{isExpired:t})})},tt=r(971462),tr=r(117617),tn=r(663676),ti=r(782705),to=r(380171),ta=r(134062),ts=r(751169),tl=r(39905),tc=r(60878),tu=function(){return(0,i.jsx)("div",{children:(0,i.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_2515_109087)",children:[(0,i.jsx)("rect",{width:"32",height:"32",fill:"url(#paint0_linear_2515_109087)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.25 22.5C15.25 22.9142 15.5858 23.25 16 23.25C16.4142 23.25 16.75 22.9142 16.75 22.5C16.75 19.3244 19.3244 16.75 22.5 16.75C22.9142 16.75 23.25 16.4142 23.25 16C23.25 15.5858 22.9142 15.25 22.5 15.25C19.3244 15.25 16.75 12.6756 16.75 9.5C16.75 9.08579 16.4142 8.75 16 8.75C15.5858 8.75 15.25 9.08579 15.25 9.5C15.25 12.6756 12.6756 15.25 9.5 15.25C9.08579 15.25 8.75 15.5858 8.75 16C8.75 16.4142 9.08579 16.75 9.5 16.75C12.6756 16.75 15.25 19.3244 15.25 22.5Z",fill:"url(#paint1_linear_2515_109087)"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"paint0_linear_2515_109087",x1:"16",y1:"0",x2:"16",y2:"32",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#516DF1"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#6C47D2"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_2515_109087",x1:"16",y1:"22.5",x2:"16",y2:"9.5",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F9FF"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#C4AFFF"})]}),(0,i.jsx)("clipPath",{id:"clip0_2515_109087",children:(0,i.jsx)("rect",{width:"32",height:"32",rx:"16",fill:"white"})})]})]})})},td=r(529306),tf=r(114596),tm=r(485712),tp=r(779869),tb=r(494375),th=r(884121);function ty(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tv(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tg(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tv(o,n,i,a,s,"next",e)}function s(e){tv(o,n,i,a,s,"throw",e)}a(void 0)})}}function t_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ty(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ty(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tj=function(e){var t,r,n=e.row,a=t_((0,o.useState)(null==(t=n.original)?void 0:t.enabled),2),s=a[0],l=a[1],c=t_((0,o.useState)(!1),2),u=c[0],d=c[1],f=(0,tm.k)(n.original),m=(0,tf.g)(n.original),p=(0,L.wh)(),b=p.currentCommunity,h=p.refetch,y=(0,tp.w)(),v=(0,eA.vQ)({id:n.original.id}).mutate;(0,o.useEffect)(function(){var e;l(null==(e=n.original)?void 0:e.enabled)},[null==(r=n.original)?void 0:r.enabled,l]);var g=function(){v({enabled:!0},{onSuccess:function(){l(!0)},onError:function(e){console.error("Failed to enable agent:",e),l(!1)}})};return(0,i.jsx)("div",{id:"toggle-wrapper-agent-".concat(n.original.id),children:(0,i.jsx)(th.J,{isChecked:s,checkedLabel:(0,E.t)("settings.community_bot.agents.on_value"),uncheckedLabel:(0,E.t)("settings.community_bot.agents.off_value"),tooltipCheckedLabel:"",tooltipUncheckedLabel:"",tooltipPlacement:"bottom",isLoading:u,isDisabled:u,onChange:function(){(null==b?void 0:b.ai_agents_feature_flag_enabled)?s?m.show({agent:n.original}):f.show({agent:n.original}):tg(function(){var e,t,r,n;return tx(this,function(i){switch(i.label){case 0:return d(!0),[4,td.c.getNextPlanWithFeature((null!=(t=null==b||null==(e=b.current_plan)?void 0:e.id)?t:"").toString(),{plan_feature_flag:"ai_agents"})];case 1:return n=(null==(r=i.sent())?void 0:r.plan_tier)||"enterprise",[4,y.show({planTier:n,source:tb.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,E.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,E.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,E.t)("pricing_plans.upgrade_modal.actions.go_to_community_ai"),showPlanDetails:!0,onSuccess:function(){g(),d(!1)},onCloseModal:function(){return tg(function(){var e,t;return tx(this,function(r){switch(r.label){case 0:return[4,h()];case 1:return(null==(t=r.sent())||null==(e=t.data)?void 0:e.current_community.ai_agents_feature_flag_enabled)&&g(),d(!1),[2]}})})()}})];case 2:return i.sent(),[2]}})})()},containerClassName:"",className:""})})},tw=r(552939),tO=r(243244),tS=function(){return(0,y.TC)().isDarkAppearance?(0,i.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_4781_81533)",children:[(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4781_81533)"}),(0,i.jsx)("rect",{width:"134",height:"134",fill:"url(#paint1_linear_4781_81533)"}),(0,i.jsx)("rect",{x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,i.jsx)("rect",{x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("radialGradient",{id:"paint0_radial_4781_81533",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,i.jsx)("stop",{stopColor:"#469AFC"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_4781_81533",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#2B2E33"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#212428"})]}),(0,i.jsx)("clipPath",{id:"clip0_4781_81533",children:(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]}):(0,i.jsx)("div",{children:(0,i.jsxs)("svg",{width:"134",height:"134",viewBox:"0 0 134 134",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("g",{id:"Avatar",children:(0,i.jsxs)("g",{clipPath:"url(#clip0_4495_28245)",children:[(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"url(#paint0_radial_4495_28245)"}),(0,i.jsx)("rect",{id:"Img",width:"134",height:"134",fill:"url(#paint1_linear_4495_28245)"}),(0,i.jsx)("rect",{id:"Rectangle 1940",x:"62",y:"62",width:"10",height:"10",rx:"5",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 1942",x:"41",y:"57",width:"10",height:"20",rx:"5",fill:"white"}),(0,i.jsx)("rect",{id:"Rectangle 1941",x:"83",y:"51",width:"10",height:"32",rx:"5",fill:"white"})]})}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("radialGradient",{id:"paint0_radial_4495_28245",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(67 67) rotate(90) scale(67)",children:[(0,i.jsx)("stop",{stopColor:"#469AFC"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#046CF1"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_4495_28245",x1:"154",y1:"-82",x2:"10",y2:"170",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F9FA"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#E6ECEF"})]}),(0,i.jsx)("clipPath",{id:"clip0_4495_28245",children:(0,i.jsx)("rect",{width:"134",height:"134",rx:"67",fill:"white"})})]})]})})},tk=r(445665),tN=function(e){var t=e.agents,r=e.handleEditAgent,n=(0,tk.qN)();return(0,i.jsxs)("div",{className:"bg-secondary border-primary flex justify-between border-b px-12 py-8",children:[(0,i.jsxs)("div",{className:"flex items-start space-x-8",children:[(0,i.jsx)(tS,{}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(tO.s6,{weight:"semibold",children:(0,E.t)("settings.community_bot.agents.banner.title")}),(0,i.jsx)(Y.p,{color:"text-light",children:(0,E.t)("settings.community_bot.agents.banner.description")}),t.length>0&&(0,i.jsx)(tl.z,{variant:"secondary","aria-hidden":!0,className:"text-darkest mt-2 flex w-fit gap-1.5",onClick:function(){return r(t[0])},children:(0,i.jsx)(tw.Q,{weight:"bold",children:(0,E.t)("settings.community_bot.agents.banner.edit_profile_button.title")})})]})]}),(0,i.jsx)(D.JO,{type:"20-close",size:20,className:"cursor-pointer !self-start",onClick:function(){n.mutate({hide_agents_banner:!0})}})]})},tP=function(e){var t=e.agent,r=function(e){window.location.href=ti.X.customize({botPublicId:e.toString()})};return(0,i.jsx)(ta.w.Actions,{children:(0,i.jsx)(ta.w.Actions.Item,{onClick:function(){return r(t.id)},children:(0,E.t)("settings.community_bot.knowledge.custom.edit")})})},tC=function(e){return"ai-generated"==e.answerType?(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-2 pt-1",children:(0,i.jsx)(D.JO,{type:"16-ai",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"})}):null},tA=function(){return(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-2 pt-1",children:(0,i.jsx)(D.JO,{type:"16-audience",size:16,"aria-hidden":!0,stroke:"secondary",className:"-ml-1"})})},tI=function(e){var t=e.tone;return"normal"==t?(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(D.JO,{type:"20-normal-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):"friendly"==t?(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(D.JO,{type:"20-friendly-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):"short-and-sweet"==t?(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(D.JO,{type:"20-short-and-sweet-behavior-type",size:20,useWithStrokeCurrentColor:!0})}):(0,i.jsx)("div",{className:"border-primary size-8 rounded-full border pl-[5px] pt-1",children:(0,i.jsx)(D.JO,{type:"20-descriptive-behavior-type",size:20,useWithStrokeCurrentColor:!0})})},tT=r(381636),tE="settings.community_bot.agents.landing_page",tL=function(){var e=(0,eA.X5)();return(0,i.jsx)("div",{children:(0,i.jsx)(tl.z,{variant:"circle",onClick:function(){e.mutate(void 0,{onSuccess:function(e){window.location.href=ti.X.customize({botPublicId:e.id.toString()})}})},extraLarge:!0,children:(0,E.t)([tE,"call_to_action"])})})},tD=r(839931);function tM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tR(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tM(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tz=function(e){var t=(0,m.cm)(),n=tB((0,o.useState)(null),2),i=n[0],a=n[1];return(0,o.useEffect)(function(){var n;(n=function(){var n,i,o,s,l,c;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:n="pt"===t?"landing-page-pt":"landing-page-en",u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all([r(950542)("./".concat(n,"/feature-").concat(e,"_1x.png")),r(460344)("./".concat(n,"/feature-").concat(e,"_1x.png")),r(129631)("./".concat(n,"/feature-").concat(e,"_2x.png")),r(265994)("./".concat(n,"/feature-").concat(e,"_3x.png"))])];case 2:return o=(i=tB.apply(void 0,[u.sent(),4]))[0],s=i[1],l=i[2],c=i[3],a({thumbnail:o.default,small:s.default,medium:l.default,large:c.default}),[3,4];case 3:return console.error("Failed to load feature images:",u.sent()),a(null),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){tR(o,r,i,a,s,"next",e)}function s(e){tR(o,r,i,a,s,"throw",e)}a(void 0)})})()},[t,e]),i},tF=Object.assign(function(e){var t=e.children;return(0,i.jsx)("div",{className:"flex w-full flex-col gap-x-6 gap-y-8 md:flex-row md:gap-y-0",children:t})},{FeatureItem:function(e){var t=e.children,r=e.backgroundColor;return(0,i.jsx)("li",{children:(0,i.jsxs)("div",{className:"flex flex-row items-start gap-x-3",children:[(0,i.jsx)("div",{children:(0,i.jsx)(D.JO,{type:"20-checkmark-circle-fill-dark",className:"text-default size-5",viewBox:"0 0 20 20",style:{color:r}})}),(0,i.jsx)(tT.Z.LabelSm,{color:"text-[#2B2E33]",weight:"medium",children:(0,i.jsx)("span",{children:t})})]})})},FeatureList:function(e){var t=e.children;return(0,i.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:t})},FeatureSummary:function(e){var t=e.children,r=e.backgroundColor;return(0,i.jsx)("div",{className:"flex w-full flex-col gap-y-5 rounded-xl p-10 md:w-[41%]",style:{backgroundColor:r},children:t})},FeaturePreview:function(e){var t=e.children,r=e.backgroundColor,n=e.className;return(0,i.jsx)("div",{className:et()("w-full rounded-xl md:w-[60%]",n),style:{backgroundColor:r},children:t})},Header:function(e){var t=e.localeRoot,r=e.backgroundColor,n=e.iconName;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex size-[60px] flex-col items-center justify-center rounded-full",style:{backgroundColor:r},children:(0,i.jsx)(D.JO,{type:n,className:"text-default !h-7 !w-7",viewBox:"0 0 24 24",style:{color:"#191B1F"}})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,i.jsx)(tT.Z.TitleLg,{color:"text-[#2B2E33]",children:(0,E.t)([t,"title"])}),(0,i.jsx)(tT.Z.LabelLg,{color:"text-[#2B2E33]",weight:"bold",children:(0,E.t)([t,"subtitle"])})]})]})}}),tU="".concat(tE,".blocks.ai_inbox_feature"),tZ="#FFC9D3",tG=function(e){var t=tz(e.featureNumber);return(0,i.jsxs)(tF,{children:[(0,i.jsxs)(tF.FeatureSummary,{backgroundColor:"#FFF1F3",children:[(0,i.jsx)(tF.Header,{localeRoot:tU,iconName:"20-ai-inbox",backgroundColor:tZ}),(0,i.jsxs)(tF.FeatureList,{children:[(0,i.jsx)(tF.FeatureItem,{backgroundColor:tZ,children:(0,E.t)([tU,"features","0"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tZ,children:(0,E.t)([tU,"features","1"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tZ,children:(0,E.t)([tU,"features","2"])})]})]}),(0,i.jsx)(tF.FeaturePreview,{backgroundColor:tZ,className:"flex flex-col items-center justify-center p-8",children:t&&(0,i.jsx)(tD.Q,{src:t.large,srcVariants:t,alt:(0,E.t)([tU,"image_alt"]),className:"w-[300px] md:w-auto"})})]})},tq="".concat(tE,".blocks.chat_agents_feature"),tV="#CFD8FE",tW=function(e){var t=tz(e.featureNumber);return(0,i.jsxs)(tF,{children:[(0,i.jsxs)(tF.FeatureSummary,{backgroundColor:"#F4F6FF",children:[(0,i.jsx)(tF.Header,{localeRoot:tq,iconName:"20-ai-agents",backgroundColor:tV}),(0,i.jsxs)(tF.FeatureList,{children:[(0,i.jsx)(tF.FeatureItem,{backgroundColor:tV,children:(0,E.t)([tq,"features","0"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tV,children:(0,E.t)([tq,"features","1"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tV,children:(0,E.t)([tq,"features","2"])})]})]}),(0,i.jsx)(tF.FeaturePreview,{backgroundColor:tV,className:"flex flex-col items-center justify-center",children:t&&(0,i.jsx)(tD.Q,{src:t.large,srcVariants:t,alt:(0,E.t)([tq,"image_alt"]),className:"w-[300px] md:w-auto"})})]})},tH="".concat(tE,".blocks.knowledge_engine_feature"),tQ="#B0EBD9",tK=function(e){var t=tz(e.featureNumber);return(0,i.jsxs)(tF,{children:[(0,i.jsxs)(tF.FeatureSummary,{backgroundColor:"#EBFAF5",children:[(0,i.jsx)(tF.Header,{localeRoot:tH,iconName:"20-ai-knowledge-engine",backgroundColor:tQ}),(0,i.jsxs)(tF.FeatureList,{children:[(0,i.jsx)(tF.FeatureItem,{backgroundColor:tQ,children:(0,E.t)([tH,"features","0"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tQ,children:(0,E.t)([tH,"features","1"])}),(0,i.jsx)(tF.FeatureItem,{backgroundColor:tQ,children:(0,E.t)([tH,"features","2"])})]})]}),(0,i.jsx)(tF.FeaturePreview,{backgroundColor:tQ,className:"flex flex-col items-center pt-12",children:t&&(0,i.jsx)(tD.Q,{src:t.large,srcVariants:t,alt:(0,E.t)([tH,"image_alt"]),className:"w-[584px] md:w-[789.175px]"})})]})},tJ=function(){return(0,i.jsxs)("div",{className:"flex flex-col items-center gap-y-6 text-center",children:[(0,i.jsx)(tT.Z.TitleXxl,{children:(0,E.t)([tE,"title"])}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-y-2",children:[(0,i.jsx)(tT.Z.LabelLg,{weight:"bold",children:(0,E.t)([tE,"subtitle"])}),(0,i.jsx)(tT.Z.LabelLg,{children:(0,E.t)([tE,"description"])})]}),(0,i.jsx)(tL,{})]})};function t$(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var tX=function(){var e=(0,tp.w)(),t=(0,L.wh)().currentCommunity,r=(0,eA.X5)(),n=(0,o.useCallback)(function(){var n;return(n=function(){var n,i,o,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return[4,td.c.getNextPlanWithFeature((null!=(i=null==t||null==(n=t.current_plan)?void 0:n.id)?i:"").toString(),{plan_feature_flag:"ai_agents"})];case 1:return a=(null==(o=s.sent())?void 0:o.plan_tier)||"enterprise",[4,e.show({planTier:a,source:tb.fe.AI_AGENTS_ENABLE_MODAL,subheading:(0,E.t)("pricing_plans.upgrade_modal.subheading",{feature_name:(0,E.t)("settings.community_ai.ai_agents_feature_name")}),successButtonLabel:(0,E.t)("pricing_plans.upgrade_modal.actions.go_to_customize_agent"),showPlanDetails:!0,onSuccess:function(){r.mutate(void 0,{onSuccess:function(e){window.location.href=ti.X.customize({botPublicId:e.id.toString()})}})}})];case 2:return s.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){t$(o,r,i,a,s,"next",e)}function s(e){t$(o,r,i,a,s,"throw",e)}a(void 0)})})()},[e,t,r]);return(0,i.jsxs)("div",{className:"bg-primary flex size-full flex-col items-center pb-4",children:[(0,i.jsx)("div",{className:"inline-flex h-10 w-full flex-col items-start justify-start gap-2 overflow-hidden bg-zinc-100 px-9 py-2.5",children:(0,i.jsx)("div",{className:"inline-flex items-center justify-center gap-4 self-stretch",children:(0,i.jsx)("button",{onClick:n,className:"cursor-pointer",type:"button",children:(0,i.jsx)(tT.Z.LabelXs,{weight:"normal",children:(0,i.jsx)("span",{className:"underline",children:(0,E.t)([tE,"banner.upgrade_notice"])})})})})}),(0,i.jsxs)("div",{className:"flex size-full max-w-[1078px] flex-col items-center gap-y-14 px-8 py-14",children:[(0,i.jsx)(tJ,{}),(0,i.jsxs)("div",{className:"bg-primary flex flex-col gap-y-6",children:[(0,i.jsx)(tW,{featureNumber:1}),(0,i.jsx)(tK,{featureNumber:2}),(0,i.jsx)(tG,{featureNumber:3})]}),(0,i.jsx)(tL,{})]})]})},tY=function(){return(0,i.jsx)("div",{className:"flex size-full items-center justify-center px-6",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsx)("div",{className:"bg-tertiary mb-4 flex size-16 items-center justify-center rounded-lg",children:(0,i.jsx)(D.JO,{type:"20-community-bot",className:"text-default h-8 !w-8",size:20})}),(0,i.jsx)(tT.Z.TitleMd,{color:"text-default",children:(0,E.t)("settings.community_ai.ai_agents_feature_name")}),(0,i.jsx)(tT.Z.BodyMd,{color:"text-default",textAlign:"text-center",children:(0,E.t)("settings.community_ai.ai_agents_feature_mobile_description")})]})})};let t0=r.p+"static/react/components/SettingsApp/CommunityBot/svgs/setup-agents-dark-8ab164ddcbab8653.svg",t1=r.p+"static/react/components/SettingsApp/CommunityBot/svgs/setup-agents-light-5ee70885e4300830.svg";var t2=function(){var e=(0,y.TC)().isDarkAppearance,t=(0,eA.X5)(),r=function(){t.mutate(void 0,{onSuccess:function(e){window.location.href=ti.X.customize({botPublicId:e.id.toString()})}})};return(0,i.jsxs)("div",{className:"flex size-full flex-col items-center justify-center p-8 text-center","data-testid":"empty-state",children:[(0,i.jsx)("img",{width:343,height:435,src:e?t0:t1,alt:"","aria-hidden":"true",loading:"eager"}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,i.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,i.jsx)(tT.Z.TitleMd,{weight:"font-semibold",children:(0,E.t)("settings.community_bot.empty.header")}),(0,i.jsx)(tT.Z.BodyMd,{children:(0,E.t)("settings.community_bot.empty.description")})]}),(0,i.jsx)("div",{className:"flex gap-3",children:(0,i.jsx)(tl.z,{type:"button",variant:"circle",large:!0,onClick:function(){return r()},children:(0,E.t)("settings.community_bot.empty.primary_label")})})]})]})};function t3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var t6=[{header:(0,E.t)("settings.community_bot.agents.columns.name"),accessorKey:"name",cell:function(e){var t,r,n,o,a,s,l=e.row;return(0,i.jsxs)("div",{className:"ml-2 flex items-center gap-4",children:[(null==(t=l.original)?void 0:t.avatar_url)?(0,i.jsx)("img",{src:l.original.avatar_url,alt:(0,E.t)("community_bot.bot_builder.customize_page.avatar"),loading:"eager",className:"size-8 rounded-full",width:32,height:32}):(0,i.jsx)(tu,{}),(0,i.jsx)("span",{className:"font-[InterVariable,sans-serif] font-semibold",children:null==(r=l.original)?void 0:r.name}),(0,i.jsxs)("div",{className:"hidden items-center gap-1 md:flex",children:[(0,i.jsx)(to.T,{content:(0,E.t)("settings.community_bot.agents.ai_generated_answers_button.title"),children:(0,i.jsx)(tC,{answerType:null==(n=l.original)?void 0:n.answer_type})}),(0,i.jsx)(to.T,{content:null==(o=l.original)?void 0:o.members_filters_tooltip,children:(0,i.jsx)(tA,{})}),(0,i.jsx)(to.T,{content:(0,E.t)("settings.community_bot.agents.behavior_type_button.options.".concat(null==(a=l.original)?void 0:a.tone.replaceAll("-","_"))),children:(0,i.jsx)(tI,{tone:null==(s=l.original)?void 0:s.tone})})]})]})},canSort:!1},{header:(0,E.t)("settings.community_bot.agents.columns.conversations"),accessorKey:"conversations",cell:function(e){var t,r=e.row;return(0,tn.HA)((null==(t=r.original)?void 0:t.conversations)||0)},canSort:!1},{header:(0,E.t)("settings.community_bot.agents.columns.messages"),accessorKey:"messages",cell:function(e){var t,r=e.row;return(0,tn.HA)((null==(t=r.original)?void 0:t.messages)||0)},canSort:!1},{header:(0,E.t)("settings.community_bot.agents.columns.modified_on"),accessorKey:"modified_on",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.modified_on},canSort:!1},{header:(0,E.t)("settings.community_bot.agents.columns.active"),accessorKey:"active",cell:function(e){var t=e.row;return(0,i.jsx)("div",{className:"flex w-16 justify-start",children:(0,i.jsx)(tj,{row:t})})},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var t=e.row;return(0,i.jsx)(tP,{agent:t.original})}}],t5=function(){var e,t,r,n,a,s,l,c,u,d,f,m,p=(e=(0,o.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return t3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t3(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=p[0],h=p[1],y=(0,tk.h$)(),v=(0,L.wh)(),g=v.currentCommunity,_=v.isLoading,x=Math.max(null!=(u=null==g?void 0:g.ai_agents_allowed_in_plan)?u:0,10),j=!(null==g?void 0:g.ai_agents_feature_flag_enabled),w=(0,eA.OH)({currentPage:b,perPage:x,enabled:!_}),O=(0,tr.BT)(),S=(0,eA.X5)(),k=null!=(d=null==w||null==(t=w.data)?void 0:t.records)?d:[],N=0===k.length,P=k.length>=x,C=(0,tc.pm)();if(O)return(0,i.jsx)(tY,{});if(w.isLoading||y.isLoading)return(0,i.jsx)(ts.a,{});if(j&&N)return(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)(tX,{})});if(!j&&N)return(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)(t2,{})});var A=function(e){window.location.href=ti.X.customize({botPublicId:e.id.toString()})};return(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsxs)("div",{className:"bg-primary flex h-full flex-col",children:[(0,i.jsx)(tt.b,{pageTitle:(0,E.t)("settings.community_bot.agents.title"),rightContent:(0,i.jsx)(to.T,{disabled:!P,content:(0,E.t)("settings.community_bot.agents.validation.max_profiles_reached",{limit:x}),children:(0,i.jsx)(tl.z,{variant:"circle",onClick:function(){S.mutate(void 0,{onSuccess:function(e){window.location.href=ti.X.customize({botPublicId:e.id.toString()})},onError:function(e){C.error(e.message)}})},disabled:P,children:(0,E.t)("settings.community_bot.agents.new_agent")})})}),!(null==y||null==(r=y.data)?void 0:r.hide_agents_banner)&&(0,i.jsx)(tN,{agents:null!=(f=null==w||null==(n=w.data)?void 0:n.records)?f:[],handleEditAgent:A}),(0,i.jsx)(ta.w.TableWrapper,{children:(0,i.jsx)(ta.w,{columns:t6,onClickRow:function(e){var t=e.original,r=e.clickEvent;if(r&&r.target){var n=document.getElementById("toggle-wrapper-agent-".concat(t.id));(null==n?void 0:n.contains(r.target))||A(t)}},data:null!=(m=null==w||null==(a=w.data)?void 0:a.records)?m:[],isLoading:null==w?void 0:w.isLoading,initialPage:null==w||null==(s=w.data)?void 0:s.page,pageSize:null==w||null==(l=w.data)?void 0:l.per_page,totalRecordsCount:null==w||null==(c=w.data)?void 0:c.count,onChangePage:function(e){h(e),w.remove()},children:(0,i.jsxs)(ta.w.Table,{children:[(0,i.jsx)(ta.w.Header,{}),(0,i.jsx)(ta.w.Loader,{}),(0,i.jsx)(ta.w.Body,{})]})})})]})})},t4=r(411944),t7=r(533989),t9=r(719784),t8=r(619573),re=r(701168),rt=r(900555),rr=r(222542),rn=r(963549),ri=r(900795),ro=r(970592);function ra(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rs=function(e){var t=e.selectedIds,r=e.setSelectedIds,n=e.onDelete,o=(0,g.dd)(),a=(0,ro.ln)({onSuccess:function(){o.remove(),r([]),null==n||n()}});return(0,i.jsx)(rn.c,{size:"lg",isOpen:o.visible,onClose:o.hide,title:(0,E.t)("settings.community_bot.knowledge.custom.delete_resource",{count:t.length}),confirmVariant:"danger",confirmText:a.isLoading?(0,E.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.confirming"):(0,E.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.confirm"),onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.mutateAsync({ids:t})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ra(o,n,i,a,s,"next",e)}function s(e){ra(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:a.isLoading,children:(0,i.jsx)(tT.Z.BodyMd,{children:(0,i.jsx)(ri.w,{content:(0,E.t)("settings.community_bot.knowledge.custom.bulk_delete_snippet_modal.description",{count:t.length})})})})},rl=g.gk.create(function(e){var t=e.selectedIds,r=e.setSelectedIds,n=e.onDelete;return(0,i.jsx)(rs,{selectedIds:t,setSelectedIds:r,onDelete:n})}),rc=function(){return(0,g.dd)(rl)},ru=r(752569),rd=function(e){return["PDF","TXT","SRT"].includes(e)},rf=r(500184),rm=r(196619),rp=r(359892),rb=r(887279),rh=function(e){var t=e.url,r=e.onDelete;return(0,i.jsxs)("div",{className:"text-dark flex gap-3",children:[(0,i.jsx)(to.T,{arrow:!1,content:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.download"),children:(0,i.jsx)(tl.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){window.open(t,"_blank"),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(D.JO,{size:20,type:"20-snippet-preview-arrow-box"})})}),(0,i.jsx)(to.T,{arrow:!1,content:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.delete"),children:(0,i.jsx)(tl.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){r(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(D.JO,{size:20,type:"20-snippet-preview-trash"})})})]})},ry=function(e){var t=e.isEditing,r=e.onCancel,n=e.onEdit,o=e.onDelete,a=(0,J.Gc)();return(0,i.jsx)("div",{className:"text-dark flex gap-3",children:t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl.z,{variant:"secondary",onClick:function(){a.reset(),r()},children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.cancel")}),(0,i.jsx)(tl.z,{variant:"circle",type:"submit",children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.save")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(to.T,{arrow:!1,content:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.edit"),children:(0,i.jsx)(tl.z,{type:"button",variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){n(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(D.JO,{size:20,type:"20-snippet-preview-pencil"})})}),(0,i.jsx)(to.T,{arrow:!1,content:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.delete"),children:(0,i.jsx)(tl.z,{variant:"secondary-light",className:"inline !p-1.5",onClick:function(e){o(),e.stopPropagation(),e.preventDefault()},children:(0,i.jsx)(D.JO,{size:20,type:"20-snippet-preview-trash"})})})]})})};function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function r_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rx=function(e){var t,r,n,a=e.snippet,s=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=rc(),d=(0,g.dd)(),f=(0,ro._W)({onSuccess:function(){return c(!1)}}),m=rd(null!=(r=null==a?void 0:a.type)?r:""),p=function(){var e;u.show({selectedIds:[null!=(e=null==a?void 0:a.id)?e:0],setSelectedIds:T.noop,onDelete:function(){d.remove()}})};return(0,i.jsx)("div",{className:"border-primary flex h-full min-h-0 flex-1 flex-col border-r",children:void 0===a?(0,i.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,i.jsx)(ts.a,{})}):(0,i.jsxs)(rb.l,{name:"preview-snippet",onSubmit:function(e){m||f.mutate(r_(rg({},e),{id:null==a?void 0:a.id}))},defaultValues:{title:null==a?void 0:a.title,body:null==a?void 0:a.body},className:"flex h-full min-h-0 flex-1 flex-col",formClassName:"flex flex-col min-h-0 h-full",children:[(0,i.jsxs)("div",{className:"border-primary flex h-[72px] items-center justify-between border-b p-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",color:"text-light",children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.custom")}),(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:m?(0,E.t)("settings.community_bot.knowledge.custom.types.file"):(0,E.t)("settings.community_bot.knowledge.custom.types.snippet")})]}),m?(0,i.jsx)(rh,{url:null!=(n=null==a?void 0:a.file_url)?n:"",onDelete:function(){return p()}}):(0,i.jsx)(ry,{isEditing:l,onCancel:function(){c(!1)},onEdit:function(){c(!0)},onDelete:function(){return p()}})]}),(0,i.jsx)("div",{id:"scroll_this_one",className:"h-full min-h-0 flex-1 overflow-y-scroll",children:(0,i.jsxs)("div",{className:"px-6 py-4",children:[(0,i.jsx)(rm.n,{disabled:!l,draggable:!1,name:"title",placeholder:(0,E.t)("settings.community_bot.knowledge.custom.placeholders.title"),className:"bg-primary text-dark mb-2 block w-full resize-none border-none p-0 text-2xl font-bold focus:ring-0",rows:1,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},tabIndex:0}),(null==a?void 0:a.body)===null?(0,i.jsx)("div",{className:"flex h-[calc(100vh-200px)] items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)(ts.a,{}),(0,i.jsx)(tT.Z.BodySm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.still_processing")})]})}):(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsxs)("div",{className:(0,re.A)("relative",a.truncated&&"h-[calc(100vh-300px)] overflow-hidden"),children:[(0,i.jsx)(rp.$,r_(rg({},rf.rp),{placeholder:(0,E.t)("settings.community_bot.knowledge.custom.placeholders.body"),readOnly:!l,name:"body.body",className:(0,re.A)("h-full",a.truncated&&"overflow-hidden"),editorClassName:"quick-post-modal--v2",shouldRefetch:!0})),a.truncated&&(0,i.jsx)("div",{className:"from-primary absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t to-transparent"})]}),a.truncated&&(0,i.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-4 pt-4",children:[(0,i.jsx)(tT.Z.BodyMd,{weight:"bold",children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.too_large")}),(0,i.jsx)(tl.z,{variant:"circle",onClick:function(){window.open(a.file_url,"_blank")},children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.download_file")})]})]})]})})]})})},rj=r(827742),rw=r(664657),rO=r(134870),rS=function(e){var t=e.snippet,r=rd(String(null==t?void 0:t.type));return(0,i.jsxs)("div",{className:"flex w-full flex-col gap-4 pb-6",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-36 shrink-0",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.name")})}),(0,i.jsx)("div",{className:"flex-1",style:{wordBreak:"break-word",wordWrap:"break-word",overflowWrap:"break-word"},children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t.title})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.type")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(t8.y,{type:t.type})})]}),r&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.size")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t.file_size})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.used_in_replies")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t.used_in_replies})})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.created")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,rO.w)({dateTime:new Date(t.created_at),format:rO.f.long_date})})})]}),t.creator&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.created_by")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(rw.W,{name:t.creator.name,src:t.creator.avatar_url,size:"5",isFullRounded:!0}),(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t.creator.name})]})})]}),!r&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.last_updated")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,rO.w)({dateTime:new Date(t.updated_at),format:rO.f.long_date})})})]}),!r&&t.updater&&(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.updated_by")})}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(rw.W,{name:t.updater.name,src:t.updater.avatar_url,size:"5",isFullRounded:!0}),(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t.updater.name})]})})]})]})},rk=function(e){var t=e.snippet,r=(0,g.dd)();return(0,i.jsx)("div",{className:"h-full w-[344px] overflow-hidden",children:void 0===t?(0,i.jsx)("div",{className:"flex h-full flex-1 items-center justify-center",children:(0,i.jsx)(ts.a,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"border-primary flex h-[72px] items-center justify-between border-b p-6",children:[(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details")})}),(0,i.jsx)(tl.z,{onClick:r.hide,variant:"text",children:(0,i.jsx)(D.JO,{type:"24-close",size:24})})]}),(0,i.jsx)("div",{className:"border-primary border-b px-6 pb-1 pt-6",children:(0,i.jsx)(rj.U,{defaultActiveItemTitle:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.assigned_to"),children:(0,i.jsx)(rj.U.Item,{title:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.assigned_to"),children:(0,i.jsx)("div",{className:"pb-6",children:0===t.community_bot_profiles.length?(0,i.jsx)(tT.Z.LabelSm,{children:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.not_assigned")}):(0,i.jsx)("div",{className:"flex flex-col gap-2",children:t.community_bot_profiles.map(function(e){return(0,i.jsxs)("div",{className:"text-dark bg-tertiary border-primary flex w-full flex-row gap-2 rounded-lg border p-2 text-base",children:[e.avatar_url?(0,i.jsx)(rw.W,{src:e.avatar_url,name:e.name,size:"5",isFullRounded:!0}):(0,i.jsx)(D.JO,{type:"20-ai-bot",size:20,className:"!h-[1.25rem] !w-[1.25rem]"}),(0,i.jsx)(tT.Z.BodySm,{truncate:!0,children:e.name})]},e.id)})})})})})}),(0,i.jsx)("div",{className:"border-primary border-b px-6 pb-1 pt-6",children:(0,i.jsx)(rj.U,{defaultActiveItemTitle:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.resource"),children:(0,i.jsx)(rj.U.Item,{title:(0,E.t)("settings.community_bot.knowledge.custom.preview_drawer.details_section.resource"),children:(0,i.jsx)(rS,{snippet:t})})})})]})})},rN=function(e){var t=e.id,r=(0,g.dd)(),n=(0,ro.Ie)({id:t}).data;return(0,i.jsx)(ru.d,{isOpen:!!r.visible,onClose:r.hide,size:"xl",children:(0,i.jsx)(ru.d.Body,{className:"!p-0",children:(0,i.jsxs)("div",{className:"flex h-full flex-row",children:[(0,i.jsx)(rx,{snippet:n}),(0,i.jsx)(rk,{snippet:n})]})})})},rP=g.gk.create(function(e){var t=e.snippetId;return(0,i.jsx)(rN,{id:t})}),rC=function(){return(0,g.dd)(rP)},rA=function(e){var t,r=e.snippet,n=rC(),o=rc(),a=rd(null!=(t=String(null==r?void 0:r.type))?t:"");return(0,i.jsxs)(ta.w.Actions,{children:[(0,i.jsx)(ta.w.Actions.Item,{onClick:function(e){e.stopPropagation(),n.show({snippetId:r.id})},children:(0,E.t)("settings.community_bot.knowledge.custom.preview")}),a&&(0,i.jsx)(ta.w.Actions.Item,{onClick:function(e){e.stopPropagation(),window.open(r.file_url,"_blank")},children:(0,E.t)("settings.community_bot.knowledge.custom.download")}),(0,i.jsx)(ta.w.Actions.Item,{hasDanger:!0,onClick:function(e){e.stopPropagation(),o.show({selectedIds:[r.id],setSelectedIds:T.noop})},children:(0,E.t)("settings.community_bot.knowledge.custom.delete")})]})},rI=r(71367),rT=function(e){var t,r,n=e.row,o=e.handleCheckboxChange,a=e.selectedIds;return(0,i.jsx)(rI.X,{checked:a.includes(null==(t=n.original)?void 0:t.id),onChange:function(){var e;return o(null==(e=n.original)?void 0:e.id)},name:"snippet-".concat(null==(r=n.original)?void 0:r.id),isFormItem:!1,onClick:function(e){return e.stopPropagation()}})},rE=function(e){var t=e.allOnPageSelected,r=e.handleSelectAllOnPage;return(0,i.jsx)(rI.X,{checked:t,onChange:function(e){return r(e.target.checked)},name:"select-all",isFormItem:!1})},rL=function(e){var t,r,n,o,a,s=e.columns,l=e.snippetsQuery,c=e.onChangePage,u=rC();return(0,i.jsxs)(ta.w,{columns:s,data:null!=(a=null==l||null==(t=l.data)?void 0:t.records)?a:[],isLoading:null==l?void 0:l.isLoading,initialPage:null==l||null==(r=l.data)?void 0:r.page,pageSize:null==l||null==(n=l.data)?void 0:n.per_page,totalRecordsCount:null==l||null==(o=l.data)?void 0:o.count,onChangePage:c,onClickRow:function(e){var t=e.original;u.show({snippetId:t.id})},children:[(0,i.jsxs)(ta.w.Table,{children:[(0,i.jsx)(ta.w.Header,{}),(0,i.jsx)(ta.w.Loader,{}),(0,i.jsx)(ta.w.Body,{})]}),(0,i.jsx)(ta.w.Pagination,{align:"left",direction:"reverse"})]})};function rD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||rR(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rR(e,t){if(e){if("string"==typeof e)return rD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rD(e,t)}}var rB=function(e){var t,r,n,a,s,l,c=e.nameFilter,u=void 0===c?"":c,d=e.typeFilter,f=void 0===d?"":d,m=rM((0,o.useState)(1),2),p=m[0],b=m[1],h=(0,ro.gh)({currentPage:p,title:u,type:f}),y=rM((0,o.useState)([]),2),v=y[0],g=y[1],_=(null==(a=h.data)||null==(n=a.records)?void 0:n.map(function(e){return e.id}))||[],x=!!(u||f);(0,o.useEffect)(function(){b(1)},[u,f]);var j=rc(),w=(0,rr.c)(),O=function(){w.show()},S=(null==h||null==(s=h.data)?void 0:s.count)||0,k=(0,T.isEmpty)((null==h||null==(l=h.data)?void 0:l.records)||[]);return(null==h?void 0:h.isLoading)?(0,i.jsx)(ts.a,{}):k?x?(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(rt.u,{header:(0,E.t)("settings.community_bot.knowledge.custom.no_matching_results.header"),description:(0,E.t)("settings.community_bot.knowledge.custom.no_matching_results.description")})}):(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(rt.u,{header:(0,E.t)("settings.community_bot.knowledge.custom.empty_state.header"),description:(0,E.t)("settings.community_bot.knowledge.custom.empty_state.description"),primaryLabel:(0,E.t)("settings.community_bot.knowledge.custom.empty_state.primary_label"),onPrimaryClick:O})}):(0,i.jsxs)(Q.l,{name:"delete-snippets",onSubmit:T.noop,children:[S>0&&(0,i.jsx)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:(0,i.jsxs)("div",{className:"flex min-h-[1.75rem] items-center justify-between gap-4",children:[(0,i.jsx)("div",{className:"flex items-center gap-4",children:v.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,E.t)("settings.community_bot.knowledge.custom.selected_count",{selected_count:v.length,count:S})}),(0,i.jsx)(tl.z,{type:"button",variant:"secondary",onClick:function(){j.show({selectedIds:v,setSelectedIds:g})},children:(0,E.t)("settings.community_bot.knowledge.custom.delete_resource",{count:v.length})})]}):(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,E.t)("settings.community_bot.knowledge.custom.count",{count:S})})}),(0,i.jsxs)(tl.z,{type:"button",onClick:O,variant:"circle",children:[(0,i.jsx)(D.JO,{className:"mr-1 align-bottom",type:"20-plus-v3",size:20,useWithStrokeCurrentColor:!0}),(0,E.t)("settings.community_bot.knowledge.custom.add_content_modal.title")]})]})}),(0,i.jsx)(ta.w.TableWrapper,{children:(0,i.jsx)(t9.n,{children:(0,i.jsx)(rL,{columns:(t=function(e){g(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return rD(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||rR(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},r=function(e){g(function(t){var r=new Set(t);return e?_.forEach(function(e){return r.add(e)}):_.forEach(function(e){return r.delete(e)}),Array.from(r)})},[{header:(0,i.jsx)(rE,{allOnPageSelected:_.length>0&&_.every(function(e){return v.includes(e)}),handleSelectAllOnPage:r}),accessorKey:"checkbox",cellClassName:"align-middle gap-0 !px-0",thClassName:"!px-0 w-4",canSort:!1,cell:function(e){var r=e.row;return(0,i.jsx)(rT,{row:r,handleCheckboxChange:t,selectedIds:v})}},{header:(0,i.jsx)("span",{className:"text-xxs text-default font-semibold uppercase leading-tight tracking-wide",children:(0,E.t)("settings.community_bot.knowledge.custom.columns.title")}),accessorKey:"title",cell:function(e){var t,r,n=e.row;return(0,i.jsx)("div",{className:(0,re.A)({"cursor-default":(null==(t=n.original)?void 0:t.type)===(0,E.t)("settings.community_bot.knowledge.custom.types.file")}),children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:null==(r=n.original)?void 0:r.title})})},canSort:!1},{header:(0,E.t)("settings.community_bot.knowledge.custom.columns.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,i.jsx)(t8.y,{type:(null==(t=r.original)?void 0:t.type)||"Snippet"})},canSort:!1},{header:(0,E.t)("settings.community_bot.knowledge.custom.columns.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t,r=e.row;return(0,i.jsx)(tT.Z.LabelSm,{weight:"regular",children:null==(t=r.original)?void 0:t.used_in_replies})},canSort:!1},{accessorKey:"actions",header:"",cell:function(e){var t=e.row;return(0,i.jsx)(rA,{snippet:t.original})}}]),snippetsQuery:h,onChangePage:function(e){b(e),h.remove()}})})})]})},rz=r(486372),rF=function(){var e=(0,tk.qN)();return(0,i.jsxs)("div",{className:"bg-secondary border-primary flex justify-between border-b px-6 py-8 lg:px-9",children:[(0,i.jsx)("div",{className:"flex items-start space-x-8",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(tO.s6,{weight:"semibold",children:(0,E.t)("settings.community_bot.knowledge.banner.title")}),(0,i.jsx)(Y.p,{color:"text-light",children:(0,E.t)("settings.community_bot.knowledge.banner.description_v2")})]})}),(0,i.jsx)(D.JO,{type:"20-close",size:20,className:"cursor-pointer !self-start",onClick:function(){e.mutate({hide_knowledge_banner:!0})}})]})},rU=function(e){var t,r,n,o,a,s=e.columns,l=e.spacesQuery,c=e.onChangePage;return(0,i.jsxs)(ta.w,{columns:s,data:null!=(a=null==l||null==(t=l.data)?void 0:t.records)?a:[],isLoading:null==l?void 0:l.isLoading,initialPage:null==l||null==(r=l.data)?void 0:r.page,pageSize:null==l||null==(n=l.data)?void 0:n.per_page,totalRecordsCount:null==l||null==(o=l.data)?void 0:o.count,onChangePage:c,children:[(0,i.jsxs)(ta.w.Table,{children:[(0,i.jsx)(ta.w.Header,{}),(0,i.jsx)(ta.w.Loader,{}),(0,i.jsx)(ta.w.Body,{})]}),(0,i.jsx)(ta.w.Pagination,{align:"left",direction:"reverse"})]})};function rZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rG=function(e){var t,r,n,a,s=e.nameFilter,l=void 0===s?"":s,c=e.typeFilter,u=void 0===c?"":c,d=e.spaceGroupFilter,f=void 0===d?"":d,m=(t=(0,o.useState)(1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rZ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rZ(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(0,rz.G)(),y=!!(l||u||f),v=(0,tk.t8)({currentPage:p,name:l,type:u,spaceGroup:f}),g=(0,tk.h$)(),_=(null==v||null==(r=v.data)?void 0:r.count)||0,x=(0,T.isEmpty)((null==v||null==(n=v.data)?void 0:n.records)||[]);return g.isLoading||(null==v?void 0:v.isLoading)?(0,i.jsx)(ts.a,{}):x?y?(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(rt.u,{header:(0,E.t)("settings.community_bot.knowledge.community.no_matching_results.header"),description:(0,E.t)("settings.community_bot.knowledge.community.no_matching_results.description")})}):(0,i.jsx)("div",{className:"mt-[20vh]",children:(0,i.jsx)(rt.u,{header:(0,E.t)("settings.community_bot.knowledge.community.empty_state.header"),description:(0,E.t)("settings.community_bot.knowledge.community.empty_state.description"),primaryLabel:(0,E.t)("settings.community_bot.knowledge.community.empty_state.primary_label"),onPrimaryClick:function(){return h.show()}})}):(0,i.jsxs)(i.Fragment,{children:[_>0&&(0,i.jsxs)(i.Fragment,{children:[!(null==g||null==(a=g.data)?void 0:a.hide_knowledge_banner)&&(0,i.jsx)(rF,{}),(0,i.jsx)("div",{className:"px-6 pb-1 pt-5 lg:px-9",children:(0,i.jsx)("div",{className:"flex min-h-[1.75rem] items-center gap-4",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,E.t)("settings.community_bot.knowledge.spaces.count",{count:_})})})})]}),(0,i.jsx)(ta.w.TableWrapper,{children:(0,i.jsx)("div",{className:"mt-0.5",children:(0,i.jsx)(rU,{columns:[{header:(0,E.t)("settings.community_bot.knowledge.spaces.columns_v2.name"),accessorKey:"name",cell:function(e){var t,r=e.row;return(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:null==(t=r.original)?void 0:t.name})},canSort:!1,cellClassName:"w-1/2"},{header:(0,E.t)("settings.community_bot.knowledge.spaces.columns_v2.type"),accessorKey:"type",cell:function(e){var t,r=e.row;return(0,i.jsx)(t8.y,{type:(null==(t=r.original)?void 0:t.type)||"Post"})},canSort:!1},{header:(0,E.t)("settings.community_bot.knowledge.spaces.columns_v2.space_group"),accessorKey:"space_group",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.space_group},canSort:!1},{header:(0,E.t)("settings.community_bot.knowledge.spaces.columns_v2.items_included"),accessorKey:"posts_count",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.posts_count},canSort:!1},{header:(0,E.t)("settings.community_bot.knowledge.spaces.columns_v2.used_in_replies"),accessorKey:"used_in_replies",cell:function(e){var t;return null==(t=e.row.original)?void 0:t.used_in_replies},canSort:!1}],spacesQuery:v,onChangePage:function(e){b(e),v.remove()}})})})]})};function rq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rV={TAB_COMMUNITY:"tab_community",TAB_CUSTOM:"tab_custom"},rW=(rq(n={},rV.TAB_COMMUNITY,(0,E.t)("settings.community_bot.knowledge.tab_community")),rq(n,rV.TAB_CUSTOM,(0,E.t)("settings.community_bot.knowledge.tab_custom")),n),rH=[{label:(0,E.t)("settings.community_bot.knowledge.type.course"),value:"course"},{label:(0,E.t)("settings.community_bot.knowledge.type.post"),value:"basic"}],rQ=[{label:(0,E.t)("settings.community_bot.knowledge.custom.types.snippet"),value:"Snippet"},{label:(0,E.t)("settings.community_bot.knowledge.custom.types.pdf"),value:"PDF"},{label:(0,E.t)("settings.community_bot.knowledge.custom.types.txt"),value:"TXT"},{label:(0,E.t)("settings.community_bot.knowledge.custom.types.srt"),value:"SRT"}];function rK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function r$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function rX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rK(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rY=Object.values(rV),r0=function(){var e=(0,eA.OH)({currentPage:1}),t=e.data,r=e.isLoading,n=(0,tr.BT)(),a=rX((0,o.useState)(rY.indexOf(rV.TAB_COMMUNITY)),2),s=a[0],l=a[1],c=rX((0,o.useState)({name:"",type:"",spaceGroup:""}),2),u=c[0],d=c[1],f=(0,L.wh)().currentCommunity,m=!(null==t?void 0:t.records)||0===t.records.length,p=!(null==f?void 0:f.ai_agents_feature_flag_enabled)&&m,b=!!(null==f?void 0:f.ai_agents_feature_flag_enabled)&&m;(0,o.useEffect)(function(){d({name:"",type:"",spaceGroup:""})},[s]);var h=function(e){var t=e===rY.indexOf(rV.TAB_COMMUNITY);return(0,i.jsx)(t7.S,{name:u.name,onNameChange:function(e){return d(r$(rJ({},u),{name:e}))},type:u.type,onTypeChange:function(e){return d(r$(rJ({},u),{type:e}))},typeOptions:t?rH:rQ,spaceGroup:u.spaceGroup,onSpaceGroupChange:function(e){return d(r$(rJ({},u),{spaceGroup:e}))},showSpaceGroup:t})};return n?(0,i.jsx)(tY,{}):r?(0,i.jsx)(ts.a,{}):p?(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)(tX,{})}):b?(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)(t2,{})}):(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)("div",{className:"bg-primary h-full",children:(0,i.jsxs)(t4.O.Group,{className:"!h-auto overflow-visible",selectedIndex:s,onChange:function(e){return l(e)},children:[(0,i.jsx)(tt.b,{pageTitle:(0,E.t)("settings.community_bot.knowledge.title"),hasBorder:!1,filters:(0,i.jsx)(t4.O.ListWrapper,{className:"lg:px-9",children:(0,i.jsx)(t4.O.List,{children:rY.map(function(e){return(0,i.jsx)(t4.O,{children:rW[e]},e)})})})}),(0,i.jsxs)(t4.O.Panels,{children:[(0,i.jsxs)(t4.O.Panel,{children:[h(s),(0,i.jsx)(rG,{nameFilter:u.name,typeFilter:u.type,spaceGroupFilter:u.spaceGroup})]}),(0,i.jsxs)(t4.O.Panel,{children:[h(s),(0,i.jsx)(rB,{nameFilter:u.name,typeFilter:u.type})]})]})]})})})},r1=r(390505);let r2=r.p+"static/images/inbox-avatars-38bf8b0f2b268160.png";var r3=function(){var e,t,r=(0,U.k6)(),n=(0,eA.OH)({currentPage:1}),o=!(null==n?void 0:n.isLoading)&&!(null==n||null==(e=n.data)?void 0:e.count),a=(0,L.wh)().currentCommunity,s=(0,eA.X5)(),l=null==n||null==(t=n.data)?void 0:t.records,c=!(null==l?void 0:l.length),u=!(null==a?void 0:a.ai_agents_feature_flag_enabled);return n.isLoading?(0,i.jsx)(ts.a,{}):u&&c?(0,i.jsx)(tX,{}):(0,i.jsx)("div",{className:"bg-secondary flex size-full items-center justify-center text-center",children:(0,i.jsxs)("div",{className:"flex w-[31rem] flex-col items-center gap-4",children:[(0,i.jsx)("img",{alt:"",loading:"lazy",src:r2,className:"mb-2 object-cover"}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:(0,E.t)("community_inbox.title")}),(0,i.jsx)(tT.Z.BodyMd,{color:"text-default",children:(0,E.t)("community_inbox.description")})]}),o&&(0,i.jsx)(tl.z,{variant:"circle",onClick:function(){s.mutate(void 0,{onSuccess:function(e){r.push(ti.X.customize({botPublicId:e.id.toString()}))}})},large:!0,children:(0,E.t)("community_inbox.setup_agent_cta")})]})})},r6=function(){return(0,i.jsxs)(U.rs,{children:[(0,i.jsx)(U.AW,{exact:!0,path:"/settings/ai-inbox/conversations/:id",component:r1.o}),(0,i.jsx)(U.AW,{path:"/",component:r3})]})},r5=(0,eJ.u)(function(){return r.e("2495").then(r.bind(r,6869))}),r4=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(r5,{})})},r7=(0,eJ.u)(function(){return r.e("5147").then(r.bind(r,185693))}),r9=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(r7,{})})},r8=(0,eJ.u)(function(){return Promise.all([r.e("4565"),r.e("5805"),r.e("2549")]).then(r.bind(r,997959))}),ne=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(r8,{})})},nt=(0,eJ.u)(function(){return r.e("7673").then(r.bind(r,240173))}),nr=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nt,{})})},nn=(0,eJ.u)(function(){return r.e("687").then(r.bind(r,448165))}),ni=function(e){var t=e.pageTitle;return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nn,{pageTitle:t})})},no=(0,eJ.u)(function(){return r.e("3026").then(r.bind(r,782811))}),na=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(no,{})})},ns=(0,eJ.u)(function(){return r.e("6072").then(r.bind(r,749706))}),nl=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ns,{})})},nc=(0,eJ.u)(function(){return r.e("9094").then(r.bind(r,853699))}),nu=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nc,{})})},nd=(0,eJ.u)(function(){return Promise.all([r.e("7944"),r.e("5251"),r.e("9492"),r.e("2704"),r.e("4697")]).then(r.bind(r,777828))}),nf=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nd,{})})},nm=(0,eJ.u)(function(){return Promise.all([r.e("4502"),r.e("140"),r.e("9427"),r.e("1906")]).then(r.bind(r,606241))}),np=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nm,{})})},nb=(0,eJ.u)(function(){return Promise.all([r.e("2704"),r.e("1553")]).then(r.bind(r,508914))}),nh=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(nb,{})})},ny=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("7463"),r.e("4197"),r.e("4565"),r.e("2847"),r.e("2435"),r.e("8294")]).then(r.bind(r,902014))}),nv=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ny,{})})},ng=(0,eJ.u)(function(){return r.e("7499").then(r.bind(r,300846))}),n_=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ng,{})})},nx=r(735573),nj=r(175337),nw=r(509837);function nO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nO(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nk=function(){var e=(0,o.useRef)(null),t=nS((0,o.useState)(!1),2),r=t[0],n=t[1],i=nS((0,o.useState)(!0),2),a=i[0],s=i[1],l=(0,o.useCallback)(function(){var t=e.current;t&&(n(t.scrollLeft>0),s(t.scrollLeft<t.scrollWidth-t.clientWidth))},[]),c=(0,o.useCallback)(function(t){var r=e.current;if(r){var n=r.clientWidth/3;r.scrollBy({left:"left"===t?-n:n,behavior:"smooth"})}},[]);return{scrollContainerRef:e,canScrollLeft:r,canScrollRight:a,updateScrollState:l,scroll:c}},nN=r(775148),nP="admin_dashboard.grow_with_circle",nC=function(e){var t=e.course,r=t.category,n=t.completed_lessons_count,o=t.description,a=t.lessons_count,s=t.name,l=t.starts_at,c=t.thumbnail_url,u=t.time_remaining,d=t.url,f=a>0?Math.round(n/a*100):0,m=r&&l;return(0,i.jsxs)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"group flex w-72 shrink-0 flex-col overflow-hidden",children:[(0,i.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:c?(0,i.jsx)("img",{src:c,alt:s,loading:"lazy",className:"size-full object-cover transition-transform group-hover:scale-105"}):(0,i.jsx)("div",{className:"bg-tertiary size-full"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 pt-3",children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",color:"text-dark",children:o}),a>0&&n===a?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"bg-brand h-1.5 w-24 rounded-full"}),(0,i.jsx)(tT.Z.LabelSm,{color:"text-default",children:(0,E.t)([nP,"complete_percentage"],{percentage:100})})]}):a>0&&n>0?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-1.5 w-24 overflow-hidden rounded-full",children:(0,i.jsx)("div",{className:"bg-brand h-full rounded-full transition-all",style:{width:"".concat(f,"%")}})}),(0,i.jsxs)(tT.Z.LabelSm,{color:"text-default",children:[(0,E.t)([nP,"complete_percentage"],{percentage:f}),u&&(0,i.jsxs)("span",{className:"text-light",children:[" ",(0,E.t)([nP,"separator"])," ",u]})]})]}):m?(0,i.jsxs)(tT.Z.LabelSm,{color:"text-light",children:[r," ",(0,E.t)([nP,"separator"])," ",(0,E.t)([nP,"starts_on"],{date:l})]}):null]})]})},nA=function(){return(0,i.jsxs)("div",{className:"flex w-72 shrink-0 animate-pulse flex-col overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-tertiary aspect-video w-full rounded-lg"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1.5 pt-3",children:[(0,i.jsx)("div",{className:"bg-tertiary h-5 w-3/4 rounded"}),(0,i.jsx)("div",{className:"bg-tertiary h-4 w-1/2 rounded"})]})]})},nI=function(){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)(["admin_dashboard.grow_with_circle","title"])}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"border-primary size-8 animate-pulse rounded-full border"}),(0,i.jsx)("div",{className:"border-primary size-8 animate-pulse rounded-full border"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(nA,{}),(0,i.jsx)(nA,{}),(0,i.jsx)(nA,{})]})]})},nT=r(93199),nE=["admin_dashboard","grow_with_circle","courses"],nL="admin_dashboard.grow_with_circle",nD=function(){var e,t=(0,es.useQuery)({queryKey:nE,queryFn:function(){return(0,nT.UT)(ex.av.settings.adminDashboard.courses.index())},staleTime:3e5}),r=t.data,n=t.isLoading,o=nk(),a=o.scrollContainerRef,s=o.canScrollLeft,l=o.canScrollRight,c=o.updateScrollState,u=o.scroll;if(n)return(0,i.jsx)(nI,{});var d=null!=(e=null==r?void 0:r.courses)?e:[];return 0===d.length?null:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)([nL,"title"])}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(nN.h,{name:"20-chevron-left",onClick:function(){return u("left")},disabled:!s,ariaLabel:(0,E.t)([nL,"scroll_left"]),buttonSize:32,iconSize:20,className:"border-primary rounded-full border"}),(0,i.jsx)(nN.h,{name:"20-chevron-right",onClick:function(){return u("right")},disabled:!l,ariaLabel:(0,E.t)([nL,"scroll_right"]),buttonSize:32,iconSize:20,className:"border-primary rounded-full border"})]})]}),(0,i.jsx)("div",{ref:a,onScroll:c,className:"scrollbar-hide -mx-2 flex gap-4 overflow-x-auto px-2",children:d.map(function(e){return(0,i.jsx)(nC,{course:e},e.id)})})]})},nM=r(63559),nR=function(){return(0,es.useQuery)(["news"],function(){return(0,nT.UT)(ex.av.supportWidget.listNews())},{staleTime:nM.dV,retry:!1})},nB="https://community.circle.so",nz=function(e){var t=e.post,r=t.space_slug?"".concat(nB,"/c/").concat(t.space_slug,"/").concat(t.id):"".concat(nB,"/post/").concat(t.id);return(0,i.jsxs)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"bg-primary border-primary hover:border-secondary group flex w-72 shrink-0 flex-col overflow-hidden rounded-lg border transition-all",children:[t.cover_image_url&&(0,i.jsx)("div",{className:"aspect-video w-full overflow-hidden",children:(0,i.jsx)("img",{src:t.cover_image_url,alt:t.name,loading:"lazy",className:"size-full object-cover transition-transform group-hover:scale-105"})}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col p-4",children:[(0,i.jsx)("div",{className:"mb-2 line-clamp-2",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:t.name})}),t.body_plain_text&&(0,i.jsx)("div",{className:"line-clamp-2",children:(0,i.jsx)(tT.Z.BodySm,{color:"text-light",children:(0,T.truncate)(t.body_plain_text,{length:120})})})]})]})},nF=function(){return(0,i.jsxs)("div",{className:"bg-primary border-primary flex w-72 shrink-0 animate-pulse flex-col overflow-hidden rounded-lg border",children:[(0,i.jsx)("div",{className:"bg-tertiary aspect-video w-full"}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col p-4",children:[(0,i.jsx)("div",{className:"bg-tertiary mb-2 h-5 w-3/4 rounded"}),(0,i.jsx)("div",{className:"bg-tertiary mb-1 h-4 w-full rounded"}),(0,i.jsx)("div",{className:"bg-tertiary h-4 w-2/3 rounded"})]})]})},nU=function(){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)(["admin_dashboard.latest_from_circle","title"])}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"border-primary size-8 animate-pulse rounded-full border"}),(0,i.jsx)("div",{className:"border-primary size-8 animate-pulse rounded-full border"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(nF,{}),(0,i.jsx)(nF,{}),(0,i.jsx)(nF,{})]})]})},nZ="admin_dashboard.latest_from_circle",nG=function(){var e,t=nR(),r=t.isLoading,n=t.data,o=nk(),a=o.scrollContainerRef,s=o.canScrollLeft,l=o.canScrollRight,c=o.updateScrollState,u=o.scroll,d=(null!=(e=null==n?void 0:n.records)?e:[]).slice(0,3);return r?(0,i.jsx)(nU,{}):0===d.length?null:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)([nZ,"title"])}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(nN.h,{name:"20-chevron-left",onClick:function(){return u("left")},disabled:!s,ariaLabel:(0,E.t)([nZ,"scroll_left"]),buttonSize:32,iconSize:20,className:"border-primary rounded-full border"}),(0,i.jsx)(nN.h,{name:"20-chevron-right",onClick:function(){return u("right")},disabled:!l,ariaLabel:(0,E.t)([nZ,"scroll_right"]),buttonSize:32,iconSize:20,className:"border-primary rounded-full border"})]})]}),(0,i.jsx)("div",{ref:a,onScroll:c,className:"scrollbar-hide -mx-2 flex gap-4 overflow-x-auto px-2",children:d.map(function(e){return(0,i.jsx)(nz,{post:e},e.id)})})]})},nq="admin_dashboard.recently_edited",nV=function(e){switch(e.toLowerCase()){case"active":case"published":return"text-v2-success";case"scheduled":return"text-v2-warning";default:return"text-default"}},nW=function(e){switch(e.type){case"Post":return"/posts/".concat(e.id,"/edit");case"Paywall":return"/settings/paywalls/".concat(e.id);case"Broadcast":return"/settings/broadcasts/".concat(e.uuid);case"Workflow":return ex.o0.view({workflowId:String(e.id)})}},nH=function(e){var t=e.item,r=(0,E.t)([nq,"types",t.type.toLowerCase()]),n=(0,E.t)([nq,"statuses",t.status.toLowerCase()]),o=nV(t.status),a=(0,rO.w)({dateTime:new Date(t.updated_at),format:rO.f.short_month_and_date_with_year});return(0,i.jsxs)("a",{href:nW(t),className:"bg-primary border-primary hover:border-secondary flex w-52 shrink-0 flex-col rounded-lg border p-4 transition-all",children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(tT.Z.LabelXs,{color:"text-light",children:r})}),(0,i.jsx)("div",{className:"mb-2 line-clamp-2 min-h-[2.5rem]",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:t.name})}),(0,i.jsxs)("div",{className:"mt-auto flex items-center gap-1",children:[(0,i.jsx)(tT.Z.LabelXs,{color:o,children:n}),(0,i.jsx)(tT.Z.LabelXs,{color:"text-light",children:(0,E.t)([nq,"separator"],{date:a})})]})]})},nQ=(0,i.jsxs)("div",{className:"bg-primary border-primary flex w-52 shrink-0 animate-pulse flex-col rounded-lg border p-4",children:[(0,i.jsx)("div",{className:"bg-tertiary mb-3 h-3 w-10 rounded"}),(0,i.jsx)("div",{className:"bg-tertiary mb-2 h-5 w-full rounded"}),(0,i.jsx)("div",{className:"bg-tertiary mb-2 h-5 w-3/4 rounded"}),(0,i.jsx)("div",{className:"bg-tertiary mt-auto h-3 w-24 rounded"})]}),nK=function(){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"pb-4",children:(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)(["admin_dashboard.recently_edited","title"])})}),(0,i.jsxs)("div",{className:"flex gap-4 overflow-x-auto",children:[nQ,nQ,nQ,nQ]})]})},nJ=function(){var e,t=(0,es.useQuery)(["adminDashboard","recentlyEdited"],function(){return(0,nT.UT)(ex.av.settings.adminDashboard.recentlyEdited.index())},{staleTime:3e5,retry:!1}),r=t.isLoading,n=t.data;if(r)return(0,i.jsx)(nK,{});var o=null!=(e=null==n?void 0:n.items)?e:[];return 0===o.length?null:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"pb-4",children:(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)(["admin_dashboard.recently_edited","title"])})}),(0,i.jsx)("div",{className:"scrollbar-hide -mx-2 flex gap-4 overflow-x-auto px-2",children:o.map(function(e){return(0,i.jsx)(nH,{item:e},"".concat(e.type,"-").concat(e.id))})})]})},n$=r(167720),nX=r(783886),nY=r(485653),n0=r(636171),n1=r(217123),n2=r(664586),n3="yyyy-MM-dd",n6=function(e){return(0,o.useMemo)(function(){var t=new Date;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({date_grouping:"daily",start_date:(0,n1.default)((0,n2.default)(t,30),n3),end_date:(0,n1.default)(t,n3)},e&&{filters:e})},[e])},n5=r(664470),n4=function(e){var t=e.title,r=e.value,n=e.isLoading,o=e.isSelected,a=e.onClick,s=e.suffix,l="number"==typeof r?(0,tn.HA)(r):r,c=s?"".concat(l).concat(s):l,u=!!a;return(0,i.jsxs)("button",{type:"button",onClick:a,disabled:!u,className:(0,re.A)("rounded-lg p-3 text-left transition-colors",u&&"cursor-pointer hover:bg-secondary",o&&"bg-secondary",!u&&"cursor-default"),children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-light",children:t}),(0,i.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[n?(0,i.jsx)(n5.X2,{className:"!h-7 !w-16 !rounded"}):(0,i.jsx)(tT.Z.TitleMd,{weight:"semibold",children:c}),(0,i.jsx)(tT.Z.LabelXs,{color:"text-light",children:"-"})]})]})},n7=function(e){var t=e.icon,r=e.titleKey,n=e.descriptionKey,o=e.buttonKey,a=e.onAction;return(0,i.jsxs)("div",{className:"bg-secondary flex flex-col items-center justify-center rounded-lg px-6 py-12",children:[(0,i.jsx)(D.JO,{type:t,size:24,className:"text-light mb-4"}),(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)(r)})}),(0,i.jsx)("div",{className:"mb-6 text-center",children:(0,i.jsx)(tT.Z.BodySm,{color:"text-light",children:(0,E.t)(n)})}),(0,i.jsx)(tl.z,{variant:"circle",onClick:a,children:(0,E.t)(o)})]})};function n9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var n8="admin_dashboard.analytics.audience",ie="total_members",it="active_members",ir="admin_dashboard.analytics.broadcast",ii=r(943544);function io(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ia=[{label:(0,E.t)("date_range.last_7_days"),value:"last_7_days",getDateRange:function(){return[(0,n2.default)(new Date,7),new Date]}},{label:(0,E.t)("date_range.last_4_weeks"),value:"last_4_weeks",getDateRange:function(){return[(0,n2.default)(new Date,28),new Date]}}],is=function(e){var t,r=e.onChange,n=e.value,a=(t=(0,o.useState)(void 0===n?"last_7_days":n),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return io(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return io(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=ia.map(function(e){return{label:e.label,value:e.value,isActive:e.value===s,onClick:function(){l(e.value),null==r||r(e.value,e.getDateRange())}}});return(0,i.jsx)(ii.Lt,{options:c,activeOptionValue:s,direction:"bottom-end"})},il=r(82681),ic=r(733697),iu=r(223016);function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function im(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ip(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return id(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return id(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ib="admin_dashboard.analytics.engagement",ih={0:{key:"type",value:["admin","member"]}},iy=r(847806),iv=r(425389);function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ig(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ig(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ix="admin_dashboard.analytics.payments",ij=r(888140);function iw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iO="admin_dashboard.analytics.website",iS="unique_visitors",ik="page_views",iN="bounce_rate";function iP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var iC="admin_dashboard.analytics",iA=[{id:"audience",label:(0,E.t)([iC,"tabs","audience"]),component:function(){var e,t=(e=(0,o.useState)(ie),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return n9(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n9(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=n6(),s=(0,es.useQuery)(["admin_dashboard.analytics.audience.total_members",a],function(){return nX.Y.overview.total_members(a)}),l=s.data,c=s.isLoading,u=(0,es.useQuery)(["admin_dashboard.analytics.audience.active_members",a],function(){return nX.Y.overview.active_members(a)}),d=u.data,f=u.isLoading,m=(0,es.useQuery)(["admin_dashboard.analytics.audience.mau",a],function(){return nX.Y.overview.monthly_active_users(a)}),p=m.data,b=m.isLoading,h=!c&&0!==l;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3",children:[(0,i.jsx)(n4,{title:(0,E.t)([n8,"total_members"]),value:null!=l?l:0,isLoading:c,isSelected:r===ie,onClick:function(){return n(ie)}}),(0,i.jsx)(n4,{title:(0,E.t)([n8,"active_members"]),value:null!=d?d:0,isLoading:f,isSelected:r===it,onClick:function(){return n(it)}}),(0,i.jsx)(n4,{title:(0,E.t)([n8,"mau"]),value:null!=p?p:0,isLoading:b,suffix:"%",isSelected:"mau"===r,onClick:function(){return n("mau")}})]}),h&&r===ie&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.members.total_members_by_date,queryKey:"admin_dashboard.analytics.audience.total_members_by_date",mapData:n0.hi,indexBy:"label",seriesKeys:[ie],rootLocale:["settings.analytics.dashboards.members","total_members_by_date"],tooltipType:"members",className:"border-0 !p-0"}),h&&r===it&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.members.active_members_by_date,queryKey:"admin_dashboard.analytics.audience.active_members_by_date",mapData:n0.w$,indexBy:"label",seriesKeys:[it],rootLocale:["settings.analytics.dashboards.members","active_members_by_date"],tooltipType:"members",className:"border-0 !p-0"}),h&&"mau"===r&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.overview.monthly_active_users_by_date,queryKey:"admin_dashboard.analytics.audience.mau_by_date",mapData:n0.QD,indexBy:"label",seriesKeys:["mau"],rootLocale:["settings.analytics.dashboards.members","mau_by_date"],tooltipType:"histogram_generic",suffix:"%",className:"border-0 !p-0"}),!h&&(0,i.jsx)(n7,{icon:"20-members",titleKey:"".concat(n8,".empty_state.title"),descriptionKey:"".concat(n8,".empty_state.description"),buttonKey:"".concat(n8,".empty_state.invite_button")})]})}},{id:"engagement",label:(0,E.t)([iC,"tabs","engagement"]),component:function(){var e=ip((0,o.useState)(!1),2),t=e[0],r=e[1],n=ip((0,o.useState)(!1),2),a=n[0],s=n[1],l=ip((0,o.useState)(!1),2),c=l[0],u=l[1],d=n6(),f=n6(ih),m=(0,o.useMemo)(function(){return function(e){var t,r,n;return nX.Y.events.total_rsvps_by_date((r=im({},e),n=n={filters:im({},null!=(t=e.filters)?t:{},ih)},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))}},[]),p=(0,o.useMemo)(function(){return function(e){return nX.Y.courses.course_enrollments_by_date(e)}},[]),b=(0,es.useQuery)(["admin_dashboard.analytics.engagement.total_posts",d],function(){return nX.Y.post_comments.total_posts(d)}),h=b.data,y=b.isLoading,v=(0,es.useQuery)(["admin_dashboard.analytics.engagement.conversations",d],function(){return nX.Y.messages.conversations(d)}),g=v.data,_=v.isLoading,x=(0,es.useQuery)(["admin_dashboard.analytics.engagement.total_rsvps",f],function(){return nX.Y.events.total_rsvps(f)}),j=x.data,w=x.isLoading,O=(0,es.useQuery)(["admin_dashboard.analytics.engagement.course_enrollments",d],function(){return nX.Y.courses.course_enrollments(d)}),S=O.data,k=O.isLoading;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-4",children:[(0,i.jsx)(n4,{title:(0,E.t)([ib,"new_posts"]),value:null!=h?h:0,isLoading:y}),(0,i.jsx)(n4,{title:(0,E.t)([ib,"conversations"]),value:null!=g?g:0,isLoading:_,isSelected:c,onClick:function(){return u(!c)}}),(0,i.jsx)(n4,{title:(0,E.t)([ib,"total_rsvps"]),value:null!=j?j:0,isLoading:w,isSelected:t,onClick:function(){return r(!t)}}),(0,i.jsx)(n4,{title:(0,E.t)([ib,"course_enrollments"]),value:null!=S?S:0,isLoading:k,isSelected:a,onClick:function(){return s(!a)}})]}),!w&&0!==j&&t&&(0,i.jsx)(nY.w,{title:"",fetchData:m,queryKey:"admin_dashboard.analytics.engagement.total_rsvps_by_date",mapData:ic.ib,indexBy:"label",seriesKeys:["total_rsvps"],rootLocale:["settings.analytics.dashboards.events","total_rsvps_by_date","chart_tooltip"],tooltipType:"rsvps",className:"border-0 !p-0"}),!k&&0!==S&&a&&(0,i.jsx)(nY.w,{title:"",fetchData:p,queryKey:"admin_dashboard.analytics.engagement.course_enrollments_by_date",mapData:il.if,indexBy:"label",seriesKeys:["course_enrollments"],rootLocale:["settings.analytics.dashboards.courses","course_enrollments_by_date"],tooltipType:"histogram_generic",className:"border-0 !p-0"}),!_&&0!==g&&c&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.messages.conversations_by_date,queryKey:"admin_dashboard.analytics.engagement.conversations_by_date",mapData:iu.ZL,indexBy:"label",seriesKeys:["conversations"],rootLocale:["settings.analytics.dashboards.messages","conversations_by_date"],tooltipType:"conversations",className:"border-0 !p-0"}),!y&&0===h&&(0,i.jsx)(n7,{icon:"20-document",titleKey:"".concat(ib,".empty_state.title"),descriptionKey:"".concat(ib,".empty_state.description"),buttonKey:"".concat(ib,".empty_state.button")})]})}},{id:"broadcast",label:(0,E.t)([iC,"tabs","broadcast"]),component:function(){return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-4",children:[(0,i.jsx)(n4,{title:(0,E.t)([ir,"broadcasts_sent"]),value:0}),(0,i.jsx)(n4,{title:(0,E.t)([ir,"emails_sent"]),value:0}),(0,i.jsx)(n4,{title:(0,E.t)([ir,"engagement"]),value:0}),(0,i.jsx)(n4,{title:(0,E.t)([ir,"unsubscribed"]),value:0})]}),(0,i.jsx)(n7,{icon:"20-send",titleKey:"".concat(ir,".empty_state.title"),descriptionKey:"".concat(ir,".empty_state.description"),buttonKey:"".concat(ir,".empty_state.button")})]})}},{id:"website",label:(0,E.t)([iC,"tabs","website"]),component:function(){var e,t=(e=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return iw(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iw(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=n6(),s=(0,es.useQuery)(["admin_dashboard.analytics.website.unique_visitors",a],function(){return nX.Y.websites.unique_visitors(a)}),l=s.data,c=s.isLoading,u=(0,es.useQuery)(["admin_dashboard.analytics.website.page_views",a],function(){return nX.Y.websites.page_views(a)}),d=u.data,f=u.isLoading,m=(0,es.useQuery)(["admin_dashboard.analytics.website.bounce_rate",a],function(){return nX.Y.websites.bounce_rate(a)}),p=m.data,b=m.isLoading,h=function(e){n(function(t){return t===e?null:e})};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3",children:[(0,i.jsx)(n4,{title:(0,E.t)([iO,"unique_visitors"]),value:null!=l?l:0,isLoading:c,isSelected:r===iS,onClick:function(){return h(iS)}}),(0,i.jsx)(n4,{title:(0,E.t)([iO,"page_views"]),value:null!=d?d:0,isLoading:f,isSelected:r===ik,onClick:function(){return h(ik)}}),(0,i.jsx)(n4,{title:(0,E.t)([iO,"bounce_rate"]),value:null!=p?"".concat(p,"%"):"0%",isLoading:b,isSelected:r===iN,onClick:function(){return h(iN)}})]}),!c&&0!==l&&r===iS&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.websites.unique_visitors_by_date,queryKey:"admin_dashboard.analytics.website.unique_visitors_by_date",mapData:ij.$5,indexBy:"label",seriesKeys:[iS],rootLocale:["settings.analytics.dashboards.websites","unique_visitors_by_date"],tooltipType:"histogram_generic",className:"border-0 !p-0"}),!f&&0!==d&&r===ik&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.websites.page_views_by_date,queryKey:"admin_dashboard.analytics.website.page_views_by_date",mapData:ij.Kn,indexBy:"label",seriesKeys:[ik],rootLocale:["settings.analytics.dashboards.websites","page_views_by_date"],tooltipType:"histogram_generic",className:"border-0 !p-0"}),!b&&null!=p&&r===iN&&(0,i.jsx)(nY.w,{title:"",fetchData:nX.Y.websites.bounce_rate_by_date,queryKey:"admin_dashboard.analytics.website.bounce_rate_by_date",mapData:ij.L1,indexBy:"label",seriesKeys:[iN],rootLocale:["settings.analytics.dashboards.websites","bounce_rate_by_date"],tooltipType:"histogram_generic",className:"border-0 !p-0"}),!c&&0===l&&(0,i.jsx)(n7,{icon:"20-document",titleKey:"".concat(iO,".empty_state.title"),descriptionKey:"".concat(iO,".empty_state.description"),buttonKey:"".concat(iO,".empty_state.button")})]})}},{id:"payments",label:(0,E.t)([iC,"tabs","payments"]),component:function(){var e,t=i_((0,o.useState)(!1),2),r=t[0],n=t[1],a=i_((0,o.useState)(!1),2),s=a[0],l=a[1],c=n6(),u=(0,iv.D)(),d=u.prefix,f=u.suffix,m=(0,o.useMemo)(function(){return function(e){return nX.Y.paywalls.overview.revenue_growth(e)}},[]),p=(0,o.useMemo)(function(){return function(e){return nX.Y.paywalls.subscriptions.active_subscriptions_growth(e)}},[]),b=(0,es.useQuery)(["admin_dashboard.analytics.payments.total_revenue",c],function(){return nX.Y.paywalls.overview.total_revenue(c)}),h=b.data,y=b.isLoading,v=(0,es.useQuery)(["admin_dashboard.analytics.payments.churn_rate",c],function(){return nX.Y.paywalls.subscriptions.churn_rate(c)}),g=v.data,_=v.isLoading,x=(0,es.useQuery)(["admin_dashboard.analytics.payments.active_subscribers",c],function(){return nX.Y.paywalls.subscriptions.active_subscribers_count(c)}),j=x.data,w=x.isLoading,O=(0,es.useQuery)(["admin_dashboard.analytics.payments.conversion_rate",c],function(){return nX.Y.paywalls.conversions.conversion_rate(c)}),S=O.data,k=O.isLoading,N=function(e){return"".concat(e.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),"%")};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-4",children:[(0,i.jsx)(n4,{title:(0,E.t)([ix,"revenue"]),value:(e=(null!=h?h:0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"".concat(d).concat(e).concat(f)),isLoading:y,isSelected:r,onClick:function(){return n(!r)}}),(0,i.jsx)(n4,{title:(0,E.t)([ix,"churn_rate"]),value:N(null!=g?g:0),isLoading:_}),(0,i.jsx)(n4,{title:(0,E.t)([ix,"active_subscribers"]),value:null!=j?j:0,isLoading:w,isSelected:s,onClick:function(){return l(!s)}}),(0,i.jsx)(n4,{title:(0,E.t)([ix,"paywall_conversion_rate"]),value:N(null!=S?S:0),isLoading:k})]}),!y&&0!==h&&r&&(0,i.jsx)(nY.w,{title:"",fetchData:m,queryKey:"admin_dashboard.analytics.payments.revenue_growth",mapData:iy.oB,indexBy:"label",seriesKeys:["One-time","Subscription","Installments","Refunds"],rootLocale:["settings.analytics.dashboards.paywalls","overview","revenue_growth"],tooltipType:"histogram_generic",prefix:d,suffix:f,className:"border-0 !p-0"}),!w&&0!==j&&s&&(0,i.jsx)(nY.w,{title:"",fetchData:p,queryKey:"admin_dashboard.analytics.payments.active_subscriptions_growth",mapData:iy.tc,indexBy:"label",seriesKeys:["Net Change","Renewals","New","Churn"],rootLocale:["settings.analytics.dashboards.paywalls","subscriptions","active_subscriptions_growth"],tooltipType:"histogram_generic",className:"border-0 !p-0"}),!y&&0===h&&(0,i.jsx)(n7,{icon:"20-dollar",titleKey:"".concat(ix,".empty_state.title"),descriptionKey:"".concat(ix,".empty_state.description"),buttonKey:"".concat(ix,".empty_state.button")})]})}},{id:"discover",label:(0,E.t)([iC,"tabs","discover"]),component:function(){return(0,i.jsx)("div",{className:"text-light flex h-32 items-center justify-center",children:(0,i.jsx)(tT.Z.LabelMd,{children:(0,E.t)("admin_dashboard.analytics.coming_soon")})})}}],iI=function(){var e,t=(e=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return iP(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iP(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[(0,i.jsx)(tT.Z.TitleSm,{weight:"semibold",children:(0,E.t)([iC,"title"])}),(0,i.jsx)(is,{})]}),(0,i.jsxs)(n$.O.Group,{selectedIndex:r,onChange:n,children:[(0,i.jsx)(n$.O.List,{className:"flex gap-1",children:iA.map(function(e){return(0,i.jsx)(n$.O,{className:function(e){var t=e.selected;return(0,re.A)("rounded-full px-3 py-1.5 text-sm font-medium focus:outline-none",t?"bg-secondary text-dark":"text-light hover:text-default")},children:"discover"===e.id?(0,i.jsxs)("span",{className:"flex items-center gap-1",children:[e.label,(0,i.jsx)(D.JO,{type:"16-plus",size:16,className:"text-success"})]}):e.label},e.id)})}),(0,i.jsx)(n$.O.Panels,{className:"border-primary mt-4 rounded-lg border p-6",children:iA.map(function(e){return(0,i.jsx)(n$.O.Panel,{children:(0,i.jsx)(e.component,{})},e.id)})})]})]})},iT=function(){var e=(0,L.wh)().currentCommunityMember,t=null==e?void 0:e.first_name;return(0,i.jsx)("div",{className:"bg-primary h-full",children:(0,i.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsx)(tT.Z.TitleLg,{weight:"bold",children:(0,E.t)("admin_dashboard.greeting",{firstName:t})})}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)(nx.S,{variant:"compact"}),(0,i.jsx)(iI,{}),(0,i.jsx)(nJ,{}),(0,i.jsx)(nG,{}),(0,i.jsx)(nD,{}),(0,i.jsx)(nw._,{variant:"admin-dashboard"}),(0,i.jsx)(nj.t,{})]})]})})},iE=(0,eJ.u)(function(){return r.e("6156").then(r.bind(r,596769))}),iL=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iE,{})})},iD=(0,eJ.u)(function(){return r.e("4298").then(r.bind(r,2101))}),iM=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iD,{})})},iR=(0,eJ.u)(function(){return r.e("7125").then(r.bind(r,137661))}),iB=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iR,{})})},iz=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("1533"),r.e("3060")]).then(r.bind(r,138485))}),iF=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iz,{})})},iU=(0,eJ.u)(function(){return Promise.all([r.e("8761"),r.e("2620")]).then(r.bind(r,683079))}),iZ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iU,{})})},iG=(0,eJ.u)(function(){return r.e("2139").then(r.bind(r,680948))}),iq=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iG,{})})},iV=(0,eJ.u)(function(){return Promise.all([r.e("4565"),r.e("6912")]).then(r.bind(r,623709))}),iW=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iV,{})})},iH=r(824869),iQ=(0,eJ.u)(function(){return r.e("2772").then(r.bind(r,288762))}),iK=function(){return(0,iH.E)().isCommunityOnPlus?(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iQ,{})}):(0,i.jsx)(U.l_,{to:eI.L.plans.brandedApps})},iJ=(0,eJ.u)(function(){return Promise.all([r.e("8761"),r.e("8591")]).then(r.bind(r,187030))}),i$=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iJ,{})})},iX=(0,eJ.u)(function(){return Promise.all([r.e("4565"),r.e("2847"),r.e("1850")]).then(r.bind(r,483269))}),iY=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(iX,{})})},i0=(0,eJ.u)(function(){return r.e("639").then(r.bind(r,563760))}),i1=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(i0,{})})},i2=(0,eJ.u)(function(){return Promise.all([r.e("6372"),r.e("5476")]).then(r.bind(r,80539))}),i3=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(i2,{})})},i6=(0,eJ.u)(function(){return r.e("6219").then(r.bind(r,815348))}),i5=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(i6,{})})},i4=(0,eJ.u)(function(){return r.e("2985").then(r.bind(r,836545))}),i7=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(i4,{})})},i9=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("2942"),r.e("9458"),r.e("3232"),r.e("786"),r.e("1822"),r.e("6225")]).then(r.bind(r,396561))}),i8=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(i9,{})})},oe=(0,eJ.u)(function(){return r.e("5760").then(r.bind(r,430810))}),ot=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oe,{})})},or=(0,eJ.u)(function(){return r.e("7766").then(r.bind(r,984392))}),on=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(or,{})})},oi=(0,eJ.u)(function(){return r.e("2940").then(r.bind(r,879541))}),oo=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oi,{})})},oa=(0,eJ.u)(function(){return Promise.all([r.e("2281"),r.e("4297")]).then(r.bind(r,972448))}),os=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oa,{})})},ol=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("2475"),r.e("7913")]).then(r.bind(r,288504))}),oc=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ol,{})})},ou=(0,eJ.u)(function(){return r.e("4962").then(r.bind(r,540261))}),od=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ou,{})})},of=(0,eJ.u)(function(){return r.e("6867").then(r.bind(r,506976))}),om=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(of,{})})},op=(0,eJ.u)(function(){return Promise.all([r.e("4565"),r.e("2788"),r.e("5831")]).then(r.bind(r,288570))}),ob=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(op,{})})},oh=(0,eJ.u)(function(){return Promise.all([r.e("2788"),r.e("5239")]).then(r.bind(r,579532))}),oy=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oh,{})})},ov=(0,eJ.u)(function(){return Promise.all([r.e("2788"),r.e("5239")]).then(r.bind(r,613476))}),og=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(ov,{})})},o_=(0,eJ.u)(function(){return r.e("9585").then(r.bind(r,120207))}),ox=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o_,{})})},oj=(0,eJ.u)(function(){return Promise.all([r.e("8761"),r.e("1674")]).then(r.bind(r,781383))}),ow=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oj,{})})},oO=(0,eJ.u)(function(){return r.e("9306").then(r.bind(r,637857))}),oS=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oO,{})})},ok=function(){return(0,i.jsx)(U.l_,{to:"/members/onboarding"})},oN=(0,eJ.u)(function(){return Promise.all([r.e("7673"),r.e("6955")]).then(r.bind(r,636962))}),oP=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oN,{})})},oC=(0,eJ.u)(function(){return Promise.all([r.e("4452"),r.e("6648"),r.e("3613"),r.e("3082"),r.e("6937")]).then(r.bind(r,175280))}),oA=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oC,{})})},oI=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("8546")]).then(r.bind(r,93125))}),oT=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oI,{})})},oE=(0,eJ.u)(function(){return r.e("7423").then(r.bind(r,55953))}),oL=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oE,{})})},oD=(0,eJ.u)(function(){return Promise.all([r.e("4452"),r.e("8830"),r.e("3613"),r.e("3529"),r.e("3082"),r.e("4352")]).then(r.bind(r,243228))}),oM=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oD,{})})},oR=(0,eJ.u)(function(){return r.e("9034").then(r.bind(r,112707))}),oB=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oR,{})})},oz=(0,eJ.u)(function(){return Promise.all([r.e("2475"),r.e("6418")]).then(r.bind(r,72662))}),oF=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oz,{})})},oU=(0,eJ.u)(function(){return r.e("316").then(r.bind(r,579709))}),oZ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oU,{})})},oG=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("4295"),r.e("8834")]).then(r.bind(r,417926))}),oq=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oG,{})})},oV=(0,eJ.u)(function(){return r.e("1370").then(r.bind(r,846302))}),oW=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oV,{})})},oH=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("1822"),r.e("2444")]).then(r.bind(r,888572))}),oQ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oH,{})})},oK=(0,eJ.u)(function(){return Promise.all([r.e("4502"),r.e("140"),r.e("9427"),r.e("130")]).then(r.bind(r,320168))}),oJ=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oK,{})})},o$=(0,eJ.u)(function(){return r.e("2322").then(r.bind(r,710509))}),oX=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o$,{})})},oY=(0,eJ.u)(function(){return Promise.all([r.e("4565"),r.e("9735"),r.e("2015")]).then(r.bind(r,857104))}),o0=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(oY,{})})},o1=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("271"),r.e("9306"),r.e("9735"),r.e("7223"),r.e("2281"),r.e("3971")]).then(r.bind(r,745359))}),o2=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o1,{})})},o3=(0,eJ.u)(function(){return r.e("2791").then(r.bind(r,569595))}),o6=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o3,{})})},o5=(0,eJ.u)(function(){return r.e("3666").then(r.bind(r,982922))}),o4=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o5,{})})},o7=(0,eJ.u)(function(){return r.e("1022").then(r.bind(r,984736))}),o9=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o7,{})})},o8=(0,eJ.u)(function(){return r.e("6851").then(r.bind(r,341505))}),ae=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(o8,{})})},at=(0,eJ.u)(function(){return r.e("3408").then(r.bind(r,127262))}),ar=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(at,{})})},an=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("211"),r.e("2942"),r.e("6363"),r.e("4565"),r.e("4502"),r.e("9863")]).then(r.bind(r,552406))}),ai=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(an,{})})},ao=r(629268),aa=r(333398),as=r(738209),al=r(701248),ac=function(){return(0,i.jsxs)("div",{className:"relative flex flex-col items-center justify-center w-[72rem]",children:[(0,i.jsx)("span",{className:"text-[30.45rem] italic font-black tracking-[-1rem] select-none opacity-70",style:{WebkitTextStrokeWidth:"4px",WebkitTextStrokeColor:"#767676",mixBlendMode:"color-dodge"},children:2025}),(0,i.jsx)("div",{className:"absolute z-[-10] w-[908px] h-[633px] blur-[150px]",style:{background:"radial-gradient(ellipse at center top, #2127B7)"}})]})},au=r(549882),ad="eoy_recap_2025.sections.hero",af=function(e){var t,r,n,o,a=e.accentColor,s=void 0===a?"#2CAE6E":a,l=e.communityDetails,c=null!=(o=null!=(n=null!=(r=null!=(t=l.icon_url)?t:l.dark_icon_url)?r:l.logo_url)?n:l.dark_logo_url)?o:void 0;return(0,i.jsx)("div",{className:"relative min-h-[calc(100dvh-120px)] flex items-center justify-center overflow-hidden",children:(0,i.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center px-4 text-center gap-5",children:[(0,i.jsx)("div",{className:"absolute",children:(0,i.jsx)("div",{className:"relative top-[-22rem]",children:(0,i.jsx)(ac,{})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-6 max-w-4xl relative -translate-y-20",children:[c&&(0,i.jsx)(al.E.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.6,ease:[.16,1,.3,1],delay:.2},children:(0,i.jsx)(al.E.div,{animate:{y:[0,-6,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("img",{src:c,alt:(0,E.t)("community_logo_alt",{community_name:l.name}),className:"max-h-9 max-w-[14.375rem] object-cover",loading:"lazy",style:{borderColor:s}})})})}),(0,i.jsx)("h1",{className:"text-6xl md:text-7xl font-bold text-white leading-none",children:l.name}),(0,i.jsx)("p",{className:"text-xl md:text-2xl text-white max-w-3xl font-medium",children:(0,E.t)([ad,"description"])}),(0,i.jsx)("button",{type:"button",className:"px-8 py-3 text-lg font-semibold text-white rounded-full hover:shadow-lg transition-all duration-300 hover:scale-105",style:{backgroundColor:s},onClick:function(){return window.location.href=au.Fy.recap2025ForMembersAndNonMembers()},children:(0,E.t)([ad,"cta"])})]})]})})},am=r(710909),ap=r(243667),ab=function(e){var t,r,n,o=e.post;return o?(0,i.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[#4335474F] rounded-2xl translate-y-12 max-w-[80%] mx-auto"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-[#5C396A] rounded-2xl translate-y-6 max-w-[90%] mx-auto"}),(0,i.jsxs)("div",{className:"relative bg-[#49335A] rounded-2xl p-6 z-10 flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("h3",{className:"text-white text-base font-semibold leading-tight text-balance line-clamp-3",children:null!=(t=o.display_title)?t:"--"}),(0,i.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,i.jsx)("div",{className:"bg-[#F2F2F23D] h-3 w-full rounded-full"}),(0,i.jsx)("div",{className:"bg-[#F2F2F23D] h-3 w-1/3 rounded-full"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-white",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(D.JO,{type:"24-heart-outline",className:"size-4 text-white"}),(0,i.jsx)("span",{className:"text-base",children:(0,tn.dm)(null!=(r=o.likes)?r:0)})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(D.JO,{type:"24-comment",className:"size-4 text-white"}),(0,i.jsx)("span",{className:"text-base",children:(0,tn.dm)(null!=(n=o.comments)?n:0)})]})]})]})]}):null},ah=r(952723);let ay=r.p+"static/react/apps/EoyRecapApp/Sections/Engagement/assets/event-avatar-stack-9c1f458158cbc63b.png";var av=function(e){var t=e.event;if(!t)return null;var r=(0,ah.N)(t.date),n=r.dayOfMonth,o=r.shortMonthString,a=Math.max(0,t.rsvps-3);return(0,i.jsxs)("div",{className:"flex flex-col size-full justify-between gap-4 md:w-auto",children:[(0,i.jsx)("div",{className:"bg-[#0000004A] w-[20rem] h-[9.625rem] rounded-b-2xl hidden md:block"}),(0,i.jsxs)("a",{href:"".concat(window.location.origin).concat(t.show_path),target:"_blank",rel:"noopener noreferrer",className:"flex flex-col w-full h-auto md:w-[20rem] md:h-auto p-5 justify-center items-center shrink-0 rounded-2xl border border-[rgba(255,255,255,0.12)] bg-[#49335A] gap-4 cursor-pointer hover:bg-[#5a3f6a] transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-start gap-4 w-full",children:[(0,i.jsxs)("div",{className:"bg-[rgba(196,181,204,0.3)] flex p-1 px-3 shrink-0 flex-col items-center justify-center rounded-lg",children:[(0,i.jsx)("div",{className:"text-white text-center text-base font-bold",children:n}),(0,i.jsx)("div",{className:"text-white text-center text-xs font-medium uppercase",children:o})]}),(0,i.jsx)("div",{className:"flex-1 min-w-0",children:(0,i.jsx)("h3",{className:"text-white text-base font-semibold leading-tight text-balance line-clamp-3 mb-2",children:t.name})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"flex -space-x-2",children:(0,i.jsx)("img",{src:ay,alt:t.name,className:"w-18 border-2 border-[#49335A]",loading:"lazy"})}),a>0&&(0,i.jsxs)("span",{className:"text-white text-sm font-medium",children:["+",a]})]}),(0,i.jsx)("button",{type:"button",className:"bg-[rgba(196,181,204,0.3)] hover:bg-[rgba(196,181,204,0.4)] text-white px-6 py-2 rounded-full text-sm font-medium transition-colors",onClick:function(e){e.preventDefault(),e.stopPropagation(),window.open("".concat(window.location.origin).concat(t.show_path),"_blank","noopener,noreferrer")},children:(0,E.t)("events.rsvp.rsvp")})]})]}),(0,i.jsx)("div",{className:"bg-[#0000004A] w-[20rem] h-[9.625rem] rounded-t-2xl hidden md:block"})]})},ag="eoy_recap_2025.sections.engagement",a_=function(e){var t,r,n,o=e.data;return o?(0,i.jsxs)(am.W,{id:"content-and-experience",accentColor:"#984290",title:(0,E.t)([ag,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-events-hosted",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([ag,"bento_items.total_events_hosted"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center",children:(0,i.jsx)("p",{className:"text-[12rem] font-bold leading-[100%] tracking-[-8.135px] uppercase text-[#EC64CF] mt-4",children:(0,T.isNil)(o.total_events_hosted)?0:(0,tn.dm)(null!=(t=o.total_events_hosted)?t:0)})})]})}),(0,i.jsx)(am.W.Item,{id:"total-courses-launched",baseColSpan:1,baseRowSpan:3,enabled:(0,ap.y)(o.most_attended_event,{other:function(e){return null!=e}}),children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([ag,"bento_items.total_courses_launched"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center",children:(0,i.jsx)("p",{className:"text-[14rem] font-bold leading-[100%] tracking-[-8.135px] uppercase text-[#EC64CF] mt-4",children:(0,tn.dm)(null!=(r=o.total_courses_launched)?r:0)})})]})}),o.top_performing_post?(0,i.jsx)(am.W.Item,{id:"top-performing-post-or-content-piece",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([ag,"bento_items.top_performing_post_or_content_piece"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center mt-2",children:(0,i.jsx)(ab,{post:o.top_performing_post})})]})}):null,o.most_attended_event?(0,i.jsx)(am.W.Item,{id:"most-watched-or-attended-event",baseColSpan:2,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-col lg:flex-row items-center lg:justify-between size-full px-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold leading-none self-start pt-8 pb-4 md:pb-0",children:(0,i.jsx)(ri.w,{content:(0,E.t)([ag,"bento_items.most_watched_or_attended_event"])})}),(0,i.jsx)(av,{event:o.most_attended_event})]})}):null,o.most_discussed_topic?(0,i.jsx)(am.W.Item,{id:"most-discussed-course-or-topic",baseColSpan:1,baseRowSpan:2,enabled:(0,ap.y)(o.most_discussed_topic,{other:function(e){return null!=e}}),children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-start h-full overflow-hidden",children:[(0,i.jsx)("div",{className:"pl-8 py-8",children:(0,i.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([ag,"bento_items.most_discussed_course_or_topic"])})})}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5 justify-center pr-8",children:[(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full -mt-2"}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full"}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-6 md:py-3 bg-[#EC64CF] rounded-full flex items-center justify-center shrink-0 w-full h-[2rem] md:h-[3rem]",children:(0,i.jsx)("p",{className:"text-base leading-none font-bold text-white whitespace-nowrap",children:(0,T.truncate)(null!=(n=o.most_discussed_topic)?n:"",{length:30})})}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full"}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full"}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full"}),(0,i.jsx)("div",{className:"px-4 py-2 md:px-8 md:py-3 bg-[#49335A] rounded-full h-[2rem] md:h-[3rem] shrink-0 w-full"})]})]})}):null]}):null};let ax=r.p+"static/react/apps/EoyRecapApp/Sections/Community/assets/members-avatars-5a872218305d9ea0.png",aj=r.p+"static/react/apps/EoyRecapApp/Sections/Community/assets/members-joined-c1353a64752fba58.png",aw=r.p+"static/react/apps/EoyRecapApp/Sections/Community/assets/member-growth-rate-7e0ae42fd9f7dd48.png",aO=r.p+"static/react/apps/EoyRecapApp/Sections/Community/assets/website-visits-growth-c0e811e24a948945.png";var aS=r(182691),ak=r.n(aS),aN="eoy_recap_2025.sections.community",aP=function(e){var t,r,n,o,a=e.data;return a?(0,i.jsxs)(am.W,{id:"community-growth",accentColor:"#24287E",title:(0,E.t)([aN,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-posts",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(r=a.total_members)?r:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none tracking-[-0.25px] text-white mt-2",children:(0,E.t)([aN,"bento_items.total_members"])})]}),(0,i.jsx)("div",{className:"size-full flex items-end",children:(0,i.jsx)("img",{src:ax,alt:(0,E.t)([aN,"bento_items.total_members"]),loading:"lazy"})})]})}),(0,i.jsx)(am.W.Item,{id:"total-courses-launched",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"relative flex flex-col h-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(n=a.website_visits_growth)?n:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none tracking-[-0.25px] text-white mt-2",children:(0,E.t)([aN,"bento_items.website_visits_and_growth"])})]}),(0,i.jsx)("img",{src:aO,alt:(0,E.t)([aN,"bento_items.website_visits_and_growth"]),loading:"lazy",className:"absolute bottom-0 right-0 opacity-90"})]})}),(null==(t=a.top_sources)?void 0:t.length)>0&&(0,i.jsx)(am.W.Item,{id:"top-sources",baseColSpan:1,baseRowSpan:3,enabled:(0,ap.y)(a.top_sources,{array:function(e){return e.length>0}}),children:(0,i.jsxs)("div",{className:"flex flex-col gap-14 h-full p-8 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aN,"bento_items.top_sources"])})}),!ak()(a.top_sources)&&(0,i.jsx)("div",{className:"flex-1 min-h-0 flex flex-col gap-4 items-start justify-start",children:a.top_sources.slice(0,5).map(function(e,t){return(0,i.jsx)("div",{className:"flex px-6 py-4 justify-center items-center rounded-full bg-[rgba(0,0,0,0.21)] max-w-full",children:(0,i.jsx)("p",{className:"text-lg font-medium leading-none text-white truncate",title:null!=e?e:"--",children:null!=e?e:"--"})},null!=e?e:"source-".concat(t))})})]})}),(0,i.jsx)(am.W.Item,{id:"member-growth-rate",baseColSpan:2,baseRowSpan:2,enabled:(0,ap.y)(a.member_growth_rate,{number:function(e){return e>0}}),children:(0,i.jsxs)("div",{className:"flex flex-row justify-between size-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8 min-w-fit",children:[(0,i.jsxs)("p",{className:"text-6xl font-bold leading-none",children:[a.member_growth_rate,"%"]}),(0,i.jsx)("p",{className:"text-base font-medium leading-none tracking-[-0.25px] text-white mt-2",children:(0,E.t)([aN,"bento_items.member_growth_rate"])})]}),(0,i.jsx)("img",{src:aw,alt:(0,E.t)([aN,"bento_items.member_growth_rate"]),loading:"lazy",className:"opacity-90 size-full object-cover absolute bottom-0 right-0 rounded-2xl md:relative"})]})}),(0,i.jsx)(am.W.Item,{id:"new-members-joined",baseColSpan:1,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-col h-full items-start justify-between p-8",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(o=a.new_members_joined)?o:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none tracking-[-0.25px] text-white mt-2",children:(0,E.t)([aN,"bento_items.new_members_joined"])})]}),(0,i.jsx)("img",{src:aj,alt:(0,E.t)([aN,"bento_items.new_members_joined"]),loading:"lazy",className:"size-36 mx-auto mt-10"})]})})]}):null},aC=r(282406),aA=["eoy-recap","metrics","2025","admin"],aI=function(){var e=(0,es.useQuery)(aA,function(){return(0,nT.UT)(ex.av.settings.recap.get({params:{admin_view:!0}}))},{staleTime:12096e5,cacheTime:12096e5}),t=e.data,r=e.isLoading,n=e.error,i=e.refetch;return{metrics:null==t?void 0:t.metrics,communityDetails:null==t?void 0:t.community_details,communityMember:null==t?void 0:t.community_member,isMetricsLoading:r,errorFetchingMetrics:n,refetchMetrics:i}},aT=function(e){return"admin"===e&&document.getElementById("panel")||document.documentElement},aE=function(e,t){(0,o.useEffect)(function(){var r=aT(e);if(r)return r.style.scrollSnapType="y mandatory",r.style.scrollBehavior="smooth",(null==t?void 0:t.scrollPaddingTop)&&(r.style.scrollPaddingTop=t.scrollPaddingTop),function(){var r=aT(e);r&&(r.style.scrollSnapType="",r.style.scrollBehavior="",(null==t?void 0:t.scrollPaddingTop)&&(r.style.scrollPaddingTop=""))}},[e,null==t?void 0:t.scrollPaddingTop])};let aL=r.p+"static/react/apps/EoyRecapApp/Sections/Reach/assets/total-emails-sent-a21818f7765b19ae.png",aD=r.p+"static/react/apps/EoyRecapApp/Sections/Reach/assets/subscribers-growth-c1fb0005b65e7fd2.png";var aM="eoy_recap_2025.sections.reach",aR=function(e){var t,r,n=e.email;return n?(0,i.jsxs)("div",{className:"relative mx-auto w-full",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[#686068] rounded-2xl translate-y-8 scale-[0.9]"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-[#FFFFFF14] rounded-2xl translate-y-16 scale-[0.80]"}),(0,i.jsx)("div",{className:"relative bg-[#51434C] rounded-2xl p-6 shadow-2xl z-10 flex flex-col gap-4",children:(0,i.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"text-white/50 text-sm font-semibold leading-none tracking-tight",children:(0,E.t)([aM,"bento_items.email_subject"])}),(0,i.jsx)("h3",{className:"text-gray-50 text-base font-semibold leading-none tracking-tight text-balance line-clamp-2",children:n.subject})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"inline-flex p-3 flex-col justify-center items-start gap-[9px] rounded-xl border border-white/[0.32] bg-black/10",children:[(0,i.jsx)("p",{className:"text-white/50 text-xs font-medium leading-none tracking-tight",children:(0,E.t)([aM,"bento_items.open_rate"])}),(0,i.jsxs)("p",{className:"text-white text-2xl font-bold leading-none",children:[(0,tn.dm)(null!=(t=n.open_rate)?t:0),"%"]})]}),(0,i.jsxs)("div",{className:"inline-flex p-3 flex-col justify-center items-start gap-[9px] rounded-xl border border-white/[0.32] bg-black/10",children:[(0,i.jsx)("p",{className:"text-white/50 text-xs font-medium leading-none tracking-tight",children:(0,E.t)([aM,"bento_items.click_rate"])}),(0,i.jsxs)("p",{className:"text-white text-2xl font-bold leading-none",children:[(0,tn.dm)(null!=(r=n.click_rate)?r:0),"%"]})]})]})]})})]}):null},aB="eoy_recap_2025.sections.reach",az=function(e){var t,r=e.data;return r?(0,i.jsxs)(am.W,{id:"email-highlights",accentColor:"#EAA620",title:(0,E.t)([aB,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-emails-sent",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(t=r.total_emails_sent)?t:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,E.t)([aB,"bento_items.emails_sent"])})]}),(0,i.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden rounded-b-2xl",children:(0,i.jsx)("img",{src:aL,alt:(0,E.t)([aB,"bento_items.total_events_hosted"]),className:"size-full object-cover",loading:"lazy"})})]})}),(0,i.jsx)(am.W.Item,{id:"average-open-or-click-rates",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aB,"bento_items.average_open_or_click_rates"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center",children:(0,i.jsxs)("p",{className:"text-[6.375rem] font-bold leading-none uppercase text-[#EAA620] mt-4",children:[r.click_rates,"%"]})})]})}),(0,i.jsx)(am.W.Item,{id:"most-engaging-email",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aB,"bento_items.most_engaging_email"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden flex items-center justify-center w-full",children:(0,i.jsx)(aR,{email:r.most_engaged_email})})]})}),(0,i.jsx)(am.W.Item,{id:"subscriber-growth",baseColSpan:3,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-row justify-between size-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8 min-w-fit",children:[(0,i.jsxs)("p",{className:"text-6xl font-bold leading-none",children:[r.subscribers_growth,"%"]}),(0,i.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,E.t)([aB,"bento_items.subscriber_growth"])})]}),(0,i.jsx)("img",{src:aD,alt:(0,E.t)([aB,"bento_items.subscriber_growth"]),loading:"lazy",className:"opacity-90 size-full object-cover absolute bottom-0 right-0 rounded-2xl md:relative"})]})})]}):null},aF=function(e){var t=e.title;return(0,i.jsxs)("div",{className:"relative w-full max-w-md mt-2",children:[(0,i.jsx)("div",{className:"absolute inset-0 translate-y-6 rounded-2xl bg-white/15 scale-90 z-10"}),(0,i.jsx)("div",{className:"absolute inset-0 translate-y-12 rounded-xl bg-white/[0.04] scale-75 z-0"}),(0,i.jsxs)("div",{className:"relative z-20 inline-flex h-auto flex-col items-start justify-center gap-12 rounded-xl border border-[rgba(228,231,235,0.12)] bg-[#314A52] p-5 w-full",children:[(0,i.jsx)("div",{className:"flex size-12 shrink-0 items-center justify-center rounded-full bg-[#0FBD41] p-4",children:(0,i.jsx)("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M10.8913 1.83244C10.8913 0.878403 9.66035 0.49511 9.11871 1.28048L2.47043 10.9205C2.02563 11.5654 2.48731 12.4447 3.27077 12.4447H7.78017V16.8347C7.78017 17.7887 9.0111 18.172 9.55274 17.3867L16.201 7.74664C16.6458 7.10169 16.1841 6.22246 15.4007 6.22246H10.8913V1.83244Z",fill:"white"})})}),(0,i.jsx)("h3",{className:"text-white text-base font-semibold line-clamp-3 leading-tight",children:t})]})]})},aU="eoy_recap_2025.sections.efficiency",aZ=function(e){var t,r,n=e.data;return n?(0,i.jsxs)(am.W,{id:"automation-and-efficiency",accentColor:"#06892B",title:(0,E.t)([aU,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-workflows-run",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aU,"bento_items.total_workflows_run"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center",children:(0,i.jsx)("p",{className:"text-[6rem] font-bold leading-[100%] tracking-[-2.135px] uppercase text-[#0FBD41] mt-4",children:(0,tn.dm)(null!=(t=n.total_workflows_run)?t:0)})})]})}),(0,i.jsx)(am.W.Item,{id:"most-used-automation",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-start gap-20 h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aU,"bento_items.most_used_automation"])})}),(0,i.jsx)(aF,{title:n.most_used_automation})]})}),(0,i.jsx)(am.W.Item,{id:"minutes-saved",baseColSpan:1,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-col justify-start items-center size-full overflow-hidden p-8",children:[(0,i.jsx)("p",{className:"text-center text-4xl font-bold leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aU,"bento_items.tasks_saved_time_saved_estimated"])})}),(0,i.jsxs)("div",{className:"flex-1 min-h-0 overflow-hidden flex flex-col items-center justify-center mt-10",children:[(0,i.jsx)("p",{className:"text-8xl font-bold leading-none uppercase text-[#0FBD41]",children:(0,tn.dm)(null!=(r=n.minutes_saved)?r:0)}),(0,i.jsx)("p",{className:"text-center text-2xl md:text-4xl font-bold leading-none text-[#0FBD41]",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aU,"bento_items.minutes_saved_per_month"])})})]})]})})]}):null};let aG=r.p+"static/react/apps/EoyRecapApp/Sections/Impact/assets/revenue-growth-yoy-a960bbd65f15b3cb.png";function aq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var aV="eoy_recap_2025.sections.impact.bento_items.months",aW=function(e){for(var t=[(0,E.t)([aV,"january"]),(0,E.t)([aV,"february"]),(0,E.t)([aV,"march"]),(0,E.t)([aV,"april"]),(0,E.t)([aV,"may"]),(0,E.t)([aV,"june"]),(0,E.t)([aV,"july"]),(0,E.t)([aV,"august"]),(0,E.t)([aV,"september"]),(0,E.t)([aV,"october"]),(0,E.t)([aV,"november"]),(0,E.t)([aV,"december"])],r=[],n=e-1,i=0;i<12;i++){var o=(n-6+i+12)%12,a=o+1;r.push({name:t[o],number:a})}return r},aH=function(e){var t,r=e.month,n=(0,o.useMemo)(function(){var e=/-(\d{2})$/.exec(r.month);return e?parseInt(e[1],10):1},[r.month]),a=(0,o.useMemo)(function(){return aW(n)},[n]),s=(0,o.useRef)(null),l=(0,o.useRef)([]),c=(t=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return aq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aq(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1];return(0,o.useEffect)(function(){var e=requestAnimationFrame(function(){if(s.current){var e=s.current.clientHeight,t=l.current[6];t&&d(e/2-(t.offsetTop+t.clientHeight/2))}});return function(){return cancelAnimationFrame(e)}},[n]),(0,i.jsx)("div",{ref:s,className:"flex flex-col gap-0 h-full overflow-hidden relative",children:(0,i.jsx)(al.E.div,{className:"flex flex-col gap-0",animate:{y:u},transition:{duration:.5,ease:"easeOut"},children:a.map(function(e,t){var r=e.name,o=e.number,a=o===n;return(0,i.jsx)(al.E.div,{ref:function(e){l.current[t]=e},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1*t,ease:"easeOut"},children:(0,i.jsx)("span",{className:(0,re.A)("block font-sans text-5xl md:text-[3.5rem] font-bold leading-none tracking-[-0.5px] transition-colors duration-300 ease-in-out",a?"text-white":"text-[#B56B3A]"),children:r})},"".concat(r,"-").concat(o))})})})},aQ=function(e){var t,r,n=e.product;return n?(0,i.jsxs)("div",{className:"relative w-full max-w-md mx-auto mt-10",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-[#726674] rounded-2xl translate-y-8 scale-[0.9]"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-white/10 rounded-2xl translate-y-16 scale-[0.80]"}),(0,i.jsxs)("div",{className:"relative bg-[#645B69] rounded-2xl p-3 shadow-2xl z-10 flex flex-col gap-4",children:[(0,i.jsx)("div",{className:"bg-white/20 h-40 w-full rounded-2xl"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("h3",{className:"text-white text-base font-semibold leading-none text-balance line-clamp-3",children:n.Paywall}),(0,i.jsxs)("p",{className:"flex items-center justify-between w-full",children:[(0,i.jsxs)("p",{className:"text-white text-sm font-medium leading-none tracking-[-0.25px]",children:["$",(0,tn.dm)(null!=(t=n.Amount)?t:0)]}),(0,i.jsxs)("p",{className:"text-white text-sm font-medium leading-none tracking-[-0.25px]",children:["#",(0,tn.dm)(null!=(r=n.Count)?r:0)]})]})]})]})]}):null},aK="eoy_recap_2025.sections.impact",aJ=function(e){var t,r,n,o,a=e.data,s=(0,L.wh)().currentCommunity,l=null==s||null==(r=s.payment_processor)||null==(t=r.currency)?void 0:t.symbol;return a?(0,i.jsxs)(am.W,{id:"business-impact",accentColor:"#FF8D46",title:(0,E.t)([aK,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-revenue-earned",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full p-8",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aK,"bento_items.total_revenue_earned"])})}),(0,i.jsx)("div",{className:"flex-1 min-h-0 flex items-center justify-center",children:(0,i.jsx)("p",{className:"text-[6rem] font-bold leading-[100%] tracking-[-8.135px] uppercase text-[#FF8D46] mt-4",children:"".concat(null!=l?l:"$").concat((0,tn.dm)(null!=(n=a.total_revenue_earned)?n:0))})})]})}),(0,i.jsx)(am.W.Item,{id:"revenue-growth-year-over-year",baseColSpan:1,baseRowSpan:3,enabled:(0,ap.y)(null==a?void 0:a.revenue_growth_year_over_year,{number:function(e){return e>0}}),children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8",children:[(0,i.jsxs)("p",{className:"text-6xl font-bold leading-none",children:[(0,tn.dm)(null!=(o=null==a?void 0:a.revenue_growth_year_over_year)?o:0),"%"]}),(0,i.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,E.t)([aK,"bento_items.revenue_growth_yoy"])})]}),(0,i.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden rounded-b-2xl",children:(0,i.jsx)("img",{src:aG,alt:(0,E.t)([aK,"bento_items.revenue_growth_yoy"]),className:"size-full object-cover",loading:"lazy"})})]})}),(0,i.jsx)(am.W.Item,{id:"best-selling-product",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden p-8 gap-4",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aK,"bento_items.best_selling_product_or_course"])})}),(0,i.jsx)(aQ,{product:a.best_selling_product})]})}),(0,i.jsx)(am.W.Item,{id:"highest-earning-month",baseColSpan:3,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-row justify-between size-full overflow-hidden",children:[(0,i.jsx)("div",{className:"p-8",children:(0,i.jsx)("p",{className:"font-sans text-4xl font-bold leading-none text-white",children:(0,i.jsx)(ri.w,{content:(0,E.t)([aK,"bento_items.highest_earning_month"])})})}),(0,i.jsx)("div",{className:"pr-8",children:(0,i.jsx)(aH,{month:a.highest_earning_month})})]})})]}):null};let a$=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/total-posts-fadbb8bda27d6672.png",aX=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/total-likes-250afb229ed7d4a9.png",aY=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/total-comments-0f8fdb7c8d8685e3.png";var a0=r(592127);let a1=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/first-f7f9a9cddcf4fa85.png",a2=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/second-1b59b9562e3ce6e6.png",a3=r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/third-d2d0223d6090305a.png";var a6={1:a1,2:a2,3:a3,4:r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/fourth-a724463b626471f1.png",5:r.p+"static/react/apps/EoyRecapApp/Sections/Members/assets/fifth-a87896abdf25bcab.png"},a5="eoy_recap_2025.sections.members",a4=function(e){var t=e.contributors;return ak()(t)?null:(0,i.jsx)("div",{className:"flex flex-1 min-h-0 flex-col gap-3 items-center justify-center size-full relative mt-10",children:t.map(function(e,t){var r=a6[t+1],n=e.full_name||"--";return(0,i.jsx)("div",{className:"bg-[#3A276E] rounded-2xl py-4 px-3 z-50 w-72",children:(0,i.jsx)("div",{className:"flex flex-row gap-1.5",children:(0,i.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(0,i.jsx)("img",{src:r,alt:(0,E.t)([a5,"bento_items.top_contributor_or_most_active_member"]),className:"size-8 mr-1",loading:"lazy"}),e.user_avatar_url?(0,i.jsx)("img",{src:e.user_avatar_url,className:"size-8 rounded-full object-cover",loading:"lazy",alt:(0,E.t)([a5,"bento_items.top_contributor_or_most_active_member"])}):(0,i.jsx)("div",{className:"flex items-center justify-center size-8 rounded-full bg-[#271c46] text-white text-xs font-medium",children:(0,a0.Q)(e.full_name)}),(0,i.jsx)("p",{className:"text-left text-base font-semibold tracking-[-0.826px] text-white line-clamp-2 truncate",children:n})]})})},e.full_name)})})},a7="eoy_recap_2025.sections.members",a9=function(e){var t,r,n,o=e.data;return o?(0,i.jsxs)(am.W,{id:"member-engagement",accentColor:"#3F107B",title:(0,E.t)([a7,"title"]),children:[(0,i.jsx)(am.W.Item,{id:"total-posts",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-8 pt-8",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(t=o.total_posts)?t:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none tracking-[-0.25px] text-white mt-2",children:(0,E.t)([a7,"bento_items.total_post_created"])})]}),(0,i.jsx)("div",{className:"size-full flex items-end",children:(0,i.jsx)("img",{src:a$,alt:(0,E.t)([a7,"bento_items.total_post_created"]),loading:"lazy"})})]})}),(0,i.jsx)(am.W.Item,{id:"total-contributors",baseColSpan:1,baseRowSpan:3,children:(0,i.jsxs)("div",{className:"relative flex flex-col h-full overflow-hidden p-8",children:[(0,i.jsx)("p",{className:"text-center text-4xl font-bold text-white leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([a7,"bento_items.top_contributor_or_most_active_member"])})}),(0,i.jsx)(a4,{contributors:o.top_contributors})]})}),(0,i.jsx)(am.W.Item,{id:"percentage-of-active-users",baseColSpan:1,baseRowSpan:3,enabled:(0,ap.y)(o.percentage_of_active_users,{number:function(e){return e>0}}),children:(0,i.jsxs)("div",{className:"flex flex-col gap-4 h-full p-8 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-4xl font-bold text-center leading-none",children:(0,i.jsx)(ri.w,{content:(0,E.t)([a7,"bento_items.percentage_of_active_users"])})}),(0,i.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,i.jsxs)("p",{className:"text-9xl font-bold leading-none uppercase text-[#A658FF]",children:[Math.round(o.percentage_of_active_users),"%"]})})]})}),(0,i.jsx)(am.W.Item,{id:"total-comments-created",baseColSpan:2,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between size-full overflow-hidden p-8 gap-4",children:[(0,i.jsxs)("div",{className:"h-1/3 md:w-1/3 md:h-full",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(r=o.total_comments)?r:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,E.t)([a7,"bento_items.total_comments_created"])})]}),(0,i.jsx)("div",{className:"h-2/3 md:w-2/3 md:h-full",children:(0,i.jsx)("img",{src:aY,alt:(0,E.t)([a7,"bento_items.total_comments_created"]),loading:"lazy",className:"object-cover size-full"})})]})}),(0,i.jsx)(am.W.Item,{id:"new-members-joined",baseColSpan:1,baseRowSpan:2,children:(0,i.jsxs)("div",{className:"flex flex-col h-full items-start justify-between relative overflow-hidden rounded-2xl",children:[(0,i.jsxs)("div",{className:"flex flex-col p-8",children:[(0,i.jsx)("p",{className:"text-6xl font-bold leading-none",children:(0,tn.dm)(null!=(n=o.total_likes_given)?n:0)}),(0,i.jsx)("p",{className:"text-base font-medium leading-none text-white mt-2",children:(0,E.t)([a7,"bento_items.total_likes_given"])})]}),(0,i.jsx)("img",{src:aX,alt:(0,E.t)([a7,"bento_items.new_members_joined"]),loading:"lazy",className:"w-[17rem] h-auto object-cover absolute top-0 -right-12"})]})})]}):null},a8=r(447455),se=function(){var e,t,r,n=aI(),o=n.metrics,a=n.isMetricsLoading,s=n.communityDetails;aE(aC.d.ADMIN);var l=(0,tc.pm)();if(a)return(0,i.jsx)("div",{className:"h-screen w-screen flex items-center justify-center",children:(0,i.jsx)(ts.a,{})});if(!o||!s)return l.error("Metrics or community details not found"),null;var c=(0,a8.C)(s.brand_color);return(0,i.jsxs)("main",{className:"relative bg-[#0F0F35] overflow-x-hidden",children:[(0,i.jsx)(as.D,{}),(0,i.jsx)(aa.D,{}),(0,i.jsx)("div",{className:"snap-start min-h-[calc(100dvh-120px)]",children:(0,i.jsx)(af,{communityDetails:s,accentColor:c})}),(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(aP,{data:null==o?void 0:o.community_growth})}),(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(a9,{data:null==o?void 0:o.trending})}),(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(a_,{data:null==o?void 0:o.key_moments})}),(null==o||null==(e=o.email_highlights)?void 0:e.total_emails_sent)>0&&(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(az,{data:null==o?void 0:o.email_highlights})}),(null==o||null==(t=o.people)?void 0:t.total_revenue_earned)>0&&(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(aJ,{data:null==o?void 0:o.people})}),(null==o||null==(r=o.automation_efficiency)?void 0:r.total_workflows_run)>0&&(0,i.jsx)("div",{className:"snap-start min-h-screen",children:(0,i.jsx)(aZ,{data:null==o?void 0:o.automation_efficiency})})]})},st=r(618361),sr=r(888621),sn={enter:"transition-all duration-500 ease-out",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition-all duration-300 ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4"},si=function(){var e,t,r=aI(),n=r.metrics,a=r.isMetricsLoading,s=(0,o.useMemo)(function(){var e,t,r,i,o,a;return{"email-highlights":(null!=(i=null==n||null==(e=n.email_highlights)?void 0:e.total_emails_sent)?i:0)>0,"business-impact":(null!=(o=null==n||null==(t=n.people)?void 0:t.total_revenue_earned)?o:0)>0,"automation-and-efficiency":(null!=(a=null==n||null==(r=n.automation_efficiency)?void 0:r.total_workflows_run)?a:0)>0}},[n]);return(0,i.jsxs)("div",{className:"relative h-screen w-screen",children:[(0,i.jsx)(st.c,{}),(0,i.jsx)(sr.k,{scrollContext:aC.d.ADMIN,viewType:aC.d.ADMIN,isLoading:a,thresholds:s}),(0,i.jsx)(q.u,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:!0},sn),t=t={children:(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(se,{})})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))]})},so=function(e){var t=e.isPaywallTaxAvailable,r=e.isAffiliatesEnabled,n=void 0!==r&&r,o=e.isWorkflowsEnabled,a=e.isPaywallPaymentSettingsAvailable,s=e.isSitesEnabled,l=e.isConnectCoreEnabled,c=void 0!==l&&l;return eS(),(0,i.jsxs)(U.rs,{children:[c&&(0,i.jsx)(ao.i,{component:ob,path:"/settings/audience/connect"}),(0,i.jsx)(ao.i,{component:e1,path:"/settings/branded_apps_builder_ui",exact:!0}),(0,i.jsx)(ao.i,{component:eY,path:"/settings/branded_apps_builder_landing_page",exact:!0}),(0,i.jsx)(ao.i,{component:oo,path:"/settings",exact:!0}),(0,i.jsx)(ao.i,{component:iT,path:"/settings/dashboard",exact:!0}),(0,i.jsx)(ao.i,{component:i3,path:"/settings/custom_domain",exact:!0}),(0,i.jsx)(ao.i,{component:os,path:"/settings/home",exact:!0}),(0,i.jsx)(ao.i,{component:ok,path:"/settings/onboarding/:tab?",exact:!0}),(0,i.jsx)(ao.i,{component:iY,path:"/settings/community_ai",exact:!0}),(0,i.jsx)(ao.i,{component:si,path:"/settings/recap-2025",exact:!0}),(0,i.jsx)(ao.i,{component:o4,path:["/settings/spaces","/settings/spaces/new","/settings/spaces/new_space_group","/settings/spaces/:slug/edit"],exact:!0}),(0,i.jsx)(ao.i,{component:ae,path:"/settings/topics",exact:!0}),(0,i.jsx)(ao.i,{component:oW,path:"/settings/posts/bulk_actions",exact:!0}),(0,i.jsx)(ao.i,{component:e5,path:"/settings/files",exact:!0}),(0,i.jsx)(ao.i,{component:i$,path:"/settings/code_snippets",exact:!0}),(0,i.jsx)(ao.i,{component:ar,path:"/settings/weekly_digest",exact:!0}),(0,i.jsx)(ao.i,{component:e3,path:"/settings/mobile_app",exact:!0}),c?(0,i.jsx)(ao.i,{component:oy,path:"/settings/connect",exact:!0}):(0,i.jsx)(ao.i,{component:og,path:"/settings/messaging",exact:!0}),(0,i.jsx)(ao.i,{component:oS,path:"/settings/navigation",exact:!0}),(0,i.jsx)(ao.i,{component:oX,path:"/settings/sso",exact:!0}),(0,i.jsx)(ao.i,{component:ot,path:"/settings/embed",exact:!0}),(0,i.jsx)(ao.i,{component:oq,path:"/settings/posts",exact:!0}),(0,i.jsx)(U.AW,{component:oZ,path:"/settings/plans",exact:!0}),(0,i.jsx)(U.AW,{component:iq,path:"/settings/billing"}),(0,i.jsx)(U.AW,{component:iW,path:"/settings/branded_apps"}),(0,i.jsx)(ao.i,{component:iZ,path:"/settings/api"}),(0,i.jsx)(ao.i,{component:ox,path:"/settings/moderation",exact:!0}),(0,i.jsx)(ao.i,{component:ow,path:"/settings/moderation/edit",exact:!0}),(0,i.jsx)(ao.i,{component:oT,path:"/settings/paywall_groups",exact:!0}),void 0!==a&&a&&(0,i.jsx)(ao.i,{component:oL,path:eI.L.paywalls.payment_settings,exact:!0}),void 0!==t&&t&&(0,i.jsx)(ao.i,{component:oB,path:"/settings/paywall_tax_settings",exact:!0}),(0,i.jsx)(ao.i,{component:oF,path:"/settings/paywalls",exact:!1}),n&&(0,i.jsx)(ao.i,{component:iM,path:"/settings/affiliates_directory",exact:!0}),n&&(0,i.jsx)(ao.i,{component:iL,path:"/settings/affiliates_commissions",exact:!0}),n&&(0,i.jsx)(ao.i,{component:iB,path:"/settings/affiliates_settings",exact:!0}),(0,i.jsx)(ao.i,{component:od,path:"/settings/member_billing"}),(0,i.jsx)(ao.i,{component:oM,path:"/settings/paywall_subscriptions",exact:!1}),(0,i.jsx)(ao.i,{component:i7,path:"/settings/developers",exact:!0}),(0,i.jsx)(ao.i,{component:iK,path:"/settings/plus",exact:!0}),(0,i.jsx)(ao.i,{component:eK.s,path:"/settings/plus/lite",exact:!0}),(0,i.jsx)(ao.i,{component:oQ,path:eI.L.plus.push_notifications}),(0,i.jsx)(ao.i,{component:te,path:"/settings/plus/billing",exact:!0}),(0,i.jsx)(ao.i,{component:oA,path:"/settings/paywall_charges",exact:!1}),(0,i.jsx)(ao.i,{component:oP,path:"/settings/paywall_bulk_logs",exact:!0}),(0,i.jsx)(ao.i,{component:om,path:"/settings/member_tags",exact:!1}),(0,i.jsx)(ao.i,{component:i1,path:eI.L.paywalls.coupons}),(0,i.jsx)(ao.i,{component:o9,path:"/settings/theme",exact:!0}),(0,i.jsx)(ao.i,{component:r6,path:["/settings/ai-inbox/conversations/:id","/settings/ai-inbox"],exact:!0}),(0,i.jsx)(ao.i,{component:r0,path:"/settings/ai-agents/knowledge",exact:!0}),(0,i.jsx)(ao.i,{component:t5,path:"/settings/ai-agents/agents",exact:!0}),(0,i.jsx)(U.AW,{component:oc,path:["/settings/live_streams/:id","/settings/live_streams"],exact:!0}),(0,i.jsx)(ao.i,{component:np,path:"/audience/manage",exact:!0}),(0,i.jsx)(ao.i,{component:n_,path:eI.L.members.access_groups}),(0,i.jsx)(ao.i,{component:nf,path:"/members/invite"}),(0,i.jsx)(ao.i,{path:"/members/edit/:id",exact:!1,render:function(){return(0,i.jsx)(ni,{pageTitle:(0,E.t)("settings.edit_member.title")})}}),(0,i.jsx)(ao.i,{component:na,path:"/members/invitation_links"}),(0,i.jsx)(ao.i,{component:nl,path:"/members/invitation_links/:id/edit",exact:!0}),(0,i.jsx)(ao.i,{component:nu,path:"/members/invitation_links/new",exact:!0}),(0,i.jsx)(ao.i,{path:"/members/invitation_links/:action",exact:!0,render:function(){return(0,i.jsx)(ni,{pageTitle:(0,E.t)("settings.invitation_links.title")})}}),(0,i.jsx)(ao.i,{path:"/members/invitation_links/:id/:action",exact:!0,render:function(){return(0,i.jsx)(ni,{pageTitle:(0,E.t)("settings.invitation_links.title")})}}),(0,i.jsx)(ao.i,{component:nh,path:"/members/onboarding/:tab?",exact:!0}),(0,i.jsx)(ao.i,{path:"/members/bulk_import",exact:!0,render:function(){return(0,i.jsx)(ni,{pageTitle:(0,E.t)("settings.import_members.title")})}}),(0,i.jsx)(ao.i,{component:nr,path:"/settings/members/bulk_import_tasks",exact:!0}),(0,i.jsx)(ao.i,{component:nv,path:"/members/profile_fields"}),(0,i.jsx)(ao.i,{component:ne,path:"/settings/members/activity_logs",exact:!0}),(0,i.jsx)(ao.i,{component:r9,path:"/settings/legal",exact:!0}),(0,i.jsx)(ao.i,{component:r4,path:"/settings/discover",exact:!0}),(0,i.jsx)(ao.i,{component:iF,path:"/settings/analytics/:action?"}),(0,i.jsx)(ao.i,{component:on,path:"/settings/gamification"}),void 0!==o&&o&&(0,i.jsx)(ao.i,{component:ai,path:"/settings/workflows"}),(0,i.jsx)(ao.i,{component:oJ,path:eI.L.members.segments}),(0,i.jsx)(ao.i,{component:i8,path:"/settings/emails"}),void 0!==s&&s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ao.i,{exact:!0,component:o0,path:"/settings/pages"}),(0,i.jsx)(ao.i,{component:o2,path:"/settings/pages/edit/:id"}),(0,i.jsx)(ao.i,{component:o6,path:"/settings/seo"}),(0,i.jsx)(ao.i,{component:e7,path:"/settings/redirects"})]}),(0,i.jsx)(ao.i,{component:i5,path:"/settings/:component/:action/",exact:!0}),(0,i.jsx)(ao.i,{component:i5,path:"/settings/:component",exact:!0})]})},sa=r(582684),ss=r(567504),sl=r(693266),sc=function(){var e=(0,L.wh)(),t=e.isLoading,r=e.currentCommunity,n=(0,eH.Aq)(r),a=(0,U.k6)(),s=(0,sa.I)(),l=(0,eW.s)(),c=(0,ej.H)().isSettingsPage,u=(0,ek.C)().isPlansPageLayout,d=(0,ss.K)().shouldHideWorkflowsNestedNavigation,f=(0,sl.n)(),m=!!(0,U.$B)({path:"/settings/recap-2025"}),p=!!(0,U.$B)({path:eI.L.admin_dashboard.index,exact:!0}),b=(0,eP.x)()||!(null==r?void 0:r.payment_processor),h=(0,eN.N)(),y=eE(),v=eT();if((0,o.useEffect)(function(){var e=a.listen(function(){window.scrollTo(0,0)});return function(){return e()}}),(0,eC.I)(),t)return(0,i.jsx)(ts.a,{});if(!c)return null;var g=!!(null==r?void 0:r.affiliates_feature_flag_enabled);return(0,i.jsx)(eQ._p,{section:eQ.kS.ADMIN,children:(0,i.jsx)(eV,{shouldHideMainHeader:!1,hideAppBar:n,shouldHideSidebarNestedNavBar:y||v||u||d||m||p,children:(0,i.jsx)(so,{isPaywallTaxAvailable:b,isAffiliatesEnabled:g,isWorkflowsEnabled:s,isSitesEnabled:l,isPaywallPaymentSettingsAvailable:h,isConnectCoreEnabled:f})})})},su=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("7463"),r.e("4295"),r.e("8624"),r.e("3529"),r.e("2435"),r.e("1995")]).then(r.bind(r,736845))}),sd=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(su,{})})},sf=r(778152),sm=r(548150),sp=r(430244),sb=r(972171),sh=(0,eJ.u)(function(){return Promise.resolve().then(r.bind(r,776017))}),sy=function(){return(0,i.jsx)(eD.a,{disableRightSidebar:!0,children:(0,i.jsx)(sp.W,{fullWidth:!0,fullHeight:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsxs)(eD.a.Body,{children:[(0,i.jsx)(sf.S,{title:(0,E.t)("header_v3.bookmarks")}),(0,i.jsx)(sm.Z,{leftContent:(0,i.jsx)(sb.y,{children:(0,E.t)("header_v3.bookmarks")}),hasBorder:!0}),(0,i.jsx)(eD.a.Content,{fullWidth:!0,children:(0,i.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,i.jsx)(sh,{})})})]})})})})},sv=(0,eJ.u)(function(){return Promise.all([r.e("7944"),r.e("9492"),r.e("9142")]).then(r.bind(r,884161))}),sg=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sv,{})})},s_=(0,eJ.u)(function(){return r.e("4091").then(r.bind(r,916861))}),sx=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(s_,{})})})},sj=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("8772")]).then(r.bind(r,364915))}),sw=function(){return(0,i.jsx)(eD.a,{disableRightSidebar:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sj,{})})})},sO=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("6679"),r.e("2860"),r.e("4884"),r.e("7373"),r.e("9319"),r.e("5328"),r.e("4213"),r.e("7783"),r.e("7665")]).then(r.bind(r,450092))}),sS=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sO,{})})},sk=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("5611")]).then(r.bind(r,182447))}),sN=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sk,{})})},sP=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("6679"),r.e("2860"),r.e("9319"),r.e("5328"),r.e("6364"),r.e("3150")]).then(r.bind(r,776681))}),sC=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sP,{})})},sA=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("4884"),r.e("9621"),r.e("9319"),r.e("4213"),r.e("5633"),r.e("7697")]).then(r.bind(r,547725))}),sI=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sA,{})})},sT=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("6679"),r.e("2860"),r.e("4884"),r.e("9621"),r.e("7373"),r.e("9319"),r.e("5328"),r.e("4213"),r.e("7783"),r.e("5633"),r.e("6364"),r.e("4310")]).then(r.bind(r,877711))}),sE=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sT,{})})},sL=(0,eJ.u)(function(){return r.e("1042").then(r.bind(r,542506))}),sD=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sL,{})})},sM=(0,eJ.u)(function(){return r.e("1802").then(r.bind(r,979041))}),sR=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sM,{})})},sB=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("8083")]).then(r.bind(r,34435))}),sz=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sB,{})})},sF=(0,eJ.u)(function(){return r.e("5130").then(r.bind(r,189538))}),sU=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sF,{})})},sZ=(0,eJ.u)(function(){return r.e("3463").then(r.bind(r,784931))}),sG=function(){return(0,i.jsx)(L.BD,{children:(0,i.jsx)(eD.a,{disableRightSidebar:!0,children:(0,i.jsx)(sp.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sZ,{})})})})})},sq=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("4238")]).then(r.bind(r,135285))}),sV=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sq,{})})},sW=function(){var e=(0,U.UO)().memberPublicId;return(0,o.useEffect)(function(){var t="Accessing deprecated public_uid based admin member edit page ".concat(e);(0,h.dD)(t),console.warn(t),window.location.reload()},[e]),null},sH=(0,ex.NQ)({type:"CommunityMember"}),sQ=[sH.index,sH.info,sH.access,sH.billing,sH.activityLogs],sK=function(){return(0,i.jsx)(ao.i,{component:sW,path:sQ,exact:!0})},sJ=r(396354),s$=(0,eJ.u)(function(){return r.e("9525").then(r.bind(r,699240))}),sX=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(s$,{})})},sY=(0,eJ.u)(function(){return r.e("1227").then(r.bind(r,877786))}),s0=function(){return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(sY,{})})},s1=(0,eJ.u)(function(){return r.e("6422").then(r.bind(r,626729))}),s2=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(s1,{})})})},s3=r(861826),s6=r(686511),s5=r.n(s6),s4=r(147544),s7=r(709397),s9=r(737840),s8=r(786976),le=r(756993),lt=function(e){var t=e.level,r=e.isLocked,n=e.membersPercentage,o=e.levelName,a=e.pointsRequired,s=(0,le.O)(t);return(0,i.jsxs)("div",{className:(0,re.A)("flex space-x-2",n?"items-start":"items-center",r?"opacity-60":""),children:[(0,i.jsx)("div",{className:(0,re.A)("flex size-8 items-center justify-center rounded-full border",r?"bg-primary text-dark border-primary":["border-transparent",s.bg]),children:r?(0,i.jsx)(D.JO,{size:14,type:"16-lock"}):(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("span",{className:(0,re.A)(r?"text-dark":s.text),children:t})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("div",{className:"text-dark",children:o||(0,E.t)("leaderboard.level_n",{level:t})})}),(0,T.isNumber)(a)&&(0,i.jsx)(tT.Z.LabelXs,{weight:"regular",children:(0,i.jsx)("div",{className:"text-default",children:(0,E.t)("leaderboard.n_points_required",{count:(0,tn.HA)(a)})})})]})]})},lr=function(){return(0,i.jsx)(i.Fragment,{children:Array.from(Array(9).keys()).map(function(e){return(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"bg-tertiary size-8 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"space-y-1 py-0.5",children:[(0,i.jsx)("div",{className:"bg-tertiary h-4 w-12 animate-pulse rounded"}),(0,i.jsx)("div",{className:"bg-tertiary h-3 w-20 animate-pulse rounded"})]})]},"loading-state-".concat(e))})})},ln=function(e){var t,r=e.isLoadingGamificationMember,n=e.currentLevel,o=(0,s8.c8)(),a=o.data,s=o.isLoading||!a||r||!n;return(0,i.jsx)("div",{className:"mt-6 grid grid-flow-col-dense grid-rows-5 gap-5 md:grid-rows-3",children:s?(0,i.jsx)(lr,{}):null==(t=a.levels)?void 0:t.map(function(e){return(0,i.jsx)(lt,{isLocked:e.level>n,level:e.level,levelName:e.name,pointsRequired:e.points_required},e.level)})})},li=function(e){var t=e.level,r=e.levelName,n=e.pointsRequired,o=(0,le.O)(t);return(0,i.jsx)("div",{className:"flex flex-col items-center space-y-4 md:flex-row md:space-y-0",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,i.jsx)("div",{className:(0,re.A)(o.text),children:r||(0,E.t)("leaderboard.level_n",{level:t})})}),(0,T.isNumber)(n)&&(0,i.jsx)(tT.Z.LabelXs,{weight:"regular",children:(0,i.jsx)("div",{className:"text-default",children:(0,E.t)("leaderboard.n_points_required",{count:(0,tn.HA)(n)})})})]})})},lo=r(434519),la=function(){var e,t=(0,g.dd)(),r=(0,s8.c8)().data;return(0,i.jsxs)(lo.u_,{title:(0,E.t)("leaderboard.points_info.title"),isOpen:t.visible,onClose:t.hide,children:[(0,i.jsx)(lo.u_.Overlay,{}),(0,i.jsxs)(lo.u_.Content,{children:[(0,i.jsxs)(lo.u_.Header,{children:[(0,i.jsx)(lo.u_.Title,{size:"sm",children:(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:(0,E.t)("leaderboard.points_info.title")})}),(0,i.jsx)(lo.u_.HeaderActions,{children:(0,i.jsx)(lo.u_.CloseButton,{onClick:t.hide})})]}),(0,i.jsxs)(lo.u_.Body,{className:"pb-6 pt-4",children:[(0,i.jsxs)("div",{className:"mb-[18px] space-y-1",children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,E.t)("leaderboard.points_info.like_to_point.title")})}),(0,i.jsx)(tT.Z.BodyMd,{children:(0,i.jsx)("div",{className:"text-very-dark",children:(0,E.t)("leaderboard.points_info.like_to_point.description")})})]}),(0,i.jsxs)("div",{className:"mb-[18px] space-y-1",children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,E.t)("leaderboard.points_info.rewards.title")})}),(0,i.jsx)(tT.Z.BodyMd,{children:(0,i.jsx)("div",{className:"text-very-dark",children:(0,E.t)("leaderboard.points_info.rewards.description")})})]}),(0,i.jsxs)("div",{className:"mb-[27px] space-y-1",children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:(0,i.jsx)("span",{className:"text-darkest",children:(0,E.t)("leaderboard.points_info.levels.title")})}),(0,i.jsx)(tT.Z.BodyMd,{children:(0,i.jsx)("span",{className:"text-very-dark",children:(0,E.t)("leaderboard.points_info.levels.description")})})]}),(0,i.jsx)("div",{className:"grid grid-flow-col-dense grid-rows-3 gap-5",children:null==r||null==(e=r.levels)?void 0:e.map(function(e){var t=e.level,r=e.name,n=e.points_required;return(0,i.jsx)(li,{level:t,levelName:r,pointsRequired:n},t)})})]})]})]})};la.displayName="PointsInfoModalComponent";var ls=g.gk.create(function(){return(0,i.jsx)(la,{})});ls.displayName="PointsInfoModal";var ll=function(){return(0,g.dd)(ls)},lc=r(754503),lu=r(431841),ld=function(){var e=(0,L.wh)().currentCommunityMember,t=(null==e?void 0:e.id)?[e.id]:[],r=(0,lc.Y)({member_ids:t,enabled:!!(null==e?void 0:e.id)}),n=r.data,o=r.isLoading,a=null==n?void 0:n[0],s=ll(),l=(0,s4.Z)(),c=l.width,u=l.height,d=(0,lu._)("last-celebrated-level"),f=d.setValue,m=d.getValue,p=!o&&Number(null==a?void 0:a.current_level)>1&&Number(m())<Number(null==a?void 0:a.current_level);return(0,i.jsxs)("div",{className:"border-primary bg-primary rounded-2xl border p-6",children:[p&&(0,i.jsx)(s5(),{width:c,height:u,style:{zIndex:999999},recycle:!1,tweenDuration:5e3,numberOfPieces:300,onConfettiComplete:function(){return f(null==a?void 0:a.current_level)}}),(0,i.jsx)("div",{className:"flex flex-col items-center justify-between md:flex-row",children:(0,i.jsxs)("div",{className:"grid w-full grid-flow-row-dense grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3",children:[(0,i.jsxs)("div",{className:"col-span-2 flex flex-col items-center space-x-3 space-y-4 md:flex-row md:space-y-0",children:[(0,i.jsx)(s7.i,{avatarUrl:null==e?void 0:e.avatar_url,name:(null==e?void 0:e.name)||"",progress:null==a?void 0:a.level_progress,level:null==a?void 0:a.current_level}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-dark text-center md:text-left",children:(0,i.jsx)(tT.Z.LabelLg,{weight:"semibold",children:null==e?void 0:e.name})}),a&&!!(null==a?void 0:a.total_points)&&(0,i.jsx)(tT.Z.LabelSm,{children:(0,i.jsx)("div",{className:"text-light text-center md:text-left",children:(0,E.t)("leaderboard.n_points",{count:a.total_points})})})]})]}),(0,i.jsx)("div",{className:"col-span-3 flex flex-col justify-center sm:col-span-2 md:col-span-1",children:(0,i.jsxs)("div",{className:"mt-4 min-w-[200px] pt-1 text-center md:mt-0 md:pl-4 md:pt-0 md:text-left",children:[o||!a?(0,i.jsx)("div",{className:"bg-tertiary h-6 w-32 animate-pulse rounded-full text-center text-transparent md:text-left"}):(0,i.jsx)(s9.U,{level:null==a?void 0:a.current_level,levelName:null==a?void 0:a.current_level_name}),a&&(0,i.jsx)("div",{children:(0,i.jsx)(tl.z,{type:"button",variant:"text",className:"md:flex",onClick:function(){return s.show()},children:(0,i.jsx)(tT.Z.LabelXs,{weight:"regular",children:(0,i.jsxs)("div",{className:"text-light",children:[0===a.points_to_next_level?(0,E.t)("leaderboard.maxed_out"):(0,E.t)("leaderboard.n_points_to_level_up",{count:null==a?void 0:a.points_to_next_level}),(0,i.jsx)(D.JO,{type:"question-mark",className:"text-light ml-1 !w-3"})]})})})})]})})]})}),(0,i.jsx)(ln,{isLoadingGamificationMember:o,currentLevel:null==a?void 0:a.current_level})]})},lf=r(96533),lm={1:{light:"leaderboard-rank-1",dark:"leaderboard-rank-1-dark"},2:{light:"leaderboard-rank-2",dark:"leaderboard-rank-2-dark"},3:{light:"leaderboard-rank-3",dark:"leaderboard-rank-3-dark"}},lp=function(e,t){return e>=1&&e<=3?t?lm[e].dark:lm[e].light:null},lb=function(e){var t=e.rank,r=lp(t,!!(0,y.TC)().isDarkAppearance);return r?(0,i.jsx)(D.JO,{className:"!w-8",size:32,type:r}):(0,i.jsx)("div",{className:"text-light text-center",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:t})})},lh=r(451980),ly=function(e){var t=e.data,r=e.shouldShowPlusIcon,n=void 0!==r&&r,o=(0,lf.r)();return 0===t.length?(0,i.jsx)("div",{className:"mt-32 flex flex-col items-center justify-center",children:(0,i.jsx)(tT.Z.TitleLg,{color:"text-dark",weight:"font-bold",children:(0,E.t)("leaderboard.not_enough_activity.title")})}):(0,i.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:t.map(function(e,t){var r;return(0,i.jsxs)("div",{className:(0,re.A)("flex items-center p-4 md:px-6",{"border-primary border-t":0!==t}),children:[(0,i.jsx)("div",{className:"mr-4 w-8 shrink-0",children:(0,i.jsx)(lb,{rank:t+1})}),(0,i.jsxs)("button",{type:"button",onClick:function(){var t;return t=e.public_uid,o.show({memberPublicId:t})},className:"flex min-w-0 flex-1 items-center",children:[(0,i.jsx)(lh.C,{publicUid:e.public_uid,communityMemberId:e.community_member_id,avatarURL:e.avatar_url,name:e.name,headline:e.headline,messagingEnabled:e.messaging_enabled,children:(0,i.jsx)("div",{className:"mr-3 shrink-0",children:(0,i.jsx)(rw.W,{src:e.avatar_url,name:null!=(r=e.name)?r:"",size:"10",isFullRounded:!0})})}),(0,i.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,i.jsx)("div",{className:"inline-block w-full truncate text-left leading-4",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",truncate:!0,children:e.name})}),e.headline&&(0,i.jsx)("div",{className:"text-light inline-block w-full truncate text-left leading-4",children:(0,i.jsx)(tT.Z.LabelSm,{color:"text-light",weight:"regular",truncate:!0,children:e.headline})})]})]}),(0,i.jsx)("div",{className:"ml-4 mr-1 shrink-0",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",children:(0,i.jsxs)("span",{className:"text-circle whitespace-nowrap",children:[n&&"+",e.total_points]})})})]},e.community_member_id)})})},lv=function(){return(0,i.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:Array(10).fill(0).map(function(e,t){return(0,i.jsxs)("div",{className:(0,re.A)("flex items-center space-x-6 p-4 px-6",{"border-primary border-t":0!==t}),children:[(0,i.jsx)("div",{className:"bg-tertiary size-8 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-1 items-start space-x-3",children:[(0,i.jsx)("div",{className:"bg-tertiary size-10 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-5 w-32 animate-pulse rounded"}),(0,i.jsx)("div",{className:"bg-tertiary w-18 h-3 animate-pulse rounded"})]})]}),(0,i.jsx)("div",{className:"bg-tertiary h-5 w-10 animate-pulse rounded"})]},e)})})},lg=r(918594),l_=function(e){var t=e.label,r=e.queryParams,n=(0,U.TH)().search===r;return(0,i.jsx)(lg.OL,{to:"/leaderboard/".concat(r),className:(0,re.A)("bg-primary border-primary hover:bg-tertiary focus-visible:outline-secondary text-darkest max-w-[200px] shrink-0 truncate rounded-full border px-4 py-2 text-sm transition-colors duration-75 focus-visible:rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"border-secondary":n}),children:(0,i.jsx)(tT.Z.LabelXs,{weight:"medium",children:t})})},lx=[{label:(0,E.t)("leaderboard.date_ranges.7_days"),queryParams:"?period=7_days"},{label:(0,E.t)("leaderboard.date_ranges.30_days"),queryParams:"?period=30_days"},{label:(0,E.t)("leaderboard.date_ranges.all_time"),queryParams:"?period=all_time"}],lj=function(){var e=(0,U.TH)(),t=(0,U.k6)();return lx.some(function(t){var r=t.queryParams;return e.search===r})||t.replace("/leaderboard/".concat(lx[0].queryParams)),(0,i.jsx)("div",{className:"flex flex-1 items-center space-x-2",children:lx.map(function(e){var t=e.label,r=e.queryParams;return(0,i.jsx)(l_,{label:t,queryParams:r},r)})})},lw=function(e){var t=e.period,r=void 0===t?"7_days":t;return(0,es.useQuery)(["leaderboard",r],function(){return(0,nT.UT)(ex.av.gamification.leaderboard({params:{period:r}}))})},lO=function(){var e=new URLSearchParams((0,U.TH)().search).get("period"),t=ll(),r=lw({period:e}),n=r.isLoading,o=r.data;return(0,i.jsxs)("div",{className:"py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-x-2",children:[(0,i.jsx)(lj,{}),(0,i.jsx)("button",{type:"button",className:"focus-visible:!outline-secondary hidden rounded-md sm:block md:mr-6",onClick:function(){return t.show()},children:(0,i.jsx)(tT.Z.LabelXs,{weight:"medium",children:(0,i.jsx)("span",{className:"text-light hover:text-default",children:(0,E.t)("leaderboard.how_do_points_work")})})})]}),n?(0,i.jsx)(lv,{}):(0,i.jsx)(ly,{shouldShowPlusIcon:"7_days"===e||"30_days"===e,data:o.top_members})]})},lS=r(78456),lk=r(922976),lN=function(){var e=(0,U.k6)(),t=(0,L.wh)().currentCommunityMember;if(!(0,lS.vb)(t))return null;var r=[{label:(0,E.t)("leaderboard.settings"),onClick:function(){return e.push("/settings/gamification")},value:"settings"}];return(0,i.jsx)(lk.S,{label:(0,E.t)("leaderboard.settings"),options:r,dataTestId:"leaderboard-settings"})},lP=r(412845),lC=function(){var e=(0,lP.d)().leaderboardLink,t=(null==e?void 0:e.label)||(0,E.t)("leaderboard.title");return(0,i.jsx)(sm.Z,{leftContent:(0,i.jsx)(sb.y,{children:t}),rightContent:(0,i.jsx)(lN,{})})},lA=function(){var e=!!(0,L.wh)().currentUser;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lC,{}),(0,i.jsxs)("div",{className:(0,re.A)("mx-auto max-w-5xl p-4",{"md:p-9":e}),children:[e&&(0,i.jsx)(ld,{}),(0,i.jsx)(lO,{})]})]})};let lI=r.p+"static/images/features/leaderboard/feature1-6e2e6b3fb2453100.png",lT=r.p+"static/images/features/leaderboard/feature2-0f2b793d9ac60ad6.png",lE=r.p+"static/images/features/leaderboard/feature3-250ae9dcc5167cff.png";var lL={purple:"bg-[#ECE2FF]",green:"bg-[#EBFAF5]",pink:"bg-[#FFF1F3]"},lD={purple:"text-[#AA91DD]",green:"text-[#B0EBD9]",pink:"text-[#FFC9D3]"},lM={purple:"bg-[#AA91DD]",green:"bg-[#B0EBD9]",pink:"bg-[#FFC9D3]"},lR=["feature_1","feature_2","feature_3","feature_4"],lB=function(e){var t=e.color,r=e.feature,n=e.icon,o=e.iconSize,a=e.featureCount,s="leaderboard.key_features.".concat(r);return(0,i.jsxs)("div",{className:(0,re.A)("col-span-6 h-[500px] rounded-[10px] p-12 xl:col-span-5 xl:pb-4",lL[t]),children:[(0,i.jsx)("div",{className:(0,re.A)("flex size-12 items-center justify-center rounded-full",lM[t]),children:(0,i.jsx)(D.JO,{type:n,size:void 0===o?20:o})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(tT.Z.TitleLg,{color:"text-[#2B2E33]",children:(0,E.t)("".concat(s,".title"))})}),(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsx)(tT.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,E.t)("".concat(s,".description"))})}),(0,i.jsx)("div",{className:"mt-5 flex flex-col space-y-4",children:lR.slice(0,void 0===a?3:a).map(function(e){return(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"size-5",children:(0,i.jsx)(D.JO,{type:"20-checkmark-circle-fill-dark",size:20,className:lD[t]})}),(0,i.jsx)(tT.Z.BodyMd,{color:"text-[#2B2E33]",children:(0,E.t)("".concat(s,".").concat(e))})]},e)})})]})},lz=function(e){var t=e.src;return(0,i.jsx)("div",{className:"col-span-6 flex justify-center overflow-hidden rounded-[10px] xl:col-span-7",children:(0,i.jsx)("img",{alt:"",loading:"lazy",src:t,className:"object-cover"})})},lF=function(){return(0,i.jsxs)("div",{className:"border-primary flex w-full flex-col items-center rounded-lg border p-14",children:[(0,i.jsx)(tT.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,E.t)("leaderboard.landing_page_title")}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(tT.Z.TitleSm,{color:"text-dark",children:(0,E.t)("leaderboard.description")})}),(0,i.jsx)(lg.rU,{to:"/settings/gamification",children:(0,i.jsx)(tl.z,{large:!0,className:"mt-8",variant:"circle",children:(0,E.t)("leaderboard.activate")})})]})},lU=function(){return(0,i.jsxs)("div",{className:"flex w-full flex-col items-center text-center",children:[(0,i.jsx)(tT.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,E.t)("leaderboard.landing_page_title")}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(tT.Z.TitleSm,{color:"text-dark",children:(0,E.t)("leaderboard.description")})}),(0,i.jsx)(lg.rU,{to:"/settings/gamification",children:(0,i.jsx)(tl.z,{large:!0,className:"mt-8",variant:"circle",children:(0,E.t)("leaderboard.activate")})})]})},lZ=function(){return(0,i.jsxs)("div",{className:"bg-primary h-full",children:[(0,i.jsx)(sm.Z,{leftContent:(0,i.jsx)(sb.y,{children:(0,E.t)("leaderboard.title")}),rightContent:(0,i.jsx)(lg.rU,{to:"/settings/gamification",children:(0,i.jsx)(tl.z,{large:!0,variant:"circle",children:(0,E.t)("leaderboard.activate")})})}),(0,i.jsx)("main",{className:"mx-auto max-w-6xl",children:(0,i.jsxs)("div",{className:"flex size-full flex-col space-y-16 p-14",children:[(0,i.jsx)(lU,{}),(0,i.jsxs)("div",{className:"grid grid-flow-row-dense grid-cols-6 gap-6 xl:auto-rows-fr xl:grid-cols-12",children:[(0,i.jsx)(lB,{color:"pink",icon:"leaderboard-progress",feature:"collect_points",featureCount:4,iconSize:24}),(0,i.jsx)(lz,{src:lI}),(0,i.jsx)(lB,{color:"green",icon:"leaderboard-activity",feature:"level_up"}),(0,i.jsx)(lz,{src:lT}),(0,i.jsx)(lB,{color:"purple",icon:"leaderboard-levelup",feature:"earn_rewards"}),(0,i.jsx)(lz,{src:lE})]}),(0,i.jsx)(lF,{})]})})]})},lG=function(){var e=(0,s8.c8)(),t=e.data;return e.isLoading?(0,i.jsx)(e$.w,{}):(0,i.jsx)(sp.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(null==t?void 0:t.enabled)?(0,i.jsx)(lA,{}):(0,i.jsx)(lZ,{})})})},lq=r(72622),lV=r(587792),lW=r(655202),lH=r(257210),lQ=r(290161),lK=r(786916),lJ=r(263029),l$=r(125152),lX=r(205061),lY=r(941084),l0=r(323583),l1=r(354191),l2=r(595693),l3=r(930457),l6=r(562068),l5=r(248250),l4=r(261410),l7=r(516882),l9=r(227053),l8=function(){return(0,i.jsx)(lo.u_.Body,{className:"!px-0 !pt-0",children:(0,i.jsx)("div",{className:"px-5 pt-3 md:px-8",children:(0,i.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("div",{className:"bg-tertiary size-10 animate-pulse rounded-full"}),(0,i.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,i.jsx)("div",{className:"bg-tertiary h-4 w-3/5 animate-pulse rounded-md"}),(0,i.jsx)("div",{className:"bg-tertiary h-4 w-2/5 animate-pulse rounded-md"})]})]}),(0,i.jsx)("div",{className:"bg-tertiary h-80 w-full animate-pulse rounded-md"})]})})})},ce=r(892640);function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ct(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cn=function(e){var t=e.initialFocus,r=cr((0,o.useState)(!0),2),n=r[0],i=r[1],a=(0,o.useRef)(null),s=cr((0,o.useState)(void 0===t||t),2),l=s[0],c=s[1],u=(0,o.useCallback)(function(){var e=a.current;e&&"focus"in e&&e.focus()},[a]),d=(0,o.useCallback)(function(){if(i(!0),c(!0),a.current)if((0,ce.p)(a.current))a.current.focus();else{var e,t;null==(t=a.current.commands)||null==(e=t.focus)||e.call(t,"end")}},[]);return(0,o.useEffect)(function(){l&&u()},[u,l]),{commentsFormRef:a,focusCommentsForm:u,showCommentsAndFocusOnForm:d,toggleComment:function(){c(!1),i(function(e){return!e})},shouldShowComments:n,shouldAutofocusReplyForm:l}};function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var co=function(e){var t,r,n=e.autofocusReplyForm,a=e.isRenderedOutsideTheSpace,s=e.onPostDestroy,l=e.shouldOpenCommentPage,c=e.isLoading,u=void 0!==c&&c,d=e.onScroll,f=(0,L.Zh)(),m=f.record,p=f.onPostChange,b=m.status,h=m.is_comments_enabled,y=m.event_setting_attributes,v=(0,l9.m)().isPostBodyEmpty,g=(0,l0.N)().refetch,_=!!(null==m?void 0:m.cover_image_url),x=null==y?void 0:y.live_stream_room_setting_attributes,j=null==x?void 0:x.recording_attributes,w=null==x?void 0:x.auto_post_recording_enabled,O=(t=(0,o.useState)(!u),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ci(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ci(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=O[0],k=O[1],N=b===l$.Q_.PUBLISHED,P=(0,lY.HZ)(m)&&N&&!(0,lJ.QP)(m)&&(0,lJ.HV)(m);(0,o.useEffect)(function(){var e=null;return u?k(!1):e=setTimeout(function(){return k(!0)},50),function(){e&&clearTimeout(e)}},[u]);var C=cn({initialFocus:void 0===n||n}),A=C.commentsFormRef,I=C.showCommentsAndFocusOnForm,T=C.toggleComment,E=C.shouldShowComments,D=(0,o.useRef)(null);return u?(0,i.jsx)(l8,{}):(0,i.jsxs)(lo.u_.Body,{className:"!p-0",ref:D,onScroll:function(e){var t=e.currentTarget.scrollTop;null==d||d(t)},children:[(0,i.jsx)(l7.Y,{post:m,shouldScrollIntoView:!0}),(0,i.jsxs)("div",{className:(0,re.A)("flex flex-col gap-5","transition-opacity duration-300 ease-in-out",{"opacity-0":!S,"opacity-100":S}),children:[(0,i.jsx)(l5.H,{post:m,className:"md:!rounded-none"}),(0,i.jsxs)("div",{className:(0,re.A)("px-5 md:px-8",{"pt-3":!_}),children:[(0,i.jsx)(l4.m,{post:m,onChange:p,refetchPosts:g,hideShareLink:!0,hideBookmarkButton:!0,hidePinnedToTopIcon:!0,onPostDestroy:s,hideAuthorHeadline:!1,tagsLimit:1,tagsShowMoreLabelVariant:"numbers",metaInfoWrapperClassName:"",isRenderedOutsideTheSpace:void 0!==a&&a}),(0,i.jsxs)("div",{className:(0,re.A)("space-y-5",{"mt-5":v}),children:[(0,lY.HZ)(m)&&(0,i.jsx)(lK.Y,{onChange:function(e){null==p||p(e)},shouldDisplayRsvpAction:P}),j&&w&&(0,i.jsx)(l1.T,{src:j.url,type:j.content_type,mediaTranscoding:j.media_transcoding,mediaTranscriptId:j.media_transcript_id,isDownloadable:j.is_downloadable,poster:null==(r=j.image_variants)?void 0:r.thumbnail,downloadUrl:j.url,chaptersUrl:j.chapters_url,previewThumbnailsUrl:j.preview_thumbnails_url,variants:j.video_variants,signedId:j.signed_id}),(0,lY.Fr)(m)&&(0,i.jsx)(lX.l,{onPostChange:p,onPostDestroy:s}),(0,i.jsx)(l6.y,{}),(0,i.jsxs)("div",{children:[(0,i.jsx)(l3.S,{className:"!px-0",toggleComment:T,showCommentAndFocusCommentForm:I,shouldOpenCommentPage:void 0!==l&&l}),h&&E&&(0,i.jsx)(l2.o,{commentsFormRef:A,autofocusReplyForm:!1,scrollableTarget:D})]})]})]})]})]})},ca=r(886307),cs=r(356345),cl=r(242194),cc=r(684969),cu=r(459331),cd=function(e){var t,r=e.onChange,n=e.onPostDestroy,o=e.invalidateQueries,a=e.invalidateSpacePosts,s=(0,tr.kK)(),l=(0,l9.m)(),c=l.post,u=l.refetchPostDetails,d=(0,ca.Z)({post:c}).toggleSummary,f=(0,U.TH)(),m=(0,lo.UV)().contentPortalElement,p=(0,U.k6)(),b=null==f||null==(t=f.state)?void 0:t.prevLocation,h=c.slug,y=c.space_slug,v=(0,l0.N)().refetch;return s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(to.T,{interactive:!1,content:(0,E.t)("post.post_modal.go_back"),children:(0,i.jsx)(nN.h,{name:"20-back",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){b&&(p.push(b),null==o||o())},ariaLabel:(0,E.t)("post.post_modal.go_back")})}),(0,i.jsx)(lo.u_.HeaderActions,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[c.has_summary&&(0,i.jsx)(cu.k,{onClick:d,buttonSize:32}),(0,i.jsx)(cs.e,{bookmarkType:(0,lY.HZ)(c)?"event":"post",variant:"minimal-post-modal",record:c,onSuccess:function(){null==u||u(),a()}}),(0,i.jsx)(cl.p,{onChange:r,onPostDestroy:n,refetchPosts:v})]})})]}):(0,i.jsx)(lo.u_.HeaderActions,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(to.T,{interactive:!1,content:(0,E.t)("post.post_modal.share_post_button_tooltip"),children:(0,i.jsx)(cc.P,{onChange:function(){r(),a()},appendTo:null!=m?m:document.body,menuButtonEl:"div",button:(0,i.jsx)(nN.h,{name:"20-arrow-box-up",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,ariaLabel:(0,E.t)("post.post_modal.share_post_aria_label")}),shouldRenderCustomMenuButton:!0})}),c.has_summary&&(0,i.jsx)(cu.k,{onClick:d,buttonSize:32}),(0,i.jsx)(cs.e,{bookmarkType:(0,lY.HZ)(c)?"event":"post",variant:"minimal-post-modal",record:c,onSuccess:function(){null==u||u(),a()}}),(0,i.jsx)(cl.p,{onChange:r,onPostDestroy:n,refetchPosts:v}),(0,i.jsx)(to.T,{interactive:!1,content:(0,E.t)("post.post_modal.open_post_in_full_page_button_tooltip"),children:(0,i.jsx)(nN.h,{name:"20-arrow-expand",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){p.push(ex.xu.show({slug:h,spaceSlug:y,hash:f.hash}),{isRedirectFromPostModal:!0})},ariaLabel:(0,E.t)("post.post_modal.open_post_in_full_page_aria_label")})}),(0,i.jsx)(to.T,{interactive:!1,content:(0,E.t)("post.post_modal.close_post_modal_tooltip"),children:(0,i.jsx)(nN.h,{name:"20-cross",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:32,onClick:function(){b&&(p.push(b),null==o||o())},ariaLabel:(0,E.t)("post.post_modal.close_button_aria_label")})})]})})},cf=function(){return(0,i.jsx)(lo.u_.Header,{className:"flex w-full items-center gap-4",children:(0,i.jsx)("div",{className:"bg-tertiary h-8 w-3/5 animate-pulse rounded-md"})})};function cm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var cp=function(e){var t,r=e.onChange,n=e.spaceId,a=e.isLoading,s=void 0!==a&&a,l=e.invalidateQueries,c=e.onPostDestroy,u=e.compactMode,d=void 0!==u&&u,f=(0,es.useQueryClient)(),m=(0,l9.m)().post.name,p=(0,tr.kK)(),b=(t=(0,o.useState)(!s),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return cm(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cm(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1];return((0,o.useEffect)(function(){var e=null;return s?y(!1):e=setTimeout(function(){return y(!0)},50),function(){e&&clearTimeout(e)}},[s]),s)?(0,i.jsx)(cf,{}):(0,i.jsxs)(lo.u_.Header,{className:et()("z-[1] flex w-full items-center gap-4","transition-opacity duration-300 ease-in-out","!px-4 !py-3 md:!px-8 md:!py-5",{"opacity-0":!h,"opacity-100":h,"!justify-end":!m,"md:shadow-md dark:md:border-solid":d}),children:[m&&!p&&(0,i.jsx)("div",{className:et()("overflow-anywhere min-w-0 flex-1",{"flex items-center":d}),children:(0,i.jsx)(tT.Z.TitleMd,{truncate:d,children:m})}),(0,i.jsx)(cd,{onChange:r,onPostDestroy:c,invalidateQueries:l,invalidateSpacePosts:function(){f.invalidateQueries(["posts",n])}})]})},cb=r(117383),ch=r(352521);function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cy(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cg=function(e){var t,r=cv((0,o.useState)("next"),2),n=r[0],i=r[1],a=cv((0,o.useState)(!1),2),s=a[0],l=a[1],c=cv((0,o.useState)(null!=(t=null==e?void 0:e.hasNextPage)&&t),2);return{direction:n,setDirection:i,isPostQueryEnabled:s,setIsPostQueryEnabled:l,hasNextPage:c[0],setHasNextPage:c[1]}},c_=r(62025),cx=function(e,t,r,n,i,a){var s,l=(0,c_.t)({memberPublicId:null==a?void 0:a.public_uid,enabled:e&&i,onSuccess:r}),c=l.posts,u=l.isLoading,d=l.fetchNextPage,f=(0,l0.N)(n,!e&&!t&&!i,r),m=f.posts,p=f.isLoading,b=f.fetchNextPage,h=(0,lW.N)("string"==typeof n?n:"",e&&t,r),y=h.posts,v=h.isLoading,g=h.fetchNextPage;(0,o.useEffect)(function(){e&&(t?g():i?d():b())},[e,t,g,b,d,i]);var _=[];return t?(_=y,s=v):i?(_=c,s=u):(_=m,s=p),{posts:_,isLoading:s}},cj=function(e){var t=e.currentPost,r=e.prevLocation,n=e.params,i=e.isNavigatingInsidePostModal,a=e.setIsNavigatingInsidePostModal,s=e.wasInFeed,l=e.isWithinProfileContext,c=e.profileContextMember,u=(0,ch.d)().navigateToPost,d=cg((0,U.TH)().state),f=d.direction,m=d.setDirection,p=d.isPostQueryEnabled,b=d.setIsPostQueryEnabled,h=d.hasNextPage,y=d.setHasNextPage,v=cx(p,void 0!==s&&s,(0,o.useCallback)(function(e){if(i){var o=e.pages[e.pages.length-1];if(o&&o.records.length>0){b(!1),y(o.has_next_page);var s=o.records.findIndex(function(e){return e.id===t.id}),d=-1!==s&&s<o.records.length-1?s+1:0;u({newPost:o.records[d],prevLocation:r,params:n,isWithinProfileContext:l,profileContextMember:c})}null==a||a(!1)}},[i,u,a,y,b,t,n,r,l,c]),n,l,c),g=v.isLoading,_=v.posts,x=(0,o.useCallback)(function(e){if(!g&&_&&t){null==a||a(!0),m(e);var i=_.findIndex(function(e){return e.id===t.id});if(-1!==i){var o="next"===e?i+1:i-1;if(o<0||o>=_.length)return void("next"===e?b(!0):null==a||a(!1));u({newPost:_[o],prevLocation:r,params:n,isWithinProfileContext:l,profileContextMember:c}),null==a||a(!1)}}},[g,_,t,m,u,b,r,n,a,l,c]),j=(0,o.useCallback)(function(e){g||i||x(e)},[x,g,i]),w=(0,o.useCallback)(function(){return!!_&&!!t&&0===_.findIndex(function(e){return e.id===t.id})},[_,t]),O=(0,o.useCallback)(function(){return!!_&&!!t&&_.findIndex(function(e){return e.id===t.id})===_.length-1&&!h},[_,t,h]);return(0,cb.y1)("right",function(){O()||j("next")},{enabled:!g&&!i},[j,g,i]),(0,cb.y1)("left",function(){w()||j("previous")},{enabled:!g&&!i},[j,g,i,w]),{isNavigatingToNextPost:"next"===f,isNavigatingToPreviousPost:"previous"===f,isLoading:g,setIsNavigatingInsidePostModal:a,isNavigatingInsidePostModal:i,shouldDisableLeftNavigation:g||i||w(),shouldDisableRightNavigation:g||i||O(),handleNextPost:function(){return O()?T.noop:j("next")},handlePreviousPost:function(){return w()?T.noop:j("previous")}}},cw=function(e){var t=e.onClick,r=void 0===t?T.noop:t,n=e.isDisabled,o=void 0!==n&&n,a=e.isLoading;return(0,i.jsx)("button",{type:"button",className:et()("fixed top-1/2 -translate-y-1/2","hidden","size-24","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:left-[calc(50%-400px-96px)]","lg:left-[calc(50%-400px-128px)]"),onClick:o?void 0:r,disabled:o,children:(0,i.jsx)("div",{className:et()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative size-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":o}),children:(0,i.jsx)(D.JO,{size:20,type:void 0!==a&&a?"loader":"20-chevron-left"})})})},cO=function(e){var t=e.onClick,r=void 0===t?T.noop:t,n=e.isDisabled,o=void 0!==n&&n,a=e.isLoading;return(0,i.jsx)("button",{type:"button",className:et()("fixed top-1/2 -translate-y-1/2","size-24","hidden","isolate z-10 items-center justify-center","transition-all duration-300 ease-in-out","md:flex","md:right-[calc(50%-464px-32px)]","lg:right-[calc(50%-464px-64px)]"),onClick:o?void 0:r,disabled:o,children:(0,i.jsx)("div",{className:et()("bg-primary hover:bg-tertiary text-default hover:text-dark","relative size-10","flex items-center justify-center rounded-full",{"cursor-not-allowed opacity-50":o}),children:(0,i.jsx)(D.JO,{size:20,type:void 0!==a&&a?"loader":"20-chevron-right"})})})},cS=function(e){var t=cj(e),r=t.handleNextPost,n=t.handlePreviousPost,o=t.shouldDisableLeftNavigation,a=t.shouldDisableRightNavigation,s=t.isNavigatingToNextPost,l=t.isNavigatingToPreviousPost,c=e.isLoading,u=void 0!==c&&c;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(cw,{onClick:n,isDisabled:o,isLoading:u&&l}),(0,i.jsx)(cO,{onClick:r,isDisabled:a,isLoading:u&&s})]})};function ck(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cP=function(){var e,t,r=cN((0,o.useState)(!1),2),n=r[0],a=r[1],s=cN((0,o.useState)(!1),2),l=s[0],c=s[1],u=(0,U.k6)(),d=(0,U.TH)(),f=(0,lQ.v)(),m=f.isLoading,p=f.postResource,b=f.perPagePostIds,h=f.space,y=d.state,v=null!=y?y:{},g=v.prevLocation,_=v.postList,x=v.currentPage,j=v.params,w=v.isWithinProfileContext,O=v.profileContextMember,S=v.shouldDisableNavigation,k=(null==g?void 0:g.pathname)==="/feed",N=m||n,P=(0,es.useQueryClient)(),C=k?[lW.Z]:["posts",null==h?void 0:h.id],A=(0,o.useCallback)(function(){P.invalidateQueries(C)},[P,C]),I=(0,o.useCallback)(function(){(0,T.defer)(A)},[A]),E=(0,o.useCallback)((0,T.throttle)(function(e){c(e>50)},500),[c]),D=(0,o.useCallback)(function(e){a(e),c(!1)},[a,c]);return(0,lV.$)({postId:null==(e=p.data)?void 0:e.id,spaceId:null==(t=p.data)?void 0:t.space_id}),(0,i.jsx)(L.mE,{spaceId:null==h?void 0:h.id,children:(0,i.jsx)(lH._x,{perPagePostIds:b,children:(0,i.jsx)(L.DW,{post:p.data,onPostChange:p.onPostChange,usedIn:"minimal-post-modal",children:(0,i.jsxs)(lo.u_,{isOpen:!0,onClose:function(){g&&(u.push(g),I())},contentPortalId:"post-modal-portal",children:[!(void 0!==S&&S)&&(0,i.jsx)(cS,{initialPostList:_,initialPage:void 0===x?1:x,currentPost:null==p?void 0:p.data,prevLocation:g,params:j,isNavigatingInsidePostModal:n,setIsNavigatingInsidePostModal:D,wasInFeed:k,isLoading:N,isWithinProfileContext:w,profileContextMember:O}),(0,i.jsx)(lo.u_.Overlay,{}),(0,i.jsxs)(lo.u_.Content,{size:"xl",className:(0,re.A)("sm:!my-[5vh]",{"sm:!max-h-[85vh]":lq.isMobileSafari,"sm:!max-h-[90vh]":!lq.isMobileSafari}),children:[(0,i.jsx)(cp,{spaceId:null==h?void 0:h.id,onChange:null==p?void 0:p.onPostChange,isLoading:N,invalidateQueries:I,onPostDestroy:function(){g&&u.push(g)},compactMode:l}),(0,i.jsx)(co,{isLoading:N,isRenderedOutsideTheSpace:k,onPostDestroy:function(){g&&u.push(g)},onScroll:E})]})]})})})})},cC=(0,eJ.u)(function(){return Promise.all([r.e("380"),r.e("3503"),r.e("880")]).then(r.bind(r,806963))}),cA=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cC,{})})})},cI=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("1778"),r.e("4075"),r.e("313"),r.e("6642"),r.e("1686")]).then(r.bind(r,492733))}),cT=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,noPadding:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cI,{})})})},cE=(0,eJ.u)(function(){return Promise.all([r.e("313"),r.e("7321")]).then(r.bind(r,726212))}),cL=function(){var e=(0,s3.h)().setDynamicLayoutProps;return(0,o.useEffect)(function(){e({fullWidth:!0,disableRightSidebar:!1})},[e]),(0,i.jsx)(sp.W,{fullWidth:!0,fullHeight:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cE,{})})})},cD=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("6548"),r.e("2947"),r.e("1699"),r.e("2673"),r.e("222")]).then(r.bind(r,243925))}),cM=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cD,{})})})},cR=r(824184),cB=(0,eJ.u)(function(){return Promise.all([r.e("313"),r.e("9213"),r.e("4596")]).then(r.bind(r,546401))}),cz=function(){var e=(0,cR.U)(),t=(0,L.nT)(),r=t.isLoading,n=t.helpers.findBy({slug:e}),a=(0,s3.h)().setDynamicLayoutProps;return((0,o.useEffect)(function(){a({disableRightSidebar:!1})},[a]),r)?null:(0,i.jsx)(L.mE,{spaceId:null==n?void 0:n.id,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cB,{})})})},cF=(0,eJ.u)(function(){return r.e("8285").then(r.bind(r,483939))}),cU=function(){return(0,i.jsx)(eD.a.Body,{children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cF,{})})})},cZ=r(60589),cG=(0,eJ.u)(function(){return r.e("3350").then(r.bind(r,261220))}),cq=function(){var e=(0,cR.U)(),t=(0,s3.h)().setDynamicLayoutProps,r=(0,L.nT)().helpers.findBy({slug:e});return((0,o.useEffect)(function(){(0,cZ.Ug)(r)&&t({disableScroll:!0})},[r,t]),(0,T.isEmpty)(r))?null:(0,i.jsx)(L.mE,{spaceId:null==r?void 0:r.id,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cG,{space:r})})})},cV=r(864529),cW=(0,eJ.u)(function(){return Promise.resolve().then(r.bind(r,88454))}),cH=function(){return(0,i.jsx)(sp.W,{fullWidth:!0,children:(0,i.jsx)(cV.F.Body,{hasPaddingTopMobile:!1,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cW,{})})})})},cQ=["/c/:spaceSlug","/c/:spaceSlug/invite","/c/:spaceSlug/members","/c/:spaceSlug/customize","/c/:spaceSlug/customize/*","/c/:spaceSlug/sections/*","/c/:spaceSlug/edit-lesson/*"],cK=function(){var e,t=(0,U.TH)(),r=(0,ew.O)().isSitePageRoute,n=t.state,o=(null!=n?n:{}).prevLocation,a=(0,sJ.t)().post_login_redirect,s=(0,sl.n)();return(0,i.jsx)(U.AW,{path:"/",children:(0,i.jsxs)(s3.O,{disableRightSidebar:!0,children:[(0,i.jsxs)(U.rs,{location:o||t,children:[r&&(0,i.jsx)(U.AW,{component:s2,path:"/:pageSlug*"}),(0,i.jsx)(U.AW,{component:cL,path:"/feed",exact:!0}),(0,i.jsx)(U.l_,{from:"/home",to:(e="/feed",a?{pathname:e,search:"?post_login_redirect=".concat(encodeURIComponent(a))}:{pathname:e})}),(0,i.jsx)(ao.i,{component:cM,path:"/members"}),(0,i.jsx)(ao.i,{component:cT,path:"/events",exact:!0}),(0,i.jsx)(ao.i,{component:cA,path:"/courses",exact:!0}),(0,i.jsx)(ao.i,{component:sX,path:"/notifications",exact:!0}),s&&(0,i.jsx)(ao.i,{component:s0,path:"/connections",exact:!0}),(0,i.jsx)(ao.i,{component:lG,path:"/leaderboard",exact:!0}),(0,i.jsx)(ao.i,{component:cU,path:"/u/:publicUid"}),(0,i.jsx)(ao.i,{component:cH,path:"/s/:spaceGroupSlug"}),(0,i.jsx)(ao.i,{component:cq,path:cQ,exact:!0}),(0,i.jsx)(ao.i,{component:cz,path:"/c/:spaceSlug/:postSlug"})]}),o&&(0,i.jsx)(ao.i,{component:cP,path:"/c/:spaceSlug/:postSlug"})]})})},cJ=(0,eJ.u)(function(){return Promise.all([r.e("6212"),r.e("7463"),r.e("4452"),r.e("8830"),r.e("6648"),r.e("3519"),r.e("3529"),r.e("140"),r.e("5805"),r.e("9878")]).then(r.bind(r,124448))}),c$=function(){var e=(0,U.UO)().sqid;return(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(e$.w,{}),children:(0,i.jsx)(cJ,{sqid:e})})},cX=(0,ex.Iy)({sqid:":sqid"}),cY=[cX.index,cX.info,cX.access,cX.billing,cX.activityLogs],c0=function(){return(0,i.jsx)(ao.i,{component:c$,path:cY,exact:!0})},c1=function(){var e=(0,U.UO)().leadPublicId;return(0,o.useEffect)(function(){var t="Accessing deprecated public_uid based admin lead edit page ".concat(e);(0,h.dD)(t),console.warn(t),window.location.reload()},[e]),null},c2=(0,ex.NQ)({type:"CommunityLead",publicId:":leadPublicId"}),c3=[c2.index,c2.info,c2.access,c2.billing,c2.activityLogs],c6=function(){return(0,i.jsx)(ao.i,{component:c1,path:c3,exact:!0})};function c5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c4=function(){return(0,i.jsx)(a.D,{})},c7=Object.values(eI.L.members),c9=function(){var e=(0,U.TH)();return eS(),(0,i.jsx)(A.S,{renderFunc:c4,children:(0,i.jsxs)(U.rs,{children:[(0,i.jsx)(ao.i,{component:sN,path:"/live/:roomSlug/not_supported"}),(0,i.jsx)(ao.i,{component:sI,path:"/live/:roomSlug/record"}),(0,i.jsx)(ao.i,{component:sS,path:"/live/:roomSlug/mobile"}),(0,i.jsx)(U.AW,{component:sC,path:"/live/:roomSlug/public"}),(0,i.jsx)(ao.i,{component:sE,path:"/live/:roomSlug"}),(0,i.jsx)(U.AW,{component:sU,path:"/public/unsubscribe"}),(0,i.jsx)(U.AW,{component:sV,path:"/two_fa"}),(0,i.jsx)(U.AW,{component:sR,path:"/marketing_emails/unsubscribe"}),(0,i.jsx)(U.AW,{component:sD,path:"/marketing_emails/marketing_email_preference"}),(0,i.jsx)(ao.i,{component:sw,path:"/getting-started",exact:!0}),(0,i.jsx)(ao.i,{component:sz,path:["/messages/bot/:id","/messages/:uuid","/messages"]}),(0,i.jsx)(ao.i,{component:sG,path:"/threads"}),(0,i.jsx)(ao.i,{component:sy,path:"/bookmarks"}),(0,i.jsx)(ao.i,{component:sg,path:"/contacts/import"}),(0,i.jsx)(ao.i,{component:sc,path:["/settings"].concat(function(e){if(Array.isArray(e))return c5(e)}(c7)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c7)||function(e,t){if(e){if("string"==typeof e)return c5(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c5(e,t)}}(c7)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),(0,i.jsx)(U.l_,{from:"/members/manage",to:{pathname:"/audience/manage",search:e.search}}),(0,i.jsx)(ao.i,{component:sd,path:"/account"}),(0,i.jsx)(ao.i,{component:sK,path:"/admin/members"}),(0,i.jsx)(ao.i,{component:c6,path:"/admin/contacts"}),(0,i.jsx)(ao.i,{component:c0,path:"/admin/audience"}),(0,i.jsx)(ao.i,{component:sx,path:"/discover",exact:!0}),(0,i.jsx)(cK,{})]})})},c8=r(238557),ue=function(){var e=(0,R.D)();return(0,i.jsx)(c8.H,{isLoadingAppData:e})},ut=r(64300),ur=r(916819),un=r(589345),ui="help-widget-location-history",uo=["/","/conversations","/help","/explore"],ua="help-widget-last-activity-timestamp",us=function(){try{var e=localStorage.getItem(ua);if(!e)return!1;return Date.now()-Number(e)>1728e5}catch(e){return!1}},ul=function(){try{var e=localStorage.getItem(ui);if(!e)return["/"];if(us())return uf(),["/"];return JSON.parse(e)}catch(e){return["/"]}},uc=function(e){localStorage.setItem(ui,JSON.stringify(e)),localStorage.setItem(ua,String(Date.now()))},uu=function(e){var t=ul();t[t.length-1]!==e&&(uo.includes(e)?uc([e]):(t.push(e),uc(t)))},ud=function(){var e=ul();return e.length<=1?"/":(e.pop(),uc(e),e[e.length-1]||"/")},uf=function(){uc(["/"])},um=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(){return(0,nT.gN)(ex.av.helpWidget.completeOnboarding())},onSuccess:t,onError:r})},up=function(){try{var e,t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var r=document.createElement("div");t.appendChild(r);var n=t.offsetWidth-r.offsetWidth;return null==(e=t.parentNode)||e.removeChild(t),n}catch(e){return console.error("HelpWidget - Failed to compute inset with scrollbar:",e),0}},ub=r(263271),uh=r(953529),uy=function(){return(0,es.useQuery)(["help-widget","conversations","unread-count"],function(){return(0,nT.UT)(ex.av.helpWidget.unreadConversations())})};function uv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ug=function(e){var t,r=e.isOpen,n=e.onClick,a=(0,es.useQueryClient)(),s=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return uv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uv(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,L.wh)().currentCommunityMember,d=(0,uh.TC)().isDarkAppearance,f=uy().data,m=(null==f?void 0:f.unread_count)||0,p=l&&d?{className:"icon-hw-fab-hover-dark",href:"#icon-hw-fab-hover-dark"}:l&&!d?{className:"icon-hw-fab-hover",href:"#icon-hw-fab-hover"}:!l&&d?{className:"icon-hw-fab-default-dark",href:"#icon-hw-fab-default-dark"}:{className:"icon-hw-fab-default",href:"#icon-hw-fab-default"};return(0,ub.s)({channel:"HelpWidget::GeneralChannel",onMessageReceive:function(e){"reloadConversations"===e.event&&a.invalidateQueries({queryKey:["help-widget","conversations","unread-count"]})},community_member_id:null==u?void 0:u.id,canCreateConnection:!!(null==u?void 0:u.id)},[null==u?void 0:u.id]),(0,i.jsx)(V.T,{children:(0,i.jsxs)("div",{className:"relative",children:[m>0&&(0,i.jsx)("div",{className:"absolute right-0 top-[-4px] inline-flex size-4 flex-col items-center justify-center gap-2 rounded-lg bg-red-600 p-2 shadow-md outline outline-2 outline-white",style:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.10), 0 2px 4px -2px rgba(0, 0, 0, 0.10)"},children:(0,i.jsx)("div",{className:"justify-start text-xs font-semibold leading-none text-white",children:m})}),(0,i.jsxs)("button",{type:"submit",className:"float-right mb-px flex h-11 items-center justify-center gap-2 self-end rounded-3xl px-4 py-3",style:d?{background:l?"#FCFAFF":"#2B2E33",color:l?"black !important":"white !important"}:{background:"white",backgroundImage:l?"linear-gradient(180deg, #506CF1 0%, #0F26A6 100%)":"none",border:"1px solid var(--Widget-border, rgba(228, 231, 235, 0.40))",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.10), 0 1px 2px -1px rgba(0, 0, 0, 0.10)",transition:"all 0.2s ease-in-out"},onClick:n,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},"aria-label":(0,E.t)("support_widget.floating_button_aria_label"),"aria-expanded":r,"aria-controls":"support-widget",children:[(0,i.jsx)("svg",{className:"icon ".concat(p.className," duration-400 transition-opacity ease-in-out"),"aria-hidden":"true",viewBox:"0 0 18 16",children:(0,i.jsx)("use",{xlinkHref:p.href})}),(0,i.jsx)("div",{className:"duration-400 transition-colors ease-in-out",children:(0,i.jsx)(tT.Z.BodySm,{color:l?d?"text-black":"text-white":d?"text-white":"text-dark",weight:"font-semibold",children:(0,E.t)("help_widget.need_help_fab")})})]})]})})},u_=function(e){var t=e.onClick,r=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=r.current;if(e){var t=e.offsetHeight;e.style.setProperty("--arrow-top","".concat(t,"px"))}},[]),(0,i.jsxs)("div",{className:"relative z-10 mb-[13px]",children:[(0,i.jsxs)("div",{ref:r,className:"w-[320px] rounded-lg bg-[#191B1F] py-2 pl-4 pr-2 text-white dark:bg-[#F7F9FA]",children:[(0,i.jsx)("div",{className:"absolute right-2 top-2",children:(0,i.jsx)("button",{type:"button",className:"-mt-1",onClick:t,children:(0,i.jsx)(D.JO,{type:"hw-tooltip-close"})})}),(0,i.jsxs)(tT.Z.BodySm,{color:"text-[#F7F9FA] dark:text-[#191B1F]",weight:"font-medium",children:[(0,E.t)("help_widget.onboarding_msg_line_1"),(0,i.jsx)("br",{}),(0,E.t)("help_widget.onboarding_msg_line_2")]})]}),(0,i.jsx)("div",{className:"absolute bottom-[-7px] right-[124px] size-[15px] rounded-full bg-[#191B1F] dark:bg-[#F7F9FA]"}),(0,i.jsx)("div",{className:"absolute bottom-[-15px] right-[116px] size-[10px] rounded-full bg-[#191B1F] dark:bg-[#F7F9FA]"})]})},ux=r(818699),uj=r(279460);function uw(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError,n=e.conversationId;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.filename,i=e.signedId,o=e.url;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.createAttachment({conversationId:n}),{signed_id:i,filename:r,url:o,completed:!0})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uw(o,n,i,a,s,"next",e)}function s(e){uw(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})};function uS(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.attachmentId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.pC)(ex.av.helpWidget.deleteAttachment({conversationId:r,attachmentId:n}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uS(o,n,i,a,s,"next",e)}function s(e){uS(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})},uN=function(e){var t=e.conversationId,r=e.all,n=void 0!==r&&r;return(0,es.useQuery)({queryKey:["attachments",t,n],queryFn:function(){return(0,nT.UT)(ex.av.helpWidget.getAttachments({conversationId:t,params:n?{all:"true"}:{}}))},enabled:!!t&&t!==nM.af})};function uP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uC(e){return function(e){if(Array.isArray(e))return uP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uA(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uA(e,t){if(e){if("string"==typeof e)return uP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uP(e,t)}}var uI=function(e){var t,r=e.conversationId,n=(t=(0,o.useState)(function(){return[]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||uA(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],a=n[1],s=(0,o.useRef)({}),l=uN({conversationId:r}).data,c=(0,o.useMemo)(function(){var e=((null==l?void 0:l.attachments)||[]).map(function(e){return{url:e.url,filename:e.filename,completed:e.completed,attachmentId:e.id,status:nM.L9}}),t=i.filter(function(t){return!e.some(function(e){return e.attachmentId===t.attachmentId})});return uC(e).concat(uC(t))},[i,null==l?void 0:l.attachments]),u=function(e,t){a(function(r){return r.map(function(r){return r.url===e?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r,t):r})})},d=uk({onSuccess:function(){},onError:function(e){console.error("Failed to delete attachment:",e)}}).mutateAsync,f=(0,es.useQueryClient)(),m=uO({conversationId:r}).mutateAsync,p=function(e){var t=e.url,r=e.file,n=e.filename;u(t,{status:nM.si}),new uj.TX(r,(0,ex.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(r){s.current[t]&&e.abort(),u(t,{progress:r.loaded/r.total*100})})}}).create(function(e,r){if(e)throw u(t,{status:nM.sM}),Error(String(e));m({signedId:r.signed_id,filename:n,url:t}).then(function(e){var n=(0,ex.Gd)({signed_id:r.signed_id,filename:r.filename}),i=e.id;u(t,{status:nM.L9,attachmentId:i,blobUrl:n,completed:!0})}).catch(function(e){console.error(e)})})};return{uploadAttachments:function(e){var t=e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}});a(uC(i).concat(uC(t)));var r=!0,n=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;p({url:c.url,file:c.file,filename:c.filename})}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}},attachments:c,setAttachments:a,cancelAttachment:function(e){s.current[e]=!0;var t=c.find(function(t){return t.url===e});(null==t?void 0:t.attachmentId)&&d({conversationId:r,attachmentId:t.attachmentId}).then(function(){f.invalidateQueries(["attachments",r])}).catch(function(e){console.error("Failed to delete attachment from backend:",e)}),a(function(t){return t.filter(function(t){return t.url!==e})})}}};function uT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uE(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function uL(e){return function(e){if(Array.isArray(e))return uT(e)}(e)||uE(e)||uD(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uD(e,t){if(e){if("string"==typeof e)return uT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uT(e,t)}}var uM=(0,r(798104).Ue)(function(e,t){return{visibleMessages:[],queuedMessages:[],isRevealing:!1,addMessage:function(r){var n=t().queuedMessages.some(function(e){return e.id===r.id}),i=t().visibleMessages.some(function(e){return e.id===r.id});n||i||(t().isRevealing?e(function(e){return{queuedMessages:uL(e.queuedMessages).concat([r])}}):e(function(e){return{isRevealing:r.show_fading_text_effect,visibleMessages:uL(e.visibleMessages).concat([r])}}))},completeCurrentMessage:function(){var r=t(),n=r.visibleMessages,i=r.queuedMessages,o=n.length-1,a=uL(n);if(a[o]=(s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a[o]),l=l={show_fading_text_effect:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))}),s),i.length>0){var s,l,c=function(e){if(Array.isArray(e))return e}(i)||uE(i)||uD(i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c.slice(1);e({isRevealing:!1,visibleMessages:a}),u.show_fading_text_effect?setTimeout(function(){e({isRevealing:u.show_fading_text_effect,queuedMessages:d,visibleMessages:uL(a).concat([u])})},500):(e({isRevealing:!1,queuedMessages:d,visibleMessages:uL(a).concat([u])}),t().completeCurrentMessage())}else e({isRevealing:!1,visibleMessages:a})},setMessages:function(t){e({isRevealing:!1,queuedMessages:[],visibleMessages:t})},clearMessages:function(){e({isRevealing:!1,queuedMessages:[],visibleMessages:[]})}}});function uR(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uB=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.event,i=e.messageId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.clickButton({conversationId:r,messageId:i}),{event:n})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uR(o,n,i,a,s,"next",e)}function s(e){uR(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})};function uz(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uF=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.text,n=e.virtual_conversation_type;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.createChat(),{text:r,virtual_conversation_type:n})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uz(o,n,i,a,s,"next",e)}function s(e){uz(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){t(e.conversation)},onError:r})};function uU(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var uZ=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.text,i=e.attachment_ids,o=void 0===i?[]:i;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.createChatMessage({id:r}),{text:n,attachment_ids:o})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){uU(o,n,i,a,s,"next",e)}function s(e){uU(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){t(e.message)},onError:r})},uG=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t=e.id,r=e.conversation;return(0,nT.gN)(ex.av.helpWidget.updateConversation({id:t,conversation:r}))},onSuccess:t,onError:r})},uq=function(e){var t=e.channel,r=e.clearVirtualMessages,n=e.conversationId,i=e.setAttachments,o=e.setIsBotProcessing,a=(0,es.useQueryClient)(),s=(0,U.k6)(),l=(0,tc.pm)(),c=uM().addMessage;return{createChatMessage:uZ({onSuccess:function(e){"circle_bot"===t&&o(!0),i([]),a.invalidateQueries(["attachments",n]),c(e)},onError:function(){}}).mutate,createChat:uF({onSuccess:function(e){var t=String(e.id);a.setQueryData(["help-widget","conversations",t],e),r(),s.push("/conversations/".concat(t))},onError:function(){}}).mutate,clickButton:uB({onSuccess:function(){},onError:function(){}}).mutate,updateConversation:uG({onSuccess:function(){a.invalidateQueries(["help-widget","conversations",n])},onError:function(){l.error((0,E.t)("request_failure_message"))}}).mutate}},uV=function(e){var t;return["circle_bot","copilot"].includes(e.channel)&&"bot"===e.author_type&&!!(null==(t=e.content)?void 0:t.trim())},uW=function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={show_fading_text_effect:uV(e)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},uH=function(e){var t=e.conversationId,r=e.enqueueLoadingText,n=e.isVirtualConversation,i=e.setChannel,o=e.setStatus,a=e.setIsBotProcessing,s=e.setIsWaitingForConfirmation,l=e.setIsWaitingInQueue,c=e.setQueuePosition,u=e.markAsRead,d=e.onNewMessage,f=(0,U.k6)(),m=uM().addMessage;(0,ub.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){if("newMessage"===e.event&&e.message){var n,p,b=uW((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e.message),p=p={is_from_websocket:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(p)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(p)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(p,e))}),n));d?d(b):m(b),u({conversationId:t})}else"redirectTo"===e.event&&e.url?f.push(e.url):"updateQueue"===e.event?c(e.position||0):"updateConversation"===e.event&&e.conversation&&(i(e.conversation.channel||null),o(e.conversation.status||null),a(e.conversation.is_bot_processing||!1),r(e.conversation.copilot_action_loading_text||null),s(e.conversation.is_waiting_for_confirmation||!1),l(e.conversation.is_waiting_in_queue||!1),c(e.conversation.queue_position||null))},conversation_id:t,canCreateConnection:!!t&&!n},[t,n])};function uQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uK(e,t){if(e){if("string"==typeof e)return uQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uQ(e,t)}}var uJ=function(e){return e?Math.max(0,2e3-(Date.now()-e)):0},u$=function(){var e,t=(e=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||uK(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],i=(0,o.useRef)([]),a=(0,o.useRef)(null),s=(0,o.useRef)(!1),l=(0,o.useRef)(null),c=(0,o.useCallback)(function(){l.current&&(clearTimeout(l.current),l.current=null)},[]),u=(0,o.useCallback)(function(){if(!s.current&&0!==i.current.length){s.current=!0;var e=i.current[0];i.current=i.current.slice(1),l.current=setTimeout(function(){n(e),a.current=Date.now(),s.current=!1,l.current=null,i.current.length>0&&u()},uJ(a.current))}},[]),d=(0,o.useCallback)(function(){c(),i.current=[],s.current=!1;var e=uJ(a.current);e>0?l.current=setTimeout(function(){n(null),a.current=null,l.current=null},e):(n(null),a.current=null)},[c]),f=(0,o.useCallback)(function(e){if(null===e)return void d();if(e!==r){if(null===r&&!s.current){n(e),a.current=Date.now();return}if(!i.current.includes(e)){var t;i.current=((function(e){if(Array.isArray(e))return uQ(e)})(t=i.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||uK(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]),s.current||u()}}},[d,r,u]);return{copilotLoadingText:r,enqueueLoadingText:f}},uX=r(698173),uY=function(e){return(0,es.useQuery)(["help-widget","conversations",e],function(){return(0,nT.UT)(ex.av.helpWidget.showConversation({id:e}))},{enabled:!!e&&e!==nM.af})};function u0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u1=function(e,t){var r=(0,o.useRef)(!1),n=(0,o.useRef)([]);(0,o.useEffect)(function(){e&&!r.current&&(r.current=!0)},[e]),(0,o.useEffect)(function(){return function(){n.current.length>0&&(n.current.forEach(function(e){return t(e)}),n.current=[]),r.current=!1}},[t]);var i=(0,o.useCallback)(function(){r.current=!1,n.current.length>0&&(n.current.forEach(function(e){return t(e)}),n.current=[])},[t]);return{handleIncomingMessage:(0,o.useCallback)(function(e){var i;if(!r.current)return void t(e);n.current=((function(e){if(Array.isArray(e))return u0(e)})(i=n.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return u0(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u0(e,t)}}(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])},[t]),handleQueueComplete:i,isThinkingQueueActiveRef:r}},u2=function(e){var t,r;return(null!=(r=null==e||null==(t=e.buttons)?void 0:t.length)?r:0)>0},u3=r(71068),u6=function(e){var t=e.attachment,r=e.onCancel;return(0,i.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between gap-2 break-all rounded-2xl border px-4 py-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[t.status===nM.si?(0,i.jsx)(u3.D,{percentage:t.progress||0,size:20,strokeWidth:2}):(0,i.jsx)(D.JO,{type:"hw-paperclip",size:20,className:"text-tertiary"}),t.status===nM.L9?(0,i.jsx)("a",{href:t.blobUrl,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(tT.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,T.truncate)(t.filename,{length:32})})}):(0,i.jsx)(tT.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,T.truncate)(t.filename,{length:34})})]}),(0,i.jsx)("div",{className:"flex items-center justify-between gap-2",children:t.status===nM.si?(0,i.jsxs)(tT.Z.LabelXs,{weight:"semibold",color:"text-disabled",children:[Math.round(t.progress||0),"%"]}):(0,i.jsx)(D.JO,{type:"16-close",size:16,onClick:function(){r(t.url)},className:"text-dark cursor-pointer"})})]})},u5=function(e){var t=e.attachments,r=e.cancelAttachment;return(0,i.jsx)("div",{className:"flex flex-col gap-2 px-4",children:t.length>0&&t.map(function(e){var t,n;return(0,i.jsx)(u6,{attachment:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={status:e.completed?nM.L9:nM.si},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t),onCancel:r},e.url)})})},u4=function(e){var t=e.label,r=e.onClick;return(0,i.jsx)(tl.z,{type:"button",variant:"circle",onClick:r,children:(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",color:"text-inverse",children:t})})},u7=function(e){var t=e.buttonLabel,r=e.subtitle,n=e.title,o=(0,U.k6)();return(0,i.jsxs)("div",{className:"bg-primary flex flex-col items-center justify-center gap-4 py-8",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,i.jsx)(tT.Z.LabelMd,{weight:"bold",color:"text-primary",children:n}),r&&(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",color:"text-tertiary",children:r})]}),(0,i.jsx)(u4,{label:t,onClick:function(){o.push("/")}})]})},u9=function(e){var t=e.channel,r=e.sunshineConversationId;return(0,i.jsx)("div",{className:"bg-primary sticky bottom-0 z-10 rounded-b-2xl p-4",children:(0,i.jsx)(u7,{title:(0,E.t)("help_widget.conversation_page.conversation_closed_cta_title"),buttonLabel:(0,E.t)("help_widget.conversation_page.conversation_closed_cta_button_label"),subtitle:"live_chat"===t&&null!=r?(0,E.t)("help_widget.conversation_page.conversation_closed_cta_subtitle"):void 0})})},u8=r(342417);function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var dr=function(e){var t,r,n,a=e.onSubmit,s=e.placeholder,l=e.allowAttachments,c=void 0!==l&&l,u=e.uploadAttachments,d=e.attachments,f=void 0===d?[]:d,m=e.isSubmitDisabled,p=void 0!==m&&m,b=(t=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return de(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,uh.TC)().isDarkAppearance,g=(0,o.useRef)(null),_=f.every(function(e){return e.completed}),x=h.trim().length>0,j=!p&&(x||f.length>0&&_),w=function(){var e=g.current;if(e){e.style.height="".concat(20,"px");var t=e.scrollHeight;e.style.height="".concat(t,"px")}};(0,o.useEffect)(function(){w()},[h]),(0,o.useEffect)(function(){var e;null==(e=g.current)||e.focus()},[]),(0,o.useEffect)(function(){if(!p){var e;null==(e=g.current)||e.focus()}},[p]);var O=function(){j&&(a(h.trim()),y(""),setTimeout(function(){var e;null==(e=g.current)||e.focus()},0))},S=(0,u8.uI)({onDrop:u,noClick:!0,disabled:!c}),k=S.getRootProps,N=S.getInputProps,P=S.inputRef;return(0,i.jsxs)("div",(r=dt({className:"bg-primary border-primary relative mb-px w-full rounded-2xl border px-4 py-3 shadow-[0_1px_2px_0_rgba(0,0,0,0.05)] ring-1 ring-transparent transition-all duration-200 focus-within:border-transparent focus-within:ring-1 focus-within:ring-[#D2D7DB] hover:border-transparent hover:ring-2 hover:ring-[rgba(107,71,210,0.24)] focus-within:hover:ring-1 focus-within:hover:ring-[#D2D7DB]"},k()),n=n={children:[(0,i.jsx)("input",dt({},N())),(0,i.jsx)(tT.Z.BodySm,{as:"div",children:(0,i.jsx)(ux.E,{className:"max-h-[100px]",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:(0,i.jsx)("textarea",{ref:g,value:h,onChange:function(e){return y(e.target.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O())},placeholder:void 0===s?"":s,className:"text-darkest placeholder:text-light focus:placeholder:text-default w-full resize-none border-none bg-transparent p-0 align-middle text-sm leading-5 placeholder:opacity-100 focus:outline-none focus:ring-0"})})}),(0,i.jsxs)("div",{className:(0,re.A)("mt-4 flex flex-row items-end",{"justify-between":c,"justify-end":!c}),children:[c&&(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.conversation_page.help_input_attachment_tooltip"),placement:"top",arrow:!1,interactive:!1,children:(0,i.jsx)("button",{type:"button",onClick:function(e){var t;e.preventDefault(),null==(t=P.current)||t.click()},className:"border-primary flex size-8 items-center justify-center rounded-3xl border",children:(0,i.jsx)(D.JO,{type:"16-hw-paperclip",size:16,useWithFillCurrentColor:!0,className:"text-default"})})}),(0,i.jsx)("button",{type:"button",onClick:O,disabled:!j,className:"size-8",children:(0,i.jsx)(D.JO,{type:v?j?"hw-help-submit-enabled-dark-mode":"hw-help-submit-disabled-dark-mode":j?"sw-help-submit-enabled":"sw-help-submit-disabled",size:32,className:"!w-8"})})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))},dn=function(e){var t=e.attachments,r=e.channel,n=e.isBotProcessing,o=e.onSendMessage,a=e.status,s=e.sunshineConversationId,l=e.uploadAttachments,c=uM(),u=c.visibleMessages,d=c.queuedMessages,f=c.isRevealing;if("closed"===a)return(0,i.jsx)(u9,{channel:r,sunshineConversationId:s});var m=u2(u[u.length-1]);return(0,i.jsx)("div",{className:"bg-primary shrink-0 rounded-b-3xl",children:(0,i.jsx)("div",{className:"mx-4 pb-3 pt-[2px]",children:(0,i.jsx)(dr,{onSubmit:o,placeholder:(0,E.t)("help_widget.conversation_page.help_input_placeholder"),allowAttachments:"circle_bot"!==r,uploadAttachments:l,attachments:t,isSubmitDisabled:n||m||d.length>0||f})})})},di=r(415036),da=r(70527),ds=r(161574),dl=r(710249),dc=r(873767),du=r(185558),dd=r(645899),df=r(134549),dm=function(e){var t=e.count;return[di,da,ds,dl,dc,du,dd,df].sort(function(){return Math.random()-.5}).slice(0,t||1).map(function(e,t){return{id:t+1,name:"User ".concat(t+1),avatarUrl:e}})},dp=function(e){var t=e.count,r=e.size,n=dm({count:t});return(0,i.jsx)("div",{className:"flex -space-x-2 rounded-full",children:n.map(function(e,t){return(0,i.jsx)("div",{className:"rounded-full border-white z-[".concat(t,"]"),children:(0,i.jsx)(rw.W,{src:e.avatarUrl,size:r,name:e.name,hasBorder:!0})},e.id)})})},db=function(e){var t=e.queuePosition;return 0===t?(0,E.t)("help_widget.queue_banner.next_in_line"):1===t?(0,E.t)("help_widget.queue_banner.one_person_ahead"):(0,E.t)("help_widget.queue_banner.people_ahead",{count:t})},dh=function(e){var t=e.queuePosition,r=db({queuePosition:t});return(0,i.jsxs)("div",{className:"bg-primary border-primary mx-4 flex items-center gap-2 rounded-2xl border px-4 py-2",children:[(0,i.jsx)(dp,{count:Math.min(t||0,2),size:"6"}),(0,i.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:r}),(0,i.jsx)(tT.Z.LabelXs,{color:"text-tertiary",children:(0,E.t)("help_widget.queue_banner.wait_message")})]}),(0,i.jsx)("div",{className:"shrink-0",children:(0,i.jsx)(ts.a,{className:"!p-0"})})]})};let dy=r.p+"static/react/components/HelpWidget/assets/icons/CircleAIBot-avatar-57a70a007ac7811e.png";var dv=function(){return(0,i.jsx)("div",{className:"flex size-4 shrink-0 justify-center overflow-hidden rounded-full",children:(0,i.jsx)("img",{src:dy,alt:(0,E.t)("help_widget.home_page.copilot_alt"),className:"size-full object-contain",loading:"eager"})})};function dg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d_=function(){var e,t=(e=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return dg(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dg(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return(0,o.useEffect)(function(){var e=requestAnimationFrame(function(){return n(!0)});return function(){return cancelAnimationFrame(e)}},[]),(0,i.jsx)("div",{className:"flex flex-col justify-end",children:(0,i.jsxs)("div",{className:(0,re.A)("flex flex-row items-center gap-3 transition-opacity duration-300 ease-out",r?"opacity-100":"opacity-0"),children:[(0,i.jsx)(dv,{}),(0,i.jsx)("div",{className:"bg-secondary rounded-2xl px-3 py-2",children:(0,i.jsxs)("div",{className:"typing flex items-center gap-1",children:[(0,i.jsx)("span",{className:"inline-block size-1 rounded-full bg-[#717680]"}),(0,i.jsx)("span",{className:"inline-block size-1.5 rounded-full bg-[#717680]"}),(0,i.jsx)("span",{className:"inline-block size-2 rounded-full bg-[#717680]"})]})})]})})};function dx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||dw(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dw(e,t){if(e){if("string"==typeof e)return dx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dx(e,t)}}var dO=function(e){var t=e.show,r=void 0===t||t,n=e.title,a=e.onQueueComplete,s=dj((0,o.useState)(r),2),l=s[0],c=s[1],u=dj((0,o.useState)(n||""),2),d=u[0],f=u[1],m=(0,o.useRef)([]),p=(0,o.useRef)(null),b=(0,o.useRef)(!1),h=(0,o.useCallback)(function(){return p.current?Math.max(0,2e3-(Date.now()-p.current)):0},[]),y=(0,o.useCallback)(function(){if(!b.current){var e=m.current;if(0!==e.length){b.current=!0;var t=e[0];m.current=e.slice(1),setTimeout(function(){f(t),p.current=Date.now(),b.current=!1,m.current.length>0&&setTimeout(function(){return y()},0)},h())}}},[h]);return((0,o.useEffect)(function(){if(n){if(!d){f(n),p.current=Date.now();return}if(n!==d&&!m.current.includes(n)){var e;m.current=((function(e){if(Array.isArray(e))return dx(e)})(e=m.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dw(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([n]),b.current||setTimeout(function(){return y()},0)}}},[n,d,y]),(0,o.useEffect)(function(){if(r)return void c(!0);if(l){var e=setTimeout(function(){c(!1),p.current=null,m.current=[],b.current=!1,null==a||a()},h()+300);return function(){clearTimeout(e)}}},[r,l,d,a,h]),l)?(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsxs)("div",{id:"copilot-thinking-card",className:"bg-primary animate-slide-in flex items-start gap-1 rounded-2xl border border-[#E4E7EB] px-4 py-3 shadow-[0px_1px_2px_0px_rgba(0,0,0,0.05)] transition-all duration-300 dark:border-[#42464D]",children:[(0,i.jsx)(D.JO,{type:"20-hw-copilot-thinking-star",size:20,className:"animate-spin-clock-wise"}),(0,i.jsx)("span",{className:"shimmer-text",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",children:null!=d?d:""})})]})}):null},dS=function(e){var t=e.channel,r=e.copilotLoadingText,n=e.isBotProcessing,o=e.isWaitingForConfirmation,a=e.isWaitingInQueue,s=e.onQueueComplete,l=e.queuePosition,c=(0,L.wh)().currentCommunitySettings,u=uM().isRevealing,d=!!(null==c?void 0:c.copilot_v2_enabled),f=d&&!!r&&!o&&("Validating..."===r||!u),m=n&&!r,p="live_chat"===t&&a;return(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(dO,{show:f,title:r,onQueueComplete:s}),(m||p)&&(0,i.jsxs)("div",{className:"mt-4 flex flex-col",children:[m&&(0,i.jsx)(d_,{}),p&&null!==l&&(0,i.jsx)(dh,{queuePosition:l})]})]})},dk=function(e){var t=e.wrapperClassName;return(0,i.jsxs)("div",{className:(0,re.A)("mt-4 flex flex-1 animate-pulse flex-col justify-start gap-4 px-4",void 0===t?"":t),children:[(0,i.jsxs)("div",{className:"flex flex-row items-start gap-1.5",children:[(0,i.jsx)("div",{className:"flex flex-1 flex-col gap-2",children:(0,i.jsx)("div",{className:"bg-secondary h-[42px] w-full rounded-2xl"})}),(0,i.jsx)("div",{className:"bg-secondary size-4 shrink-0 rounded-full"})]}),(0,i.jsxs)("div",{className:"flex flex-row items-start gap-1.5",children:[(0,i.jsx)("div",{className:"bg-secondary size-4 shrink-0 rounded-full"}),(0,i.jsx)("div",{className:"flex flex-1 flex-col gap-2",children:(0,i.jsx)("div",{className:"bg-secondary h-[42px] w-full rounded-2xl"})})]})]})};function dN(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var dP=function(e){var t=e.conversationId,r=(0,es.useMutation)({mutationFn:function(e){var t,r=e.id;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.leaveQueue({id:r}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){dN(o,n,i,a,s,"next",e)}function s(e){dN(o,n,i,a,s,"throw",e)}a(void 0)})})()}}).mutate,n=(0,un.tQ)(),o=n.setIsShowingLeaveWarning,a=n.toggleWidget,s=n.leaveWarningTrigger,l=(0,U.k6)();return(0,i.jsx)("div",{className:"flex h-full flex-1 flex-col items-center justify-center px-6 py-4",children:(0,i.jsxs)("div",{className:"max-w-sm text-center",children:[(0,i.jsxs)("div",{className:"mx-auto mb-5 flex flex-col gap-2 px-5",children:[(0,i.jsx)(tT.Z.BodyLg,{weight:"semibold",color:"text-primary",size:"text-xl",children:(0,E.t)("help_widget.live_chat.leave_chat.confirmation_title")}),(0,i.jsx)(tT.Z.BodyMd,{weight:"normal",color:"text-tertiary",children:(0,E.t)("help_widget.live_chat.leave_chat.confirmation_body")})]}),(0,i.jsxs)("div",{className:"mx-auto flex w-[140px] flex-col items-center gap-2",children:[(0,i.jsx)(tl.z,{variant:"circle",onClick:function(){o(!1)},className:"h-8 w-full px-4",children:(0,E.t)("help_widget.live_chat.leave_chat.keep_open_button")}),(0,i.jsx)(tl.z,{variant:"secondary",onClick:function(){r({id:t}),o(!1),"back_button"===s?l.push("/conversations"):a({shouldTriggerOnWidgetClose:!1})},className:"h-8 w-full px-4",children:(0,E.t)("help_widget.live_chat.leave_chat.leave_queue_button")})]})]})})},dC=function(e){var t=e.children,r=e.className,n=e.id,o=(0,un.tQ)(),a=o.isExpanded,s=o.sidebarTransitionDuration,l=(0,tr.ef)();return(0,i.jsx)("div",{id:n,className:(0,re.A)(r||"",{"w-[736px]":a&&!l,"w-[400px]":!a&&!l,"w-full":l}),style:l?void 0:{width:a?"736px":"400px",transition:"width ".concat(s)},children:t})},dA=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,dI=function(e){try{return e.replace(dA,function(e,t,r){return"".concat(t,'<a class="break-all" href=\'').concat(r,"' target='_blank' rel='noopener noreferrer'>").concat(r,"</a>")})}catch(t){return e}},dT=function(e,t){return"boolean"===t?e?(0,E.t)("yes"):(0,E.t)("no"):"humanize"===t&&"string"==typeof e?(0,T.startCase)(e):"array"===t&&Array.isArray(e)?e.join(", "):String(e)},dE=function(e){return"boolean"==(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)?e?(0,E.t)("yes"):(0,E.t)("no"):Array.isArray(e)?e.join(", "):String(e)},dL=r(311271),dD=function(e){var t=e.title,r=e.url,n=e.children,o=(0,dL.v)();return(0,i.jsxs)("div",{className:"bg-primary border-primary flex w-[368px] min-w-0 flex-1 flex-col items-start gap-3 self-stretch rounded-2xl border p-4",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:[(0,i.jsx)(tT.Z.BodySm,{weight:"font-bold",color:"text-darkest",children:t}),n,(0,i.jsx)(tl.z,{onClick:function(){return o(r)},variant:"circle",className:"w-full",children:(0,i.jsx)(tT.Z.BodySm,{weight:"font-medium",color:"text-primary",children:(0,E.t)("help_widget.copilot.chat_card.preview_button")})})]})};function dM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dR={name:{label:(0,E.t)("settings.invite_members.details_tab.member_details.name"),type:"string"},email:{label:(0,E.t)("settings.invite_members.details_tab.member_details.email"),type:"string"}};function dB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dB(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dF={name:{label:(0,E.t)("account.member_edit_profile_form.name"),type:"string"},member_tags:{label:(0,E.t)("account.member_edit_profile_form.member_tags_label"),type:"string"},admin:{label:(0,E.t)("account.member_edit_profile_form.admin"),type:"boolean"},is_flagged:{label:(0,E.t)("account.member_edit_profile_form.is_flagged"),type:"boolean"},messaging_disabled:{label:(0,E.t)("account.member_edit_profile_form.messaging_disabled"),type:"boolean"},connect_initiation_disabled:{label:(0,E.t)("account.member_edit_profile_form.connect_initiation_disabled"),type:"boolean"}};function dU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dU(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dG={label:{label:(0,E.t)("profile_fields.field_modal.label",{defaultValue:"Name"}),type:"string"},key:{label:(0,E.t)("profile_fields.field_modal.key",{defaultValue:"Key"}),type:"string"},placeholder:{label:(0,E.t)("profile_fields.field_modal.placeholder_name",{defaultValue:"Placeholder"}),type:"string"},field_type:{label:(0,E.t)("profile_fields.field_modal.field_type",{defaultValue:"Field type"}),type:"humanize"},hidden:{label:(0,E.t)("profile_fields.field_modal.hidden",{defaultValue:"Internal field"}),type:"boolean"},required:{label:(0,E.t)("profile_fields.field_modal.required",{defaultValue:"Mark this field as required"}),type:"boolean"},form_locations:{label:(0,E.t)("profile_fields.form_locations",{defaultValue:"Form locations"}),type:"string"},profile_view:{label:(0,E.t)("profile_fields.pages.profile_view.title",{defaultValue:"Visible in full profile view"}),type:"boolean"}},dq=["signup","edit_profile","community_view"],dV=function(e){var t=[],r="signup"in e?e.signup:null,n="edit_profile"in e?e.edit_profile:null;return(!0===r&&t.push((0,E.t)("profile_fields.pages.signup.title",{defaultValue:"Signup form"})),!0===n&&t.push((0,E.t)("profile_fields.pages.edit_profile.title",{defaultValue:"Edit profile form"})),0===t.length)?null:1===t.length?t[0]:2===t.length?"".concat(t[0]," and ").concat(t[1]):t.join(", ")};function dW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||dQ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dQ(e,t){if(e){if("string"==typeof e)return dW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dW(e,t)}}var dK={name:{label:(0,E.t)("name",{defaultValue:"Name"}),type:"string"},space_group_name:{label:(0,E.t)("space_groups.space_group",{defaultValue:"Space Group"}),type:"string"},space_type:{label:(0,E.t)("spaces.form.create.space_types.label"),type:"humanize",defaultValue:(0,E.t)("settings.spaces.space_types.basic")},course_type:{label:(0,E.t)("spaces.form.create.course_types.label"),type:"string"},access:{label:(0,E.t)("spaces.form.create.space_access_label",{defaultValue:"Access"}),type:"humanize"},auto_rsvp_invited_attendees:{label:(0,E.t)("spaces.form.event_auto_rsvp_enabled"),type:"boolean"},notification_type:{label:(0,E.t)("spaces.form.create.notification_types.label"),type:"string"}},dJ=["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"],d$=["space_group_id"].concat(function(e){if(Array.isArray(e))return dW(e)}(dJ)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(dJ)||dQ(dJ)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());function dX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||d1(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d0(e){return function(e){if(Array.isArray(e))return dX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d1(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d1(e,t){if(e){if("string"==typeof e)return dX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dX(e,t)}}var d2={space:dK,profile_field:dG,member_profile:dF},d3={get member_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.members_matching")},get invitation_link_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.invitation_links")},get member_tag_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.member_tags")},get profile_field_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.profile_fields")},get space_group_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.space_groups")},get space_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.spaces")},get access_group_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.access_groups")},get community_segment_listing_card(){return(0,E.t)("help_widget.copilot.chat_card.community_segments")}},d6=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||!!Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},d5=function(e){return"string"==typeof e?e:""},d4=function(e,t){var r;return" ".concat(e.label,": ").concat(dT("number"==typeof(r=e.value)?String(r):r,t||"string"))},d7=function(e,t){return t?"Link: [".concat(t,"](").concat(e,")"):"Link: ".concat(e)},d9=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join("\n\n")},d8=function(e,t){var r=[];return Object.entries(t).forEach(function(t){var n,i=dY(t,2),o=i[0],a=i[1],s=null!=(n=e[o])?n:a.defaultValue;null!=s&&d6(s)&&r.push({label:a.label,value:s})}),r},fe=function(e,t){var r=[];return Object.entries(e).forEach(function(e){var n=dY(e,2),i=n[0],o=n[1];!(i in t)&&null!=o&&d6(o)&&r.push({label:(0,T.startCase)(i),value:o})}),r},ft=function(e,t){return e.map(function(e){var r=Object.values(t).find(function(t){return t.label===e.label});return d4(e,null==r?void 0:r.type)}).join("\n")},fr=function(e){var t=e.resource,r=e.params,n=e.url,i=e.title;if("member"===t){var o=(Array.isArray(r.members)?r.members:[]).map(function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)!="object"||null===e?"":ft(d8(e,dR),dR)}).filter(Boolean).join("\n\n"),a=n?d7(n,i):"";return d9(i,o,a)}var s=d2[t]||{},l=ft(d0(d8(r,s)).concat(d0(fe(r,s))),s),c=n?d7(n,i):"";return d9(i,l,c)},fn=function(e){var t=e.title,r=e.params,n=[];return Object.entries(r).forEach(function(e){var t=dY(e,2),r=t[0],i=t[1];null!=i&&""!==i&&d6(i)&&n.push({label:(0,T.startCase)(r),value:i})}),d9(t,n.map(function(e){return d4(e)}).join("\n"))},fi=function(e){var t=(0,E.t)("settings.spaces.space_types.".concat(e)).toLowerCase();return(0,E.t)("help_widget.copilot.chat_card.space_types",{space_type:t})},fo=function(e){var t=e?"public":"private",r="help_widget.copilot.chat_card.tag_visibility.".concat(t),n=(0,E.t)(r);return n===r?t:n},fa=function(e){var t=d5(e.name)||d5(e.label)||d5(e.title)||"",r=[],n=d5(e.email);n&&r.push(n);var i=d5(e.status);i&&r.push(i);var o=d5(e.space_type);o&&r.push(fi(o));var a=d5(e.field_type);return a&&r.push(a),void 0!==e.is_public&&r.push(fo(!!e.is_public)),{label:t,details:r}},fs=function(e,t){var r=e.details.length?" (".concat(e.details.join(", "),")"):"";return"".concat(t+1,". ").concat(e.label).concat(r)},fl=function(e,t){var r=e.resources;return(null==r?void 0:r.length)?d9(d3[t]||"",r.map(fa).map(fs).join("\n")):""},fc=function(e){var t=e.title,r=e.url;return r?d7(r,t):t||""},fu=function(e){if(!e)return e;var t=e;t=(t=t.replaceAll(/<br\s?\/?>/gi,"\n")).replaceAll(/<\/p>/gi,"\n\n");var r="",n=!1,i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;"<"===c?n=!0:">"===c?n=!1:n||(r+=c)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.trim()},fd=function(e){return e.cards?e.cards.map(function(e){return{type:e.type,content:e.content}}):[]},ff=function(e){if(!e||0===e.length)return"";var t=e.map(function(e){return"- ".concat(e.filename)}).join("\n");return"[Attachments]\n".concat(t)},fm=function(e){var t=e.type,r=e.content;switch(t){case"preview_card":return fr(r);case"confirmation_card":return fn(r);case"link_card":return fc(r);case"member_listing_card":case"invitation_link_listing_card":case"member_tag_listing_card":case"profile_field_listing_card":case"space_group_listing_card":case"space_listing_card":case"access_group_listing_card":case"community_segment_listing_card":return fl(r,t);default:return""}},fp=function(e){if(!e||0===e.length)return"";var t=(0,E.t)("help_widget.conversation_page.sources_title"),r=e.map(function(e,t){return"".concat(t+1,". ").concat(e.title," [").concat(e.url,"]")}).join("\n");return"".concat(t,": \n").concat(r)},fb=function(e){var t,r,n=[fu(e.content)];e.attachments&&e.attachments.length>0&&n.push(ff(e.attachments)),e.buttons&&e.buttons.length>0&&n.push((t=e.buttons,r=e.selected_button,t&&0!==t.length?"[Options]\n".concat(t.map(function(e){var t=e.label;return e.sublabel&&(t+=" (".concat(e.sublabel,")")),r===e.event&&(t+=" [SELECTED]"),"- ".concat(t)}).join("\n")):""));var i=fd(e);return i&&i.length>0&&n.push(i&&0!==i.length?i.map(fm).filter(Boolean).join("\n\n"):""),e.sources&&e.sources.length>0&&n.push(fp(e.sources)),n.filter(Boolean).join("\n\n")},fh=function(e){var t=e.message;return(0,i.jsxs)("div",{className:"mx-4 flex items-center",children:[(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"}),(0,i.jsx)("div",{className:"mx-5 grow-0 uppercase",children:(0,i.jsx)(tT.Z.LabelXxs,{color:"text-disabled",weight:"bold",children:t.content})}),(0,i.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"})]})},fy=r(42693),fv=r(81181),fg=r(767132),f_=function(e){var t=e.url,r=e.filename;return(0,i.jsxs)("div",{className:"bg-primary border-primary flex items-center gap-2 break-all rounded-2xl border px-4 py-2",children:[(0,i.jsx)(D.JO,{type:"hw-paperclip",size:20,className:"text-tertiary"}),(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(tT.Z.LabelXs,{weight:"medium",color:"text-darkest flex",children:(0,T.truncate)(r,{length:52})})})]})},fx=function(e){var t=e.attachments;return 0===t.length?null:(0,i.jsx)("div",{className:"flex flex-col gap-1",children:t.map(function(e){return(0,i.jsx)(f_,{url:e.url,filename:e.filename},e.id)})})},fj=function(e){var t=e.label,r=e.sublabel,n=e.event,o=e.selected,a=e.setSelected,s=e.preferred,l=void 0!==s&&s,c=e.onClick,u=e.disabled,d=void 0!==u&&u,f=o===n,m=null===o,p=m&&!d,b=l&&m&&"bg-[#2B2E33] dark:bg-white dark:text-primary text-black dark:hover:bg-[#F7F9FA]",h=(0,re.A)({"hover:bg-secondary cursor-pointer":p&&!l,"hover:bg-[#42464D] cursor-pointer":p&&l,"shadow-[0px_0px_0px_3px_rgba(113,118,128,0.30)] border-[#717680] dark:border-[#D2D7DB]":f,"cursor-not-allowed":!p,"w-full":!!r}),y=m||f?l&&m?"text-white dark:text-gray-900":"text-gray-900 dark:text-white":"text-disabled";return(0,i.jsxs)("button",{disabled:d,type:"button",className:(0,re.A)("rounded-lg border border-primary px-4 py-2 text-sm font-medium flex gap-2 items-center justify-center",b,h),onClick:function(){m&&(a(n),c())},children:[l&&(0,i.jsx)(dp,{count:3,size:"5"}),(0,i.jsxs)(er.T1,{weight:"medium",color:y,children:[t,r&&"  ".concat(r)]})]})},fw=function(e){var t=e.title,r=e.attributes,n=(Array.isArray(r[0])?r:[r]).map(function(e){return e.filter(function(e){return null!==e.value&&void 0!==e.value&&""!==e.value})}).filter(function(e){return e.length>0});return(0,i.jsxs)("div",{className:"bg-primary border-primary flex w-[368px] min-w-0 flex-1 flex-col items-start gap-3 self-stretch rounded-2xl border p-4",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:[(0,i.jsx)(tT.Z.BodySm,{weight:"font-bold",color:"text-darkest",children:t}),(0,i.jsx)("div",{className:"flex w-full flex-col gap-3",children:n.map(function(e,t){return(0,i.jsx)("ul",{className:"block w-full text-sm font-normal leading-[0]",children:e.map(function(e){return(0,i.jsxs)("li",{className:"text-darkest mb-0 ms-[calc(1.5*var(--list-marker-font-size,0))] text-sm not-italic leading-5",children:[(0,i.jsxs)(tT.Z.BodySm,{as:"span",weight:"font-bold",color:"text-darkest",children:[e.label,":"," "]}),(0,i.jsx)(tT.Z.BodySm,{as:"span",color:"text-darkest",children:String(e.value)})]},e.label)})},t)})})]})},fO=function(e){var t=e.name,r=e.description,n=e.member_count,o=null!=n?(0,E.t)("help_widget.copilot.confirmation_card.members_count",{count:n}):void 0;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.access_group_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.description"),value:r},{label:(0,E.t)("help_widget.copilot.confirmation_card.number_of_members"),value:o}]})},fS=function(e){var t=function(e){return"boolean"==typeof e?e?(0,E.t)("help_widget.copilot.confirmation_card.yes"):(0,E.t)("help_widget.copilot.confirmation_card.no"):e},r=[{label:(0,E.t)("help_widget.copilot.confirmation_card.community_name"),value:e.name},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_locale"),value:e.locale},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_is_private"),value:t(e.is_private)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_desktop_app_enabled"),value:t(e.desktop_app_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_brand_color"),value:e.brand_color},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_brand_dark_color"),value:e.brand_dark_color},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_reply_to_email"),value:e.reply_to_email},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_switcher_enabled"),value:t(e.community_switcher_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_deactivate_account_enabled"),value:t(e.deactivate_account_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_allow_profile_search_indexing"),value:t(e.allow_profile_search_indexing)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_truncate_post_body_in_email_notifications"),value:t(e.truncate_post_body_in_email_notifications)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_custom_cta_for_share_links"),value:t(e.custom_cta_for_share_links)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_default_search_sorting"),value:e.default_search_sorting},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_hide_emails_on_member_profiles"),value:t(e.hide_emails_on_member_profiles)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_allow_members_to_go_live"),value:t(e.allow_members_to_go_live)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_allow_moderator_csv_download"),value:t(e.allow_moderator_csv_download)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_ios_app_enabled"),value:t(e.ios_app_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_show_ios_app_banner"),value:t(e.show_ios_app_banner)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_weekly_digest_enabled"),value:t(e.weekly_digest_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_messaging_enabled"),value:t(e.messaging_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_member_to_member_messaging_enabled"),value:t(e.member_to_member_messaging_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_group_messaging_enabled"),value:t(e.group_messaging_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_voice_messages_enabled"),value:t(e.voice_messages_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_legal_email"),value:e.legal_email},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_legal_address"),value:e.legal_address},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_hide_circle_discover"),value:t(e.hide_circle_discover)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_white_label"),value:t(e.white_label)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_enforce_otp_for_signup"),value:t(e.enforce_otp_for_signup)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_content_copilot_enabled"),value:t(e.content_copilot_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_activity_scores_enabled"),value:t(e.activity_scores_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_ai_summaries_enabled"),value:t(e.ai_summaries_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_sso_enabled"),value:t(e.sso_enabled)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_enable_state_param"),value:t(e.enable_state_param)},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_custom_sign_up"),value:t(e.custom_sign_up)}];return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_community"),attributes:r})},fk=function(e){var t=e.title,r=e.people_count,n=null!=r?(0,E.t)("help_widget.copilot.confirmation_card.people_count",{count:r}):void 0;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.segment_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.people"),value:n}]})},fN=function(e){var t=e.name,r=e.status,n=e.members_joined_count,o=null!=n?(0,E.t)("help_widget.copilot.confirmation_card.members_count",{count:n}):void 0;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.invite_link_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.status"),value:r},{label:(0,E.t)("help_widget.copilot.confirmation_card.number_of_members_joined"),value:o}]})},fP=function(e){var t=e.name,r=e.email;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.member_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.email"),value:r}]})},fC=function(e){var t=e.label,r=e.field_type;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_profile_field"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.field_type"),value:r}]})},fA=function(e){var t=e.name,r=e.space_group,n=e.type,o=e.access;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_space"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.space_group"),value:r},{label:(0,E.t)("help_widget.copilot.confirmation_card.type"),value:n},{label:(0,E.t)("help_widget.copilot.confirmation_card.access"),value:o}]})},fI=function(e){var t=e.name,r=e.member_count,n=null!=r?(0,E.t)("help_widget.copilot.confirmation_card.members_count",{count:r}):void 0;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.space_group_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.number_of_members"),value:n}]})},fT=function(e){var t,r=e.name,n=e.is_public;return void 0!==n&&(t=n?(0,E.t)("help_widget.copilot.confirmation_card.yes"):(0,E.t)("help_widget.copilot.confirmation_card.no")),(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.tag_title"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:r},{label:(0,E.t)("help_widget.copilot.confirmation_card.public"),value:t}]})};function fE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fL=function(e){var t=e.access_group,r=e.community_members,n=[{label:(0,E.t)("help_widget.copilot.confirmation_card.access_group_name"),value:t.name},{label:(0,E.t)("help_widget.copilot.confirmation_card.access_group_description"),value:t.description},{label:(0,E.t)("help_widget.copilot.confirmation_card.number_of_members"),value:t.member_count},{label:(0,E.t)("help_widget.copilot.confirmation_card.number_of_spaces"),value:t.spaces_count}],o=(void 0===r?[]:r).map(function(e){return[{label:(0,E.t)("help_widget.copilot.confirmation_card.community_member_name"),value:e.name},{label:(0,E.t)("help_widget.copilot.confirmation_card.community_member_email"),value:e.email}]});return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_access_group_members"),attributes:[n].concat(function(e){if(Array.isArray(e))return fE(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return fE(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fE(e,t)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})};function fD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||fB(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fR(e){return function(e){if(Array.isArray(e))return fD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fB(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fB(e,t){if(e){if("string"==typeof e)return fD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fD(e,t)}}var fz={name:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.name")},type:"string"},email:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.email")},type:"string"},locale:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.locale")},type:"string"},time_zone:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.time_zone")},type:"string"},make_my_email_public:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.make_my_email_public")},type:"boolean"},messaging_enabled:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.messaging_enabled")},type:"boolean"},visible_in_member_directory:{get label(){return(0,E.t)("help_widget.copilot.confirmation_card.visible_in_member_directory")},type:"boolean"}},fF=function(e){var t=e.params,r=Object.entries(fz).map(function(e){var r=fM(e,2),n=r[0],i=r[1],o=i.label,a=i.type;return{label:o,value:n in t?dT(t[n],a):null}}),n=Object.entries(t).filter(function(e){var t=fM(e,2),r=t[0],n=t[1];return!(r in fz)&&null!=n}).map(function(e){var t=fM(e,2),r=t[0],n=t[1];return{label:(0,T.startCase)(r),value:dE(n)}});return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_user_profile"),attributes:fR(r).concat(fR(n))})},fU=function(e){var t=e.name,r=e.status;return(0,i.jsx)(fw,{title:(0,E.t)("help_widget.copilot.confirmation_card.title_form"),attributes:[{label:(0,E.t)("help_widget.copilot.confirmation_card.name"),value:t},{label:(0,E.t)("help_widget.copilot.confirmation_card.status"),value:r}]})},fZ={community:function(e){return(0,i.jsx)(fS,{name:e.name,locale:e.locale,is_private:e.is_private,desktop_app_enabled:e.desktop_app_enabled,brand_color:e.brand_color,brand_dark_color:e.brand_dark_color,reply_to_email:e.reply_to_email,community_switcher_enabled:e.community_switcher_enabled,deactivate_account_enabled:e.deactivate_account_enabled,allow_profile_search_indexing:e.allow_profile_search_indexing,truncate_post_body_in_email_notifications:e.truncate_post_body_in_email_notifications,custom_cta_for_share_links:e.custom_cta_for_share_links,default_search_sorting:e.default_search_sorting,hide_emails_on_member_profiles:e.hide_emails_on_member_profiles,allow_members_to_go_live:e.allow_members_to_go_live,allow_moderator_csv_download:e.allow_moderator_csv_download,ios_app_enabled:e.ios_app_enabled,show_ios_app_banner:e.show_ios_app_banner,weekly_digest_enabled:e.weekly_digest_enabled,messaging_enabled:e.messaging_enabled,member_to_member_messaging_enabled:e.member_to_member_messaging_enabled,group_messaging_enabled:e.group_messaging_enabled,voice_messages_enabled:e.voice_messages_enabled,legal_email:e.legal_email,legal_address:e.legal_address,hide_circle_discover:e.hide_circle_discover,white_label:e.white_label,enforce_otp_for_signup:e.enforce_otp_for_signup,content_copilot_enabled:e.content_copilot_enabled,activity_scores_enabled:e.activity_scores_enabled,ai_summaries_enabled:e.ai_summaries_enabled,sso_enabled:e.sso_enabled,enable_state_param:e.enable_state_param,custom_sign_up:e.custom_sign_up})},community_member:function(e){return(0,i.jsx)(fP,{name:e.name,email:e.email})},space_group:function(e){return(0,i.jsx)(fI,{name:e.name,member_count:e.member_count})},space:function(e){return(0,i.jsx)(fA,{name:e.name,space_group:e.space_group,type:e.type,access:e.access})},invitation_link:function(e){return(0,i.jsx)(fN,{name:e.name,status:e.status,members_joined_count:e.members_joined_count})},member_tag:function(e){return(0,i.jsx)(fT,{name:e.name,is_public:e.is_public})},access_group:function(e){return(0,i.jsx)(fO,{name:e.name,description:e.description,member_count:e.member_count})},profile_field:function(e){return(0,i.jsx)(fC,{label:e.label,field_type:e.field_type})},community_segment:function(e){return(0,i.jsx)(fk,{title:e.title,people_count:e.people_count})},access_group_member:function(e){return(0,i.jsx)(fL,{access_group:e.access_group,community_members:e.community_members})},user_profile:function(e){return(0,i.jsx)(fF,{params:e})},form:function(e){return(0,i.jsx)(fU,{name:e.name,status:e.status})}},fG=function(e){var t=e.title,r=e.resources,n=e.emptyStateText,o=e.renderItem,a=e.getItemKey;return(0,i.jsxs)("div",{className:"bg-primary border-primary flex w-[368px] min-w-0 flex-1 flex-col items-start gap-3 self-stretch rounded-2xl border p-4",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:[(0,i.jsx)(tT.Z.BodySm,{weight:"font-bold",color:"text-darkest",children:t}),r&&r.length>0?(0,i.jsx)("ol",{className:"[&>li::marker]:text-darkest list-outside pl-5 text-sm leading-5 tracking-tight [&>li::marker]:font-bold",children:r.map(function(e,t){return(0,i.jsx)("li",{className:"!pb-0",children:o(e,t)},a(e))})}):(0,i.jsx)(tT.Z.BodySm,{color:"text-tertiary",children:n})]})},fq=function(e){var t=e.label,r=e.detail;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-darkest font-bold",children:t}),r&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsxs)("span",{className:"text-darkest font-normal",children:["(",r,")"]})]})]})},fV=function(e){if(void 0===e)return null;var t=e?"public":"private",r="help_widget.copilot.chat_card.tag_visibility.".concat(t),n=(0,E.t)(r);return n===r?t:n};function fW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fH=function(e){var t=e.params,r=e.title,n=e.url;return(0,i.jsx)(dD,{title:r,url:n,children:(0,i.jsx)("ul",{className:"flex flex-col leading-5",children:Object.entries(t||{}).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return fW(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fW(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];return(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.capitalize)(r),":"]})," ",dE(n)]})},r)})})})};function fQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fK="help_widget.copilot.preview_cards.form";function fJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f$(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fY(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f1={member_profile:function(e){var t=e.params,r=e.url,n=Object.entries(dF);return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.member_profile_card_title"),url:r,children:(0,i.jsxs)("ul",{className:"flex flex-col leading-5",children:[n.map(function(e){var r=dz(e,2),n=r[0],o=r[1],a=t[n];return null==a?null:(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[o.label,":"]})," ",dT(a,o.type)]})},n)}),Object.entries(t).filter(function(e){var t=dz(e,2),r=t[0],n=t[1];return!(r in dF)&&null!=n}).map(function(e){var t=dz(e,2),r=t[0],n=t[1];return null==n?null:(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.startCase)(r),":"]})," ",dE(n)]})},r)})]})})},invitation_link:function(e){var t=e.params,r=e.url,n=Object.entries({name:{label:(0,E.t)("settings.invite_members.details_tab.member_details.name"),type:"string"},tags:{label:(0,E.t)("member_tags.form.tags",{defaultValue:"Tags"}),type:"array"},redirect:{label:(0,E.t)("settings.invite_members.details_tab.member_details.redirect",{defaultValue:"Redirect"}),type:"string",defaultValue:(0,E.t)("none",{defaultValue:"None"})}});return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.invitation_link_card_title"),url:r,children:(0,i.jsx)("ul",{className:"flex flex-col leading-5",children:n.map(function(e){var r,n=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return fJ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fJ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],a=n[1],s=null!=(r=t[o])?r:a.defaultValue;return null==s||""===s?null:(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[a.label,":"]})," ",dT(s,a.type)]})},o)}).filter(Boolean)})})},member:function(e){var t=e.params,r=e.url,n=t.members||[];return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.member_card_title"),url:r,children:(0,i.jsx)("div",{className:"flex flex-col gap-3",children:n.map(function(e,t){var r,n,o=null!=(n=null!=(r=e.email)?r:e.name)?n:String(t);return(0,i.jsx)("ul",{className:"flex flex-col leading-5",children:Object.entries(dR).map(function(t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return dM(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dM(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],o=r[1],a=e[n];return n in e&&null!=a?(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[o.label,":"]})," ",dT(a,o.type)]})},n):null})},o)})})})},profile_field:function(e){var t=e.params,r=e.url,n=dV(t),o="profile_view"in t?t.profile_view:null;return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.create_profile_field_card_title"),url:r,children:(0,i.jsxs)("ul",{className:"flex flex-col leading-5",children:[Object.entries(dG).flatMap(function(e){var r=dZ(e,2),a=r[0],s=r[1],l=s.defaultValue;return("form_locations"===a?l=null!=n?n:s.defaultValue:"profile_view"===a?l=null!=o?o:s.defaultValue:a in t&&null!=t[a]&&(l=t[a]),null==l)?[]:[(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[s.label,":"]})," ",dT(l,s.type)]})},a)]}),Object.entries(t).filter(function(e){var t=dZ(e,2),r=t[0],n=t[1];return!(r in dG)&&!dq.includes(r)&&null!=n}).map(function(e){var t=dZ(e,2),r=t[0],n=t[1];return(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.startCase)(r),":"]})," ",dE(n)]})},r)})]})})},space_group:function(e){var t=e.params,r=e.url,n=Object.fromEntries([["name",{label:(0,E.t)("name",{defaultValue:"Name"}),type:"string"}],["slug",{label:(0,E.t)("space_groups.form.create.slug",{defaultValue:"Custom URL slug"}),type:"string"}],["hide_members_count",{label:(0,E.t)("space_groups.form.create.hide_members_count",{defaultValue:"Hide member count"}),type:"boolean"}],["is_hidden_from_non_members",{label:(0,E.t)("space_groups.form.create.is_hidden_from_non_members",{defaultValue:"Hide from non-space members"}),type:"boolean"}],["hide_non_member_spaces_from_sidebar",{label:(0,E.t)("space_groups.form.hide_non_member_spaces_from_sidebar",{defaultValue:"Only show joined spaces in sidebar"}),type:"boolean"}],["allow_members_to_create_spaces",{label:(0,E.t)("space_groups.form.allow_members_to_create_spaces",{defaultValue:"Allow members to create spaces"}),type:"boolean"}]]);return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.create_space_group_card_title"),url:r,children:(0,i.jsxs)("ul",{className:"flex flex-col leading-5",children:[Object.entries(n).flatMap(function(e){var r=f0(e,2),n=r[0],o=r[1],a=n in t&&null!=t[n]?t[n]:o.defaultValue;return null==a?[]:[(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[o.label,":"]})," ",dT(a,o.type)]})},n)]}),Object.entries(t).filter(function(e){var t=f0(e,2),r=t[0],i=t[1];return!(r in n)&&null!=i}).map(function(e){var t=f0(e,2),r=t[0],n=t[1];return(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.startCase)(r),":"]})," ",dE(n)]})},r)})]})})},member_tag:function(e){var t=e.params,r=e.url,n=[["name",{label:(0,E.t)("member_tags.form.name",{defaultValue:"Name"}),type:"string"}],["emoji",{label:(0,E.t)("member_tags.form.icon",{defaultValue:"Icon"}),type:"string"}],["color",{label:(0,E.t)("member_tags.form.color",{defaultValue:"Color"}),type:"string"}],["is_public",{label:(0,E.t)("member_tags.visible",{defaultValue:"Public"}),type:"boolean"}],["display_locations",{label:(0,E.t)("member_tags.form.display_locations",{defaultValue:"Display locations"}),type:"string"}],["display_format",{label:(0,E.t)("member_tags.form.display_format",{defaultValue:"Display format"}),type:"string"}]];return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.create_member_tag_card_title"),url:r,children:(0,i.jsxs)("ul",{className:"flex flex-col leading-5",children:[n.flatMap(function(e){var r=fX(e,2),n=r[0],o=r[1],a=n in t&&null!=t[n]?t[n]:o.defaultValue;return null==a?[]:[(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[o.label,":"]})," ",dT(a,o.type)]})},n)]}),Object.entries(t).filter(function(e){var t=fX(e,2),r=t[0],i=t[1];return!n.find(function(e){return fX(e,1)[0]===r})&&null!=i}).flatMap(function(e){var t=fX(e,2),r=t[0],n=t[1];return null==n?[]:[(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.startCase)(r),":"]})," ",dE(n)]})},r)]})]})})},space:function(e){var t=e.params,r=e.url,n=Object.entries(t).filter(function(e){var t=dH(e,2),r=t[0],n=t[1];return!(r in dK)&&!d$.includes(r)&&null!=n}),o={default_notification_setting:(0,E.t)("help_widget.copilot.preview_cards.notifications.email",{defaultValue:"Email"}),default_in_app_notification_setting:(0,E.t)("help_widget.copilot.preview_cards.notifications.in_app",{defaultValue:"In-app"}),default_mobile_notification_setting:(0,E.t)("help_widget.copilot.preview_cards.notifications.mobile",{defaultValue:"Mobile"})},a=dJ.reduce(function(e,r){return r in t&&!0===t[r]&&e.push(o[r]),e},[]),s=a.length>0;return(0,i.jsx)(dD,{title:(0,E.t)("help_widget.copilot.preview_cards.space_card_title"),url:r,children:(0,i.jsxs)("ul",{className:"flex flex-col leading-5",children:[Object.entries(dK).flatMap(function(e){var r=dH(e,2),n=r[0],o=r[1],a=n in t&&null!=t[n]?t[n]:o.defaultValue;return null==a?[]:[(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[o.label,":"]})," ",dT(a,o.type)]})},n)]}),s&&(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,E.t)("help_widget.copilot.preview_cards.space.notifications",{defaultValue:"New notifications"}),":"]})," ",a.join(", ")]})}),n.map(function(e){var t=dH(e,2),r=t[0],n=t[1];return null==n?null:(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[(0,T.startCase)(r),":"]})," ",dE(n)]})},r)})]})})},form:function(e){var t=e.params,r=e.url,n=e.title,o=Object.entries({button_background_color:{label:(0,E.t)([fK,"button_background_color"]),type:"string"},button_text_color:{label:(0,E.t)([fK,"button_text_color"]),type:"string"},form_background_color:{label:(0,E.t)([fK,"form_background_color"]),type:"string"},form_text_color:{label:(0,E.t)([fK,"form_text_color"]),type:"string"}});return(0,i.jsx)(dD,{title:n,url:r,children:(0,i.jsx)("ul",{className:"flex flex-col leading-5",children:o.map(function(e){var r,n=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return fQ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fQ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],a=n[1],s=null!=(r=t[o])?r:a.defaultValue;return null==s||""===s?null:(0,i.jsx)("li",{className:"text-darkest !pb-0",children:(0,i.jsxs)(tT.Z.BodySm,{color:"text-darkest",children:[(0,i.jsxs)("strong",{children:[a.label,":"]})," ",dT(s,a.type)]})},o)}).filter(Boolean)})})}},f2={member_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.members_matching"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_members_found"),renderItem:function(e){return(0,i.jsx)(fq,{label:e.name,detail:e.email})},getItemKey:function(e){return e.email}})},confirmation_card:function(e){var t=e.params,r=e.resource_class;if(!r)return null;var n=fZ[r];return n?n(t):null},link_card:function(e){var t=e.title,r=e.url,n=(0,dL.v)();return(0,i.jsxs)("button",{type:"button",onClick:function(){n(r)},className:"border-primary hover:bg-secondary flex w-[368px] items-start gap-2 rounded-2xl border px-4 py-3",children:[(0,i.jsx)(D.JO,{type:"copilot-chain-link",size:20}),(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",children:t})]})},invitation_link_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.invitation_links"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_links_found"),renderItem:function(e){var t;return(0,i.jsx)(fq,{label:e.name,detail:(t=e.status)?(0,E.t)("help_widget.copilot.chat_card.invite_link_statuses.".concat("active"===t?"active":"disabled")):null})},getItemKey:function(e){return e.name}})},member_tag_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.member_tags"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_member_tags_found"),renderItem:function(e){return(0,i.jsx)(fq,{label:e.name,detail:fV(e.is_public)})},getItemKey:function(e){return e.id}})},profile_field_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.profile_fields"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_profile_fields_found"),renderItem:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-darkest font-bold",children:e.label})," ",(0,i.jsxs)("span",{className:"text-darkest font-normal",children:["(",e.field_type,")"]})]})},getItemKey:function(e){return e.id}})},space_group_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.space_groups"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_space_groups_found"),renderItem:function(e){return(0,i.jsx)("span",{className:"text-darkest font-bold",children:e.name})},getItemKey:function(e){return e.id}})},space_listing_card:function(e){var t=e.resources,r=function(e){if(!e)return null;var t=(0,E.t)("settings.spaces.space_types.".concat(e)).toLowerCase();return(0,E.t)("help_widget.copilot.chat_card.space_types",{space_type:t})};return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.spaces"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_spaces_found"),renderItem:function(e){return(0,i.jsx)(fq,{label:e.name,detail:r(e.space_type)})},getItemKey:function(e){return e.id}})},access_group_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.access_groups"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_access_groups_found"),renderItem:function(e){return(0,i.jsx)("span",{className:"text-darkest font-bold",children:e.name})},getItemKey:function(e){return e.id}})},community_segment_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.community_segments"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_community_segments_found"),renderItem:function(e){return(0,i.jsx)("span",{className:"text-darkest font-bold",children:e.title})},getItemKey:function(e){return e.id}})},form_listing_card:function(e){var t=e.resources;return(0,i.jsx)(fG,{title:(0,E.t)("help_widget.copilot.chat_card.forms"),resources:t,emptyStateText:(0,E.t)("help_widget.copilot.chat_card.no_forms_found"),renderItem:function(e){return(0,i.jsx)(fq,{label:e.name,detail:e.status})},getItemKey:function(e){return e.id}})},preview_card:function(e){var t=e.resource,r=e.params,n=e.url,o=e.title,a=f1[t];return a?(0,i.jsx)(a,{params:r,url:n,title:o}):(0,i.jsx)(fH,{params:r,url:n,title:o})}},f3=function(e){var t=e.type,r=e.content,n=f2[t];return n?(0,i.jsx)(n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r)):null},f6=function(e){var t=e.children,r=e.shouldAnimate;return void 0===r||r?(0,i.jsx)("div",{className:"animate-slide-in",children:t}):(0,i.jsx)(i.Fragment,{children:t})},f5=function(e){var t=e.src,r=e.name;return(0,i.jsx)("div",{className:"flex size-[20px] shrink-0 justify-center overflow-hidden rounded-full",children:(0,i.jsx)(rw.W,{src:t,size:"5",name:r,isFullRounded:!0})})};function f4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function f9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f4(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f8=["a","br","em","i","li","ol","p","strong","ul","b"],me=function(e){var t,r,n=e.type,a=e.authorAvatarUrl,s=e.authorName,l=e.content,c=e.createdAt,u=e.channel,d=e.buttons,f=e.cards,m=e.selectedButton,p=e.attachments,b=void 0===p?[]:p,h=e.shouldShowAvatar,y=e.showDisclaimer,v=e.showFadingTextEffect,g=void 0!==v&&v,_=e.animateUiElements,x=e.onRevealComplete,j=f9((0,o.useState)(m),2),w=j[0],O=j[1],S=f9((0,o.useState)(!g),2),k=S[0],N=S[1],P=(0,L.wh)().currentCommunityMember,C=(0,o.useCallback)(function(){N(!0),null==x||x()},[x,N]),A={business:{avatarUrl:null!=a?a:"",name:null!=s?s:""},bot:{avatarUrl:"",name:(0,E.t)("help_widget.copilot.display_name")},user:{avatarUrl:null!=(t=null==P?void 0:P.avatar_url)?t:"",name:null!=(r=null==P?void 0:P.name)?r:""},system:{avatarUrl:"",name:"Agent"}},I=(0,rO.w)({dateTime:new Date(c),format:"short_time"}),T="live_chat"===u||"email"===u,M=d.map(function(e){var t,r,n=e.event;return(0,i.jsx)(fj,(t=f7({},e),r=r={selected:w,setSelected:O},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),n)}),R=(void 0===f?[]:f).map(function(e){return(0,i.jsx)(f3,f7({},e),(0,fy.Z)())});return"user"===n?(0,i.jsxs)("div",{className:"message-content flex flex-col items-end",children:[(null==l?void 0:l.trim())&&(0,i.jsxs)("div",{className:"bg-circle/10 ml-6 flex w-fit flex-col gap-1 rounded-2xl rounded-br-[4px] px-4 py-3",children:[(0,i.jsx)(tT.Z.BodySm,{color:"text-darkest",children:(0,i.jsx)(ri.w,{content:l,sanitizeProps:{ALLOWED_TAGS:f8,ADD_ATTR:["target"]}})}),T&&(0,i.jsx)(tT.Z.BodyXs,{color:"text-disabled",children:I})]}),b.length>0&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(fx,{attachments:b})})]}):(0,i.jsx)("div",{className:"flex flex-row items-start",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(void 0===h||h)&&(0,i.jsxs)("div",{className:"mb-2 flex flex-row items-center gap-2",children:["bot"===n?(0,i.jsx)(dv,{}):(0,i.jsx)(f5,{name:A[n].name,src:A[n].avatarUrl}),(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)(er.T1,{weight:"semibold",color:"text-dark",children:A[n].name}),void 0!==y&&y&&(0,i.jsx)(to.T,{maxWidth:250,className:"mt-[-4px]",content:(0,i.jsx)(ri.w,{content:(0,E.t)("support_widget.chatbot.disclaimer")}),children:(0,i.jsx)(D.JO,{type:"16-info",size:16})})]})]}),(0,i.jsxs)("div",{className:"message-content pr-4",children:[(null==l?void 0:l.trim())&&(0,i.jsxs)("div",{className:"bg-secondary flex w-fit flex-col gap-1 rounded-2xl px-4 py-3",children:[(0,i.jsx)(tT.Z.BodySm,{color:"text-darkest",children:(0,i.jsx)(fv.p,{text:(0,fg.ON)(l),active:g,onComplete:C,updateInterval:50})}),T&&(0,i.jsx)(tT.Z.BodyXs,{color:"text-disabled",children:I})]}),k&&(0,i.jsxs)(f6,{shouldAnimate:void 0!==_&&_,children:[b.length>0&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(fx,{attachments:b})}),M.length>0&&(0,i.jsx)("div",{className:"mt-3 flex flex-row flex-wrap gap-2",children:M}),R.length>0&&(0,i.jsx)("div",{className:"flex flex-row flex-wrap gap-2",children:R})]})]})]})})},mt=r(915912),mr=r.n(mt);function mn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var mi=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.conversationId,n=e.messageId,i=e.voteType;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.voteMessage({conversationId:r,messageId:n}),{vote_type:i})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){mn(o,n,i,a,s,"next",e)}function s(e){mn(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})},mo=function(e){var t=e.sources,r=e.areSourcesVisible;return t&&0!==t.length?(0,i.jsx)("div",{className:"flex flex-col gap-2 overflow-hidden transition-all duration-300 ease-out",style:{transform:"translateZ(0)",maxHeight:r?"".concat(28*t.length,"px"):"0px",opacity:+!!r,marginTop:r?"8px":"0px"},children:t.map(function(e,t){return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"flex size-4 shrink-0 items-center justify-center rounded-full bg-secondary text-center text-[10px] font-normal leading-4 tracking-[0.2px] text-tertiary",children:t+1}),(0,i.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-tertiary hover:text-darkest truncate text-xs font-normal leading-[18px] tracking-[0.2px] underline transition-colors",style:{textDecorationStyle:"solid",textDecorationSkipInk:"auto",textUnderlinePosition:"from-font"},children:e.title})]},e.url)})}):null};function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ma(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ma(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ml=function(e){var t=e.type,r=e.isLastMessage,n=e.isAbsoluteLastMessage,a=void 0!==n&&n,s=e.content,l=e.message,c=e.conversationId,u=e.onVoteSuccess,d=e.isRevealing,f=void 0!==d&&d,m=e.isBotProcessing,p=void 0!==m&&m,b=ms((0,o.useState)(!1),2),h=b[0],y=b[1],v=ms((0,o.useState)(!1),2),g=v[0],_=v[1],x=ms((0,o.useState)(!1),2),j=x[0],w=x[1],O=(0,o.useRef)(null),S=(0,o.useRef)(null),k=mi({onSuccess:function(){},onError:function(){}}).mutate;(0,o.useEffect)(function(){return function(){O.current&&clearTimeout(O.current),S.current&&clearTimeout(S.current)}},[]),(0,o.useEffect)(function(){if("user"!==t)return a?(f||p?(_(!1),S.current&&clearTimeout(S.current)):S.current=setTimeout(function(){_(!0)},500),function(){S.current&&clearTimeout(S.current)}):void _(!0)},[f,p,t,a]);var N=function(){w(function(e){return!e})},P=function(e){if(l&&c){var t=l.vote===e?null:e;null==u||u(l.id,t),k({conversationId:c,messageId:l.id,voteType:e})}};if(!r||!g||"user"===t)return null;var C=null==l?void 0:l.vote;return(0,i.jsxs)(i.Fragment,{children:[(null==l?void 0:l.sources)&&(0,i.jsx)(mo,{sources:l.sources,areSourcesVisible:j}),(0,i.jsxs)("div",{className:"text-darkest animate-fade-in-slow mt-1.5 flex items-center gap-[5px]",children:[function(){if(!(null==l?void 0:l.sources)||0===l.sources.length)return null;var e=j?(0,E.t)("help_widget.conversation_page.hide_sources"):(0,E.t)("help_widget.conversation_page.show_sources");return(0,i.jsxs)("button",{type:"button",onClick:N,className:"hover:bg-secondary flex cursor-pointer items-center gap-1 rounded-3xl bg-transparent px-3 py-1 transition-all duration-200 ease-out",children:[(0,i.jsx)(D.JO,{type:"hw-sources",size:16}),(0,i.jsx)(tT.Z.BodyXs,{color:"text-darkest",children:e})]})}(),(0,i.jsx)("div",{className:"flex gap-[5px] overflow-hidden transition-all duration-300 ease-out",style:{width:"".concat(C?24:53,"px")},children:"upvote"===C?(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.copilot.help_widget_message.helpful"),placement:"top",interactive:!1,shouldUseSpanWrapper:!1,children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary flex size-6 cursor-pointer items-center justify-center rounded-3xl bg-transparent transition-all duration-300 ease-in-out",onClick:function(){return P("upvote")},children:(0,i.jsx)(D.JO,{type:"hw-up-voted",size:16})})}):"downvote"===C?(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.copilot.help_widget_message.unhelpful"),placement:"top",interactive:!1,shouldUseSpanWrapper:!1,children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary flex size-6 cursor-pointer items-center justify-center rounded-3xl bg-transparent transition-all duration-300 ease-out",onClick:function(){return P("downvote")},children:(0,i.jsx)(D.JO,{type:"hw-down-voted",size:16})})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.copilot.help_widget_message.helpful"),placement:"top",interactive:!1,shouldUseSpanWrapper:!1,children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary flex size-6 cursor-pointer items-center justify-center rounded-3xl bg-transparent transition-all duration-300 ease-out",onClick:function(){return P("upvote")},children:(0,i.jsx)(D.JO,{type:"hw-up-vote",size:16})})}),(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.copilot.help_widget_message.unhelpful"),placement:"top",interactive:!1,shouldUseSpanWrapper:!1,children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary flex size-6 cursor-pointer items-center justify-center rounded-3xl bg-transparent transition-all duration-300 ease-out",onClick:function(){return P("downvote")},children:(0,i.jsx)(D.JO,{type:"hw-down-vote",size:16})})})]})}),(0,i.jsx)("div",{style:{transition:"opacity 0.3s ease-out"},children:(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.copilot.help_widget_message.copy"),placement:"top",interactive:!1,shouldUseSpanWrapper:!1,children:(0,i.jsx)("button",{type:"button",onClick:function(){s&&(mr()(s),y(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(function(){y(!1)},1500))},className:"hover:bg-secondary flex size-6 cursor-pointer items-center justify-center rounded-3xl bg-transparent transition-all duration-200 ease-out",children:(0,i.jsx)(D.JO,{type:h?"hw-copied":"hw-copy",size:16})})})})]})]})},mc=new Set(["circle_bot","copilot"]),mu=function(e){var t=e.status,r=e.onActionButtonClick,n=e.conversationId,o=e.onVoteSuccess,a=e.isBotProcessing,s=void 0!==a&&a,l=[],c=uM(),u=c.visibleMessages,d=c.completeCurrentMessage;return(0,i.jsx)("div",{className:"mt-4 flex flex-1 flex-col justify-end",children:null==u?void 0:u.map(function(e,a){var c,f=a>0?u[a-1]:null,m=a<u.length-1?u[a+1]:null,p=!f||f.author_type!==e.author_type,b=!m||m.author_type!==e.author_type,h=a===u.length-1,y="agent"===e.author_type?"business":e.author_type;p&&(l=[]);var v=(c="closed"===t,e.buttons?e.buttons.map(function(t){var n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),i=i={onClick:function(){return r(e,t.event)},disabled:c},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n}):[]),g=0===v.length&&mc.has(e.channel);l.push(fb(e));var _=l.join("\n\n");return(0,i.jsx)("div",{className:(0,re.A)({"mt-5":p,"mt-2":!p}),children:"system"===e.author_type?(0,i.jsx)(fh,{message:e}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(me,{authorName:e.author_name,content:dI(e.content),channel:e.channel,createdAt:e.created_at.toLocaleString(),showFadingTextEffect:e.show_fading_text_effect,animateUiElements:e.is_from_websocket,onRevealComplete:b?d:void 0,type:y,buttons:v,cards:fd(e),selectedButton:e.selected_button,shouldShowAvatar:p,showDisclaimer:!1,attachments:e.attachments},e.id),g&&(0,i.jsx)(ml,{type:y,isLastMessage:b,isAbsoluteLastMessage:h,content:_,message:e,conversationId:n,onVoteSuccess:o,isRevealing:e.show_fading_text_effect,isBotProcessing:s})]})},e.id)})})},md=function(e){var t=e.onClick;return(0,i.jsxs)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"pointer-events-auto relative z-20 mb-[15px] flex size-8 items-center justify-center rounded-full border border-primary bg-primary shadow-sm transition-colors hover:bg-secondary",children:(0,i.jsx)("button",{type:"button",onClick:t,className:"flex size-full items-center justify-center","aria-label":(0,E.t)("help_widget.tooltip.scroll_to_bottom"),children:(0,i.jsx)(D.JO,{type:"20-chevron-down",size:20,className:"text-default"})})}),(0,i.jsx)("div",{className:"absolute bottom-0 -z-10 h-9 w-full opacity-80",style:{background:"linear-gradient(to top, var(--color-background-primary) 0%, transparent 100%)"}})]})};function mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mf(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mp=function(e){var t=e.conversationId,r=(0,un.tQ)(),n=r.isShowingLeaveWarning,a=r.virtualMessages,s=r.virtualConversationType,l=r.clearVirtualMessages,c=t===nM.af,u=uY(t),d=u.data,f=u.isLoading,m=mm((0,o.useState)(null),2),p=m[0],b=m[1],h=mm((0,o.useState)(null),2),y=h[0],v=h[1],g=uM(),_=g.addMessage,x=g.setMessages,j=g.visibleMessages,w=mm((0,o.useState)(!1),2),O=w[0],S=w[1],k=u$(),N=k.copilotLoadingText,P=k.enqueueLoadingText,C=mm((0,o.useState)(!1),2),A=C[0],I=C[1],T=mm((0,o.useState)(!1),2),E=T[0],L=T[1],D=mm((0,o.useState)(null),2),M=D[0],R=D[1],B=mm((0,o.useState)(!1),2),z=B[0],F=B[1],U={markAsRead:(0,es.useMutation)({mutationFn:function(e){var t=e.conversationId;return(0,nT.Cu)(uX.a.helpWidget.markAsRead({id:t}))}}).mutate}.markAsRead,Z=u1(N,_),G=Z.handleIncomingMessage,q=Z.handleQueueComplete,V=Z.isThinkingQueueActiveRef,W=(0,o.useRef)([]);(0,o.useEffect)(function(){if(c){var e;b("draft"),v("circle_bot"),a.forEach(function(e){return _(e)}),L(!1),R(null),S((e=a).some(function(e){return"user"===e.author_type})&&!e.some(function(e){return"bot"===e.author_type}))}else if(d){b(d.status),v(d.channel||null);var t=d.messages||[],r=W.current,n=t.filter(function(e){return!r.includes(e.id)});V.current?n.forEach(function(e){return G(e)}):x(t),W.current=t.map(function(e){return e.id}),S(d.is_bot_processing||!1),P(d.copilot_action_loading_text||null),I(d.is_waiting_for_confirmation||!1),L(d.is_waiting_in_queue||!1),R(d.queue_position||null)}},[_,d,c,x,a,G]),(0,o.useEffect)(function(){c||U({conversationId:t})},[c,t,U]);var H=uI({conversationId:t}),Q=H.uploadAttachments,K=H.attachments,J=H.cancelAttachment,$=uq({channel:y,clearVirtualMessages:l,conversationId:t,setAttachments:H.setAttachments,setIsBotProcessing:S}),X=$.createChatMessage,Y=$.createChat,ee=$.clickButton;uH({conversationId:t,enqueueLoadingText:P,isVirtualConversation:c,setChannel:v,setStatus:b,setIsBotProcessing:S,setIsWaitingForConfirmation:I,setIsWaitingInQueue:L,setQueuePosition:R,markAsRead:U,onNewMessage:G});var et=(0,o.useRef)(null),er=(0,o.useRef)(!0);return((0,o.useEffect)(function(){var e,t=null==(e=et.current)?void 0:e.osInstance();if(t){var r=function(){var e=t.elements().viewport,r=e.scrollTop,n=e.scrollHeight-r-e.clientHeight;er.current=n<50,F(n>100)},n=function(){if(er.current){var e=t.elements().viewport;e.scrollTo({top:e.scrollHeight})}};return n(),t.on("scroll",r),t.on("updated",n),function(){t.off("scroll",r),t.off("updated",n)}}},[t,f]),(0,o.useEffect)(function(){if(!f){er.current=!0;var e,t=null==(e=et.current)?void 0:e.osInstance();if(t){var r=t.elements().viewport;r.scrollTo({top:r.scrollHeight})}}},[t,f]),f&&!c)?(0,i.jsx)("div",{className:"flex size-full flex-1 flex-col",children:(0,i.jsx)(dk,{})}):n?(0,i.jsx)(dP,{conversationId:t}):(0,i.jsxs)(dC,{className:"flex flex-1 flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"relative flex flex-1 flex-col overflow-hidden",children:[(0,i.jsx)(ux.E,{ref:et,className:"flex flex-1 flex-col overflow-hidden",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:(0,i.jsxs)("div",{className:"flex flex-col px-4",children:[(0,i.jsx)(mu,{status:p,onActionButtonClick:function(e,r){ee({conversationId:t,event:r,messageId:e.id})},conversationId:t,onVoteSuccess:function(e,t){x(j.map(function(r){var n,i;return r.id===e?(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={vote:t},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n):r}))},isBotProcessing:O}),(0,i.jsx)(dS,{channel:y,copilotLoadingText:N,isBotProcessing:O,isWaitingForConfirmation:A,isWaitingInQueue:E,queuePosition:M,onQueueComplete:q}),(0,i.jsx)("div",{className:"my-4 flex flex-col gap-2",children:"closed"!==p&&(0,i.jsx)(u5,{attachments:K,cancelAttachment:J})})]})}),z&&(0,i.jsx)(md,{onClick:function(){var e,t=null==(e=et.current)?void 0:e.osInstance();if(t){var r=t.elements().viewport;r.scrollTo({top:r.scrollHeight,behavior:"smooth"}),er.current=!0}}})]}),(0,i.jsx)(dn,{attachments:K,channel:y,isBotProcessing:O,onSendMessage:function(e){var r,n=K.map(function(e){return e.attachmentId});c?Y({text:e,virtual_conversation_type:s}):X({conversationId:t,text:e,attachment_ids:n}),er.current=!0;var i=null==(r=et.current)?void 0:r.osInstance();if(i){var o=i.elements().viewport;o.scrollTo({top:o.scrollHeight})}},status:p,sunshineConversationId:null==d?void 0:d.sunshine_conversation_id,uploadAttachments:Q})]})},mb=function(e){var t=e.id;return(0,i.jsx)(mp,{conversationId:t})},mh=function(e){var t,r=e.activeItem,n=e.data,o=e.onItemClick,a=e.dataTestId,s=(null==(t=n.find(function(e){return e.value===r}))?void 0:t.text)||"";return(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(ii.Lt,{direction:"bottom-start",className:"w-full",buttonClassName:"w-full",menuItemsClassName:"!w-full min-w-40 !p-2",buttonDataTestId:a,button:(0,i.jsxs)(ii.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex w-full min-w-0 justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-4 pr-2 transition-colors",children:[(0,i.jsx)("div",{className:"flex min-w-0 flex-1 gap-x-2 overflow-hidden",children:(0,i.jsx)("div",{className:"min-w-0 truncate",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",children:s})})}),(0,i.jsx)(D.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark shrink-0"})]}),children:n.map(function(e){var t=e.value,n=e.text;return(0,i.jsx)(ii.Lt.Item,{onClick:function(){return o(t)},children:(0,i.jsx)(ii.Lt.ItemLink,{type:"button",active:r===t,"aria-label":n,children:(0,i.jsx)("div",{className:"flex min-w-0 items-center gap-x-2",children:(0,i.jsx)("span",{className:"truncate text-sm",children:n})})})},t)})})})};function my(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mv=function(e){var t,r=e.onFiltersChange,n=(0,J.Gc)().setValue,a=(t=(0,J.qo)({name:["type","status"]}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return my(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return my(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1];return(0,o.useEffect)(function(){r({type:s,status:l})},[s,l,r]),(0,i.jsx)("div",{className:"w-full px-4 py-2",children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(mh,{activeItem:s||"all",data:nM.Nj,onItemClick:function(e){n("type",e)},dataTestId:"conversation-type-filter"})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(mh,{activeItem:l||"all",data:nM.DZ,onItemClick:function(e){n("status",e)},dataTestId:"conversation-status-filter"})})]})})},mg=r(308683);function m_(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var mx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.conversationId;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.pC)(ex.av.helpWidget.deleteConversation({conversationId:r}))]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){m_(o,n,i,a,s,"next",e)}function s(e){m_(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:t,onError:r})},mj=function(e){var t=e.status;if("draft"===t)return(0,i.jsx)("div",{className:"flex h-6 items-center justify-center gap-2 rounded-[32px] px-2 py-[3px]",children:(0,i.jsx)(tT.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:(0,T.capitalize)(t)})});var r={closed:"text-tertiary",solved:"text-date-blue",open:"text-white"}[t];return(0,i.jsx)("div",{className:(0,re.A)("flex h-6 items-center justify-center gap-2 rounded-[32px] px-2 py-[3px]",{"bg-secondary":"closed"===t||"solved"===t,"bg-[#16A34A]":"open"===t}),children:(0,i.jsx)(tT.Z.LabelXs,{color:r,weight:"medium",children:(0,T.capitalize)(t)})})},mw=function(e){var t=e.count;return t>0?(0,i.jsx)("div",{className:"inline-flex min-h-4 min-w-4 rounded-full bg-[#2563EB] text-[#F7F9FA]",children:(0,i.jsx)("span",{className:"inline-block min-h-4 min-w-4 px-1.5 py-[1px] text-center text-[10px] font-semibold",children:t})}):null},mO=function(e){var t=e.conversation,r=(0,U.k6)(),n=(0,es.useQueryClient)(),o=String((0,U.UO)().id)===String(t.id),a=(0,un.tQ)().isExpanded,s=t.conversation_updated_at?(0,mg.TF)(t.conversation_updated_at,{format:mg.lc.short}):"",l=function(e){switch(e){case"Circle Bot":return(0,E.t)("help_widget.constants.conversations.types.copilot");case"Live Chat":return(0,E.t)("help_widget.constants.conversations.types.live_chat");case"Email":return(0,E.t)("help_widget.constants.conversations.types.email");default:return e}},c=mx({onSuccess:function(){n.invalidateQueries(["help-widget","conversations"])},onError:function(e){console.error("Error deleting conversation:",e)}}).mutate;return(0,i.jsx)("button",{className:(0,re.A)("hover:bg-secondary line-clamp-2 w-full p-2 px-4 text-left transition-colors duration-200",{"bg-tertiary":o}),onClick:function(){"email"===t.channel&&"draft"===t.status?r.push("/conversations/".concat(t.id,"/new_ticket")):r.push("/conversations/".concat(t.id))},type:"button",children:(0,i.jsxs)("div",{className:"flex flex-col py-[3px]",children:[(0,i.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-darkest",weight:"medium",children:t.title}),(0,i.jsx)(mw,{count:t.unread_messages_count})]}),(0,i.jsx)("div",{className:"flex items-center",children:!a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(mj,{status:t.status}),"draft"===t.status&&(0,i.jsx)("button",{onClick:function(e){e.stopPropagation(),c({conversationId:t.id})},type:"button",className:"bg-primary border-primary dark:text-feature-light flex size-6 items-center justify-center rounded-full border transition-colors",children:(0,i.jsx)(D.JO,{type:"16-trash-bin-2",size:16,useWithFillCurrentColor:!0})})]})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:t.state_transition.map(function(e){return l(e)}).join("  ")}),(0,i.jsx)("div",{className:"bg-tertiary size-1 rounded-full"}),(0,i.jsx)(tT.Z.LabelSm,{color:"text-tertiary",weight:"medium",children:s})]})]})})},mS=function(e){var t=e.rows,r=e.wrapperClassName,n=e.loaderClassName,o=void 0===n?"":n,a=e.width,s=void 0===a?"100%":a,l=e.height,c=void 0===l?"24px":l,u=Array.from({length:void 0===t?1:t},function(){return(0,fy.Z)()});return(0,i.jsx)("div",{className:(0,re.A)("animate-pulse space-y-2 px-6 last:pb-4",void 0===r?"":r),children:u.map(function(e){return(0,i.jsx)("div",{className:(0,re.A)("bg-secondary rounded-md",o),style:{width:s,height:c}},e)})})},mk=function(){return(0,i.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,i.jsx)(mS,{rows:2,height:"26px",wrapperClassName:"!px-0",loaderClassName:"rounded-2xl"}),(0,i.jsx)(mS,{rows:1,height:"26px",width:"310px",wrapperClassName:"!px-0",loaderClassName:"rounded-2xl"})]})},mN=function(e){var t=e.type,r=e.status;return(0,es.useQuery)(["help-widget","conversations",t,r],function(){return(0,nT.UT)(ex.av.helpWidget.listConversations({conversationFilters:{channel_type:t,status:r}}))})};function mP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mP(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mA=function(){var e=(0,es.useQueryClient)(),t=mC((0,o.useState)("all"),2),r=t[0],n=t[1],a=mC((0,o.useState)("all"),2),s=a[0],l=a[1],c=(0,L.wh)().currentCommunityMember,u=mN({type:r,status:s}),d=u.isLoading,f=u.data,m=(null==f?void 0:f.conversations)||[];return(0,ub.s)({channel:"HelpWidget::GeneralChannel",onMessageReceive:function(t){"reloadConversations"===t.event&&e.invalidateQueries({queryKey:["help-widget","conversations"],exact:!1})},community_member_id:null==c?void 0:c.id,canCreateConnection:!!(null==c?void 0:c.id)},[null==c?void 0:c.id]),(0,i.jsxs)("div",{className:"scrollbar-hide flex size-full flex-col overflow-auto",children:[(0,i.jsx)(Q.l,{preventAccidentalLeave:!0,id:"conversations-filter-form",mode:"onChange",onSubmit:function(){},defaultValues:{type:"all",status:"all"},children:(0,i.jsx)(mv,{onFiltersChange:function(e){n(e.type),l(e.status)}})}),d&&(0,i.jsx)(mk,{}),0===m.length&&!d&&(0,i.jsx)("div",{className:"flex flex-1 flex-col items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1 text-center text-sm",children:[(0,i.jsx)(D.JO,{type:"sw-conversations",size:20}),(0,i.jsx)(tT.Z.BodySm,{weight:"font-medium",color:"text-primary",children:(0,E.t)("help_widget.conversation_list_page.no_conversations")})]})}),(0,i.jsx)("div",{className:"flex flex-col",children:m.map(function(e,t){return(0,i.jsxs)("div",{children:[(0,i.jsx)(mO,{conversation:e}),t<m.length-1&&(0,i.jsx)("div",{className:"bg-secondary-dark h-px max-h-[1px]"})]},e.id)})})]})},mI=function(){return(0,es.useQuery)(["events"],function(){return(0,nT.UT)(ex.av.supportWidget.listEvents())},{staleTime:nM.dV,retry:!1})},mT=function(e){var t=e.event,r=e.showArrowIcon,n=new Date(t.starts_at).toLocaleString("en-US",{month:"long",day:"numeric"}),o=new Date(t.starts_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,i.jsxs)("a",{className:"border-primary bg-primary hover:bg-secondary dark:border-tertiary hover:dark:bg-tertiary mb-2 block cursor-pointer rounded-lg border p-4 shadow-[0_1px_2px_0_rgba(0,0,0,0.05)]",href:t.post_url,target:"_blank",rel:"noopener noreferrer",children:[t.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:t.name,className:"mb-4 rounded",src:t.cover_image_url})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("span",{className:"text-darkest line-clamp-2 text-sm font-semibold",children:t.name}),(0,i.jsxs)("span",{className:"text-tertiary text-[11px] font-medium",children:[n," ",(0,E.t)("support_widget.at")," ",o]})]}),(void 0===r||r)&&(0,i.jsx)("div",{className:"text-darkest flex shrink-0 items-center self-center",children:(0,i.jsx)(D.JO,{type:"sw-right-arrow",size:16})})]})]})},mE=function(e){var t=e.onClick;return(0,i.jsx)("button",{type:"button",onClick:t,className:"text-darkest text-sm font-medium",children:(0,E.t)("help_widget.explore_page.see_more")})},mL=function(){var e=mI(),t=e.isLoading,r=e.data,n=(0,U.k6)(),o=((null==r?void 0:r.records)||[]).slice(0,2);return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)(tT.Z.BodySm,{weight:"medium",color:"text-tertiary",children:(0,E.t)("help_widget.explore_page.events")})}),(0,i.jsx)("div",{children:t?(0,i.jsx)(mS,{rows:2,height:"80px",wrapperClassName:"px-2",loaderClassName:"bg-primary"}):o.map(function(e){return(0,i.jsx)(mT,{event:e,showArrowIcon:!0},e.id)})}),(0,i.jsx)("div",{className:"pt-2",children:(0,i.jsx)(mE,{onClick:function(){return n.push("/events")}})})]})},mD=function(e){var t=e.post;return(0,i.jsxs)(lg.rU,{className:"border-primary bg-primary hover:bg-secondary dark:border-tertiary hover:dark:bg-tertiary mb-2 block cursor-pointer rounded-lg border p-4 shadow-[0_1px_2px_0_rgba(0,0,0,0.05)]",to:"/news/".concat(t.id),children:[t.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:t.name,className:"mb-4 rounded",src:t.cover_image_url})}),(0,i.jsxs)("div",{className:"text-dark mb-1",children:[(0,i.jsx)("div",{className:"news-title pb-3",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",children:t.name})}),(0,i.jsx)("div",{className:"news-excerpt",children:(0,i.jsx)(tT.Z.BodySm,{children:(0,T.truncate)(t.body_plain_text,{length:200})})})]})]})},mM=function(){var e=nR(),t=e.isLoading,r=e.data,n=(0,U.k6)(),o=((null==r?void 0:r.records)||[]).slice(0,2);return(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("div",{className:"py-3",children:(0,i.jsx)(tT.Z.BodySm,{weight:"medium",color:"text-tertiary",children:(0,E.t)("help_widget.explore_page.news")})}),(0,i.jsx)("div",{children:t?(0,i.jsx)(mS,{rows:2,height:"80px",wrapperClassName:"px-2",loaderClassName:"bg-primary"}):o.map(function(e){return(0,i.jsx)(mD,{post:e},e.id)})}),(0,i.jsx)("div",{className:"pb-3 pt-2",children:(0,i.jsx)(mE,{onClick:function(){return n.push("/news")}})})]})};let mR=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-faces-bb8b7b2e002c25dc.png",mB=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-star-one-a56939bb5aa1dd7d.png",mz=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-star-two-2e0160edafaa1d76.png",mF=r.p+"static/react/components/HelpWidget/assets/icons/circle-academy-typography-a1c4897e7db119f7.png";var mU=function(){return(0,i.jsx)("button",{type:"button",className:"w-full text-left",onClick:function(){window.open(nM.iX,"_blank")},children:(0,i.jsxs)("div",{className:"bg-primary border-primary relative h-[125px] rounded-lg border shadow-sm transition-shadow hover:shadow-md",children:[(0,i.jsxs)("div",{className:"ml-4 flex flex-col items-start pt-8",children:[(0,i.jsx)("img",{src:mR,alt:(0,E.t)("help_widget.explore_page.circle_academy"),className:"w-[112px] object-contain",loading:"eager"}),(0,i.jsx)("img",{src:mF,alt:(0,E.t)("help_widget.explore_page.circle_academy"),className:"ml-1 mt-2 w-[145px] object-contain dark:invert",loading:"eager"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{src:mB,alt:"",className:"absolute right-[132px] top-7 size-6",loading:"eager","aria-hidden":"true"}),(0,i.jsx)("img",{src:mz,alt:"",className:"absolute bottom-5 right-16 size-8",loading:"eager","aria-hidden":"true"})]})]})})},mZ=function(e){var t=e.text,r=e.onClick;return(0,i.jsxs)("button",{type:"button",onClick:r,className:"border-primary bg-primary hover:bg-secondary hover:dark:bg-tertiary text-darkest mb-2 flex h-11 w-full items-center justify-between gap-2 rounded-lg border px-5 py-3 shadow-[0px_1px_2px_0px_#0000000D]",children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:t}),(0,i.jsx)(D.JO,{type:"sw-right-arrow",size:16})]})},mG=function(){return(0,i.jsxs)(dC,{className:"scrollbar-hide bg-secondary flex h-full flex-col overflow-auto",children:[(0,i.jsxs)("div",{className:"m-4 mb-2",children:[(0,i.jsx)(mU,{}),(0,i.jsx)(mM,{})]}),(0,i.jsx)("hr",{className:"border-primary"}),(0,i.jsx)("div",{className:"mx-5 mb-5 mt-2",children:(0,i.jsx)(mL,{})}),(0,i.jsx)("hr",{className:"border-primary"}),(0,i.jsxs)("div",{className:"m-4",children:[(0,i.jsx)(mZ,{text:(0,E.t)("help_widget.explore_page.circle_community"),onClick:function(){window.open(nM.Jv,"_blank")}}),(0,i.jsx)(mZ,{text:(0,E.t)("help_widget.explore_page.circle_partners"),onClick:function(){window.open(nM.QT,"_blank")}})]})]})},mq=r(548298),mV=function(e){var t=e.post,r=t.id,n=t.name,o=(0,U.k6)();return(0,i.jsxs)("button",{type:"button",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out",onClick:function(){o.push(ex._N.showPost(r))},children:[(0,i.jsx)("span",{className:"text-dark text-left",children:(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",children:n})}),(0,i.jsx)("span",{className:"-mr-1 ml-2.5",children:(0,i.jsx)(D.JO,{type:"16-chevron-right",size:16,className:"text-dark"})})]})},mW={chat:{userKey:"ask_question_initial_message",botKeys:["ask_question_initial_bot_response"]},feedback:{userKey:"give_feedback_initial_message",botKeys:["give_feedback_initial_bot_response"]},report_bug:{userKey:"report_bug_initial_message",botKeys:["report_bug_initial_bot_response"]},copilot_action:{userKey:"perform_an_action_initial_message",botKeys:["perform_an_action_initial_bot_response_1","perform_an_action_initial_bot_response_2"]}},mH=function(){var e=(0,U.k6)(),t=(0,L.wh)().currentCommunityMember,r=(0,un.tQ)(),n=r.addVirtualMessage,i=r.clearVirtualMessages,o=r.setVirtualConversationType,a=uM().clearMessages,s=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return{id:"virtual-".concat(performance.now()),content:e,author_name:"user"===r?(null==t?void 0:t.name)||"User":"Circle",author_type:r,channel:"circle_bot",created_at:new Date().toISOString(),show_fading_text_effect:"bot"===r&&!!e.trim()}},l=function(e){var t=mW[e]||"";return(0,E.t)("help_widget.chat_bot.templates.".concat(t.userKey))},c=function(e){var t=mW[e]||"",r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t.botKeys[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.push((0,E.t)("help_widget.chat_bot.templates.".concat(l)))}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r};return{startVirtualConversation:function(t){i(),a();var r=l(t);o(t),n(s(r,"user")),e.push("/conversations/virtual");var u=c(t);setTimeout(function(){n(s(u[0],"bot"))},2e3),u.length>1&&setTimeout(function(){n(s(u[1],"bot"))},4e3)}}},mQ=function(e){var t,r,n=e.onClick,o=void 0===n?T.noop:n,a=e.className,s=e.label,l=e.type,c=e.dataTestId,u=e.disabled,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className","label","type","dataTestId","disabled"]);return(0,i.jsx)(tl.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({variant:"circle",className:a,onClick:o,type:void 0===l?"button":l,"data-testid":c,disabled:void 0!==u&&u},d),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},mK=function(e){var t=e.helpText,r=e.buttonText,n=mH().startVirtualConversation;return(0,i.jsx)("div",{className:"flex flex-col justify-center",children:(0,i.jsx)("div",{className:"border-primary mx-auto mt-auto w-full rounded-lg border p-5",style:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.10), 0 4px 6px -4px rgba(0, 0, 0, 0.10)"},children:(0,i.jsxs)("div",{className:"bg-primary",children:[(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",color:"dark:text-[#ABAFB2]",children:t})}),(0,i.jsx)("div",{className:"mt-3 flex justify-center",children:(0,i.jsx)(mQ,{label:r,className:"dark:text-primary w-fit rounded-3xl bg-[#2B2E33]",onClick:function(){n("chat")}})})]})})})},mJ=function(e){var t,r=e.searchText,n=e.spaceId,o=(0,mq.c)(r,500),a=(t=void 0===n?"":n,(0,es.useQuery)(["posts","list",t,o],function(){return el.R.listPosts({spaceId:t,searchText:o})},{retry:!1})),s=a.isLoading,l=a.data,c=(null==l?void 0:l.records)||[];return s?(0,i.jsx)(mS,{rows:5}):ak()(c)?(0,i.jsx)("div",{className:"mt-2 px-5",children:(0,i.jsx)(mK,{helpText:(0,E.t)("help_widget.no_articles_found"),buttonText:(0,E.t)("help_widget.still_need_help")})}):(0,i.jsx)("div",{className:"overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5 flex flex-col justify-center",children:c.map(function(e){return(0,i.jsx)(mV,{post:e},e.id)})})})},m$=r(280219),mX=function(e){var t=e.spaceGroup,r=(0,un.tQ)().setCurrentSpaceProperties,n=(0,U.k6)(),o=(0,y.TC)().currentAppearance,a=function(e){var t,i;r({name:e.name,emoji:e.emoji,custom_emoji_url:null!=(t=e.custom_emoji_url)?t:"",custom_emoji_dark_url:null!=(i=e.custom_emoji_dark_url)?i:""}),n.push(ex._N.posts(e.id))};return(0,T.isEmpty)(t.spaces)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(tT.Z.LabelXxs,{color:"text-light",children:t.name})}),(0,i.jsx)("div",{className:"flex flex-col",children:t.spaces.map(function(e){return(0,i.jsxs)("button",{type:"button",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out last:mb-4",onClick:function(){return a(e)},children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"medium",children:(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)(m$.S,{className:"!h-5 !w-auto",emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,appearance:o}),(0,i.jsx)("span",{className:"ml-2 break-all",children:e.name})]})}),(0,i.jsx)(D.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.id)})})]})},mY=function(){var e=(0,es.useQuery)(["space-groups"],function(){return el.R.spaceGroups()},{staleTime:nM.dV,retry:!1}),t=e.isLoading,r=e.data,n=(null==r?void 0:r.records)||[];return t?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(mS,{width:"50px"}),(0,i.jsx)(mS,{rows:5})]}):ak()(n)?(0,i.jsx)("div",{className:"px-6",children:(0,i.jsx)(tT.Z.BodyMd,{children:(0,E.t)("support_widget.no_spaces_found")})}):(0,i.jsx)("div",{className:"mb-4 overflow-auto",children:(0,i.jsx)("div",{className:"mt-1.5",children:n.map(function(e){return(0,i.jsx)(mX,{spaceGroup:e},e.id)})})})},m0=function(e){var t=e.searchText,r=e.setSearchText,n=e.initialFocus,a=void 0===n||n,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["searchText","setSearchText","initialFocus"]),l=(0,o.useRef)(null),c=(0,U.TH)();return(0,o.useEffect)(function(){if(a){var e;null==(e=l.current)||e.focus()}},[a,c]),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"text-dark pointer-events-none absolute left-0 top-[11px] flex items-center pl-3",children:(0,i.jsx)(D.JO,{type:"16-search",size:20})}),(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:l,type:"text",defaultValue:t,className:"bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-3xl border border-[rgba(228,231,235,1)] pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,E.t)("support_widget.placeholder_text"),onChange:function(e){r(e.target.value)}},s))]})};function m1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m2=function(){var e,t=(e=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return m1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m1(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],a=(0,U.UO)().spaceId,s=r||a;return(0,i.jsxs)(dC,{className:"scrollbar-hide h-full overflow-auto",children:[(0,i.jsx)("div",{className:"px-5 pb-2 pt-5",children:(0,i.jsx)(m0,{searchText:r,setSearchText:n})}),s?(0,i.jsx)(mJ,{spaceId:a,searchText:r}):(0,i.jsx)(mY,{})]})},m3=r(919408),m6=function(e){var t=e.iconName,r=e.text,n=e.onClick;return(0,i.jsxs)("button",{type:"button",onClick:n,className:"hover:bg-secondary border-primary bg-primary text-dark shadow-xs hover:border-dark flex items-center gap-1 rounded-2xl border px-3 py-[10px] focus:outline-none",children:[(0,i.jsx)("div",{className:"flex items-center justify-center px-[2px] py-1",children:(0,i.jsx)(D.JO,{type:t,className:"text-grey-900 dark:text-grey-50",size:16})}),(0,i.jsx)(tT.Z.BodySm,{color:"text-secondary",weight:"font-medium",children:r})]})},m5=function(){var e=mH().startVirtualConversation,t=function(t){e(t)};return(0,i.jsxs)("div",{className:"mt-6 flex w-full flex-col items-center gap-2",children:[(0,i.jsxs)("div",{className:"flex w-full justify-center gap-2",children:[(0,i.jsx)(m6,{iconName:"sw-question",text:(0,E.t)("help_widget.home_page.ask_question"),onClick:function(){return t("chat")}}),(0,i.jsx)(m6,{iconName:"sw-report-bug",text:(0,E.t)("help_widget.home_page.report_bug"),onClick:function(){return t("report_bug")}})]}),(0,i.jsxs)("div",{className:"flex w-full justify-center gap-2",children:[(0,i.jsx)(m6,{iconName:"sw-feedback",text:(0,E.t)("help_widget.home_page.give_feedback"),onClick:function(){return t("feedback")}}),(0,i.jsx)(m6,{iconName:"16-stars-ai",text:(0,E.t)("help_widget.home_page.perform_an_action"),onClick:function(){return t("copilot_action")}})]})]})},m4=function(){return(0,i.jsx)("div",{className:"flex justify-center rounded-lg p-2",children:(0,i.jsxs)(tT.Z.BodyXs,{color:"text-[#A5A9AD]",children:[(0,E.t)("help_widget.conversation_page.copilot_footer_message"),(0,i.jsx)(to.T,{arrow:!1,theme:"help-widget-tooltip",content:(0,E.t)("help_widget.conversation_page.copilot_footer_message_tooltip"),children:(0,i.jsx)(D.JO,{type:"info",size:14,useWithFillCurrentColor:!0})})]})})},m7=function(){var e=(0,L.wh)().currentCommunityMember,t=(0,U.k6)(),r=uF({onSuccess:function(e){t.push("/conversations/".concat(e.id))},onError:function(e){console.error("Error creating chat",e)}}).mutate;return(0,i.jsxs)(dC,{className:(0,re.A)("flex h-full min-h-[582px] flex-col items-center justify-end pb-px"),children:[(0,i.jsxs)("div",{className:"flex w-full flex-col items-center px-4",children:[(0,i.jsx)("div",{className:"relative z-10 flex size-16 items-center justify-center",children:(0,i.jsx)("img",{src:dy,alt:(0,E.t)("help_widget.home_page.circle_ai_bot_alt"),className:"size-full rounded-full object-contain",loading:"eager"})}),(0,i.jsx)("div",{className:"mt-4 flex items-center gap-2 text-center",children:(0,i.jsx)(m3.u,{as:"span",color:"text-gray-900 dark:text-gray-50",weight:"font-semibold",size:"text-2xl",leading:"leading-[32px]",tracking:"tracking-[0]",textAlign:"",children:(0,E.t)("help_widget.home_page.greeting",{first_name:(null==e?void 0:e.first_name)||(0,E.t)("help_widget.home_page.default_greeting_name")})})}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(tT.Z.LabelSm,{color:"text-default dark:text-feature-light",weight:"medium",children:(0,E.t)("help_widget.home_page.help_text")})}),(0,i.jsx)(m5,{}),(0,i.jsx)("div",{className:"mt-[88px] w-full",children:(0,i.jsx)(dr,{onSubmit:function(e){r({text:e})},placeholder:(0,E.t)("help_widget.home_page.help_input_placeholder"),allowAttachments:!1})})]}),(0,i.jsx)(m4,{})]})},m9=function(e){var t=e.question,r=e.answer;return(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:t}),(0,i.jsx)(tT.Z.BodySm,{color:"text-tertiary",children:r})]})},m8=function(){var e,t,r,n=(0,U.UO)().id,o=uY(n),a=o.data,s=o.isLoading,l=o.isError,c=uN({conversationId:n,all:!0}).data,u=(null==c?void 0:c.attachments)||[];if(l)return(0,i.jsx)("div",{children:(0,E.t)("help_widget.send_message_form.something_went_wrong")});var d=(null==(e=nM.a$.find(function(e){var t;return e.value===(null==a||null==(t=a.data)?void 0:t.priority)}))?void 0:e.text)||nM.a$["0"].text;return s?(0,i.jsx)("div",{className:"flex size-full flex-1 flex-col p-4",children:(0,i.jsx)(mS,{rows:4,height:"52px",wrapperClassName:"!px-0"})}):(0,i.jsx)(dC,{className:"relative flex-1 overflow-hidden",children:(0,i.jsxs)("div",{className:"scrollbar-hide absolute inset-0 overflow-y-auto p-4",children:[(0,i.jsxs)("div",{className:"my-6 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"mx-auto flex size-14 items-center justify-center rounded-full bg-green-500",children:(0,i.jsx)(D.JO,{type:"36-check",size:36,className:"!w-9 text-white"})}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(tT.Z.TitleMd,{weight:"bold",children:(0,E.t)("help_widget.send_message_form.message_sent_successfully")})}),(0,i.jsx)("div",{className:"mt-2 text-center",children:(0,i.jsx)(tT.Z.BodySm,{color:"text-tertiary",children:(0,E.t)("help_widget.send_message_form.notify_message")})})]}),(0,i.jsx)(m9,{question:(0,E.t)("help_widget.send_message_form.type"),answer:(null==a||null==(t=a.data)?void 0:t.type)||""}),(0,i.jsx)(m9,{question:(0,E.t)("help_widget.send_message_form.priority"),answer:d}),(0,i.jsx)(m9,{question:(0,E.t)("help_widget.send_message_form.text"),answer:(null==a||null==(r=a.data)?void 0:r.text)||""}),u.length>0&&(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:u.map(function(e){return(0,i.jsx)(f_,{url:e.url,filename:e.filename},e.id)})})]})})},pe=function(e){var t=e.children,r=(0,un.tQ)(),n=r.isExpanded,o=r.isSidebarOpen;return(0,i.jsx)("div",{className:"scrollbar-hide flex h-full flex-col overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex size-full justify-end",children:[n&&(0,i.jsx)("div",{className:(0,re.A)("border-primary overflow-hidden border-r transition-opacity duration-200",{"flex-none w-[312px]":o,"pointer-events-none w-0 opacity-0":!o}),children:(0,i.jsx)("div",{className:"h-full w-[312px] overflow-y-auto",children:(0,i.jsx)(mA,{})})}),(0,i.jsx)(dC,{className:"flex-none",children:(0,i.jsx)("div",{className:"scrollbar-hide flex h-full flex-col items-end overflow-y-auto",children:t})})]})})};function pt(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var pr=function(e){var t=e.onSuccess,r=e.onError;return(0,es.useMutation)({mutationFn:function(e){var t,r=e.id,n=e.conversation,i=e.attachment_ids;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,nT.Cu)(ex.av.helpWidget.submitConversation({id:r}),{id:r,conversation:n,submit_page_url:window.location.href,viewport_height:String(window.innerHeight||document.documentElement.clientHeight),viewport_width:String(window.innerWidth||document.documentElement.clientWidth),attachment_ids:i})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){pt(o,n,i,a,s,"next",e)}function s(e){pt(o,n,i,a,s,"throw",e)}a(void 0)})})()},onSuccess:function(e){return t(e.ticket)},onError:r})},pn=r(779774),pi=pn.Ry({text:pn.Z_().required(function(){return E.ZP.t("support_widget.send_message_form.error.text")}),type:pn.Z_().required(function(){return E.ZP.t("support_widget.send_message_form.error.type")}),priority:pn.Z_().required(function(){return E.ZP.t("support_widget.send_message_form.error.priority")})});pn.Ry({comment:pn.Z_().required("This field is required")});var po=function(e){return(0,i.jsx)(Q.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hideDescription:!0,hideBorder:!0,fullWidth:!0,translationRoot:"help_widget.send_message_form"},e))};function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function pl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||pd(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pu(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pd(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){if(e){if("string"==typeof e)return pa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pa(e,t)}}var pf=function(e){var t=e.isLoading,r=e.uploadAttachments,n=e.attachments,a=e.cancelAttachment,s=e.onFormChange,l=(0,J.Gc)().formState,c=pc((0,J.qo)({name:["text","type","priority"]}),3),u=c[0],d=c[1],f=c[2],m=!!l.errors.type,p=!!l.errors.priority,b=u&&d&&f,h=(0,mq.c)(u,2e3),y=pc((0,o.useState)(pu(nM.Mj)),2),v=y[0],g=y[1],_=pc((0,o.useState)(pu(nM.a$)),2),x=_[0],j=_[1],w=n.every(function(e){return e.completed}),O=l.isSubmitted&&(!b||!w),S=(0,u8.uI)({onDrop:r,noClick:!0}),k=S.getRootProps,N=S.getInputProps,P=S.inputRef;return(0,o.useEffect)(function(){(h||d||f)&&s({text:u,type:d,priority:f})},[h,d,f]),(0,o.useEffect)(function(){var e=document.getElementById("send-message-form-container");null==e||e.scrollIntoView()},[]),(0,i.jsxs)("div",{className:"flex max-h-full flex-col px-6",children:[(0,i.jsx)(po,{name:"type",hideError:!0,children:(0,i.jsx)(Q.l.Select,{name:"type",data:v,onSearch:function(e){""===e?g(pu(nM.Mj)):g(nM.Mj.filter(function(t){return t.value.toLowerCase().includes(e.toLowerCase())}))},inputContainerClassName:m?"form-error":""})}),(0,i.jsx)(po,{name:"priority",className:"!pt-2",hideError:!0,children:(0,i.jsx)(Q.l.Select,{name:"priority",inputContainerClassName:(0,re.A)("priority-select-input-container",p?"form-error":""),data:x,onSearch:function(e){""===e?j(pu(nM.a$)):j(nM.a$.filter(function(t){return t.text.toLowerCase().includes(e.toLowerCase())}))}})}),(0,i.jsx)(po,{className:"!pt-2",name:"text",hideError:!0,children:(0,i.jsx)(Q.l.Input,{name:"text",variant:"textarea",rows:12})}),(0,i.jsx)("div",{children:(0,i.jsx)(tT.Z.BodyXs,{color:"text-tertiary",weight:"regular",children:(0,E.t)("help_widget.report_bug.what_did_you_find")})}),n.length>0&&(0,i.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:n.map(function(e){return(0,i.jsx)(u6,{attachment:pl(ps({},e),{status:e.completed?nM.L9:nM.si}),onCancel:a},e.url)})}),(0,i.jsxs)("div",pl(ps({className:"my-4 flex justify-between"},k()),{children:[(0,i.jsx)("input",ps({},N())),(0,i.jsx)(to.T,{placement:"right",content:(0,E.t)("tiptap.attach_file"),className:"text-dark visited:text-dark hover:bg-tertiary hover:text-dark focus:bg-tertiary flex w-10 items-center justify-center rounded-lg text-center",children:(0,i.jsx)("button",{type:"button","aria-label":(0,E.t)("tiptap.attach_file"),onClick:function(e){var t;e.preventDefault(),null==(t=P.current)||t.click()},className:"p-2",children:(0,i.jsx)(D.JO,{type:"hw-paperclip",size:20})})}),(0,i.jsxs)("div",{className:"flex flex-row items-center text-right",children:[O&&(0,i.jsx)("div",{className:"max-w-[200px] px-4 text-right",children:(0,i.jsx)(tT.Z.BodyXs,{color:"text-v2-danger",weight:"regular",leading:"leading-[18px]",children:(0,E.t)("help_widget.report_bug.validation_error")})}),(0,i.jsxs)(tl.z,{variant:"circle",disabled:t||O||!w,type:"submit",className:"flex items-center gap-2",children:[(0,E.t)("support_widget.send_message_form.button_label"),t&&(0,i.jsx)(D.JO,{type:"loader",size:16})]})]})]}))]})},pm=function(){var e=(0,U.UO)().id,t=(0,tc.pm)(),r=(0,U.k6)(),n=(0,es.useQueryClient)(),o=uI({conversationId:e}),a=o.uploadAttachments,s=o.attachments,l=o.cancelAttachment,c=pr({onSuccess:function(){r.push("/message_confirmation/".concat(e))},onError:function(){t.error((0,E.t)("request_failure_message"))}}),u=c.mutate,d=c.isLoading,f=uY(e),m=f.data,p=f.isLoading,b=uG({onSuccess:function(){n.invalidateQueries(["help-widget","conversations",e])},onError:function(){t.error((0,E.t)("request_failure_message"))}}).mutate,h=function(t,r,n){b({id:e,conversation:{title:(0,E.t)("help_widget.report_bug.title"),data:{type:t,text:r,priority:n},status:"draft"}})};if(p)return(0,i.jsx)("div",{className:"flex size-full flex-1 flex-col p-4",children:(0,i.jsx)(mS,{rows:4,height:"52px",wrapperClassName:"!px-0"})});var y=(null==m?void 0:m.data)||{},v=y.text,g=y.type,_=y.priority;return(0,i.jsx)(dC,{id:"send-message-form-container",className:"relative flex-1 overflow-hidden",children:(0,i.jsx)("div",{className:"scrollbar-hide absolute inset-0 overflow-y-auto",children:(0,i.jsx)(Q.l,{preventAccidentalLeave:!0,validationSchema:pi,id:"send-message-form",onSubmit:function(t){u({id:e,conversation:{title:(0,E.t)("help_widget.report_bug.title"),status:"open",data:{type:t.type,text:t.text,priority:t.priority}},attachment_ids:s.map(function(e){return e.attachmentId})})},mode:"onSubmit",defaultValues:{text:v,type:g,priority:_},children:(0,i.jsx)(pf,{isLoading:d,attachments:s,uploadAttachments:a,cancelAttachment:l,onFormChange:function(e){h(e.type,e.text,e.priority)}})})})})},pp=function(e){var t=e.current,r=e.previous,n=new Date(t),o=new Date(r),a=n.getFullYear(),s=n.toLocaleString("en-US",{month:"long"}),l=o.getFullYear(),c=o.toLocaleString("en-US",{month:"long"});return a!==l||s!==c?(0,i.jsx)("div",{className:"bg-secondary p-4",children:(0,i.jsxs)(tT.Z.LabelSm,{color:"text-tertiary",weight:"normal",truncate:!0,children:[s," ",a]})}):null},pb=function(){var e=mI(),t=e.isLoading,r=e.data;if(t)return(0,i.jsx)(mk,{});var n=(null==r?void 0:r.records)||[];return(0,i.jsxs)(dC,{className:"scrollbar-hide bg-secondary flex h-full flex-col overflow-y-auto",children:[n.map(function(e,t){var r;return(0,i.jsxs)("div",{children:[(0,i.jsx)(pp,{current:e.starts_at,previous:null==(r=n[t-1])?void 0:r.starts_at}),(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(mT,{event:e,showArrowIcon:!1},e.id)})]},e.id)}),(0,i.jsx)("div",{className:"p-4",children:(0,i.jsxs)("a",{href:nM.Qd,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-disabled flex h-8 items-center justify-center gap-1 self-stretch rounded-3xl border px-4",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,E.t)("support_widget.news.see_more")}),(0,i.jsx)(D.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})})]})},ph=function(e){return(0,re.A)({"text-default dark:text-feature-light":e,"text-disabled":!e},"relative flex flex-col hover:text-default focus:text-default text-center")},py=function(){var e=uy().data,t=(null==e?void 0:e.unread_count)||0,r=(0,tr.ef)();return(0,i.jsxs)("div",{className:(0,re.A)("bg-primary text-darkest flex w-full items-center justify-between px-6 pb-3 pt-2 text-[11px] font-medium leading-[18px] tracking-[0.2px]",{"rounded-b-2xl":!r}),children:[(0,i.jsxs)(lg.OL,{to:"/",className:ph,isActive:function(e,t){var r=t.pathname;return"/"===r||r.endsWith("/new_ticket")||r.startsWith("/message_confirmation/")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(D.JO,{type:"sw-home",size:20})}),(0,i.jsx)("span",{children:(0,E.t)("support_widget.bottom_menu.home")})]}),(0,i.jsxs)(lg.OL,{to:"/conversations",className:ph,children:[(0,i.jsxs)("div",{className:"relative mb-[-4px] p-1.5",children:[(0,i.jsx)(D.JO,{type:"sw-conversations",size:20}),t>0&&(0,i.jsx)("div",{className:"bg-v2-danger absolute right-[26px] top-[4px] size-2.5 rounded-lg"})]}),(0,i.jsx)("span",{children:(0,E.t)("help_widget.bottom_menu.conversations")})]}),(0,i.jsxs)(lg.OL,{to:"/help",className:ph,isActive:function(e,t){var r=t.pathname;return"/help"===r||r.startsWith("/spaces/")||"/space_groups"===r||r.startsWith("/posts/")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(D.JO,{type:"sw-help",size:20})}),(0,i.jsx)("span",{children:(0,E.t)("support_widget.bottom_menu.help")})]}),(0,i.jsxs)(lg.OL,{to:"/explore",className:ph,isActive:function(e,t){var r=t.pathname;return"/explore"===r||"/events"===r||r.startsWith("/news")},children:[(0,i.jsx)("div",{className:"mb-[-4px] p-1.5",children:(0,i.jsx)(D.JO,{type:"sw-explore",size:20})}),(0,i.jsx)("span",{children:(0,E.t)("help_widget.bottom_menu.explore")})]})]})},pv=function(e,t){var r=new Blob([e],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=t,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(n)},pg=function(e){switch(e.author_type){case"user":return e.author_name||"User";case"agent":return e.author_name?"".concat(e.author_name," (Circle)"):"Circle Support";case"bot":return"Copilot";case"system":return"System";default:return"Unknown"}},p_=function(e){var t=new Date(e.created_at).toISOString().replace("T"," ").slice(0,19),r=pg(e),n=fb(e);return"[".concat(t," UTC] ").concat(r,": ").concat(n)},px=function(){var e=uM().visibleMessages;return{downloadTranscript:(0,o.useCallback)(function(){if(0!==e.length){var t=e.map(p_).join("\n\n"),r=Math.floor(Date.now()/1e3);pv(t,"transcript_".concat(r,".txt"))}},[e])}},pj=function(){var e=!!(0,U.$B)(ex._N.spaceGroups()),t=(0,U.$B)("/posts/:id"),r=(0,U.$B)("/news/:id"),n=(0,U.$B)({path:"/conversations/:id",exact:!0}),i=!!(0,U.$B)("/spaces/:spaceId/posts"),o=!!t,a=!!r,s=!!(0,U.$B)("/news"),l=!!(0,U.$B)("/events"),c=!!(0,U.$B)("/conversations/:id/new_ticket"),u=!!(0,U.$B)("/message_confirmation/:id"),d=!!(0,U.$B)({path:"/conversations",exact:!0}),f=!!n,m=i||o||a||s||l||c||u||f;return{isSpaceGroupsRoutes:e,isSpaceRoute:i,postMatch:t,newsMatch:r,isPostRoute:o,isNewsRoute:a,isNewsListRoute:s,isEventsRoute:l,isBackButtonVisible:m,isExpandButtonVisible:o||a||c||u||f,isSpecialHeaderVisible:m||e,isSendUsMessageRoute:c,isMessageConfirmationRoute:u,isConversationListRoute:d,isSingleConversationRoute:f,isConversationsRoute:f||d,singleConversationMatch:n}},pw=function(){uf()},pO=function(e){return(0,es.useQuery)(["posts","details",e],function(){return el.R.showPost(e)},{onError:pw,retry:!1,staleTime:nM.mo})};function pS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pk=function(e){var t,r,n=e.onClick,a=(0,U.k6)(),s=(0,un.tQ)(),l=s.setIsShowingLeaveWarning,c=s.setLeaveWarningTrigger,u=pj(),d=u.singleConversationMatch,f=u.isSingleConversationRoute,m=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return pS(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pS(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(null==d||null==(r=d.params)?void 0:r.id)||"",y=uY(h).data;(0,o.useEffect)(function(){y&&b(y)},[y]),(0,ub.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&b(e.conversation)},conversation_id:h,canCreateConnection:!!h},[h]);var v=f&&(null==p?void 0:p.is_waiting_in_queue)&&(null==p?void 0:p.channel)==="live_chat"&&(null==p?void 0:p.status)!=="closed";return(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.tooltip.back"),children:(0,i.jsx)("button",{type:"button",onClick:function(){if(v){c("back_button"),l(!0);return}if(n)n();else{var e=ud();e?a.replace(e):a.replace("/")}},className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",children:(0,i.jsx)(D.JO,{type:"16-arrow-left",useWithFillCurrentColor:!0,size:16})})})};function pN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pP=function(e){var t,r,n=e.onClick,a=(0,un.tQ)(),s=a.setIsShowingLeaveWarning,l=a.setLeaveWarningTrigger,c=pj(),u=c.singleConversationMatch,d=c.isSingleConversationRoute,f=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return pN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pN(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1],b=(null==u||null==(r=u.params)?void 0:r.id)||"",h=uY(b).data;(0,o.useEffect)(function(){h&&p(h)},[h]),(0,ub.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&p(e.conversation)},conversation_id:b,canCreateConnection:!!b},[b]);var y=d&&(null==m?void 0:m.is_waiting_in_queue)&&(null==m?void 0:m.channel)==="live_chat"&&(null==m?void 0:m.status)!=="closed";return(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.tooltip.close"),children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",onClick:function(){if(y){l("close_button"),s(!0);return}n()},children:(0,i.jsx)(D.JO,{type:"hw-cross",size:16})})})},pC=function(e){var t=e.onDownload;return(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.tooltip.download_transcript"),children:(0,i.jsx)("button",{type:"button",onClick:t,className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",children:(0,i.jsx)(D.JO,{type:"16-download",size:16})})})},pA=function(){var e=(0,un.tQ)(),t=e.isExpanded,r=e.expandWidget,n=e.collapseWidget;return(0,i.jsx)(to.T,{content:t?(0,E.t)("help_widget.tooltip.collapse_widget"):(0,E.t)("help_widget.tooltip.expand_widget"),children:(0,i.jsx)("button",{type:"button",onClick:function(){t?n():r()},className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",children:(0,i.jsx)(D.JO,{type:"sw-resize",useWithFillCurrentColor:!0,size:16})})})},pI=function(){var e=(0,un.tQ)(),t=e.isSidebarOpen,r=e.collapseSideBar,n=e.expandSideBar;return(0,i.jsx)(to.T,{content:t?(0,E.t)("help_widget.tooltip.hide_conversations"):(0,E.t)("help_widget.tooltip.show_conversations"),children:(0,i.jsx)("button",{type:"button",onClick:function(){t?r():n()},className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",children:(0,i.jsx)(D.JO,{type:"sw-expand-sidebar",useWithFillCurrentColor:!0,size:16})})})},pT=function(e){var t=e.postUrl;return"minimal"===e.version?(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.tooltip.open_in_new_window"),children:(0,i.jsx)("button",{type:"button",onClick:function(){return window.open(t,"_blank","noopener,noreferrer")},className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",children:(0,i.jsx)(D.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})})}):(0,i.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"dark:border-secondary my-2 flex w-full justify-center gap-2 rounded-3xl border border-[#2B2E33] p-1",children:[(0,i.jsx)(tT.Z.LabelSm,{weight:"font-medium",color:"text-primary",size:"text-sm",children:(0,E.t)("support_widget.open_post")}),(0,i.jsx)(D.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})};function pE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pL=function(e){var t,r,n,a,s=e.pageName,l=e.onClose,c=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return pE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pE(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,un.tQ)(),m=f.isExpanded,p=f.isSidebarOpen,b=f.currentSpaceProperties,h=(0,U.TH)(),y=(0,U.k6)(),v=pj(),g=v.isSpaceGroupsRoutes,_=v.isSpaceRoute,x=v.postMatch,j=v.newsMatch,w=v.isPostRoute,O=v.isNewsRoute,S=v.isBackButtonVisible,k=v.isExpandButtonVisible,N=v.isSpecialHeaderVisible,P=v.isNewsListRoute,C=v.isEventsRoute,A=v.isSendUsMessageRoute,I=v.isMessageConfirmationRoute,T=v.isConversationsRoute,L=v.isConversationListRoute,M=v.singleConversationMatch,R=v.isSingleConversationRoute,B=(0,tr.ef)(),z=(0,tr.ac)("(min-width: 1080px)"),F=px().downloadTranscript,Z="/"!==h.pathname,G=pO((null==x||null==(r=x.params)?void 0:r.id)||(null==j||null==(n=j.params)?void 0:n.id)||"").data,q=(null==M||null==(a=M.params)?void 0:a.id)||"",V=uY(q).data;(0,o.useEffect)(function(){V&&d(V)},[V]),(0,ub.s)({channel:"HelpWidget::ConversationChannel",onMessageReceive:function(e){"updateConversation"===e.event&&e.conversation&&d(e.conversation)},conversation_id:q,canCreateConnection:!!q},[q]);var W=function(){return g?(0,E.t)("support_widget.search_container.title"):(O||w)&&G?G.name||"":P?(0,E.t)("support_widget.news.news"):_?b.name:C?(0,E.t)("support_widget.events"):A||I?(0,E.t)("help_widget.report_bug.send_us_a_message"):L?(0,E.t)("help_widget.conversation_list_page.title"):R?(null==u?void 0:u.title)||(0,E.t)("help_widget.conversation_page.title"):s},H=(null==G?void 0:G.post_url)||nM.kL;return(["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach(function(e){H.includes(e)&&(H=H.replace(e,"help.circle.so"))}),N)?(0,i.jsx)("div",{className:(0,re.A)("bg-primary border-primary sticky top-0 z-10 flex h-16 w-full shrink-0 items-center border-b","justify-end"),children:(0,i.jsxs)("div",{className:"flex size-full justify-end",children:[m&&(0,i.jsx)("div",{className:(0,re.A)("border-primary overflow-hidden border-r transition-opacity duration-200",{"w-[312px] flex-none":p,"pointer-events-none w-0 opacity-0":!p}),children:(0,i.jsx)("div",{className:(0,re.A)("ease-in-strong flex h-full w-[312px] items-center gap-2 px-5 opacity-100 transition-opacity duration-300",{"ease-out-strong -z-10 opacity-0":!p}),children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:(0,E.t)("help_widget.conversation_list_page.title")})})}),(0,i.jsxs)("div",{className:(0,re.A)("flex h-full items-center gap-2 px-5",{"w-full":B,"w-[736px] flex-none":!B&&m,"w-[400px] flex-none":!B&&!m}),children:[S&&(0,i.jsx)(pk,{onClick:function(){if(I)y.replace("/");else if(R)y.replace("/conversations");else{var e=ud();y.replace(e)}}}),T&&m&&z&&(0,i.jsx)(pI,{}),(0,i.jsx)("div",{className:"min-w-0 flex-1 truncate",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:W()})}),k&&!B&&(0,i.jsx)(pA,{}),R&&q&&q!==nM.af&&(0,i.jsx)(pC,{onDownload:F}),(w||O)&&(0,i.jsx)(pT,{version:"minimal",postUrl:H}),(0,i.jsx)(pP,{onClick:l})]})]})}):(0,i.jsxs)("div",{className:(0,re.A)("bg-primary sticky top-0 z-10 flex h-16 w-full shrink-0 items-center justify-between gap-2 px-5",{"border-primary border-b":Z}),children:[(0,i.jsx)("div",{className:"min-w-0 flex-1 truncate",children:(0,i.jsx)(tT.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:W()})}),(0,i.jsx)(to.T,{content:(0,E.t)("help_widget.tooltip.close"),children:(0,i.jsx)("button",{type:"button",className:"hover:bg-secondary text-light flex size-6 items-center rounded-full p-1",onClick:l,children:(0,i.jsx)(D.JO,{type:"hw-cross",size:16})})})]})},pD=function(e){var t=e.children,r=e.onClose,n=e.pageName,o=(0,un.tQ)(),a=o.isExpanded,s=o.isShowingLeaveWarning,l=o.isSidebarOpen,c=o.sidebarTransitionDuration,u=(0,U.TH)().pathname,d=!/^\/conversations\/\w+$/.test(u)&&!u.endsWith("/new_ticket")&&!u.startsWith("/message_confirmation/"),f="/"===u||u.endsWith("/new_ticket")||u.startsWith("/message_confirmation/"),m="/"===u,p=(0,y.TC)().isLightAppearance,b=(0,tr.ef)(),h="width ".concat(c,", height 400ms, max-height 400ms, transform 600ms cubic-bezier(0, 1.2, 1, 1), opacity 166ms ease-out"),v="400px";return b?v="100%":a&&(v=l?"1048px":"736px"),(0,i.jsxs)("div",{className:(0,re.A)("bg-primary flex flex-col rounded-2xl box-content",{"h-[min(732px,100vh-24px)]":!a,"h-[calc(100vh-24px)]":a,"border-4 border-[#E4E7EB66]":p,"border-primary border-4":!p}),style:{boxShadow:"\n        8px 14px 35px 0px rgba(110, 110, 110, 0.07),\n        32px 54px 63px 0px rgba(110, 110, 110, 0.06),\n        71px 122px 85px 0px rgba(110, 110, 110, 0.03),\n        126px 218px 101px 0px rgba(110, 110, 110, 0.01),\n        197px 340px 110px 0px rgba(110, 110, 110, 0)\n      ",transition:h,width:v},children:[m&&(0,i.jsxs)("div",{className:"relative left-0 top-0 flex w-96 opacity-10",children:[(0,i.jsx)("div",{className:"absolute left-[27.06px] top-[474.84px] h-60 w-72 rounded-full bg-violet-600 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[51.36px] top-[420px] h-44 w-56 rounded-full bg-rose-500 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[156.85px] top-[494.50px] h-48 w-60 rounded-full bg-sky-200 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-0 top-[471.02px] h-32 w-28 rounded-full bg-sky-400 blur-[106px]"})]}),(0,i.jsx)("div",{className:(0,re.A)("relative size-full origin-bottom-right overflow-hidden rounded-t-2xl",{"dark:border-primary border-b border-b-[#E4E7EB]":d&&!f}),style:{transition:h},children:(0,i.jsxs)("div",{className:"relative z-10 flex size-full flex-col",children:[!s&&(0,i.jsx)(pL,{pageName:n,onClose:r}),t]})}),d&&(0,i.jsx)("div",{className:"border-primary dark:bg-primary h-[66px] origin-bottom-right rounded-b-xl bg-white shadow-lg",children:(0,i.jsx)(py,{})})]})},pM=function(e){var t=e.children,r=e.onClose,n=e.pageName,o=(0,un.tQ)(),a=o.isExpanded,s=o.isShowingLeaveWarning,l=(0,U.TH)().pathname,c=!l.match(/^\/conversations\/\d+$/)&&!l.endsWith("/new_ticket")&&!l.startsWith("/message_confirmation/"),u="/"===l||l.endsWith("/new_ticket")||l.startsWith("/message_confirmation/"),d="/"===l;return(0,i.jsxs)("div",{className:(0,re.A)("bg-primary flex flex-col rounded-2xl",{"h-screen-dynamic":!a}),style:{transition:"height 300ms ease 0s"},children:[d&&(0,i.jsxs)("div",{className:"relative left-0 top-0 flex w-96 opacity-10",children:[(0,i.jsx)("div",{className:"absolute left-[27.06px] top-[474.84px] h-60 w-72 rounded-full bg-violet-600 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[51.36px] top-[420px] h-44 w-56 rounded-full bg-rose-500 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-[156.85px] top-[494.50px] h-48 w-60 rounded-full bg-sky-200 blur-[106px]"}),(0,i.jsx)("div",{className:"absolute left-0 top-[471.02px] h-32 w-28 rounded-full bg-sky-400 blur-[106px]"})]}),(0,i.jsx)("div",{className:(0,re.A)("relative h-full origin-bottom-right overflow-hidden",{"dark:border-primary border-b border-b-[#E4E7EB]":c&&!u}),style:{transition:"width 300ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:(0,i.jsxs)("div",{className:"relative z-10 flex size-full flex-col",children:[!s&&(0,i.jsx)(pL,{pageName:n,onClose:r}),t]})}),c&&(0,i.jsx)("div",{className:"border-primary dark:bg-primary h-[66px] origin-bottom-right rounded-b-xl bg-white shadow-lg",children:(0,i.jsx)(py,{})})]})},pR=function(){var e=nR(),t=e.isLoading,r=e.data;if(t)return(0,i.jsx)(mk,{});var n=(null==r?void 0:r.records)||[];return(0,i.jsx)(dC,{className:"scrollbar-hide bg-secondary flex flex-col overflow-auto py-4",children:(0,i.jsxs)("div",{className:"px-4",children:[n.map(function(e){return(0,i.jsx)(mD,{post:e},e.id)}),(0,i.jsxs)("a",{href:nM.NA,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-disabled flex h-8 items-center justify-center gap-1 self-stretch rounded-3xl border px-4",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,E.t)("support_widget.news.see_more")}),(0,i.jsx)(D.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})]})})},pB=r(291704),pz=r(322825),pF=function(){uf()},pU=function(e){var t=(0,es.useQueryClient)();return(0,es.useQuery)(["news",e],function(){return el.R.showPost(e)},{onError:pF,retry:!1,staleTime:nM.mo,initialData:function(){var r,n;return null==(n=t.getQueryData(["news"]))||null==(r=n.records)?void 0:r.find(function(t){var r;return(null==(r=t.id)?void 0:r.toString())===e})}})},pZ=function(){var e,t,r=pU((0,U.$B)().params.id),n=r.isError,o=r.isLoading,a=r.data;if(o)return(0,i.jsxs)(dC,{className:"flex flex-col gap-4",children:[(0,i.jsx)(mS,{rows:1,height:"112px",wrapperClassName:"mt-4 space-y-0",loaderClassName:"rounded-2xl"}),(0,i.jsx)(mS,{rows:1,height:"26px",loaderClassName:"rounded-2xl"}),(0,i.jsx)(mS,{rows:1,width:"310px",height:"26px",loaderClassName:"rounded-2xl"})]});if(n)return(0,i.jsx)(dC,{className:"scrollbar-hide flex flex-col overflow-auto",children:(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,E.t)("support_widget.post_not_found")})})});var s=(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a.tiptap_body),t=t={body:a.tiptap_inner_body_without_cta},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e);return(0,i.jsx)(dC,{className:"scrollbar-hide flex flex-col overflow-auto",children:(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[a.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:a.cover_image_url})}),(0,i.jsx)("div",{className:"mx-6 my-4",children:(0,i.jsx)(tT.Z.TitleMd,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:a.post_url||nM.NA,target:"_blank",rel:"noreferrer noopener",children:a.name})})}),(0,i.jsxs)("div",{id:"news_view_post_body",className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,lY.Iz)(a)&&a.body_trix_content&&(0,i.jsx)(pB.P,{content:a.body_trix_content}),(0,lY.s8)(a)&&a.tiptap_body&&(0,i.jsx)(pz.Rs,{readOnly:!0,value:s.body,sgidToObjectMap:s.sgids_to_object_map,inlineAttachments:s.inline_attachments}),(0,i.jsx)("div",{className:"h-5 shrink-0"})]})]})})},pG=r(756468),pq=function(e){var t=e.value,r=e.handleFeedback,n=e.isFeedbackGiven,o=void 0===n?null:n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{className:(0,re.A)("w-full rounded-3xl border px-6 py-[3px] align-baseline font-medium",{"text-dark border-gray-300 dark:border-gray-500":null===t||!t,"border-circle text-circle":!0===t,"!cursor-not-allowed":o,"hover:border-secondary dark:hover:border-secondary":!o}),onClick:function(){return!0!==t&&r(!0)},type:"button",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,E.t)("help_widget.post.feedback_yes")}),(0,i.jsx)(D.JO,{type:"16-thumbs-up",size:16,className:(0,re.A)({"text-circle ml-1":!0===t,"text-dark ml-1 dark:text-gray-500":null===t||!t})})]}),(0,i.jsxs)("button",{className:(0,re.A)("w-full rounded-3xl border px-6 py-[3px] align-baseline font-medium",{"text-dark border-gray-300 dark:border-gray-500":null===t||t,"border-circle text-circle":!1===t,"!cursor-not-allowed":o,"hover:border-secondary dark:hover:border-secondary":!o}),onClick:function(){return!1!==t&&r(!1)},type:"button",children:[(0,i.jsx)(tT.Z.LabelSm,{color:"text-primary",weight:"medium",children:(0,E.t)("help_widget.post.feedback_no")}),(0,i.jsx)(D.JO,{type:"16-thumbs-down",size:16,className:(0,re.A)({"text-circle ml-1":!1===t,"text-dark ml-1 dark:text-gray-500":null===t||t})})]})]})};function pV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pV(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pH=function(e){var t=e.post,r=pW((0,o.useState)(null),2),n=r[0],a=r[1],s=pW((0,o.useState)(!1),2),l=s[0],c=s[1],u=(0,es.useMutation)(function(e){var t=e.postId,r=e.value;return el.R.createPostFeedback({postId:t,helpful:r})}).mutate;return(0,o.useEffect)(function(){if(null!==n){var e;null==(e=document.getElementById("feedback-response-container"))||e.scrollIntoView()}},[n]),(0,i.jsxs)("div",{className:"mx-auto w-full pt-4",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(M.Di,{weight:"semibold",children:(0,E.t)("support_widget.was_this_article_helpful")})}),(0,i.jsx)("div",{className:"mb-6 flex justify-center gap-4",children:(0,i.jsx)(pq,{value:n,handleFeedback:function(e){l||(a(e),u({postId:t.id,value:e}),c(!0))},isFeedbackGiven:l})}),(0,i.jsxs)("div",{id:"feedback-response-container",children:[n&&(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(tw.Q,{children:(0,E.t)("support_widget.thank_you_for_article_feedback")})}),!1===n&&(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(mK,{helpText:(0,E.t)("help_widget.post.still_need_help"),buttonText:(0,E.t)("help_widget.post.ask_a_question")})})]})]})},pQ=function(e){var t=e.spaceGroupName,r=e.spaceName,n=e.spaceId,o=(0,U.k6)();return(0,i.jsxs)("div",{className:"flex items-center",children:[t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pr-1",children:(0,i.jsx)(tT.Z.BodySm,{weight:"regular",size:"text-sm",color:"text-tertiary",children:t})}),(0,i.jsx)(tT.Z.BodySm,{weight:"regular",size:"text-sm",color:"text-tertiary",children:" / "})]}),(0,i.jsx)("button",{type:"button",onClick:function(){o.push(ex._N.posts(n))},className:"hover:bg-tertiary rounded-md pl-1 transition-colors duration-150 ease-linear",children:(0,i.jsx)(tT.Z.BodySm,{weight:"regular",color:"text-tertiary",children:r})})]})},pK=function(e){var t=e.id,r=(0,o.useRef)(null),n=(0,U.k6)(),a=pO(t),s=a.isError,l=a.isLoading,c=a.data,u=(null==c?void 0:c.post_url)||nM.kL;["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach(function(e){u.includes(e)&&(u=u.replace(e,"help.circle.so"))});var d=(0,o.useCallback)(function(e){e.preventDefault(),e.stopPropagation();var t,r=null==(t=e.currentTarget)?void 0:t.getAttribute("data-post-id");(0,pG.Z)(r,"Post ID is required"),n.push(ex._N.showPost(r))},[n]),f=(0,o.useCallback)(function(e){var t=e.containerElement;c&&(t.querySelectorAll(".trix-content a").forEach(function(e){var t=e.getAttribute("href");t&&c.urls_hash[t]?e.setAttribute("data-post-id",c.urls_hash[t]):(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer"))}),t.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.addEventListener("click",d)}),r.current=t)},[c,d]);return((0,o.useEffect)(function(){return function(){r.current&&r.current.querySelectorAll(".trix-content a[data-post-id]").forEach(function(e){e.removeEventListener("click",d)})}},[d]),l)?(0,i.jsxs)(dC,{className:"flex flex-col gap-4",children:[(0,i.jsx)(mS,{rows:1,height:"112px",wrapperClassName:"mt-4 space-y-0",loaderClassName:"rounded-2xl"}),(0,i.jsx)(mS,{rows:1,height:"26px",loaderClassName:"rounded-2xl"}),(0,i.jsx)(mS,{rows:1,width:"310px",height:"26px",loaderClassName:"rounded-2xl"})]}):s?(0,i.jsx)(dC,{className:"flex flex-col",children:(0,i.jsx)("div",{className:"support-widget-post__body grow",children:(0,i.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,E.t)("support_widget.post_not_found")})})}):(0,i.jsx)(dC,{className:"flex h-full flex-col overflow-hidden",children:(0,i.jsxs)("div",{className:"support-widget-post__body !mb-0 flex-1 overflow-y-auto",children:[c.cover_image_url&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{loading:"lazy",alt:"",src:c.cover_image_url})}),(0,i.jsx)("div",{className:"mx-5 my-4",children:(0,i.jsx)(pQ,{spaceGroupName:c.space_group_name,spaceName:c.space_name,spaceId:c.space_id})}),(0,i.jsx)("div",{className:"mx-5 my-4",children:(0,i.jsx)(tT.Z.TitleLg,{children:(0,i.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:u,target:"_blank",rel:"noreferrer noopener",children:c.name})})}),(0,i.jsxs)("div",{className:"mx-5 my-3 flex flex-col gap-2 pb-4",children:[(0,lY.Iz)(c)&&c.body_trix_content&&(0,i.jsx)(pB.P,{content:c.body_trix_content,transformLinks:f}),(0,lY.s8)(c)&&c.tiptap_body&&(0,i.jsx)(pz.Rs,{readOnly:!0,value:c.tiptap_body.body,sgidToObjectMap:c.tiptap_body.sgids_to_object_map,inlineAttachments:c.tiptap_body.inline_attachments}),(0,i.jsx)(pT,{version:"full",postUrl:u}),"tutorials"!==c.space_slug&&(0,i.jsx)(pH,{post:c})]})]})})},pJ=["/form","/posts/","/news/","/message_confirmation/","/conversations/"],p$=function(e){var t=e.children,r=pj().isConversationsRoute,n=(0,tr.ef)(),a=(0,tr.ac)("(min-width: 1080px)"),s=(0,U.TH)(),l=(0,un.tQ)(),c=l.collapseWidget,u=l.collapseSideBar,d=l.isShowingLeaveWarning;return(0,o.useEffect)(function(){var e;uu(s.pathname),e=s.pathname,(!(pJ.some(function(t){return t.endsWith("/")?e.startsWith(t):e===t})||e.endsWith("/new_ticket"))||d||n)&&c(),r&&a||u()},[s.pathname,c,u,r,d,n,a]),(0,i.jsx)(i.Fragment,{children:t})},pX=function(e){var t=e.onClose,r=(0,U.TH)(),n=(0,tr.ef)();return(0,i.jsx)(n?pM:pD,{onClose:t,pageName:function(){switch(r.pathname){case"/":return(0,E.t)("help_widget.home_page.title");case"/conversations":return"Conversations";case"/help":return(0,E.t)("help_widget.help_page.title");case"/explore":return"Explore";default:return""}}(),children:(0,i.jsx)(p$,{children:(0,i.jsxs)(U.rs,{children:[(0,i.jsx)(U.AW,{exact:!0,path:"/",component:m7}),(0,i.jsx)(U.AW,{exact:!0,path:"/explore",component:mG}),(0,i.jsx)(U.AW,{exact:!0,path:"/help",component:m2}),(0,i.jsx)(U.AW,{exact:!0,path:"/spaces/:spaceId/posts",component:m2}),(0,i.jsx)(U.AW,{exact:!0,path:"/space_groups",component:m2}),(0,i.jsx)(U.AW,{exact:!0,path:"/posts/:id",render:function(e){var t=e.match;return(0,i.jsx)(pK,{id:t.params.id},t.params.id)}}),(0,i.jsx)(U.AW,{exact:!0,path:"/news",component:pR}),(0,i.jsx)(U.AW,{exact:!0,path:"/news/:id",component:pZ}),(0,i.jsx)(U.AW,{exact:!0,path:"/events",component:pb}),(0,i.jsx)(U.AW,{exact:!0,path:"/conversations",render:function(){return(0,i.jsx)(pe,{children:(0,i.jsx)(mA,{})})}}),(0,i.jsx)(U.AW,{exact:!0,path:"/conversations/:id",render:function(e){var t=e.match;return(0,i.jsx)(pe,{children:(0,i.jsx)(mb,{id:t.params.id},t.params.id)})}}),(0,i.jsx)(U.AW,{exact:!0,path:"/conversations/:id/new_ticket",component:pm}),(0,i.jsx)(U.AW,{exact:!0,path:"/message_confirmation/:id",component:m8})]})})})};function pY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pY(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p1=function(){var e,t,r=(0,un.tQ)(),n=r.isOpen,a=r.isFabVisible,s=r.shouldDisplayOnboarding,l=r.toggleWidget,c=r.hideFab,u=r.showFab,d=p0((0,o.useState)(0),2),f=d[0],m=d[1],p=p0((0,o.useState)(!1),2),b=p[0],h=p[1],y=p0((0,o.useState)(!n),2),v=y[0],g=y[1],_=p0((0,o.useState)(s),2),x=_[0],j=_[1],w=um().mutate,O=function(){x&&w(),j(!1)},S=ul();(0,o.useEffect)(function(){m(up())},[]),(0,o.useEffect)(function(){n&&g(!1)},[n]);var k=!n&&v&&a&&x;return(0,i.jsxs)("div",{id:"help-widget-body",className:(0,re.A)("fixed bottom-3 z-[60] flex",{"bottom-5":!n&&v}),style:{right:f+(!n&&v?20:12)},children:[(0,i.jsx)(q.u,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:n},nM.sm),t=t={afterLeave:function(){return g(!0)},children:(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)(U.VA,{initialEntries:S,initialIndex:S.length-1,children:(0,i.jsx)(pX,{onClose:function(){l({shouldTriggerOnWidgetClose:!0})}})})})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),(0,i.jsxs)("div",{className:"flex flex-col",children:[k&&(0,i.jsx)(u_,{onClick:function(){return O()}}),!n&&v&&(0,i.jsxs)("div",{className:"-mr-5 flex justify-end align-baseline",onMouseOver:function(){return h(!0)},onFocus:function(){return h(!0)},onMouseOut:function(){return h(!1)},onBlur:function(){return h(!1)},children:[(0,i.jsx)("div",{className:(0,re.A)("transition-transform duration-300 ease-out",{"translate-x-[150%]":!a}),children:(0,i.jsx)(ug,{isOpen:n,onClick:function(){a&&(O(),l({shouldTriggerOnWidgetClose:!0}))}})}),(0,i.jsx)(D.JO,{type:a?"12-chevron-right":"12-chevron-left",size:12,className:(0,re.A)("mr-1 !w-4 cursor-pointer text-gray-400",{invisible:x||n||a&&!b}),onClick:a?c:u})]})]})]})},p2=function(){return null};function p3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p5=function(){var e,t,r=(0,un.tQ)(),n=r.isOpen,a=r.isFabVisible,s=r.shouldDisplayOnboarding,l=r.toggleWidget,c=r.hideFab,u=r.showFab,d=p6((0,o.useState)(!1),2),f=d[0],m=d[1],p=p6((0,o.useState)(!n),2),b=p[0],h=p[1],y=p6((0,o.useState)(s),2),v=y[0],g=y[1],_=um().mutate,x=function(){v&&_(),g(!1)},j=ul();(0,o.useEffect)(function(){n&&h(!1)},[n]);var w=!n&&b&&a&&v;return(0,i.jsxs)("div",{id:"help-widget-body",className:(0,re.A)("fixed bottom-0 right-0 z-[60]",{"bottom-20 right-5":!n&&b,"bottom-0 h-full w-full":n}),children:[(0,i.jsx)(q.u,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:n},nM.sm),t=t={afterLeave:function(){return h(!0)},children:(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)(U.VA,{initialEntries:j,initialIndex:j.length-1,children:(0,i.jsx)(pX,{onClose:function(){l({shouldTriggerOnWidgetClose:!0})}})})})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e)),(0,i.jsxs)("div",{className:"flex flex-col",children:[w&&(0,i.jsx)(u_,{onClick:function(){return x()}}),!n&&b&&(0,i.jsxs)("div",{className:"-mr-5 flex justify-end align-baseline",onMouseOver:function(){return m(!0)},onFocus:function(){return m(!0)},onMouseOut:function(){return m(!1)},onBlur:function(){return m(!1)},children:[(0,i.jsx)("div",{className:(0,re.A)("transition-transform duration-300 ease-out",{"translate-x-[150%]":!a}),children:(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(ug,{isOpen:n,onClick:function(){a&&(x(),l({shouldTriggerOnWidgetClose:!0}))}})})}),(0,i.jsx)(D.JO,{type:a?"12-chevron-right":"12-chevron-left",size:12,className:(0,re.A)("mr-1 !w-4 cursor-pointer text-gray-400",{invisible:v||n||a&&!f}),onClick:a?c:u})]})]})]})};function p4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p7(e){return function(e){if(Array.isArray(e))return p4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p4(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p9=function(e){var t=e.showWidgetBot,r=void 0!==t&&t,n=(0,U.TH)(),a=(0,L.nT)().records,s=(0,L.wh)().currentCommunityMember,l=!(null==s?void 0:s.is_admin),c=a.filter(function(e){return"chat"===e.post_type}).map(function(e){return e.slug}),u=p7(nM._9).concat(p7(c)).some(function(e){return n.pathname.includes(e)}),d=(0,un.tQ)().openWidget,f=(0,tr.ef)();return((0,o.useEffect)(function(){r&&(uf(),d())},[]),l||u)?null:(0,i.jsx)(i.Fragment,{children:(0,F.createPortal)((0,i.jsx)(A.S,{renderFunc:p2,children:f?(0,i.jsx)(p5,{}):(0,i.jsx)(p1,{})}),document.body)})},p8=function(e){var t=e.notice,r=e.alert,n=e.shouldDisplayHeader,o=e.shouldDisplayCommunitySwitcher,a=e.hasMinimalLayout,s=e.showWidgetBot,l=e.supportWidgetV2Enabled,c=window.location.pathname!==(0,ex.hD)();return(0,N.ss)(),(0,i.jsxs)("div",{className:"flex w-full",children:[o&&(0,i.jsx)(A.S,{children:(0,i.jsx)(ue,{})}),(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)(z.I,{notice:t,alert:r}),(0,i.jsx)(B,{}),n&&!a&&c&&(0,i.jsx)(ut.G,{}),(0,i.jsx)(c9,{}),l?(0,i.jsx)(p9,{showWidgetBot:s}):(0,i.jsx)(e_,{showWidgetBot:s}),(0,i.jsx)(I.J,{}),(0,i.jsx)(ur.V,{})]})]})},be=r(705117),bt=function(e){return(0,i.jsxs)("div",{className:"flex h-screen w-full flex-col",children:[(0,i.jsx)(be.h,{}),(0,i.jsx)("div",{className:"flex flex-1 overflow-hidden",children:(0,i.jsx)(p8,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})]})};function br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}(0,h.bO)();var bn=(0,s.P)(function(e){var t=e.notice,r=e.alert,n=e.display_community_switcher,a=void 0!==n&&n,s=e.display_header,c=void 0===s||s,u=e.minimal_layout,f=void 0!==u&&u,m=e.show_widget_bot,p=void 0!==m&&m,h=e.support_widget_v2_enabled,v=void 0!==h&&h,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["notice","alert","display_community_switcher","display_header","minimal_layout","show_widget_bot","support_widget_v2_enabled"]),_=(0,l.L)(),x=_.isElectron,j=_.electronVersion,w=x&&(0,l.Z)(String(j),"0.1.2");(0,o.useEffect)(function(){(0,N.M2)(),d(),b()},[]);var O=br({notice:t,alert:r,display_community_switcher:a,display_header:c,minimal_layout:f,show_widget_bot:p,support_widget_v2_enabled:v},g);return(0,i.jsxs)(y.e$,{backendProps:O,children:[(0,i.jsx)(P.h,{}),(0,i.jsx)("div",{id:C.BW,className:"bg-secondary","data-testid":"main-app-provider",children:(0,i.jsx)(k,{children:(0,i.jsx)(w?bt:p8,br({},{notice:t,alert:r,shouldDisplayHeader:c,shouldDisplayCommunitySwitcher:a,hasMinimalLayout:f,showWidgetBot:p,supportWidgetV2Enabled:v}))})})]})},a.D)},587792:function(e,t,r){"use strict";r.d(t,{$:()=>s});var n=r(275271),i=r(650636),o=r(441342),a=r(399761),s=function(e){var t=(0,o.wh)(),r=t.masqueradingEntity,s=t.currentCommunity,l=t.currentCommunityMember,c=t.isLoading,u=(0,a.U)().pageViewId,d=e.postId,f=e.spaceId,m=e.isDisabled,p=null==s?void 0:s.id,b=null==l?void 0:l.id;(0,n.useEffect)(function(){d&&f&&!m&&p&&(r||c||i.n.trackPostView({community_id:p,community_member_id:b,post_id:d,space_id:f,page_view_id:null!=u?u:"unknown"}))},[d,f,p,b,r,c,u,m])}},351062:function(e,t,r){"use strict";r.d(t,{Vm:()=>d,jQ:()=>u,rS:()=>l});var n=r(342950),i=r.n(n),o=r(42693);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l="hometabs",c="branded_apps_builder_ui.home_tabs",u=function(e){var t=e.homeTabMeta,r=e.homeTabsMetaFromAllSegments;return{id:(0,o.Z)(),type:"root",meta:s({name:i()(t.custom_name||t.kind),type:l,nameI18n:"builder_ui.prop_type.children",version:1},t),props:{children:{prop:"children",type:"children",value:[{id:(0,o.Z)(),type:"hometabs",meta:{name:"Home Tabs",nameI18n:c,version:1},props:{allPagesMeta:{prop:"other",type:"home-tabs-meta-array",value:r,meta:{name:"NavOrder",nameI18n:c}},currentPageMeta:{prop:"other",type:"home-tabs-meta",value:r[0],meta:{name:"CurrentPageMeta",nameI18n:c}}}}]}}}},d=function(e){var t,r=e.meta,n=e.blocks,i=e.allPagesMeta;return{id:(0,o.Z)(),type:"root",meta:s({id:(0,o.Z)(),type:l,nameI18n:"builder_ui.prop_type.children",version:1,name:"New Page"},r),props:{children:{prop:"children",type:"children",value:[{id:(0,o.Z)(),type:"hometabs",meta:{name:"Home Tabs",nameI18n:c,version:1},props:{allPagesMeta:{prop:"other",type:"home-tabs-meta-array",value:void 0===i?[]:i,meta:{name:"NavOrder",nameI18n:c}},currentPageMeta:{prop:"other",type:"home-tabs-meta",value:r,meta:{name:"CurrentPageMeta",nameI18n:c}}}}].concat(function(e){if(Array.isArray(e))return a(e)}(t=Array.isArray(n)?n:[n])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}}}},869576:function(e,t,r){"use strict";r.d(t,{d:()=>n});var n={id:(0,r(42693).Z)(),type:"onboarding",props:{headline:{prop:"other",type:"string",value:"Join in the fun!"},subtitle:{prop:"other",type:"string",value:"Welcome users with your key message."},buttonText:{prop:"other",type:"string",value:"Next"},image:{prop:"other",type:"circle-image-upload",value:{signed_id:""}}}}},214263:function(e,t,r){"use strict";r.d(t,{jC:()=>f,g0:()=>d,mc:()=>m});var n=r(42693),i=r(869576);let o=r.p+"static/react/components/BrandedAppsBuilderUI/components/Blocks/Onboarding/OnboardingBlock/images/Onboarding1-4da69316b265c0e3.png",a=r.p+"static/react/components/BrandedAppsBuilderUI/components/Blocks/Onboarding/OnboardingBlock/images/Onboarding2-ee75e827a96ea2d2.png",s=r.p+"static/react/components/BrandedAppsBuilderUI/components/Blocks/Onboarding/OnboardingBlock/images/Onboarding3-a972295f9884ddee.png";function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e,t,r,o,a,s){return{id:(0,n.Z)(),type:"root",meta:{name:e,nameI18n:e.toLowerCase(),type:"onboarding",order:t},props:{children:{prop:"children",type:"children",value:[c(l({},i.d),{id:(0,n.Z)(),props:c(l({},i.d.props),{headline:{prop:"other",type:"string",value:r},subtitle:{prop:"other",type:"string",value:o},buttonText:{prop:"other",type:"string",value:a},image:{prop:"other",type:"circle-image-upload",value:{signed_id:"",placeholder:s}}})})]}}}},d=u("Screen 1",0,"Join in the fun!","Welcome users with your key message.","Next",o),f=u("Screen 2",1,"Level up with one of our courses","Showcase available courses, regular events, or value of membership.","Next",a),m=u("Screen 3",2,"Learn anywhere","Engage with our powerful community, learning alongside people like you","Let's go!",s)},489860:function(e,t,r){"use strict";r.d(t,{C:()=>u});var n=r(131906),i=r(739792),o=r(93199),a=r(547144),s=r(60878);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c="design-config",u=function(){var e=(0,s.pm)(),t=(0,n.useQueryClient)(),r=(0,n.useQuery)({queryKey:[c],queryFn:function(){return(0,o.UT)(a.av.brandedAppsBuilderUI.designConfig.get())}}),u=r.data,d=r.isLoading,f=(0,n.useMutation)({mutationFn:function(e){return(0,o.aU)(a.av.brandedAppsBuilderUI.designConfig.put(),e)},onSuccess:function(r){t.setQueryData([c],r),e.success((0,i.t)("branded_apps_builder_ui.design.save.success"))},onError:function(t){e.error((0,i.t)("branded_apps_builder_ui.design.save.error")),console.error(t)}}).mutateAsync,m=function(e){var t,r,n,i,o,a,s,l,c,u,d,f,m,p,b,h;return{brand_color_light_mode:null==e||null==(r=e.cssVariables)||null==(t=r.light)?void 0:t.brand,brand_color_dark_mode:null==e||null==(i=e.cssVariables)||null==(n=i.dark)?void 0:n.brand,button_text_color_light:null==e||null==(a=e.cssVariables)||null==(o=a.light)?void 0:o["button-text-color"],button_text_color_dark:null==e||null==(l=e.cssVariables)||null==(s=l.dark)?void 0:s["button-text-color"],community_icon_light:null==e||null==(u=e.cssVariables)||null==(c=u.light)?void 0:c["community-icon-signed-id"],community_logo_light:null==e||null==(f=e.cssVariables)||null==(d=f.light)?void 0:d["community-logo-signed-id"],community_icon_dark:null==e||null==(p=e.cssVariables)||null==(m=p.dark)?void 0:m["community-icon-signed-id"],community_logo_dark:null==e||null==(h=e.cssVariables)||null==(b=h.dark)?void 0:b["community-logo-signed-id"]}};return{designConfigData:u,mutateDesignConfig:f,isLoading:d,saveDesignConfig:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){return[2,f({branded_mobile_app:m(e)})]})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},534431:function(e,t,r){"use strict";r.d(t,{m:()=>P});var n,i=r(275271),o=r(182691),a=r.n(o),s=r(131906),l=r(42693),c=r(739792),u=r(348641),d=r(22424),f=function(){var e=(0,s.useQuery)({queryKey:[d.R],queryFn:u.D.show,enabled:!1}),t=e.isLoading,r=e.data,n=e.refetch,i=(null==r?void 0:r.community_setting)||{mobile_home_segments:[]},o=i.mobile_home_segments;return{defaultValues:{community_setting:function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(i,["mobile_home_segments"])},mobileHomeSegments:o,isLoading:t,fetchSettings:n}},m=r(93199),p=r(547144),b=r(60878),h=r(351062),y=r(214263),v=r(400775);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_(e,t,r[t])})}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O="branded-apps-pages",S=(_(n={},y.g0.id,y.g0),_(n,y.jC.id,y.jC),n),k=function(e){return Object.entries(e).reduce(function(e,t){var r=w(t,2),n=r[0],i=r[1],o=i.content,a=i.inline_attachments;return j(x({},e),_({},n,j(x({},o),{inline_attachments:a})))},{})},N=function(e){if(!(null==e?void 0:e.length))return{};var t=0,r=0;return e.map(function(e){var n,i=0;return e.available?(i=t,t++):(i=r,r++),n=i,{id:(0,l.Z)(),isInNav:e.available,custom_name:e.custom_name,kind:e.kind,isDefaultPage:!0,order:n,access_groups:[]}}).reduce(function(e,t,r,n){var i=(0,h.jQ)({homeTabMeta:t,homeTabsMetaFromAllSegments:n});return j(x({},e),_({},i.id,i))},{})},P=function(e){var t=e.status,r=e.enabled,n=e.isFetchEnabled,o=void 0===n||n,l=(0,b.pm)(),u=(0,s.useQueryClient)(),d=w((0,i.useState)({status:t,enabled:r,isFetchEnabled:o}),2),h=d[0],y=d[1],g=f(),_=g.mobileHomeSegments,P=g.isLoading,C=g.fetchSettings;(0,i.useEffect)(function(){y(function(e){return j(x({},e),{status:t,isFetchEnabled:o,enabled:r})})},[r,o,t]);var A=(0,s.useQuery)({queryKey:[O],queryFn:function(){return(0,m.UT)(p.av.brandedAppsBuilderUI.brandedAppsBuilderPages.get({status:h.status}))},enabled:h.isFetchEnabled,onSuccess:function(e){a()(e.home_tabs_pages)&&C()}}),I=A.data,T=A.isLoading,E=A.refetch,L=(0,s.useMutation)({mutationFn:function(e){var t=e.pages,r=e.status,n=(0,v.e)({pages:t,type:"hometabs"}),i=(0,v.e)({pages:t,type:"onboarding"});return delete i.inline_attachments,delete n.inline_attachments,(0,m.Cu)(p.av.brandedAppsBuilderUI.brandedAppsBuilderPages.upsert(),{home_tabs_pages:n,onboarding_pages:i,version:1,status:r})},onSuccess:function(e){u.setQueryData([O],e),l.success((0,c.t)("branded_apps_builder_ui.save.success"))},onError:function(e){l.error((0,c.t)("branded_apps_builder_ui.save.error")),console.error(e)}}).mutateAsync,D=(0,i.useMemo)(function(){return I?{status:I.status}:{}},[I]);return{onboardingPages:(0,i.useMemo)(function(){return!I||a()(I.onboarding_pages)?S:k(I.onboarding_pages)},[I]),homeTabsPages:(0,i.useMemo)(function(){return I?a()(I.home_tabs_pages)?(null==_?void 0:_.length)>0?N(_):{}:k(I.home_tabs_pages):{}},[I,_]),savePages:L,isAdminPreviewEnabled:(0,i.useMemo)(function(){return!!(null==I?void 0:I.admin_preview_enabled)},[null==I?void 0:I.admin_preview_enabled]),changeAdminPreviewEnabled:(0,s.useMutation)({mutationFn:function(e){return(0,m.Cu)(p.av.brandedAppsBuilderUI.brandedAppsBuilderPages.upsert(),{admin_preview_enabled:!!e})},onSuccess:function(e){u.setQueryData([O,h],function(t){return t?j(x({},t),{admin_preview_enabled:e.admin_preview_enabled,enabled:e.enabled}):e}),l.success((0,c.t)("branded_apps_builder_ui.save.success"))},onError:function(e){l.error((0,c.t)("branded_apps_builder_ui.save.error")),console.error(e)}}).mutateAsync,refetchPagesData:function(e){var t=e.status;y(function(e){return j(x({},e),{status:t})}),E()},pagesMeta:D,isLoading:T||P}}},400775:function(e,t,r){"use strict";r.d(t,{e:()=>l});var n=r(712557),i=r.n(n),o=r(984715),a=r.n(o);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t=e.pages,r=e.type,n=i()(t,function(e){var t;return(null==(t=e.meta)?void 0:t.type)===r});return Object.fromEntries(a()(Object.entries(n),function(e){var t,r;return null!=(r=null==(t=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].meta)?void 0:t.order)?r:Number.MAX_SAFE_INTEGER}))}},201339:function(e,t,r){"use strict";r.d(t,{H:()=>em});var n=r(552676),i=r(275271),o=r(25593),a=r(263271),s=r(251630),l=r(403697),c=r(441342),u=r(701168),d=r(932699),f=r(131906),m=r(93199),p=r(547144),b=r(60878);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r=e.parentMessage,n=e.threadMessageId,o=e.successCallback,a=void 0===o?d.noop:o,s=(t=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,b.pm)().error,y=(0,f.useQuery)(["THREAD_MESSAGES",null==r?void 0:r.id,null==r?void 0:r.chat_room_uuid],function(e){var t=e.previousPerPage,i=e.nextPerPage,o={previous_per_page:void 0===t?15:t,next_per_page:void 0===i?0:i,parent_message_id:r.id,id:n};return(0,m.UT)(p.av.chatRoomMessages.index({uuid:r.chat_room_uuid,params:o}))},{enabled:!!r,onSuccess:function(e){c(e.records),a()},onError:function(e){u(e.message)}}),v=y.isLoading;return{fetchThreadMessages:y.refetch,threadMessages:l,isLoading:v}},v=r(714218);function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function _(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var x=function(){var e=(0,v.d)().findAndReplaceRecord,t=function(t){e(t,["chat-threads-list"])},r=function(e,r,o){var a=o?n:i;if(e.parent_message_id){var s=r.find(function(t){return t.parent_message.id===e.parent_message_id});if(s){var l=a(s.replies,e);l&&t(_(g({},s),{replies:l}))}}else{var c=r.find(function(t){return t.parent_message.id===e.reactionable_id});if(c){var u=a([c.parent_message],e);u&&t(_(g({},c),{parent_message:u[0]}))}}},n=function(e,t){var r,n,i=t.community_member_id,o=t.emoji,a=t.reactionable_id,s=structuredClone(e),l=s.findIndex(function(e){return e.id===a});if(-1!==l){var c=s[l],u=c.reactions.findIndex(function(e){return e.emoji===o});if(!(-1!==u&&(null==(n=c.reactions[u])||null==(r=n.community_member_ids)?void 0:r.includes(i))))return -1!==u?(c.reactions[u].community_member_ids.push(i),c.reactions[u].count+=1):c.reactions.push({emoji:o,community_member_ids:[i],count:1}),s}},i=function(e,t){var r,n,i=t.community_member_id,o=t.emoji,a=t.reactionable_id,s=structuredClone(e),l=s.findIndex(function(e){return e.id===a});if(-1!==l){var c=s[l],u=c.reactions.findIndex(function(e){return e.emoji===o});if(-1!==u&&(null==(n=c.reactions[u])||null==(r=n.community_member_ids)?void 0:r.includes(i)))return 1===c.reactions[u].count?c.reactions.splice(u,1):(c.reactions[u].community_member_ids=c.reactions[u].community_member_ids.filter(function(e){return e!==i}),c.reactions[u].count-=1),s}};return{handleReactionFromWebsocket:function(e,t){"ChatRoomMessage"===e.json_message.reactionable_type&&("createReaction"===e.event?r(e.json_message,t,!0):"destroyReaction"===e.event&&r(e.json_message,t,!1))}}};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function S(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function k(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=["chat-threads-list"],P=function(){var e,t=(0,c.wh)().currentCommunityMember,r=(0,v.d)(),n=r.updateAllRecords,i=r.findAndReplaceRecord,o=x().handleReactionFromWebsocket,a=function(e){n(e,N,10)},s=function(e){i(e,N)},l=(0,f.useInfiniteQuery)(N,function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,m.UT)(p.av.chatThreads.index({params:{page:t,per_page:10}}))},{select:function(e){return{pages:e.pages,pageParams:e.pageParams}},enabled:!!(null==t||null==(e=t.policies)?void 0:e.can_access_threads_tab),getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),u=l.data,b=l.isLoading,h=l.refetch,y=l.hasNextPage,g=l.fetchNextPage,_=(null==u?void 0:u.pages.flatMap(function(e){return e.records}))||[],j=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,m.UT)(p.av.chatThreads.show({id:e}))];case 1:return a([t.sent()].concat(k(_))),[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)})})()},P=function(e){if((null==e||!e.unread_flow)&&(null==e?void 0:e.chat_room_parent_type)!=="Live::Room")if(_.every(function(t){return t.parent_message.id!==e.parent_message_id}))j(e.chat_thread_id);else{var t=_.find(function(t){return t.parent_message.id===e.parent_message_id});if(t){var r=t.parent_message,n=t.replies;s(S(O({},t),{parent_message:S(O({},r),{replies_count:r.replies_count+1}),replies:k(n).concat([e])}))}}},C=function(e){var t=_.find(function(t){return t.parent_message.id===e.id});if(t){var r=t.parent_message;s(S(O({},t),{parent_message:O({},r,e)}))}},A=function(e){if((0,d.isNull)(e.parent_message_id))C(e);else{var t=_.find(function(t){return t.parent_message.id===e.parent_message_id});if(t){var r=t.replies.map(function(t){return t.id===e.id?e:t});s(S(O({},t),{replies:r}))}}},I=function(e){var t=e||{},r=t.id,n=t.parent_message,i=n||{},o=i.id,s=i.replies_count;_.some(function(e){return e.parent_message.id===r})?a(_.filter(function(e){return e.parent_message.id!==r})):0===s?a(_.filter(function(e){return e.parent_message.id!==o})):a(_.map(function(e){if(e.parent_message.id!==o)return e;var t=e.replies.filter(function(e){return e.id!==r});return S(O({},e),{parent_message:n,replies:t})}))},T=_.length>0;return{chatThreads:_,setChatThreads:a,isLoading:b,refetchChatThreads:h,isChatThreadsAvailable:T,hasNextPage:y,fetchNextPage:g,onEventReceive:function(e){switch(e.event){case"newMessage":P(e.json_message);break;case"updatedMessage":A(e.json_message);break;case"deletedMessage":I(e)}},updateChatThreads:function(e){var t=e[0].parent_message_id;a(_.map(function(r){return r.parent_message.id===t?S(O({},r),{replies:(0,d.uniqBy)(k(e).concat(k(r.replies)),"id")}):r}))},onReactionEventReceive:function(e){o(e,_)},findAndReplaceThread:s}},C=r(764208),A=r(742992),I=r(351685),T=r(751169),E=r(840905),L=r(739792),D=r(957363),M=r(117617),R=r(381636),B=function(e){var t=e.shouldShowChatThreadsBanner,r=e.hideBanner,i=(0,M.kK)();return t?(0,n.jsx)("div",{className:"border-primary bg-primary mx-3 mt-6 rounded-lg border px-6 py-5 md:mx-6",children:(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("div",{className:"mr-3 h-10 w-12 rounded-lg bg-gray-100 md:mr-6 md:size-14",children:(0,n.jsx)("div",{className:"flex size-full items-center justify-between",children:(0,n.jsx)(D.JO,{type:i?"16-chat-threads":"20-chat-threads",size:i?16:20,className:"!w-full"})})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-start justify-between",children:[(0,n.jsx)(R.Z.LabelLg,{weight:"semibold",children:(0,L.t)("threads.banner.title")}),(0,n.jsx)("button",{type:"submit",onClick:r,children:(0,n.jsx)(D.JO,{type:"20-close-sm",size:20})})]}),!i&&(0,n.jsx)(R.Z.LabelMd,{children:(0,L.t)("threads.banner.description")})]})]})}):null},z=function(e){var t=e.isRenderedOnHeader;return(0,n.jsx)("div",{className:(0,u.A)("bg-primary flex h-full items-center justify-center",{"lg:h-[calc(100vh-64px)]":!t}),children:(0,n.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-2 md:w-[413px]",children:[(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)(D.JO,{type:"32-chat-threads",size:32})}),(0,n.jsx)(R.Z.LabelLg,{weight:"semibold",children:(0,L.t)("chat_threads_empty_page.title")}),(0,n.jsx)(R.Z.BodyMd,{textAlign:"text-center",children:(0,L.t)("chat_threads_empty_page.description")})]})})},F=r(71483),U=r(903225),Z=r(186463),G=r(807355),q=r(239295),V=r(380171),W=r(775148),H=r(626725),Q=r(315346),K=r(134560),J=r(918594),$=r(22319),X=r(280219),Y=function(e){var t=e.space,r=e.chatRoomName,i=e.parentMessage,o=e.chatRoomUrl,a=(0,$.TC)().currentAppearance,s=i.id,l=t||{},c=l.emoji,f=l.custom_emoji_url,m=l.custom_emoji_dark_url;return(0,n.jsx)(J.rU,{to:(0,p.co)({url:o,hash:"message_".concat(s),search:"message_id=".concat(s)}),children:(0,n.jsx)(R.Z.LabelSm,{as:"div",color:"text-selector-active",weight:"semibold",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(X.S,{className:"!h-5 !w-auto",emoji:c,customEmojiUrl:f,customEmojiDarkUrl:m,appearance:a}),(0,n.jsx)("span",{className:(0,u.A)("hover:text-selector-active hover:underline",{"ml-1":c||f}),children:(0,d.truncate)(r,{length:80})})]})})})},ee=function(e,t){var r="";return e.forEach(function(n,i){var o=i===e.length-1,a=i===e.length-2;if(1===t)r="".concat((0,L.t)("just")," ").concat(n.name);else if(a&&t<=3)r=r+n.name+" ".concat((0,L.t)("and")," ");else if(o&&t>3){var s=t-3;r=r+n.name+" ".concat((0,L.t)("and")," ")+s.toString()+(1===s?" ".concat((0,L.t)("other")):"".concat((0,L.t)("others")))}else o?r+=n.name:r=r+n.name+", "}),r},et=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map(function(e){return e.parent_message.chat_thread_id});return e.sort(function(e,t){return r?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})},er=function(e,t){var r=[],n=[];return e.forEach(function(e){var t=document.getElementById(String(e));t&&(t.getBoundingClientRect().top>0?n.push(e):r.push(e))}),n=et(n,t),{unreadThreadIdsAtTop:r=et(r,t,!0),unreadThreadIdsAtBottom:n}},en=function(e){var t=document.getElementById(String(e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},ei=function(e){var t=e.isEmbedded,r=e.isMessaging,n=e.lesson,i=e.slug,o=e.chatRoomUuid;return t&&!r?n?p.H4.showLesson({spaceSlug:i,sectionId:n.courses_section_id,lessonId:n.id}):(0,p.kr)({spaceSlug:i}):(0,p.so)({uuid:o})},eo=function(e){var t=e.isRenderedOnHeader,r=e.children;return t?(0,n.jsx)("div",{className:"border-primary bg-primary rounded-lg border shadow-sm","data-testid":"thread-item",children:r}):r},ea=r(491735);function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var el=function(e){var t=e.chatRoomData,r=e.newBadgeIds,o=e.handleWhenThreadInViewPort,a=e.thread,s=e.space,l=e.setSelectedReply,f=e.isRenderedOnHeader,m=e.isViewOnlyMasquerading,b=(0,U.k6)(),h=(0,c.wh)().currentCommunitySettings,y=(0,Z.wO)().onClose,v=(0,q.q)().isMessaging,g=t.roomName,_=t.uuid,x=t.embedded_space,j=t.lesson,w=(s||{}).slug,O=a.parent_message,S=a.replies,k=a.current_participant,N=O.chat_room_uuid,P=O.thread_participants_preview,C=O.total_thread_participants_count,A=O.replies_count,I=O.chat_thread_id,T=O.embedded,E=O.id,D=ei({isEmbedded:T,isMessaging:v,lesson:j,slug:w,chatRoomUuid:N}),M=j?j.name:ee(P,C),B=A-S.length,z=r.has(I),J=(0,i.useMemo)(function(){return(0,Q.nR)([O].concat(function(e){if(Array.isArray(e))return es(e)}(S)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(S)||function(e,t){if(e){if("string"==typeof e)return es(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,t)}}(S)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[])},[O,S]),$=k.is_flagged&&(null==h?void 0:h.live_pulse_block_flagged_member_messages_enabled),X=(0,G.g)({uuid:_,ids:J,enabled:J.length>0,shouldUpdateCache:!1}),et=X.isLoading,er=X.participants;return et?null:(0,n.jsx)(i.Fragment,{children:(0,n.jsxs)(eo,{isRenderedOnHeader:f,children:[(0,n.jsxs)("div",{className:(0,u.A)({"flex w-full flex-row items-start justify-between":f,"mt-7 flex w-full flex-row justify-between first:mt-0":!f}),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:(0,u.A)({"mt-7 flex w-full flex-row justify-between first:mt-0":!f,"flex flex-row items-center justify-between px-5 pt-5":f}),children:[(0,n.jsx)(Y,{space:s,chatRoomName:g,parentMessage:O,chatRoomUrl:D}),z&&(0,n.jsx)("div",{className:"bg-v2-danger flex h-4 items-center rounded px-1",children:(0,n.jsx)(R.Z.LabelXxs,{color:"text-white",children:(0,L.t)("threads.new")})})]}),(0,n.jsx)("div",{className:(0,u.A)({"mb-2":!f,"px-5":f}),children:(0,n.jsx)(R.Z.LabelXs,{color:"text-light",children:(0,d.truncate)(M,{length:60})})})]}),f&&(0,n.jsx)("div",{className:"pr-5 pt-5",children:(0,n.jsx)(V.T,{interactive:!1,content:(0,L.t)("header_v3.reply_to_thread"),children:(0,n.jsx)(W.h,{iconClassName:"text-default",className:"hover:!bg-tertiary focus-visible:!bg-tertiary",name:"20-reply-to-thread",ariaLabel:(0,L.t)("header_v3.reply_to_thread"),onClick:function(){null==y||y(),b.push((0,p.co)({url:D,hash:"message_".concat(E),search:"message_id=".concat(E)}))}})})})]}),(0,n.jsxs)("div",{className:(0,u.A)({"border-primary bg-primary rounded-lg border":!f}),children:[(0,n.jsxs)("div",{className:(0,u.A)({"py-1 first:rounded-t-lg":!f,"mt-2":f}),children:[(0,n.jsx)(H.q,{message:O,chatRoom:t,currentParticipant:k,participants:er,isParentMessage:!0,chatThreadsEnabled:!0,isRenderedOnHeader:f,chatRoomUrl:D,isViewOnlyMasquerading:m}),B>0&&(0,n.jsx)("button",{type:"submit",className:"ml-5 hover:underline",onClick:function(){return l({parentMessage:O,threadMessageId:S[0].id})},children:(0,n.jsx)(R.Z.LabelXs,{color:"text-selector-active",weight:"medium",children:B>1?(0,L.t)("threads.show_more_replies",{repliesCount:B}):(0,L.t)("threads.show_one_more_reply")})})]}),S.map(function(e){return(0,n.jsx)("div",{className:"border-primary py-1 first:rounded-t-lg last:rounded-b-lg",children:(0,n.jsx)(H.q,{message:e,chatRoom:t,currentParticipant:k,participants:er,chatThreadsEnabled:!0,isRenderedOnHeader:f,chatRoomUrl:D,isViewOnlyMasquerading:m})},e.id)}),(0,n.jsx)(F.df,{as:"div",onChange:function(e){return o(e,a)},children:(0,n.jsx)("div",{id:I,className:"invisible"})}),$?(0,n.jsx)(ea.R,{className:"mt-2",children:(0,L.t)("community_member.flagged_user_messaging_disabled")}):(0,n.jsx)(K.F,{chatRoomData:t,parentMessageId:O.id,spaceId:null==x?void 0:x.id,userList:[],participants:er,messageBoxId:"threadsMessageTextBox"+String(O.id)})]})]})},O.id)},ec=r(696969),eu=function(e){var t=e.unreadChatThreadIds,r=e.isTopButton,i=void 0!==r&&r,o=(0,ec.k)().shouldShowTrialBanner,a=t.length;return 0===a?null:(0,n.jsx)("div",{className:(0,u.A)("sticky left-0 z-10 flex w-full items-center justify-center",{"top-20":i&&o,"top-[74px]":i&&!o,"bottom-6":!i}),children:(0,n.jsx)("button",{type:"submit",className:"bg-circle rounded-2xl px-2.5 py-1 text-xs font-semibold leading-5 text-white hover:opacity-90",onClick:function(){return en(t[0])},children:1===a?(0,L.t)(i?"unread_thread_at_top":"unread_thread"):(0,L.t)(i?"unread_threads_at_top":"unread_threads",{unread_count:a})})})};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var em=function(e){var t=e.isRenderedOnHeader,r=void 0!==t&&t,d=(0,c.wh)(),f=d.isViewOnlyMasquerading,m=d.currentCommunityMember,p=ef((0,I.R)(l.i,!0),2),b=p[0],h=p[1],v=ef((0,i.useState)({parentMessage:null,threadMessageId:null}),2),g=v[0],_=v[1],x=(0,C.r)(),j=x.unreadChatThreadIds,w=x.newBadgeIds,O=x.resetNewBadgeIds,S=P(),k=S.chatThreads,N=void 0===k?[]:k,L=S.isLoading,D=S.hasNextPage,M=S.fetchNextPage,R=S.isChatThreadsAvailable,F=S.onEventReceive,U=S.updateChatThreads,Z=S.onReactionEventReceive,G=y({parentMessage:g.parentMessage,threadMessageId:g.threadMessageId,successCallback:function(){_({parentMessage:null,threadMessageId:null})}}).threadMessages,q=void 0===G?[]:G,V=(0,c.nT)(),W=V.records,H=V.isLoading;(0,i.useEffect)(function(){q.length>0&&U(q)},[q]),(0,a.s)({channel:"Chats::CommunityMemberThreadsChannel",onMessageReceive:function(e){"newMessage"===e.event&&Q(e.json_message),F(e)},community_member_id:null==m?void 0:m.id,canCreateConnection:!!(null==m?void 0:m.id)},[]),(0,a.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){("createReaction"===e.event||"destroyReaction"===e.event)&&Z(e)},community_member_id:null==m?void 0:m.id,canCreateConnection:!!(null==m?void 0:m.id)},[null==m?void 0:m.id]);var Q=function(e){var t=e.chat_thread_id;if(t){var r=document.getElementById(String(t));r&&(0,A.z)(r)&&!e.unread_flow&&(0,s.ex)(t)}},K=function(e,t){if(e){var r=t.parent_message;j.includes(r.chat_thread_id)&&(0,s.ex)(r.chat_thread_id)}};if((0,i.useEffect)(function(){return function(){O()}},[]),(L||H)&&!R)return(0,n.jsx)(E.gi,{variant:r?"chat-threads-list-header":"chat-threads-list-page"});if(!R)return(0,n.jsx)(z,{isRenderedOnHeader:r});var J=er(j,N),$=J.unreadThreadIdsAtTop,X=J.unreadThreadIdsAtBottom;return(0,n.jsxs)("div",{className:"w-full",id:"threads-scroll-view",children:[(0,n.jsx)(eu,{unreadChatThreadIds:$,isTopButton:!0}),(0,n.jsx)(B,{shouldShowChatThreadsBanner:!!b&&!r,hideBanner:function(){return h(!1)}}),(0,n.jsx)(o.Z,{style:{overflow:"auto"},scrollThreshold:.8,next:M,hasMore:!!D,dataLength:N.length,className:(0,u.A)({"mb-14 px-3 py-6 md:px-6 lg:mb-0":!r,"mb-4 flex flex-col gap-y-2":r}),scrollableTarget:r?"chat-threads-header":"panel",loader:(0,n.jsx)(T.a,{center:!0}),children:N.map(function(e){var t=e.parent_message,i=e.current_participant,o=e.chat_room,a=o.embedded_space_id,s=o.name,l=o.kind,c=o.lesson,u=t.chat_room_uuid,d=t.id,m=W.find(function(e){return e.id===a}),p=m?m.name:s;return(0,n.jsx)(el,{chatRoomData:{uuid:u,current_participant:i,chat_room_kind:l,embedded_space:m,roomName:p,lesson:c},newBadgeIds:w,handleWhenThreadInViewPort:K,thread:e,space:m,setSelectedReply:_,isRenderedOnHeader:r,isViewOnlyMasquerading:f},d)})}),(0,n.jsx)(eu,{unreadChatThreadIds:X})]})}},735573:function(e,t,r){"use strict";r.d(t,{S:()=>tt});var n=r(552676),i=r(366187),o=r(840905),a=r(275271),s=r(739792),l="account_created",c="personalize_profile",u="customize_branding",d="create_spaces",f="confirm_access",m="create_access_group",p="setup_payments",b="add_members",h="create_invite_link",y="import_email_list",v="send_launch_announcement",g="public",_="community_onboarding.new_checklist.setup_checklist",x=[{key:"complete_profile",title:(0,s.t)("".concat(_,".sections.complete_profile.title")),steps:[l,c]},{key:"design_community",title:(0,s.t)("".concat(_,".sections.design_community.title")),steps:[u,d]},{key:"setup_access",title:(0,s.t)("".concat(_,".sections.setup_access.title")),steps:[f,m,p]},{key:"launch_community",title:(0,s.t)("".concat(_,".sections.launch_community.title")),steps:[b,h,y,v]}],j=function(e,t){if(!e||!t)return new Set;var r=x.find(function(e){return e.steps.includes(t)});return r?new Set([r.title]):new Set},w=r(272020);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O(e,t,r[t])})}return e}function k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var N=(0,r(798104).Ue)(function(e){return{expandedSections:{},focusedStepKey:null,checklist:null,communityAccess:g,setChecklist:function(t){e({checklist:t})},setFocusedStepKey:function(t){e({focusedStepKey:t})},setExpandedSections:function(t){e({expandedSections:t})},setCommunityAccess:function(t){e({communityAccess:t})},toggleSectionExpansion:function(t,r){e(function(e){var n=!!e.expandedSections[t],i=S({},e.expandedSections);if(n){if(null==r?void 0:r.some(function(e){return e.title===t&&e.steps.some(function(e){return e.focus})}))return k(S({},e),{expandedSections:k(S({},i),O({},t,!1)),focusedStepKey:null});i[t]=!1}else i[t]=!0;return k(S({},e),{expandedSections:i})})}}}),P=r(903225),C=r(757105),A=r(434519),I=r(957363),T=r(916823),E=r(981097),L=r(39905),D=r(381636);let M=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/PaywallInfoModal/bannerImageEnglish-6819f9c083725924.png",R=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/PaywallInfoModal/bannerImagePt-495895400a00ab04.png";var B="community_onboarding.new_checklist.paywall_info_modal",z=function(){var e=(0,T.cm)();return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6 pb-8",children:[(0,n.jsx)("img",{src:"pt"===e?R:M,alt:"",className:"mt-4 w-full rounded-lg sm:mt-0",loading:"eager"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(D.Z.BodyMd,{color:"text-default",children:(0,s.t)("".concat(B,".description_1"))}),(0,n.jsx)(D.Z.BodyMd,{color:"text-default",children:(0,s.t)("".concat(B,".description_2"))})]}),(0,n.jsxs)("div",{className:"mt-2 flex w-full flex-row justify-end gap-2",children:[(0,n.jsx)(L.z,{variant:"secondary",onClick:function(){window.open("https://help.circle.so/p/payments","_blank")},children:(0,s.t)("".concat(B,".learn_more"))}),(0,n.jsx)(L.z,{variant:"circle",onClick:function(){window.open(E.L.paywalls.index,"_blank")},children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[(0,n.jsx)("div",{children:(0,s.t)("".concat(B,".connect_stripe"))}),(0,n.jsx)(I.JO,{type:"16-arrow-top-right",size:16})]})})]})]})};function F(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var U=function(){var e=(0,C.dd)(),t=function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,e.hide()];case 1:return t.sent(),e.remove(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){F(o,n,i,a,s,"next",e)}function s(e){F(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(A.u_,{isOpen:e.visible,onClose:t,children:[(0,n.jsx)(A.u_.Overlay,{}),(0,n.jsxs)(A.u_.Content,{size:"lg",children:[(0,n.jsxs)(A.u_.Header,{children:[(0,n.jsx)(A.u_.Title,{size:"md",children:(0,s.t)("".concat("community_onboarding.new_checklist.paywall_info_modal",".title"))}),(0,n.jsx)(A.u_.HeaderActions,{children:(0,n.jsx)(A.u_.CloseButton,{onClick:t})})]}),(0,n.jsx)(A.u_.Body,{children:(0,n.jsx)(z,{})})]})]})},Z=C.gk.create(function(){return(0,n.jsx)(U,{})}),G=r(486372),q=r(852770),V=r(549882),W=r(906082),H=r(251630),Q=r(441342),K=r(824869),J=r(779869);function $(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var X=function(){var e=(0,Q.wh)().currentCommunity,t=(0,K.E)().isCommunityOnTrial,r=(0,J.w)(),n="private",i=N(),o=i.communityAccess,l=i.setCommunityAccess;(0,a.useEffect)(function(){l((null==e?void 0:e.is_private)?n:g)},[null==e?void 0:e.is_private,l,n,g]);var c=(0,a.useMemo)(function(){return t&&o===g},[t,o,g]),u=(0,a.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!c)return[3,2];return[4,r.show({planTier:W.Gb.professional,showPlanDetails:!0,source:"checklist_confirm_access",subheading:(0,s.t)("".concat("community_onboarding.new_checklist.confirm_access_section",".public.modal_subheading"))})];case 1:if(!e.sent())return[2,null];e.label=2;case 2:return[2,H.$.update({community:{is_private:o===n}})]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){$(o,n,i,a,s,"next",e)}function s(e){$(o,n,i,a,s,"throw",e)}a(void 0)})})()},[r,o,c,n]);return{communityAccess:o,handleAccessChange:function(e){l(e)},confirmAccess:u}},Y=r(326371),ee=function(){var e=(0,P.k6)(),t=V.Fy.onboarding(),r=(0,w.F)().fetchBroadcast;return{createFirstBroadcast:(0,a.useCallback)(function(){return new Promise(function(n,i){r(void 0,{onSuccess:function(r){var i=r.broadcast_id;e.push({pathname:Y.e.edit({broadcastId:i}),state:{isNewBroadcast:!0,from:t}}),n()},onError:i})})},[r,e,t])}},et=r(171374),er=function(){var e=(0,P.k6)(),t=V.Fy.onboarding(),r=(0,et.y)().show,n=(0,w.F)().fetchDefaultAccessGroup;return{openEditAccessGroupModal:(0,a.useCallback)(function(){n(void 0,{onSuccess:function(n){r({accessGroup:n,onClose:function(){return e.push(t)}})}})},[n,r,e,t])}},en=r(547144);function ei(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ea=function(){var e=(0,P.k6)(),t=(0,P.TH)(),r=V.Fy.onboarding(),n=(0,w.F)().updateChecklist,i=X().confirmAccess,o=ee().createFirstBroadcast,s=(0,a.useCallback)(function(e){return n(eo({},e,!0))},[n]),g=(0,a.useCallback)(function(e,t){return function(){var r;return(r=function(){var r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return n.sent(),s(e),[3,3];case 2:return r=n.sent(),(0,q.dD)(JSON.stringify({error:String(r)})),[3,3];case 3:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){ei(o,n,i,a,s,"next",e)}function s(e){ei(o,n,i,a,s,"throw",e)}a(void 0)})})()}},[s]),_=(0,G.G)(),x=(0,C.dd)(Z),j=er().openEditAccessGroupModal;return{stepActions:(0,a.useMemo)(function(){var n;return eo(n={},l,function(){e.push(r)}),eo(n,c,g(c,function(){e.push(en.du.profile(t))})),eo(n,u,g(u,function(){e.push(en.Lo.content.theme)})),eo(n,d,g(d,function(){_.show()})),eo(n,f,g(f,function(){i()})),eo(n,p,g(p,function(){x.show()})),eo(n,b,g(b,function(){e.push("".concat(en.Lo.members.invite,"?from=").concat(r))})),eo(n,h,g(h,function(){e.push({pathname:en.Lo.members.new_invitation_link_details,state:{from:r}})})),eo(n,m,g(m,j)),eo(n,y,g(y,function(){e.push("".concat(en.Lo.members.import_contacts,"?from=").concat(r))})),eo(n,v,g(v,o)),n},[j,e,t,g,x,_,r,i,o])}},es=r(594023),el=r(99595),ec="community_onboarding.new_checklist.confirm_access_section",eu=function(){var e=X(),t=e.communityAccess,r=e.handleAccessChange,i=[{label:(0,s.t)("".concat(ec,".public.label")),value:"public",description:(0,s.t)("".concat(ec,".public.description"))},{label:(0,s.t)("".concat(ec,".private.label")),value:"private",description:(0,s.t)("".concat(ec,".private.description"))}];return(0,n.jsx)("div",{className:"border-primary bg-tertiary mb-3 rounded-xl border p-6",children:(0,n.jsx)(es.E,{value:t,onChange:r,children:(0,n.jsx)("div",{className:"flex flex-col gap-4",children:i.map(function(e){return(0,n.jsx)(es.E.Option,{value:e.value,className:"cursor-pointer",children:function(t){var r=t.checked;return(0,n.jsx)(el.Y,{id:"access-type-".concat(e.value),name:"access-type",label:e.label,description:e.description,checked:r,value:e.value})}},e.value)})})})})},ed=function(){var e=(0,a.useMemo)(function(){var e;return f in(e={})?Object.defineProperty(e,f,{value:eu,enumerable:!0,configurable:!0,writable:!0}):e[f]=eu,e},[]);return{getStepCustomContent:function(t){return e[t]},stepCustomContent:e}},ef=function(){var e=(0,w.F)(),t=e.checklist,r=e.isChecklistLoading,n=e.errorFetchingChecklist,i=ea().stepActions,o=ed().getStepCustomContent,l=N(),c=l.expandedSections,u=l.focusedStepKey,d=null!=t?t:{},f=d.total_steps,m=d.completed_steps,p=d.progress,b=d.initial_focused_step_key,h=d.complete,y=(0,a.useMemo)(function(){if(!t)return[];var e=u||b;return x.map(function(r){var n=r.steps.map(function(n){var a,l,c,u,d,f=(a=r.key,l=i[n],c=o(n),{title:(0,s.t)("".concat(_,".sections.").concat(a,".steps.").concat(n,".title")),cta:(0,s.t)("".concat(_,".sections.").concat(a,".steps.").concat(n,".cta")),complete:t[n],focus:!1,key:n,description:(0,s.t)("".concat(_,".sections.").concat(a,".steps.").concat(n,".description")),customAction:l,customContent:c});return u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f),d=d={focus:e===f.key},Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(d)).forEach(function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(d,e))}),u}),a=!!c[r.title],l=n.every(function(e){return e.complete});return{title:r.title,steps:n,expanded:a,shouldStrikeTitle:l&&!a}})},[t,b,u,c,i,o]),v=(0,a.useMemo)(function(){return j(t,b)},[t,b]);return{checklist:t,isChecklistLoading:r,errorFetchingChecklist:n,totalSteps:f,completedSteps:m,progress:p,sectionsWithFocus:y,initialFocusedStepKey:b,initialExpandedSections:v,isComplete:h}},em=function(){var e=ef(),t=N(),r=t.setChecklist,n=t.setFocusedStepKey,i=t.setExpandedSections;return(0,a.useMemo)(function(){if(r(e.checklist||null),e.checklist){n(e.initialFocusedStepKey||null);var t={};e.initialExpandedSections.forEach(function(e){t[e]=!0}),i(t)}},[e.checklist,e.initialFocusedStepKey,e.initialExpandedSections,r,n,i]),{checklist:e.checklist,isLoading:e.isChecklistLoading,error:e.errorFetchingChecklist,sectionsWithFocus:e.sectionsWithFocus,totalSteps:e.totalSteps,completedSteps:e.completedSteps,progress:e.progress,initialFocusedStepKey:e.initialFocusedStepKey,initialExpandedSections:e.initialExpandedSections,isComplete:e.isComplete}},ep=r(918594),eb=r(66219),eh=r(117617),ey="community_onboarding.new_checklist.setup_checklist",ev="admin_dashboard.getting_started",eg=function(e){var t=e.variant,r=em(),i=r.progress,o=r.completedSteps,a=r.totalSteps,l=(0,eh.kK)();return"compact"===(void 0===t?"default":t)?(0,n.jsxs)("div",{className:"border-primary border-b px-6 py-4",children:[(0,n.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,n.jsx)(D.Z.LabelMd,{weight:"semibold",children:(0,s.t)("".concat(ev,".title"))}),(0,n.jsxs)(ep.rU,{to:V.Fy.onboarding(),className:"text-default hover:text-dark flex items-center gap-1 text-sm font-medium transition-colors",children:[(0,s.t)("".concat(ev,".tasks_completed"),{completedSteps:o,totalSteps:a}),(0,n.jsx)(I.JO,{type:"16-chevron-right",size:16})]})]}),(0,n.jsx)(eb.N,{progress:i,size:"sm"})]}):(0,n.jsxs)("div",{className:"border-primary border-b px-8 py-6",children:[(0,n.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[l?(0,n.jsx)(D.Z.LabelSm,{weight:"semibold",textTransform:"text-left",leading:"leading-5",children:(0,s.t)("".concat(ey,".indicator.setup_checklist"))}):(0,n.jsx)(D.Z.LabelMd,{weight:"semibold",children:(0,s.t)("".concat(ey,".indicator.setup_checklist"))}),l?(0,n.jsx)(D.Z.BodySm,{weight:"semibold",textTransform:"text-right",leading:"leading-5",children:(0,s.t)("".concat(ey,".indicator.tasks_completed"),{completedSteps:o,totalSteps:a})}):(0,n.jsx)(D.Z.BodyMd,{weight:"semibold",children:(0,s.t)("".concat(ey,".indicator.tasks_completed"),{completedSteps:o,totalSteps:a})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(eb.N,{progress:i,size:"sm"})})]})},e_=r(701168);let ex=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/CheckList/steps/Incomplete-00d6a2e9f07209a7.svg",ej=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/CheckList/steps/complete-d7f805b4a50bd7ee.svg";var ew="community_onboarding.new_checklist.setup_checklist",eO=function(e){var t="complete"===e.status;return(0,n.jsx)("img",{src:t?ej:ex,alt:(0,s.t)(t?"".concat(ew,".complete_icon"):"".concat(ew,".incomplete_icon")),loading:"lazy",className:"".concat(t?"size-6":"size-5")})},eS=function(e){var t=e.isVisible,r=e.children;return(0,n.jsx)("div",{className:(0,e_.A)("motion-safe:transition-[opacity,transform] motion-safe:duration-300 motion-safe:ease-[cubic-bezier(0.22,0.61,0.36,1)]",t?"translate-y-0 opacity-100":"pointer-events-none absolute -translate-y-1 opacity-0"),children:r})},ek=function(e){var t=e.step,r=e.isVisible,i=N().setFocusedStepKey;return(0,n.jsx)(eS,{isVisible:r,children:(0,n.jsxs)("button",{type:"button",className:"flex w-full items-center justify-start gap-x-4 px-4 py-5 text-left",onClick:function(){return i(t.key)},children:[(0,n.jsx)(eO,{status:"complete"}),(0,n.jsx)(D.Z.LabelSm,{weight:"medium",size:"text-sm",color:"text-default",textTransform:"line-through",children:t.title})]})})},eN=r(990809),eP=r(767900),eC=r(227851),eA="other",eI=(0,a.memo)(function(e){var t=e.reasonKeys,r=e.localeRoot,i=(0,eC.qo)({name:"reason"}),o=(0,a.useMemo)(function(){return t.map(function(e){return{value:e,label:(0,s.t)("".concat(r,".reasons.").concat(e))}})},[t,r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.l.Item,{name:"reason",label:(0,s.t)("".concat(r,".reason")),rules:{required:(0,s.t)("".concat(r,".reason_required"))},hideBorder:!0,hideDescription:!0,hideLabel:!0,children:(0,n.jsx)(eP.l.SelectNative,{options:o,name:"reason",prompt:(0,s.t)("".concat(r,".reason_prompt")),defaultValue:""})}),i===eA&&(0,n.jsx)(eP.l.Item,{name:"reason_description",label:(0,s.t)("".concat(r,".reason_description")),rules:{validate:{requiredWhenOther:function(e,t){var n,i,o;return n=e,i=t,o=r,"string"!=typeof i.reason||i.reason!==eA||!!n&&""!==n.trim()||(0,s.t)("".concat(o,".reason_description_required"))}}},hideLabel:!0,hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(eP.l.TextArea,{name:"reason_description"})})]})});eI.displayName="ReasonFormFields";var eT=function(e){var t=e.eventType,r=e.localeRoot,i=e.reasonKeys,o=e.onSubmit,s=e.triggerFormSubmitRef,l=(0,eN.C)().trackEvent,c=(0,a.useCallback)(function(e){var r={reason:e.reason,reasonDescription:e.reason_description||""};l(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({reason:r.reason},r.reason===eA&&r.reasonDescription&&{reason_description:r.reasonDescription})),o()},[o,l,t]);return(0,n.jsx)("div",{children:(0,n.jsx)(eP.l,{onSubmit:c,triggerFormSubmitRef:s,children:(0,n.jsx)(eI,{reasonKeys:i,localeRoot:r})})})},eE=["use_different_tool","missing_something","too_expensive","come_back_later","i_do_not_send_emails","other"],eL=function(e){var t=e.onSubmit,r=e.triggerFormSubmitRef;return(0,n.jsx)(eT,{eventType:"checklist.email_broadcast_survey.reason.submitted",localeRoot:"community_onboarding.new_checklist.email_broadcast_survey_modal",reasonKeys:eE,onSubmit:t,triggerFormSubmitRef:r})};function eD(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eM(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eD(o,n,i,a,s,"next",e)}function s(e){eD(o,n,i,a,s,"throw",e)}a(void 0)})}}function eR(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var eB="community_onboarding.new_checklist.email_broadcast_survey_modal",ez=function(){var e=ee().createFirstBroadcast,t=(0,w.F)().updateChecklist,r=(0,C.dd)(),i=(0,a.useRef)(null),o=(0,a.useCallback)(function(){return eM(function(){return eR(this,function(e){switch(e.label){case 0:return[4,r.hide()];case 1:return e.sent(),r.remove(),[2]}})})()},[r]),l=(0,a.useCallback)(function(){return eM(function(){return eR(this,function(e){switch(e.label){case 0:var r;return t((v in(r={})?Object.defineProperty(r,v,{value:!0,enumerable:!0,configurable:!0,writable:!0}):r[v]=!0,r)),[4,o()];case 1:return e.sent(),[2]}})})()},[t,o]),c=(0,a.useCallback)(function(){return eM(function(){return eR(this,function(e){switch(e.label){case 0:if(!i.current)return[3,2];return[4,i.current()];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[]),u=(0,a.useCallback)(function(){return eM(function(){return eR(this,function(t){switch(t.label){case 0:return[4,e()];case 1:return t.sent(),[4,o()];case 2:return t.sent(),[2]}})})()},[e,o]);return(0,n.jsxs)(A.u_,{isOpen:r.visible,onClose:o,children:[(0,n.jsx)(A.u_.Overlay,{}),(0,n.jsxs)(A.u_.Content,{size:"md",children:[(0,n.jsxs)(A.u_.Header,{children:[(0,n.jsx)(A.u_.Title,{size:"sm",children:(0,s.t)("".concat(eB,".title"))}),(0,n.jsx)(A.u_.HeaderActions,{children:(0,n.jsx)(A.u_.CloseButton,{onClick:o})})]}),(0,n.jsxs)(A.u_.Body,{children:[(0,n.jsx)(D.Z.BodyMd,{color:"text-default",children:(0,s.t)("".concat(eB,".description"))}),(0,n.jsx)(eL,{onSubmit:l,triggerFormSubmitRef:i})]}),(0,n.jsx)(A.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-2",children:[(0,n.jsx)(L.z,{onClick:u,variant:"secondary",children:(0,s.t)("".concat(eB,".footer.create_broadcast"))}),(0,n.jsx)(L.z,{onClick:c,variant:"primary",children:(0,s.t)("".concat(eB,".submit"))})]})})]})]})},eF=C.gk.create(function(){return(0,n.jsx)(ez,{})}),eU=["free_community","included_with_something","use_another_platform","setup_later","other"],eZ=function(e){var t=e.onSubmit,r=e.triggerFormSubmitRef;return(0,n.jsx)(eT,{eventType:"checklist.paywall_survey.reason.submitted",localeRoot:"community_onboarding.new_checklist.paywall_survey_modal",reasonKeys:eU,onSubmit:t,triggerFormSubmitRef:r})};function eG(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eq(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eG(o,n,i,a,s,"next",e)}function s(e){eG(o,n,i,a,s,"throw",e)}a(void 0)})}}function eV(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var eW="community_onboarding.new_checklist.paywall_survey_modal",eH=function(){var e=(0,C.dd)(),t=(0,w.F)().updateChecklist,r=(0,a.useRef)(null),i=(0,a.useCallback)(function(){return eq(function(){return eV(this,function(t){switch(t.label){case 0:return[4,e.hide()];case 1:return t.sent(),e.remove(),[2]}})})()},[e]),o=(0,a.useCallback)(function(){return eq(function(){return eV(this,function(e){switch(e.label){case 0:var r;return t((p in(r={})?Object.defineProperty(r,p,{value:!0,enumerable:!0,configurable:!0,writable:!0}):r[p]=!0,r)),[4,i()];case 1:return e.sent(),[2]}})})()},[t,i]),l=(0,a.useCallback)(function(){return eq(function(){return eV(this,function(e){switch(e.label){case 0:if(!r.current)return[3,2];return[4,r.current()];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[]);return(0,n.jsxs)(A.u_,{isOpen:e.visible,onClose:i,children:[(0,n.jsx)(A.u_.Overlay,{}),(0,n.jsxs)(A.u_.Content,{size:"md",children:[(0,n.jsxs)(A.u_.Header,{children:[(0,n.jsx)(A.u_.Title,{size:"sm",children:(0,s.t)("".concat(eW,".title"))}),(0,n.jsx)(A.u_.HeaderActions,{children:(0,n.jsx)(A.u_.CloseButton,{onClick:i})})]}),(0,n.jsxs)(A.u_.Body,{children:[(0,n.jsx)(D.Z.BodyMd,{color:"text-default",children:(0,s.t)("".concat(eW,".description"))}),(0,n.jsx)(eZ,{onSubmit:o,triggerFormSubmitRef:r})]}),(0,n.jsx)(A.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-2",children:[(0,n.jsx)(L.z,{variant:"secondary",onClick:function(){window.open(E.L.paywalls.index,"_blank")},children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[(0,n.jsx)("div",{children:(0,s.t)("".concat(eW,".footer.setup_payments"))}),(0,n.jsx)(I.JO,{type:"16-arrow-top-right",size:16})]})}),(0,n.jsx)(L.z,{onClick:l,variant:"primary",children:(0,s.t)("".concat(eW,".submit"))})]})})]})]})},eQ=C.gk.create(function(){return(0,n.jsx)(eH,{})});function eK(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eJ=function(e){var t=(0,w.F)(),r=t.isUpdatingChecklist,n=t.updateChecklist,i=(0,C.dd)(eQ),o=(0,C.dd)(eF);return{markComplete:(0,a.useCallback)(function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(e!==p)return[3,2];return[4,i.show()];case 1:case 3:return t.sent(),[3,5];case 2:if(e!==v)return[3,4];return[4,o.show()];case 4:var r;n((e in(r={})?Object.defineProperty(r,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):r[e]=!0,r)),t.label=5;case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){eK(o,n,i,a,s,"next",e)}function s(e){eK(o,n,i,a,s,"throw",e)}a(void 0)})})()},[e,i,o,n]),isLoading:r}},e$=function(e){var t=eJ(e.stepKey),r=t.markComplete,i=t.isLoading;return(0,n.jsxs)("button",{type:"button",className:"flex flex-row items-center gap-x-1",onClick:r,disabled:i,"aria-label":(0,s.t)("community_onboarding.new_checklist.setup_checklist.mark_complete"),children:[(0,n.jsx)(I.JO,{type:i?"loader":"check",size:16}),(0,n.jsx)(D.Z.LabelXs,{weight:"medium",size:"text-xs",color:"text-default",children:(0,s.t)("community_onboarding.new_checklist.setup_checklist.mark_complete")})]})};function eX(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eY=function(e){var t=e.step,r=e.isVisible,i=N().setFocusedStepKey,o=t.customContent;return(0,n.jsx)(eS,{isVisible:r,children:(0,n.jsxs)("div",{className:"flex items-start gap-x-4 rounded-xl px-4 py-5",children:[(0,n.jsx)("div",{className:"shrink-0 pt-2",children:(0,n.jsx)(eO,{status:t.complete?"complete":"incomplete"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("button",{type:"button",className:"mb-3 w-full text-left",onClick:function(){return i(t.key)},children:[(0,n.jsx)(D.Z.LabelSm,{weight:"medium",size:"text-sm",color:"text-dark",textTransform:t.complete?"line-through":"none",children:t.title}),(0,n.jsx)(D.Z.BodySm,{weight:"medium",size:"text-sm",color:"text-default",children:t.description})]}),o&&(0,n.jsx)(o,{}),(0,n.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,n.jsx)(L.z,{variant:"circle",small:!0,onClick:function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,null==(e=t.customAction)?void 0:e.call(t)];case 1:return r.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eX(o,n,i,a,s,"next",e)}function s(e){eX(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:t.cta}),!t.complete&&(0,n.jsx)(e$,{stepKey:t.key})]})]})]})})},e0=function(e){var t=e.step,r=e.isVisible,i=N().setFocusedStepKey;return(0,n.jsx)(eS,{isVisible:r,children:(0,n.jsxs)("button",{type:"button",className:"flex w-full items-center justify-start gap-x-4 px-4 py-5 text-left",onClick:function(){return i(t.key)},children:[(0,n.jsx)(eO,{status:"incomplete"}),(0,n.jsx)(D.Z.LabelSm,{weight:"medium",size:"text-sm",color:"text-dark",children:t.title})]})})},e1=function(e){var t=e.step,r=t.complete,i=t.focus;return(0,n.jsx)("div",{className:(0,e_.A)("duration-200 ease-[cubic-bezier(0.22,0.61,0.36,1)] motion-safe:transition-colors",{"bg-secondary rounded-xl":i,"bg-transparent":!i,"hover:bg-secondary/50":!r&&!i}),children:i?(0,n.jsx)(eY,{step:t,isVisible:!0}):r?(0,n.jsx)(ek,{step:t,isVisible:!0}):(0,n.jsx)(e0,{step:t,isVisible:!0})})},e2=function(e){var t,r=e.section,i=N().toggleSectionExpansion;return(0,n.jsxs)("div",{className:"border-primary border-b px-4 py-5 last:border-none",children:[(0,n.jsxs)("button",{type:"button",className:"flex w-full cursor-pointer items-center justify-between px-4",onClick:function(){var e={title:r.title,steps:r.steps||[]};i(r.title,[e])},children:[(0,n.jsx)(D.Z.TitleMd,{weight:"font-semibold",size:"text-xl",textTransform:r.shouldStrikeTitle?"line-through":"none",color:r.shouldStrikeTitle?"text-light":"",children:r.title}),(0,n.jsx)(I.JO,{type:r.expanded?"cheveron-up":"cheveron-down",size:24})]}),(0,n.jsx)("div",{className:(0,e_.A)("overflow-hidden transition-all duration-300 ease-in-out",r.expanded?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"),children:(0,n.jsx)("div",{className:"py-2",children:null==(t=r.steps)?void 0:t.map(function(e){return(0,n.jsx)(e1,{step:e},e.key)})})})]})};function e3(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var e6=function(e){var t=e.step;return(0,n.jsxs)("div",{className:"bg-secondary flex items-start gap-x-4 rounded-xl p-4",children:[(0,n.jsx)("div",{className:"shrink-0 pt-1",children:(0,n.jsx)(eO,{status:"incomplete"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(D.Z.LabelMd,{weight:"semibold",color:"text-dark",children:t.title})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(D.Z.BodySm,{color:"text-default",children:t.description})}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(L.z,{variant:"circle",small:!0,onClick:function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,null==(e=t.customAction)?void 0:e.call(t)];case 1:return r.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){e3(o,n,i,a,s,"next",e)}function s(e){e3(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:t.cta}),(0,n.jsx)(e$,{stepKey:t.key})]})]})]})},e5=function(e){var t=e.variant,r=em().sectionsWithFocus,i=(0,a.useMemo)(function(){return r.flatMap(function(e){var t;return null!=(t=e.steps)?t:[]}).find(function(e){return e.focus})},[r]);return"compact"===(void 0===t?"default":t)?i?(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(D.Z.LabelSm,{weight:"semibold",color:"text-default",children:(0,s.t)("admin_dashboard.getting_started.next_up")})}),(0,n.jsx)(e6,{step:i})]}):null:(0,n.jsx)(n.Fragment,{children:r.map(function(e){return(0,n.jsx)(e2,{section:e},e.title)})})},e4=r(29378),e7=r(22319),e9=function(e){var t,r=e.className,i=(0,Q.wh)().currentCommunity,o=(0,e7.TC)().isDarkAppearance,a=(0,e4.xz)(i,o);return a?(0,n.jsx)("img",{src:a,loading:"lazy",alt:null!=(t=null==i?void 0:i.name)?t:"",className:void 0===r?"h-14 w-14 rounded-xl":r}):null},e8="community_onboarding.new_checklist.setup_checklist.completed",te=function(){var e=(0,K.E)().isCommunityOnPaidPlan,t=(0,P.k6)(),r=e?"".concat(e8,".community"):"".concat(e8,".upgrade");return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-6 p-12",children:[(0,n.jsx)(e9,{}),(0,n.jsxs)("div",{className:"flex max-w-[500px] flex-col gap-2 text-center",children:[(0,n.jsx)(D.Z.TitleMd,{children:(0,s.t)("".concat(e8,".title"))}),(0,n.jsx)(D.Z.BodySm,{children:(0,s.t)("".concat(r,".description"))})]}),(0,n.jsx)(L.z,{variant:"circle",large:!0,onClick:function(){e?window.open("https://community.circle.so/feed","_blank"):t.push(en.Lo.plans.general)},children:(0,s.t)("".concat(r,".cta"))})]})},tt=function(e){var t=e.variant,r=em(),a=r.isLoading,s=r.isComplete;return"compact"===(void 0===t?"default":t)?s?null:a?(0,n.jsx)("div",{className:"bg-primary border-primary rounded-2xl border p-6",children:(0,n.jsx)(o.gi,{variant:"row"})}):(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-2xl border",children:[(0,n.jsx)(eg,{variant:"compact"}),(0,n.jsx)(e5,{variant:"compact"})]}):(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-2xl border",children:[(0,n.jsx)(i.N,{isComplete:s}),a?(0,n.jsx)(o.gi,{variant:"checklist"}):(0,n.jsxs)("div",{children:[(0,n.jsx)(eg,{}),s?(0,n.jsx)(te,{}):(0,n.jsx)(e5,{})]})]})}},576206:function(e,t,r){"use strict";r.d(t,{qy:()=>c,XY:()=>u});var n="chilipiper-concierge";function i(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)})}}function a(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var s="InAppButton",l=function(e){return o(function(){return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,new Promise(function(e,t){if(window.ChiliPiper)return void e();var r=document.getElementById(n);if(r){r.addEventListener("load",function(){return e()}),r.addEventListener("error",t);return}var i=document.createElement("script");i.id=n,i.src="https://circle-co.chilipiper.com/concierge-js/cjs/concierge.js",i.crossOrigin="anonymous",i.type="text/javascript",i.onload=function(){return e()},i.onerror=t,document.head.appendChild(i)})];case 1:return t.sent(),window.ChiliPiper&&window.ChiliPiper.submit("circle-co",e.router,{trigger:e.trigger,lead:e.lead}),[3,3];case 2:return console.error("Failed to load or trigger ChiliPiper:",t.sent()),[3,3];case 3:return[2]}})})()},c=function(e,t,r){return o(function(){return a(this,function(n){return[2,l({lead:{email:e,"First Name":t,"Last Name":r},router:"in-app-plus-button",trigger:s})]})})()},u=function(e,t,r){return o(function(){return a(this,function(n){return[2,l({lead:{email:e,"First Name":t,"Last Name":r},router:"in-app---plus-page",trigger:s})]})})()}},175337:function(e,t,r){"use strict";r.d(t,{t:()=>N});var n=r(552676),i=r(739792),o=r(381636),a=r(429853);let s=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/CircleAppLinks/desktop-app-24e43699bd98873a.svg",l=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/CircleAppLinks/mobile-app-1809d09a90c5f1a0.svg";var c=r(441342),u=r(29378),d=r(990809),f=r(22319),m=r(576206);let p=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/CircleAppLinks/custom-app-f1d613835a872499.svg";var b=r(691525),h=r(484530),y="authentication_app.questions.form.april_2025_questions.options",v=[(0,i.t)("".concat(y,".achieve_with_circle.build_new_community")),(0,i.t)("".concat(y,".achieve_with_circle.migrate_to_circle"))],g=[(0,i.t)("".concat(y,".customer_journey_stage.over_250k")),(0,i.t)("".concat(y,".customer_journey_stage.100_250k")),(0,i.t)("".concat(y,".customer_journey_stage.50_100k"))],_=function(){var e=(0,b.wh)().currentCommunity,t=(0,h.j)("plus_lead_experiment");if(!(null==e?void 0:e.sign_up_flow_responses)||!t)return!1;var r=e.sign_up_flow_responses,n=r.achieve_with_circle,i=r.customer_journey_stage,o=n&&v.includes(n),a=i&&g.includes(i);return!!(o&&a)};function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var w="community_onboarding.new_checklist.circle_app_links",O=function(){var e=_(),t=(0,c.wh)(),r=t.currentCommunity,n=t.currentCommunityMember,o=(0,f.TC)().isDarkAppearance,a=(0,u.xz)(r,o),s=(0,d.C)().trackEvent,l=function(){s("plus_banner.cta.clicked",{origin:n&&e?"getting_started.checklist.book_demo.button":"getting_started.checklist.link"})},b={icon:a||p,title:(0,i.t)("".concat(w,".sections.custom_app.title")),description:(0,i.t)("".concat(w,".sections.custom_app.description")),iconAlt:(0,i.t)("".concat(w,".sections.custom_app.icon_alt")),onClick:l},h=j(x({},b),{link:"https://circle.so/plus"});if(n&&e){var y=n.email,v=n.first_name,g=n.last_name;return j(x({},b),{button:{label:(0,i.t)("".concat(w,".sections.custom_app.button_label")),handleClick:function(){l(),(0,m.qy)(y,v,g)}}})}return h},S="community_onboarding.new_checklist.circle_app_links",k=function(){var e=O();return[{icon:s,title:(0,i.t)("".concat(S,".sections.desktop_app.title")),description:(0,i.t)("".concat(S,".sections.desktop_app.description")),iconAlt:(0,i.t)("".concat(S,".sections.desktop_app.icon_alt")),link:"https://circle.so/desktop-app"},{icon:l,title:(0,i.t)("".concat(S,".sections.mobile_app.title")),description:(0,i.t)("".concat(S,".sections.mobile_app.description")),iconAlt:(0,i.t)("".concat(S,".sections.mobile_app.icon_alt")),link:"https://circle.so/mobile"},e]},N=function(){var e=k();return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,i.t)("".concat("community_onboarding.new_checklist.circle_app_links",".title"))})}),(0,n.jsx)(a.u,{sections:e})]})}},509837:function(e,t,r){"use strict";r.d(t,{_:()=>v});var n=r(552676),i=r(739792),o=r(381636),a=r(429853),s=r(925986),l=r(779869),c=r(906082),u=r(824869);let d=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/Resources/ask-for-help-0b222aeb34d502cc.svg",f=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/Resources/circle-community-14b04f2cf013fb26.svg",m=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/Resources/circle-academy-9d2191078c8f33d2.svg";var p="community_onboarding.new_checklist.resources";let b=r.p+"static/react/components/CommunityOnboarding/NewChecklistComponents/Resources/knowledge-base-5e0598fff006cc67.svg";var h="community_onboarding.new_checklist.resources",y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.variant,n=(0,s.J1)().toggleWidget,o=(0,u.E)().isCommunityOnPaidPlan,a=(0,l.w)(),y=(e=function(){a.show({planTier:c.Gb.professional,showPlanDetails:!0,source:"checklist_resources_section"})},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({icon:m,title:(0,i.t)("".concat(p,".sections.circle_academy.title")),description:(0,i.t)("".concat(p,".sections.circle_academy.description")),iconAlt:(0,i.t)("".concat(p,".sections.circle_academy.icon_alt"))},o?{link:"https://circle-academy.circle.so/"}:{button:{label:(0,i.t)("".concat(p,".sections.circle_academy.button.label")),handleClick:e}})),v={icon:b,title:(0,i.t)("".concat(h,".sections.knowledge_base.title")),description:(0,i.t)("".concat(h,".sections.knowledge_base.description")),iconAlt:(0,i.t)("".concat(h,".sections.knowledge_base.icon_alt")),link:"https://help.circle.so/"},g={icon:f,title:(0,i.t)("".concat(h,".sections.circle_community.title")),description:(0,i.t)("".concat(h,".sections.circle_community.description")),iconAlt:(0,i.t)("".concat(h,".sections.circle_community.icon_alt")),link:"https://community.circle.so/"};return"admin-dashboard"===(void 0===r?"default":r)?[v,g]:[{icon:d,title:(0,i.t)("".concat(h,".sections.help.title")),description:(0,i.t)("".concat(h,".sections.help.description")),iconAlt:(0,i.t)("".concat(h,".sections.help.icon_alt")),button:{label:(0,i.t)("".concat(h,".sections.help.button.label")),handleClick:function(){n()}}},v,g,y]},v=function(e){var t=e.variant,r=y({variant:void 0===t?"default":t});return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,i.t)("".concat("community_onboarding.new_checklist.resources",".title"))})}),(0,n.jsx)(a.u,{sections:r})]})}},429853:function(e,t,r){"use strict";r.d(t,{u:()=>u});var n=r(552676),i=r(39905),o=r(381636),a=function(e){var t=e.section,r=t.icon,a=t.title,s=t.description,l=t.iconAlt,c=t.button;return(0,n.jsxs)("div",{className:"flex flex-row items-start gap-x-4 sm:items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:r,loading:"lazy",alt:l,className:"size-10"})}),(0,n.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-y-2 sm:flex-row sm:items-center sm:gap-y-0",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",size:"text-sm",leading:"leading-5",color:"text-dark",children:a}),(0,n.jsx)(o.Z.BodySm,{weight:"normal",size:"text-sm",color:"text-default",children:s})]}),(0,n.jsx)("div",{children:c&&(0,n.jsx)(i.z,{variant:"secondary",small:!0,onClick:c.handleClick,children:c.label})})]})]})},s=r(957363),l=function(e){var t=e.section,r=t.icon,i=t.title,a=t.description,l=t.iconAlt,c=t.link,u=t.onClick;return(0,n.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",onClick:u,children:(0,n.jsxs)("div",{className:"flex flex-row items-start gap-x-4 sm:items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:r,loading:"lazy",alt:l,className:"size-10"})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",size:"text-sm",color:"text-dark",leading:"leading-5",children:i}),c&&(0,n.jsx)(s.JO,{type:"arrow-top-right",size:16,className:"text-light",color:"text-light",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})]}),(0,n.jsx)(o.Z.BodySm,{weight:"normal",size:"text-sm",color:"text-default",children:a})]})]})})},c=function(e){var t=e.section;return t.link?(0,n.jsx)(l,{section:t,onClick:t.onClick}):(0,n.jsx)(a,{section:t})},u=function(e){var t=e.sections;return(0,n.jsx)("div",{className:"bg-primary border-primary flex flex-col gap-y-4 rounded-2xl border p-4",children:t.map(function(e){return(0,n.jsx)("div",{className:"[&:not(:last-child)]:border-primary [&:not(:last-child)]:border-b [&:not(:last-child)]:pb-4",children:(0,n.jsx)(c,{section:e})},e.title)})})}},384777:function(e,t,r){"use strict";r.d(t,{M:()=>l});var n=r(552676),i=r(72727),o=r(701168),a=r(59769);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(e){var t=e.isActive,r=void 0!==t&&t,l=e.href,c=void 0===l?"#":l,u=e.name,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isActive","href","name"]),f=(0,i.L)(),m=f.isElectron,p=f.electronAPI;if(m){var b=function(){null==p||p.changeCommunity({name:u,href:c})};return(0,n.jsx)("button",{type:"button","data-testid":"community-switcher-link",className:(0,o.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{"active border-secondary":r}),onClick:b,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b())},children:(0,n.jsx)(a.G,s({includeName:!1,name:u},d))})}return(0,n.jsx)("a",{"data-testid":"community-switcher-link",className:(0,o.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{"active border-secondary":r}),href:c,"aria-label":u,children:(0,n.jsx)(a.G,s({includeName:!1,name:u},d))})}},238557:function(e,t,r){"use strict";r.d(t,{H:()=>F});var n=r(552676),i=r(275271),o=r(903225),a=r(691525),s=r(547144),l=r(22319),c=r(545273),u=r(606216),d=r(844081),f=r(117383),m=r(884579),p=r(484057),b=r(598694),h=function(e,t){var r=new URL(e);return r.searchParams.set("automatic_login","true"),r.searchParams.set("token",t),r.toString()},y=r(384777),v=function(e){var t=e.community,r=e.token,a=e.index,s="/discover"===(0,o.TH)().pathname,c=(0,l.TC)().isDarkAppearance,u=t.id,d=t.is_current_community,v=t.root_url,g=t.name,_=t.brand_color,x=t.light_brand_color,j=t.dark_brand_color,w=t.community_member_id,O=t.dark_icon_url,S=t.light_icon_url,k=(0,p.f)(),N=k.newNotificationCount,P=k.fetchNewNotificationsCount,C=k.onNotificationEventReceive,A=(0,b.K)({community:t}).unreadChatCount;return(0,i.useEffect)(function(){P(u)},[]),(0,m.I)(w,C),(0,f.y1)("alt+g+".concat(a+1),function(){window.location.href=h(v,r)},{enabled:a+1<9}),(0,n.jsx)(y.M,{isActive:d&&!s,href:h(v,r),icon_attachment_url:c?O||S:S||"",includeName:!1,brand_color:_,light_brand_color:x,dark_brand_color:j,name:g,notificationCount:d?0:N+A,index:a})},g=function(){var e=(0,d.dI)().item;return(0,n.jsx)(v,{community:e,token:"",index:0})},_=r(910605),x=r(757105),j=r(497202),w=r(739792),O=r(434519),S=r(701168),k=r(59769),N=r(775148),P=r(381636),C=function(e){var t,r,i=e.community,o=e.href,a=e.isDragDisabled,s=void 0!==a&&a,c=(0,l.TC)().isDarkAppearance,u={notificationsCount:Number((0,p.f)().newNotificationCount+(0,b.K)({community:i}).unreadChatCount)}.notificationsCount;return(0,n.jsxs)("a",{href:o,className:"hover:bg-tertiary focus:bg-tertiary flex items-center justify-between gap-x-1 rounded-xl p-1 transition-colors duration-75",children:[(0,n.jsx)(N.h,{name:"16-drag-handle",ariaLabel:(0,w.t)("community_switcher_drag_handle"),disabled:s,className:(0,S.A)({"cursor-grab":!s,"cursor-grabbing opacity-50":s})}),(0,n.jsxs)("div",{className:"flex w-full items-center gap-3",children:[(0,n.jsx)("div",{className:(0,S.A)("switcher__icon !m-0 flex items-center justify-center rounded-xl border-2 border-transparent",{"active border-secondary":i.is_current_community}),children:(0,n.jsx)(k.G,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={logo_attachment_url:void 0,icon_attachment_url:c?i.dark_icon_url:i.light_icon_url,shouldShowTooltip:!1,notificationCount:u},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,n.jsx)(P.Z.LabelMd,{weight:"medium",children:i.name})]})]},i.id)},A=function(){var e=(0,d.dI)().item;return(0,n.jsx)(C,{community:e,href:""})};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(){var e,t=(0,j.dd)(),r=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],s=(0,u.U)(),l=s.communities,c=s.token,f=s.isLoadingCommunities,m=s.isReorderingCommunities,p=s.onSortCommunities;return(0,i.useEffect)(function(){f||a(l)},[l,f]),(0,n.jsxs)(O.u_,{isOpen:t.visible,onClose:t.hide,children:[(0,n.jsx)(O.u_.Overlay,{}),(0,n.jsxs)(O.u_.Content,{children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{children:(0,w.t)("my_communities")}),(0,n.jsx)(O.u_.HeaderActions,{children:(0,n.jsx)(O.u_.CloseButton,{onClick:t.hide})})]}),(0,n.jsx)(O.u_.Body,{className:"md:my-6 md:!px-6 md:!py-0",children:(0,n.jsxs)(d.cm,{items:l,lockedVerticalAxis:!0,onSort:function(e){a(e),p(e,{onError:function(){a(l)}})},shouldUseKeyboardSensor:!1,children:[(0,n.jsx)(d.cm.List,{className:"max-h-96",children:o.map(function(e,t){return(0,n.jsx)(d.cm.Item,{className:"min-h-[3rem] min-w-min",item:e,index:t,tabIndex:-1,disabled:m,children:(0,n.jsx)(C,{community:e,href:h(e.root_url,c),isDragDisabled:m},e.id)},e.id)})}),(0,n.jsx)(d.cm.DragOverlay,{zIndex:1070,children:(0,n.jsx)(A,{})})]})})]})]})},E=x.gk.create(function(){return(0,n.jsx)(T,{})}),L=function(e){var t=e.community,r=e.sortedCommunities,i=e.isReorderingCommunities,o=e.token,a=e.index;return(0,n.jsx)(d.cm.Item,{className:"min-w-min",item:t,index:a,tabIndex:-1,disabled:i||1===(void 0===r?[]:r).length,children:(0,n.jsx)(v,{community:t,token:o,index:a})},t.id)};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=function(e){try{return new URL(e,window.location.origin).origin!==window.location.origin}catch(e){return!1}},z=function(e){var t=e.isLoadingAppData,r=R((0,i.useState)(!1),2),o=r[0],a=r[1],s=(0,i.useRef)(null),l=R((0,i.useState)([]),2),c=l[0],f=l[1],m=(0,u.U)(),p=m.communities,b=m.token,h=m.isLoadingCommunities,y=m.isReorderingCommunities,v=m.onSortCommunities,j=(0,x.dd)(E),w=void 0!==t&&t||h||o,O=p.length>5,S=(0,i.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,j.show()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){M(o,n,i,a,s,"next",e)}function s(e){M(o,n,i,a,s,"throw",e)}a(void 0)})})()},[j]),k=(0,i.useCallback)(function(e){f(e),v(e,{onError:function(){f(p)}})},[v,f,p]),N=(0,i.useMemo)(function(){var e=c.findIndex(function(e){return e.is_current_community});if(e>=5)return c[e]},[c]);(0,i.useEffect)(function(){h||f(p)},[p,h]);var P=(0,i.useCallback)(function(e){if(t=e.target,null!=(r=Element)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!r[Symbol.hasInstance](t):!(t instanceof r))return;var t,r,n=e.target.closest("a");if(n){var i=n.getAttribute("href");i&&(e.ctrlKey||e.metaKey||(a(!0),B(i)||(s.current=window.setTimeout(function(){a(!1)},1e3))))}},[a]);return(0,i.useEffect)(function(){return function(){null!==s.current&&(a(!1),window.clearTimeout(s.current),s.current=null)}},[]),(0,n.jsx)(_.w,{id:"community-switcher",isLoading:w,shouldShowShowMoreButton:O,onClickSeeMyCommunities:S,onClick:P,children:(0,n.jsxs)(d.cm,{items:c,lockedVerticalAxis:!0,onSort:k,shouldUseKeyboardSensor:!1,children:[(0,n.jsxs)(d.cm.List,{children:[c.slice(0,5).map(function(e,t){return(0,n.jsx)(L,{community:e,sortedCommunities:c,isReorderingCommunities:y,token:b,index:t},e.id)}),N&&(0,n.jsx)(L,{community:N,sortedCommunities:c,isReorderingCommunities:y,token:b,index:c.length-1},N.id)]}),(0,n.jsx)(d.cm.DragOverlay,{shouldRestrictToParent:!0,children:(0,n.jsx)(g,{})})]})})},F=function(e){var t=(0,o.TH)().pathname,r=(0,c.H)(),u=r.isSettingsPage,d=r.isLivePage,f=t.startsWith("/two_fa"),m=t.startsWith(s.Lo.plans.general),p=(0,l.wC)().display_community_switcher,b=(0,a.wh)().currentCommunity,h=(null==b?void 0:b.subscription_cancelled)&&m,y=u&&!h,v=y||f||d;return((0,i.useEffect)(function(){y?document.body.classList.remove("has-community-switcher"):p&&document.body.classList.add("has-community-switcher")},[t,y,p,h]),v)?null:(0,n.jsx)(z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}},910605:function(e,t,r){"use strict";r.d(t,{w:()=>O});var n=r(552676),i=r(739792),o=r(72727),a=r(441342),s=r(701168),l=r(380171),c=r(775148),u=r(593296),d=r(918594),f=r(903225),m=r(957363),p=function(){var e="/discover"===(0,f.TH)().pathname;return(0,n.jsx)(l.T,{content:(0,n.jsx)("div",{className:"space-x-2 p-1",children:(0,i.t)("discover.tooltip")}),placement:"right",arrow:!1,offset:[0,12],interactive:!1,children:(0,n.jsx)(d.rU,{"data-testid":"community-switcher-link",className:(0,s.A)("switcher__icon hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover !m-0 flex items-center justify-center rounded-xl border-2 border-transparent transition-colors duration-150",{active:e,"border-secondary":e}),to:"/discover",children:(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"brand-icon brand-icon__initial !h-8 !w-8 !rounded-lg !outline-none",style:{color:"#FFF",backgroundColor:"#863CFF"},children:(0,n.jsx)(m.JO,{type:"20-discover",size:20})})})})})},b=r(735904),h=function(){var e=(0,b.RE)().borderColor;return(0,n.jsx)("div",{style:{backgroundColor:e},className:(0,s.A)("bg-overlay-dark h-px w-9 rounded-full")})},y=r(691525),v=r(547144),g=function(){var e=(0,y.N3)(),t=null==e?void 0:e.is_admin,r=(0,y.wh)().currentCommunity,o=window.location.href+"?pendo=0oguJmJrou1SpPPXRwwyzbd4Wlo",a=window.location.toString().includes("settings/plans"),s=(null==r?void 0:r.plan_status)==="Expired Trial",c=t&&a&&s?o:(0,v.b$)();return(0,n.jsx)(l.T,{content:(0,i.t)("create_new_community"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,n.jsx)("a",{className:"hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar flex size-8 cursor-pointer items-center justify-center rounded-lg transition-colors duration-150",href:c,"aria-label":(0,i.t)("create_new_community"),children:(0,n.jsx)(m.JO,{type:"20-plus-v3",size:20})})})},_=r(48266),x=r(800504),j=r(22319),w=function(e){var t=(0,_.W)(),r=(0,b.RE)(),n=!!(0,j.TC)().isDarkAppearance,i=(0,f.$B)({path:"/analytics",exact:!1}),o=(0,x.f)();return{presentationClasses:(0,s.A)("community__switcher",e,"min-h-screen",{"!bg-c-switcher border-primary border-r":!n&&!t,"!bg-c-switcher border-c-sidebar border-r":n&&!t}),bodyClasses:(0,s.A)("min-h-screen p-4",{"!bg-c-sidebar overflow-hidden border-r":t,"!top-24":!i&&o}),bodyStyles:r}},O=function(e){var t,r,d=e.children,f=e.isLoading,m=e.shouldShowShowMoreButton,b=e.onClickSeeMyCommunities,y=e.className,v=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","isLoading","shouldShowShowMoreButton","onClickSeeMyCommunities","className"]),_=w(),x=_.presentationClasses,j=_.bodyClasses,O=_.bodyStyles,S=(0,a.wh)(),k=S.currentCommunity,N=S.currentCommunitySettings,P=null==N||!N.discover_button_settings_toggle_enabled||!(null==k?void 0:k.circle_discover_button_hidden),C=(0,o.L)().isElectron;return void 0===f||f?(0,n.jsx)(u.r,{}):(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"data-testid":"community-switcher-presentation",className:(0,s.A)("w-18",y,x)},v),r=r={children:(0,n.jsxs)("div",{"data-testid":"community-switcher-presentation-body",className:(0,s.A)("flex flex-col items-center gap-4",j),style:O,children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[d,m&&(0,n.jsx)(l.T,{content:(0,i.t)("community_switcher_see_my_communities"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,n.jsx)(c.h,{name:"20-menu-dots-horizontal",className:"hover:!bg-c-header-hover !rounded-lg",iconClassName:"!text-c-sidebar group-hover:!text-dark !w-6 !h-6",variant:"secondary",iconSize:20,buttonSize:32,ariaLabel:(0,i.t)("community_switcher_see_my_communities"),onClick:void 0===b?function(){}:b})})]}),m&&(0,n.jsx)(h,{}),P&&(0,n.jsx)(p,{}),!C&&(0,n.jsx)(g,{})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},456833:function(e,t,r){"use strict";r.d(t,{P:()=>a});var n=r(238557),i=r(552676),o=r(22319),a=function(e){var t=e.isLoadingAppData;return(0,i.jsx)(o.e$,{backendProps:{community_theme_settings:{default_appearance:"light"}},children:(0,i.jsx)(n.H,{isLoadingAppData:void 0!==t&&t})})}},761224:function(e,t,r){"use strict";r.d(t,{O:()=>s});var n=r(552676),i=r(739792),o={zIndex:1e3},a=function(e){var t=e.isThirdParty,r=void 0!==t&&t,a=r?(0,i.t)("cookie_warning.third_party_cookies_disabled"):(0,i.t)("cookie_warning.cookies_disabled"),s=r?(0,i.t)("cookie_warning.how_enable_third_party_cookies"):(0,i.t)("cookie_warning.how_enable_cookies");return(0,n.jsx)("div",{className:"size-full",style:o,children:(0,n.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,n.jsxs)("div",{className:"alert-wrapper",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20","aria-hidden":!0,className:"alert-icon flex-no-shrink fill-current",children:(0,n.jsx)("path",{d:"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:a}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/auto",target:"_parent",children:s})})]})]})})})},s=function(){return document.cookie?null:window.location!==window.parent.location?(0,n.jsx)(a,{isThirdParty:!0}):(0,n.jsx)(a,{})}},910408:function(e,t,r){"use strict";r.d(t,{C:()=>c});var n=r(552676),i=r(739792),o=r(827742),a=r(185395),s=function(e){var t=e.data;return(0,n.jsx)("div",{children:(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})})},l="success",c=function(e){var t=e.debug_session,r=e.debug_session_logs;return(0,n.jsx)("div",{className:"custom-login-debug-sessions",children:(0,n.jsx)("div",{className:"custom-login-debug-sessions-content",children:(0,n.jsxs)(a.s,{children:[(0,n.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.experimental_feature_warning")})})}),(0,n.jsx)("br",{}),t.status===l&&(0,n.jsx)("div",{className:"alert alert-success",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.success_sso")})})}),t.status!==l&&(0,n.jsx)("div",{className:"alert alert-error",role:"alert",children:(0,n.jsx)("div",{className:"alert-wrapper",children:(0,n.jsx)("div",{children:(0,i.t)("custom_logins.debug_session_logs.fail_sso")})})}),(0,n.jsx)("br",{}),(0,n.jsx)("h3",{children:(0,i.t)("custom_logins.debug_session_logs.logs")}),(0,n.jsx)("br",{}),r.map(function(e){var t=(0,i.t)("custom_logins.debug_session_logs.".concat(e.step)),r=e.status===l?void 0:t;return(0,n.jsx)(o.U,{defaultActiveItemTitle:r,children:(0,n.jsx)(o.U.Item,{title:t,showIcon:!0,isDone:e.status===l,children:e.context.map(function(e,t){return(0,n.jsx)(s,{data:e},t)})})},e)})]})})})}},229956:function(e,t,r){"use strict";r.d(t,{u:()=>oK});var n=r(552676),i=r(392042),o=r.n(i),a=r(131906),s=r(903225),l=r(739792),c=r(441342),u=r(932699),d=r(275271),f=r(918594),m=r(240507),p=r.n(m),b=r(227851),h=r(60589),y="!h-6 !w-6 !text-dark",v="spaces.form.edit.customize.layout",g=[{label:(0,l.t)([v,"feed"]),icon:{type:"feed-thumbnail",viewBox:"0 0 75 78"},value:"posts"},{label:(0,l.t)([v,"list"]),icon:{type:"list-thumbnail",viewBox:"0 0 75 77"},value:"list"},{label:(0,l.t)([v,"card"]),icon:{type:"card-thumbnail",viewBox:"0 0 75 77"},value:"cards"}],_=[{label:(0,l.t)([v,"feed"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:y},value:"posts"},{label:(0,l.t)([v,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:y},value:"list"},{label:(0,l.t)([v,"card"]),icon:{type:"20-card-view-mobile",viewBox:"0 0 25 24",className:y},value:"cards"}],x=[{label:(0,l.t)([v,"thumbnail"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:y},value:"thumbnail"},{label:(0,l.t)([v,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:y},value:"posts"},{label:(0,l.t)([v,"calendar"]),icon:{type:"support-widget-calendar",viewBox:"0 0 24 24",className:y},value:"calendar"}],j=[{label:(0,l.t)([v,"thumbnail"]),icon:{type:"event-layout-thumbnail",viewBox:"0 0 118 84"},value:"thumbnail"},{label:(0,l.t)([v,"list"]),icon:{type:"event-layout-list",viewBox:"0 0 118 90"},value:"posts"},{label:(0,l.t)([v,"calendar"]),icon:{type:"event-layout-calendar",viewBox:"0 0 120 90"},value:"calendar"}],w=[{label:(0,l.t)([v,"feed"]),icon:{type:"20-feed",viewBox:"-2 -1 25 24",className:y},value:"feed"},{label:(0,l.t)([v,"masonry"]),icon:{type:"20-masonry",viewBox:"-2 -1 25 24",className:y},value:"masonry"},{label:(0,l.t)([v,"grid"]),icon:{type:"20-grid",viewBox:"-2 -1 25 24",className:y},value:"grid"}],O=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?j:"image"===n?w:g).filter(function(e){return!r.includes(e.value)})},S=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?x:"image"===n?w:_).filter(function(e){return!r.includes(e.value)})},k=r(530133),N=r(767900),P=function(e){var t=e.space,r=e.onChange,i=(0,b.Gc)(),o=i.watch,a=i.setValue,s=i.formState.dirtyFields,c=o("visible_tabs"),u=o("display_view"),f=o("show_right_sidebar"),m=o("hide_member_sidebar"),p="cards"===u,y=(0,h.H3)(t)&&!p,v=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){("show_right_sidebar"in s||"hide_member_sidebar"in s||"visible_tabs"in s||"display_view"in s)&&r(!0)},[s.visible_tabs,s.display_view,s.show_right_sidebar,s.hide_member_sidebar]),(0,d.useEffect)(function(){(null==c?void 0:c.includes("members"))?a("hide_member_sidebar",!0):a("hide_member_sidebar",!1)},[t]),(0,d.useEffect)(function(){y&&(m?a("visible_tabs",["posts","members"]):a("visible_tabs",["posts"]))},[m,y]);var g=(0,h.qy)(t),_=(0,h.Ds)(t),x=g?["posts"]:[],j=v||_,w=(0,n.jsx)(N.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.RadioGroup,{fullWidth:!1,labelOutside:!j,options:v?S({excludedOptions:x,postType:t.post_type}):O({excludedOptions:x,postType:t.post_type}),optionAlignment:j?"row":"center",className:"!grid !grid-cols-1 sm:!grid sm:!grid-cols-3"})});return g||_?(0,n.jsx)("div",{children:w}):(0,n.jsxs)("div",{children:[w,!p&&(0,n.jsx)(N.l.Item,{name:"show_right_sidebar",label:(0,l.t)("spaces.form.edit.customize.right_sidebar"),className:"!pb-0",inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})}),y?(0,n.jsx)(N.l.Item,{name:"hide_member_sidebar",label:(0,l.t)("spaces.form.edit.customize.show_sidebar_members_block"),className:"!pb-0",isDisabled:!f,inlineReverse:!0,hideBorder:!0,hideDescription:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{disabled:!f,variant:"small"})}):null]})};P.propTypes={onChange:p().func,space:p().object};var C=r(619803),A=r.n(C),I=function(e){var t=e.onChange,r=e.space,i=e.isEventSpaceCalendarViewEnabled,o=(0,b.Gc)().formState.dirtyFields,a=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){"display_view"in o&&t(!0)},[o.display_view]);var s=i?[]:["calendar"];return(0,n.jsx)(N.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.RadioGroup,{variant:"box",name:"display_view",fullWidth:!1,labelOutside:!a,options:a?S({excludedOptions:s,postType:r.post_type}):O({excludedOptions:s,postType:r.post_type}),optionAlignment:a?"row":"center",className:A()("!grid",i?"!grid-cols-1 !gap-x-6 sm:!grid-cols-3":"!grid-cols-2 !gap-x-7")})})},T=r(615882),E=r(434519),L=function(e){var t=e.onChange,r=e.space,i=e.spaceGroups,o=(0,E.UV)().contentPortalElement,a=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){("space_group_id"in a||"name"in a||"emoji"in a||"custom_emoji"in a||"event_auto_rsvp_enabled"in a||"chat_room_description"in a||"show_next_event"in a||"hide_from_sidebar"in a)&&t(!0)},[a.space_group_id,a.name,a.emoji,a.custom_emoji,a.chat_room_description,a.event_auto_rsvp_enabled,a.show_next_event,a.hide_from_sidebar]),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-0 md:mt-4 md:gap-4",children:[(0,n.jsx)(N.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:(0,l.t)("spaces.form.edit.name_required"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.Input,{prefix:(0,n.jsx)(N.l.EmojiPickerV3Wrapper,{record:r})})}),(0,n.jsx)(N.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:(0,l.t)("spaces.form.edit.choose_space_group"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(T.V,{variant:"form-input",spaceGroups:i,name:"space_group_id",appendTo:o})}),(0,h.Ug)(r)&&(0,n.jsx)(N.l.Item,{name:"chat_room_description",label:(0,l.t)("spaces.form.edit.customize.add_description"),placeholder:(0,l.t)("spaces.form.edit.customize.description_placeholder"),hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.TextArea,{})}),(0,n.jsxs)("div",{children:[(0,h.V5)(r)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.l.Item,{name:"event_auto_rsvp_enabled",label:(0,l.t)("spaces.form.event_auto_rsvp_enabled"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})}),(0,n.jsx)(N.l.Item,{name:"show_next_event",label:(0,l.t)("spaces.form.show_next_event"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})})]}),(0,n.jsx)(N.l.Item,{name:"hide_from_sidebar",label:(0,l.t)("spaces.form.edit.customize.hide_from_sidebar"),tooltipText:(0,l.t)("spaces.form.edit.customize.hide_from_sidebar_description"),className:"!pb-0",hideBorder:!0,hideDescription:!0,inlineReverse:!0,shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})})]})]})};L.propTypes={space:p().object.isRequired,onChange:p().object.isRequired,spaceGroups:p().array.isRequired};var D=r(88663),M=function(e){var t=e.className,r=e.children,i=e.id;return(0,n.jsx)(D.Ar.Main,{id:i,className:"!bg-primary",children:(0,n.jsx)("div",{className:A()("mx-auto max-w-[45rem] p-0 md:px-0 lg:py-8",t),children:r})})};M.propTypes={className:p().string,children:p().node,id:p().string};var R=r(403697),B=r(61641),z=function(e){var t=e.space,r=e.onChange,i=(0,D.eW)().setIsSaveButtonDisabled,o=(0,b.Gc)(),a=o.formState.dirtyFields,s=o.watch,c=o.setValue,u=s("cover_image"),f=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,d.useEffect)(function(){u?c("cover_image_visible",!0):c("cover_image_visible",!1)},[u,c]);var m=!((0,h.Ug)(t)||(0,h.EG)(t)||(0,h.qy)(t));return(0,d.useEffect)(function(){("cover_image_visible"in a||"thumbnail_image"in a)&&r(!0)},[a.cover_image_visible,a.thumbnail_image]),(0,n.jsxs)("div",{children:[m&&(0,n.jsx)(N.l.Item,{inline:!f,hideBorder:!0,label:(0,l.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,l.t)("spaces.form.edit.customize.cover_image_description_v3"),className:"gap-x-6",children:(0,n.jsx)(B.a,{name:"cover_image",aspectRatio:R.pI.COVER_V3,onProcessing:function(e){return i(!!e)}})}),!(0,h.Ug)(t)&&!(0,h.qy)(t)&&(0,n.jsx)(N.l.Item,{inline:!f,hideBorder:!0,label:(0,l.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,h.EG)(t)?(0,l.t)("spaces.form.edit.customize.course_thumbnail_image_description"):(0,l.t)("spaces.form.edit.customize.thumbnail_image_description"),className:"gap-x-6",children:(0,n.jsx)(B.a,{name:"thumbnail_image",aspectRatio:16/9,onProcessing:function(e){return i(!!e)}})})]})};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function G(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var t=e.visible_tabs,r=void 0===t?{}:t;return Object.keys(r).filter(function(e){return r[e]})},V=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z(U(Z(U({},(0,u.omit)(t,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","course_setting","require_topic_selection"])),{notification_type:"chat"===t.post_type?t.all_notifications_enabled?"all":t.mention_notifications_enabled?"mentions":t.notifications_off?"never":void 0:G("all"==t.default_notification_setting?["default_notification_setting"]:[]).concat(G("all"==t.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),G("all"==t.default_mobile_notification_setting?["default_mobile_notification_setting"]:[])),show_right_sidebar:!t.hide_right_sidebar,allow_members_to_create_posts:!t.is_post_disabled,allow_members_to_add_others:!t.prevent_members_from_adding_others,allow_post_title:!t.hide_post_settings,allow_cover_images:!t.disable_member_post_covers,show_sorting:!t.hide_sorting,show_to_logged_out_visitors:!t.is_hidden,visible_tabs:q(t),locked_page_description:null==(e=t.locked_page_description)?void 0:e.trix_html}),(0,h.EG)(t)?{course_setting_attributes:t.course_setting}:{},W(t)),{topics:t.topics_order,require_topic_selection:t.require_topic_selection})},W=function(e){var t={};return e.logged_in_space_welcome_banner&&(t={logged_in_title:e.logged_in_space_welcome_banner.title,logged_in_description:U({},e.logged_in_space_welcome_banner.description||{}),logged_in_cover:e.logged_in_space_welcome_banner.cover,logged_in_banner_enabled:e.logged_in_space_welcome_banner.banner_enabled,allow_close:e.logged_in_space_welcome_banner.allow_close,logged_in_media_is_video:e.logged_in_space_welcome_banner.is_video}),e.logged_out_space_welcome_banner&&(t=Z(U({},t),{logged_out_title:e.logged_out_space_welcome_banner.title,logged_out_description:U({},e.logged_out_space_welcome_banner.description||{}),logged_out_cover:e.logged_out_space_welcome_banner.cover,logged_out_banner_enabled:e.logged_out_space_welcome_banner.banner_enabled,logged_out_media_is_video:e.logged_out_space_welcome_banner.is_video})),t},H=function(e){var t,r,i=e.onSubmit,o=e.space,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onSubmit","space","children"]),l=(0,d.useMemo)(function(){return o&&V(o)},[o]);return(0,n.jsx)(N.l,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"edit-space-form",onSubmit:i,defaultValues:l,className:"flex h-full flex-col overflow-auto",formClassName:"flex flex-col h-full overflow-auto"},s),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};H.propTypes={onSubmit:p().func.isRequired,space:p().object,children:p().node,triggerFormSubmitRef:p().object};var Q=r(780754),K=r(437435),J=function(e){var t=e.onChange,r=e.sortable,i=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){"topics"in i&&t(!0)},[i,i.topics]),(0,n.jsx)(Q.w,{containerClassName:"bg-primary border-primary rounded-md border",sortable:void 0===r||r,creatable:!0,maxTopicsAllowed:K.t,name:"topics"})},$=r(15817),X=r(381636),Y=r(930211),ee=r(60878),et=r(411944),er=r(340174),en=r(547144),ei=r(22270),eo=r(624804),ea=r(963549),es=r(359892),el=r(152988),ec=r(479840),eu=function(e){var t=(e||{}).body;if(!t)return!0;var r=(t||{}).content;return!r||!r.some(function(e){if("paragraph"===e.type&&e.content)return!0})};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ef(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var em="customize_space.welcome_banner",ep=function(e){var t,r=e.isLoggedIn,i=e.setDirty,o=e.onChange,a=e.spaceId,s=(0,ee.pm)(),c="".concat(r?"logged_in":"logged_out","_title"),f="".concat(r?"logged_in":"logged_out","_cover"),m="".concat(r?"logged_in":"logged_out","_description"),p=(0,ei.m)().reSetWelcomeBannerPreference,h=(t=(0,eo.k)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ed(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1],g=(0,b.Gc)(),_=g.formState.dirtyFields,x=g.setValue,j=g.getValues,w=(0,b.qo)({name:"logged_in_banner_enabled"}),O=(0,b.qo)({name:"logged_out_banner_enabled"}),S=j(r?"logged_in_media_is_video":"logged_out_media_is_video"),k=(0,b.qo)({name:m}),P=(0,b.qo)({name:c}),C=(0,b.qo)({name:f}),I=r?w:O,T=r?"logged_in_banner_enabled":"logged_out_banner_enabled",E=r?"enable_for_logged_in_members":"enable_for_logged_out_members";return(0,d.useEffect)(function(){(c in _||m in _)&&o(!0)},[_[c],_[m]]),(0,d.useEffect)(function(){var e=eu(k)&&(0,u.isEmpty)(P)&&(0,u.isEmpty)(C);r?i("loggedIn",!!w&&!!e):i("loggedOut",!!O&&!!e)},[null==k?void 0:k.body,r,w,O,P,C]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ec.sI,{label:(0,l.t)([em,E]),field:T,value:I,onChange:function(){x(T,!I)},className:"mb-2 w-full text-lg font-bold",variant:"large"}),(0,n.jsxs)("div",{className:A()("mx-auto mt-4 flex h-full flex-col",{"cursor-not-allowed opacity-20":!I}),children:[(0,n.jsx)(er.y,{title:(0,l.t)([em,"cover_image"]),name:f,description:(0,l.t)([em,"cover_image_description"]),disabled:!I,removeAttachmentsPath:en.av.spaces.destroy_welcome_banner_cover({id:a}),removeAttachmentsParams:{banner_type:r?"logged_in_space_welcome_banner":"logged_out_space_welcome_banner"},isVideo:S,isSpaceWelcomeBanner:!0}),(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(N.l.Item,{name:c,hideDescription:!0,translationRoot:em,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,n.jsx)(N.l.Input,{disabled:!I})})}),(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(N.l.Item,{name:m,hideDescription:!0,translationRoot:em,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,n.jsxs)("div",{className:"border-primary active:border-darkest focus-within:border-darkest h-full max-h-[400px] overflow-y-auto rounded-lg border px-4 py-3",children:[(0,n.jsx)(es.$,{placeholder:(0,l.t)("customize_space.welcome_banner.write_a_description"),name:"".concat(m,".body"),toolbars:[{portalId:"welcome-banner-description-toolbar",component:el.o}],className:"max-h-[350px] min-h-[100px] overflow-y-auto",editorClassName:"h-full",sgidToObjectMap:(null==k?void 0:k.sgids_to_object_map)||{},disabledExtensions:["poll","ai_copilot","mention","cta"]}),(0,n.jsx)("div",{id:"welcome-banner-description-toolbar"})]})})}),r&&(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(N.l.Item,{name:"allow_close",description:(0,n.jsxs)("div",{className:"pr-8",children:[(0,l.t)([em,"allow_close_description"]),(0,n.jsx)("button",{type:"button",onClick:function(){I&&v()},className:"ml-1 cursor-pointer text-sm underline hover:opacity-80",children:(0,l.t)([em,"reset_preference_title"])})]}),translationRoot:em,variant:"default",inlineReverse:!0,hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,className:"!items-start",children:(0,n.jsx)(N.l.ToggleSwitch,{name:"allow_close",variant:"small",wrapperClass:"!mt-1"})})}),(0,n.jsx)(ea.c,{isOpen:y,onClose:v,onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,p(a)];case 1:return e.sent(),v(),s.success((0,l.t)("space_welcome_banner.preferences_update_success")),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ef(o,n,i,a,s,"next",e)}function s(e){ef(o,n,i,a,s,"throw",e)}a(void 0)})})()},confirmText:(0,l.t)("confirm"),title:(0,l.t)([em,"reset_preference_title"]),children:(0,n.jsx)("div",{className:"mb-6",children:(0,l.t)([em,"reset_preference_description"])})})]})]})},eb={logged_in:(0,l.t)("customize_space.welcome_banner.tabs.members"),logged_out:(0,l.t)("customize_space.welcome_banner.tabs.non_members")},eh=function(e){var t=e.setDirty,r=e.onChange,i=e.space,o=(0,b.qo)({name:"visibility"});return"calendar"===(0,b.qo)({name:"display_view"})?(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("customize_space.welcome_banner.info")}):"open"!==o?(0,n.jsx)("div",{className:"flex size-full flex-col items-center gap-4 md:py-4",children:(0,n.jsx)(ep,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})}):(0,n.jsx)("div",{className:"flex size-full flex-col items-center gap-4 md:py-4",children:(0,n.jsx)("section",{className:"w-full flex-1",children:(0,n.jsxs)(et.O.Group,{children:[(0,n.jsxs)(et.O.List,{children:[(0,n.jsx)(et.O,{type:"button",children:eb.logged_in}),(0,n.jsx)(et.O,{type:"button",children:eb.logged_out})]}),(0,n.jsxs)(et.O.Panels,{className:"-mx-1.5",children:[(0,n.jsx)(et.O.Panel,{className:"px-2 py-6",children:(0,n.jsx)(ep,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})}),(0,n.jsx)(et.O.Panel,{className:"px-2 py-6",children:(0,n.jsx)(ep,{isLoggedIn:!1,setDirty:t,onChange:r,spaceId:null==i?void 0:i.id})})]})]})})})},ey=function(e){var t=e.onChange,r=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){"require_topic_selection"in r&&t(!0)},[r.require_topic_selection]),(0,n.jsx)("div",{children:(0,n.jsx)(N.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.topics.require_topic_selection"),tooltipText:(0,l.t)("spaces.form.edit.topics.require_topic_selection_tooltip"),name:"require_topic_selection",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{name:"require_topic_selection",variant:"small"})})})},ev=r(589252),eg=r(706439),e_=r(957363),ex=function(e){var t=e.title,r=e.children;return(0,n.jsxs)(X.Z.BodySm,{color:"text-default",textAlign:"left",children:[(0,n.jsxs)("span",{className:"font-medium",children:[t,": "]}),r]})},ej=function(e){var t=e.accessDesc,r=e.visibilityDesc,i=e.lockScreenDesc,o=e.isAccessOpen,a=e.isVisibilityOpen;return(0,n.jsxs)("div",{className:"mt-3 grid gap-2 text-left text-sm",style:{gridTemplateColumns:"min-content auto"},children:[(0,n.jsx)(e_.JO,{type:void 0!==o&&o?"16-lock-unlocked":"16-lock",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ex,{title:(0,l.t)("customize_space.access"),children:t}),(0,n.jsx)(e_.JO,{type:void 0===a||a?"16-eye-visible":"16-eye-hidden",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ex,{title:(0,l.t)("customize_space.visibility"),children:r}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e_.JO,{type:"16-document-text",size:16,className:"text-default mt-px !self-start"}),(0,n.jsx)(ex,{title:(0,l.t)("customize_space.lock_screen_page"),children:(0,n.jsx)(ev.Z,{html:i})})]})]})},ew=r(744191),eO="spaces.form.edit.customize",eS=function(e){var t=e.onChange,r=e.onExit,i=(0,b.Gc)().formState.dirtyFields,o="private"===(0,b.qo)({name:"visibility"}),a=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled,s=(0,eg.s)(),c=(0,ew.F)({shouldFilterRestrictedPages:!0}),u=c.pages,m=c.isLoading;return(0,d.useEffect)(function(){("visibility"in i||"lockscreen_site_page_id"in i)&&(null==t||t(!0))},[i.visibility,i.lockscreen_site_page_id]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.l.Item,{name:"visibility",hideDescription:!0,rules:{required:(0,l.t)("spaces.form.create.choose_visibility"),maxLength:255},hideBorder:!0,hideLabel:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.RadioGroup,{variant:a?"box":"radio",name:"visibility",options:[{label:(0,l.t)("spaces.form.create.visibility_types.open"),value:"open",description:(0,n.jsx)(ej,{accessDesc:(0,l.t)("customize_space.access_form.open_access"),visibilityDesc:(0,l.t)("customize_space.access_form.open_visibility"),isAccessOpen:!0})},{label:(0,l.t)("spaces.form.create.visibility_types.private"),value:"private",description:(0,n.jsx)(ej,{accessDesc:(0,l.t)("customize_space.access_form.private_access"),visibilityDesc:(0,l.t)("customize_space.access_form.private_visibility"),lockScreenDesc:s?(0,l.t)("customize_space.access_form.private_lock_screen"):void 0})},{label:(0,l.t)("spaces.form.create.visibility_types.secret"),value:"secret",description:(0,n.jsx)(ej,{accessDesc:(0,l.t)("customize_space.access_form.secret_access"),visibilityDesc:(0,l.t)("customize_space.access_form.secret_visibility")})}],optionAlignment:"left"})}),o&&s&&(0,n.jsxs)(N.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,l.t)([eO,"lockscreen_site_page.label"]),name:"lockscreen_site_page_id",variant:"extra-bottom-margin",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(X.Z.BodySm,{color:"text-default",children:[(0,n.jsx)(ev.Z,{className:"mr-1 inline",html:(0,l.t)([eO,"lockscreen_site_page.description"])}),(0,n.jsx)(f.rU,{to:en.Lo.content.pages,onClick:r,className:"text-default hover:text-dark",children:(0,n.jsx)("u",{children:(0,l.t)([eO,"lockscreen_site_page.manage_all_pages"])})})]})}),!m&&(0,n.jsx)(N.l.SelectNative,{name:"lockscreen_site_page_id",options:u.map(function(e){return{label:e.name,value:e.id}}),className:"w-full rounded-lg py-3 pl-4 pr-8",isPromptDisabled:!1,prompt:(0,l.t)([eO,"lockscreen_site_page",0===u.length?"empty_prompt":"prompt"])})]}),o&&(0,n.jsx)(N.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,l.t)([eO,"show_lock_icon_to_non_members"]),tooltipText:(0,l.t)([eO,"show_lock_icon_to_non_members_description"]),name:"show_lock_icon_for_non_members",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{name:"show_lock_icon_for_non_members",variant:"small"})})]})},ek=r(432050),eN=function(){return(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(ek.b,{type:"info",title:(0,l.t)("customize_space.draft_warning.title"),description:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("customize_space.draft_warning.description")}),(0,n.jsx)(ej,{accessDesc:(0,l.t)("customize_space.draft_warning.access"),visibilityDesc:(0,l.t)("customize_space.draft_warning.visibility"),isVisibilityOpen:!1})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("customize_space.draft_warning.form_title")}),(0,n.jsxs)(X.Z.BodySm,{children:[(0,l.t)("customize_space.draft_warning.form_description"),":"]})]})]})},eP=function(e){var t=e.space,r=e.onChange,i=e.onExit,o=(0,h.EG)(t)&&(0,h.H)(t);return(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.access"),dataTestId:"customize-space-access",variant:"fullScreen",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[o&&(0,n.jsx)(eN,{}),(0,n.jsx)(eS,{onChange:r,onExit:i})]})})},eC=r(757105),eA=r(900795),eI="spaces.form.edit.change_space_group",eT=function(e){var t=e.spaceName,r=e.currentSpaceGroupName,i=e.newSpaceGroupName,o=e.onConfirm,a=(0,eC.dd)();return(0,n.jsx)(ea.c,{title:(0,l.t)([eI,"title"]),isOpen:a.visible,onClose:a.hide,onConfirm:function(){o(),a.hide()},children:(0,n.jsx)(eA.w,{content:(0,l.t)([eI,"description"],{space_name:t,current_space_group:r,new_space_group:i})})})},eE=eC.gk.create(function(e){var t=e.spaceName,r=e.currentSpaceGroupName,i=e.newSpaceGroupName,o=e.onConfirm;return(0,n.jsx)(eT,{spaceName:t,currentSpaceGroupName:r,newSpaceGroupName:i,onConfirm:o})}),eL=function(e){var t=e.isOpen,r=e.onClose,i=e.onConfirm,o=e.spaceType,a=(0,b.qo)({name:"visibility"}),s=(0,b.Gc)().resetField;return(0,n.jsxs)(ea.c,{isOpen:t,title:(0,l.t)("spaces.form.create.change_draft_confirmation.title"),onClose:r,onCancel:function(){s("visibility"),r()},onConfirm:i,confirmVariant:"primary",confirmText:(0,l.t)("spaces.form.create.change_draft_confirmation.confirm_button",{spaceType:o}),children:[(0,l.t)("spaces.form.create.change_draft_confirmation.".concat(a))," ",(0,l.t)("spaces.form.create.change_draft_confirmation.wont_be_able_to_change")]})};function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}eL.propTypes={isOpen:p().bool,onClose:p().func,onConfirm:p().func,spaceType:p().string};var eR=function(e){var t=eM((0,eo.k)(!1),2),r=t[0],n=t[1],i=eM((0,eo.k)(!1),2),a=i[0],s=i[1];return(0,d.useEffect)(function(){a&&o()(e)&&e()},[a,e]),{shouldShowDraftAccessConfirmaModal:r,toggleDraftAccessConfirmaModal:n,isDraftAccessConfirmed:a,toggleIsDraftAccessConfirmed:s}};function eB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ez(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eF(e,t,r[t])})}return e}function eZ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eG=function(e){var t,r=e.space,i=(0,d.useRef)(),a=(0,ee.pm)(),s=(t=(0,d.useState)({loggedIn:!1,loggedOut:!1}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eB(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eB(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],p=s[1],b=(0,$.mx)(),y=b.dirtyForms,v=b.setDirtyForms,g=(0,D.eW)(),_=g.onSave,x=g.onExit,j=(0,h.Ug)(r),w=(0,h.qy)(r),O=(0,c.wh)().currentCommunitySettings||{},S=O.space_description_enabled,k=O.event_space_calendar_view_enabled,N=(0,h.H3)(r)||(0,h.Ds)(r)||(0,h.V5)(r)||(0,h.EG)(r),C=eR((0,d.useCallback)(function(){var e;null==i||null==(e=i.current)||e.call(i)},[i])),A=C.shouldShowDraftAccessConfirmaModal,T=C.toggleDraftAccessConfirmaModal,E=C.isDraftAccessConfirmed,R=C.toggleIsDraftAccessConfirmed,B=function(e){v(eZ(eU({},y),{customize:eZ(eU({},y.customize),eF({},e,!0))}))},F=(0,c.e2)().records,U=function(e){var t=F.find(function(t){return t.id===e});return!(0,u.isEmpty)(null==t?void 0:t.access_groups)},Z=function(e){var t=F.find(function(t){return t.id===e});return(null==t?void 0:t.name)||""},G=(0,eC.dd)(eE),q=function(e,t){var n=e.visibility;if(m.loggedIn||m.loggedOut)return void a.error((0,l.t)("landing_page.settings.welcome_banner.errors.blank_welcome_banner"));if((0,h.H)(r)&&"draft"!==n&&!E)return void T();var i=function(){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,_({data:e})];case 1:return r.sent(),o()(t)&&t(e,{keepValues:!0}),v($.Wm),x(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){ez(o,n,i,a,s,"next",e)}function s(e){ez(o,n,i,a,s,"throw",e)}a(void 0)})})()};e.space_group_id!=r.space_group_id&&U(e.space_group_id)?G.show({spaceName:e.name,currentSpaceGroupName:Z(r.space_group_id),newSpaceGroupName:Z(e.space_group_id),onConfirm:function(){i()}}):i()},V=j||w;return(0,n.jsx)(M,{children:(0,n.jsxs)(H,{onSubmit:function(e,t){return q(e,t.reset)},space:r,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-8 md:gap-12",triggerFormSubmitRef:i,children:[(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.general"),dataTestId:"customize-space-general",variant:"fullScreen",isFirstChild:!0,children:(0,n.jsx)(L,{onChange:function(){return B("general")},space:r,spaceGroups:F})}),(0,n.jsx)(eP,{space:r,onChange:function(){return B("access")},onExit:x}),((0,h.H3)(r)||w||(0,h.Ds)(r))&&(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,n.jsx)("div",{className:"h-full",children:(0,n.jsx)(P,{space:r,onChange:function(){return B("customizeLayout")}})})}),N&&(0,n.jsxs)(Y.q,{title:(0,h.EG)(r)?(0,l.t)("customize_space.course_topics.title"):(0,l.t)("customize_space.topics.title"),dataTestId:"customize-space-topics",variant:"fullScreen",isFirstChild:!0,children:[(0,n.jsx)("div",{className:"my-1 md:mb-4",children:(0,n.jsxs)(X.Z.BodyMd,{color:"text-light",children:[(0,h.EG)(r)?(0,l.t)("customize_space.course_topics.description"):(0,l.t)("customize_space.topics.description"),(0,n.jsx)(f.OL,{onClick:x,to:"/settings/topics",className:"text-light hover:text-dark ml-0.5",children:(0,n.jsx)("u",{children:(0,h.EG)(r)?(0,l.t)("customize_space.course_topics.manage_topics"):(0,l.t)("customize_space.topics.manage_topics")})})]})}),(0,n.jsx)(J,{spaceId:r.id,onChange:function(){return B("topics")},sortable:!(0,h.EG)(r)}),!(0,h.EG)(r)&&(0,n.jsx)(ey,{onChange:function(){return B("topics")}})]}),(0,h.V5)(r)&&(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,n.jsx)("div",{className:"h-full",children:(0,n.jsx)(I,{space:r,isEventSpaceCalendarViewEnabled:!!k,onChange:function(){return B("customizeLayout")}})})}),!V&&(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.space_images"),dataTestId:"customize-space-images",variant:"fullScreen",children:(0,n.jsx)(z,{space:r,onChange:function(){return B("images")}})}),S&&(0,h.V5)(r)&&(0,n.jsx)("div",{id:"space-welcome-banner",children:(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.welcome_banner.title"),dataTestId:"customize-space-welcome-banner",variant:"fullScreen",children:(0,n.jsx)(eh,{setDirty:function(e,t){p(eZ(eU({},m),eF({},e,t)))},onChange:function(){return B("general")},space:r})})}),(0,n.jsx)(eL,{isOpen:A,onClose:T,onConfirm:function(){T(),R()},spaceType:(0,h.EG)(r)?"Course":"Space"})]})})},eq=r(251630),eV=r(766560),eW=r.n(eV),eH=r(206394),eQ=r(257462),eK=[{name:"slug",label:(0,l.t)("spaces.form.edit.options.seo.slug"),description:(0,l.t)("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return eW()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:(0,l.t)("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:(0,l.t)("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:(0,l.t)("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:(0,l.t)("spaces.form.edit.options.seo.opengraph_description")}],eJ=function(e){var t=e.onChange,r=e.setImageToDelete,i=(0,b.Gc)(),o=i.getValues,a=i.formState.dirtyFields;return(0,d.useEffect)(function(){("slug"in a||"meta_tag_attributes"in a)&&t(!0)},[a.slug,a.meta_tag_attributes]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:eK.map(function(e){var t=e.name,r=e.label,i=e.description,o=e.transformValue;return(0,n.jsx)(N.l.Item,{hideBorder:!0,hideDescription:!0,label:r,name:t,transformValue:o,tooltipText:i,variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.Input,{})},t)})}),(0,n.jsx)("div",{className:"grid grid-cols-1",children:(0,n.jsxs)("div",{className:"min-h-[255px] w-full",children:[(0,n.jsx)(N.l.Label,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.label")}),(0,n.jsx)(eH.D,{name:"meta_tag_attributes[opengraph_image]",alt:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.label"),className:"relative",showAddCoverBtn:!0,aspectRatio:R.pI.OPEN_GRAPH,changeImageText:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){t(!0),r(o("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,n.jsx)(eQ.Z,{title:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.add"),description:(0,l.t)("spaces.form.edit.options.seo.opengraph_image.description")})})]})})]})};eJ.propTypes={setImageToDelete:p().func.isRequired,onChange:p().func.isRequired};var e$=function(e){var t=e.space;return(0,h.EG)(t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.TitleSm,{weight:"bold",children:(0,l.t)("spaces.form.edit.options.course_notifications.title")}),(0,n.jsx)(N.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.course_notifications.new_comment_notification"),tooltipText:(0,l.t)("spaces.form.edit.options.course_notifications.new_comment_notification_tooltip"),name:"course_setting_attributes.new_comment_notification_enabled",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.new_comment_notification_enabled"})})]}):null},eX=function(e){var t=e.space;return(0,h.EG)(t)?(0,n.jsx)(N.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.course_options.enforce_lessons_order"),tooltipText:(0,l.t)("spaces.form.edit.options.course_options.enforce_lessons_order_tooltip"),name:"course_setting_attributes.enforce_lessons_order",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.enforce_lessons_order"})}):null},eY=r(29378);function e0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e1(e){return function(e){if(Array.isArray(e))return e0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e0(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e0(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e2=function(e){var t=e.space,r=(0,c.wh)().currentCommunity,i=[];return(0,h.V5)(t)&&(i=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,h.Ug)(t)&&(i=["chat_room_show_history"]),(0,h.Ds)(t)&&(i=["allow_members_to_add_others","allow_members_to_create_posts","hide_from_featured_areas"]),(0,h.H3)(t)&&(i=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]),(0,h.qy)(t)&&(i=["allow_members_to_add_others"]),(0,eY.v)(r)||(0,h.Ug)(t)||(0,h.EG)(t)||(i=e1(i).concat(["show_to_logged_out_visitors"])),i=e1(i).concat(["hide_members_count"]),(0,n.jsxs)("div",{className:"mt-5 flex-1 md:mt-8",children:[(0,n.jsx)(X.Z.TitleSm,{weight:"bold",children:(0,l.t)("spaces.form.edit.options.permissions.label")}),i.map(function(e){return(0,n.jsx)(N.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.permissions.".concat("allow_members_to_create_posts"==e?(0,h.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e)),name:e,className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})},e)})]})};e2.propTypes={space:p().object};var e3=function(e){var t,r,n={LATEST:{label:(0,l.t)("latest"),value:"latest"},OLDEST:{label:(0,l.t)("oldest"),value:"oldest"},POPULAR:{label:(0,l.t)("popular"),value:"popular"},LIKES:{label:(0,l.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,l.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,l.t)("alphabetical"),value:"alphabetical"}},i={name:"default_comment_sort",options:[n.LATEST,n.OLDEST]},o={name:"default_sort",options:Object.values(n)},a={name:"default_member_sort",options:[n.LATEST,n.OLDEST,n.ALPHABETICAL]};return(0,h.V5)(e)?[i]:(0,h.qy)(e)?[a]:(0,h.Ds)(e)?[i,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),r=r={options:o.options.filter(function(e){return"alphabetical"!==e.value})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)]:[i,o,a]},e6=function(e){var t=e.space,r=e3(t),i=!(0,h.qy)(t)&&!(0,h.V5)(t);return(0,n.jsxs)("div",{className:"mt-8 flex-1",children:[(0,n.jsx)(X.Z.TitleSm,{weight:"semibold",children:(0,l.t)("spaces.form.edit.options.sort.label")}),i&&(0,n.jsx)(N.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,l.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small"})}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:r.map(function(e){var t=e.name,r=e.options;return(0,n.jsx)(N.l.Item,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.sort.".concat(t,".label")),tooltipText:(0,l.t)("spaces.form.edit.options.sort.".concat(t,".description")),hideDescription:!0,name:t,variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.SelectNative,{options:r})},t)})})]})};e6.propTypes={space:p().object.isRequired};var e5=r(428865),e4=(0,d.forwardRef)(function(e,t){var r=e.isOpen,i=e.onClose,o=e.setNotificationsChanged,a=(0,b.Gc)().setValue;return(0,n.jsxs)(ea.c,{isOpen:r,title:(0,l.t)("spaces.form.create.notifications_confirm_modal.title"),onClose:i,onCancel:function(){o(!1),a("update_all_members_notifications",!1),setTimeout(function(){return t.current()})},cancelText:(0,l.t)("spaces.form.create.notifications_confirm_modal.new_members"),onConfirm:function(){o(!1),a("update_all_members_notifications",!0),setTimeout(function(){return t.current()})},confirmVariant:"primary",confirmText:(0,l.t)("spaces.form.create.notifications_confirm_modal.all_members"),shouldSubmitOnCancel:!0,children:[(0,l.t)("spaces.form.create.notifications_confirm_modal.description"),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)(N.l.Item,{hiddenField:!0,name:"update_all_members_notifications",hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,n.jsx)(N.l.Input,{type:"hidden"})})})]})});e4.displayName="NotificationsConfirmModal",e4.propTypes={isOpen:p().bool,onClose:p().func,setNotificationsChanged:p().func};var e7=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas","pinned_posts_label","default_comment_sort","notification_type","chat_room_show_history"],e9=(0,d.forwardRef)(function(e,t){var r=e.space,i=e.onChange,o=e.isOpenNotificationsConfirmModal,a=e.toggleNotificationsConfirmModal,s=e.setNotificationsChanged,c=(0,b.Gc)().formState.dirtyFields;return(0,d.useEffect)(function(){var e=Object.keys(c);e7.filter(function(t){return e.includes(t)}).length>0&&i(!0),e.includes("notification_type")&&s(!0)},[c]),(0,n.jsxs)("div",{children:[(0,n.jsx)(e5.V,{}),(0,n.jsx)(e4,{isOpen:o,onClose:a,setNotificationsChanged:s,ref:t}),(0,n.jsx)(eX,{space:r}),(0,n.jsx)(e$,{space:r}),(0,n.jsx)(e2,{space:r}),(0,h.H3)(r)&&(0,n.jsxs)("div",{className:"mt-10 flex-1",children:[(0,n.jsx)(X.Z.TitleSm,{weight:"semibold",children:(0,l.t)("spaces.form.edit.options.labels.label")}),(0,n.jsx)("div",{className:"grid grid-cols-1",children:(0,n.jsx)(N.l.Item,{hideBorder:!0,label:(0,l.t)("spaces.form.edit.options.labels.pinned_posts.label"),tooltipText:(0,l.t)("spaces.form.edit.options.labels.pinned_posts.description"),hideDescription:!0,name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,n.jsx)(N.l.Input,{placeholder:(0,l.t)("spaces.form.edit.pinned_posts")})})})]}),!(0,h.Ug)(r)&&!(0,h.EG)(r)&&(0,n.jsx)(e6,{space:r})]})});function e8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tt(e,t,r[t])})}return e}function tn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e9.displayName="SpaceOptionsForm",e9.propTypes={space:p().object,onChange:p().func,isOpenNotificationsConfirmModal:p().bool,toggleNotificationsConfirmModal:p().func,setNotificationsChanged:p().func};var to=function(e){var t=e.space,r=ti((0,d.useState)(null),2),i=r[0],a=r[1],s=(0,$.mx)(),c=s.dirtyForms,u=s.setDirtyForms,f=s.onSlugChange,m=(0,D.eW)(),p=m.onSave,b=m.onExit,h=(0,d.useRef)(),y=(0,ee.pm)(),v=ti((0,eo.k)(!1),2),g=v[0],_=v[1],x=ti((0,d.useState)(!1),2),j=x[0],w=x[1],O=function(e,r){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(j)return _(),[2,!1];n.label=1;case 1:if(n.trys.push([1,5,6,7]),!i)return[3,3];return[4,eq.UK.deleteOpenGraphImage(i)];case 2:n.sent(),a(!1),n.label=3;case 3:return[4,p({data:e,onSuccess:function(e){e.slug!==t.slug&&f(e)}})];case 4:return n.sent(),[3,7];case 5:return n.sent(),y.error(l.ZP.t("spaces.form.edit.error")),[3,7];case 6:return o()(r)&&r(e,{keepValues:!0}),u($.Wm),b(),[7];case 7:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){te(o,r,i,a,s,"next",e)}function s(e){te(o,r,i,a,s,"throw",e)}a(void 0)})})()},S=function(e){u(tn(tr({},c),{options:tn(tr({},c.options),tt({},e,!0))}))};return(0,n.jsx)(M,{children:(0,n.jsxs)(H,{onSubmit:function(e,t){return O(e,t.reset)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-4",triggerFormSubmitRef:h,children:[(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.options"),dataTestId:"customize-space-options",variant:"fullScreen",children:(0,n.jsx)(e9,{space:t,onChange:function(){return S("options")},ref:h,isOpenNotificationsConfirmModal:g,toggleNotificationsConfirmModal:_,setNotificationsChanged:w})}),(0,n.jsx)(Y.q,{title:(0,l.t)("customize_space.seo"),dataTestId:"customize-space-seo",variant:"fullScreen",children:(0,n.jsx)(eJ,{space:t,onChange:function(){return S("seo")},setImageToDelete:a})})]})})};to.propTypes={space:p().object};var ta=r(39905),ts=r(812514),tl=r(743032),tc=function(e){var t,r,i,o=e.paymentProcessorStatus,a=e.refetchPaywalls,s=(0,ts.I)(),c=(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(X.Z.TitleSm,{weight:"font-semibold",children:(0,l.t)("settings.paywalls.title")}),(0,n.jsx)(ta.z,{variant:"circle",onClick:function(){return s.show({paywall:void 0,refetchPaywalls:a})},children:(0,l.t)("settings.paywalls.buttons.new")})]}),u=(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(X.Z.TitleSm,{weight:"font-semibold",children:(0,l.t)("settings.paywalls.title")})}),d=null!=(i=(t={},r=tl.J6.ENABLED,r in t?Object.defineProperty(t,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[r]=c,t)[o])?i:u;return(0,n.jsx)("div",{className:"bg-primary m-0 mb-12 mt-4 w-full rounded p-5",children:d})},tu=r(202754),td=r(751169),tf=r(29607),tm=r(846051),tp=r(538120),tb=r(557018),th=function(e){var t=e.paywalls,r=e.refetchPaywalls,i=(0,ts.I)().show,o=function(e){i({paywall:e,refetchPaywalls:r})};return{showPaywallAdminFormModalToCreate:function(){i({paywall:void 0,refetchPaywalls:r})},dataSource:(null==t?void 0:t.map(function(e){var t,r,i={active:{label:(0,l.t)("settings.paywalls.status.active"),variant:"success"},inactive:{label:(0,l.t)("settings.paywalls.status.inactive"),variant:"default"},draft:{label:(0,l.t)("settings.paywalls.status.draft"),variant:"default"},notIdentified:{label:"",variant:"default"}},a=null!=(t=i[e.status])?t:i.notIdentified,s=null!=(r=e.stripe_prices_attributes.find(function(e){return e.preferred}))?r:e.stripe_prices_attributes[0],c=s?(0,tf.Y9)(e.currency,s.interval||null,s.interval_count||1,s.amount):(0,l.t)("settings.paywalls.list.form.no_preferred_price_selected"),u=[{key:"edit-paywall",label:(0,l.t)("settings.paywalls.list.form.edit"),onClick:function(){return o(e)}}];return{key:e.id.toString(),displayName:e.name||e.display_name,preferred_price:c,status:(0,n.jsx)(tp.C,{variant:a.variant,children:a.label}),action:(0,n.jsxs)("button",{type:"button",className:"text-[12px]",onClick:function(){(0,tm.p0)(e.checkout_path||"","#paywalls-list")},children:[(0,n.jsx)(e_.JO,{type:"20-copy",className:"mr-2"}),(0,n.jsx)("span",{children:(0,l.t)("settings.paywalls.list.form.copy_url")})]}),actionMenu:(0,n.jsx)(tb.t,{menuItems:u,dropdownSide:"left",shouldCloseOnClickItem:!0})}}))||[]}},ty=function(e){var t=e.isPaywallsLoading,r=th({paywalls:e.paywalls,refetchPaywalls:e.refetchPaywalls}).dataSource;return t?(0,n.jsx)(td.a,{}):(0,n.jsx)("div",{"data-testid":"paywall-list",children:r&&r.length>0&&(0,n.jsx)(tu.w,{columns:tl.nh,className:"md:mb-20",dataSource:r,hasStickyHeader:!0,headerClassName:"top-[116px]"})})},tv=r(553525),tg=r(588612),t_=r(708002),tx=r(634321),tj=r(284484),tw=r(93199),tO=r(646844);function tS(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var tk=function(e){var t=e.paymentProcessor,r=(0,a.useQuery)({queryKey:[tl.Rx],queryFn:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,tw.UT)(en.av.paywalls.index())]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){tS(o,n,i,a,s,"next",e)}function s(e){tS(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return{paywalls:r.data,refetchPaywalls:r.refetch,isPaywallsLoading:r.isLoading,paymentProcessorStatus:(0,tO.l)({paymentProcessor:t}).paymentProcessorStatus}},tN=function(e,t){switch(e){case tl.J6.REJECTED:return(0,n.jsx)(tj.t,{status:"rejected"});case tl.J6.PENDING:return(0,n.jsx)(tj.t,{status:"pending"});case tl.J6.RESTRICTED_FOR_APPLICATION_FEES:return(0,n.jsx)(tx.c,{});case tl.J6.RESTRICTED:return(0,n.jsx)(t_.a,{});case tl.J6.ENABLED:return(0,n.jsx)(tv.T,{paymentProcessor:t});case tl.J6.NOT_EXIST:return(0,n.jsx)(tg.q,{});default:return null}},tP=function(e){var t=e.paymentProcessor,r=e.shouldHideHeader,i=tk({paymentProcessor:t}),o=i.paymentProcessorStatus,a=i.paywalls,s=i.refetchPaywalls,l=i.isPaywallsLoading,c=tN(o,t);return(0,n.jsxs)(n.Fragment,{children:[!(void 0!==r&&r)&&(0,n.jsx)(tc,{paymentProcessorStatus:o,refetchPaywalls:s}),c,o===tl.J6.ENABLED&&(0,n.jsx)(ty,{isPaywallsLoading:l,paywalls:null!=a?a:[],refetchPaywalls:s})]})};function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var tI=function(e){var t=e.space,r=(0,a.useQuery)({queryKey:[en.av.paywalls.index()],enabled:!!(null==t?void 0:t.id),refetchOnWindowFocus:!1}),n=r.data,i=void 0===n?[]:n,o=r.isLoading,s=r.refetch,l=i.filter(function(e){return e.space_ids.includes(t.id)||e.space_group_ids.includes(t.space_group_id)}),c=i.filter(function(e){return!e.space_ids.includes(t.id)}),u=function(e){return{space_group_ids:e.space_group_ids,all_spaces:e.all_spaces,trial_days:e.trial_days}},d=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.paywalls.update({paywallId:e.id}),{paywall:tA({space_ids:e.space_ids.filter(function(e){return e!==t.id})},u(e))})},{onSuccess:s}),f=d.mutate,m=d.isLoading,p=(0,a.useMutation)(function(e){var r;return(0,tw.aU)(en.av.paywalls.update({paywallId:e.id}),{paywall:tA({space_ids:((function(e){if(Array.isArray(e))return tC(e)})(r=e.space_ids)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return tC(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t.id])},u(e))})},{onSuccess:s}),b=p.mutate,h=p.isLoading;return{paywalls:i,isLoading:o||m||h,removePaywall:f,addPaywall:b,refetchPaywalls:s,currentPaywalls:l,availablePaywalls:c}},tT=function(e){var t=e.space,r=e.spaceGroup,i=!!r.automatically_add_members_to_new_spaces,o=!!r.add_members_to_space_group_on_space_join;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.TitleSm,{weight:"semibold",children:(0,l.t)("customize_space.paywalls.subtitle")}),(0,n.jsx)(X.Z.BodyMd,{color:"text-default",children:(0,n.jsxs)("ul",{className:"mt-3 space-y-0.5 px-2",children:[(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_1")}),(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_2")}),(i||o)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_3")}),o&&(0,n.jsx)("li",{className:"ml-4",children:(0,l.t)("customize_space.paywalls.description.li_3_1")}),i&&(0,n.jsx)("li",{className:"ml-4",children:(0,l.t)("customize_space.paywalls.description.li_3_2")})]}),!(0,h.H)(t)&&(0,h.fL)(t)&&(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_4")}),(0,n.jsx)("li",{children:(0,l.t)("customize_space.paywalls.description.li_5")}),(0,n.jsxs)("li",{children:[(0,l.t)("customize_space.paywalls.description.li_6.prefix")," ",(0,n.jsx)("a",{href:"https://help.circle.so/c/paywall-setup/",target:"_blank",rel:"noreferrer",children:(0,l.t)("customize_space.paywalls.description.li_6.link")})]})]})})]})};tT.propTypes={space:p().object.isRequired,spaceGroup:p().object.isRequired};var tE=r(860221),tL=r(117617),tD=r(943544);function tM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tM(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tB=function(e){var t=e.paywall,r=e.showRemove,i=e.onRemove,o=e.refetchPaywalls,a=tR((0,eo.k)(!1),2),s=a[0],c=a[1],u=(0,tL.en)(),f=tR((0,d.useState)(!1),2),m=f[0],p=f[1],b=(0,ts.I)().show,h=function(){i(t),c()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ea.c,{isOpen:s,title:(0,l.t)("customize_space.paywalls.remove_modal.title"),onClose:c,onCancel:c,onConfirm:function(){return h()},confirmVariant:"danger",children:(0,l.t)("customize_space.paywalls.remove_modal.description",{name:t.display_name})}),(0,n.jsxs)(tD.Lt,{direction:"bottom-end",className:A()("text-dark flex justify-end",{"invisible group-hover:visible":u&&!m}),button:(0,n.jsx)("span",{className:"hover:bg-tertiary flex size-6 items-center justify-center rounded transition-colors",children:(0,n.jsx)(e_.JO,{type:"20-menu-dots-horizontal",className:"text-default",size:20})}),onToggle:p,children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),b({paywall:t,refetchPaywalls:o})},children:(0,l.t)("edit")}),void 0!==r&&r&&(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),c()},children:(0,l.t)("customize_space.paywalls.remove")})]})]})},tz=function(e){var t=e.paywall;return(0,n.jsx)(tp.C,{variant:"active"===t.status?"success":"default",children:(0,l.t)("settings.paywalls.status.".concat(t.status))})},tF=r(701168),tU="uppercase !px-0 !text-default !text-xxs !text-light",tZ="h-14 group px-0 text-default",tG=[{dataIndex:"display_name",key:"display_name",title:(0,l.t)("customize_space.paywalls.table_columns.paywall"),shouldWrap:!0,className:tU,tdClassName:(0,tF.A)(tZ,"!text-dark !font-medium")},{dataIndex:"unlocked_by",key:"unlocked_by",title:(0,l.t)("customize_space.paywalls.table_columns.unlocked_by"),shouldWrap:!0,className:tU,tdClassName:(0,tF.A)(tZ,"!font-medium")},{dataIndex:"pricing",key:"pricing",title:(0,l.t)("customize_space.paywalls.table_columns.pricing"),className:tU,tdClassName:(0,tF.A)(tZ,"!whitespace-normal w-48")},{dataIndex:"status",key:"status",title:(0,l.t)("customize_space.paywalls.table_columns.status"),className:tU,tdClassName:tZ},{dataIndex:"actions",key:"actions",title:" ",className:(0,tF.A)(tZ,"w-2 !text-right"),tdClassName:(0,tF.A)(tZ,"w-2 !text-right !py-0")}],tq=function(e,t){return e.space_ids.includes(t.id)},tV=function(e,t){var r=[];return tq(e,t)&&r.push("Space"),e.space_group_ids.includes(t.space_group_id)&&r.push("Space Group"),r.join(", ")},tW=function(e){var t=e.paywalls,r=e.space,i=e.onRemove,o=e.refetchPaywalls;if(0===t.length)return null;var a=t.map(function(e){return{key:e.id.toString(),rowClassName:"group",display_name:e.display_name,unlocked_by:tV(e,r),pricing:(0,tE.QC)(e),status:(0,n.jsx)(tz,{paywall:e}),actions:(0,n.jsx)(tB,{paywall:e,showRemove:tq(e,r),refetchPaywalls:o,onRemove:i})}});return(0,n.jsx)(tu.w,{variant:"no-border",className:"mt-2 lg:mt-2",columns:tG,dataSource:a})},tH=function(e){var t=e.paywalls,r=e.onClick,i=e.isLoading,o=e.appendTo,a=(0,s.k6)(),c=(0,D.eW)().onExit;return(0,n.jsx)("div",{className:"mt-4 lg:mt-7",children:(0,n.jsxs)(tD.Lt,{size:"full",direction:"bottom",className:"w-full",buttonClassName:"flex justify-between px-4 w-full rounded-lg border border-primary h-11 items-center",menuWrapperClassName:"px-0 mt-1",popperOptions:{strategy:"absolute"},button:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelMd,{children:(0,l.t)("customize_space.paywalls.link_paywall")}),(0,n.jsx)(e_.JO,{size:16,type:"caret-down-bold",useWithFillCurrentColor:!0,className:"text-dark -mr-1.5"})]}),appendTo:o,children:[i?(0,n.jsx)(tD.Lt.Item,{children:(0,n.jsx)(td.a,{center:!0})}):(0,n.jsxs)("div",{className:"max-h-40 overflow-scroll",children:[!t.length&&(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)(tD.Lt.Item,{children:(0,n.jsx)(X.Z.LabelSm,{children:(0,l.t)("customize_space.paywalls.no_paywalls")})})}),t.map(function(e){return(0,n.jsxs)(tD.Lt.ItemLink,{onClick:function(){return r(e)},disabled:i,children:[e.display_name," - ",(0,tE.QC)(e)]},e.id)})]}),(0,n.jsxs)(tD.Lt.ItemLink,{className:"hover:bg-secondary hover:text-dark flex w-full items-center gap-2.5 px-4 py-2",onClick:function(){a.push("/settings/paywalls"),c()},children:[(0,n.jsx)("span",{className:"flex",children:(0,n.jsx)(e_.JO,{type:"16-plus-v2",size:16,className:"text-dark w-4"})}),(0,n.jsx)(X.Z.LabelSm,{children:(0,l.t)("customize_space.paywalls.create_paywall")})]})]})})};tH.propTypes={paywalls:p().arrayOf(p().object).isRequired,onClick:p().func.isRequired,isLoading:p().bool,appendTo:p().node};var tQ=function(){var e=(0,c.L2)().data,t=(0,c.e2)().helpers.findById(e.space_group_id),r=tI({space:e}),i=r.isLoading,o=r.currentPaywalls,a=r.availablePaywalls,s=r.removePaywall,l=r.addPaywall,u=r.refetchPaywalls,d=(0,E.UV)().contentPortalElement;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tT,{space:e,spaceGroup:t}),(0,n.jsx)(tH,{paywalls:a,onClick:l,isLoading:i,appendTo:d}),i?(0,n.jsx)(td.a,{center:!0}):(0,n.jsx)(tW,{space:e,paywalls:o,isLoading:i,onRemove:s,refetchPaywalls:u})]})},tK=function(){var e=(0,c.wh)(),t=e.currentCommunity,r=e.currentCommunityMember;return!e.isLoading&&t&&r?(0,n.jsxs)(M,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(X.Z.TitleSm,{weight:"bold",children:(0,l.t)("customize_space.paywalls.title")})}),(0,n.jsx)("div",{className:"mt-5 lg:mt-9",children:t.has_payment_processor_enabled?(0,n.jsx)(tQ,{}):(0,n.jsx)(tP,{shouldHideHeader:!0,paymentProcessor:t.payment_processor})})]}):null},tJ=r(646517),t$=r(900217),tX=r(94612),tY=r(278940);function t0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t1(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var t2=r(380171),t3=r(117679),t6=r(514598),t5=r(86003),t4=r(701866),t7=r(678793);function t9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return t9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t9(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},rt=function(e){var t,r,i=e.space,o=(0,ee.pm)(),s=(0,a.useQueryClient)(),u=t8((0,d.useState)(!1),2),f=u[0],m=u[1],p=t8((0,d.useState)(!1),2),b=p[0],y=p[1],v=t8((0,d.useState)(""),2),g=v[0],_=v[1],x=t8((0,d.useState)(null),2),j=x[0],w=x[1],O=(0,c.wh)().currentCommunityMember,S=(0,t6.H)(),k=S.showOwnProfileEdit,N=S.showMemberProfileEdit,P=(0,t3.I)({spaceId:i.id}),C=P.count,A=P.isLoading,I=(0,tJ.z)(),T=(0,tY.fd)({sort:tY.zw.ROLE,filters:{space_id:i.id},query:g}),E=T.isLoading,L=T.hasNextPage,D=T.fetchNextPage,R=T.members,B=T.queryKey,z=i.space_members_limit_reached,F=void 0!==z&&z,U=i.space_members_limit,Z=(t={onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(B),o.success((0,l.t)("spaces.form.edit.members.members_removed"))},onSettled:function(){m(!1),y(!1),w(null)}},(0,a.useMutation)(function(e){var t=e.spaceId,r=e.memberId;return(0,tw.pC)(en.av.spaceMembers.leaveSpace({spaceId:t,memberId:r}))},t)).mutate,G=(r={onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(B),o.success((0,l.t)("spaces.form.edit.members.changed_role"))}},(0,a.useMutation)(function(e){var t,r=e.spaceId,n=e.memberId,i=e.isModerator;return(t=function(){var e,t,o;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:return[4,(0,tw.UT)(en.av.communityMember.settings({memberId:n}))];case 1:var s,l;return t=(e=a.sent()).moderating_space_ids||[],o=i?((function(e){if(Array.isArray(e))return t0(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return t0(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t0(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]):t.filter(function(e){return e!==r}),[2,(0,tw.aU)(en.av.communityMember.update({memberId:n}),(s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),l=l={moderator_space_ids:o},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))}),s))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){t1(o,n,i,a,s,"next",e)}function s(e){t1(o,n,i,a,s,"throw",e)}a(void 0)})})()},r)).mutate,q=b?(0,l.t)("spaces.form.edit.members.removing"):(0,l.t)("spaces.form.edit.members.remove_member");if(E)return(0,n.jsx)("div",{className:"flex w-screen justify-center",children:(0,n.jsx)(td.a,{})});var V=R.map(function(e){var t=e.id,r=e.avatar_url,n=e.name,o=e.email,a=e.roles,s=e.moderating_space_ids,l=e.public_uid,c=e.current_space_member,u=e.last_seen_at;return{id:t,avatarUrl:r,name:n,email:o,role:re(a,i.id,s),publicUid:l,lastActive:u,currentSpaceMember:void 0===c?null:c}});return(0,n.jsxs)(M,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:[(0,n.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 md:gap-0",children:[(0,n.jsx)("div",{children:(0,n.jsxs)(X.Z.TitleSm,{weight:"bold",children:[(0,l.t)("customize_space.members")," ",!A&&"(".concat(C,")"),(0,h.H)(i)&&(0,n.jsx)(t2.T,{content:(0,l.t)("courses.admin_summary.waitlist_tooltip"),placement:"right",children:(0,n.jsx)(e_.JO,{type:"16-clock",className:"ml-2",size:16})})]})}),(0,n.jsxs)("div",{className:"flex w-full justify-between gap-4 md:flex-1 md:justify-end",children:[(0,n.jsx)(t4.n,{spaceId:i.id}),(0,n.jsx)(t2.T,{content:(0,l.t)("chat_space.member_limit_title",{member_limit:void 0===U?0:U}),disabled:!F,children:(0,n.jsx)(ta.z,{variant:"secondary",onClick:function(){return I.show({spaceId:i.id})},disabled:F,children:(0,h.H)(i)?(0,l.t)("customize_space.add_waitlist"):(0,l.t)("customize_space.add_members")})})]})]}),(0,n.jsx)("div",{className:"border-primary mt-6 flex flex-row items-center border-y py-3 lg:mt-8",children:(0,n.jsx)(t5.h,{onSearch:_,placeholder:(0,l.t)("spaces.form.edit.members.search_members")})}),(0,n.jsx)("div",{className:"h-full overflow-auto pt-4",children:(0,n.jsx)(tX.r,{searchTerm:g,members:V,dataLength:R.length,next:D,hasMore:L,shouldHideAddMemberButton:!0,onEdit:function(e){var t,r,n=e.id,i=e.publicUid;if((null==O?void 0:O.id)==n)return k();N({member:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={public_uid:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)})},onAdd:function(){return I.show({spaceId:i.id})},onRemove:function(e){w(e),m(!0)},onRoleChange:function(e,t){var r=t===t7.K.MODERATOR;G({spaceId:i.id,memberId:e,isModerator:r})},scrollableTarget:"scrollable-container",shouldShowHeader:!0,cellVariant:"no-x-padding"})}),(0,n.jsx)(t$.G,{isOpen:f,onClose:function(){return m(!1)},onConfirm:function(){j&&f&&(y(!0),Z({spaceId:i.id,memberId:j}))},disabled:b,confirmText:q})]})};rt.propTypes={space:p().object};var rr=r(315574),rn=function(e){var t=e.onClose;return(0,n.jsx)(M,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:(0,n.jsx)(rr.k,{category:"administrative",pageSize:4,onClose:t,shouldAutoAdjust:!0})})},ri=r(818580),ro=r(737774),ra=function(e,t){var r=t.id,n=t.value;return t.resetOthers&&e.clear(),e.set(r,n),new Map(e)},rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return(0,d.useReducer)(ra,e)},rl=r(720624),rc=r(324512);function ru(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rd=function(e){var t=e.sections,r=e.variant,i=e.setIsNameEditable,o=(0,c.L2)().data,s=(0,rc.d)().translatedLabels,d=(0,a.useQueryClient)(),f=(0,a.useMutation)(function(e){return(0,tw.Cu)(en.av.courses.createSection({courseId:o.id}),e)},{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,d.invalidateQueries((0,ri.bD)(o.id))];case 1:return t.sent(),(0,u.defer)(function(){var t=document.querySelector("#section-item-".concat(e.id));t&&t.scrollIntoView({behavior:"smooth"}),i(e.id)}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ru(o,n,i,a,s,"next",e)}function s(e){ru(o,n,i,a,s,"throw",e)}a(void 0)})})()}}),m="".concat((0,l.t)("courses.edit.sections.untitled_with_label",{label:s.section.singular.toLowerCase()})," - ").concat(t.length+1);return(0,n.jsx)(ta.z,{variant:void 0===r?"primary":r,disabled:f.isLoading,onClick:function(){f.mutate({course_section:{name:m,drip_delay:0,lesson_order:[]}})},children:I18n.t(f.isLoading?"courses.edit.sections.adding":"courses.edit.sections.add_section")})};rd.propTypes={sections:p().arrayOf(p().object),variant:p().oneOf(["primary","secondary"]),setIsNameEditable:p().func.isRequired};var rf=function(e){var t=e.sections,r=e.dispatchSectionsNameEditor;return(0,n.jsxs)("div",{className:"border-primary flex h-72 flex-col items-center justify-center rounded-lg border",children:[(0,n.jsx)("div",{children:(0,n.jsx)(X.Z.TitleSm,{weight:"semibold",children:I18n.t("courses.edit.sections.empty_state.title")})}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(X.Z.BodyMd,{children:I18n.t("courses.edit.sections.empty_state.description")})}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(rd,{sections:t,variant:"secondary",setIsNameEditable:function(e){return r({id:e,value:!0})}})})]})};rf.propTypes={sections:p().array.isRequired};var rm=r(808782),rp=r(971691),rb=r(65119),rh=r(256060);function ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rg(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function r_(e){return function(e){if(Array.isArray(e))return ry(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ry(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ry(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rx=function(e){var t=e.sections,r=e.setSections,i=e.setActiveDragItem,o=e.children,s=(0,c.L2)().data,l=(0,rm.Dy)((0,rm.VT)(rm.we)),u=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.reorder({courseId:null==s?void 0:s.id}),e)}),d=function(e){var t,r,n,i;return"section"===(null==e||null==(r=e.data)||null==(t=r.current)?void 0:t.dragType)?e.id:null==e||null==(i=e.data)||null==(n=i.current)?void 0:n.sectionSortId};return(0,n.jsx)(rm.LB,{sensors:l,onDragStart:function(e){return i(e.active)},onDragEnd:function(){u.mutate({new_order:t.map(function(e){return{section_id:e.id,lesson_ids:e.lessons.map(function(e){return e.id})}})}),i(null)},onDragOver:function(e){var n,i,o,a,s=e.active,l=e.over,c=null==s?void 0:s.id,u=null==l?void 0:l.id;if(c&&u&&c!==u){var f=null==s||null==(i=s.data)||null==(n=i.current)?void 0:n.dragType,m=null==l||null==(a=l.data)||null==(o=a.current)?void 0:o.dragType;if(f&&m){if("section"==f){if("lesson"==m)return;return r(function(e){var t=e.findIndex(function(e){return e.sortId==c}),r=e.findIndex(function(e){return e.sortId==u});return(0,rp.Rp)(e,t,r)})}var p=d(l),b=d(s),h=b===p,y=b!==p,v=t.find(function(e){return e.sortId==b}).lessons.find(function(e){return e.sortId==c});if(v)return r(function(e){return e.map(function(e){if(h&&e.sortId===p){var t=e.lessons.findIndex(function(e){return e.sortId===c}),r=e.lessons.findIndex(function(e){return e.sortId===u});return r<0?e:rg(rv({},e),{lessons:(0,rp.Rp)(e.lessons,t,r)})}if(y&&e.sortId===b)return rg(rv({},e),{lessons:e.lessons.filter(function(e){return e.sortId!==c})});if(y&&e.sortId===p){var n=e.lessons.findIndex(function(e){return e.sortId===u});return rg(rv({},e),{lessons:r_(e.lessons.slice(0,n)).concat([v],r_(e.lessons.slice(n)))})}return e})})}}},children:o})},rj=r(978434),rw=r(134870),rO=r(876987),rS=(0,r(798104).Ue)(function(e){return{isDirty:!1,setIsDirty:function(t){return e({isDirty:t})}}}),rk=r(44820),rN=r(779774),rP=r(241769),rC=function(e){var t=e.section,r=e.options;return{changeNotifyStudentsEnabledMutation:(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},rA=function(e){var t=e.section,r=e.options;return{emailNotificationMutation:(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},rI=r(916823),rT=r(697389),rE=r(912306),rL=r(671963),rD=[{group:(0,l.t)("dynamic_vars_groups.community"),label:"{{community.name}}",value:"{{community.name}}"},{group:(0,l.t)("dynamic_vars_groups.member"),label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:(0,l.t)("dynamic_vars_groups.member"),label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{space.name}}",value:"{{space.name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{section.name}}",value:"{{section.name}}"},{group:(0,l.t)("dynamic_vars_groups.course"),label:"{{first_lesson_in_section.link}}",value:"{{first_lesson_in_section.link}}"}];function rM(e){var t=e.editor,r=e.isEditorFocused,i=e.portalId;if(!t)return null;var o=A()(r?"text-default dark:text-dark":"text-lightest dark:text-default");return(0,n.jsx)(rE.h,{selectorQuery:"#".concat(i),children:(0,n.jsx)(rL.m,{wrapperClassName:"px-8 w-80 pt-3",optionsClassName:"bottom-8",className:o,variables:rD,editor:t,tooltipPlacement:"top"})})}function rR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rB=function(e){var t,r,i,o,a=e.section,s=e.initialFocusRef,c=rS().setIsDirty,u=(0,b.Gc)(),f=u.formState.isDirty,m=u.getValues,p=(t=(0,d.useState)(!(0,rP.NU)(m("email_notification_body"))),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rR(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rR(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],y=p[1],v=!(null==(r=a.serialized_email_notification_body)?void 0:r.body)&&!a.email_notification_subject;(0,d.useEffect)(function(){c(f)},[c,f]),(0,d.useEffect)(function(){v&&c(!0)},[c,v]);var g="courses.edit.sections.notify_students_modal.form";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.l.Item,{name:"email_notification_subject",className:"!items-center !py-0 px-8",label:(0,l.t)("".concat(g,".email_notification_subject")),labelWrapperClassName:"!w-auto grow-0",labelClassName:"!m-0",hideDescription:!0,inline:!0,children:(0,n.jsx)(N.l.Input,{maxLength:"255",ref:s,placeholder:(0,rI.wB)((0,l.t)([g,"email_notification_subject_placeholder"])),otherClassName:"!px-0 !autofill:bg-yellow-200",focusRequired:!1,autoComplete:"off",hideBorder:!0})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{id:"drip-email-notification-editor-toolbar"}),(0,n.jsx)(es.$,{editorClassName:"mt-4 h-80 overflow-y-scroll px-8",onChangeCallback:function(e){y(!(0,rP.NU)({body:e}))},placeholder:(0,l.t)("".concat(g,".email_notification_body_placeholder")),name:"email_notification_body[body]",sgidToObjectMap:(null==(i=a.serialized_email_notification_body)?void 0:i.sgids_to_object_map)||{},inlineAttachments:(null==(o=a.serialized_email_notification_body)?void 0:o.inline_attachments)||[],disabledExtensions:["mention","poll","cta"],disabledSlashMenuCategories:["Embed"],aiCopilotTitle:a.name,shouldPreviewFilesAsLinks:!0,shouldShowTextModifiersMenu:!1,toolbars:[{portalId:"drip-email-notification-editor-toolbar",component:rT.j},{portalId:"drip-email-notification-variables-toolbar",component:rM}]}),h&&(0,n.jsx)("p",{className:"absolute bottom-2 right-8 text-red-500",children:(0,l.t)("".concat(g,".required"))})]}),(0,n.jsx)("div",{id:"drip-email-notification-variables-toolbar"})]})},rz=r(387513),rF=r(259928),rU=r(20735),rZ=r(818369);function rG(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var rq="edit-course-type-form",rV="courses.edit.sections.notify_students_modal.form",rW=function(e){var t,r,i=e.section,o=e.onSuccess,a=e.onSubmit,s=e.onError,c=e.initialFocusRef,u=e.isEdit,d=(0,ee.pm)(),f=d.success,m=d.error,p=(0,rc.d)().translatedLabels,b=(0,ri.rF)(i.space_id).refetch,h=rA({section:i,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent(),f((0,l.t)("".concat(rV,".save_success")),{duration:"short",shouldUseProgress:!1}),o(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rG(o,n,i,a,s,"next",e)}function s(e){rG(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){m((0,l.t)("".concat(rV,".save_error"))),s()}}}).emailNotificationMutation,y=rN.Ry().shape({email_notification_subject:rN.Z_().required((0,l.t)("".concat(rV,".required"))),email_notification_body:rN.Ry().test({test:function(e){return(0,rP.NU)(e)},message:(0,l.t)("".concat(rV,".required"))})}),v={email_notification_subject:i.email_notification_subject||(0,l.t)("".concat(rV,".email_notification_subject_placeholder")).replace(/[{}]/g,function(e){return"".concat(e).concat(e)}),email_notification_body:{body:(null==(r=i.serialized_email_notification_body)?void 0:r.body)||(t=p.section.singular.toLowerCase(),(0,rz.AW)((0,l.t)("courses.edit.sections.notify_students_modal.form.email_notification_body_default_text",{sectionLabelSingular:t}).replace(/[{}]/g,function(e){return"".concat(e).concat(e)}),[rF.Z,rU.Z,rZ.Z]))}};return(0,n.jsx)(N.l,{id:rq,onSubmit:function(e){h.mutate({course_section:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,!u&&{notify_students_enabled:!0})}),a()},preventAccidentalLeave:!0,validationSchema:y,className:"divide-primary divide-y",formClassName:void 0,defaultValues:v,children:(0,n.jsx)(rB,{section:i,initialFocusRef:c})})};function rH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rQ=function(e){var t,r=e.section,i=e.isOpen,o=e.isOpenForEdit,a=e.onClose,s=e.shouldShowNotificationMessage,c=(t=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rH(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1],m=(0,d.useRef)(null),p=rS(),b=p.isDirty,h=p.setIsDirty,y=function(){(!b||confirm((0,l.t)("prevent_accidental_leave_message")))&&a()};return(0,n.jsxs)(E.u_,{isOpen:i||o,onClose:y,contentPortalId:"course-type-picker-portal",initialFocus:m,children:[(0,n.jsx)(E.u_.Overlay,{}),(0,n.jsxs)(E.u_.Content,{size:"lg",children:[(0,n.jsxs)(E.u_.Header,{children:[(0,n.jsx)(E.u_.Title,{size:"sm",children:(0,l.t)("courses.edit.sections.notify_students_modal.title")}),(0,n.jsx)(E.u_.HeaderActions,{children:(0,n.jsx)(E.u_.CloseButton,{onClick:y})})]}),(0,n.jsxs)(E.u_.Body,{className:"!px-0",children:[s&&!o&&(0,n.jsxs)("div",{className:"border-primary bg-secondary flex items-start border px-8 py-6",children:[(0,n.jsx)("div",{className:"mr-3 pt-0.5",children:(0,n.jsx)(e_.JO,{type:"20-alert",className:"w-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-1",children:(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("courses.edit.sections.notify_students_modal.notify_your_members_title")})}),(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("courses.edit.sections.notify_students_modal.notify_your_members_message")})]})]}),(0,n.jsx)(rW,{section:r,isEdit:o,onSuccess:function(){h(!1),a(),setTimeout(function(){return f(!1)},100)},onSubmit:function(){return f(!0)},onError:function(){f(!1),h(!0)},initialFocusRef:m})]}),(0,n.jsxs)(E.u_.Footer,{className:"flex justify-end border-t",children:[!u&&(0,n.jsx)(ta.z,{type:"button",variant:"secondary",className:"mr-2",onClick:y,children:(0,l.t)("cancel")}),(0,n.jsx)(rk._,{type:"submit",variant:"circle",form:rq,submitting:u,children:(0,l.t)("save")})]})]})]})};function rK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rJ(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function r$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rK(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rX="courses.edit.sections.notify_students_modal.form",rY=function(e){var t,r=e.section,i=e.space,o=r$((0,d.useState)(!!r.notify_students_enabled),2),a=o[0],s=o[1],c=r$((0,d.useState)(!1),2),u=c[0],f=c[1],m=r$((0,d.useState)(!1),2),p=m[0],b=m[1],h=(0,ee.pm)(),y=h.success,v=h.error,g=(0,ri.rF)(r.space_id).refetch,_=rC({section:r,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),y((0,l.t)("".concat(rX,".save_success")),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){rJ(o,n,i,a,s,"next",e)}function s(e){rJ(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){v((0,l.t)("".concat(rX,".save_error"))),s(!0)}}}).changeNotifyStudentsEnabledMutation;(0,d.useEffect)(function(){s(!!r.notify_students_enabled)},[r.notify_students_enabled]);var x=function(e){e?f(!0):(s(!1),_.mutate({course_section:{notify_students_enabled:!1}}))},j=r.drip_notifications_sent_at&&(0,rw.w)({dateTime:new Date(r.drip_notifications_sent_at),format:"date_time_with_short_timezone"});return(0,rb.MS)(i)&&(j?t=(0,l.t)("courses.edit.sections.notify_students_modal.sent_tooltip",{date:j}):r.is_dripped&&(t=(0,l.t)("courses.edit.sections.notify_students_modal.delayed_notification_tooltip"))),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"group flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",name:"section[".concat(r.id,"].notify_students_enabled"),checked:a,className:"hidden"}),(0,n.jsx)(t2.T,{disabled:!t,content:t,children:(0,n.jsx)(rO.r,{checked:a,onChange:function(e){return x(e)},disabled:(0,rb.MS)(i)&&!!j})}),!((0,rb.MS)(i)&&j)&&(0,n.jsx)("button",{type:"submit",className:"hover:bg-tertiary invisible ml-3 rounded-md px-2 py-1 group-hover:visible",onClick:function(){return b(!0)},children:(0,l.t)("edit")})]}),(0,n.jsx)(rQ,{isOpen:u,isOpenForEdit:p,onClose:function(){f(!1),b(!1)},section:r,shouldShowNotificationMessage:!!t})]})};function r0(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var r1="courses.edit.sections",r2=function(e){var t=e.space,r=e.section,i=e.setIsNameEditable,o=(0,rc.d)().translatedLabels,s=(0,a.useQueryClient)(),c=(0,a.useMutation)(function(e){return(0,tw.Cu)(en.av.courses.createLesson({courseId:t.id,sectionId:r.id}),e)},{onSuccess:function(e){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,s.invalidateQueries({queryKey:[(0,ri.bD)(t.id)]})];case 1:return r.sent(),(0,u.defer)(function(){var t=document.querySelector("#lesson-item-".concat(e.id));t&&t.scrollIntoView({behavior:"smooth"}),i(e.id)}),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){r0(o,n,i,a,s,"next",e)}function s(e){r0(o,n,i,a,s,"throw",e)}a(void 0)})})()}}),d=function(e){var t="quiz"===e?(0,l.t)([r1,"untitled_quiz"]):(0,l.t)([r1,"untitled_with_label"],{label:o.lesson.singular.toLowerCase()});c.mutate({course_lesson:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"".concat(t," - ").concat(r.lessons.length+1),status:"draft",featured_media:null,rich_text_body:{}},"quiz"===e&&{quizzes_attributes:[{}]})})};return(0,n.jsxs)(tD.Lt,{size:tD.wk.SMALL,button:(0,n.jsx)(ta.z,{small:!0,type:"button",variant:"secondary",onClick:function(){},children:(0,n.jsx)(X.Z.LabelSm,{children:(0,l.t)([r1,"add_new"])})}),dataTestId:"new-lesson-dropdown-menu",children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){d("lesson")},children:(0,l.t)([r1,"lesson"])}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){d("quiz")},children:(0,l.t)([r1,"quiz"])})]})};function r3(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var r6=function(e){var t=e.show,r=e.name,i=e.onClose,o=e.courseId,s=e.sectionId,c=(0,ri.rF)(o).refetch,u=(0,a.useMutation)(function(){return(0,tw.pC)(en.av.courses.deleteSection({courseId:o,sectionId:s}))},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){r3(o,n,i,a,s,"next",e)}function s(e){r3(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(ea.c,{isOpen:t,title:(0,l.t)("courses.edit.sections.delete_section"),onClose:i,onCancel:i,onConfirm:u.mutate,confirmVariant:"danger",disabled:u.isLoading,confirmText:u.isLoading?(0,l.t)("deleting"):(0,l.t)("confirm"),children:(0,l.t)("courses.edit.sections.delete_confirmation",{name:r})})};r6.propTypes={show:p().bool.isRequired,name:p().string.isRequired,onClose:p().func.isRequired,courseId:p().string.isRequired,sectionId:p().string.isRequired};var r5=r(558808);function r4(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var r7=function(e){var t=e.show,r=e.name,i=e.onClose,o=e.courseId,s=e.sectionId,c=e.lessonId,u=(0,ri.rF)(o).refetch,d=(0,a.useMutation)(function(){return(0,tw.pC)(en.av.courses.deleteLesson({courseId:o,sectionId:s,lessonId:c}))},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){r4(o,n,i,a,s,"next",e)}function s(e){r4(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(ea.c,{isOpen:t,title:(0,l.t)("courses.edit.sections.delete_lesson"),onClose:i,onCancel:i,onConfirm:d.mutate,confirmVariant:"danger",disabled:d.isLoading,confirmText:d.isLoading?(0,l.t)("deleting"):(0,l.t)("confirm"),children:(0,l.t)("courses.edit.sections.delete_confirmation",{name:r})})};r7.propTypes={show:p().bool.isRequired,name:p().string.isRequired,onClose:p().func.isRequired,courseId:p().string.isRequired,sectionId:p().string.isRequired,lessonId:p().string.isRequired};var r9=r(775148),r8=function(e){var t=e.name,r=e.setName,i=e.isLoading,o=e.onSubmit,a=e.onClose,s=e.useSemiboldFont,c=e.dataTestId,u=(0,d.useRef)(null);return(0,d.useEffect)(function(){u.current&&u.current.focus()},[]),(0,n.jsxs)("form",{onSubmit:o,className:"flex w-full items-center pr-4",children:[(0,n.jsx)("input",{ref:u,className:A()("bg-primary border-input focus:border-secondary placeholder:text-light -my-1.5 -ml-2 mr-2 w-full rounded border px-2 py-1.5 text-sm placeholder:opacity-100 focus:outline-none",{"font-semibold":void 0!==s&&s}),onChange:function(e){return r(e.target.value)},value:t,onBlur:o,"data-testid":c}),i?(0,n.jsx)(e_.JO,{type:"loader"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r9.h,{type:"submit",name:"16-check",onClick:o,className:"!border-v2-success mr-1.5 border",iconClassName:"!text-v2-success",ariaLabel:(0,l.t)("save_and_close")}),(0,n.jsx)(r9.h,{type:"submit",className:"border-secondary border",name:"16-close",onClick:a,ariaLabel:(0,l.t)("close")})]})]})};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nt(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nr=function(e){var t,r=e.lesson,i=e.section,o=e.onClose,s=(0,c.L2)().data,l=(t=(0,d.useState)(r.name),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ne(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],f=l[1],m=(0,a.useQueryClient)(),p=(0,ee.pm)(),b=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateLesson({courseId:null==s?void 0:s.id,sectionId:i.id,lessonId:r.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,m.invalidateQueries({queryKey:[(0,ri.bD)(null==s?void 0:s.id)]})];case 1:return e.sent(),o(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nt(o,n,i,a,s,"next",e)}function s(e){nt(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){p.error(e.errorDetails)}});return(0,n.jsx)(r8,{name:u,setName:f,isLoading:b.isLoading,onSubmit:function(){return b.mutate({course_lesson:{name:u}})},onClose:o,dataTestId:"lesson-title"})};function nn(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ni=function(e){var t=e.courseId,r=void 0===t?"":t,i=e.sectionId,o=void 0===i?"":i,s=e.lessonId,c=void 0===s?"":s,d=e.defaultName,f=e.type,m=void 0===f?"lesson":f,p=(0,eC.dd)(),b=(0,a.useQueryClient)(),h=(0,ee.pm)(),y={onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b.invalidateQueries({queryKey:[(0,ri.bD)(r)]})];case 1:return e.sent(),p.hide(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nn(o,n,i,a,s,"next",e)}function s(e){nn(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){h.error(e.errorDetails)}},v=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateLesson({courseId:r,sectionId:o,lessonId:c}),e)},y),g=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateSection({courseId:r,sectionId:o}),e)},y);return(0,n.jsxs)(E.u_,{isOpen:p.visible,onClose:p.visible?p.hide:u.noop,children:[(0,n.jsx)(E.u_.Overlay,{}),(0,n.jsxs)(E.u_.Content,{size:"lg",children:[(0,n.jsxs)(E.u_.Header,{children:[(0,n.jsx)(E.u_.Title,{children:"lesson"===m?(0,l.t)("courses.edit.sections.rename_lesson"):(0,l.t)("courses.edit.sections.rename_section")}),(0,n.jsx)(E.u_.HeaderActions,{children:(0,n.jsx)(E.u_.CloseButton,{onClick:p.visible?p.hide:u.noop})})]}),(0,n.jsx)(E.u_.Body,{children:(0,n.jsx)(N.l,{onSubmit:function(e){var t=e.name;"lesson"===m?v.mutate({course_lesson:{name:t}}):"section"===m&&g.mutate({course_section:{name:t}})},defaultValues:{name:void 0===d?"":d},id:"course-section-lesson-rename-form",children:(0,n.jsx)(N.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"name",label:(0,l.t)("title"),rules:{required:(0,l.t)("courses.edit.sections.validations.name_is_required")},children:(0,n.jsx)(N.l.Input,{autoFocus:!0})})})}),(0,n.jsx)(E.u_.Footer,{children:(0,n.jsx)(ta.z,{form:"course-section-lesson-rename-form",type:"submit",full:!0,extraLarge:!0,variant:"circle",children:v.isLoading||g.isLoading?(0,l.t)("saving_changes"):(0,l.t)("save_changes")})})]})]})},no=eC.gk.create(function(e){return(0,n.jsx)(ni,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),na=function(){return(0,eC.dd)(no)};function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nl(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nc=function(){return[{label:l.ZP.t("courses.edit.sections.statuses.draft"),value:"draft"},{label:l.ZP.t("courses.edit.sections.statuses.published"),value:"published"}]},nu=function(e){var t,r=e.lesson,i=e.section,o=(0,a.useQueryClient)(),s=(0,c.L2)().data,l=(t=(0,d.useState)(r.status),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ns(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ns(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],f=l[1];(0,d.useEffect)(function(){f(r.status)},[r.status]);var m=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateLesson({lessonId:r.id,sectionId:i.id,courseId:s.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,o.invalidateQueries((0,ri.bD)(s.id))];case 1:return e.sent(),[4,o.invalidateQueries((0,ri.hE)(r.id))];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nl(o,n,i,a,s,"next",e)}function s(e){nl(o,n,i,a,s,"throw",e)}a(void 0)})})()}});return(0,n.jsx)(tD.Lt,{options:nc(),onChange:function(e){var t,n;f(e),m.mutate({course_lesson:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={status:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t)})},buttonClassName:"w-28",button:(0,n.jsx)(tD.Lt.ActiveLabelButton,{className:A()("flex justify-between rounded-md px-2 py-1 text-xs",{"bg-secondary":"draft"===u,"bg-green-100":"published"===u}),labelColor:"published"===u?"text-green-900":"text-dark",activeOptionValue:u,options:nc()}),dataTestId:"lesson-status-dropdown"})};function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nf(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function np(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}nu.propTypes={lesson:p().object.isRequired,section:p().object.isRequired};var nb=(0,d.forwardRef)(function(e,t){var r,i=e.dragHandleProps,o=e.isDragging,a=e.isNameEditable,c=e.isOverlay,u=e.lesson,f=e.section,m=e.setIsNameEditable,p=e.space,b=e.tableRowProps,h=(0,s.k6)(),y=(r=(0,d.useState)(!1),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,2)||function(e,t){if(e){if("string"==typeof e)return nd(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nd(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(0,tL.kK)(),x=na(),j=(0,ri.rF)(p.id,{enabled:!1}).refetch,w=(0,r5.z)({}).duplicateLesson,O=function(){h.push(en.H4.editLesson({spaceSlug:p.slug,sectionId:f.id,lessonId:u.id}))};return(0,n.jsxs)(rh.SC,np(nm({id:"lesson-item-".concat(u.id),ref:t},b||{}),{className:A()("bg-primary group cursor-auto",{"opacity-50":o,"overflow-hidden rounded-md shadow-lg":c}),dataTestId:"course-lesson-row",children:[(0,n.jsx)(rh.pj,np(nm({className:"pl-3 pr-0 md:pl-10"},(0,rb.XG)(p)&&{colSpan:3}),{children:(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("div",np(nm({className:"hover:bg-secondary flex size-6 cursor-move items-center justify-center rounded",ref:null==i?void 0:i.setActivatorNodeRef},(null==i?void 0:i.listeners)||{}),{children:(0,n.jsx)(e_.JO,{type:"16-reorder",size:16})})),a&&!c?(0,n.jsx)(nr,{lesson:u,section:f,onClose:function(){return null==m?void 0:m(!1)}}):(0,n.jsx)("button",{type:"submit",className:"hover:border-dark mr-4 cursor-pointer truncate border-b border-dashed border-transparent",title:u.name,onClick:function(){return null==m?void 0:m(!0)},children:(0,n.jsx)(X.Z.LabelSm,{children:u.name})})]})})),(0,n.jsx)(rh.pj,{colSpan:1,className:"!pr-6 text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[!c&&(0,n.jsx)(ta.z,{className:"!text-dark hover:bg-tertiary invisible rounded !px-2 !py-1 !font-normal sm:group-hover:visible",variant:"plain",onClick:O,children:(0,l.t)("courses.edit.sections.edit_lesson")}),(0,n.jsx)(nu,{lesson:u,section:f}),!c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(tD.Lt,{size:tD.wk.SMALL,button:(0,n.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,n.jsx)(e_.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"lesson-dropdown-menu",children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){h.push(en.H4.showLesson({spaceSlug:p.slug,sectionId:f.id,lessonId:u.id}))},children:(0,l.t)("courses.edit.lesson.view_lesson")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:O,children:(0,l.t)("courses.edit.sections.edit_lesson")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,w({spaceId:p.id,sectionId:f.id,lessonId:u.id})];case 1:return e=t.sent(),[4,j()];case 2:return t.sent(),null==m||m(!0,e.id),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nf(o,n,i,a,s,"next",e)}function s(e){nf(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:(0,l.t)("courses.edit.sections.duplicate_lesson")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){return _?x.show({courseId:p.id,sectionId:f.id,lessonId:u.id,defaultName:u.name}):setTimeout(function(){return null==m?void 0:m(!0)},100)},children:(0,l.t)("courses.edit.sections.rename_lesson")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){return g(!0)},children:(0,l.t)("courses.edit.sections.delete_lesson")})]}),(0,n.jsx)(r7,{show:v,onClose:function(){return g(!1)},courseId:p.id,lessonId:u.id,sectionId:f.id,name:u.name})]})]})})]}))});function nh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}nb.displayName="LessonItem";var ny=function(e){var t=e.lesson,r=e.section,i=e.space,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["lesson","section","space"]),a=(0,rp.nB)({id:t.sortId,data:{dragType:"lesson",item:t,sectionSortId:r.sortId}}),s=a.attributes,l=a.listeners,c=a.setActivatorNodeRef,u=a.setNodeRef,d=a.transform,f=a.transition,m=a.isDragging,p={transform:rj.ux.Transform.toString(d),transition:f};return(0,n.jsx)(nb,nh({isDragging:m,ref:u,lesson:t,section:r,space:i,tableRowProps:nh({style:p},s),dragHandleProps:{listeners:l,setActivatorNodeRef:c}},o))},nv=r(787086),ng=r(413241);function n_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nx(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function nj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n_(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nw="courses.edit.sections.drip_schedule.form",nO=function(e){var t=(0,rb.nl)(e),r=(0,rb.Cc)(e);return(0,rb.Hv)(r,t)},nS=function(e){var t=e.onChange,r=e.dripDelay,i=e.disabled,o=nj((0,d.useState)((0,rb.nl)(r)),2),a=o[0],s=o[1],c=nj((0,d.useState)((0,rb.Cc)(r)),2),u=c[0],f=c[1],m=nj((0,d.useState)(!1),2),p=m[0],b=m[1],h=nj((0,d.useState)(nO(r)),2),y=h[0],v=h[1],g=(0,d.useRef)(null),_=(0,l.t)("".concat(nw,".drip_delay_button_text"),{drip_delay:y}),x=(0,l.t)("".concat(nw,".").concat(a),{count:u}),j=(0,l.t)("".concat(nw,".drip_delay_message"),{drip_delay:(0,rb.Hv)(u,a).toLowerCase()});(0,d.useEffect)(function(){v(nO(r)),s((0,rb.nl)(r)),f((0,rb.Cc)(r))},[r]);var w=function(e,t){var r=parseInt(e)||0,n=nj("weeks"===t?[0,100]:[0,999],2);f(r=Math.min(Math.max(r,n[0]),n[1]))};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(ta.z,{disabled:i,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",forwardedRef:g,onClick:function(){b(!p)},children:[(0,n.jsx)("span",{children:_}),(0,n.jsx)(e_.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),(0,n.jsx)(nv.ZP,{visible:p,onClickOutside:function(e,t){nx(g.current,HTMLButtonElement)&&nx(t.target,HTMLElement)&&(t.target===g.current||g.current.contains(t.target))||b(!1)},allowHTML:!0,interactive:!0,duration:0,arrow:!1,delay:0,theme:"drip-delay-dropdown",placement:"bottom-start",content:(0,n.jsxs)("div",{className:"bg-primary border-primary mb-6 w-64 rounded-md border !px-4 !pt-3 shadow-md",children:[(0,n.jsx)(X.Z.BodyMd,{weight:"font-semibold",children:(0,l.t)("".concat(nw,".drip_delay"))}),(0,n.jsxs)("div",{className:"my-3 flex w-full items-center justify-between",children:[(0,n.jsx)("div",{className:"w-20",children:(0,n.jsx)(ng.I,{min:0,max:1e3,value:u,onChange:function(e){w(e.target.value,a)},otherClassName:"!p-2",type:"number"})}),(0,n.jsx)(tD.Lt,{className:"ml-2 grow",buttonClassName:"w-full",size:tD.wk.SMALL,onChange:function(e){s(e),w(u,e)},button:(0,n.jsxs)(ta.z,{large:!0,variant:"secondary",className:"!border-primary !flex w-full items-center justify-between !px-4 !pr-3 !font-normal",children:[(0,n.jsx)("span",{children:x}),(0,n.jsx)(e_.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),options:["days","weeks"].map(function(e){return{label:(0,l.t)("".concat(nw,".").concat(e),{count:u}),value:e}})})]}),(0,n.jsx)(X.Z.BodySm,{children:j}),(0,n.jsx)(ta.z,{variant:"circle",full:!0,className:"my-3",onClick:function(){var e="days"===a?u:7*u;t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({drip_delay:e},0===e&&{notify_students_enabled:!1})),b(!1)},children:(0,l.t)("done")})]}),children:(0,n.jsx)("span",{})})]})},nk=function(e){var t=e.section,r=e.options;return{changeDripScheduleMutation:(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)},r)}},nN=r(119614);function nP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nC(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function nA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nP(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nI=function(e){return e&&(0,rw.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},nT=function(e){var t,r=e.onChange,i=e.disabled,o=e.section,a=nA((0,d.useState)(!1),2),s=a[0],c=a[1],u=nA((0,d.useState)(nI(o.dripped_at)),2),f=u[0],m=u[1],p=(0,d.useRef)(null);return o.is_dripped?t=(0,l.t)("courses.edit.sections.drip_schedule.form.section_already_available"):o.dripped_at||(t=(0,l.t)("courses.edit.sections.drip_schedule.form.section_immediately_available")),(0,n.jsxs)("div",{className:"!py-0",children:[(0,n.jsx)(t2.T,{disabled:!t,content:t,children:(0,n.jsxs)(ta.z,{forwardedRef:p,disabled:i||!!o.drip_notifications_sent_at,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",onClick:function(){c(!s)},children:[(0,n.jsx)("span",{children:f||(0,l.t)("courses.edit.sections.drip_schedule.form.select_drip_date")}),(0,n.jsx)(e_.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]})}),(0,n.jsx)(nN.M,{datePickerVisible:s,onClickOutside:function(e,t){nC(p.current,HTMLButtonElement)&&nC(t.target,HTMLElement)&&(t.target===p.current||p.current.contains(t.target))||c(!1)},onCancel:function(){m(nI(null)),r({dripped_at:null}),c(!1)},cancelButtonText:(0,l.t)("courses.edit.sections.drip_schedule.form.clear_date"),value:o.dripped_at||"",onSave:function(e){m(nI(e)),r({dripped_at:e}),c(!1)},saveButtonVariant:"circle"})]})};function nE(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nL=function(e){var t,r=e.space,i=e.section,o=(0,ee.pm)(),s=o.success,c=o.error,u=(0,a.useQueryClient)(),d=(0,rb.MS)(r)?(0,l.t)("courses.edit.sections.drip_schedule.form.drip_date"):(0,l.t)("courses.edit.sections.drip_schedule.form.drip_delay"),f=nk({section:i,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u.invalidateQueries({queryKey:[(0,ri.bD)(i.space_id)]})];case 1:return e.sent(),s((0,l.t)("courses.edit.sections.drip_schedule.form.save_success",{drip_type:d}),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nE(o,n,i,a,s,"next",e)}function s(e){nE(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){c((0,l.t)("courses.edit.sections.drip_schedule.form.save_error",{drip_type:d.toLowerCase()}))}}}).changeDripScheduleMutation,m=function(e){f.mutate({course_section:e})};return(0,n.jsxs)(n.Fragment,{children:[(0,rb.MS)(r)&&(0,n.jsx)(nT,{onChange:m,section:i,disabled:f.isLoading}),(0,rb.vv)(r)&&(0,n.jsx)(nS,{onChange:m,dripDelay:null!=(t=i.drip_delay)?t:0,disabled:f.isLoading})]})};function nD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nM(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var nR=function(e){var t,r=e.section,i=e.onClose,o=(0,c.L2)().data,s=(t=(0,d.useState)(r.name),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nD(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nD(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],u=s[1],f=(0,a.useQueryClient)(),m=(0,ee.pm)(),p=(0,a.useMutation)(function(e){return(0,tw.aU)(en.av.courses.updateSection({courseId:null==o?void 0:o.id,sectionId:r.id}),e)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,f.invalidateQueries({queryKey:[(0,ri.bD)(null==o?void 0:o.id)]})];case 1:return e.sent(),i(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nM(o,n,i,a,s,"next",e)}function s(e){nM(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){m.error(e.errorDetails)}});return(0,n.jsx)(r8,{name:l,setName:u,isLoading:p.isLoading,onSubmit:function(){return p.mutate({course_section:{name:l}})},onClose:i,useSemiboldFont:!0,dataTestId:"section-title"})};function nB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nB(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nZ=(0,d.forwardRef)(function(e,t){var r=e.dragHandleProps,i=e.isDragging,o=e.isNameEditable,a=e.isOverlay,s=void 0!==a&&a,c=e.section,u=e.setIsNameEditable,f=e.setSections,m=e.space,p=e.tableBodyProps,b=nU(rs(),2),h=b[0],y=b[1],v=nU((0,d.useState)(!1),2),g=v[0],_=v[1],x=c.lessons.map(function(e){return e.sortId}),j=na(),w=(0,tL.kK)();return(0,n.jsxs)(rh.RM,nF(nz({className:A()("bg-primary cursor-auto transition-all duration-200 ease-in-out",{"opacity-50":void 0!==i&&i,"overflow-hidden rounded-md shadow-lg":s}),ref:t},void 0===p?{}:p),{children:[(0,n.jsxs)(rh.SC,{id:"section-item-".concat(c.id),className:"bg-secondary group",dataTestId:"course-section-row",children:[(0,n.jsx)(rh.pj,{className:"px-1 md:px-5",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",nF(nz({className:"hover:bg-primary flex size-6 cursor-move items-center justify-center rounded",ref:null==r?void 0:r.setActivatorNodeRef},(null==r?void 0:r.listeners)||{}),{children:(0,n.jsx)(e_.JO,{type:"16-reorder",size:16})})),void 0!==o&&o&&!s?(0,n.jsx)(nR,{section:c,onClose:function(){return null==u?void 0:u(!1)}}):(0,n.jsx)("button",{type:"button",className:"hover:border-dark truncate border-b border-dashed border-transparent",onClick:function(){return null==u?void 0:u(!0)},children:(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:c.name})})]})}),(0,rb.XG)(m)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(rh.pj,{className:"pr-5",children:!s&&(0,n.jsx)(nL,{section:c,space:m})}),(0,n.jsx)(rh.pj,{className:"pr-5",children:!s&&((0,rb.MS)(m)&&c.dripped_at||(0,rb.vv)(m)&&c.drip_delay>0)&&(0,n.jsx)(rY,{section:c,space:m})})]}),(0,n.jsx)(rh.pj,{className:"pr-6 text-right",children:!s&&(0,n.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[(0,n.jsx)(r2,{space:m,section:c,setIsNameEditable:function(e){return y({id:e,value:!0})}}),(0,n.jsxs)(tD.Lt,{button:(0,n.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,n.jsx)(e_.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"section-dropdown-menu",children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){return w?j.show({type:"section",sectionId:c.id,courseId:m.id,defaultName:c.name}):setTimeout(function(){return null==u?void 0:u(!0)},100)},children:l.ZP.t("courses.edit.sections.rename_section")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){return _(!0)},children:l.ZP.t("courses.edit.sections.delete_section")})]})]})}),(0,n.jsx)(r6,{show:g,onClose:function(){return _(!1)},courseId:m.id,sectionId:c.id,name:c.name})]}),(0,n.jsx)(rp.Fo,{items:x,strategy:rp.qw,children:c.lessons.map(function(e){return(0,n.jsx)(ny,{lesson:e,section:c,space:m,setSections:f,isNameEditable:h.get(e.id),setIsNameEditable:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y({id:null!=r?r:e.id,value:t})}},e.id)})})]}))});function nG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}nZ.displayName="SectionItem";var nq=function(e){var t=e.section,r=e.space,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["section","space"]),o=(0,rp.nB)({id:t.sortId,data:{dragType:"section",item:t}}),a=o.attributes,s=o.listeners,l=o.setActivatorNodeRef,c=o.setNodeRef,u=o.transform,d=o.transition,f=o.isDragging,m={transform:rj.ux.Transform.toString(u),transition:d};return(0,n.jsx)(nZ,nG({isDragging:f,ref:c,section:t,space:r,tableBodyProps:nG({style:m},a),dragHandleProps:{listeners:s,setActivatorNodeRef:l}},i))},nV=function(e){var t,r,i=e.space,o=e.sections,a=e.dispatchSectionsNameEditor,s=(0,d.useMemo)(function(){return o.reduce(function(e,t){return e+t.lessons.length},0)},[o]);return(0,n.jsxs)(rh.ss,{className:"divide-primary divide-y !border-t-0 p-6","data-testid":"customize-lessons-table-head",children:[(0,n.jsxs)(rh.SC,{children:[(0,n.jsx)(rh.pj,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,rb.XG)(i)&&{colSpan:3}),r=r={className:"px-6",children:(0,n.jsxs)(X.Z.TitleSm,{as:"span",weight:"semibold",children:[(0,l.t)("courses.edit.section_count",{count:(null==o?void 0:o.length)||0})," ",(0,l.t)("separator_dot")," ",(0,l.t)("courses.edit.lesson_count",{count:s})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,n.jsx)(rh.pj,{className:"px-6 text-right",children:(0,n.jsx)(rd,{variant:"circle",sections:o,setIsNameEditable:function(e){return a({id:e,value:!0})}})})]}),(0,n.jsxs)(rh.SC,{children:[(0,n.jsx)(rh.pj,{className:"!py-3 px-6",colSpan:(0,rb.XG)(i)?1:2,children:(0,n.jsx)(X.Z.LabelXs,{textTransform:"uppercase",children:(0,l.t)("courses.edit.sections.lesson_name")})}),(0,rb.XG)(i)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(rh.pj,{children:(0,n.jsx)(X.Z.LabelXs,{textTransform:"uppercase",children:(0,l.t)("courses.edit.sections.schedule")})}),(0,n.jsx)(rh.pj,{className:"!px-0 !py-3",colSpan:2,children:(0,n.jsxs)(X.Z.LabelXs,{textTransform:"uppercase",children:[(0,l.t)("courses.edit.sections.notify_students"),(0,n.jsx)(t2.T,{content:(0,l.t)("courses.edit.sections.notify_students_tooltip"),className:"inline-flex",placement:"top-end",children:(0,n.jsx)(e_.JO,{type:"question-mark",className:"ml-2 !w-3"})})]})})]})]})]})};function nW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nH=function(e){var t,r,i,o,a,s,l,c,u,f=e.space,m=e.sections,p=e.setSections,b=e.dispatchSectionsNameEditor,h=e.sectionsNameEditor,y=(t=(0,d.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nW(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nW(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],g=y[1],_=(null==v||null==(i=v.data)||null==(r=i.current)?void 0:r.dragType)==="lesson",x=(null==v||null==(a=v.data)||null==(o=a.current)?void 0:o.dragType)==="section",j=_&&(null==v||null==(l=v.data)||null==(s=l.current)?void 0:s.item),w=x&&(null==v||null==(u=v.data)||null==(c=u.current)?void 0:c.item);return(0,n.jsxs)(rx,{sections:m,setSections:p,setActiveDragItem:g,children:[(0,n.jsxs)(rh.iA,{variant:"no-border",className:"border-primary w-full overflow-hidden rounded-lg border",tableClassName:"table-fixed w-full",dataTestId:"sections-lessons-table",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{}),(0,rb.XG)(f)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("col",{className:"w-72"}),(0,n.jsx)("col",{className:"w-24"})]}),(0,n.jsx)("col",{className:"w-72"})]}),(0,n.jsx)(nV,{space:f,sections:m,dispatchSectionsNameEditor:b}),(0,n.jsx)(rp.Fo,{id:"sections-list",items:m.map(function(e){return e.sortId}),strategy:rp.qw,children:m.map(function(e){return(0,n.jsx)(nq,{setSections:p,space:f,section:e,isNameEditable:h.get(e.id),setIsNameEditable:function(t){return b({id:e.id,value:t})}},e.id)})})]}),(0,n.jsxs)(rm.y9,{wrapperElement:"table",children:[j&&(0,n.jsx)(nb,{space:f,lesson:j,isOverlay:!0}),w&&(0,n.jsx)(nZ,{space:f,section:w,isOverlay:!0})]})]})};function nQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nK=function(e){var t,r=e.sections,i=e.setSections,o=e.sectionsAreLoading,a=e.space,s=(t=rs(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nQ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nQ(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];return(0,n.jsx)(M,{className:"!max-w-6xl md:!px-6",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"mb-4 flex justify-between","data-testid":"customize-lessons-header",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(X.Z.TitleMd,{children:I18n.t("courses.edit.sections.lessons")}),(0,n.jsx)(ro.T,{space:a})]})}),o?(0,n.jsx)(rl.m,{}):r.length?(0,n.jsx)(nH,{space:a,sections:r,setSections:i,dispatchSectionsNameEditor:c,sectionsNameEditor:l}):(0,n.jsx)(rf,{sections:r,dispatchSectionsNameEditor:c})]})})};function nJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function nX(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}nK.propTypes={sections:p().arrayOf(p().object).isRequired,setSections:p().func.isRequired,sectionsAreLoading:p().bool.isRequired,space:p().object.isRequired};var nY=function(e){var t,r=e.space,i=(0,ri.rF)(r.id),o=i.data,a=i.isLoading,s=i.dataUpdatedAt,l=(0,d.useMemo)(function(){return((null==o?void 0:o.records)||[]).map(function(e){var t;return nX(n$({},e),{sortId:"section-".concat(e.id),lessons:null==e||null==(t=e.lessons)?void 0:t.map(function(e){return nX(n$({},e),{sortId:"lesson-".concat(e.id)})})})})},[o,s]),c=(t=(0,d.useState)(l),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nJ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nJ(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1];return(0,d.useEffect)(function(){f(l)},[o,l,s]),(0,n.jsx)(nK,{sectionsAreLoading:a,sections:u,setSections:f,space:r})};nY.propTypes={space:p().object.isRequired};var n0=r(546410),n1=r(891564),n2=r(22319),n3=r(682897),n6=r(951268),n5=r(698335),n4=r(586470),n7=r(582331);function n9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function n8(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ie=r(626242),it=Object.assign({},{WebPreview:function(e){var t=e.space,r=void 0===t?{}:t,i=(0,n2.sL)(),o=(0,n4.sE)().blocks,a=r.emoji,s=r.name;return(0,n.jsx)(ie.n,{theme:i,headerSpaceEmoji:void 0===a?"":a,headerSpaceTitle:void 0===s?"":s,blocks:o,screenSize:"desktop"})},MobilePreview:function(e){var t=e.space,r=(0,n2.sL)(),i=(0,n7.B)(),o=i.isPreviewWindowOpen,a=i.setPreviewWindowOpen,s=(0,n4.sE)().blocks,l=(void 0===t?{}:t).name,c={headerSpaceTitle:void 0===l?"":l,blocks:s,theme:n8(n9({},r),{default_appearance:"light"}),border:!0};return(0,n.jsxs)(n3.t,{className:"!bg-secondary h-full",children:[(0,n.jsx)(n6.x,n9({},c)),o&&(0,n.jsx)(n5.p,{desconstructor:function(){a(!1)},newTab:!0,children:(0,n.jsx)(n6.x,n8(n9({},c),{border:!1,width:26.875,height:58.25}))})]})}}),ir=r(573622),ii=r(410623),io=r(275552);function ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function is(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function il(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ic=(0,l.t)("courses.lockscreen.tabs.content"),iu=(0,l.t)("courses.lockscreen.tabs.design"),id=[{label:ic},{label:iu}],im=function(e){var t=e.children,r=il(e,["children"]);return(0,n.jsx)(io.LU,is(ia({tabs:id,initialTab:ic,wrapperClassName:"px-0 overflow-x-auto"},r),{children:t}))};im.propTypes={children:p().node.isRequired};var ip=function(e){var t=e.children,r=il(e,["children"]);return(0,n.jsx)(io.xf,is(ia({tab:ic,className:"overflow-y-visible"},r),{children:t}))};ip.propTypes={children:p().node.isRequired};var ib=function(e){var t=e.children,r=il(e,["children"]);return(0,n.jsx)(io.xf,is(ia({tab:iu,className:"overflow-y-visible"},r),{children:t}))};ib.propTypes={children:p().node.isRequired};var ih="#000000",iy=function(e){var t=e.blockDataPath,r=(0,b.qo)({name:"".concat(t,".button_label")}),i=(0,b.qo)({name:"".concat(t,".button_link")});return(0,n.jsxs)(im,{children:[(0,n.jsxs)(ip,{children:[(0,n.jsx)(N.l.Item,{name:"".concat(t,".heading"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.heading"),children:(0,n.jsx)(N.l.Input,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".description"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.description"),children:(0,n.jsx)(N.l.TextArea,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".button_label"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_label"),rules:{required:i&&(0,l.t)("courses.lockscreen.errors.button_label_required")},children:(0,n.jsx)(N.l.Input,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".button_link"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_link"),rules:{required:r&&(0,l.t)("courses.lockscreen.errors.button_link_required"),pattern:{value:ir.OT,message:(0,l.t)("courses.lockscreen.errors.button_link_invalid")}},children:(0,n.jsx)(N.l.Input,{})})]}),(0,n.jsxs)(ib,{children:[(0,n.jsx)("div",{className:"mb-5"}),(0,n.jsx)(ii.Y,{label:(0,l.t)("courses.lockscreen.fields.background_image"),name:"".concat(t,".background_image"),aspectRatio:4,customAspectRatioHelpText:(0,l.t)("image_upload.recommended_size_lock_screen_background_image"),previewVariant:"cover",hideUnsplash:!1}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".overlay_color"),label:(0,l.t)("courses.lockscreen.fields.overlay_color"),placeholder:ih,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(N.l.ColorPicker,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".heading_color"),label:(0,l.t)("courses.lockscreen.fields.heading"),placeholder:ih,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(N.l.ColorPicker,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".text_color"),label:(0,l.t)("courses.lockscreen.fields.text"),placeholder:ih,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(N.l.ColorPicker,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".button_background_color"),label:(0,l.t)("courses.lockscreen.fields.button_background"),placeholder:ih,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(N.l.ColorPicker,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".button_text_color"),label:(0,l.t)("courses.lockscreen.fields.button_label"),placeholder:ih,hideBorder:!0,hideDescription:!0,children:(0,n.jsx)(N.l.ColorPicker,{})})]})]})};iy.propTypes={blockDataPath:p().string.isRequired};var iv=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.banner")}),(0,n.jsx)(iy,{blockDataPath:t})]})};iv.propTypes={blockDataPath:p().string.isRequired};var ig=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.call_to_action")}),(0,n.jsx)(iy,{blockDataPath:t})]})};function i_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ix(e){return function(e){if(Array.isArray(e))return i_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i_(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i_(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ig.propTypes={blockDataPath:p().string.isRequired};var ij=function(e){var t=e.blockDataPath,r=(0,b.Gc)(),i=r.watch,o=r.setValue,a="".concat(t,".sgids_to_object_map"),s=i(a)||{},c="".concat(t,".inline_attachments"),u=i(c)||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-7 flex flex-col gap-2",children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.description")}),(0,n.jsx)(X.Z.LabelSm,{children:(0,l.t)("courses.lockscreen.placeholder.slash_commands")})]}),(0,n.jsx)("div",{className:"border-primary h-96 resize-y overflow-y-auto rounded-lg border px-4 py-3",children:(0,n.jsx)(es.$,{name:"".concat(t,".description_tiptap"),sgidToObjectMap:s,inlineAttachments:u,className:"h-full",editorClassName:"h-full",onLocalSgidToObjectMapChange:function(e){o(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s,e))},onLocalAttachmentsChange:function(e){return o(c,ix(u).concat(ix(e)))},disabledExtensions:["mention","poll","ai_copilot"]})})]})};ij.propTypes={blockDataPath:p().string.isRequired};var iw=r(318943),iO=r(805116);function iS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ik(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iS(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var iN=function(e){var t=e.blockDataPath,r=(0,c.L2)().data,i=(0,b.Gc)(),o=i.watch,a=i.setValue,s=(0,b.cl)().defaultValues,f=ik((0,d.useState)(!0),2),m=f[0],p=f[1],h="".concat(t,".locked_page_description.trix_html"),y="".concat(t,".locked_page_description.rendered_html_with_layout"),v=ik((0,d.useState)((0,u.get)(s,h)),2),g=v[0],_=v[1],x=o(h),j=(0,n0.z1)({space:r,options:{onSuccess:function(e){var t;a(y,null==e||null==(t=e.locked_page_description)?void 0:t.rendered_html_with_layout)}}}).mutate;return(0,d.useEffect)(function(){if(x!==g){if(x!==g&&m){_(x),p(!1);return}var e=(0,u.debounce)(function(){j({locked_page_description:x})},500);return e(),e.cancel}},[j,g,x,m]),(0,n.jsxs)("div",{className:"pb-2 pt-5",children:[(0,n.jsx)("div",{className:"text-dark mb-2 flex items-center",children:(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("courses.lockscreen.fields.description")})}),(0,n.jsx)("div",{className:"trix-v2",children:(0,n.jsx)(iO.O,{className:"locked-page-description",name:h,id:h})}),(0,n.jsx)(iw.v,{className:"mt-2",children:(0,l.t)("courses.lockscreen.legacy_description_update_warning")})]})};iN.propTypes={blockDataPath:p().string.isRequired};var iP=function(e){var t=e.blockDataPath;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.block_name.legacy_lock_screen")}),(0,n.jsx)("div",{className:"mb-7"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(N.l.Item,{name:"".concat(t,".locked_page_heading"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.heading"),children:(0,n.jsx)(N.l.Input,{})}),(0,n.jsx)(iN,{blockDataPath:t}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".locked_button_label"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_label"),children:(0,n.jsx)(N.l.Input,{})}),(0,n.jsx)(N.l.Item,{name:"".concat(t,".locked_button_url"),hideBorder:!0,hideDescription:!0,label:(0,l.t)("courses.lockscreen.fields.button_link"),children:(0,n.jsx)(N.l.Input,{})})]})]})};iP.propTypes={blockDataPath:p().string.isRequired};var iC=r(651943),iA=r(619043),iI=r(65766),iT=function(){var e,t,r=(0,c.L2)().data,n=(0,iA.O)({communityMemberId:null,status:[iI.Tl.ACTIVE],spaceIds:[null==r?void 0:r.id]}).paywallsListQuery,i=function(e){var t=e.stripe_prices_attributes.length>0,r=e.mobile_prices_attributes.length>0,n=(0,u.compact)([t?(0,l.t)("web"):null,r?(0,l.t)("in_app"):null]);return{value:e.id,label:e.internal_name||e.display_name,description:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.includes",{price_types:n.join(", "),count:n.length})}},o=(0,d.useMemo)(function(){return(null==n?void 0:n.data)?n.data.map(i):[]},[null==n?void 0:n.data]),a=(null!=(t=null==n||null==(e=n.data)?void 0:e.length)?t:0)>0;return{paywallsListQuery:n,getPaywallAsOption:i,allPaywallOptions:o,hasPaywalls:a}};function iE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var iL=function(e){var t=function(e){return{label:e.short_description,value:e.id,paywall_id:e.paywall_id}},r=function(e,t){return iE({paywall_id:t.id,currency_code:t.currency.code,trial_days:e.is_web_price?t.trial_days:0},e)},n=function(e,t){var n,i;return n=iE({},r(e.price_properties,t)),i=i={processor_id:e.processor_id,price_package_id:e.id,id:e.id},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n},i=(0,d.useMemo)(function(){return(null==e?void 0:e.data)?(0,u.flatten)(e.data.map(function(e){return e.stripe_prices_attributes.map(function(t){return r(t,e)})})):[]},[null==e?void 0:e.data]),o=(0,d.useMemo)(function(){return(null==e?void 0:e.data)?(0,u.flatten)(e.data.map(function(e){return e.mobile_price_packages_attributes.map(function(t){return n(t,e)})})):[]},[null==e?void 0:e.data]),a=(0,d.useMemo)(function(){return o.map(t)},[o]),s=(0,d.useMemo)(function(){return(0,u.compact)(i.map(t))},[i]),l=(0,d.useMemo)(function(){return(null==s?void 0:s.length)>0},[s]);return{allStripePrices:i,allMobilePrices:o,allInAppPaywallPriceOptions:a,allWebPaywallPriceOptions:s,hasWebPaywallPrices:l}},iD=function(e){var t="".concat(e,".paywalls"),r=(0,b.Dq)({name:t,keyName:"_id"}),n=(0,b.Gc)().watch;(0,d.useEffect)(function(){0===r.fields.length&&r.append({id:void 0,paywall_highlighted:!1})},[r.fields.length]);var i=iT(),o=i.paywallsListQuery,a=i.allPaywallOptions,s=i.hasPaywalls,l=iL(o),c=l.allStripePrices,u=l.allMobilePrices,f=l.allInAppPaywallPriceOptions,m=l.allWebPaywallPriceOptions,p=l.hasWebPaywallPrices,h=n(t),y=h.map(function(e){return e.id}),v=0===a.filter(function(e){return!y.includes(e.value)}).length,g=h.length>=6,_=h.some(function(e){var t;return!e.id||!(null==e||null==(t=e.web_paywall_price)?void 0:t.id)});return{fieldArrayMethods:r,allStripePrices:c,allMobilePrices:u,paywallsListQuery:o,selectedPaywallIds:y,allPaywallOptions:a,allInAppPaywallPriceOptions:f,allWebPaywallPriceOptions:m,hasWebPaywallPrices:p,hasPaywalls:s,shouldDisableAddPaywall:v||g||_,onClickAddPaywall:function(){r.append({id:void 0,paywall_highlighted:!1})},fieldNameRoot:t}},iM=(0,d.createContext)({blockDataPath:""});iM.displayName="PaywallsEditFormProvider";var iR=function(e){var t,r,i=e.children,o=e.blockDataPath,a=iD(o),s=(0,n7.B)(),l=s.previewMode,c=s.setPreviewMode,u=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({blockDataPath:o},a),r=r={previewMode:l,setPreviewMode:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return(0,n.jsx)(iM.Provider,{value:u,children:i})},iB=function(){return(0,d.useContext)(iM)},iz=function(){var e=iB(),t=e.previewMode,r=e.setPreviewMode;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.title")}),(0,n.jsxs)("label",{className:"bg-tertiary border-hover relative inline-flex h-9 w-full cursor-pointer items-center rounded-lg border",children:[(0,n.jsxs)("div",{className:"z-[3] grid w-full grid-cols-2",children:[(0,n.jsx)(X.Z.LabelMd,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.web_option")}),(0,n.jsx)(X.Z.LabelMd,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.view_price_for.mobile_option")})]}),(0,n.jsx)("input",{type:"checkbox",checked:(0,iC.g)(t),className:"peer sr-only",onChange:function(e){r(e.target.checked?"mobile":"desktop")}}),(0,n.jsx)("div",{className:"after:bg-primary absolute left-0.5 top-[0.0625rem] w-full after:absolute after:h-8 after:w-[49.375%] after:rounded-lg after:transition-all after:content-[''] peer-checked:after:translate-x-full"})]})]})},iF=r(914899),iU=function(){var e=(0,ts.I)().show,t=iB().paywallsListQuery,r=(0,c.wh)().currentCommunity,i=(0,tO.l)({paymentProcessor:null==r?void 0:r.payment_processor}).paymentProcessorStatus,o=(0,n7.B)(),a=o.isPreviewWindowOpen,s=o.setPreviewWindowOpen,u=o.previewMode;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.paywalls")}),(0,iF._k)(i)&&(0,n.jsxs)(tD.Lt,{button:(0,n.jsx)(r9.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,l.t)("community_member.actions")}),children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){window.open(en.Lo.paywalls.index,"_blank")},linkType:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.manage_paywalls")}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){return e({paywall:void 0,refetchPaywalls:function(){t.refetch()}})},linkType:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.create_paywall")}),(0,iC.g)(u)&&(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){s(!a)},linkType:"button",children:a?(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.close_preview"):(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.actions.open_preview")})]})]})},iZ=function(e){var t=e.onClickButton,r=void 0===t?u.noop:t,i=e.title,o=e.subtitle,a=e.buttonText;return(0,n.jsxs)("div",{className:"flex h-[70%] flex-col justify-center gap-y-2 text-center",children:[i&&(0,n.jsx)(X.Z.LabelMd,{weight:"bold",children:i}),o&&(0,n.jsx)(X.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(eA.w,{content:o})}),a&&(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(ta.z,{variant:"circle",type:"button",onClick:r,children:a})})]})},iG="paywalls.lock_screen.sidebar.paywall_edit_form.branded_app_empty_state",iq=function(){window.open(en.Lo.plans.brandedApps,"_blank")},iV=function(e){var t=e.children,r=(0,n7.B)(),i=r.shouldShowBrandedAppBanner,o=r.isCommunityOnPlus;return i&&!o?(0,n.jsx)(iZ,{subtitle:(0,l.t)([iG,"community_not_on_plus_plan","title"]),buttonText:(0,l.t)("learn_more"),onClickButton:iq}):i&&o?(0,n.jsx)(iZ,{subtitle:(0,l.t)([iG,"community_on_plus_plan","title"]),buttonText:(0,l.t)("sign_up")}):(0,n.jsx)(n.Fragment,{children:t})},iW=function(){return(0,n.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,n.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,n.jsx)(X.Z.BodySm,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.title")}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(ta.z,{type:"button",onClick:function(){window.open(en.Lo.paywalls.index,"_blank")},full:!1,children:(0,l.t)("paywalls.lock_screen.sidebar.paywalls_empty_state.cta")})})]})})},iH=function(){return(0,n.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,n.jsxs)("div",{className:"flex h-full w-64 flex-col gap-y-4 py-8",children:[(0,n.jsx)(X.Z.BodySm,{textTransform:"text-center",children:(0,l.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.title")}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(ta.z,{type:"button",onClick:function(){window.open(en.Lo.paywalls.index,"_blank")},full:!1,children:(0,l.t)("paywalls.lock_screen.sidebar.web_paywall_prices_empty_state.cta")})})]})})},iQ=function(e){var t=e.children,r=iB(),i=r.hasPaywalls,o=r.hasWebPaywallPrices;return i&&!o?(0,n.jsx)(iH,{}):i||o?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(iW,{})},iK=function(e){var t=e.localeString,r=e.icon,i=e.useWithFillCurrentColor;return(0,n.jsxs)("div",{className:"flex flex-row gap-x-2.5 self-center",children:[(0,n.jsx)(e_.JO,{className:"",type:r,size:16,useWithFillCurrentColor:i}),(0,l.t)(t)]})},iJ=function(e){var t=e.index,r=(0,b.Gc)(),i=r.setValue,o=r.watch,a=r.unregister,s=iB(),c=s.fieldArrayMethods,u=s.fieldNameRoot,d=o("".concat(u,".").concat(t,".paywall_highlighted")),f=c.fields.length>1;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.paywall_title",{index:t+1})}),(0,n.jsxs)(tD.Lt,{button:(0,n.jsx)(r9.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,l.t)("community_member.actions")}),children:[d&&(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){i("".concat(u,".").concat(t,".paywall_highlighted"),!1)},linkType:"button",children:(0,n.jsx)(iK,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.remove_highlight",icon:"16-star-fill"})}),!d&&(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){c.fields.forEach(function(e,r){i("".concat(u,".").concat(r,".paywall_highlighted"),r===t)})},linkType:"button",children:(0,n.jsx)(iK,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.highlight_price",icon:"16-star"})}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){c.swap(t,t-1)},isDisabled:t<=0,linkType:"button",children:(0,n.jsx)(iK,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_up",icon:"16-arrow-up"})}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){c.swap(t,t+1)},isDisabled:c.fields.length<=t+1,linkType:"button",children:(0,n.jsx)(iK,{localeString:"paywalls.lock_screen.sidebar.paywall_edit_form.move_down",icon:"16-arrow-down"})}),(0,n.jsx)(tD.Lt.ItemWithLink,{onClick:function(){a("".concat(u,".").concat(t,".id")),c.remove(t)},linkType:"button",hasDanger:!0,children:(0,n.jsx)(iK,{localeString:"delete",icon:"16-trash-bin"})})]})]})]})},i$=r(73557),iX=function(e){return{id:e.id,scenario:e.scenario,amount:e.amount,upfront_payment_amount:e.upfront_payment_amount,installments_count:e.installments_count,installment_amount:e.installment_amount,interval_count:e.interval_count,interval:e.interval,price_type:e.price_type,trial_days:e.trial_days}},iY=function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},iX(e)),r=r={processor_id:e.processor_id,price_package_id:e.price_package_id},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},i0=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stripe";return e?"stripe"===t?iX(e):iY(e):{id:null}};function i1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var i3=function(e){var t=e.index,r=e.initialPaywallId,i=iB(),o=i.allPaywallOptions,a=i.allMobilePrices,s=i.paywallsListQuery,c=i.selectedPaywallIds,u=i.fieldNameRoot,f=i.fieldArrayMethods,m="".concat(u,".").concat(t,".id"),p=(0,b.qo)({name:m,defaultValue:null}),h=(0,b.Gc)(),y=h.getFieldState,v=h.formState,g=y(m).error,_=!!v.errors&&!!g,x=function(){var e,r,n=s.data.find(function(e){return e.id===p}),i=n.prices.find(function(e){return e.is_web_price}),o=a.find(function(e){return e.paywall_id===n.id});f.update(t,{id:n.id,display_name:n.display_name,description:n.description,checkout_path:n.checkout_path,paywall_highlighted:!1,currency:{id:n.currency.id,code:n.currency.code,symbol:n.currency.symbol},processor_id:null==n?void 0:n.processor_id,mobile_processor_id:null==n?void 0:n.mobile_processor_id,status:null==n?void 0:n.status,web_paywall_price:(e=i2({},i0(i)),r=r={trial_days:null==n?void 0:n.trial_days},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e),mobile_paywall_price:i0(o,"mobile")})};(0,d.useEffect)(function(){p&&p!==r&&x()},[p,r]);var j=function(e){return!c.includes(e.value)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.filter(j);return t?r.filter(function(e){return("string"==typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}):function(e){if(Array.isArray(e))return i1(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return i1(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i1(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()};return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_paywall")}),(0,n.jsx)(b.Qr,{name:m,defaultValue:r,rules:{required:(0,l.t)("paywalls.lock_screen.sidebar.errors.paywall_not_selected")},render:function(e){var t=e.field;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(i$.rx,i2({isError:_,options:o,buttonClassName:"flex flex-col w-full p-4",filterBy:w},t)),_&&(0,n.jsx)(X.Z.LabelXs,{color:"text-feedback-error",children:g.message})]})}})]})},i6=function(e){var t,r=e.paywall,i=e.filterByPrice,o=e.index,a=(0,ts.I)().show,s=iB(),c=s.paywallsListQuery,u=s.allInAppPaywallPriceOptions,f=s.fieldArrayMethods,m=s.allMobilePrices,p=(0,d.useMemo)(function(){var e;return 0===i(u).length&&!(null==r||null==(e=r.mobile_paywall_price)?void 0:e.id)},[u,i,r]);return(0,n.jsx)(n.Fragment,{children:p?(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_mobile_prices")}),(0,n.jsx)("div",{children:(0,n.jsx)(ta.z,{variant:"circle",type:"button",onClick:function(){var e;return a({paywall:(null!=(e=null==c?void 0:c.data)?e:[]).find(function(e){return e.id===r.id}),refetchPaywalls:function(){c.refetch()},initialTab:tl.eA.PRICING_TAB})},children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_mobile_price")})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,n.jsx)(i$.rx,{options:u,value:null==r||null==(t=r.mobile_paywall_price)?void 0:t.price_package_id,buttonClassName:"flex flex-col w-full p-4",filterBy:i,onChange:function(e){if(e){var t,n,i=m.find(function(t){return t.id===e});f.update(o,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={mobile_paywall_price:i0(i,"mobile")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}}})]})})},i5=function(e){var t,r=e.paywall,i=e.filterByPrice,o=e.index,a=iB(),s=a.allStripePrices,c=a.allWebPaywallPriceOptions,u=a.fieldNameRoot,f=(0,b.Gc)(),m=f.setValue,p=f.watch,h=f.formState,y=f.getFieldState,v="".concat(u,".").concat(o,".web_paywall_price.id"),g=p(v),_=y(v).error,x=!!h.errors&&!!_,j=function(){var e=s.find(function(e){return e.id===g});m("".concat(u,".").concat(o,".web_paywall_price"),i0(e))};(0,d.useEffect)(function(){g&&j()},[g]);var w=0===c.length&&!!(null==r||null==(t=r.web_paywall_price)?void 0:t.id);return(0,n.jsx)(n.Fragment,{children:w?(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.no_web_prices")}),(0,n.jsx)("div",{children:(0,n.jsx)(ta.z,{variant:"circle",type:"button",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_web_price")})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.fields.select_default_price")}),(0,n.jsx)(b.Qr,{name:v,defaultValue:g,rules:{required:(0,l.t)("paywalls.lock_screen.sidebar.errors.paywall_price_not_selected")},render:function(e){var t=e.field;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(i$.rx,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isError:x,options:c,buttonClassName:"flex flex-col w-full p-4",filterBy:i},t)),x&&(0,n.jsx)(X.Z.LabelXs,{color:"text-feedback-error",children:_.message})]})}})]})})};function i4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i7=function(e){var t=e.index,r=iB(),i=r.fieldNameRoot,o=r.previewMode,a=(0,(0,b.Gc)().watch)("".concat(i,".").concat(t)),s=(0,iC.h)(o)?null==a?void 0:a.web_paywall_price:null==a?void 0:a.mobile_paywall_price,l=function(e){return e.paywall_id===a.id&&e.value!==(null==s?void 0:s.id)},c=function(e){return e.paywall_id===a.id&&e.value!==(null==s?void 0:s.price_package_id)},u=(0,iC.h)(o)?i5:i6;return(null==a?void 0:a.id)?(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsx)(u,{paywall:a,filterByPrice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.filter((0,iC.h)(o)?c:l);return t?r.filter(function(e){return("string"==typeof e.label?e.label:e.textLabel).toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase().replace(/\s+/g,""))}):function(e){if(Array.isArray(e))return i4(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return i4(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i4(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},index:t})}):null},i9=function(){var e=iB(),t=e.shouldDisableAddPaywall,r=e.fieldArrayMethods,i=e.onClickAddPaywall;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"divide-primary flex w-full flex-col divide-y",children:r.fields&&r.fields.map(function(e,t){return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 py-6 first:pt-0 last:pb-0",children:[(0,n.jsx)(iJ,{index:t}),(0,n.jsxs)("div",{className:A()("flex flex-col gap-y-4"),children:[(0,n.jsx)(i3,{initialPaywallId:e.id,index:t}),(0,n.jsx)(i7,{index:t})]})]},e._id)})}),(0,n.jsx)(ta.z,{variant:"circle",large:!0,type:"button",onClick:i,disabled:t,children:(0,l.t)("paywalls.lock_screen.sidebar.paywall_edit_form.add_paywall")})]})},i8=function(){return(0,n.jsx)(iV,{children:(0,n.jsx)(iQ,{children:(0,n.jsx)(i9,{})})})},oe=function(e){var t=e.children,r=(0,c.wh)().currentCommunity,i=(0,tO.l)({paymentProcessor:null==r?void 0:r.payment_processor}).paymentProcessorStatus;return(0,iF._k)(i)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"bg-tertiary flex flex-col gap-y-2 rounded p-4",children:[(0,n.jsx)(X.Z.LabelMd,{weight:"bold",children:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.title")}),(0,n.jsx)(X.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(eA.w,{content:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.text")})}),(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(ta.z,{variant:"circle",type:"button",onClick:function(){window.open(en.Lo.paywalls.index,"_blank")},children:(0,l.t)("paywalls.lock_screen.sidebar.connect_stripe_container.cta")})})]})},ot=function(){return(0,n.jsx)(oe,{children:(0,n.jsx)(iQ,{children:(0,n.jsx)(i9,{})})})},or=function(){var e=(0,n7.B)().previewMode;return(0,iC.h)(e)?(0,n.jsx)(ot,{}):(0,n.jsx)(i8,{})},on=function(){var e=iB(),t=e.paywallsListQuery,r=e.fieldNameRoot,i=(0,b.Gc)(),o=i.watch,a=i.reset,s=o(r);return((0,d.useEffect)(function(){a(void 0,{keepDirty:!0,keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0,keepTouched:!0})},[s,a]),t.isLoading)?(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(td.a,{})}):(0,n.jsx)("div",{className:"flex h-full flex-col justify-start gap-y-6",children:(0,n.jsx)(or,{})})},oi={banner:iv,description:ij,call_to_action:ig,legacy_lock_screen:iP,paywalls:function(e){var t=e.blockDataPath;return(0,n.jsx)(iR,{blockDataPath:t,children:(0,n.jsxs)("div",{className:"flex h-full flex-col gap-y-6",children:[(0,n.jsx)(iU,{}),(0,n.jsx)(iz,{}),(0,n.jsx)(on,{})]})})}},oo=function(e){var t=e.type,r=e.id,i=(0,(0,n4.sE)().getBlockDataPath)(r);if(!i)return null;var o=oi[t];return o?(0,n.jsx)(o,{blockDataPath:i}):null};oo.propTypes={type:p().string.isRequired,id:p().string.isRequired};var oa=function(){var e=(0,n4.sE)(),t=e.removeBlockBeingEdited,r=e.blockBeingEdited;if(!r)return null;var i=r.type,o=r.id;return(0,n.jsxs)("div",{className:"h-full p-6",children:[(0,n.jsx)("button",{type:"submit",className:"text-dark -ml-2 mb-4 block size-7",onClick:t,children:(0,n.jsx)(e_.JO,{type:"20-arrow-left",size:20})}),(0,n.jsx)(oo,{type:i,id:o})]})},os=r(675498),ol=r(844081),oc=function(e){var t=e.icon,r=e.label,i=e.noEdit,o=(0,ol.dw)().useDragHandle,a=(0,ol.dI)(),s=a.item,c=a.listeners,u=(0,n4.sE)(),d=u.toggleBlockHidden,f=u.setBlockBeingEdited,m=s.hidden,p=[];return void 0!==i&&i||p.push({tooltip:(0,l.t)("courses.lockscreen.edit_block"),icon:"pencil",onClick:function(){return f(s)}}),p.push({tooltip:m?(0,l.t)("courses.lockscreen.show_block"):(0,l.t)("courses.lockscreen.hide_block"),icon:m?"16-eye-closed":"16-eye-open",onClick:function(){return d(s.id)}}),(0,n.jsx)(os.TR,{item:{icon:t,label:r},actions:p,dragEventListeners:c,useDragHandle:o,className:A()({"bg-secondary text-light":m})})};oc.propTypes={block:p().shape({id:p().string,type:p().string,hidden:p().bool,data:p().object}),icon:p().string,label:p().oneOfType([p().string,p().node]),noEdit:p().bool};var ou=r(694024),od={banner:function(){return(0,n.jsx)(oc,{icon:"16-video-block",label:(0,l.t)("courses.lockscreen.banner")})},description:function(){return(0,n.jsx)(oc,{icon:"16-document-text",label:(0,l.t)("courses.lockscreen.description")})},call_to_action:function(){return(0,n.jsx)(oc,{icon:"16-call-to-action",label:(0,l.t)("courses.lockscreen.call_to_action")})},lessons:function(){return(0,n.jsx)(oc,{icon:"16-text",label:(0,l.t)("courses.lockscreen.lessons"),noEdit:!0})},legacy_lock_screen:function(){return(0,n.jsx)(oc,{icon:"16-document-text",label:(0,l.t)("courses.lockscreen.legacy_lock_screen")})},paywalls:function(){return(0,n.jsx)(oc,{icon:"16-payments",label:(0,n.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,n.jsx)(X.Z.LabelSm,{children:(0,l.t)("courses.lockscreen.paywalls")}),(0,n.jsx)(ou.g,{})]})})}},of=function(){var e=(0,ol.dI)().item,t=od[e.type];return(0,n.jsx)(t,{block:e})},om=function(e){var t,r,i=e.blocks,o=e.onSort,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["blocks","onSort"]),s=(0,E.UV)().contentPortalElement;return(0,n.jsxs)(ol.cm,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({items:i,onSort:o},a),r=r={children:[(0,n.jsx)(ol.cm.List,{children:i.map(function(e){return(0,n.jsx)(ol.cm.Item,{item:e,children:(0,n.jsx)(of,{})},e.id)})}),(0,n.jsx)(ol.cm.DragOverlay,{portalTo:s,children:(0,n.jsx)(of,{})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};om.propTypes={blocks:p().array,onSort:p().func};var op=function(){var e=(0,s.k6)(),t=(0,D.eW)().onExit;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border border-[#FDE68A] bg-[#FEF3C7] p-4",children:[(0,n.jsx)(X.Z.LabelMd,{weight:"semibold",children:(0,l.t)("courses.lockscreen.website_builder_notice.title")}),(0,n.jsx)(X.Z.BodySm,{children:(0,l.t)("courses.lockscreen.website_builder_notice.description")}),(0,n.jsx)(ta.z,{type:"button",onClick:function(){t(),e.push(en.Lo.content.pages)},variant:"secondary",className:"mt-1 self-start",children:(0,l.t)("courses.lockscreen.website_builder_notice.button")})]})},ob=function(){var e=(0,n4.sE)(),t=e.blocks,r=e.replaceBlocks,i=(0,eg.s)();return(0,n.jsxs)("div",{className:"flex h-full flex-col p-6",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(iw.v,{className:"mb-7",children:i?(0,l.t)("courses.lockscreen.only_visible_on_private"):(0,l.t)("courses.lockscreen.only_visible_on_private_old")}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(X.Z.LabelLg,{weight:"semibold",children:(0,l.t)("courses.lockscreen.page_blocks")})}),(0,n.jsx)(om,{blocks:t,onSort:r})]}),i&&(0,n.jsx)(op,{})]})},oh=function(){return(0,n4.sE)().isEditingBlock?(0,n.jsx)(oa,{}):(0,n.jsx)(ob,{})};function oy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function ov(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}oh.propTypes={space:p().object.isRequired};var og=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=r.find(function(e){return"legacy_lock_screen"===e.type});return n?ov(oy({},n.data),{locked_page_description:(null==(t=n.data)||null==(e=t.locked_page_description)?void 0:e.trix_html)||""}):null},o_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){return(0,u.omit)(e,"id")}).map(function(e){if("lessons"===e.type||"legacy_lock_screen"===e.type)return ov(oy({},e),{data:{}});if("paywalls"===e.type)return e.data.paywalls=(0,u.compact)(e.data.paywalls.map(function(e){var t,r,n=!(null==e?void 0:e.id),i=!(null==e||null==(t=e.web_paywall_price)?void 0:t.id)&&!(null==e||null==(r=e.mobile_paywall_price)?void 0:r.id);return n||i?null:e})),e;return e})},ox=function(e){var t=e.lock_screen_blocks,r=og(t),n=!!r,i=o_(t);return n?oy({lock_screen_blocks:i},r):{lock_screen_blocks:i}},oj=function(e){var t=e.space,r=void 0===t?{}:t,i=e.onSave,o=(0,D.eW)(),a=o.formId,s=o.addBeforeExit,c=o.removeBeforeExit,f=(0,b.Gc)(),m=f.handleSubmit,p=f.formState,h=f.reset,y=Object.keys(p.dirtyFields).length>0,v=(0,n7.B)().shouldShowBrandedAppBanner,g=(0,n4.sE)().previewMode,_=(0,d.useCallback)(function(){return!y||window.confirm((0,l.t)("courses.lockscreen.modal.unsaved_changes"))},[y]);(0,d.useEffect)(function(){return s(_),c},[c,s,_]);var x="desktop"===g?(0,n.jsx)(D.Ar.Main,{children:(0,n.jsx)(it.WebPreview,{space:r})}):(0,n.jsx)(D.Ar.MainMobile,{children:(0,n.jsx)(it.MobilePreview,{space:r})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Ar.Sidebar,{children:(0,n.jsx)("form",{id:a,className:"react-form size-full",onSubmit:m(function(e){(0,u.isFunction)(i)&&(i(ox(e)),h(null,{keepValues:!0}))}),children:(0,n.jsx)(oh,{})})}),v?(0,n.jsx)(n1.V.LandingPage,{}):x]})};oj.propTypes={space:p().object,courseSettings:p().object,onSave:p().func,debug:p().bool};var ow=function(e){var t=e.space,r=void 0===t?{}:t,i=(0,ee.pm)(),o=i.success,a=i.error,s=(0,c.T4)({spaceId:r.id}).refetch,u=(0,n0.z1)({space:r,options:{onSuccess:function(){s(),o((0,l.t)("courses.lockscreen.toast.saved"))},onError:function(){a((0,l.t)("courses.lockscreen.toast.save_error"))}}}).mutate;return(0,n.jsx)(oj,{space:r,onSave:u})};ow.propTypes={space:p().object};var oO=function(e){var t=e.space,r=void 0===t?{}:t;return(0,n.jsx)(n4.Tw,{space:r,children:(0,n.jsx)(ow,{space:r})})};oO.propTypes={space:p().object};var oS=function(e){var t=e.onClose,r=e.space,i=e.scrollToId,o=(0,D.eW)().currentSection;return(i&&(0,u.delay)(function(){var e;return null==(e=document.getElementById(i))?void 0:e.scrollIntoView()},0),o===(0,l.t)("customize_space.paywalls.title"))?(0,n.jsx)(tK,{}):o===(0,l.t)("customize_space.customize")?(0,n.jsx)(eG,{space:r}):o===(0,l.t)("customize_space.members")?(0,n.jsx)(rt,{space:r}):o===(0,l.t)("customize_space.options")?(0,n.jsx)(to,{space:r}):o===(0,l.t)("customize_space.lessons")?(0,n.jsx)(nY,{space:r}):o===(0,l.t)("customize_space.lock_screen")?(0,n.jsx)(oO,{space:r}):o===(0,l.t)("customize_space.workflows")?(0,n.jsx)(rn,{onClose:t}):null},ok=r(926092),oN=function(e){var t=e.space,r=e.scrollToId,i=e.onClose,o=(0,D.eW)().currentSection===(0,l.t)("customize_space.lock_screen"),a=o?"no-header":"only-main";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Ar,{variant:a,className:(0,tF.A)({"hidden lg:grid":o}),children:(0,n.jsx)(oS,{space:t,scrollToId:r,onClose:i})}),o&&(0,n.jsx)(ok.R,{className:"lg:hidden",title:(0,l.t)("courses.lockscreen.mobile_unsupported.title"),description:(0,l.t)("courses.lockscreen.mobile_unsupported.description")})]})},oP=r(437416),oC=r(146706),oA=function(){var e=(0,$.mx)(),t=e.dirtyForms,r=e.setDirtyForms,n=t||$.Wm,i=n.customize,o=n.options;return{isDirty:Object.values(i).some(Boolean)||Object.values(o).some(Boolean),resetDirtyFields:function(){r($.Wm)}}},oI=function(){var e=(0,D.eW)(),t=e.onExit,r=e.isSaving,i=e.formId,o=e.isSaveButtonDisabled,a=oA(),s=a.isDirty,c=a.resetDirtyFields,u=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,n.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-y-2 md:flex-row md:items-center md:gap-y-0",children:[(0,n.jsx)(X.Z.LabelSm,{weight:"semibold",children:s&&(0,l.t)("unsaved_changes")}),(0,n.jsxs)("div",{className:A()({"grid w-full grid-cols-2 gap-4":u,"flex gap-4":!u}),children:[(0,n.jsx)(ta.z,{variant:"secondary",onClick:function(){s&&c(),t()},full:u,children:(0,l.t)("cancel")}),(0,n.jsx)(oC.k,{full:u,type:"submit",formId:i,disabled:r||o,variant:"circle",children:(0,l.t)("save_changes")})]})]})};oI.propTypes={onSave:p().func.isRequired};var oT=r(185633),oE=r(524304),oL=r(203743),oD=function(){var e=(0,D.eW)(),t=e.formId,r=e.isSaving;return(0,n.jsx)(D.h4.Actions,{className:"hidden justify-end lg:flex",children:(0,n.jsx)(D.h4.SaveButton,{type:"submit",formId:t,disabled:r,variant:"circle",children:(0,l.t)("save_changes")})})},oM=function(){var e=(0,D.eW)(),t=e.sections,r=e.currentSection,i=e.setCurrentSection,o=e.title,a=(0,tL.kK)(),s=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled,c=oK(),u=(0,oL.X)(),d=r===(0,l.t)("customize_space.lock_screen"),f=t.map(function(e){return{value:e,label:e}});return(0,n.jsxs)(D.h4,{className:"flex !max-h-[initial] flex-col !items-start gap-4 !p-0 lg:grid lg:!items-center",style:{gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[a&&s&&(0,n.jsx)(r9.h,{name:"16-arrow-left",onClick:c.hide}),o&&(0,n.jsx)("span",{className:"flex w-full min-w-0",children:(0,n.jsx)(t2.T,{content:o,className:"truncate text-lg font-semibold",interactive:!1,children:o})})]}),a&&(0,n.jsx)(oT.o,{onClick:function(){c.hide(),u.hide()}})]}),(0,n.jsx)(D.h4.Actions,{className:"hidden w-full overflow-auto md:block lg:justify-center lg:overflow-visible",children:(0,n.jsx)(oE.S,{value:r,onChange:i,options:f})}),d&&(0,n.jsx)(oD,{})]})};oM.propTypes={};var oR=function(e){var t=e.children,r=(0,D.eW)().currentSection,i=(0,k.v)().isMobileWebNewSpaceCustomizationUIEnabled,o=r===(0,l.t)("customize_space.lock_screen"),a=r===(0,l.t)("customize_space.members"),s=r===(0,l.t)("customize_space.lessons"),c=(0,tL.kK)(),u=[(0,l.t)("customize_space.customize"),(0,l.t)("customize_space.options")].includes(r),d=u&&i&&c;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oP.x.Header,{className:A()({"!px-5 !py-4":i}),children:(0,n.jsx)(oM,{})}),(0,n.jsxs)(oP.x.Body,{className:A()({"px-5 py-8":i}),wrapperClassName:A()({"max-w-full h-full":o||a||s}),children:[t,d&&(0,n.jsx)(oI,{})]}),u&&!i&&(0,n.jsx)(oP.x.Footer,{children:(0,n.jsx)(oI,{})})]})};oR.propTypes={children:p().node};var oB=function(e){var t=e.isOpen,r=e.onSave,i=e.onClose,o=e.onExit,a=e.sections,s=e.initialSection,l=e.title,c=e.formId,u=e.contentPortalId,d=e.children;return(0,n.jsx)(oP.x,{isOpen:t,onClose:i,shouldShowCloseButton:!0,contentPortalId:void 0===u?"customize-space-portal":u,children:(0,n.jsx)(D.MW,{formId:void 0===c?"edit-space-form":c,sections:a,initialSection:s,title:l,onSave:r,onExit:o,children:(0,n.jsx)(oR,{children:d})})})};oB.propTypes={isOpen:p().bool,onSave:p().func,onClose:p().func,onExit:p().func,sections:p().array,initialSection:p().string,title:p().string,formId:p().string,contentPortalId:p().string,children:p().node};var oz=function(e){var t=e.isOpen,r=e.onExit,i=e.onClose,o=e.onSave,a=e.space,s=e.sections,l=e.initialSection,u=e.onSlugChange,d=e.scrollToId;return a?(0,n.jsx)(c.mE,{spaceId:a.id,children:(0,n.jsx)(c.DJ,{onSlugChange:u,children:(0,n.jsx)(oB,{isOpen:t,onClose:i,onExit:r,onSave:o,sections:s,initialSection:l,title:a.name,children:(0,n.jsx)(oN,{space:a,scrollToId:d,onClose:i})})})}):null},oF=r(899145),oU=r(366249),oZ=r(78456),oG=function(e){var t=e.isCourseSpace,r=e.areWorkflowsEnabled,n=e.isCommunityAdmin,i=[];return void 0!==t&&t&&i.push((0,l.t)("customize_space.lessons")),i.push((0,l.t)("customize_space.customize")),n&&i.push((0,l.t)("customize_space.paywalls.title")),i.push((0,l.t)("customize_space.lock_screen")),i.push((0,l.t)("customize_space.members")),i.push((0,l.t)("customize_space.options")),r&&i.push((0,l.t)("customize_space.workflows")),i};function oq(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function oV(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){oq(o,n,i,a,s,"next",e)}function s(e){oq(o,n,i,a,s,"throw",e)}a(void 0)})}}function oW(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var oH=function(e){var t=e.spaceId,r=e.refetch,i=e.initialSection,u=e.shouldRedirectOnSlugChange,d=void 0===u||u,f=e.scrollToId,m=(0,s.k6)(),p=(0,a.useQueryClient)(),b=(0,c.wh)(),y=b.currentCommunitySettings,v=b.currentCommunityMember,g=(0,c.T4)({spaceId:t}),_=g.space,x=g.refetch,j=(0,c.nT)().actions.refresh,w=(0,h.fO)(),O=(0,eC.dd)(),S=(0,ee.pm)().success,k=function(){return oV(function(){return oW(this,function(e){switch(e.label){case 0:return[4,p.invalidateQueries([c.Xe,t])];case 1:return e.sent(),[4,p.invalidateQueries([oU.Jl,t])];case 2:return e.sent(),[4,x()];case 3:return e.sent(),[4,j()];case 4:if(e.sent(),!o()(r))return[3,6];return[4,r()];case 5:e.sent(),e.label=6;case 6:return[2]}})})()},N=(0,a.useMutation)(function(e){var t=(0,oF.$o)(e);return(0,tw.aU)((0,en.C1)(String(null==_?void 0:_.id)),{space:t})},{onSuccess:function(){return oV(function(){return oW(this,function(e){switch(e.label){case 0:return S((0,l.t)("changes_saved")),[4,k()];case 1:return e.sent(),[2]}})})()}}),P=oG({isCourseSpace:(0,h.EG)(_),isCommunityAdmin:(0,oZ.vb)(v),areWorkflowsEnabled:!!(null==y?void 0:y.upgrade_flows_for_workflows_spaces_enabled)});return(0,n.jsx)(oz,{isOpen:O.visible,space:_,sections:P,initialSection:i||P[0],scrollToId:f,onSlugChange:function(e){if(d){var t=w(e);t&&m.push(t)}},onSave:function(e){var t=e.data,r=e.onSuccess;N.mutate(t,{onSuccess:r})},onExit:function(){k(),O.hide()},onClose:function(){return O.hide()}})},oQ=eC.gk.create(function(e){return(0,n.jsx)(oH,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),oK=function(){return(0,eC.dd)(oQ)}},939773:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(552676),i=r(952723),o=r(701168),a=function(e){var t=e.dateString,r=e.isSquare,a=void 0!==r&&r,s=(0,i.N)(t),l=s.dayOfMonth,c=s.shortMonthString;return(0,n.jsxs)("div",{className:(0,o.A)("bg-secondary flex cursor-default flex-col items-center justify-center rounded-md py-1.5",{"h-12 w-12":a,"w-10":!a}),children:[(0,n.jsx)("div",{className:"text-dark text-center text-base font-bold leading-5",children:l}),(0,n.jsx)("div",{className:"text-dark text-center font-medium uppercase",style:{fontSize:"9px"},children:c})]})}},628384:function(e,t,r){"use strict";r.d(t,{Bq:()=>o,Mk:()=>c,S2:()=>d,jk:()=>u,mv:()=>a,oL:()=>l});var n=r(437588),i=r(125152),o={VIRTUAL:"virtual",IN_PERSON:"in_person",TBD:"tbd",LIVE_STREAM:"live_stream",LIVE_ROOM:"live_room"},a=function(e){return(null==e?void 0:e.status)===i.Q_.DRAFT},s=function(e){var t,r;return null==e||null==(r=e.event_setting_attributes)||null==(t=r.live_stream_room_setting_attributes)?void 0:t.stream_status},l=function(e){return s(e)===n.LV.ENDED},c=function(e){return s(e)===n.LV.BACKSTAGE},u=function(e){return s(e)===n.LV.SCHEDULED},d=function(e){return s(e)===n.LV.LIVE}},228008:function(e,t,r){"use strict";r.d(t,{l:()=>a});var n=r(552676),i=r(380171),o=r(984367),a=function(e){var t=e.startsAt,r=e.frequency,a=e.disabled,s=e.children,l=(0,o.O)({startsAt:t,frequency:r}).label;return(0,n.jsx)(i.T,{placement:"bottom",content:l,disabled:void 0!==a&&a,children:s})}},204826:function(e,t,r){"use strict";r.d(t,{I:()=>m});var n=r(552676),i=r(275271),o=r(444799),a=r(739792),s=r(941084),l=r(381636),c=r(39905),u=["places"],d={streetViewControl:!1,mapTypeControl:!1,scrollWheel:!1,fullscreenControl:!1,panControl:!1,rotateControl:!1,gestureHandling:"none",clickableIcons:!1,controlSize:25,disableDoubleClickZoom:!0,draggableCursor:"arrow",draggingCursor:"arrow",keyboardShortcuts:!1},f=function(e){if(null==e?void 0:e.geometry){var t,r,n,i;return{lat:null==e||null==(r=e.geometry)||null==(t=r.location)?void 0:t.lat,lng:null==e||null==(i=e.geometry)||null==(n=i.location)?void 0:n.lng}}return null},m=(0,i.memo)(function(e){var t=e.serializedLocation,r=e.variant,m=void 0===r?"default":r,p=(0,o.Ji)({id:"google-map-script",googleMapsApiKey:window.GOOGLE_MAPS_API_KEY||"",libraries:u}).isLoaded,b=(0,i.useMemo)(function(){return(0,s.qO)(t)},[t]),h=(0,i.useMemo)(function(){return f(b)},[b]),y=function(){window.open(b.url,"_blank")};return p?"default"===m?(0,n.jsxs)("div",{className:"mt-6 flex space-x-3",children:[h&&(0,n.jsx)(o.b6,{mapContainerClassName:"h-16 w-[150px] rounded-md border border-primary",zoom:15,options:d,center:h,children:(0,n.jsx)(o.Jx,{cursor:"arrow",position:h})}),(0,n.jsxs)("div",{className:"-mt-1",children:[(0,n.jsxs)("div",{children:[(null==b?void 0:b.name)&&(0,n.jsx)(l.Z.LabelXs,{weight:"semibold",children:null==b?void 0:b.name}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodyXs,{children:null==b?void 0:b.formatted_address})]}),(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-link !text-xs",children:(0,a.t)("events.rsvp.view_map")})]})]}):"full"===m?(0,n.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[h&&(0,n.jsx)(o.b6,{mapContainerClassName:"h-[220px] w-full rounded-md border border-primary",zoom:14,options:d,center:h,children:(0,n.jsx)(o.Jx,{cursor:"arrow",position:h})}),(0,n.jsxs)("div",{className:"-mt-1",children:[(null==b?void 0:b.name)&&(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-left",children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:null==b?void 0:b.name})}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodySm,{children:null==b?void 0:b.formatted_address})]})]}):(0,n.jsx)("div",{className:"flex flex-col space-y-4",children:(0,n.jsxs)("div",{className:"-mt-1",children:[(null==b?void 0:b.name)&&(null==b?void 0:b.url)&&(0,n.jsx)(c.z,{variant:"text",onClick:y,className:"!text-left",children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",color:"text-darkest",children:null==b?void 0:b.name})}),(null==b?void 0:b.formatted_address)&&(0,n.jsx)(l.Z.BodyXs,{children:null==b?void 0:b.formatted_address})]})}):null})},786916:function(e,t,r){"use strict";r.d(t,{Y:()=>et});var n=r(552676),i=r(275271),o=r(739792),a=r(263029),s=r(478913),l=r(957363),c=r(381636),u=r(39905),d=function(e){var t=e.setShouldShowAddToCalendarModal;return(0,n.jsxs)(u.z,{variant:"secondary-light",full:!0,onClick:function(){t(!0)},className:"!border-primary flex justify-center gap-x-2 border",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-calendar-add",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,o.t)("add_to_calendar")})]})},f=r(453926),m=r(434519),p=function(e){var t=e.isOpen,r=e.onClose,i=e.event,a=(0,f.O)({event:i,onChange:function(){}}),s=a.addToCalendar,d=a.downloadCalendar;return(0,n.jsxs)(m.u_,{title:(0,o.t)("events.add_to_calendar.confirm_modal.title"),isOpen:!!t,onClose:r,children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{children:[(0,n.jsxs)(m.u_.Header,{className:"md:pb-4",children:[(0,n.jsx)(m.u_.Title,{size:"md",className:"text-center",children:(0,o.t)("events.add_to_calendar.confirm_modal.title")}),(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:r})})]}),(0,n.jsxs)(m.u_.Body,{children:[(0,n.jsx)("div",{className:"mb-4 text-center",children:(0,n.jsx)(c.Z.BodyMd,{color:"text-default",children:(0,o.t)("events.add_to_calendar.confirm_modal.description_1")})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(c.Z.BodyMd,{color:"text-default",children:(0,o.t)("events.add_to_calendar.confirm_modal.description_2")})})]}),(0,n.jsxs)(m.u_.Footer,{className:"space-y-2",children:[(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){d(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,o.t)("events.add_to_calendar.confirm_modal.download")]}),(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){s(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,o.t)("events.add_to_calendar.confirm_modal.resend")]})]})]})]})},b=r(125152),h=r(984367),y=r(842953),v=r(252484),g=r(260622),_=r(441342),x=r(404393),j=r(701168),w=r(840905),O=r(20056),S=r(37967),k=r(194188),N=r(521953),P=r(346681),C=r(734086),A=function(e){var t,r,i=e.event,a=e.isOpen,s=e.onClose,l=null==(t=i.recurring_setting_attributes)?void 0:t.frequency,d=null==(r=i.event_setting_attributes)?void 0:r.starts_at,f=l&&d?(0,C.i)({frequency:l,startsAt:d,firstLetterCapital:!1}):null,p=f?(0,o.t)("events.rsvp.form_rsvp_disabled.recurring_schedule",{frequency:f.frequency,time:f.time,timezone:f.timezone}):"";return(0,n.jsxs)(m.u_,{isOpen:a,onClose:s,children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{size:"md",children:[(0,n.jsx)(m.u_.Header,{className:"flex w-full !justify-end md:!pr-6 pb-0 absolute top-0 right-0 shrink-0 border-none",children:(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:s})})}),(0,n.jsxs)(m.u_.Body,{className:"flex flex-col items-center gap-4 pt-0",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(c.Z.TitleMd,{color:"text-darkest",textAlign:"text-center",children:i.name})}),p&&(0,n.jsx)(c.Z.LabelSm,{color:"text-light",children:p}),(0,n.jsx)("div",{className:"pb-8 pt-2 w-full",children:(0,n.jsx)(u.z,{disabled:!0,full:!0,large:!0,variant:"primary",className:"disabled:bg-[var(--color-background-secondary-dark)]",children:(0,n.jsx)(P.Di,{weight:"semibold",color:"text-disabled",children:(0,o.t)("events.rsvp.form_rsvp_disabled.button")})})})]})]})]})},I=function(e){var t,r=e.event,i=e.onChange,o=e.buttonText,a=(0,O.n)().hasPublicEventRsvpEnabled,s=(0,k.j)({event:r}),l=s.isRecurringRsvpOpen,u=s.openRecurringRsvpModal,d=s.onRecurringModalClose;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{type:"submit",onClick:u,children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",color:"text-link",children:o})}),a&&(null==(t=r.event_setting_attributes)?void 0:t.rsvp_disabled)?(0,n.jsx)(A,{event:r,isOpen:l,onClose:d}):a?(0,n.jsx)(N.h,{event:r,isOpen:l,onClose:d,onChange:i}):(0,n.jsx)(S.O,{event:r,show:l,onClose:d,onChange:i,eventRsvpedByDefault:!1})]})},T=r(735308),E=function(e){var t=e.event,r=t.event_setting_attributes,i=t.rsvped_event,s=t.rsvp_status,u=r||{},d=u.rsvp_limit_reached,f=u.show_rsvp_limit_warning,m=s==b._w.INVITED;return i||m||d&&(0,y.yl)(t)||!f&&!d?null:(0,n.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,n.jsx)("div",{className:"bg-tertiary flex size-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:f?"20-event-clock":"20-event-members",size:20,className:"text-dark !h-5 !w-5"})}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[f&&!(0,a.QP)(t)&&(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("div",{className:"text-left",style:{color:"#F5A607"},children:(0,o.t)("events.rsvp.rsvp_limit_warning")})}),d&&(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("div",{className:"text-left",children:(0,o.t)("events.rsvp.rsvp_limit_reached")})})]})]})},L=r(308683),D=function(e){var t=e.icon;return(0,n.jsx)("div",{className:"bg-tertiary flex size-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:t,size:20,className:"text-dark !h-5 !w-5"})})},M=function(e){var t=e.eventData,r=e.endsAt,i=e.dataTestid,a=e.rsvpedEvent,s=t.location_type,l=t.virtual_location_url,d=t.hide_location_from_non_attendees;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4 pt-4","data-testid":i,children:[(0,n.jsx)(D,{icon:"20-calendar"}),(0,n.jsx)("div",{className:"flex flex-col truncate",children:(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.details.event_finished",{time_string:(0,L.TF)(r)})})})]}),!(d&&!a)&&"virtual"===s&&l&&(0,n.jsx)(u.z,{variant:"circle",full:!0,onClick:function(){window.open(l,"_blank","noreferrer")},className:"mt-6",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-circle-button",children:(0,o.t)("events.locations.event_link")})})]})},R=r(628384),B=function(e){var t=e||{},r=t.event_setting_attributes,n=t.policies,i=r||{},o=i.starts_at,a=i.location_type,s=i.live_stream_slug,l=n||{},c=l.can_manage_post,u=l.can_update_post,d=(0,x.Gs)(o,20),f=[R.Bq.LIVE_STREAM,R.Bq.LIVE_ROOM].includes(a);return{hasLiveCreationIssue:d&&f&&!s&&c,canCreateLive:c||u}},z=r(701201),F=r(547144),U=function(e){var t=e.event,r=e.onChange,i=(0,_.wh)().currentUser,a=(0,f.O)({event:t,onChange:r}).rsvpWhileJoiningEvent,s=!!i,l=t||{},d=l.event_setting_attributes,m=l.rsvped_event,p=d||{},b=p.location_type,h=p.live_stream_slug,v=p.virtual_location_url,g=B(t)||{},x=g.hasLiveCreationIssue,j=g.canCreateLive,w=(0,z.y)(t),O=j&&(x||(0,R.oL)(t)),S=function(){s&&(m||a())},k=function(){var e=F.dE.room({roomSlug:h});(0,y.L6)(t)&&!s&&(e=F.dE.publicRoom({roomSlug:h})),window.open(e,"_blank")};return(0,n.jsx)(u.z,{variant:"primary",full:!0,onClick:function(){if(S(),"virtual"===b&&v)return void window.open(v,"_blank");O?w.mutate():k()},className:"mt-6",disabled:(0,R.mv)(t)||w.isLoading,children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",color:"text-primary",children:(0,o.t)("events.locations.join_".concat(b))})})},Z=r(204826),G=r(78456),q=function(e){var t=e.event,r=(0,_.wh)().currentCommunityMember,i=(0,G.vb)(r),a=(null==t?void 0:t.community_member_id)==(null==r?void 0:r.id),s=!i&&!a,l=i?(0,o.t)("events.locations.limit_exceeded.admin_message"):(0,o.t)("events.locations.limit_exceeded.non_admin_owner_message");return(0,n.jsxs)("div",{className:"flex flex-col",children:[i&&(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(u.z,{variant:"primary",onClick:function(){var e=(0,F.f$)();window.open(e,"_blank")},children:(0,o.t)("events.locations.limit_exceeded.upgrade")})}),(i||a)&&(0,n.jsx)(c.Z.BodySm,{children:l}),s&&(0,n.jsx)(c.Z.BodySm,{children:(0,o.t)("events.locations.limit_exceeded.member_message")})]})},V=function(e){var t=e.event,r=e.shouldDisplayJoinButton,i=e.isLiveLimitReached,a=e.handleViewLiveStreamClick,s=e.hasEventFinished,l=e.canAccessLocation,d=t||{},f=d.event_setting_attributes,m=d.rsvped_event,p=f||{},b=p.location_type,h=p.live_stream_slug,v=p.live_stream_room_setting_attributes.limit_url_sharing,g=B(t)||{},_=g.hasLiveCreationIssue,x=g.canCreateLive,j=(0,z.y)(t),w=x&&(_||(0,R.oL)(t)),O=(0,R.Mk)(t)||(0,R.jk)(t)||(0,R.S2)(t),S=!!h&&(!v||m)&&O&&(l||(0,y.L6)(t));return i?(0,n.jsx)(q,{event:t}):s||r||!(w||S)?(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.location_types.".concat(b))}):(0,n.jsxs)(n.Fragment,{children:[w&&(0,n.jsx)(u.z,{variant:"text",onClick:function(){return j.mutate()},disabled:(0,R.mv)(t)||j.isLoading||j.isSuccess,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.create_".concat(b))})}),S&&(0,n.jsx)(u.z,{variant:"text",onClick:a,children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.join_".concat(b))})})]})},W=function(e){var t=e.canAccessLocation,r=e.hasEventFinished,i=e.event,a=e.shouldDisplayJoinButton,s=e.isLiveLimitReached,l=e.shouldHideLocationFromCurrentMember,u=(i||{}).event_setting_attributes||{},d=u.location_type,f=u.in_person_location,m=u.virtual_location_url,p=u.live_stream_slug;if(l)return null;var h=!t||a||r,v=[b.Bq.LIVE_STREAM,b.Bq.LIVE_ROOM];return(0,n.jsxs)("div",{className:"pt-4","data-testid":"event-location",children:["virtual"===d&&m&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(D,{icon:"20-camera"}),h?(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.locations.virtual")}):(0,n.jsx)("a",{href:m,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(c.Z.LabelSm,{color:"text-link",weight:"semibold",children:(0,o.t)("events.locations.join_virtual_event")})})]}),"in_person"===d&&(0,n.jsxs)("div",{className:"flex flex-row items-start space-x-4",children:[(0,n.jsx)(D,{icon:"20-location"}),(0,n.jsx)(Z.I,{serializedLocation:f,variant:"text"})]}),"tbd"===d&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(D,{icon:"20-location"}),(0,n.jsx)(c.Z.LabelSm,{children:(0,o.t)("events.rsvp.tbd")})]}),v.includes(d)&&(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,n.jsx)(D,{icon:"20-camera"}),(0,n.jsx)(V,{event:i,shouldDisplayJoinButton:a,isLiveLimitReached:s,handleViewLiveStreamClick:function(){var e=F.dE.room({roomSlug:p});(0,y.L6)(i)&&!t&&(e=F.dE.publicRoom({roomSlug:p})),window.open(e,"_blank")},hasEventFinished:r,canAccessLocation:t})]})]})},H=r(844196),Q=r(952723),K=r(285122),J=r(943945),$=function(e){var t=e.eventData,r=t.starts_at,i=t.ends_at,a=t.time_zone_abbreviations,s=t.start_date,l=t.time_zone,u=(0,J.UZ)(s),d=(0,J.UZ)(i),f=(0,Q.N)(r,l),m=f.dayOfMonth,p=f.shortMonthString,b=(0,Q.N)(i,l),h=b.dayOfMonth,y=b.shortMonthString,v=m===h,g="".concat(u,", ").concat(p," ").concat(m),_="".concat(d,", ").concat(y," ").concat(h);return(0,n.jsxs)("div",{className:"flex flex-row items-center space-x-6",children:[(0,n.jsx)(H.m,{dateString:r,timeZone:l}),v?(0,n.jsxs)("div",{"data-testid":"event-date",children:[(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:g})}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:"".concat((0,K.Dk)(r,l)," - ").concat((0,K.Dk)(i,l)," ").concat(a)})})]}):(0,n.jsxs)("div",{"data-testid":"event-date",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)(c.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,o.t)("events.timestamp.from")," ",g]}),(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,K.Dk)(r,l)," ",a]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(c.Z.LabelSm,{weight:"semibold",as:"div",children:[(0,o.t)("events.timestamp.to")," ",_]}),(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,K.Dk)(i,l)," ",a]})]})]})]})},X=function(e){var t=e.rsvpStatus,r=e.ticketData,i=(e.event.event_setting_attributes||{}).rsvp_limit_reached,a="yes"==t,s=t&&!r.invited;return(0,n.jsxs)("div",{className:"mb-6 flex flex-row items-center space-x-4",children:[(0,n.jsx)("div",{className:"bg-tertiary flex size-10 flex-none items-center justify-center rounded-lg",children:(0,n.jsx)(l.JO,{type:"20-event-ticket",size:20,className:"text-dark !h-5 !w-5"})}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-1 align-middle",children:[i&&!a&&(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("events.rsvp.sold_out")}),(!i||a)&&(0,n.jsx)(c.Z.LabelSm,{children:r.price_with_code}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-dark-primary-button size-1 rounded-full sm:block"}),(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,o.t)("events.rsvp.purchased")})]})]})]})},Y=r(266706);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et=function(e){var t,r=e.onChange,l=e.shouldDisplayRsvpAction,u=(0,O.n)().hasPublicEventRsvpEnabled,f=(0,_.Zh)(),m=f.record,P=f.isUsedInMinimalTipTapViewModal,C=(0,_.wh)().currentCommunityMember,A=(0,Y.O)().currentContact,L=m||{},R=L.event_type,B=L.event_setting_attributes,z=L.recurring_setting_attributes,F=L.upcoming_occurrences_count,Z=L.rsvped_event,G=L.rsvp_status,q=L.paywall_attributes,V=!!(A&&Z),H=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Q=H[0],K=H[1],J=z||{},et=J.frequency,er=J.event_start_date,en=(0,k.j)({event:m}),ei=en.isRecurringRsvpOpen,eo=en.openRecurringRsvpModal,ea=en.onRecurringModalClose,es=(0,s.C)(),el=(0,v.IO)(),ec=el.isMonthlyHourLimitReached,eu=el.isStorageLimitReached,ed=B||{},ef=ed.ends_at,em=ed.hide_location_from_non_attendees,ep=ed.live_stream_room_setting_attributes,eb=(0,h.O)({startsAt:er,frequency:et}).label;if(!B)return(0,n.jsx)(w.gi,{variant:"right-sidebar"});var eh=!!ef&&(0,x.aA)(ef),ey=R===b.E_.RECURRING,ev=m.rsvped_event,eg=ec||(null==ep?void 0:ep.recording_enabled)&&eu,e_=em&&!Z,ex=!!C||V||(0,y.L6)(m),ej=ex&&(0,a.JK)(m)&&(0,a.cf)(m)&&!eg&&!eh&&!e_,ew=!eh&&Z;return(0,n.jsx)(g.T,{children:(0,n.jsxs)("div",{className:(0,j.A)("border-primary bg-primary w-full rounded-2xl border p-6",{"my-5":P}),children:[(0,n.jsxs)("div",{className:"rsvp-section",children:[(0,n.jsx)("div",{className:"border-primary border-b pb-4 last:border-b-0 last:pb-0",children:(0,n.jsx)($,{eventData:B})}),(0,n.jsx)(W,{event:m,hasEventFinished:eh,shouldDisplayJoinButton:ej,isLiveLimitReached:eg,shouldHideLocationFromCurrentMember:e_,canAccessLocation:ex}),ey&&F>0&&(0,n.jsxs)("div",{className:"mt-4 flex flex-row items-center space-x-4",children:[(0,n.jsx)(D,{icon:"20-calendar-recurring"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:eb})}),!(0,y.yl)(m)&&(0,n.jsx)(I,{event:m,onChange:r,buttonText:(0,o.t)("events.rsvp.show_all_events")})]})]}),eh&&(0,n.jsx)(M,{eventData:B,rsvpedEvent:Z,endsAt:ef,dataTestid:"event-finished"}),!ej&&(l||ew)&&(0,n.jsxs)("div",{className:(0,j.A)({"mt-6":l}),children:[l&&(0,n.jsxs)(n.Fragment,{children:[(0,y.yl)(m)&&(0,n.jsx)(X,{rsvpStatus:G,ticketData:q,event:m}),(0,n.jsx)(E,{event:m}),(0,n.jsx)(T.w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},{event:m,onChange:r,full:!0,detailsPage:!0,toggleRecurringRsvp:ey?ev?function(){es.show({event:m,onChange:r})}:eo:function(){}}))]}),ew&&(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(d,{setShouldShowAddToCalendarModal:K})})]}),ej&&(0,n.jsx)(U,{event:m,onChange:r})]}),u?(0,n.jsx)(N.h,{event:m,isOpen:ei,onClose:ea,onChange:r}):(0,n.jsx)(S.O,{event:m,show:ei,onClose:ea,onChange:r}),(0,n.jsx)(p,{event:m,isOpen:Q,onClose:function(){return K(!1)}})]})})}},437230:function(e,t,r){"use strict";r.d(t,{s:()=>l});var n=r(552676),i=r(125152),o=r(117617),a=r(957363),s=r(381636),l=function(e){var t=e.type,r=(0,o.ef)();return(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[!r&&(0,n.jsx)(a.JO,{type:t===i.Bq.IN_PERSON||t===i.Bq.TBD?"16-location":"16-camera",size:16,className:"text-default !w-4"}),(0,n.jsx)(s.Z.LabelXs,{children:i.gP[t]})]})}},844196:function(e,t,r){"use strict";r.d(t,{m:()=>o});var n=r(552676),i=r(952723),o=function(e){var t=e.dateString,r=e.timeZone,o=(0,i.N)(t,r),a=o.dayOfMonth,s=o.shortMonthString;return(0,n.jsxs)("div",{className:"bg-tertiary flex h-[70px] w-[56px] cursor-default flex-col items-center justify-center rounded-md py-1.5",children:[(0,n.jsx)("div",{className:"text-dark mb-0.5 text-center text-xl font-bold leading-6",children:a}),(0,n.jsx)("div",{className:"text-dark text-center font-medium uppercase leading-4",style:{fontSize:"11px"},children:s})]})}},621001:function(e,t,r){"use strict";r.d(t,{J:()=>o});var n=r(552676),i=r(957363),o=function(e){var t=e.type;return"single"===(void 0===t?"single":t)?(0,n.jsx)(i.JO,{size:16,type:"16-calendar",className:"text-default -mt-1 !w-4"}):(0,n.jsx)(i.JO,{size:16,type:"16-calendar-recurring",className:"text-default -mt-0.5 !w-4"})}},263029:function(e,t,r){"use strict";r.d(t,{HV:()=>c,JK:()=>l,QP:()=>s,cf:()=>a});var n=r(125152),i=r(404393),o=function(e,t){var r=new Date,n=new Date(e);return Math.abs(r.getTime()-n.getTime())/6e4<=t},a=function(e){var t=((e||{}).event_setting_attributes||{}).starts_at;return o(t,10)||(0,i.aA)(t)},s=function(e){var t=((e||{}).event_setting_attributes||{}).ends_at;return(0,i.aA)(t)},l=function(e){var t=((e||{}).event_setting_attributes||{}).location_type;return t!==n.Bq.IN_PERSON&&t!==n.Bq.TBD},c=function(e){var t=e||{},r=t.event_setting_attributes,n=t.invited_attendee,i=(r||{}).rsvp_disabled;return!i||i&&n}},818162:function(e,t,r){"use strict";r.d(t,{c:()=>h});var n=r(552676),i=r(739792),o=r(453926),a=r(842953),s=r(856812),l=r(957363),c=r(434519),u=r(39905),d=r(381636),f=r(952723),m=r(285122),p=function(e){var t=(e.event||{}).event_setting_attributes||{},r=t.starts_at,i=t.ends_at,o=t.time_zone,a=(0,f.N)(r,o),s=a.dayOfMonth,c=a.shortMonthString,u=(0,m.Dk)(r,o),p=(0,m.Dk)(i,o);return(0,n.jsx)("div",{className:"bg-tertiary flex w-fit items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:"flex px-4 py-2",children:[(0,n.jsx)(l.JO,{type:"16-calendar",className:"text-default mr-2 h-4 !w-4 font-medium",size:16}),(0,n.jsx)(d.Z.LabelSm,{weight:"medium",color:"text-default",children:"".concat(s," ").concat(c,", ").concat(u," - ").concat(p)})]})})},b=function(e){var t=e.recurringEvent||{},r=t.starts_at,i=t.ends_at,o=t.time_zone,a=(0,f.N)(r,o),s=a.dayOfMonth,c=a.shortMonthString,u=(0,m.Dk)(r,o),p=(0,m.Dk)(i,o);return(0,n.jsx)("div",{className:"bg-tertiary flex w-fit items-center justify-center rounded-md",children:(0,n.jsxs)("div",{className:"flex px-4 py-2",children:[(0,n.jsx)(l.JO,{type:"16-calendar",className:"text-default mr-2 h-4 !w-4 font-medium",size:16}),(0,n.jsx)(d.Z.LabelSm,{weight:"medium",color:"text-default",children:"".concat(s," ").concat(c,", ").concat(u," - ").concat(p)})]})})},h=function(e){var t=e.event,r=e.events,f=e.show,m=e.onClose,h=e.shouldShowConfirmationDate,y=void 0===h||h,v=e.isRecurring,g=t||{},_=g.name,x=g.event_setting_attributes||{},j=x.confirmation_message_title,w=x.confirmation_message_description,O=x.confirmation_message_button_title,S=x.confirmation_message_button_link,k=x.enable_custom_thank_you_message,N=x.send_email_confirmation,P=!(0,a.yl)(t)&&void 0!==v&&v,C=(0,o.O)({event:t,onChange:function(){}}),A=C.addToCalendar,I=C.downloadCalendar;return(0,n.jsxs)(c.u_,{isOpen:!!f,onClose:m,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{children:[(0,n.jsx)(c.u_.Header,{className:"flex w-full !justify-end pb-0 md:!pb-0",children:(0,n.jsx)(c.u_.HeaderActions,{children:(0,n.jsx)(c.u_.CloseButton,{onClick:m})})}),(0,n.jsxs)(c.u_.Body,{className:"mb-6 !overflow-visible pt-0",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("h2",{className:"mb-4 mt-0",children:(0,i.t)("events.notifications.event_setting_attributes.clap")}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.TitleSm,{weight:"bold",color:"text-default",children:k?j:(0,i.t)("events.notifications.event_setting_attributes.thank_you_message")})}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(d.Z.TitleMd,{color:"text-darkest",children:_})}),y&&!P&&(0,n.jsx)(p,{event:t}),y&&P&&(void 0===r?[]:r).map(function(e,t){return(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(b,{recurringEvent:e})},e.id||t)}),k&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)(d.Z.BodyMd,{color:"text-light",children:w})})})]}),k&&(0,n.jsx)(u.z,{variant:"primary",full:!0,onClick:function(){S&&(0,s.Y)(S),m()},large:!0,children:O||(0,i.t)("events.notifications.event_setting_attributes.confirmation_message_button_title_placeholder")}),(0,n.jsx)("div",{className:"flex flex-col gap-3 pt-6 text-center",children:N?(0,n.jsx)(d.Z.BodyMd,{color:"text-light",children:(0,i.t)("events.notifications.event_setting_attributes.calendar_invite_message")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){I(),m()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.download")]}),(0,n.jsxs)(u.z,{variant:"secondary",full:!0,large:!0,onClick:function(){A(),m()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(l.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.send")]})]})})]})]})]})}},194188:function(e,t,r){"use strict";r.d(t,{j:()=>v});var n=r(275271),i=r(932699),o=r(131906),a=r(788004),s=r(901908),l=r(694728),c=r(441342),u=r(816040);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.currentUser,r=e.canUsersSignUp,n=e.userSignUpUrl;return!t&&(window.location.href=(0,a.U)(r,null!=n?n:"",!0),!0)},v=function(e){var t=e.event,r=e.onClose,a=void 0===r?i.noop:r,d=e.onChange,v=void 0===d?i.noop:d,g=e.eventRsvpedByDefault,_=void 0===g||g,x=h((0,n.useState)(!1),2),j=x[0],w=x[1],O=h((0,n.useState)({}),2),S=O[0],k=O[1],N=h((0,n.useState)(0),2),P=N[0],C=N[1],A=(0,o.useQueryClient)(),I=(0,c.xJ)(),T=(0,l.S)(t)?"host":"participant",E=(0,u.K)({event:t}),L=E.isLoading,D=E.events,M=E.fetchEvents,R=E.onRecurringRsvpSubmit,B=(0,s.i)(),z=B.canUsersSignUp,F=B.userSignUpUrl,U=function(){A.invalidateQueries({queryKey:["posts"]})};return(0,n.useEffect)(function(){if(D){var e={};D.forEach(function(r){e["".concat(r.id)]=!!_&&r.id===t.id||r.rsvped_event}),k(e)}},[D]),(0,n.useEffect)(function(){S&&C(Object.values(S).filter(function(e){return e}).length)},[S]),{isLoading:L,events:D.filter(function(e){return!e.rsvp_limit_reached}),eventsState:S,isRecurringRsvpOpen:j,eventsSelectedCount:P,fetchEvents:M,onSubmit:function(){var e;return(e=function(){var e,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:var i,o;return i=e=Object.entries(S).filter(function(e){return h(e,2)[1]}).map(function(e){return h(e,1)[0]}),o=t.id,r=i.find(function(e){return Number(e)===o}),[4,R({eventIds:e,role:T})];case 1:return n.sent(),v(b(p({},t),{rsvped_event:!!r})),U(),a(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()},onCheckboxChange:function(e){var t=e.name,r=e.value;k(function(e){return b(p({},e),m({},t,r))})},onSelectAllClickHandler:function(){k(function(e){var t={},r=Object.entries(e),n=r.every(function(e){return e[1]}),i=!0,o=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)t[h(s.value,1)[0]]=!n}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t})},openRecurringRsvpModal:function(){y({currentUser:I,canUsersSignUp:z,userSignUpUrl:F})||w(function(e){return!e})},onRecurringModalClose:function(){w(!1)}}}},37967:function(e,t,r){"use strict";r.d(t,{O:()=>_});var n=r(552676),i=r(275271),o=r(932699),a=r(739792),s=r(842953),l=r(381636),c=r(285122),u=r(701168),d=r(984208),f=r(767900),m=r(751169),p=r(984367),b=r(818162),h=r(193301),y=r(71367),v=function(e){var t=e.id,r=e.name,i=e.date,o=e.time,a=e.value,s=e.onChange;return(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"m-0 flex items-center justify-between pr-1",htmlFor:t,children:[(0,n.jsxs)("div",{className:"leading-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:i})}),(0,n.jsx)("div",{className:"text-secondary",children:(0,n.jsx)(l.Z.LabelXs,{children:o})})]}),(0,n.jsx)(y.X,{id:t,name:r,isFormItem:!1,checked:a,onChange:function(e){return s({name:r,value:e.target.checked})},option:{value:"",label:""}})]})})},g=r(194188),_=function(e){var t=e.event,r=e.eventRsvpedByDefault,y=e.onChange,_=e.onClose,x=e.show,j=void 0!==x&&x,w="events.rsvp.recurring_modal",O=(0,g.j)({event:t,onClose:_,onChange:y,eventRsvpedByDefault:void 0!==r&&r}),S=O.isLoading,k=O.events,N=O.eventsState,P=O.eventsSelectedCount,C=O.fetchEvents,A=O.onSubmit,I=O.onCheckboxChange,T=O.onSelectAllClickHandler,E=(0,h.q)(t),L=E.shouldShowConfirmation,D=E.setShouldShowConfirmation;(0,i.useEffect)(function(){j&&C()},[j]);var M=t||{},R=M.event_setting_attributes,B=M.recurring_setting_attributes,z=R||{},F=z.starts_at,U=z.time_zone_abbreviations,Z=z.time_zone,G=B||{},q=G.frequency,V=G.event_start_date,W=(0,p.O)({startsAt:V,frequency:q,firstLetterCapital:!1}).label,H="".concat((0,c.Dk)(F,Z)," ").concat(U,"."),Q=k.filter(function(e){var t;return null!=(t=null==N?void 0:N[e.id])&&t});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.W,{size:"md",title:t.name,actionText:(0,a.t)("".concat(w,".confirm_attendance")),actionVariant:"primary",isOpen:!!j,onClose:function(){_()},onAction:function(){A(),D(!0)},disabled:S||0===P,children:[(0,n.jsxs)("div",{className:"mt-2.5 text-center text-gray-500",children:[(0,n.jsxs)(l.Z.BodyMd,{children:[(0,a.t)("".concat(w,".description_line_1"))," ",W," ",(0,a.t)("".concat(w,".at"))," ",H]}),(0,n.jsx)(l.Z.BodyMd,{children:(0,a.t)("".concat(w,".description_line_2"))})]}),S&&(0,n.jsx)(m.a,{}),N&&!S&&(0,n.jsxs)(f.l,{defaultValues:N,onSubmit:o.noop,children:[(0,n.jsxs)("div",{className:"mt-7 flex items-center justify-between text-gray-500",children:[(0,n.jsxs)(l.Z.LabelSm,{weight:"medium",children:[null==k?void 0:k.length," ",(0,a.t)("".concat(w,".events"))]}),(0,n.jsx)("button",{type:"button",className:"text-circle",onClick:T,children:(0,n.jsx)(l.Z.LabelSm,{weight:"medium",children:(0,a.t)("".concat(w,".select_all"))})})]}),(0,n.jsx)("div",{className:"mt-4 overflow-auto md:max-h-80",children:(0,n.jsx)("ul",{className:(0,u.A)("flex list-none flex-col gap-4",{"pr-4":(null==k?void 0:k.length)>6}),children:k.map(function(e){var t=e.id,r=e.starts_at,i=e.start_date,o=e.ends_at,a=e.time_zone,s=e.time_zone_abbreviations;return(0,n.jsx)(v,{id:"".concat(t),name:"".concat(t),date:i,time:"".concat((0,c.Dk)(r,a)," - ").concat((0,c.Dk)(o,a)," ").concat(s),value:N["".concat(t)],onChange:I},t)})})})]})]}),!(0,s.yl)(t)&&(0,n.jsx)(b.c,{event:t,events:Q,shouldShowConfirmationDate:!0,isRecurring:!0,show:L,onClose:function(){D(!1)}})]})}},735308:function(e,t,r){"use strict";r.d(t,{w:()=>G});var n=r(552676),i=r(842953),o=r(260622),a=r(125152),s=r(818162),l=r(521953),c=r(275271),u=r(407185),d=r(767900),f=r(739792),m=r(381636),p=r(441342),b=r(39905),h=r(131906),y=r(251630),v=r(60878),g=r(547144),_=function(){var e=g.$T.signIn({params:{post_login_redirect:window.location.href}});return(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,n.jsx)(m.Z.BodySm,{children:(0,f.t)("events.rsvp_modal.already_a_member")}),(0,n.jsx)("a",{className:"text-sm",href:e,children:(0,f.t)("events.rsvp_modal.log_in")})]})},x=r(957363),j=/[\w.+-]{1,64}@[\w-]{1,253}\.[\w.-]{2,63}/,w=function(e){var t=e.event,r=e.onSuccess,i=(0,p.wh)().currentCommunity,o=(0,v.pm)(),a=(0,h.useMutation)(function(e){return y.S1.rsvpAsGuest({event:t,formData:e})},{onSuccess:r,onError:function(e){o.error(e.message)}}),s=a.mutateAsync,l=a.isLoading;return(0,n.jsxs)("div",{className:"flex flex-col gap-4 h-full",children:[(0,n.jsx)(m.Z.LabelLg,{weight:"bold",children:(0,f.t)("events.rsvp_modal.enter_details")}),(0,n.jsx)(d.l,{method:"POST",onSubmit:function(e){s(e)},className:"h-full",formClassName:"h-full",children:function(e){var t=e.formState.isValid;return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(d.l.Item,{name:"email",hideDescription:!0,translationRoot:"events.rsvp_modal",rules:{required:(0,f.t)("events.rsvp_modal.email_required_error"),pattern:{value:j,message:(0,f.t)("events.rsvp_modal.email_invalid_error")}},hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(d.l.Input,{})}),(0,n.jsx)(d.l.Item,{name:"name",hideDescription:!0,translationRoot:"events.rsvp_modal",rules:{required:(0,f.t)("events.rsvp_modal.name_required_error"),maxLength:255},hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(d.l.Input,{})}),(0,n.jsx)(d.l.Item,{name:"subscribed_to_marketing_emails",hideDescription:!0,hideBorder:!0,className:"!p-0",hideLabel:!0,children:(0,n.jsx)(d.l.Checkbox,{name:"subscribed_to_marketing_emails",label:(0,f.t)("events.rsvp_modal.subscribed_to_marketing_emails",{community_name:null==i?void 0:i.name})})})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsxs)(b.z,{variant:"primary",type:"submit",full:!0,extraLarge:!0,disabled:!t||l,className:"flex items-center justify-center gap-2",children:[l&&(0,n.jsx)(x.JO,{type:"loader",viewBox:"0 0 16 16",size:16,className:"animate-spin"}),(0,f.t)("events.rsvp_modal.submit")]})})]})}}),(0,n.jsx)(_,{})]})},O=r(717702);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r=e.event,i=e.isOpen,o=e.onClose,a=(t=(0,c.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1];return(0,n.jsx)(u.m,{event:r,isOpen:i,onClose:o,bodyClassName:"grow relative",animate:s,children:s?(0,n.jsx)(O.f,{event:r,onClose:o}):(0,n.jsx)(w,{event:r,onSuccess:function(){return l(!0)}})})},N=r(434519),P=function(e){var t=e.isOpen,r=e.onClose,i=e.toggleRsvp;return(0,n.jsxs)(N.u_,{title:(0,f.t)("events.rsvp.unrsvp_modal.title"),isOpen:!!t,onClose:r,children:[(0,n.jsx)(N.u_.Overlay,{}),(0,n.jsxs)(N.u_.Content,{children:[(0,n.jsxs)(N.u_.Header,{children:[(0,n.jsx)(N.u_.Title,{size:"md",className:"text-center",children:(0,f.t)("events.rsvp.unrsvp_modal.title")}),(0,n.jsx)(N.u_.HeaderActions,{children:(0,n.jsx)(N.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(N.u_.Body,{children:(0,n.jsx)("div",{className:"px-6 pb-4 pt-5 text-center",children:(0,n.jsx)(m.Z.BodyMd,{size:"text-sm",children:(0,f.t)("events.rsvp.unrsvp_modal.description")})})}),(0,n.jsxs)(N.u_.Footer,{className:"space-y-2",children:[(0,n.jsx)(b.z,{variant:"circle",full:!0,large:!0,onClick:function(){i(),r()},className:"h-10",children:(0,f.t)("events.rsvp.unrsvp_modal.confirm_button")}),(0,n.jsx)(b.z,{variant:"secondary",full:!0,large:!0,onClick:r,className:"h-10",children:(0,f.t)("events.rsvp.unrsvp_modal.decline_button")})]})]})]})},C=r(453926),A=r(701168);let I=r.p+"static/react/components/Events/Rsvp/RsvpAction/RsvpIcons/img/attending-9ccdd13464642845.svg";var T=function(){return(0,n.jsx)("img",{loading:"lazy",src:I,alt:(0,f.t)("events.rsvp.attending")})},E=function(e){var t=e.isConfirmed,r=e.full,i=e.toggleRsvp,o=e.declineInvite,s=e.rsvpStatus,l=e.isLoading,c=e.paidEvent,u=e.variant,d=void 0===u?"primary":u,m=e.isRsvpDisabled,p=e.detailsPage,h=s===a._w.INVITED;return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)("div",{className:(0,A.A)("flex gap-x-2 gap-y-3",{"flex-wrap":void 0!==p&&p}),children:[(0,n.jsx)(b.z,{variant:"primary",full:r,onClick:i,disabled:l,className:"min-w-fit whitespace-nowrap !rounded-full !font-semibold",children:(0,f.t)("events.rsvp.invite.accept")}),(0,n.jsx)(b.z,{variant:"secondary",full:r,onClick:o,disabled:l,className:(0,A.A)("!ml-0 !rounded-full !font-semibold",{"!border-primary":"secondary"===d}),children:(0,f.t)("events.rsvp.invite.decline")})]}),!t&&!h&&(0,n.jsx)(b.z,{variant:d,full:r,onClick:i,disabled:l||void 0!==m&&m,className:(0,A.A)("!font-semibold",{"!border-primary":"secondary"===d}),children:c?(0,f.t)("events.rsvp.buy_ticket"):(0,f.t)("events.rsvp.rsvp")}),t&&(0,n.jsx)(T,{})]})},L=r(153845),D=r(598222),M=r(816209),R=r(912655),B=function(e){var t=e.label,r=e.renderIcon;return(0,n.jsxs)("div",{className:"rsvp-radio__button__label",children:[r,(0,n.jsx)("span",{className:"button-text !text-dark",children:t})]})},z=function(e){var t=e.renderIcon,r=e.label,i=e.value,o=e.disabled,a=e.onClick;return(0,n.jsx)(L.v.Item,{disabled:o,children:function(e){return(0,n.jsxs)("button",{type:"submit",className:(0,A.A)("rsvp-radio__list__option",{"rsvp-radio__list__option--active":e,"rsvp-radio__list__option--disabled":o}),onClick:a,children:[(0,n.jsxs)("div",{className:"rsvp-radio__list__option__label",children:[t,(0,n.jsx)("span",{className:"label-text",children:r})]}),(0,n.jsx)("input",{type:"radio",checked:i,readOnly:!0})]})}},"rsvp-attending")},F=function(e){var t=e.isConfirmed,r=e.full,i=e.toggleRsvp,o=e.isLoading,a=e.setShouldShowUnrsvpConfirmation,s=e.showUnrsvpPopup,l=(0,f.t)("events.rsvp.attending"),u=(0,f.t)("events.rsvp.not_attending"),d=function(e){e!==t&&(!e&&s?a(!0):i())};return(0,n.jsx)("div",{className:(0,A.A)("rsvp-radio",{"rsvp-radio--full":r}),children:(0,n.jsx)(L.v,{children:function(e){var r,i,a=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(L.v.Button,{className:(0,A.A)("rsvp-radio__button !border-primary !rounded-full",{"rsvp-radio__button--open":a}),children:[t?(0,n.jsx)(B,{label:l,renderIcon:(0,n.jsx)(T,{})}):(0,n.jsx)(B,{label:u}),(0,n.jsx)("span",{className:"button-icon-container",children:(0,n.jsx)(M.Z,{className:"button-icon","aria-hidden":"true"})})]}),(0,n.jsx)(D.u,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:c.Fragment,show:a},R.SP),i=i={children:(0,n.jsxs)(L.v.Items,{static:!0,className:"rsvp-radio__list",children:[(0,n.jsx)(z,{label:l,value:t,disabled:o,onClick:function(){return d(!0)}},"rsvp-attending"),(0,n.jsx)(z,{label:u,value:!t,disabled:o,onClick:function(){return d(!1)}},"rsvp-not-attending")]})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))]})}})})},U=r(20056);function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var G=function(e){var t,r,c=e.event,u=e.onChange,d=e.toggleRecurringRsvp,f=e.full,m=e.variant,p=e.detailsPage,b=(0,C.O)({event:c,onChange:u}),h=b.toggleRsvp,y=b.declineInvite,v=b.isLoading,g=b.shouldShowConfirmation,_=b.dismissConfirmation,x=b.dismissUnrsvpConfirmation,j=b.hasEventEnded,w=b.isConfirmed,O=b.rsvpStatus,S=b.setShouldShowUnrsvpConfirmation,N=b.shouldShowUnrsvpConfirmation,A=b.shouldShowGuestRsvpForm,I=b.setShouldShowGuestRsvpForm,T=(0,U.n)().hasPublicEventRsvpEnabled,L=c.event_type,D=c.invited_attendee,M=L===a.E_.RECURRING,R=c||{},B=R.event_setting_attributes,z=R.paywall_attributes,G=(B||{}).rsvp_limit_reached,q=M&&!(0,i.yl)(c),V=O===a._w.INVITED,W=q&&!D,H={isConfirmed:w,rsvpStatus:O,full:f,toggleRsvp:W?d:h,declineInvite:y,isLoading:v,paidEvent:(0,i.yl)(c),setShouldShowUnrsvpConfirmation:S,showUnrsvpPopup:(0,i.yl)(c)&&!(null==z?void 0:z.invited)};if(j)return null;var Q=!O||V,K=w&&(!M||!W);return(0,n.jsxs)(o.T,{children:[Q?(0,n.jsx)(E,(t=Z({},H),r=r={variant:void 0===m?"primary":m,isRsvpDisabled:G,detailsPage:void 0!==p&&p},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):(0,n.jsx)(F,Z({},H)),w&&(0,i.yl)(c)&&(0,n.jsx)(P,{isOpen:N,onClose:x,toggleRsvp:h}),K&&(T?(0,n.jsx)(l.h,{event:c,isOpen:g,onClose:_}):(0,n.jsx)(s.c,{event:c,show:g,onClose:_})),A&&(0,n.jsx)(k,{event:c,isOpen:A,onClose:function(){return I(!1)}})]})}},264540:function(e,t,r){"use strict";r.d(t,{Y:()=>s,h:()=>l});var n=r(552676),i=r(275271);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,i.createContext)(void 0);a.displayName="EventsContext";var s=function(e){var t,r=e.children,s=(t=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1],u=(0,i.useMemo)(function(){return{selectedRecurringEvents:l,setSelectedRecurringEvents:c}},[l]);return(0,n.jsx)(a.Provider,{value:u,children:r})},l=function(){var e=(0,i.useContext)(a);if(void 0===e)throw Error("useEvents must be used within an EventsProvider");return e}},521953:function(e,t,r){"use strict";r.d(t,{h:()=>N});var n=r(552676),i=r(407185),o=r(717702),a=r(275271),s=r(739792),l=r(381636),c=r(285122),u=r(701168),d=r(767900),f=r(751169),m=r(71367),p=function(e){var t=e.id,r=e.name,i=e.date,o=e.time,a=e.value,s=e.onChange;return(0,n.jsx)("li",{children:(0,n.jsxs)("label",{className:"m-0 flex items-center justify-between pr-1 py-2",htmlFor:t,children:[(0,n.jsxs)("div",{className:"leading-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:i})}),(0,n.jsx)("div",{className:"text-light",children:(0,n.jsx)(l.Z.LabelXs,{children:o})})]}),(0,n.jsx)(m.X,{id:t,name:r,isFormItem:!1,checked:a,onChange:function(e){return s({name:r,value:e.target.checked})},option:{value:"",label:""}})]})})},b=r(194188),h=r(39905),y=r(957363),v=r(932699),g=r(264540),_=r(432050),x=function(e){var t=e.title,r=e.description,i=e.className,o=e.children;return(0,n.jsx)(_.b,{type:"info",title:void 0===t?"":t,description:void 0===r?"":r,icon:(0,n.jsx)(y.JO,{type:"16-info",size:16,className:"mt-1 !self-start text-blue-600"}),className:"text-default rounded-xl !border-none bg-[#3B82F6]/10 [&_span]:!text-sm ".concat(void 0===i?"":i),children:o})},j=r(404393);function w(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var O=function(e){var t=e.event,r=e.eventRsvpedByDefault,i=e.onChange,o=void 0===i?v.noop:i,m="events.rsvp.recurring_modal",_=(0,g.h)().setSelectedRecurringEvents,O=(0,b.j)({event:t,eventRsvpedByDefault:void 0!==r&&r,onChange:o}),S=O.isLoading,k=O.events,N=O.eventsState,P=O.fetchEvents,C=O.onSubmit,A=O.onCheckboxChange,I=O.onSelectAllClickHandler,T=k.filter(function(e){var t;return null!=(t=null==N?void 0:N[e.id])&&t}),E=(0,a.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return _(k.filter(function(e){var t;return null!=(t=null==N?void 0:N[e.id])&&t})),[4,C()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)})})()},[k,N,_,C]);(0,a.useEffect)(function(){P()},[P]);var L=T.length>0;return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(l.Z.TitleSm,{weight:"bold",children:(0,s.t)("".concat(m,".form_title"))}),(0,n.jsx)(x,{children:(0,n.jsx)(l.Z.BodySm,{children:(0,s.t)("".concat(m,".form_description"))})})]}),S&&(0,n.jsx)(f.a,{}),N&&!S&&(0,n.jsxs)(d.l,{defaultValues:N,onSubmit:E,formClassName:"flex flex-col flex-1",className:"flex flex-col flex-1",children:[(0,n.jsxs)("div",{className:"mt-2.5 py-2.5 flex items-center justify-between text-light border-b border-primary",children:[(0,n.jsxs)(l.Z.LabelSm,{weight:"medium",children:[null==k?void 0:k.length," ",(0,s.t)("".concat(m,".events"))]}),(0,n.jsx)("button",{type:"button",className:"text-brand",onClick:I,children:(0,n.jsx)(l.Z.LabelSm,{weight:"medium",color:"text-brand",children:(0,s.t)("".concat(m,".select_all"))})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-auto md:max-h-80",children:(0,n.jsx)("ul",{className:(0,u.A)("flex list-none flex-col",{"pr-4":(null==k?void 0:k.length)>6}),children:k.map(function(e){var t=e.id,r=e.starts_at,i=e.start_date,o=e.ends_at,a=e.time_zone,s=e.time_zone_abbreviations;return(0,n.jsx)(p,{id:"".concat(t),name:"".concat(t),date:i,time:"".concat((0,c.Dk)(r,a)," - ").concat((0,c.Dk)(o,a)," ").concat((0,j.ED)(s,new Date(r))),value:N["".concat(t)],onChange:A},t)})})}),(0,n.jsxs)(h.z,{variant:"primary",type:"submit",full:!0,large:!0,disabled:!L||S,className:"flex items-center justify-center gap-2 mt-5",children:[S&&(0,n.jsx)(y.JO,{type:"loader",viewBox:"0 0 16 16",size:16,className:"animate-spin"}),(0,s.t)("".concat(m,".form_submit_button"))]})]})]})},S=r(842953);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var N=function(e){var t,r=e.event,s=e.isOpen,l=e.onClose,c=void 0===l?v.noop:l,u=e.onChange,d=void 0===u?v.noop:u,f=(t=(0,a.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return k(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1],b=(0,S.f0)(r)&&!m&&!(0,S.yl)(r);return(0,n.jsx)(g.Y,{children:(0,n.jsx)(i.m,{event:r,isOpen:s,onClose:c,bodyClassName:"grow relative",animate:m,children:b?(0,n.jsx)(O,{event:r,onChange:function(e){d(e),p(!0)}}):(0,n.jsx)(o.f,{event:r,onClose:c})})})}},717702:function(e,t,r){"use strict";r.d(t,{f:()=>u});var n=r(552676),i=r(739792),o=r(453926),a=r(856812),s=r(957363),l=r(39905),c=r(381636),u=function(e){var t=e.event,r=e.onClose,u=(t||{}).event_setting_attributes||{},d=u.confirmation_message_title,f=u.confirmation_message_description,m=u.confirmation_message_button_title,p=u.confirmation_message_button_link,b=u.enable_custom_thank_you_message,h=u.send_email_confirmation,y=(0,o.O)({event:t,onChange:function(){}}),v=y.addToCalendar,g=y.downloadCalendar;return(0,n.jsxs)("div",{className:"flex flex-col items-center text-center h-full justify-center",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center text-center gap-3 justify-center p-4",children:[(0,n.jsx)(s.JO,{type:"32-checkmark-circle",size:32,className:"!w-8"}),(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:b?d:(0,i.t)("events.notifications.event_setting_attributes.thank_you_message")}),b&&(0,n.jsx)(c.Z.BodySm,{color:"text-primary",children:f}),h&&(0,n.jsx)(c.Z.BodySm,{color:"text-default",children:(0,i.t)("events.notifications.event_setting_attributes.calendar_invite_message")})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[b&&(0,n.jsx)(l.z,{variant:"primary",full:!0,onClick:function(){p&&(0,a.Y)(p),r()},large:!0,children:m||(0,i.t)("events.notifications.event_setting_attributes.confirmation_message_button_title_placeholder")}),!h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.z,{variant:"secondary",full:!0,large:!0,onClick:function(){g(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(s.JO,{type:"16-download",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.download")]}),(0,n.jsxs)(l.z,{variant:"secondary",full:!0,large:!0,onClick:function(){v(),r()},className:"flex justify-center gap-x-2",isFullRounded:!0,children:[(0,n.jsx)(s.JO,{type:"16-refresh",size:16,className:"h-4 !w-4",useWithFillCurrentColor:!0}),(0,i.t)("events.add_to_calendar.confirm_modal.send")]})]})]})]})}},407185:function(e,t,r){"use strict";r.d(t,{m:()=>N});var n=r(552676),i=r(434519),o=r(381636),a=r(437230),s=r(228008),l=r(621001),c=r(932525),u=function(e){var t=e.event,r=t.event_setting_attributes,i=t.recurring_setting_attributes,a=r.starts_at,u=r.time_zone_abbreviations,d=r.time_zone,f=i||{},m=f.frequency,p=f.isRecurring,b=t.event_type;return(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(s.l,{startsAt:a,frequency:m,disabled:!p,children:(0,n.jsx)(l.J,{type:b})})}),(0,n.jsx)(o.Z.LabelXs,{as:"span",children:(0,c.k)(a,u,d)})]})},d=r(739792),f=r(664657),m=function(e){var t=e.event.community_member;return t?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"ml-[-2px]",children:(0,n.jsx)(f.W,{src:t.avatar_url,name:t.name,size:"5"})}),(0,n.jsx)(o.Z.LabelXs,{children:"".concat((0,d.t)("event_details.hosted_by")," ").concat(t.name)})]}):null},p=function(e){var t=e.event,r=t.cover_image_url;return r?(0,n.jsx)("img",{loading:"lazy",alt:t.name||"",src:r,className:"w-full"}):null},b=r(264540),h=r(957363),y=function(){var e=(0,b.h)().selectedRecurringEvents;if(!e||0===e.length)return null;var t=e.slice(0,5),r=e.length-5;return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(h.JO,{type:"16-calendar-recurring",className:"text-default mt-1 !self-start",size:16}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[t.map(function(e,t){return(0,n.jsx)(o.Z.BodySm,{color:"text-default",children:(0,c.k)(e.starts_at,e.time_zone_abbreviations,e.time_zone)},e.id||t)}),r>0&&(0,n.jsx)(o.Z.BodySm,{color:"text-light",children:(0,d.t)("events.rsvp.recurring_modal.more_dates",{count:r})})]})]})},v=r(842953),g=function(e){var t=e.event;if(!t)return null;var r=t.event_setting_attributes.location_type;return(0,n.jsxs)("div",{className:"flex flex-col rounded-2xl bg-primary border border-primary overflow-hidden",children:[(0,n.jsx)(p,{event:t}),(0,n.jsxs)("div",{className:"p-6 flex flex-col gap-4",children:[(0,n.jsx)(o.Z.LabelMd,{weight:"bold",children:t.name}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[!(0,v.f0)(t)&&(0,n.jsx)(u,{event:t}),(0,v.f0)(t)&&(0,v.yl)(t)&&(0,n.jsx)(u,{event:t}),(0,v.f0)(t)&&!(0,v.yl)(t)&&(0,n.jsx)(y,{}),(0,n.jsx)(a.s,{type:r}),(0,n.jsx)(m,{event:t})]})]})]})},_=r(691525),x=r(357504),j=r(869628),w=function(){var e=(0,_.wh)().currentCommunity,t=null!=e?e:{},r=t.logo_url,i=t.dark_logo_url,a=t.icon_url,s=t.dark_icon_url,l=t.name,c=i||r,u=s||a;return(0,n.jsx)("div",{className:"flex gap-2 justify-center items-center overflow-hidden",children:c?(0,n.jsx)(j.k,{logoURL:c,name:null!=l?l:"",imageClassName:"!max-h-6"}):(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsx)(x.t,{iconUrl:u,name:null!=l?l:"",imageClassName:"!max-h-6",className:"flex items-center"}),(0,n.jsx)(o.Z.TitleSm,{weight:"medium",truncate:!0,children:l})]})})},O=r(275271),S=r(701168);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var N=function(e){var t,r=e.event,o=e.children,a=e.isOpen,s=e.onClose,l=e.bodyClassName,c=e.animate,u=void 0!==c&&c,d=(t=(0,O.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return k(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1];return(0,O.useEffect)(function(){var e;return u?(m(!1),e=setTimeout(function(){m(!0)},10)):m(!1),function(){return e&&clearTimeout(e)}},[u]),(0,n.jsxs)(i.u_,{isOpen:a,onClose:s,children:[(0,n.jsx)(i.u_.Overlay,{}),(0,n.jsx)(i.u_.Content,{size:"2xl",children:(0,n.jsxs)("div",{className:"flex h-full overflow-y-auto",children:[(0,n.jsxs)("div",{className:"hidden md:flex basis-1/2 bg-secondary p-8 flex-col gap-8",children:[(0,n.jsx)(w,{}),(0,n.jsx)(g,{event:r})]}),(0,n.jsxs)("div",{className:"w-full md:basis-1/2 flex flex-col pb-6 min-h-[568px]",children:[(0,n.jsx)(i.u_.Header,{className:"flex w-full !justify-end pb-0 md:!pb-0 absolute top-0 right-0 shrink-0 border-none",children:(0,n.jsx)(i.u_.HeaderActions,{children:(0,n.jsx)(i.u_.CloseButton,{onClick:s})})}),(0,n.jsx)(i.u_.Body,{className:l,children:u?(0,n.jsx)("div",{className:(0,S.A)("h-full transition-all duration-300 ease-out overflow-hidden",{"translate-y-0 opacity-100":f,"translate-y-8 opacity-0":!f}),children:o}):o})]})]})})]})}},453926:function(e,t,r){"use strict";r.d(t,{O:()=>v});var n=r(739792),i=r(788004),o=r(547144),a=r(651714),s=r(901908),l=r(842953),c=r(441342),u=r(60878),d=r(193301),f=r(266706);function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})}}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function y(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var v=function(e){var t=e.event,r=e.onChange,m=(0,d.q)(t),v=m.currentUser,g=m.error,_=m.hasEventEnded,x=m.isConfirmed,j=m.isLoading,w=m.isUnconfirmed,O=m.role,S=m.setShouldShowConfirmation,k=m.shouldShowConfirmation,N=m.setIsLoading,P=m.rsvpStatus,C=m.ticketData,A=m.setShouldShowUnrsvpConfirmation,I=m.shouldShowUnrsvpConfirmation,T=m.isGuestRsvpSupported,E=m.shouldShowGuestRsvpForm,L=m.setShouldShowGuestRsvpForm,D=(0,u.pm)(),M=(0,c.wh)().currentCommunityMember,R=(0,f.O)().currentContact,B=(0,s.i)(),z=B.canUsersSignUp,F=B.userSignUpUrl,U=function(){(0,l.yl)(t)?window.location.href=t.paywall_attributes.checkout_url:T&&!R?L(!0):window.location.href=(0,i.U)(z,null!=F?F:"")},Z=function(e){fetch(e).then(function(e){return e.blob()}).then(function(e){var r=window.URL.createObjectURL(e),n="event-".concat(t.slug,".ics"),i=document.createElement("a");i.href=r,i.setAttribute("download",n),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r)}).catch(function(t){g(t.message),console.error("useEventRsvp - could not download - ",e)})};return{toggleRsvp:function(){return p(function(){var e,n,i;return y(this,function(o){switch(o.label){case 0:if(j)return[2];if(e=!!R&&T,(!v||!M)&&!e)return U(),[2];n=(0,l.yl)(t)&&!P||w?a.S.rsvp:a.S.unRsvp,N(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n({event:t,params:{role:O}})];case 2:return(null==(i=o.sent())?void 0:i.redirect_url)?window.location.href=i.redirect_url:(S(w),r(h(b({},t),{rsvped_event:w,rsvp_status:w?"yes":"no"}))),[3,4];case 3:return g(o.sent().message),console.error("useEventRsvp - could not rsvp - ",null==t?void 0:t.slug),[3,4];case 4:return N(!1),[2]}})})()},addToCalendar:function(){return p(function(){return y(this,function(e){switch(e.label){case 0:N(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a.S.addToCalendar({event:t,params:{role:O}})];case 2:return e.sent(),D.success((0,n.t)("add_to_calendar_success")),[3,4];case 3:return g(e.sent().message),console.error((0,n.t)("add_to_calendar_failure")),[3,4];case 4:return N(!1),[2]}})})()},downloadCalendar:function(){Z(o.av.events.downloadCalendar({spaceId:t.space_id,slug:t.slug,params:{}}))},declineInvite:function(){return p(function(){return y(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a.S.unRsvp({event:t})];case 1:return e.sent(),r(h(b({},t),{rsvped_event:!1,rsvp_status:"no"})),[3,3];case 2:return g(e.sent().message),console.error("useEventRsvp - could not decline - ",null==t?void 0:t.slug),[3,3];case 3:return N(!1),[2]}})})()},isLoading:j,isConfirmed:x,rsvpStatus:P,shouldShowConfirmation:k,dismissConfirmation:function(){return S(!1)},dismissUnrsvpConfirmation:function(){return A(!1)},hasEventEnded:_,rsvpWhileJoiningEvent:function(){return p(function(){var e;return y(this,function(i){switch(i.label){case 0:if(j)return[2];if(!v)return g((0,n.t)("log_in_to_perform_action",{action:(0,n.t)("events.rsvp.rsvp")})),window.location.href=o.$T.signIn({params:{post_login_redirect:window.location.href}}),[2];return[4,a.S.rsvp({event:t})];case 1:return(null==(e=i.sent())?void 0:e.ok)&&(e.redirect_url?window.location.href=e.redirect_url:r(h(b({},t),{rsvped_event:!0}))),[2]}})})()},ticketData:C,setShouldShowUnrsvpConfirmation:A,shouldShowUnrsvpConfirmation:I,shouldShowGuestRsvpForm:E,setShouldShowGuestRsvpForm:L}}},193301:function(e,t,r){"use strict";r.d(t,{q:()=>d});var n=r(275271),i=r(441342),o=r(404393),a=r(60878),s=r(694728),l=r(20056);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(e){var t=e||{},r=t.rsvp_status,c=t.attendee_role,d=t.event_setting_attributes,f=t.paywall_attributes,m=d||{},p=m.ends_at,b=m.allow_non_members_to_rsvp,h=(0,o.aA)(p),y=u((0,n.useState)(!1),2),v=y[0],g=y[1],_=u((0,n.useState)(!1),2),x=_[0],j=_[1],w=u((0,n.useState)(!1),2),O=w[0],S=w[1],k=(0,l.n)().hasPublicEventRsvpEnabled,N="CALENDAR_EVENT_".concat(e.id),P=u((0,n.useState)("true"===window.sessionStorage.getItem(N)),2),C=P[0],A=P[1],I=(0,i.xJ)(),T=(0,a.pm)().error,E=(0,s.S)(e);return{currentUser:I,error:T,hasEventEnded:h,isConfirmed:"yes"===r,isLoading:v,isUnconfirmed:!r||"yes"!==r,role:c||(E?"host":"participant"),setShouldShowConfirmation:function(e){try{window.sessionStorage.setItem(N,e)}catch(e){console.error("Error accessing session storage",e)}A(e)},shouldShowConfirmation:C,setIsLoading:g,rsvpStatus:r,ticketData:f,setShouldShowUnrsvpConfirmation:j,shouldShowUnrsvpConfirmation:x,isGuestRsvpSupported:k&&!!b,shouldShowGuestRsvpForm:O,setShouldShowGuestRsvpForm:S}}},701201:function(e,t,r){"use strict";r.d(t,{y:()=>c});var n=r(131906),i=r(739792),o=r(251630),a=r(842953),s=r(547144),l=r(60878),c=function(e){var t=(0,l.pm)();return(0,n.useMutation)(function(){return o.S1.createLiveRoomForEvent({event:e})},{onSuccess:function(t){var r=((t||{}).event_setting_attributes||{}).live_stream_slug;if(r){var n=s.dE.room({roomSlug:r});(0,a.L6)(e)&&(n=s.dE.publicRoom({roomSlug:r})),window.open(n,"_blank")}},onError:function(){t.error((0,i.t)("events.can_not_create_live_room_for_event"))}})}},901908:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(441342),i=r(29378),o=function(){var e=(0,n.wh)().currentCommunity,t=(0,i.pn)(e),r=null!=e?e:{},o=r.private_sign_up_url,a=r.is_private;return{canUsersSignUp:!!(r.show_signup_link||a&&o),userSignUpUrl:o||t}}},694728:function(e,t,r){"use strict";r.d(t,{S:()=>i});var n=r(441342),i=function(e){var t=(0,n.wh)().currentCommunityMember;return!!e&&!!t&&(null==e?void 0:e.community_member_id)===(null==t?void 0:t.id)}},984367:function(e,t,r){"use strict";r.d(t,{O:()=>o});var n=r(739792),i=r(19338),o=function(e){var t=e.startsAt,r=e.frequency,o=e.firstLetterCapital,a=e.frequencyFirstLetterCapital,s=e.includeRepeatsOn;if(!t||!r)return{label:""};var l=(0,i.E)({startsAt:t,firstLetterCapital:void 0!==a&&a}).find(function(e){return e.value===r});if(!l)return{label:""};var c=(0,n.t)("events.recurring.".concat(void 0===o||o?"frequencies_capital_letter":"frequencies",".repeats"));return{label:void 0===s||s?"".concat(c," ").concat(l.label):l.label}}},232436:function(e,t,r){"use strict";r.d(t,{h:()=>c,o:()=>u});var n=r(552676),i=r(275271),o=r(638931),a=r(43226),s=r.n(a),l=(0,i.createContext)(void 0);l.displayName="FilterProviderContext";var c=function(e){var t=e.context,r=e.children,a=e.filterParams,s=e.clearFilter,c=e.clearFilters,u=e.clearFilterByKey,d=e.filterParamForKey,f=e.filterParamsForKey,m=e.setFilter,p=(0,o.j)({context:t}),b=p.data,h=p.isLoading,y=(0,i.useMemo)(function(){var e;return null!=(e=null==b?void 0:b.filter_configurations)?e:[]},[b]),v=(0,i.useCallback)(function(e,t){var r,n=y.find(function(t){return t.key===e});(null!=(r=null==n?void 0:n.incompatible_with_filters)?r:[]).forEach(function(e){u(e)}),m(e,t)},[u,y,m]),g=(0,i.useMemo)(function(){return{configurations:y,isLoading:h,filterParams:a,clearFilter:s,clearFilterByKey:u,clearFilters:c,filterParamForKey:d,filterParamsForKey:f,setFilter:v}},[y,h,a,s,u,d,f,v,c]);return(0,n.jsx)(l.Provider,{value:g,children:r})},u=function(){var e=(0,i.useContext)(l);return e||{isLoading:!1,setFilter:s(),clearFilter:s(),clearFilterByKey:s(),clearFilters:s(),configurations:[],filterParamForKey:s(),filterParams:[],filterParamsForKey:s()}}},638931:function(e,t,r){"use strict";r.d(t,{Y:()=>o,j:()=>a});var n=r(131906),i=r(412956),o={MEMBER_DIRECTORY:"member_directory"},a=function(e){var t=e.context;if(!Object.values(o).includes(t))throw Error("Invalid context: ".concat(t));return(0,n.useQuery)({queryKey:["filterKitConfiguration",t],queryFn:function(){return t===o.MEMBER_DIRECTORY?i.v.configuration():Promise.resolve(null)},enabled:!!t})}},324777:function(e,t,r){"use strict";r.d(t,{J:()=>y});var n=r(552676),i=r(326145),o=r(275271),a=r(739792),s=r(403697),l=r(547144),c=r(39905),u=function(){var e=new Date;return e.setTime(e.getTime()+31536e6),e},d={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",GB:"United Kingdom",CH:"Switzerland"};function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=["/sign_up","/communities/new",/^\/communities\/\d+\/templates$/,/^\/communities\/\d+\/questions$/],b=function(){var e=window.location.pathname;return p.some(function(t){return"string"==typeof t?e===t:t.test(e)})},h=function(){var e,t,r=!!(null==(e=window.webview)?void 0:e.isComingFromReactNativeWebview)||!!(null==(t=window.webview)?void 0:t.isInsideMobileWebview),f=m((0,i.fP)([s.nV]),2),p=f[0],h=f[1],y=m((0,o.useState)(!0),2),v=y[0],g=y[1],_=m((0,o.useState)(window.CLOUDFLARE_COUNTRY_CODE),2),x=_[0],j=_[1],w=p[s.nV],O=function(){var e=window.location.hostname;return e.endsWith(".circle.so")&&3===e.split(".").length?s.eG:e},S=function(e){h(s.nV,e,{expires:u(),domain:O(),path:"/",sameSite:"none",secure:["production","staging"].includes(window.RAILS_ENV||"")})},k=function(){w||(null==x?void 0:x.length)||fetch("https://cloudflare-quic.com/b/headers").then(function(e){return e.json()}).then(function(e){return j(e.headers["Cf-Ipcountry"])}).catch(function(e){console.error(e)})},N=function(){g(!Object.keys(d).includes(x||""))};return((0,o.useEffect)(function(){k()}),(0,o.useEffect)(function(){N()},[x]),!document.cookie||v||void 0!==w||r||"app.circle.so"===new URLSearchParams(window.location.search).get("request_host")||b()||!["production","staging"].includes(window.RAILS_ENV||""))?null:(0,n.jsxs)("div",{className:"border-primary bg-primary fixed bottom-0 z-[999999] w-full gap-4 border p-4 shadow-lg md:bottom-8 md:right-8 md:flex md:w-auto md:max-w-3xl md:rounded-lg",children:[(0,n.jsx)("div",{className:"mb-4 leading-4 md:mb-0",children:(0,n.jsxs)("p",{className:"text-dark text-sm",children:[(0,a.t)(["gdpr.cookie_banner.description"]),(0,n.jsx)("br",{}),(0,a.t)("gdpr.cookie_banner.privacy_policy.prefix"),(0,n.jsx)("a",{href:l.ae.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,a.t)("gdpr.cookie_banner.privacy_policy.link")}),(0,a.t)("gdpr.cookie_banner.privacy_policy.suffix")]})}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)(c.z,{onClick:function(){return S(!1)},variant:"secondary",children:(0,a.t)("gdpr.cookie_banner.decline_button")}),(0,n.jsx)(c.z,{onClick:function(){return S(!0)},variant:"primary",children:(0,a.t)("gdpr.cookie_banner.accept_button")})]})]})},y=function(){return(0,n.jsx)(i.cY,{children:(0,n.jsx)(h,{})})}},340174:function(e,t,r){"use strict";r.d(t,{y:()=>N});var n=r(552676),i=r(275271),o=r(932699),a=r(227851),s=r(547144),l=r(71068),c=r(93199),u=r(525815),d=r(952893),f=r(342417),m=r(739792),p=r(701168),b=r(381636);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var y=function(e){var t,r,i=e.isLoading,o=e.handleUpload,a=e.name,s=e.description,l=e.disabled,c=(0,f.uI)({onDropAccepted:o,onDropRejected:function(e){console.error(e)},noClick:!0,disabled:i,accept:{"image/*":[".jpeg",".gif",".png",".jpg"],"video/*":[".mp4",".mov",".m4v"]},maxFiles:1,multiple:!1}),u=c.getRootProps,d=c.getInputProps,y=c.isDragActive;return(0,n.jsx)("div",(t=h({className:(0,p.A)("border-primary flex h-64 w-full items-center justify-center rounded-lg border border-dashed",{"text-secondary bg-secondary":!y,"text-messaging-info-blue border-blue-300 bg-blue-50":y})},u()),r=r={onPaste:function(e){var t,r;(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&(e.preventDefault(),o(Array.from(e.clipboardData.files)))},children:(0,n.jsxs)("div",{className:"flex max-w-xs flex-col items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(b.Z.LabelLg,{weight:"medium",children:(0,m.t)("home_page.edit_form.welcome_banner.drop_image")})}),(0,n.jsx)("input",h({},d())),(0,n.jsx)("div",{className:"mt-3 px-4 text-center leading-none",children:(0,n.jsx)(b.Z.LabelSm,{weight:"regular",color:"text-light",children:s})}),(0,n.jsxs)("label",{htmlFor:a,className:"mt-6",children:[(0,n.jsx)("span",{className:(0,p.A)("h-[34px] rounded-md font-bold leading-5 text-darkest border border-secondary bg-primary hover:bg-tertiary !font-medium py-[6px] px-[18px] text-sm cursor-pointer",{"cursor-not-allowed":l}),children:(0,m.t)("home_page.edit_form.welcome_banner.upload")}),(0,n.jsx)("input",{accept:"image/*, video/*",type:"file",id:a,name:a,className:"hidden",disabled:l,onChange:function(e){!l&&e.target.files&&o(Array.from(e.target.files))}})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},v=function(e){var t=e.title,r=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"cover-image",className:"mb-2",children:t}),(0,n.jsx)("div",{className:"relative mb-2 flex flex-row items-start justify-between whitespace-pre-wrap",children:r})]})},g=r(394167),_=r.n(g),x=r(957363),j=r(380171),w=function(e){var t=e.url,r=e.type,i=e.onRemove,o=e.disabled,a=e.isSpaceWelcomeBanner,s=(void 0===r?"image":r).includes("image");return(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsx)("img",{loading:"lazy",src:t,alt:(0,m.t)("cover_image"),className:(0,p.A)("w-full rounded-md",{"h-auto":!a,"h-[256px] object-cover":a})}):(0,n.jsx)("div",{className:"h-auto rounded-md",children:(0,n.jsx)(_(),{url:t,width:"100%",height:"100%",controls:!0})}),!o&&(0,n.jsx)(j.T,{content:(0,m.t)("home_page.remove_banner"),children:(0,n.jsx)("button",{type:"button",className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex size-[22px] cursor-pointer items-center justify-center rounded-full border",onClick:i,"aria-label":(0,m.t)("home_page.remove_banner"),children:(0,n.jsx)(x.JO,{type:"20-close-sm","aria-hidden":!0,size:20})})})]})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){var t=e.name,r=void 0===t?"cover_image":t,f=e.title,m=e.description,p=e.disabled,b=void 0!==p&&p,h=e.removeAttachmentsPath,g=void 0===h?"":h,_=e.removeAttachmentsParams,x=void 0===_?{}:_,j=e.isVideo,O=e.isSpaceWelcomeBanner,N=(0,a.Gc)(),P=N.getValues,C=N.setValue,A=k((0,i.useState)(0),2),I=A[0],T=A[1],E=k((0,i.useState)(!1),2),L=E[0],D=E[1],M=P(r),R={url:"",type:""};(0,o.isObject)(M)?R=M:(0,o.isObject)(M)||(0,o.isNull)(M)||(0,o.isUndefined)(M)||(R={url:(0,s.C9)({filename:r,signed_id:M}),type:void 0!==j&&j?"video":"image"});var B=k((0,i.useState)(R),2),z=B[0],F=B[1],U=z.url,Z=z.type,G=function(e){D(!0),T(e)},q=function(e,t,n){F({url:e,type:null==n?void 0:n.split("/")[0]}),C(r,t),D(!1)};return L?(0,n.jsx)(v,{title:f,children:(0,n.jsx)("div",{className:"text-default bg-secondary border-primary flex h-64 w-full items-center justify-center rounded-md border border-dashed",children:(0,n.jsx)(l.D,{percentage:I,size:32,strokeWidth:3})})}):(0,n.jsx)(v,{title:f,children:U?(0,n.jsx)(w,{url:U,type:Z,onRemove:function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return D(!0),e=g||(0,s._E)(),t=(0,o.isEmpty)(x)?{field_name:d.lb[r]}:x,[4,(0,c.pC)(e,t)];case 1:return n.sent().success&&(C(r,{url:null,type:"image"}),F({url:"",type:""})),D(!1),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)})})()},disabled:b,isSpaceWelcomeBanner:void 0!==O&&O}):(0,n.jsx)(y,{isLoading:L,handleUpload:function(e){try{new u.Q(e[0],q,"","",G).start()}catch(e){console.error(e)}},name:r,description:m,disabled:b})})}},952893:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}r.d(t,{A1:()=>a,PM:()=>o,lb:()=>s});var o=function(e){var t=e.community,r=e.community_setting,o=r.meta_tags;return i(n({logged_in_description:t.logged_in_user_home_page_banner_description,logged_in_media:t.logged_in_user_home_page_banner_media,logged_in_title:r.logged_in_user_home_page_banner.title,allow_close:r.logged_in_user_home_page_banner.allow_close,logged_in_banner_enabled:r.logged_in_user_home_page_banner.enabled,logged_out_description:t.logged_out_user_home_page_banner_description,logged_out_media:t.logged_out_user_home_page_banner_media,logged_out_title:r.logged_out_user_home_page_banner.title,logged_out_banner_enabled:r.logged_out_user_home_page_banner.enabled,trending_posts_window_in_days:r.trending_posts_window_in_days,default_post_sort_logged_in_user:r.default_post_sort_logged_in_user,default_post_sort_logged_out_user:r.default_post_sort_logged_out_user,include_non_member_space_posts:r.include_non_member_space_posts},o),{opengraph_image:o.opengraph_image})},a=function(e,t){var r=t.community,o=t.community_setting,a=o.meta_tags;return i(n({},t),{community:i(n({},r),{logged_in_user_home_page_banner_description:e.logged_in_description,logged_out_user_home_page_banner_description:e.logged_out_description,logged_in_user_home_page_banner_media:e.logged_in_media,logged_out_user_home_page_banner_media:e.logged_out_media}),community_setting:i(n({},o),{trending_posts_window_in_days:e.trending_posts_window_in_days,default_post_sort_logged_in_user:e.default_post_sort_logged_in_user,default_post_sort_logged_out_user:e.default_post_sort_logged_out_user,include_non_member_space_posts:e.include_non_member_space_posts,logged_in_user_home_page_banner:i(n({},o.logged_in_user_home_page_banner),{title:e.logged_in_title,enabled:e.logged_in_banner_enabled,allow_close:e.allow_close}),logged_out_user_home_page_banner:i(n({},o.logged_out_user_home_page_banner),{title:e.logged_out_title,enabled:e.logged_out_banner_enabled}),meta_tags:i(n({},a),{meta_title:e.meta_title,meta_description:e.meta_description,opengraph_title:e.opengraph_title,opengraph_description:e.opengraph_description,opengraph_image:e.opengraph_image})})})},s={logged_in_media:"logged_in_user_home_page_banner_media",logged_out_media:"logged_out_user_home_page_banner_media"}},655202:function(e,t,r){"use strict";r.d(t,{N:()=>p,Z:()=>m});var n=r(275271),i=r(932699),o=r(131906),a=r(93199),s=r(547144),l=r(714218),c=r(261193),u=r(396354),d=r(441342);function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var m="home-page-posts",p=function(e){var t,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],p=arguments.length>2?arguments[2]:void 0,b=(0,d.nT)(),h=(null==b||null==(t=b.helpers)?void 0:t.isDataLoading)||i.noop,y=(0,d.wh)(),v=!!(null==y?void 0:y.isLoading),g=(0,u.t)().sort,_=void 0===g?e:g,x=(0,l.d)(),j=x.removeRecord,w=x.findAndReplaceRecord,O=(0,o.useQueryClient)(),S=(0,n.useMemo)(function(){return!!(h()||v)},[h,v]),k=(0,n.useMemo)(function(){return[m,{sort:_}]},[_]),N=(0,o.useInfiniteQuery)(k,function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,a.UT)(s.av.homePagePosts.index({params:{page:t,sort:_}}))},{keepPreviousData:!0,staleTime:500,enabled:r,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},onSuccess:function(e){(0,i.isFunction)(p)&&p(e)}}),P=N.fetchNextPage,C=N.data,A=N.hasNextPage,I=N.isLoading,T=N.refetch,E=(0,n.useCallback)(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.refetch,i=void 0===n||n;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(t=e,!i)return[3,2];return[4,O.fetchQuery({queryKey:[s.av.posts.show({spaceId:e.space_id,postSlug:e.slug})]})];case 1:t=r.sent(),r.label=2;case 2:return[2,w(t,k)]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()},[O,w,k]),L=(0,n.useCallback)(function(e){j(e,k)},[j,k]),D=(0,c.D)(),M=(0,n.useMemo)(function(){return C?(0,i.uniqBy)((0,i.flatten)(C.pages.map(function(e){return e.records})),"id"):[]},[C]);return{fetchNextPage:P,hasNextPage:!!A,isLoading:I,isLoadingAppData:D,onPostChange:E,onPostDestroy:L,perPagePostIds:(0,n.useMemo)(function(){return C?C.pages.map(function(e){return e.records.map(function(e){return e.id})}):[]},[C]),posts:M,refetchPosts:T,shouldShowLoader:S}}},844269:function(e,t,r){"use strict";r.d(t,{x:()=>E});var n=r(552676),i=r(903225),o=r(918594),a=r(739792),s=r(725265),l=r(131906),c=r(880646),u=r(403697),d=r(652478),f=new l.QueryClient(d.V),m=function(){var e=(0,c.D)();return(0,s.Z)(u.hn.OPEN_SEARCH_MODAL,function(t){t.preventDefault(),e.show()}),(0,n.jsx)(l.QueryClientProvider,{client:f})},p=r(441342),b=r(701168),h=r(22319),y=r(775148),v=r(260230),g=function(e){var t=e.currentCommunity,r=(0,h.TC)().isDarkAppearance,i=t||{},o=i.name,s=i.logo_url,l=i.dark_logo_url,c=s;return(r&&l&&(c=l),c)?(0,n.jsx)("a",{href:"/",className:"community__brand",children:(0,n.jsx)("div",{className:"community__logo",children:(0,n.jsx)("img",{loading:"lazy",alt:(0,a.t)("community_logo_alt",{community_name:o}),src:c})})}):(0,n.jsxs)("a",{href:"/",className:"community__brand",children:[(0,n.jsx)("div",{className:(0,b.A)("brand-icon brand-icon__initial !rounded-xl")}),(0,n.jsx)("div",{className:"name",children:o})]})},_=r(96533),x=r(664657),j=r(78456),w=r(547144),O=r(396354),S=r(943544),k=function(){var e=(0,p.wh)(),t=e.currentUser,r=e.currentCommunityMember,o=(0,i.TH)(),s=(0,p.ic)(),l=(0,_.r)().show,c=(0,j.vb)(r),u=(0,O.t)().post_login_redirect,d=(null==r?void 0:r.policies)||{},f=d.can_access_billing,m=d.can_access_authentication_page,h=[{action:function(){r&&l({memberPublicId:r.public_uid})},label:(0,a.t)("my_profile")},{to:w.du.profile(o),label:(0,a.t)("edit_profile")},{to:w.du.notifications(o),label:(0,a.t)("notification")}];return(m&&h.push({to:w.du.authentication(o),label:(0,a.t)("authentication")}),f&&h.push({to:w.du.billing(o),label:(0,a.t)("billing")}),c&&h.push({action:function(){window.location.href="/analytics"},label:(0,a.t)("analytics_title")},{to:"/audience/manage",label:(0,a.t)("audience")},{to:"/settings",label:(0,a.t)("settings_title")}),t&&r)?(0,n.jsx)(S.Lt,{className:"user-menu z-[9999]",button:(0,n.jsx)(x.W,{name:null==r?void 0:r.name,src:null==r?void 0:r.avatar_url,size:"8"}),appendTo:document.getElementById("mainHeader")||document.body,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:(0,b.A)("bg-secondary -mt-2 mb-1.5 w-full py-1"),children:(0,n.jsx)(S.Lt.ItemWithLink,{to:"/u/".concat(null==r?void 0:r.public_uid,"?show_back_link=true"),children:null==r?void 0:r.name})}),h.map(function(e){return(0,n.jsx)(S.Lt.ItemWithLink,{to:e.to,onClick:e.action,children:e.label},e.label)}),(0,n.jsx)(S.Lt.Separator,{}),(0,n.jsx)(S.Lt.ItemLink,{onClick:function(){return window.location.href="/users/sign_out"},children:(0,a.t)("sign_out")})]})}):(0,n.jsx)("div",{className:"user-join__mobile",children:(0,n.jsx)("div",{className:"user-join__menu",children:(0,n.jsxs)(S.Lt,{button:(0,n.jsx)(y.h,{name:"20-user",iconSize:20,buttonSize:28,ariaLabel:(0,a.t)("log_in"),iconClassName:"!w-5 !h-5 !text-c-header"}),className:"z-[9999]",appendTo:document.getElementById("mainHeader")||document.body,children:[(0,n.jsx)(S.Lt.ItemLink,{onClick:function(){return window.location.href=w.zo.signIn(Array(u).join(","))},children:(0,a.t)("log_in")}),s(function(e){var t=e.communitySignupUrl;return(0,n.jsx)(S.Lt.ItemLink,{onClick:function(){return window.location.href=t},children:(0,a.t)("sign_up")})})]})})})},N=function(){var e=(0,h.wC)().minimal_layout,t=(0,p.wh)(),r=t.currentCommunity,s=t.currentCommunitySettings,l=(0,v.gn)(),c=!!(0,i.$B)("/c/:spaceSlug/:postSlug"),u=!!(null==s?void 0:s.post_details_mobile_header_enabled);return c&&u?null:(0,n.jsx)("div",{className:"sticky top-0 z-30",children:(0,n.jsx)("header",{id:"mainHeader",className:"header header-v2 !bg-c-header",style:l,children:(0,n.jsxs)("div",{className:"header__inside",children:[!e&&(0,n.jsx)("div",{className:"header__menu",children:(0,n.jsx)(y.h,{name:"hamburger","data-action":"click->mobile-sidebar#toggle",ariaLabel:(0,a.t)("toggle_menu"),className:"toggle-button",buttonSize:28,iconSize:20,iconClassName:"!w-5 !h-5 !text-c-header"})}),(0,n.jsx)("div",{className:(0,b.A)("header__left",{"!justify-start":e}),children:(0,n.jsx)(g,{currentCommunity:r})}),(0,n.jsxs)("div",{className:"header__actions",children:[(0,n.jsx)(m,{}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)("a",{href:"/analytics",children:(0,n.jsx)("svg",{className:"icon icon-analytics",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-analytics"})})})}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)(o.rU,{to:"/audience/manage",children:(0,n.jsx)("svg",{className:"icon icon-members",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-members"})})})}),(0,n.jsx)("div",{className:"header__action",children:(0,n.jsx)(o.rU,{to:"/settings",children:(0,n.jsx)("svg",{className:"icon icon-settings",viewBox:"0 0 24 24",children:(0,n.jsx)("use",{xlinkHref:"#icon-settings"})})})}),(0,n.jsx)("div",{className:"header__user relative z-30",children:(0,n.jsx)(k,{})})]})]})})})},P=r(261193),C=r(824184),A=r(60589),I=r(840905),T=r(961121),E=function(){var e=(0,C.U)(),t=(0,p.nT)().helpers.findBy({slug:e}),r=(0,T.p)(),i=(0,P.D)();return r?i?(0,n.jsx)("header",{className:"header",children:(0,n.jsx)(I.gi,{variant:"app-bar",showMemberAvatarsRow:!!t&&((0,A.V5)(t)||(0,A.H3)(t))})}):(0,n.jsx)(N,{}):null}},55975:function(e,t,r){"use strict";r.d(t,{X:()=>o});var n=r(552676),i=r(103241),o=function(){var e=(0,i._)().data,t=(void 0===e?{}:e).browser_notifications_html;return(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}},220982:function(e,t,r){"use strict";r.d(t,{C:()=>n});var n={standard:"standard",fullscreen:"fullscreen",minimal:"minimal",empty:"empty"}},861826:function(e,t,r){"use strict";r.d(t,{h:()=>A,O:()=>C});var n=r(552676),i=r(275271),o=r(441342),a=r(22319),s=r(701168),l=r(333382),c=r(788277),u=function(e){var t=e.children,r=e.bodyClassNames;return(0,l.H)((0,s.A)(void 0===r?"":r,"trix-v2")),(0,c.w)(),(0,n.jsx)("div",{className:"standard-layout-v2",children:t})},d=r(739792),f=r(59769),m=r(957363),p=r(778152),b=function(e){var t=e.title,r=e.children;return(0,n.jsx)(p.S,{title:t,children:(0,n.jsx)("div",{className:"react-layout-fullscreen",children:r})})};b.Content=function(e){var t=e.children;return(0,n.jsx)("div",{className:"react-layout-fullscreen-content",children:(0,n.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:t})})},b.Header=function(e){var t=e.title,r=e.beforeTitle,i=e.afterTitle;return(0,n.jsx)("div",{className:"react-layout-fullscreen-header",children:(0,n.jsxs)("div",{className:"react-layout-fullscreen-wrapper",children:[r&&(0,n.jsx)("div",{className:"react-layout-fullscreen-header-before",children:r}),(0,n.jsxs)("div",{className:"react-layout-fullscreen-header-heading",children:[(0,n.jsx)("h1",{className:"heading-h1",children:t}),i]})]})})},b.Tabs=function(e){var t=e.children;return(0,n.jsx)("div",{className:"react-layout-fullscreen-tabs",children:(0,n.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:(0,n.jsx)("nav",{"aria-label":(0,d.t)("full_screen_layout.tabs"),children:t})})})},b.Topbar=function(e){var t=e.onClose,r=e.actions,i=e.buttonPosition,l=e.showCommunityIcon,c=(0,o.wh)().currentCommunity,u=(0,a.TC)().isDarkAppearance,p=u?null==c?void 0:c.prefs.brand_color.dark:null==c?void 0:c.prefs.brand_color.light,b=u?null==c?void 0:c.prefs.brand_text_color.dark:null==c?void 0:c.prefs.brand_text_color.light;return(0,n.jsxs)("div",{className:(0,s.A)("react-layout-fullscreen-topbar",{"react-layout-fullscreen-topbar--reverse":"start"===(void 0===i?"end":i)}),children:[(void 0===l||l)&&c&&(0,n.jsx)("div",{className:"react-layout-fullscreen-topbar__community-icon",children:(0,n.jsx)(f.G,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({brand_color:p,brand_text_color:b},c))}),(0,n.jsx)("div",{className:"react-layout-fullscreen-topbar__actions",children:r}),(0,n.jsxs)("button",{type:"submit",className:"btn-close",onClick:t,children:[(0,n.jsx)(m.JO,{type:"close"}),(0,n.jsx)("span",{className:"sr-only",children:(0,d.t)("full_screen_layout.close_panel")})]})]})};var h=r(844269),y=r(83334),v=r(117617),g=r(64300),_=function(e){var t=e.children,r=e.bodyClassNames,i=(0,o.wh)().currentCommunityMember;(0,l.H)((0,s.A)(void 0===r?"":r,"trix-v2 minimal-layout"));var a=(0,v.ef)();return(0,n.jsx)("div",{id:"panel",className:"minimal-layout__wrapper",children:(0,n.jsxs)("div",{className:"community__content !bg-secondary",children:[(0,n.jsx)(g.G,{isRenderedOutsideSpace:!0}),(0,n.jsx)(h.x,{}),(0,n.jsx)("div",{className:"standard-layout-v2 no-right-sidebar",children:t}),!!(i&&a)&&(0,n.jsx)(y.H,{})]})})},x=r(333253),j=r(220982),w=r(545273),O=function(){var e=(0,w.H)(),t=e.isSpaceRoute,r=e.isSpaceGroupRoute,n=e.isFeedRoute,i=(0,v.a7)();return!t&&!r&&!n&&i};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=(0,i.createContext)(null);P.displayName="DynamicLayoutContext";var C=function(e){var t,r,s,l=k({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e)),c=(0,o.wh)().isLoading,d=(0,a.wC)().minimal_layout,f=N((0,i.useState)({}),2),m=f[0],p=f[1],h=N((0,i.useState)(d?j.C.minimal:j.C.standard),2),y=h[0],v=h[1],g=O();switch(y){case j.C.fullscreen:s=b;break;case j.C.standard:s=x.a;break;case j.C.minimal:s=_;break;case j.C.empty:s=u;break;default:s=x.a}return c?null:(0,n.jsx)(P.Provider,{value:{layoutType:y,setLayoutType:v,setStandardLayout:function(){return v(j.C.standard)},setMinimalLayout:function(){return v(j.C.minimal)},setEmptyLayout:function(){return v(j.C.empty)},setDynamicLayoutProps:p,resetDynamicLayoutProps:function(){return p({})}},children:(0,n.jsx)(s,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l,m),r=r={disableSidebar:g},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},A=function(){var e=(0,i.useContext)(P);if(!e)throw Error("useDynamicLayoutContext must be used within a DynamicLayout");return e}},792423:function(e,t,r){"use strict";r.d(t,{u:()=>C});var n=r(552676),i=r(932699),o=r(739792),a=r(403697),s=r(701168),l=r(957363),c=r(43226),u=r.n(c),d=r(918594);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var p=function(e){var t=e.children,r=e.className,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return"to"in i?(0,n.jsx)(d.rU,m(f({className:(0,s.A)("text-dark flex w-full justify-center p-5",r),onClick:i.onClick||u()},i),{children:t})):"to"in i?null:(0,n.jsx)("button",m(f({type:"submit",className:(0,s.A)("text-dark flex w-full justify-center p-5",r),onClick:i.onClick||u()},i),{children:t}))},b=function(e){var t=e.children;return(0,n.jsx)("span",{className:"text-xxs bg-brand absolute right-[-12px] top-[-6px] block rounded-full border-2 border-white px-[6px] py-[4px] text-center font-bold leading-none text-white",children:t})},h=r(903225),y=r(441342),v=r(60589),g=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote;return(0,n.jsx)("a",{href:t,"data-remote":r,className:"text-dark flex w-full justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},_=r(517534),x=r(833850),j=function(){var e=(0,_.m)().spaceId,t=(0,x.L)();return(0,n.jsx)("button",{type:"button",onClick:function(){return t.show({spaceId:e})},className:"text-dark flex w-full justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("events.create.title"),type:"bar-plus",size:24,useWithStrokeCurrentColor:!0})})},w=r(629662),O=function(e){var t=e.spaceId,r=(0,w.e)();return(0,n.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:function(){r.show({spaceId:t,onClose:function(){r.remove()}})},children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},S=r(246407),k=function(){return(0,n.jsx)(S.h,{render:function(e){var t=e.onClick;return(0,n.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:t,children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})}})},N=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote,i=e.shouldNewPostOpenModal,o=((0,h.$B)("/c/:spaceSlug")||{}).params,a=(void 0===o?{spaceSlug:""}:o).spaceSlug,s=(0,y.nT)().helpers.findBy({slug:a});return(0,v.V5)(s)?(0,n.jsx)(j,{}):(0,v.Ds)(s)?(0,n.jsx)(O,{spaceId:null==s?void 0:s.id}):void 0!==i&&i?(0,n.jsx)(k,{}):(0,n.jsx)(g,{newPostUrl:t,newPostUseDataRemote:void 0!==r&&r})};function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var C=function(e){var t,r,c=e.className,u=e.newPostUrl,d=e.newPostUseDataRemote,f=e.onHomeClick,m=e.onNotificationsClick,h=e.onSearchClick,y=e.shouldNewPostOpenModal,v=e.shouldShowMessagingRoutes,g=e.style,_=e.unreadChatCount,x=void 0===_?0:_,j=e.unreadNotificationCount,w=void 0===j?0:j,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["className","newPostUrl","newPostUseDataRemote","onHomeClick","onNotificationsClick","onSearchClick","shouldNewPostOpenModal","shouldShowMessagingRoutes","style","unreadChatCount","unreadNotificationCount"]);return(0,n.jsx)("div",(t=P({id:a.B7,className:(0,s.A)("bg-primary fixed bottom-0 z-10 w-full",void 0===c?"":c),style:P({boxShadow:"0px 0px 10px 0px rgb(0 0 0 / 11%)"},void 0===g?{}:g)},O),r=r={children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{type:"submit",onClick:function(e){return(0,i.isFunction)(f)&&f(e)},className:"text-dark flex w-full cursor-pointer justify-center p-5",children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.home"),type:"home",size:24,useWithStrokeCurrentColor:!0})}),(0,n.jsx)(p,{onClick:function(e){return(0,i.isFunction)(h)&&h(e)},children:(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.search"),type:"search",size:24,useWithFillCurrentColor:!0})}),(0,n.jsx)(N,{newPostUseDataRemote:void 0!==d&&d,newPostUrl:void 0===u?"":u,shouldNewPostOpenModal:void 0!==y&&y}),(0,n.jsx)(p,{onClick:function(e){return(0,i.isFunction)(m)&&m(e)},children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.notifications"),type:"bell",size:24,useWithFillCurrentColor:!0}),w>0&&(0,n.jsx)(b,{children:w})]})}),void 0!==v&&v&&(0,n.jsx)(p,{to:"/messages",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.JO,{"aria-label":(0,o.t)("mobile_nav.messages"),type:"dm",size:24,useWithFillCurrentColor:!0}),x>0&&(0,n.jsx)(b,{children:x})]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},83334:function(e,t,r){"use strict";r.d(t,{H:()=>v});var n=r(552676),i=r(340404),o=r(792423),a=r(275271),s=r(903225),l=r(60589),c=r(547144),u=r(44994),d=r(879414),f=r(441342),m=r(598694),p=r(532701);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(){var e,t,r,n=null==(e=(0,s.$B)("/home"))?void 0:e.isExact,i=null==(t=(0,s.$B)("/feed"))?void 0:t.isExact,o=(0,s.$B)("/c/:spaceSlug"),b=(null==o||null==(r=o.params)?void 0:r.spaceSlug)||"",y=(0,f.nT)().helpers.findBy({slug:b}),v=(0,l.V5)(y),g=h((0,a.useState)(""),2),_=g[0],x=g[1],j=h((0,a.useState)(!1),2),w=j[0],O=j[1],S=(0,d.I)().spotlightSearch,k=(0,p.gq)().shouldShowMessagingRoutes,N=(0,u.R)(),P=N.newNotificationCount,C=N.toggleNotificationDrawer,A=N.resetNewNotificationsCount,I=(0,m.K)().unreadChatCount;return(0,a.useEffect)(function(){var e;n||i||!b?(e="/c/new_post_in_space",O(!0)):(e=v?(0,c.ed)({spaceSlug:(null==y?void 0:y.slug)||""}):c.xu.new({spaceSlug:(null==y?void 0:y.slug)||""}),O(!1)),x(e)},[n,null==y?void 0:y.slug,v,i,b]),{newPostUrl:_,shouldNewPostUseDataRemote:w,shouldNewPostOpenModal:!v,unreadChatCount:I,unreadNotificationCount:P,onNotificationsClick:function(){C(),A()},onSearchClick:function(){S.show()},shouldShowMessagingRoutes:k}},v=function(){var e=y(),t=e.newPostUrl,r=e.shouldNewPostUseDataRemote,a=e.shouldNewPostOpenModal,s=e.unreadChatCount,l=e.unreadNotificationCount,c=e.onNotificationsClick,u=e.onSearchClick,d=e.shouldShowMessagingRoutes,f=(0,i.C)().goToCommunityRootPath;return(0,n.jsx)(o.u,{onSearchClick:u,onNotificationsClick:c,onHomeClick:function(){return f()},unreadNotificationCount:l,unreadChatCount:s,newPostUseDataRemote:r,newPostUrl:t,shouldNewPostOpenModal:a,shouldShowMessagingRoutes:d})}},101913:function(e,t,r){"use strict";r.d(t,{A:()=>f});var n=r(552676),i=r(275271),o=r(903225),a=r(618014),s=r(658937),l=r(103241),c=r(983485),u=r(912306);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t,r=e.renderLeftSidebar,f=(0,o.k6)(),m=(0,l._)().data,p=(void 0===m?{}:m).mobile_drawer_html,b=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,a.l)().config,g=r;!r&&(null==v?void 0:v.renderLeftSidebar)&&(g=v.renderLeftSidebar);var _=(0,i.useCallback)(function(e){null!==e&&y(!0)},[y]),x=(0,i.useCallback)(function(){var e;(document.body.scrollLeft||document.documentElement.scrollLeft)>148&&(null==(e=window.mobileDrawer)||e.close())},[]),j=(0,i.useCallback)(function(e){var t,r,n,i=null==e||null==(t=e.target)?void 0:t.innerWidth;i&&i>1024&&(null==(n=window)||null==(r=n.mobileDrawer)||r.close())},[]);return((0,c.w)(j),(0,i.useEffect)(function(){return h&&document.body.addEventListener("scroll",x),function(){document.body.removeEventListener("scroll",x)}},[x,h]),(0,i.useEffect)(function(){return f.listen(function(){var e;null==(e=window.mobileDrawer)||e.close()})},[f]),p)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:_,dangerouslySetInnerHTML:{__html:p}}),h&&(0,n.jsx)(u.h,{selectorQuery:"#react-mobile-community-sidebar",children:g?g():(0,n.jsx)(s.K,{})})]}):null}},778152:function(e,t,r){"use strict";r.d(t,{S:()=>l});var n=r(552676),i=r(932699),o=r(142748),a=r(333382),s=r(441342),l=function(e){var t=e.title,r=e.bodyClassNames,l=e.children,c=(0,s.wh)().currentCommunity,u=(0,i.compact)([t,null==c?void 0:c.name]).join(" | ");return(0,a.H)(void 0===r?"":r),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.q,{children:(0,n.jsx)("title",{children:u})}),l]})}},236220:function(e,t,r){"use strict";r.d(t,{u:()=>o});var n=r(552676),i=r(701168),o=function(e){var t=e.hasPaddingTopMobile,r=e.isMinimalLayout,o=e.children,a=e.className,s=e.wrapperClassName;return(0,n.jsx)("div",{className:(0,i.A)("main h-full",{"bg-secondary":!r},a),children:(0,n.jsx)("div",{className:(0,i.A)("main__wrapper h-full sm:mx-6 md:pt-6 lg:mx-9",{"pt-0":!(void 0===t||t),"px-4 sm:px-0":r},s),children:o})})}},903985:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(552676),i=r(739792),o=r(701168),a=function(e){var t=e.className,r=e.children,a=e.hidden;return void 0!==a&&a?null:(0,n.jsx)("aside",{"aria-label":(0,i.t)("right_sidebar"),className:(0,o.A)("sidebar sidebar--right",t),"data-testid":"sidebar-right",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:r})})}},864529:function(e,t,r){"use strict";r.d(t,{F:()=>O});var n=r(552676),i=r(903225),o=r(844269),a=r(55975),s=r(83334),l=r(236220),c=r(918594),u=r(739792),d=r(701168),f=r(275271),m=r(331136),p=function(e){var t=e.children,r=(0,m.S)();return(0,n.jsx)("div",{className:"sidebar sidebar--left",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:(0,f.cloneElement)(t,{onClickRemoveOnboarding:r.show})})})},b=r(903985),h=r(658937),y=r(60589),v=r(333382),g=r(117617),_=r(441342),x=r(103241),j=r(101913),w=function(e){var t=e.postSlug,r=e.space;return!!e.disableRightSidebar||!(t&&"members"!==t&&(0,y.V5)(r))&&(null==r?void 0:r.hide_right_sidebar)},O=function(e){var t,r,l,c,u,f=e.disableSidebar,m=void 0!==f&&f,b=e.disableRightSidebar,y=e.children,O=e.bodyClassNames,S=e.renderLeftSidebar,k=void 0===S?null:S,N=e.hideAppBar,P=(0,_.wh)().currentCommunityMember,C={},A=(0,x._)().data,I=(void 0===A?{}:A).mobile_drawer_html;!m&&I&&(C["data-controller"]="mobile-sidebar"),(0,v.H)((0,d.A)("is-standard-layout react-standard-layout",void 0===O?"":O));var T=(0,g.a7)(),E=(0,i.$B)("/c/:spaceSlug/:postSlug"),L=(0,i.$B)("/c/:spaceSlug"),D=(null==L?void 0:L.params.spaceSlug)||"",M=(null==E?void 0:E.params.postSlug)||"",R=null==(l=(0,i.$B)("/home"))?void 0:l.isExact,B=null==(c=(0,i.$B)("/feed"))?void 0:c.isExact,z=null==(u=(0,i.$B)("/c/:spaceSlug"))?void 0:u.isExact,F=w({disableRightSidebar:void 0!==b&&b,postSlug:M,space:(0,_.nT)().helpers.findBy({slug:D})});return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"community__wrapper bg-secondary"},C),r=r={children:[(0,n.jsx)("div",{id:"mobile-dropdown-container"}),!m&&(0,n.jsx)(j.A,{renderLeftSidebar:k}),(0,n.jsxs)("div",{id:"panel",className:(0,d.A)("community__content trix-v2",{"community__content--no-sidebar":m}),"data-target":"mobile-sidebar.panel",children:[!m&&!(void 0!==N&&N)&&(0,n.jsx)(o.x,{}),(0,n.jsxs)("div",{className:(0,d.A)("standard-layout",{"has-sidebar":!m,"no-right-sidebar":F}),children:[!m&&(0,n.jsx)(p,{children:k?k():(0,n.jsx)(h.K,{})}),y,(0,n.jsx)(a.X,{}),!!(P&&!T&&(R||B||z))&&(0,n.jsx)(s.H,{})]})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};O.Header=function(e){var t=e.sticky,r=e.children;return(0,n.jsx)("div",{className:(0,d.A)("main__header",{"main__header--sticky":t}),children:r})},O.Breadcrumb=function(e){var t=e.hidden,r=e.backLink,i=void 0===r?"":r,o=e.backLinkText,a=void 0===o?(0,u.t)("back"):o;return void 0!==t&&t||!i?null:(0,n.jsx)("div",{className:"header__name",children:!!i&&(0,n.jsx)("div",{className:"header__breadcrumb",children:(0,n.jsx)(c.rU,{to:i,children:a})})})},O.Content=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:(0,d.A)("main__content mx-auto h-full max-w-5xl",r),children:t})},O.Body=l.u,O.Left=p,O.Right=b.O},773622:function(e,t,r){"use strict";r.d(t,{a:()=>f});var n=r(552676),i=r(903225),o=r(739792),a=r(548150),s=r(972171),l=r(957363),c=r(441342),u=r(701168),d=r(39905),f=function(e){var t=e.hidden,r=e.backLink,f=void 0===r?"":r,m=e.backLinkText,p=void 0===m?(0,o.t)("back"):m,b=e.customRightContent,h=(0,c.wh)().isViewOnlyMasquerading,y=(0,i.k6)();return void 0!==t&&t||!f?null:(0,n.jsx)(a.Z,{leftContent:(0,n.jsx)(s.y,{children:(0,n.jsxs)(d.z,{type:"button",variant:"text",extraLarge:!0,onClick:function(){y.push(f)},className:(0,u.A)("flex items-center gap-2",{"!pointer-events-auto":h}),children:[(0,n.jsx)(l.JO,{type:"20-arrow-left",size:20}),p]})}),rightContent:b||null})}},663643:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(552676),i=r(701168),o=function(e){var t,r,o=e.disableSidebar,a=e.children,s=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["disableSidebar","children","className"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"panel","data-testid":"community-content",className:(0,i.A)("community__content trix-v2 bg-secondary h-[calc(100vh-48px)] w-full flex-1 overflow-y-auto print:overflow-visible",{"community__content--no-sidebar":void 0!==o&&o},s),"data-target":"mobile-sidebar.panel"},l),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},826016:function(e,t,r){"use strict";r.d(t,{z:()=>o});var n=r(552676),i=r(701168),o=function(e){var t,r,o=e.children,a=e.className,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,i.A)("bg-secondary",void 0===a?"":a),"data-testid":"community-wrapper"},s),r=r={children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},669765:function(e,t,r){"use strict";r.d(t,{V:()=>s});var n=r(552676),i=r(739792),o=r(701168),a=r(478324),s=function(e){var t,r,s=e.children,l=e.fullWidth,c=e.fullHeight,u=void 0===c||c,d=e.noPadding,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","fullWidth","fullHeight","noPadding"]);return(0,n.jsxs)("main",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"aria-label":(0,i.t)("main_content")},f),r=r={className:(0,o.A)("standard-layout-v2__content bg-secondary",{"standard-layout-v2__content--full":l,"standard-layout-v2__content--no-padding":d,"h-full":u}),children:[(0,n.jsx)("div",{className:(0,o.A)("bg-secondary",{"h-full":u}),children:s}),(0,n.jsx)(a.n,{id:"rail-bar-content"})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},654603:function(e,t,r){"use strict";r.d(t,{v:()=>u});var n=r(552676),i=r(696969),o=r(72727),a=r(701168),s=r(800504),l=r(117617),c=r(454237),u=function(e){var t,r,u=e.children,d=e.isBgSecondary,f=e.isBgPrimary,m=e.className,p=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","isBgSecondary","isBgPrimary","className"]),b=(0,i.k)().shouldShowTrialBanner,h=(0,l.j)(),y=(0,s.f)(),v=(0,o.L)().isElectron,g=(0,c.T)().isReactFlowWorkflowsRoute,_=g?"":(0,a.A)({"lg:!min-h-[calc(100vh-64px)]":!v&&!b&&h&&!y,"lg:!min-h-[calc(100vh-105px)]":v&&!b&&h&&!y,"lg:!min-h-[calc(100vh-64px-48px)]":(b||h)&&y,"lg:!min-h-[calc(100vh-112px)]":h&&y||h&&b,"lg:!min-h-[calc(100vh-160px)]":b&&h&&y,"lg:!min-h-[calc(100vh-64px-48px-48px)]":h&&y&&b});return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,a.A)("standard-layout-v2__content-wrapper",{"!bg-secondary":void 0!==d&&d,"bg-primary":void 0!==f&&f},_,m)},p),r=r={children:u},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},844383:function(e,t,r){"use strict";r.d(t,{y:()=>a});var n=r(552676),i=r(701168),o=r(854624),a=function(e){var t,r,a=e.url,s=e.alt,l=e.thumbnail,c=void 0!==l&&l,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["url","alt","thumbnail"]);return(0,n.jsx)(o.l,{children:(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),r=r={className:(0,i.A)("bg-primary block h-auto lg:relative",{"aspect-16/5 h-full max-h-[20.625rem] md:mx-auto md:max-w-5xl md:overflow-hidden md:rounded-2xl":!c}),"data-testid":"cover-image-container",children:(0,n.jsx)("img",{loading:"lazy",src:a,alt:void 0===s?"":s,className:(0,i.A)("size-full",{"object-contain":c,"object-cover":!c}),"data-testid":"cover-image"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})}},854624:function(e,t,r){"use strict";r.d(t,{l:()=>o});var n=r(552676),i=r(701168),o=function(e){var t=e.children;return(0,n.jsx)("div",{className:(0,i.A)("md:px-6 md:pb-3 md:pt-5 lg:px-9"),children:t})}},478324:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(552676),i=function(e){var t=e.id;return(0,n.jsx)("div",{id:void 0===t?"rail-bar-header":t})}},258379:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(552676),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"md:hidden",children:t})}},145946:function(e,t,r){"use strict";r.d(t,{H:()=>a});var n=r(552676),i=r(739792),o=r(701168),a=function(e){var t,r,a=e.children,s=e.className,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)("aside",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({"aria-label":(0,i.t)("left_sidebar"),className:(0,o.A)("standard-layout-v2__sidebar",s),"data-testid":"standard-layout-v2-sidebar"},l),r=r={children:(0,n.jsx)("nav",{children:a})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},548150:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(552676);r(275271);var i=r(718083),o=r(912306),a=function(e){var t,r,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsxs)(o.h,{selectorQuery:"#standard-layout-header",children:[(0,n.jsx)(i.b,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s),r=r={id:"standard-layout-header-child"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),a]})}},718083:function(e,t,r){"use strict";r.d(t,{b:()=>a});var n=r(552676),i=r(441342),o=r(701168),a=function(e){var t,r,a=e.leftContent,s=e.rightContent,l=e.filters,c=e.headline,u=e.hasBorder,d=e.className,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["leftContent","rightContent","filters","headline","hasBorder","className"]),m=(0,i.wh)().isViewOnlyMasquerading;return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f),r=r={className:(0,o.A)("bg-primary w-full lg:sticky lg:top-0 lg:z-10",d),children:[(0,n.jsxs)("div",{className:(0,o.A)("h-18 flex items-center gap-4 px-6",{"border-primary border-b":void 0===u||u,"!cursor-not-allowed":m}),"data-testid":"space-header",children:[(0,n.jsx)("div",{className:(0,o.A)("flex-1 truncate",{"!pointer-events-none":m}),"data-testid":"space-settings",children:a}),(0,n.jsx)("div",{className:(0,o.A)("relative flex",{"!pointer-events-none":m}),children:s})]}),!!l&&l,!!c&&c]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},252804:function(e,t,r){"use strict";r.d(t,{n:()=>s});var n=r(552676),i=r(739792),o=r(701168),a=r(961121),s=function(e){var t,r,s=e.children,l=e.className,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]),u=(0,a.p)();return(0,n.jsx)("header",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"standard-layout-header","aria-label":(0,i.t)("page_header"),className:(0,o.A)("z-20 sm:relative sm:top-0 lg:sticky",u?"top-16":"top-0",l)},c),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},455785:function(e,t,r){"use strict";r.d(t,{m:()=>c});var n=r(552676),i=r(903225),o=r(441342),a=r(29378),s=r(701168),l=r(981097),c=function(e){var t,r,c=e.disableSidebar,u=void 0!==c&&c,d=e.disableSidebarNestedBarLinks,f=e.disableLayoutRightSidebar,m=e.hasSettingsSidebar,p=void 0!==m&&m,b=e.children,h=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["disableSidebar","disableSidebarNestedBarLinks","disableLayoutRightSidebar","hasSettingsSidebar","children"]),y=(0,i.TH)().pathname,v=(0,o.wh)().currentCommunity,g=y.includes(l.L.community_inbox.index),_=(0,a.Z1)(v)||(0,a.Aq)(v);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,s.A)("standard-layout-v2 bg-secondary",{"standard-layout-v2--has-sidebar":!u,"standard-layout-v2--has-sidebar-v3":!u,"standard-layout-v2--has-settings-sidebar":p&&!g,"standard-layout-v2--has-community-inbox-sidebar":g&&p,"standard-layout-v2--no-right-sidebar":void 0!==f&&f,"standard-layout-v2--hidden-nested-links":void 0!==d&&d&&!_}),"data-testid":"standard-layout-v2-wrapper"},h),r=r={children:b},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},333253:function(e,t,r){"use strict";r.d(t,{a:()=>eZ});var n=r(552676),i=r(903225),o=r(55975),a=r(83334),s=r(701168),l=r(773622),c=r(669765),u=r(844383),d=r(739792),f=r(658937),m=r(282859),p=r(60589),b=r(323583),h=r(333382),y=r(119323),v=r(396354),g=r(824184),_=r(72727),x=r(275271),j=r(637137),w=r(441342),O="circle-app-banner",S=/Android|webOS|Nokia|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,k=/Android/i,N=r(431841);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function A(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T={isMobile:!1,isMobileOsAndroid:!1},E=function(){var e=(0,N._)(O).getValue,t=I((0,x.useState)(T),2),r=t[0],n=t[1],o=I((0,x.useState)(!1),2),a=o[0],s=o[1],l=I((0,x.useState)(!1),2),c=l[0],u=l[1],d="/getting-started"===(0,i.TH)().pathname,f=r.isMobile&&r.isMobileOsAndroid,m=(0,x.useCallback)(function(){document.querySelector('meta[name="google-play-app"]')?s(!0):s(!1)},[]),p=(0,x.useCallback)(function(e){var t=k.test(e);n(function(e){return A(C({},e),{isMobileOsAndroid:t})})},[]),b=(0,x.useCallback)(function(e){var t=S.test(e);n(function(e){return A(C({},e),{isMobile:t})})},[]),h=(0,x.useCallback)(function(){var t=e();if(t){var r=new Date(t.dismissedAt);Math.ceil(Math.abs(new Date().getTime()-r.getTime())/864e5)>15&&u(!0)}else u(!0)},[e]);return(0,x.useEffect)(function(){var e=navigator.userAgent;m(),b(e),p(e),h()},[h,m,b,p]),{shouldRenderAppBanner:a&&c&&f&&!d}},L=r(437416),D=r(39905),M=r(381636);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=(0,d.t)("circle"),z=function(){var e,t=(e=(0,x.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return R(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],o=(0,w.wh)().currentCommunity,a=E().shouldRenderAppBanner,s=(0,N._)(O).setValue;if((0,x.useEffect)(function(){i(!0)},[]),!o||!a)return null;var l=o.name,c=o.has_branded_app,u=o.android_store_id,f=o.icon_url,m=c&&f,p=function(){i(!1),s({dismissedAt:new Date})},b=m?(0,d.t)("app_banner.logo_alt",{community_name:l}):(0,d.t)("app_banner.logo_alt",{community_name:B}),h=c?(0,d.t)("app_banner.title",{community_name:l}):(0,d.t)("app_banner.title",{community_name:B}),y=c?(0,d.t)("app_banner.description",{community_name:l}):(0,d.t)("app_banner.description",{community_name:B});return(0,n.jsx)(L.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!1,isOpen:r,contentPortalId:"app-banner-portal",size:"auto",position:"bottom",onClose:p,className:"!h-auto",children:(0,n.jsx)(L.x.Body,{className:"px-8 py-10",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"border-primary mb-6 flex size-20 items-center rounded-xl border",children:(0,n.jsx)("img",{loading:"lazy",src:m?f:j,alt:b,className:"mx-auto size-14 rounded-xl object-cover"})}),(0,n.jsxs)("div",{className:"mb-8 flex flex-col space-y-2 text-center",children:[(0,n.jsx)(M.Z.TitleSm,{weight:"semibold",color:"text-dark",children:h}),(0,n.jsx)(M.Z.LabelSm,{color:"text-default",children:y})]}),(0,n.jsx)(D.z,{full:!0,extraLarge:!0,className:"mb-4",onClick:function(){c&&u?window.open("https://play.google.com/store/apps/details?id="+u,"_blank"):window.open("https://circle.so/android","_blank")},children:(0,d.t)("app_banner.download_app_cta")}),(0,n.jsx)(D.z,{variant:"plain",onClick:p,children:(0,d.t)("app_banner.continue_in_browser_cta")})]})})})},F=r(454237),U=r(103241),Z=r(29378),G=r(180932),q=r(800504),V=r(844269),W=r(101913),H=r(663643),Q=r(826016),K=r(654603),J=r(22039),$=r(990809),X=r(117617),Y=r(957363),ee=r(134592);function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var er="plan_trial_opt_in_banner_dismissed",en=function(){var e,t=(e=(0,x.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return et(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],i=(0,ee.c)();return(0,x.useEffect)(function(){n("true"===localStorage.getItem(er))},[]),{shouldShowBanner:i&&!r,handleDismiss:function(){localStorage.setItem(er,"true"),n(!0)}}},ei=function(){var e=en(),t=e.shouldShowBanner,r=e.handleDismiss,i=(0,$.C)().trackEvent,o=(0,J.K)(),a=(0,X.ac)("(max-width: 500px)");if(!t)return null;var l=function(){i("plan_trial_opt_in_banner.clicked",{is_plan_trial:!0,location:"top_banner"}),o.show()};return(0,n.jsxs)("div",{className:"border-b-primary bg-tertiary relative flex items-center justify-center border-b px-4 py-3",children:[(0,n.jsxs)("div",{className:(0,s.A)("flex items-center",{"gap-2":a,"gap-3":!a}),children:[(0,n.jsx)("span",{className:"text-default text-sm font-medium",children:(0,d.t)("plan_trial_top_banner.try_business")}),a?(0,n.jsx)(Y.JO,{type:"24-arrow-right",size:24,className:"text-dark",onClick:l}):(0,n.jsx)(D.z,{variant:"marketing-gradient",small:!0,onClick:l,children:(0,d.t)("plan_trial_top_banner.upgrade_free")})]}),!a&&(0,n.jsx)("button",{type:"button",onClick:function(){r()},className:"absolute right-4 top-1/2 -translate-y-1/2","aria-label":(0,d.t)("plan_trial_top_banner.dismiss"),children:(0,n.jsx)(Y.JO,{type:"16-close",size:16,className:"text-default"})})]})},eo=r(478324),ea=r(145946),es=r(455785),el=r(547144),ec="trial_banner.marketing_campaign",eu=function(){var e=(0,i.k6)();return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(Y.JO,{type:"16-clock",size:16}),(0,n.jsx)(M.Z.BodySm,{weight:"font-semibold",color:"text-white",size:"text-base",children:(0,d.t)("".concat(ec,".title"))}),(0,n.jsx)(D.z,{className:"ml-1 text-base font-semibold",variant:"secondary",onClick:function(){e.push((0,el.xn)())},children:(0,d.t)("".concat(ec,".cta"))})]})})},ed=r(186598),ef=function(){var e=(0,ed.j)(),t=e.isPlanTrialActive,r=e.planTrialDaysLeft,o=e.planTrialEndDateFormatted,a=e.planTrialExpiringInTimer,s=e.planTrial,l=(0,$.C)().trackEvent,c=(0,i.k6)(),u=(0,i.TH)();if(!t)return null;var f=u.pathname===(0,el.xn)();return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-darkest flex items-center gap-2",children:[(0,n.jsx)(Y.JO,{type:"16-clock",size:16}),(0,n.jsx)(M.Z.BodySm,{weight:"font-semibold",size:"text-base",children:(0,d.t)("plan_trial_banner.business_trial_ends_in_days",{days:r})}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-darkest",children:(0,d.t)("plan_trial_banner.separator")}),(0,n.jsx)(M.Z.BodySm,{weight:"font-normal",size:"text-base",children:(0,d.t)("plan_trial_banner.renews",{formatted_date:o,action:(0,d.t)("plan_trial_banner.cancel_anytime")})})]}),!f&&(0,n.jsx)(D.z,{className:"ml-1 text-base font-semibold",variant:"circle",onClick:function(){l("trial_banner.layout.manage_plan.clicked",{days_left:r,is_plan_trial:!0,trial_type:null==s?void 0:s.trial_type}),c.push((0,el.xn)())},children:(0,d.t)("plan_trial_banner.manage_plan")})]})})},em=r(696969),ep=r(750848),eb=function(){var e=(0,em.k)(),t=e.trialEndDateMonthAndDayFormatted,r=e.expiringInTimer,i=e.trackTrialBannerClick,o=(0,ep.o)();return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-darkest flex items-center gap-2",children:[(0,n.jsx)(Y.JO,{type:"16-clock",size:16}),(0,n.jsx)(M.Z.BodySm,{weight:"font-semibold",size:"text-base",children:(0,d.t)("trial_banner.upgrade_to_prevent",{formatted_date:t})}),r&&(0,n.jsx)(M.Z.BodySm,{weight:"font-normal",size:"text-base",children:(0,d.t)("trial_banner.expiring_in",{expiring_in_timer:r})}),(0,n.jsx)(D.z,{className:"ml-1 text-base font-semibold",variant:"circle",onClick:function(){i(),o.show()},children:(0,d.t)("trial_banner.cta")})]})})},eh=function(){return(0,em.k)().isCommunityOnTrial?(0,n.jsx)(eb,{}):null},ey=r(824869),ev=r(627106),eg=function(){return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-darkest flex items-center gap-2",children:[(0,n.jsx)(M.Z.BodySm,{weight:"font-normal",size:"text-darkest",color:"text-white",children:(0,d.t)("trial_banner.to_access_community")}),(0,n.jsx)(D.z,{className:"text-base font-semibold",variant:"secondary",onClick:function(){window.location.href=(0,el.xn)()},children:(0,d.t)("trial_banner.renew_subscription")})]})})},e_=function(){var e=(0,w.wh)().displayCommunitySwitcher,t=(0,em.k)(),r=t.shouldShowTrialBanner,i=t.isSubscriptionCancelled,o=(0,ed.j)(),a=o.isPlanTrialActive,l=o.shouldShowPlanTrialBanner,c=(0,ey.E)().hasActiveOffer;return r||l?(0,n.jsx)(ev.E,{className:(0,s.A)({"left-[60px]":e,"!bg-warning-light":!i,"!bg-black":c}),children:i?(0,n.jsx)(eg,{}):c?(0,n.jsx)(eu,{}):a?(0,n.jsx)(ef,{}):(0,n.jsx)(eh,{})}):null},ex=function(e){var t,r,n,i=e.postSlug,o=e.space,a=e.disableRightSidebar,s=e.currentCommunityMember,l=e.pinnedPosts;if(e.isHomePage)return!1;if(a||!((null==o||null==(t=o.visible_tabs)?void 0:t.members)||(null==o||null==(r=o.visible_tabs)?void 0:r.past)||(null==o||null==(n=o.visible_tabs)?void 0:n.upcoming)||(null==l?void 0:l.length)>0))return!0;var c=o.is_private&&!o.is_space_member&&!(null==s?void 0:s.is_admin);return!(i&&"members"!==i&&(0,p.V5)(o))&&(!!c||o.hide_right_sidebar)},ej=r(545273),ew=function(){var e=(0,X.ef)(),t=(0,w.wh)().currentCommunityMember,r=(0,ej.H)(),n=r.isHomePage,i=r.isSpaceShowPage,o=r.isMemberDirectoryPage,a=r.isMessagesPage;return!!e&&!!t&&(n||i||o||a)},eO=r(22319),eS=function(){var e=(0,eO.wC)().display_header;return{topBarStyles:void 0===e||e?"lg:h-[calc(100vh-64px)]":"",topBarStylesWithMasquerade:"lg:h-[calc(100vh-48px-64px)]"}},ek=function(e,t){var r=(0,F.T)().isReactFlowWorkflowsRoute,n="/settings/recap-2025"===(0,i.TH)().pathname,o=eS(),a=o.topBarStyles,s=o.topBarStylesWithMasquerade;return r||n?"":!e&&!t||e&&t?a:!e&&t?s:""},eN=r(549882),eP=r(78456),eC=function(){var e=(0,w.wh)().currentCommunitySettings;return!!(null==e?void 0:e.cms_builder_eoy_recap_2025_enabled)},eA=function(){var e=(0,w.wh)(),t=e.currentCommunitySettings,r=e.currentCommunityMember;return!!((null==t?void 0:t.eoy_recap_enabled_for_members)&&!(0,eP.vb)(r))},eI=function(){var e=(0,w.wh)().currentCommunitySettings;return!!(null==e?void 0:e.eoy_recap_enabled_for_non_members)};function eT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eE="eoy_recap_top_banner_dismissed",eL="eoy_recap_top_banner_permanently_dismissed",eD=new Date("2026-01-14T23:59:59Z").getTime(),eM=function(){var e,t=(e=(0,x.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eT(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eT(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],i=(0,em.k)().shouldShowTrialBanner,o=(0,w.wh)().currentCommunityMember,a=eC(),s=eA(),l=eI(),c=(0,eP.vb)(o),u=!!o;return(0,x.useEffect)(function(){var e=Date.now();if(e>eD||!(c?a:u?s:l)||"true"===localStorage.getItem(eL))return void n(!1);var t=localStorage.getItem(eE);if(!t)return void n(!0);e-parseInt(t,10)>=864e5?n(!0):n(!1)},[c,u,a,s,l]),{shouldShowBanner:r&&!i,handleDismissTemporary:function(){var e=Date.now();localStorage.setItem(eE,e.toString()),n(!1)},handleDismissPermanent:function(){localStorage.setItem(eL,"true"),n(!1)},isAdmin:c}},eR=r(775148),eB=r(434519),ez=function(e){var t=e.isOpen,r=e.onClose,i=e.onRemindMeLater,o=e.onDismissForever;return(0,n.jsxs)(eB.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(eB.u_.Overlay,{}),(0,n.jsxs)(eB.u_.Content,{size:"md",children:[(0,n.jsxs)(eB.u_.Header,{children:[(0,n.jsx)(eB.u_.Title,{size:"sm",children:(0,d.t)("eoy_recap_2025.top_banner.dismiss_modal.title")}),(0,n.jsx)(eB.u_.HeaderActions,{children:(0,n.jsx)(eB.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(eB.u_.Body,{children:(0,n.jsx)("p",{className:"text-default text-sm",children:(0,d.t)("eoy_recap_2025.top_banner.dismiss_modal.description")})}),(0,n.jsx)(eB.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,n.jsx)(D.z,{type:"button",variant:"circle",onClick:i,children:(0,d.t)("eoy_recap_2025.top_banner.dismiss_modal.remind_later")}),(0,n.jsx)(D.z,{type:"button",variant:"secondary",onClick:o,children:(0,d.t)("eoy_recap_2025.top_banner.dismiss_modal.dismiss_forever")})]})})]})]})};function eF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eU=function(){var e,t=eM(),r=t.shouldShowBanner,o=t.handleDismissTemporary,a=t.handleDismissPermanent,s=t.isAdmin,l="/settings/recap-2025"===(0,i.TH)().pathname,c=(e=(0,x.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eF(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eF(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],f=c[1],m=(0,$.C)().trackEvent,p=(0,X.ac)("(max-width: 500px)");if(!r||l)return null;var b=function(){m("eoy_recap_2025.top_banner.clicked",{is_admin:s}),window.location.href=eN.Fy.recap2025ForMembersAndNonMembers()};return(0,n.jsxs)("div",{className:"border-b-primary relative overflow-hidden border-b bg-[#0F0F35]",children:[(0,n.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full bg-[#4469FE]",style:{width:"400px",height:"307px",filter:"blur(150px)",borderRadius:"400px"}}),(0,n.jsxs)("div",{className:"absolute inset-0",children:[(0,n.jsx)("div",{className:"absolute top-2 left-[5%] size-0.5 rounded-full bg-white animate-pulse",style:{animationDuration:"2s",filter:"blur(0.5px)"}}),(0,n.jsx)("div",{className:"absolute top-5 left-[10%] size-1 rounded-full bg-white animate-pulse",style:{animationDuration:"3.5s",filter:"blur(1px)"}}),(0,n.jsx)("div",{className:"absolute top-3 left-[15%] size-0.5 rounded-full bg-white animate-pulse",style:{animationDuration:"2.8s",filter:"blur(0.5px)"}}),(0,n.jsx)("div",{className:"absolute top-6 left-[20%] size-1 rounded-full bg-white animate-pulse",style:{animationDuration:"3s",filter:"blur(1px)"}}),(0,n.jsx)("div",{className:"absolute top-2 left-[25%] size-1.5 rounded-full bg-white animate-pulse",style:{animationDuration:"2.2s",filter:"blur(1.5px)"}}),(0,n.jsx)("div",{className:"absolute top-3 right-[5%] size-0.5 rounded-full bg-white animate-pulse",style:{animationDuration:"3.1s",filter:"blur(0.5px)"}}),(0,n.jsx)("div",{className:"absolute top-5 right-[10%] size-1 rounded-full bg-white animate-pulse",style:{animationDuration:"3.5s",filter:"blur(1px)"}}),(0,n.jsx)("div",{className:"absolute top-2 right-[15%] size-1.5 rounded-full bg-white animate-pulse",style:{animationDuration:"2.4s",filter:"blur(1.5px)"}}),(0,n.jsx)("div",{className:"absolute top-6 right-[20%] size-0.5 rounded-full bg-white animate-pulse",style:{animationDuration:"3.3s",filter:"blur(0.5px)"}}),(0,n.jsx)("div",{className:"absolute top-3 right-[25%] size-1 rounded-full bg-white animate-pulse",style:{animationDuration:"2.8s",filter:"blur(1px)"}})]}),(0,n.jsx)("div",{className:"relative flex min-h-[48px] items-center px-4 py-3",children:p?(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,n.jsx)("span",{className:"text-default text-sm text-white font-semibold",children:(0,d.t)("eoy_recap_2025.top_banner.view_recap")}),(0,n.jsx)(eR.h,{name:"24-arrow-right",iconSize:24,buttonSize:24,className:"rounded-full border border-white/[0.34] bg-gradient-to-b from-white/[0.08] to-white/[0.32] p-1 text-white shrink-0",iconClassName:"text-white",ariaLabel:(0,d.t)("eoy_recap_2025.top_banner.view_recap"),onClick:b})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center gap-4",children:[(0,n.jsx)("span",{className:"text-default text-base text-white font-semibold",children:(0,d.t)("eoy_recap_2025.top_banner.view_recap")}),(0,n.jsx)("button",{type:"button",onClick:b,className:"relative flex items-center justify-center gap-2.5 overflow-hidden rounded-full border border-white/[0.34] bg-gradient-to-b from-white/[0.08] to-white/[0.32] py-1 px-2.5 text-white text-sm font-semibold shrink-0 before:absolute before:inset-0 before:-translate-x-full before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent before:transition-transform before:duration-500 hover:before:translate-x-full",children:(0,n.jsx)("span",{className:"relative z-10",children:(0,d.t)("eoy_recap_2025.top_banner.view_now")})})]}),(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)(eR.h,{name:"16-close",iconSize:16,buttonSize:20,variant:"primary",iconClassName:"text-white",className:"hover:bg-white/10",ariaLabel:(0,d.t)("eoy_recap_2025.top_banner.dismiss"),onClick:function(){f(!0)}})})]})}),(0,n.jsx)(ez,{isOpen:u,onClose:function(){return f(!1)},onRemindMeLater:function(){o(),f(!1)},onDismissForever:function(){a(),f(!1)}})]})},eZ=Object.assign(function(e){var t,r,l,c,u,d,x=e.bodyClassNames,j=e.children,O=e.disableRightSidebar,S=e.disableScroll,k=void 0!==S&&S,N=e.disableSidebar,P=void 0!==N&&N,C=e.hideAppBar,A=e.shouldHideSidebarNestedNavBar,I=void 0!==A&&A,T=e.id,E=e.renderLeftSidebar,L=(0,w.wh)(),D=L.currentCommunityMember,M=L.currentCommunity,R=(0,b.P)().posts,B={id:T},J=(0,U._)(),$=null==J||null==(l=J.data)?void 0:l.mobile_drawer_html,X=(0,q.f)(),Y=(0,_.L)().isElectron,ee=(0,F.T)(),et=ee.isSettingsRoute,er=ee.isReactFlowWorkflowsRoute,en=ew(),el=(0,m.vF)();!P&&$&&(B["data-controller"]="mobile-sidebar"),(0,h.H)((0,s.A)("is-standard-layout-v2 react-standard-layout bg-secondary is-standard-layout-v2--v3-enabled",void 0===x?"":x,{"is-standard-layout-v2--v3-enabled--hidden-nested-links":I,"safari-dvh-unsupported":el}));var ec=(0,v.t)(),eu=(0,i.$B)("/c/:spaceSlug/:postSlug"),ed=null==eu||null==(c=eu.params)?void 0:c.postSlug,ef=null==(u=(0,i.$B)("/home"))?void 0:u.isExact,em=null==(d=(0,i.$B)("/feed"))?void 0:d.isExact,ep=(0,i.$B)("/members"),eb=(0,y.y)(),eh=(0,g.U)(),ey=(0,w.nT)().helpers.findBy({slug:eh})||{},ev=(0,Z.Z1)(M)&&!(0,G.UU)(ec),eg=(0,Z.Aq)(M),ej=ex({disableRightSidebar:void 0!==O&&O,postSlug:ed,space:ey,pinnedPosts:R,isHomePage:ef||em,currentCommunityMember:D}),eO=(0,p.Ug)(ey)||(0,p.Hn)(ey)||eg||ep&&eb,eS=ek(eg&&ev,X);return(0,n.jsxs)(Q.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},B),r=r={children:[(0,n.jsx)("div",{"data-testid":"mobile-drawer-wrapper",children:!P&&(0,n.jsx)(W.A,{})}),(0,n.jsxs)("div",{className:(0,s.A)("bg-secondary flex w-full flex-col",eS,{"h-screen":!k,"h-full":k,"!h-[calc(100vh-105px)]":Y&&et}),"data-testid":"standard-layout-v2",children:[(0,n.jsx)(ei,{}),(0,n.jsx)(eU,{}),(0,n.jsx)(e_,{}),(0,n.jsx)(z,{}),(0,n.jsxs)(H.y,{disableSidebar:P,children:[!(void 0!==C&&C)&&(0,n.jsx)(V.x,{}),(0,n.jsxs)(es.m,{disableSidebar:P,disableLayoutRightSidebar:ej,hasSettingsSidebar:!er&&et&&!ev&&!eg,disableSidebarNestedBarLinks:I,children:[!P&&!er&&(0,n.jsx)(ea.H,{children:E?E():(0,n.jsx)(f.K,{})}),(0,n.jsx)(K.v,{isBgSecondary:!eO,isBgPrimary:!!eO,children:j}),(0,n.jsx)("div",{className:"standard-layout-v2__railbar",children:(0,n.jsx)(eo.n,{})}),(0,n.jsx)(o.X,{}),(0,n.jsx)("div",{id:"mobile-dropdown-container"}),en&&(0,n.jsx)(a.H,{})]})]})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{Header:function(e){var t=e.sticky,r=e.children;return(0,n.jsx)("div",{className:(0,s.A)("main__header",{"main__header--sticky":t}),children:r})},Breadcrumb:l.a,Content:c.V,Body:function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:"main",children:(0,n.jsx)("div",{className:(0,s.A)("main__wrapper",t),children:r})})},Right:function(e){var t=e.children,r=e.hidden;return void 0!==r&&r?null:(0,n.jsx)("aside",{"aria-label":(0,d.t)("right_sidebar"),className:"sidebar sidebar--right","data-testid":"sidebar-right",children:(0,n.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:t})})},CoverImage:u.y})},186598:function(e,t,r){"use strict";r.d(t,{j:()=>u});var n=r(275271),i=r(739792),o=r(48960),a=r(303189),s=r(404393),l=r(75537),c=r(285122),u=function(){var e=(0,o.k)().shouldHideBanner,t=(0,a.D)().currentPlan,r=(null==t?void 0:t.plan_trial)||null,u=(null==r?void 0:r.active)||!1,d=(0,l.M)({endDate:(null==r?void 0:r.expires_at)||void 0}),f=(0,n.useMemo)(function(){return u&&(null==r?void 0:r.expires_at)?(0,s.eC)(new Date,new Date(r.expires_at)):0},[u,r]),m=(0,n.useMemo)(function(){return(null==r?void 0:r.expires_at)?(0,c.ie)(r.expires_at,{month:"long",day:"2-digit"}):""},[r]),p=(0,n.useMemo)(function(){return f<=1?"1 ".concat(i.ZP.t("trial_banner.day")):"".concat(f," ").concat(i.ZP.t("trial_banner.days"))},[f]),b=(0,n.useMemo)(function(){return!!(!e&&u)},[e,u]);return{isPlanTrialActive:u,planTrial:r,planTrialDaysLeft:f,planTrialDaysRemainingInWords:p,planTrialExpiringInTimer:d,planTrialEndDateFormatted:m,shouldShowPlanTrialBanner:b}}},430244:function(e,t,r){"use strict";r.d(t,{W:()=>u});var n=r(552676),i=r(252804),o=r(441342),a=r(333253),s=r(403697);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t,r,i=l({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={id:s.vH,"data-testid":"cover-image-container"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},u=function(e){var t=e.children,r=e.fullHeight,s=e.fullWidth,l=e.noPadding;return(0,o.wh)().isLoading?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.n,{}),(0,n.jsx)(c,{}),(0,n.jsx)(a.a.Content,{fullWidth:void 0!==s&&s,fullHeight:void 0===r||r,noPadding:void 0!==l&&l,children:t})]})}},961121:function(e,t,r){"use strict";r.d(t,{p:()=>a});var n=r(990225),i=r(715731),o=r(117617),a=function(){var e=(0,o.j)(),t=(0,i.I)(),r=(0,n.w)(),a=r.display_header,s=r.pages_app_page;return!e&&!t&&!(s&&!a)}},609585:function(e,t,r){"use strict";r.d(t,{Z:()=>c});var n=r(72622);function i(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)})}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var c=function(){var e,t;function r(){if(!(this instanceof r))throw TypeError("Cannot call a class as a function")}return e=[{key:"getDevices",value:function(e){return o(function(){var t,i;return l(this,function(o){switch(o.label){case 0:if(!((null==(t=r.userMediaPromiseMap)?void 0:t.size)>0))return[3,7];o.label=1;case 1:if(o.trys.push([1,6,,7]),!e)return[3,3];return[4,r.userMediaPromiseMap.get(e)];case 2:return o.sent(),[3,5];case 3:return[4,Promise.all(r.userMediaPromiseMap.values())];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return o.sent(),console.warn("error waiting for media permissions"),[3,7];case 7:return[4,navigator.mediaDevices.enumerateDevices()];case 8:if(i=o.sent(),n.isSafari&&this.hasDeviceInUse(e))return[3,10];return[4,this.acquireDevicePermissions(i,e)];case 9:i=o.sent(),o.label=10;case 10:return e&&(i=i.filter(function(t){return t.kind===e})),[2,i]}})}).call(this)}},{key:"acquireDevicePermissions",value:function(e,t){return o(function(){var r,n,i;return l(this,function(o){switch(o.label){case 0:if(r=e,!(0===e.filter(function(e){return e.kind===t}).length||e.some(function(e){var r=""===e.label,n=!t||e.kind===t;return r&&n})))return[3,3];return n={video:"audioinput"!==t&&"audiooutput"!==t,audio:"videoinput"!==t&&{deviceId:{ideal:"default"}}},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:r=o.sent(),i.getTracks().forEach(function(e){e.stop()}),o.label=3;case 3:return[2,r]}})})()}},{key:"hasDeviceInUse",value:function(e){return e?r.userMediaPromiseMap.has(e):r.userMediaPromiseMap.size>0}}],t=[{key:"getInstance",value:function(){return this.instance||(this.instance=new r),this.instance}}],e&&a(r.prototype,e),t&&a(r,t),r}();s(c,"instance",void 0),s(c,"userMediaPromiseMap",new Map)},359951:function(e,t,r){"use strict";r.d(t,{B:()=>i});var n=r(437588),i=function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={roleName:e.roleName||n.VM.HLS_SPECTATOR,isSpeaking:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},109687:function(e,t,r){"use strict";r.d(t,{Lg:()=>Q,hB:()=>g,yE:()=>H,Tq:()=>p,Zp:()=>m,nc:()=>E,Ak:()=>q,pB:()=>O,$f:()=>z,GK:()=>es,HV:()=>Z,wc:()=>k,kk:()=>N,RS:()=>j,RN:()=>T,Vb:()=>U,YR:()=>K,qr:()=>V,DI:()=>$,tv:()=>Y,y2:()=>W,CV:()=>ei,Ux:()=>ee});var n=r(284748),i=r(371410),o=Object.freeze({WEBSOCKET_DISCONNECTED:1003,ICE_CONNECTION_FAILED:4005,AUDIO_BLOCKED:3008}),a=function(){var e,t=(0,n.C1)();return(null==t?void 0:t.type)===i.a5.ERROR?null==(e=t.data)?void 0:e.code:null},s=r(275271),l=r(739792),c=r(60878),u=r(7447),d=function(e){return"".concat("live_streams.room.hms_errors.").concat(e)},f=function(){var e=(0,c.pm)().error,t=(0,u.I3)(u.Hj).addProviderError,r=a(),o=(0,n._U)(i.Yt),f=function(r){var n={1e3:(0,l.t)(d("1000_websocket_blocked")),1003:(0,l.t)(d("1003_websocket_disconnected")),2003:(0,l.t)(d("2003_endpoint_not_reachable")),3001:(0,l.t)(d("3001_cannot_access_device")),3002:(0,l.t)(d("3002_capture_device_not_available")),3003:(0,l.t)(d("3003_capture_device_is_in_use")),4005:(0,l.t)(d("4005_ice_connection_failed"))}[r];t("".concat(r,": ").concat(n)),n&&e(n)};(0,s.useEffect)(function(){r&&f(r)},[r]),(0,s.useEffect)(function(){o.error&&e((0,l.t)("live_streams.room.hls_error"))},[o.error])},m=function(){var e,t,r=(0,n._U)(i.Yt),o=(0,n._U)(i.Go);return{hlsUrl:null==(e=r.variants[0])?void 0:e.url,isHlsRunning:!!(null==r?void 0:r.running),isRecording:!!(null==o||null==(t=o.hls)?void 0:t.running)}},p=function(){var e,t=(0,n._U)(i.UP);return{localPeerDownlinkQuality:null==(e=(0,n._U)((0,i.hE)(null==t?void 0:t.id)))?void 0:e.downlinkQuality}},b=Object.freeze({UPDATE_ROOM:"update-room"}),h=Object.freeze({STOP_SCREENSHARE:"stop-screenshare"}),y="system",v=function(){var e=(0,n._U)(i.I3),t=(0,n._U)((0,i.cH)(e)),r=(0,n.cw)();return{metadata:t,setMetadata:function(e){r.changeMetadata(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,e))}}},g=function(e){var t=e.onRoomUpdate,r=e.onEndStream,o=(0,n.C1)(),a=v().setMetadata;(0,s.useEffect)(function(){if(o){var e=o.type,n=o.data||{},s=n.type,l=n.message,c=n.reason;switch(e){case i.a5.NEW_MESSAGE:if(s===y&&l===b.UPDATE_ROOM)null==t||t();else if("metadata"===s){var u=l?JSON.parse(l):null;u&&(void 0===u?"undefined":u&&"undefined"!=typeof Symbol&&u.constructor===Symbol?"symbol":typeof u)=="object"&&a(u)}return;case i.a5.ROOM_ENDED:null==r||r(c);return;default:return}}},[o])},_=r(359951),x=r(437588),j=function(){var e=(0,n._U)(i.BK),t=(0,s.useMemo)(function(){return e.map(_.B)},[e]),r=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===x.VM.HOST})},[t]),o=(0,n._U)(i.g),a=(0,s.useMemo)(function(){return o.map(_.B)},[o]),l=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===x.VM.HLS_SPECTATOR})},[t]),c=(0,s.useMemo)(function(){return t.filter(function(e){return e.roleName===x.VM.MODERATOR})},[t]);return{peers:t,peersWithHandRaised:a,hosts:r,spectators:l,moderators:c}},w=function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null==t?void 0:t.find(function(e){return e.id===n.id}))||(null==t?void 0:t[0])||null}else r.current=(null==t?void 0:t[0])||null},O=function(){var e=j(),t=e.peers,r=e.hosts,o=e.spectators,a=(0,n._U)(i.vX),l=(0,s.useMemo)(function(){return a?(0,_.B)(a):null},[a]),c=(0,s.useRef)(null);w(l,r,c);var u=(0,n._U)(i.Dl),d=(0,s.useCallback)(function(e){return!!u&&Object.values(u).some(function(t){return t.peerID===e})},[u]);return{peers:t,hosts:r,spectators:o,dominantSpeaker:l,selectedSpeaker:c.current,isSpeaking:d}},S=r(705590),k=function(e){var t=null==e?void 0:e.videoTrack,r=(0,S.R)({trackId:t}).videoRef,o=(0,n._U)((0,i.GP)(t));return{videoRef:r,hasVideo:!!(null==o?void 0:o.enabled)}},N=function(){return{recorderToken:null}},P=r(365001);function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){C(o,n,i,a,s,"next",e)}function s(e){C(o,n,i,a,s,"throw",e)}a(void 0)})}}function I(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var T=function(e){var t=e.token,r=e.onJoinError,o=e.participantData,a=e.isStreamEnded,u=(0,P.g)(o),d=(0,c.pm)().error,m=(0,n.cw)(),p=(0,n._U)(i.UP),b=(0,n._U)(i.ln),h=(0,n._U)(i.K0),y=!!t&&!b,v=(null==p?void 0:p.roleName)===x.VM.HOST,g=(null==p?void 0:p.roleName)===x.VM.HLS_SPECTATOR,_=(0,n._U)(i.ud),j=null==p?void 0:p.roleName;return f(),(0,s.useEffect)(function(){A(function(){return I(this,function(e){switch(e.label){case 0:if(!(t&&!b&&!a))return[3,2];return[4,A(function(){var e,n;return I(this,function(i){var o,a,s,c;switch(i.label){case 0:if(i.trys.push([0,4,,5]),!h)return[3,2];return[4,m.leave()];case 1:i.sent(),i.label=2;case 2:return[4,m.join((o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),a=a={authToken:t||""},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o))];case 3:return i.sent(),[3,5];case 4:return s=e=i.sent(),(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](s):s instanceof c)&&(console.error(n="Could not join room: ".concat(e.message)),d((0,l.t)("live_streams.room.join_error")),r&&r(n)),[3,5];case 5:return[2]}})})()];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[t,b,a]),{isConnected:b,isJoining:y,isHost:v,isHlsSpectator:g,isSomeoneScreenSharing:_,role:j}},E=function(){var e=(0,n._U)(i.pk),t=(0,s.useMemo)(function(){return e?(0,_.B)(e):void 0},[e]),r=(0,n._U)((0,i.K6)(null==t?void 0:t.id));return{peer:t,videoRef:(0,S.R)({trackId:null==r?void 0:r.id}).videoRef,hasVideo:!!(null==r?void 0:r.enabled),shouldWarnInfinityMirror:(null==r?void 0:r.displaySurface)==="monitor"}},L=r(398098),D=r(72727),M=r(852770);function R(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function B(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,c.pm)().error,r=(0,n.cw)(),o=(0,n._U)(i.VP),a=(0,n._U)(i.ud),s=(0,D.L)().isElectron,u=(0,L.j)({type:"moderator",onEvent:function(e){e===h.STOP_SCREENSHARE&&o&&r.setScreenShareEnabled(!1)}}).sendEvent;return{isScreenSharingEnabled:o,isSomeoneScreenSharing:a,toggleScreenSharing:function(){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!o&&a&&!e)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),!o&&a&&u(h.STOP_SCREENSHARE),[4,r.setScreenShareEnabled(!o,{systemAudio:"include"})];case 2:return i.sent(),[3,4];case 3:if(n=i.sent(),s)return t((0,l.t)("live_streams.room.electron_screen_sharing_browser_error")),[2];if(B(n,Error)&&"SystemDeniedPermission"===n.name)return t((0,l.t)("live_streams.room.screen_sharing_os_error")),[2];return t((0,l.t)("live_streams.room.screen_sharing_browser_error")),console.error(n),B(n,Error)&&(0,M.dD)(n),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){R(o,r,i,a,s,"next",e)}function s(e){R(o,r,i,a,s,"throw",e)}a(void 0)})})()}}};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U=function(){var e,t=(e=(0,s.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1],a=(0,n.C1)();(0,s.useEffect)(function(){if(a)switch(a.type){case i.a5.RECONNECTING:o(!0);break;case i.a5.RECONNECTED:o(!1)}},[a]);var l=p().localPeerDownlinkQuality;return!!l&&l>=0&&l<=1||r},Z=function(){var e=(0,n.cw)();return function(){return e.sendBroadcastMessage(b.UPDATE_ROOM,y)}},G=r(41506),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.pageSize,o=j().peersWithHandRaised,a=(0,n._U)(i.Dl),l=(0,s.useMemo)(function(){return Object.values(a).map(function(e){return e.peerID})},[a]),c=(0,s.useMemo)(function(){return o.map(function(e){return e.id})},[o]);return{orderedPeers:(0,G.$)({peers:e,speakingIds:l,handRaisedIds:c,pageSize:void 0===r?8:r})}},V=function(){var e=(0,n.cw)();return function(){return e.leave()}},W=function(){var e=(0,n.cw)(),t=(0,n._U)(i.lj),r=null==t?void 0:t.requestedBy;return{hasRoleChangeRequest:!!t,requestedByPeer:r?(0,_.B)(r):null,requestRoleChange:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.changeRoleOfPeer(t,r,n)},acceptRoleChange:function(){return t&&e.acceptChangeRole(t)},rejectRoleChange:function(){return t&&e.rejectChangeRole(t)}}},H=function(e){var t;return{peerDownlinkQuality:null==(t=(0,n._U)((0,i.hE)(null==e?void 0:e.id)))?void 0:t.downlinkQuality}},Q=function(e){var t=(0,n._U)((0,i.xn)(null==e?void 0:e.id)),r=(0,n._U)((0,i.YC)(null==e?void 0:e.id)),o=(0,n.cw)();return{isMicrophoneEnabled:t,isCameraEnabled:r,muteMicrophone:(0,s.useCallback)(function(){return(null==e?void 0:e.audioTrack)&&o.setRemoteTrackEnabled(e.audioTrack,!1)},[o,null==e?void 0:e.audioTrack]),disableCamera:(0,s.useCallback)(function(){return(null==e?void 0:e.videoTrack)&&o.setRemoteTrackEnabled(e.videoTrack,!1)},[o,null==e?void 0:e.videoTrack])}},K=function(e){return{externalPeerId:e}};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $=function(){var e,t=(e=(0,s.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return J(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1],a=(0,n.C1)(i.a5.ROLE_UPDATED),l=null==a?void 0:a.data;return(0,s.useEffect)(function(){a&&l&&l.isLocal&&l.roleName===x.VM.MODERATOR&&o(!0)},[a]),{roleChangedToModerator:r,hideModeratorNotification:function(){return o(!1)}}};function X(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var Y=function(){var e=a(),t=(0,n.cw)();return{isAudioBlocked:e===o.AUDIO_BLOCKED,unblockAudio:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,t.unblockAudio()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){X(o,n,i,a,s,"next",e)}function s(e){X(o,n,i,a,s,"throw",e)}a(void 0)})})()}}},ee=function(){var e=(0,n.cw)(),t=(0,n._U)(i.UP);return{muteAllPeersMicrophone:function(){e.setRemoteTracksEnabled({enabled:!1,roles:["host"],type:"audio"})},areAllPeersMuted:Object.values((0,n._U)(i.zK)).filter(function(e){return e.peerId!==(null==t?void 0:t.id)&&"audio"===e.type}).every(function(e){return!e.enabled})}};function et(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function er(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){et(o,n,i,a,s,"next",e)}function s(e){et(o,n,i,a,s,"throw",e)}a(void 0)})}}function en(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ei=function(e){var t=(0,n._U)(i.I3),r=e||t,o=(0,n.cw)(),a=(0,n._U)((0,i.Ag)(r)),l=(0,s.useCallback)(function(){return er(function(){return en(this,function(t){switch(t.label){case 0:if(e)return[3,2];return[4,o.raiseLocalPeerHand()];case 1:return t.sent(),[3,4];case 2:return[4,o.raiseRemotePeerHand(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[o,e]),c=(0,s.useCallback)(function(){return er(function(){return en(this,function(t){switch(t.label){case 0:if(e)return[3,2];return[4,o.lowerLocalPeerHand()];case 1:return t.sent(),[3,4];case 2:return[4,o.lowerRemotePeerHand(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[o,e]),u=(0,s.useCallback)(function(){return er(function(){return en(this,function(e){switch(e.label){case 0:if(!a)return[3,2];return[4,c()];case 1:return e.sent(),[3,4];case 2:return[4,l()];case 3:e.sent(),e.label=4;case 4:return[2]}})})()},[a,c,l]);return{isHandRaised:a,raiseHand:l,lowerHand:c,toggleHand:u}},eo=r(289634),ea=r(486289),es=function(){var e=(0,eo.Z)({role:x.VM.HLS_SPECTATOR,limit:ea.i}),t=e.peers,r=e.loadPeers,n=e.loadMorePeers,i=e.hasNext,o=e.total;return{peers:(0,s.useMemo)(function(){return t.map(_.B)},[t]),loadPeers:r,loadMorePeers:n,hasNext:i,total:o}}},365001:function(e,t,r){"use strict";r.d(t,{g:()=>a});var n=r(275271),i=r(7447),o=r(841818),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,i.I3)(i.vi),a=(0,o.N)(),s=!!(null==a?void 0:a.mute_on_join)&&!(null==a?void 0:a.can_manage);return(0,n.useMemo)(function(){var n,i;return{userName:null!=(n=null==e?void 0:e.name)?n:"",authToken:t,metaData:JSON.stringify(e||{}),rememberDeviceSelection:!1,captureNetworkQualityInPreview:!0,settings:{isAudioMuted:s||!r.microphoneEnabled,isVideoMuted:!r.cameraEnabled,audioInputDeviceId:r.audioInputId,audioOutputDeviceId:null!=(i=r.audioOutputId)?i:void 0,videoDeviceId:r.videoInputId,speakerAutoSelectionBlacklist:"all"}}},[e,t,s,r])}},171458:function(e,t,r){"use strict";r.d(t,{Ji:()=>ey,Qc:()=>X,Nc:()=>eC,p$:()=>en,u9:()=>H,C:()=>ed,nH:()=>L,S2:()=>l.S,h5:()=>eu,NW:()=>p.N,_K:()=>Q,u7:()=>K,tv:()=>E.t,Qs:()=>P,rs:()=>S,eR:()=>$.e,F7:()=>V,e4:()=>eN,fX:()=>em,H9:()=>T,aL:()=>ex,Xc:()=>U,aV:()=>y.a,B0:()=>h,wA:()=>A,F5:()=>et,ar:()=>Y,c9:()=>m,sv:()=>er,bF:()=>ej,_F:()=>es,C3:()=>J.C});var n,i,o,a,s,l=r(612890);r(160138);var c=r(275271),u=r(739792),d=r(524094),f=r(60878),m=function(){var e=(0,d.NA)(),t=e.data.room,r=e.status,n=r.isRoomError,i=r.apiError,o=(0,f.pm)().error;(0,c.useEffect)(function(){(null==i?void 0:i.status)===401&&(o((0,u.t)("live_streams.room.authorization_error")),window.location.href="/"),(null==i?void 0:i.status)!==401&&n&&!t&&(window.location.href="/")},[t,n,i,o])},p=r(841818),b=r(437588),h=function(){var e=(0,d.cy)().room;return{roomType:(null==e?void 0:e.room_type)||b.H0.STREAM,isLiveRoom:(0,b.$e)(e),isLiveStream:(0,b.ee)(e)}},y=r(461357),v=r(548298),g=r(7447),_=r(109687),x=r(137102),j=r(263235);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){var t=(0,j.M)({hms:_.GK,livekit:x.KI})(),r=t.peers,n=t.loadPeers,i=t.loadMorePeers,o=t.hasNext,a=t.total,s=(0,g.I3)(g.zD),l=s.setLoadFn,u=s.load,f=s.loadFn,m=s.setHasNext,p=s.setLoadMoreFn,b=s.setTotal,h=s.setData,y=s.data,w=s.shouldPoll,S=o(),k=(0,c.useMemo)(function(){return O(e||[]).concat(O(y||[]))},[e,y]),N=(0,d.y4)().refetchParticipants,P=null==k?void 0:k.reduce(function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName)},""),C=(0,v.c)(P,1e3);(0,c.useEffect)(function(){(null==C?void 0:C.length)&&N()},[C,N]),(0,c.useEffect)(function(){l(n),p(i)},[]),(0,c.useEffect)(function(){b(a)},[b,a]);var A=null==r?void 0:r.reduce(function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName,"-")},"");(0,c.useEffect)(function(){m(S)},[m,S]),(0,c.useEffect)(function(){h(r)},[A]);var I=!!f;(0,c.useEffect)(function(){if(I&&(u(),w)){var e=setInterval(function(){u()},3e3);return function(){clearInterval(e)}}},[u,I,w])},k=r(455842);function N(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var P=function(){var e=(0,c.useRef)(!1),t=(0,d.y4)().goLiveAsync,r=(0,k.JC)();return function(){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(e.current)return[2];n.label=1;case 1:return n.trys.push([1,4,5,6]),e.current=!0,[4,t()];case 2:return n.sent(),[4,r()];case 3:return n.sent(),[3,6];case 4:return console.error("Error going live",n.sent()),[3,6];case 5:return e.current=!1,[7];case 6:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){N(o,r,i,a,s,"next",e)}function s(e){N(o,r,i,a,s,"throw",e)}a(void 0)})})()}};function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var A=function(){var e=(0,d.y4)().endStreamDelayedAsync,t=(0,l.S)(),r=(0,k.JC)();return function(){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),[4,r()];case 2:return n.sent(),[4,t()];case 3:return n.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){C(o,r,i,a,s,"next",e)}function s(e){C(o,r,i,a,s,"throw",e)}a(void 0)})})()}};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,i=(t=(0,c.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=function(){a(!1),clearTimeout(r),r=setTimeout(function(){return a(!0)},n)},l=function(){document.removeEventListener("mousemove",s),clearTimeout(r)};return(0,c.useEffect)(function(){return e?(document.addEventListener("mousemove",s),a(!0)):(l(),a(!1)),function(){l()}},[e]),{isUiHidden:o}},E=r(121161),L=function(e,t){var r=(0,l.S)(),n=(0,c.useRef)(!1),i=(0,c.useCallback)(function(){r()},[r]);(0,c.useEffect)(function(){t&&e&&(n.current=!0),e||(n.current=!1)},[e,t]),(0,c.useEffect)(function(){if(!(!e||!t||(0,b.a_)(t)))return window.addEventListener("beforeunload",i),window.addEventListener("unload",i),function(){window.removeEventListener("beforeunload",i),window.removeEventListener("unload",i)}},[e,null==t?void 0:t.id,i]),(0,c.useEffect)(function(){if(!(!t||(0,b.a_)(t)))return function(){t&&!(0,b.a_)(t)&&n.current&&i()}},[null==t?void 0:t.id])},D=r(72622),M=r(903225),R=r(441342),B=r(547144),z=r(351922),F=r(266706),U=function(){var e=(0,z.R)().isLoading,t=(0,R.wh)(),r=t.currentCommunityMember,n=t.currentUser,i=t.isLoading,o=(0,F.O)(),a=o.currentContact,s=o.isLoading,l=(0,M.k6)(),u=(0,p.N)(),d=e||i||s;(0,c.useEffect)(function(){!d&&(u&&(0,b.L6)(u)&&!r?l.push(B.dE.publicRoom({roomSlug:u.slug})):n||a?u&&D.isMobile&&window.location.pathname!==B.dE.mobileRoom({roomSlug:u.slug})&&l.push(B.dE.mobileRoom({roomSlug:u.slug})):window.location.href=B.$T.signIn({params:{post_login_redirect:window.location.href}}))},[r,a,n,l,d,u])},Z=r(131906),G=r(251630);function q(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var V=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=X().refetchCohosts;return(0,Z.useMutation)(function(){return G.Qk.addCohosts({roomId:t,formData:{cohosts_community_member_ids:[r]}})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,b.VM.HOST)];case 1:return t.sent(),s(),i((0,u.t)("live_streams.room.participant_invited_to_cohost_message")),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){q(o,n,i,a,s,"next",e)}function s(e){q(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_invited_to_cohost_error"))}}).mutate};function W(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var H=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=(0,d.y4)().refetchParticipants,l=X().refetchCohosts;return(0,Z.useMutation)(function(){return G.Qk.changeRole({roomId:t,participantId:r,role:b.VM.HLS_SPECTATOR})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,b.VM.HLS_SPECTATOR,!0)];case 1:return t.sent(),s(),l(),i((0,u.t)("live_streams.room.participant_removed_as_cohost_message"),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){W(o,n,i,a,s,"next",e)}function s(e){W(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_removed_as_cohost_error"))}}).mutate},Q=function(e){var t=(0,p.N)(),r=(0,k.Kr)().requestRoleChange,n=(0,f.pm)(),i=n.success,o=n.error,a=(0,J.C)().hosts,s=(0,d.cy)().participants,l=(0,d.y4)().refetchParticipants,c=function(){e&&e(),i((0,u.t)("live_streams.room.cohost_removed_successfully"),{duration:"short",shouldUseProgress:!1})},m=function(){return o((0,u.t)("live_streams.room.could_not_remove_cohost_error"))},h=(0,Z.useMutation)(function(e){return G.Qk.removeCohost({id:e,roomId:null==t?void 0:t.id})},{onSuccess:c,onError:m}),y=function(e){if(!a)return null;var t=a.find(function(t){return Number(t.customerUserId)===e});return null==t?void 0:t.id},v=(0,Z.useMutation)(function(e){return G.Qk.changeRole({roomId:null==t?void 0:t.id,participantId:e,role:b.VM.HLS_SPECTATOR})},{onSuccess:function(e){var t=y(null==e?void 0:e.id);t&&r(t,b.VM.HLS_SPECTATOR,!0),l(),c()},onError:m}),g=function(e){if(!a)return!1;var t=a.find(function(t){var r;return(null==s||null==(r=s[Number(t.customerUserId)||0])?void 0:r.community_member_id)===e});return null==t?void 0:t.customerUserId};return function(e){var t=g(e);t?v.mutate(t):h.mutate(e)}},K=function(){var e=P(),t=(0,d.NA)(),r=t.data,n=r.room,i=r.currentParticipant,o=t.status,a=o.isStreamEnded,s=o.isJoining,l=(0,b.SS)(n),u=(0,b.Zo)(n),f=(0,b.HN)(n),m=(0,b.$e)(n);(0,c.useEffect)(function(){i&&l&&!s&&!a&&u&&f&&m&&e()},[i,l,s,a,u,f,m])},J=r(28320),$=r(887904),X=function(){var e=(0,p.N)(),t=!!(0,d.cy)().currentParticipant&&(0,b.HN)(e),r=(0,Z.useQuery)({queryKey:[B.av.liveStreams.getCohosts({roomId:null==e?void 0:e.id})],enabled:t}),n=r.data,i=r.isLoading,o=r.refetch;return{cohosts:(null==n?void 0:n.records)||[],isLoadingCohosts:i,refetchCohosts:function(){t&&o()}}},Y=function(e){var t=e.enabled,r=new URLSearchParams((0,M.TH)().search).get("recording_key"),n=(0,d.NA)(),i=n.data,o=i.room,a=i.recorder,s=n.actions.createRecorder;(0,c.useEffect)(function(){t&&o&&r&&s&&!a&&s(r)},[t,o,r,a,s])};function ee(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var et=function(){var e=(0,d.NA)(),t=e.actions,r=t.setViewTypeOverride,n=t.updateRoomAsync,i=e.data,o=i.room,a=i.viewTypeOverride,s=h().isLiveStream,l=a||(null==o?void 0:o.view_type),c=(0,k.JC)(),u=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(l===e)return[2];if(!(s||(0,b.HN)(o)))return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({view_type:e})];case 2:return t.sent(),c(),[3,4];case 3:return console.error(t.sent().message),[3,4];case 4:return[3,6];case 5:r(e),t.label=6;case 6:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ee(o,n,i,a,s,"next",e)}function s(e){ee(o,n,i,a,s,"throw",e)}a(void 0)})})()};return{isSpeakerTopView:l===b.Bk.SPEAKER,isSpeakerSideView:l===b.Bk.SPEAKER_VARIANT,isSpeakerView:l===b.Bk.SPEAKER||l===b.Bk.SPEAKER_VARIANT,isGridView:l===b.Bk.GRID,setSpeakerTopView:function(){return u(b.Bk.SPEAKER)},setSpeakerSideView:function(){return u(b.Bk.SPEAKER_VARIANT)},setGridView:function(){return u(b.Bk.GRID)}}},er=function(){var e=(0,k.oZ)();return{isHandRaised:e.isHandRaised,raiseHand:e.raiseHand,lowerHand:e.lowerHand,toggleHand:e.toggleHand}},en=function(e){var t=(0,k.oZ)(e);return{isHandRaised:t.isHandRaised,raiseHand:t.raiseHand,lowerHand:t.lowerHand,toggleHand:t.toggleHand}};function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eo(e){return function(e){if(Array.isArray(e))return ei(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ea(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){if(e){if("string"==typeof e)return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ei(e,t)}}var es=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.offset,a=Math.max(0,void 0===o?0:o),s=eo(a>0?Array(a).fill(null):[]).concat(eo(e)),l=(t=(0,c.useState)(r),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||ea(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1],f=(u-1)*n,m=s.slice(f,f+n),p=Math.ceil(s.length/n),b=1===u,h=u===p;return(0,c.useEffect)(function(){u>p&&d(Math.max(p,1))},[u,p]),{currentPagePeers:m.filter(function(e){return null!==e}),page:u,totalPages:p,next:function(){return d(Math.min(u+1,p))},prev:function(){return d(Math.max(u-1,1))},goToPage:function(e){return d(Math.max(1,Math.min(e,p)))},isFirstPage:b,isLastPage:h}},el=r(252484);function ec(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eu=function(e){var t=(0,R.wh)().currentCommunityMember,r=!!(null==t?void 0:t.is_admin),n=(0,p.N)(),i=h().roomType,o=(0,el.tm)({enabled:r}),a=o.streamingHoursAvailable,s=o.isLoading,l=o.streamingTotalPlanHours,c=r&&!a,d=!(0,b.HN)(n)&&c,m=(0,b.HN)(n)&&c,y=(0,f.pm)().success,v=function(){e(),y((0,u.t)("settings.billing.add_ons.changes_succeeded"))},g=(0,el.$v)(function(){return v()},{enabled:r}),_=g.purchaseAsync,x=g.unitSize,j=g.currentQuantity,w=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!x)return[2];return[4,_(x)];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ec(o,n,i,a,s,"next",e)}function s(e){ec(o,n,i,a,s,"throw",e)}a(void 0)})})()};return{addonPurchaseNotAllowed:d,isLoadingUsage:s,onClickHandler:function(){return c?w():e()},liveButtonLabel:function(){return m?(0,u.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,u.t)("live_streams.pre_join.conference.room_button_label")},backstageButtonLabel:function(){return m?(0,u.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,u.t)("live_streams.pre_join.".concat(i,".enter_backstage_button_label"))},boxMessage:function(){return d?(0,u.t)("live_streams.pre_join.".concat((0,b.vX)(n),".non_host_upgrade_message")):c?(0,u.t)("live_streams.pre_join.streaming_limit_exceeded",{hours:l+Number(j||0)}):(0,b.kx)(n)?(0,u.t)("live_streams.pre_join.".concat((0,b.vX)(n),".host_capacity_reached_message")):""}}},ed=function(e,t,r){var n=(0,k.XN)(e).externalPeerId,i=(0,f.pm)(),o=i.success,a=i.error,s=(0,d.y4)().refetchParticipants;return(0,Z.useMutation)(function(){return G.Qk.removeParticipant({roomId:t,participantId:r,peerId:n})},{onSuccess:function(){s(),o((0,u.t)("live_streams.room.participant_removed_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return a((0,u.t)("live_streams.room.participant_removed_error"))}}).mutate};function ef(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var em=function(e,t,r,n){var i=(0,f.pm)(),o=i.success,a=i.error,s=(0,k.Kr)().requestRoleChange;return(0,Z.useMutation)(function(){return G.Qk.addModerator({roomId:t,formData:{moderator_community_member_id:r,participant_id:n}})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,s(e,b.VM.MODERATOR,!0)];case 1:return t.sent(),o((0,u.t)("live_streams.room.participant_invited_to_moderator_message")),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ef(o,n,i,a,s,"next",e)}function s(e){ef(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return a((0,u.t)("live_streams.room.participant_invited_to_moderator_error"))}}).mutate};function ep(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function eb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eh=Object.freeze((eb(n={},b.H0.STREAM,b.VM.HLS_SPECTATOR),eb(n,b.H0.CONFERENCE,b.VM.HOST),n)),ey=function(e,t,r){var n=(0,f.pm)(),i=n.success,o=n.error,a=(0,k.Kr)().requestRoleChange,s=eh[h().roomType]||b.VM.HLS_SPECTATOR;return(0,Z.useMutation)(function(){return G.Qk.changeRole({roomId:t,participantId:r,role:s})},{onSuccess:function(){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,a(e,s,!0)];case 1:return t.sent(),i((0,u.t)("live_streams.room.participant_removed_as_moderator_message"),{duration:"short",shouldUseProgress:!1}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ep(o,n,i,a,s,"next",e)}function s(e){ep(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){return o((0,u.t)("live_streams.room.participant_removed_as_moderator_error"))}}).mutate},ev=r(725265),eg=r(41140),e_=r(27521),ex=function(){var e=(0,eg.B)().toggleCamera,t=(0,e_.K)().toggleMicrophone;(0,ev.Z)("shift+v",function(){e()}),(0,ev.Z)("shift+m",function(){t()})},ej=function(){var e=(0,d.cy)().currentParticipant,t=(0,g.if)(),r=t.displayChat,n=t.isSidebarOpen,i=t.isChatSelected;(0,c.useEffect)(function(){(0,b.Vq)(e)&&r()},[e,r]),(0,c.useLayoutEffect)(function(){if(n&&i){var e=document.getElementById("message-scroll-view");e&&(e.scrollTop=e.scrollHeight)}},[i,n])},ew=document,eO=document.documentElement,eS=(null==(i=eO.requestFullscreen)?void 0:i.bind(eO))||(null==(o=eO.webkitRequestFullscreen)?void 0:o.bind(eO)),ek=(null==(a=ew.exitFullscreen)?void 0:a.bind(ew))||(null==(s=ew.webkitExitFullscreen)?void 0:s.bind(ew));eO.requestFullscreen=eS,ew.exitFullscreen=ek;var eN=function(){var e=(0,g.if)().setIsFullscreen;(0,c.useEffect)(function(){var t=function(){return e(!!(ew.fullscreenElement||ew.webkitFullscreenElement))};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),function(){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}},[e])},eP=r(93199),eC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refetchInterval,r=(0,R.wh)(),n=r.currentCommunity,i=r.isLoading,o=(0,M.UO)().roomSlug,a=(0,p.N)(),s=(0,Z.useQuery)(["public-live-stream","guests",o,null==n?void 0:n.id],function(){return(0,eP.UT)(B.qi.rooms.guests.index({slug:o,params:{community_id:null==n?void 0:n.id}}))},{enabled:!!a&&(0,b.L6)(a)&&!i&&!!o,refetchInterval:(void 0===t?null:t)||!1}),l=s.data,c=s.isLoading;return{guests:l,count:(null==l?void 0:l.length)||0,isLoading:c}}},872496:function(e,t,r){"use strict";r.d(t,{aI:()=>o,bB:()=>s,mC:()=>a,tw:()=>l});var n=r(28687),i=r(437588),o=Object.freeze({PUBLISH_METADATA:"PUBLISH_METADATA",UPDATE_ROOM:"UPDATE_ROOM",MUTE_MICROPHONE:"MUTE_MICROPHONE",DISABLE_CAMERA:"DISABLE_CAMERA",LOWER_HAND:"LOWER_HAND",STOP_SCREENSHARE:"STOP_SCREENSHARE",REQUEST_ROLE_CHANGE:"REQUEST_ROLE_CHANGE"}),a=function(e,t,r,n){if(r&&t){var i=new TextEncoder().encode(JSON.stringify({type:e,data:n}));return t.publishData(i,{reliable:!0,destinationIdentities:[r]})}return Promise.resolve()},s=function(e){try{return JSON.parse(e.metadata||"{}")}catch(e){return console.error("Could not parse participant metadata: ",e.message),{}}},l=function(e){var t,r,o=s(e),a=o.role||i.VM.HLS_SPECTATOR,l=o.user_id,c=(null==(r=e.attributes)?void 0:r.isHandRaised)==="true";return{id:e.identity,name:e.name||e.identity,customerUserId:l,roleName:a,isHandRaised:c,isLocal:null!=(t=n.Ix)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t,auxiliaryTracks:[],isCameraEnabled:e.isCameraEnabled,isMicrophoneEnabled:e.isMicrophoneEnabled,isScreenShareEnabled:e.isScreenShareEnabled,isSpeaking:e.isSpeaking,metadata:e.metadata}}},137102:function(e,t,r){"use strict";r.d(t,{Bw:()=>O,Dq:()=>B,MU:()=>z,R3:()=>W,zU:()=>ep,l8:()=>en,i4:()=>ea,AR:()=>ec,my:()=>Q,ww:()=>_,fL:()=>k,$x:()=>V,du:()=>eu,_x:()=>q,KI:()=>ev,jU:()=>K,yx:()=>ei,Mi:()=>et,Em:()=>d,Hg:()=>er,AE:()=>S,yK:()=>j,VH:()=>b});var n=r(275271),i=r(844928),o=r.n(i),a=r(811752),s=r(945007),l=r(28687);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(){var e=u((0,n.useState)(!1),2),t=e[0],r=e[1],i=u((0,n.useState)(null),2),c=i[0],d=i[1],f=(0,a.f)(),m=(0,s.v)(),p=(0,n.useCallback)(function(e){try{var t=JSON.parse(e);d(t.hlsUrl)}catch(e){o().notify(Error("LivekitParseRoomMetadataError"),function(t){t.severity="error",t.context=window.location.href,t.addMetadata("error",{error:e})}),console.error("Failed to parse metadata:",e)}},[]),b=(0,n.useCallback)(function(e){r(e)},[]);return(0,n.useEffect)(function(){f&&(r(f.isRecording),m.metadata&&p(m.metadata))},[f,m.metadata,p]),(0,n.useEffect)(function(){if(f)return f.on(l.TQ.RecordingStatusChanged,b),f.on(l.TQ.RoomMetadataChanged,p),function(){f.off(l.TQ.RecordingStatusChanged,b),f.off(l.TQ.RoomMetadataChanged,p)}},[f,b,p]),{hlsUrl:c,isHlsRunning:!!c||t,isRecording:t}},f=r(602184),m=Object.freeze({excellent:5,good:3,poor:1,lost:0,unknown:5}),p=r(99801),b=function(){var e=(0,p.X)();return{localPeerDownlinkQuality:m[(0,s.i)({participant:e}).quality]}},h=r(872496),y=r(168347),v=r(205189),g=new TextDecoder,_=function(e){var t=e.onRoomUpdate,r=e.onEndStream,i=(0,a.f)(),o=(0,p.X)(),s=(0,v.Y)(),c=s.toggleMicrophone,u=s.isMicrophoneEnabled,d=(0,y.C)(),f=d.toggleCamera,m=d.isCameraEnabled,b=(0,n.useCallback)(function(e){try{var r,n=g.decode(e);switch((JSON.parse(n)||{}).type){case h.aI.UPDATE_ROOM:t&&t();break;case h.aI.MUTE_MICROPHONE:u&&c();break;case h.aI.DISABLE_CAMERA:m&&f();break;case h.aI.LOWER_HAND:o.setAttributes({isHandRaised:"false"});break;case h.aI.STOP_SCREENSHARE:o.setScreenShareEnabled(!1)}}catch(e){(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)&&console.error("Could not decode received data - ",e.message)}},[u,m]);(0,n.useEffect)(function(){var e=function(e){(e===l.W4.ROOM_DELETED||e===l.W4.PARTICIPANT_REMOVED)&&r&&r()};return i&&(i.on(l.TQ.DataReceived,b),i.on(l.TQ.Disconnected,e)),function(){i&&(i.off(l.TQ.DataReceived,b),i.off(l.TQ.Disconnected,e))}},[r,t,b,i])},x=r(437588),j=function(){var e=(0,s.K)().map(h.tw),t=(0,n.useMemo)(function(){return e.filter(function(e){return e.isHandRaised})},[e]),r=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.HOST})},[e]),i=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.HLS_SPECTATOR})},[e]),o=(0,n.useMemo)(function(){return e.filter(function(e){return e.roleName===x.VM.MODERATOR})},[e]);return{peers:e,peersWithHandRaised:t,hosts:r,spectators:i,moderators:o}},w=function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null==t?void 0:t.find(function(e){return e.id===n.id}))||(null==t?void 0:t[0])||null}else r.current=(null==t?void 0:t[0])||null},O=function(){var e=j(),t=e.peers,r=e.hosts,i=e.spectators,o=(0,n.useMemo)(function(){return(null==r?void 0:r.find(function(e){return e.isSpeaking}))||null},[r]),a=(0,n.useRef)(null);w(o,r,a);var s=(0,n.useCallback)(function(e){return!!(null==r?void 0:r.some(function(t){return t.id===e&&t.isSpeaking}))},[r]);return{peers:t,hosts:r,spectators:i,dominantSpeaker:o,selectedSpeaker:a.current,isSpeaking:s}},S=function(e){var t,r=null==(t=(0,s.V)([l.fQ.Source.Camera],null==e?void 0:e.id)[0])?void 0:t.publication,i=null==r?void 0:r.track,o=(0,n.useRef)(null),a=o.current,c=(null==r?void 0:r.isSubscribed)&&!(null==r?void 0:r.isMuted);return(0,n.useEffect)(function(){return a&&i&&(c?i.attach(a):i.detach(a)),function(){a&&i&&i.detach(a)}},[a,i,c]),{videoRef:o,hasVideo:c}},k=function(){var e=(0,a.f)(),t=new URLSearchParams(window.location.search).get("token");return(0,n.useEffect)(function(){e&&(console.log("START_RECORDING"),e.on(l.TQ.Disconnected,function(){return console.log("END_RECORDING")}))},[e]),{recorderToken:t}},N=r(739792),P=r(759178),C=r(841818),A=r(60878),I=r(7447);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){return"".concat("live_streams.room.livekit_errors.").concat(e)},D="reconnecting-toast",M=function(e){var t,r=e.hasDevicesAccess,i=e.onDisconnect,o=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return T(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],c=o[1],u=(0,A.pm)(),d=u.error,f=u.success,m=u.remove,b=(0,a.f)(),h=(0,p.X)(),y=(0,I.I3)(I.Hj).addProviderError,v=(0,n.useCallback)(function(e,t){y(e),d(e,t)},[y,d]),g=(0,n.useCallback)(function(){r&&(h.lastCameraError?v(h.lastCameraError.message):h.lastMicrophoneError&&v(h.lastMicrophoneError.message))},[v,h,r]),_=(0,n.useCallback)(function(e){var t,r=(E(t={},l.W4.DUPLICATE_IDENTITY,(0,N.t)(L("duplicate_identity"))),E(t,l.W4.JOIN_FAILURE,(0,N.t)(L("join_failure"))),E(t,l.W4.SIGNAL_CLOSE,(0,N.t)(L("signal_close"))),E(t,l.W4.UNKNOWN_REASON,(0,N.t)(L("unknown_reason"))),t);e&&r[e]&&v(r[e]||"")},[v]),x=(0,n.useCallback)(function(e){e!==l.em.SignalReconnecting||s?e===l.em.Connected&&s?(c(!1),m(D),f((0,N.t)(L("reconnected")))):e===l.em.Disconnected&&s&&(c(!1),m(D),v((0,N.t)(L("disconnected"))),i&&i("Connection lost")):(c(!0),v((0,N.t)(L("reconnecting")),{id:D,shouldAutohide:!1}))},[v,m,f,s,i]),j=(0,n.useCallback)(function(e,t,r){e.kind===l.fQ.Kind.Audio&&console.warn("Livekit: Audio track unsubscribed:",r.identity)},[]);(0,n.useEffect)(function(){if(b)return b.on(l.TQ.ConnectionStateChanged,x),b.on(l.TQ.Disconnected,_),b.on(l.TQ.MediaDevicesError,g),b.on(l.TQ.TrackUnsubscribed,j),function(){b.off(l.TQ.ConnectionStateChanged,x),b.off(l.TQ.Disconnected,_),b.off(l.TQ.MediaDevicesError,g),b.off(l.TQ.TrackUnsubscribed,j)}},[b,x,_,g,j])};function R(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var B=function(e){var t,r=e.token,i=e.onJoinError,o=e.isStreamEnded,c=e.participantData,u=(0,C.N)(),d=null!=(t=null==u?void 0:u.provider_url)?t:"",m=(0,a.f)(),p=(0,s.K)(),b=(0,f.E)().metadata,h=(0,P.p)().error,y=(null==b?void 0:b.role)===x.VM.HOST,v=(null==b?void 0:b.role)===x.VM.HLS_SPECTATOR;M({hasDevicesAccess:!(null==c?void 0:c.isRecorder)&&y,onDisconnect:i}),(0,n.useEffect)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(!(r&&!o&&m.state===l.em.Disconnected))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,m.connect(d,r,{autoSubscribe:!v,maxRetries:3})];case 2:return n.sent(),[3,4];case 3:var a,s;return a=e=n.sent(),(null!=(s=Error)&&"undefined"!=typeof Symbol&&s[Symbol.hasInstance]?!!s[Symbol.hasInstance](a):a instanceof s)&&(console.error(t="Could not connect to room: ".concat(e.message)),h((0,N.t)("live_streams.room.join_error")),i&&i(t)),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){R(o,n,i,a,s,"next",e)}function s(e){R(o,n,i,a,s,"throw",e)}a(void 0)})})(),function(){m.state===l.em.Connected&&m.disconnect()}},[r,m,o]);var g=(0,n.useMemo)(function(){return p.some(function(e){return e.isScreenShareEnabled})},[p]);return{isConnected:m.state===l.em.Connected,isJoining:m.state===l.em.Connecting,isHost:y,isHlsSpectator:v,role:null==b?void 0:b.role,isSomeoneScreenSharing:g}},z=function(){var e,t=(0,s.t)([l.fQ.Source.ScreenShare],{onlySubscribed:!0}),r=null==(e=t[0])?void 0:e.publication,i=null==r?void 0:r.track,o=(0,n.useMemo)(function(){return t.length>0?(0,h.tw)(t[0].participant):void 0},[t]),a=(0,n.useRef)(null),c=a.current,u=!!r&&!(null==r?void 0:r.isMuted);return(0,n.useEffect)(function(){return c&&i&&i.attach(c),function(){c&&i&&i.detach(c)}},[c,i]),{peer:o,videoRef:a,hasVideo:u,shouldWarnInfinityMirror:!1}},F=r(852770),U=r(72727);function Z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function G(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,A.pm)().error,r=(0,p.X)(),i=(0,s.K)(),o=(0,U.L)().isElectron,a=(0,n.useMemo)(function(){return i.find(function(e){return e.isScreenShareEnabled})},[i]),l=!!a,c=!!(null==r?void 0:r.isScreenShareEnabled);return{isScreenSharingEnabled:c,isSomeoneScreenSharing:l,toggleScreenSharing:function(){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!c&&l&&!e)return[2];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,r.setScreenShareEnabled(!c,{audio:!0,systemAudio:"include"})];case 2:if(!(i.sent()&&a&&!a.isLocal))return[3,4];return[4,(0,h.mC)(h.aI.STOP_SCREENSHARE,r,a.identity)];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:if(n=i.sent(),o)return t((0,N.t)("live_streams.room.electron_screen_sharing_browser_error")),[2];if(G(n,Error)&&"SystemDeniedPermission"===n.name)return t((0,N.t)("live_streams.room.screen_sharing_os_error")),[2];return t((0,N.t)("live_streams.room.screen_sharing_browser_error")),console.error(n),G(n,Error)&&(0,F.dD)(n),[3,6];case 6:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){Z(o,r,i,a,s,"next",e)}function s(e){Z(o,r,i,a,s,"throw",e)}a(void 0)})})()}}},V=function(){var e=(0,p.X)();return function(){if(!e)return Promise.reject("localParticipant is not present");var t=new TextEncoder,r=JSON.stringify({type:h.aI.UPDATE_ROOM});return e.publishData(t.encode(r),{reliable:!0})}},W=function(){return(0,a.f)().state===l.em.Reconnecting},H=r(41506),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.pageSize,i=j().peersWithHandRaised,o=(0,s.O)(),a=(0,n.useMemo)(function(){return o.map(function(e){return e.identity})},[o]),l=(0,n.useMemo)(function(){return i.map(function(e){return e.id})},[i]);return{orderedPeers:(0,H.$)({peers:e,speakingIds:a,handRaisedIds:l,pageSize:void 0===r?8:r})}},K=function(){var e=(0,a.f)();return function(){return e.disconnect()}};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var X=["host"],Y=new TextDecoder,ee=function(e){var t=JSON.parse(Y.decode(e))||{},r=t.type,n=t.data;return n&&r===h.aI.REQUEST_ROLE_CHANGE?n:null},et=function(){var e,t=(0,a.f)(),r=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return J(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],c=(0,s.C)().localParticipant,u=(0,n.useCallback)(function(e){try{var t=ee(e);t&&X.includes(t.role)&&t.participantId===(null==c?void 0:c.identity)&&o(t)}catch(e){console.error("Error decoding role change request",e)}},[null==c?void 0:c.identity]);(0,n.useEffect)(function(){return t&&t.on(l.TQ.DataReceived,u),function(){t&&t.off(l.TQ.DataReceived,u)}},[t,u]);var d=(null==i?void 0:i.requestedBy)||null;return{hasRoleChangeRequest:!!i,requestedByPeer:d,requestRoleChange:function(e,t,r){var n;return(n=function(){var n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){return r||!X.includes(t)?[2,Promise.resolve()]:(n={participantId:e,role:t,requestedBy:(0,h.tw)(c)},[2,(0,h.mC)(h.aI.REQUEST_ROLE_CHANGE,c,e,n)])})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){$(o,r,i,a,s,"next",e)}function s(e){$(o,r,i,a,s,"throw",e)}a(void 0)})})()},acceptRoleChange:function(){return o(null),Promise.resolve()},rejectRoleChange:function(){o(null)}}},er=function(e){var t=(0,p.X)(),r=(0,s.K)();return{peerDownlinkQuality:m[(0,s.i)({participant:r.find(function(t){return t.identity===e.id})||t}).quality]}},en=function(e){var t=(0,p.X)(),r=(0,s.V)([l.fQ.Source.Camera,l.fQ.Source.Microphone],null==e?void 0:e.id),i=(0,n.useMemo)(function(){return r.filter(function(e){return e.source===l.fQ.Source.Camera})},[r]),o=(0,n.useMemo)(function(){return r.filter(function(e){return e.source===l.fQ.Source.Microphone})},[r]).some(function(e){return!e.publication.isMuted}),a=i.some(function(e){return!e.publication.isMuted});return{isMicrophoneEnabled:o,muteMicrophone:(0,n.useCallback)(function(){return(0,h.mC)(h.aI.MUTE_MICROPHONE,t,e.id)},[t,e]),isCameraEnabled:a,disableCamera:(0,n.useCallback)(function(){return(0,h.mC)(h.aI.DISABLE_CAMERA,t,e.id)},[t,e])}},ei=function(e){return{externalPeerId:e}};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ea=function(){var e,t=(0,p.X)(),r=(e=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return(0,n.useEffect)(function(){var e=function(e,r){var n,i,a=r||t,s=(0,h.tw)((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={metadata:e||a.metadata},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)),l=(0,h.tw)(a);l.isLocal&&l.roleName===x.VM.MODERATOR&&s.roleName!==x.VM.MODERATOR&&o(!0)};return t.on(l.dd.ParticipantMetadataChanged,e),function(){t.off(l.dd.ParticipantMetadataChanged,e)}},[t]),{roleChangedToModerator:i,hideModeratorNotification:function(){return o(!1)}}};function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function el(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ec=function(){var e,t=(0,a.f)(),r=(e=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return es(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],s=(0,n.useCallback)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,t.startAudio()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){el(o,n,i,a,s,"next",e)}function s(e){el(o,n,i,a,s,"throw",e)}a(void 0)})})()},[t]),c=(0,n.useCallback)(function(e){o(!e)},[]);return(0,n.useEffect)(function(){return t.on(l.TQ.AudioPlaybackStatusChanged,c),function(){t.off(l.TQ.AudioPlaybackStatusChanged,c)}},[t,c]),{isAudioBlocked:i,unblockAudio:s}},eu=function(){var e=(0,p.X)(),t=(0,s.M)(),r=(0,s.t)([l.fQ.Source.Microphone],{updateOnlyOn:[l.TQ.TrackMuted,l.TQ.TrackUnmuted]});return{muteAllPeersMicrophone:(0,n.useCallback)(function(){return t.forEach(function(t){(0,h.mC)(h.aI.MUTE_MICROPHONE,e,t.identity)})},[e,t]),areAllPeersMuted:(0,n.useMemo)(function(){return r.filter(function(t){return t.participant.identity!==e.identity}).every(function(e){return e.publication.isMuted})},[r,e])}};function ed(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function ef(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ed(o,n,i,a,s,"next",e)}function s(e){ed(o,n,i,a,s,"throw",e)}a(void 0)})}}function em(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ep=function(e){var t,r=(0,p.X)(),i=(0,s.L)({kind:l.nC.STANDARD,identity:e}),o=e&&e!==r.identity?i:r,a=(null==o||null==(t=o.attributes)?void 0:t.isHandRaised)==="true",c=(0,n.useCallback)(function(e){return ef(function(){return em(this,function(t){switch(t.label){case 0:var n;if(null!=(n=l.Ix)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!n[Symbol.hasInstance](o):!(o instanceof n))return[3,2];return[4,o.setAttributes({isHandRaised:e.toString()})];case 1:return t.sent(),[3,4];case 2:if(!o)return[3,4];return[4,(0,h.mC)(h.aI.LOWER_HAND,r,o.identity)];case 3:t.sent(),t.label=4;case 4:return[2]}})})()},[r,o]),u=(0,n.useCallback)(function(){return ef(function(){return em(this,function(e){switch(e.label){case 0:return[4,c(!0)];case 1:return e.sent(),[2]}})})()},[c]),d=(0,n.useCallback)(function(){return ef(function(){return em(this,function(e){switch(e.label){case 0:return[4,c(!1)];case 1:return e.sent(),[2]}})})()},[c]),f=(0,n.useCallback)(function(){return ef(function(){return em(this,function(e){switch(e.label){case 0:return[4,c(!a)];case 1:return e.sent(),[2]}})})()},[c,a]);return{isHandRaised:a,raiseHand:u,lowerHand:d,toggleHand:f}},eb=r(486289);function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ey=function(){return Promise.resolve()},ev=function(){var e,t=(e=(0,n.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eh(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eh(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],o=(0,s.K)(),a=(0,n.useMemo)(function(){return o.map(h.tw).filter(function(e){return!!e.customerUserId&&e.roleName===x.VM.HLS_SPECTATOR})},[o]);return{peers:(0,n.useMemo)(function(){return a.slice(0,r*eb.i)},[a,r]),loadPeers:ey,loadMorePeers:(0,n.useCallback)(function(){return i(function(e){return e+1}),Promise.resolve()},[]),hasNext:(0,n.useCallback)(function(){return r*eb.i<a.length},[r,a.length]),total:a.length}}},168347:function(e,t,r){"use strict";r.d(t,{C:()=>f});var n=r(275271),i=r(811752),o=r(945007),a=r(28687),s=r(437588),l=r(7447),c=r(602184);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var f=function(){var e,t=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],f=t[1],m=(0,i.f)(),p=(0,c.E)().metadata,b=m.state===a.em.Connected&&p.role===s.VM.HOST,h=(0,l.I3)(l.YK),y=(0,l.Ft)().setCameraEnabled,v=(0,o.h)({source:a.fQ.Source.Camera,initialState:b?h:void 0}),g=v.toggle,_=v.enabled,x=v.pending,j=b?_:h,w=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!b)return[3,2];return[4,g()];case 1:r.sent(),r.label=2;case 2:return y(!j),f(null),[3,4];case 3:var n,i;return f((n=e=r.sent(),t=(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)?e.message:"")),console.error("Could not toggle camera:",t),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})})()},[b,j,g,y,f]);return{isCameraEnabled:j,isCameraPending:x,cameraError:r,toggleCamera:w}}},602184:function(e,t,r){"use strict";r.d(t,{E:()=>o});var n=r(872496),i=r(99801),o=function(){var e=(0,i.X)();return{metadata:(0,n.bB)(e)}}},99801:function(e,t,r){"use strict";r.d(t,{X:()=>i});var n=r(811752),i=function(){return(0,n.f)().localParticipant}},205189:function(e,t,r){"use strict";r.d(t,{Y:()=>p});var n=r(275271),i=r(811752),o=r(945007),a=r(28687),s=r(437588),l=r(7447),c=r(841818),u=r(602184),d=r(514432);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var p=function(){var e,t=(0,i.f)(),r=(0,c.N)(),p=(0,u.E)().metadata,b=t.state===a.em.Connected&&p.role===s.VM.HOST,h=(0,l.I3)(l.wV),y=(null==r?void 0:r.mute_on_join)&&!(null==r?void 0:r.can_manage)?void 0:h,v=(0,l.Ft)().setMicrophoneEnabled,g=(0,d.x)().captureOptions,_=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=_[0],j=_[1],w=(0,o.h)({source:a.fQ.Source.Microphone,captureOptions:g,initialState:b?y:void 0}),O=w.toggle,S=w.enabled,k=w.pending,N=b?S:h,P=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!b)return[3,2];return[4,O()];case 1:r.sent(),r.label=2;case 2:return v(!N),j(null),[3,4];case 3:var n,i;return j((n=e=r.sent(),t=(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)?e.message:"")),console.error("Could not toggle microphone:",t),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()},[b,N,O,v]);return{isMicrophoneEnabled:N,isMicrophonePending:k,toggleMicrophone:P,microphoneError:x}}},514432:function(e,t,r){"use strict";r.d(t,{x:()=>o});var n=r(275271),i=r(7447),o=function(){var e=(0,i.I3)(i.sO),t=(0,i.I3)(i.tS),r="advanced"===e,o="basic"===e||r;return{captureOptions:(0,n.useMemo)(function(){return{noiseSuppression:o,echoCancellation:o,autoGainControl:o,deviceId:t}},[o,t]),isAdvancedNoiseSuppression:r}}},486289:function(e,t,r){"use strict";r.d(t,{i:()=>n});var n=50},455842:function(e,t,r){"use strict";r.d(t,{so:()=>b,l9:()=>v,oZ:()=>N,$I:()=>S,bf:()=>s,Xq:()=>y,I0:()=>c,XN:()=>w,Hy:()=>O,Kr:()=>_,iF:()=>d,rH:()=>l,fx:()=>x,LP:()=>f,JC:()=>h,tO:()=>m,uZ:()=>a,RW:()=>u,UG:()=>j,Hg:()=>p,QZ:()=>g,Wg:()=>k});var n=r(109687),i=r(137102),o=r(263235),a=function(){return(0,o.M)({hms:n.Zp,livekit:i.Em})()},s=function(){return(0,o.M)({hms:n.Tq,livekit:i.VH})()},l=function(e){return(0,o.M)({hms:n.hB,livekit:i.ww})(e)},c=function(){return(0,o.M)({hms:n.pB,livekit:i.Bw})()},u=function(){return(0,o.M)({hms:n.RS,livekit:i.yK})()},d=function(e){return(0,o.M)({hms:n.wc,livekit:i.AE})(e)},f=function(){return(0,o.M)({hms:n.kk,livekit:i.fL})()},m=function(e){return(0,o.M)({hms:n.RN,livekit:i.Dq})(e)},p=function(){return(0,o.M)({hms:n.nc,livekit:i.MU})()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.M)({hms:n.$f,livekit:i._x})(e)},h=function(){return(0,o.M)({hms:n.HV,livekit:i.$x})()},y=function(){return(0,o.M)({hms:n.Vb,livekit:i.R3})()},v=function(e,t){var r=t.pageSize;return(0,o.M)({hms:n.Ak,livekit:i.my})(e,{pageSize:r})},g=function(){return(0,o.M)({hms:n.qr,livekit:i.jU})()},_=function(){return(0,o.M)({hms:n.y2,livekit:i.Mi})()},x=function(e){return(0,o.M)({hms:n.yE,livekit:i.Hg})(e)},j=function(e){return(0,o.M)({hms:n.Lg,livekit:i.l8})(e)},w=function(e){return(0,o.M)({hms:n.YR,livekit:i.yx})(e)},O=function(){return(0,o.M)({hms:n.DI,livekit:i.i4})()},S=function(){return(0,o.M)({hms:n.tv,livekit:i.AR})()},k=function(){return(0,o.M)({hms:n.Ux,livekit:i.du})()},N=function(e){return(0,o.M)({hms:n.CV,livekit:i.zU})(e)}},41140:function(e,t,r){"use strict";r.d(t,{B:()=>m});var n=r(275271),i=r(284748),o=r(371410),a=r(7447);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],s=c((0,n.useState)(null),2),u=s[0],d=s[1],f=(0,i.cw)(),m=(0,i._U)(o.um),p=(0,a.Ft)().setCameraEnabled,b=(0,i._U)(o.UP),h=!!(null==b?void 0:b.videoTrack),y=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,4,5]),!h)return[3,2];return r(!0),[4,f.setLocalVideoEnabled(!m)];case 1:n.sent(),p(!m),d(null),n.label=2;case 2:return[3,5];case 3:var i,o;return d((i=e=n.sent(),t=(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](i):i instanceof o)?e.message:"")),console.error("Could not toggle camera: ",t),[3,5];case 4:return r(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[m,h,f,p,d]);return{isCameraEnabled:m,isCameraPending:!h||t,cameraError:u,toggleCamera:y}},d=r(168347),f=r(263235),m=function(){return(0,f.M)({hms:u,livekit:d.C})()}},263235:function(e,t,r){"use strict";r.d(t,{M:()=>o});var n=r(437588),i=r(841818),o=function(e){var t=e.hms,r=e.livekit,o=(0,i.N)();return(0,n.mP)(o)?r:t}},27521:function(e,t,r){"use strict";r.d(t,{K:()=>m});var n=r(275271),i=r(284748),o=r(371410),a=r(7447);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],s=(0,i.cw)(),u=(0,i._U)(o.uX),d=(0,a.Ft)().setMicrophoneEnabled,f=(0,i._U)(o.UP),m=!!(null==f?void 0:f.audioTrack),p=c((0,n.useState)(null),2),b=p[0],h=p[1],y=(0,n.useCallback)(function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,4,5]),!m)return[3,2];return r(!0),[4,s.setLocalAudioEnabled(!u)];case 1:n.sent(),d(!u),n.label=2;case 2:return h(null),[3,5];case 3:var i,o;return h((i=e=n.sent(),t=(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](i):i instanceof o)?e.message:"")),console.error("Could not toggle microphone: ",t),[3,5];case 4:return r(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[u,m,s,d]);return{isMicrophoneEnabled:u,isMicrophonePending:!m||t,toggleMicrophone:y,microphoneError:b}},d=r(205189),f=r(263235),m=function(){return(0,f.M)({hms:u,livekit:d.Y})()}},28320:function(e,t,r){"use strict";r.d(t,{C:()=>l});var n=r(275271),i=r(524094),o=r(455842);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){var e,t=(0,o.RW)(),r=t.hosts,a=t.spectators,l=t.moderators,c=(0,i.cy)(),u=c.room,d=c.participants,f=(0,n.useCallback)(function(e){var t,r;return(null==d||null==(t=d[Number(e.customerUserId||-1)])?void 0:t.community_member_id)===(null==u||null==(r=u.creator)?void 0:r.id)},[d,null==u||null==(e=u.creator)?void 0:e.id]),m=(0,n.useCallback)(function(e,t){return f(e)?-1:+!!f(t)},[f]),p=(0,n.useCallback)(function(e){return e&&s(e).sort(function(e,t){var r,n,i,o,a=(null==e?void 0:e.customerUserId)&&parseInt(e.customerUserId),s=(null==t?void 0:t.customerUserId)&&parseInt(t.customerUserId),l=a&&null!=(i=null==d||null==(r=d[a])?void 0:r.name)?i:"",c=s&&null!=(o=null==d||null==(n=d[s])?void 0:n.name)?o:"";return l.localeCompare(c)})||[]},[d]),b=(0,n.useMemo)(function(){return p(r).sort(m)},[r,p,m]),h=(0,n.useMemo)(function(){return p(l)},[l,p]),y=(0,n.useMemo)(function(){return p(a)},[a,p]),v=(0,n.useMemo)(function(){return b.find(f)},[b,f]),g=(0,n.useMemo)(function(){return v?b.filter(function(e){return e.customerUserId!==v.customerUserId}):b},[b,v]),_=s(b).concat(s(h),s(y));return{peers:_,hosts:b,cohosts:g,moderators:v?[v].concat(s(h)):h,spectators:y,count:_.length}}},887904:function(e,t,r){"use strict";r.d(t,{e:()=>d});var n=r(171458),i=r(131906),o=r(739792),a=r(251630),s=r(455842),l=r(524094),c=r(437588),u=r(60878),d=function(e){var t=(0,u.pm)(),r=t.success,d=t.error,f=(0,n.NW)(),m=(0,s.Kr)().requestRoleChange,p=(0,s.RW)().spectators,b=(0,l.cy)().participants,h=(0,n.Qc)(),y=h.cohosts,v=h.isLoadingCohosts,g=h.refetchCohosts,_=function(e){if(!(null==p?void 0:p.length))return null;var t=p.find(function(t){var r;return(null==b||null==(r=b[Number(t.customerUserId)||0])?void 0:r.community_member_id)===e});return null==t?void 0:t.id},x=function(e){null==e||e.forEach(function(e){var t=_(e.id);t&&m(t,c.VM.HOST)})},j=(0,i.useMutation)(function(e){return a.Qk.addCohosts({roomId:null==f?void 0:f.id,formData:e})},{onSuccess:function(t){x(t),g(),r((0,o.t)("live_streams.room.cohosts_added_successfully")),e&&e()},onError:function(){return d((0,o.t)("live_streams.room.could_not_add_cohosts_error"))}}),w=(0,n._K)(g),O=(null==f?void 0:f.host_capacity)&&f.host_capacity>y.length+1;return{cohosts:y,isLoadingCohosts:v,addCohosts:j.mutateAsync,isAddingCohosts:j.isLoading,removeCohost:w,canInviteMoreHosts:O}}},121161:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(552676),i=r(275271),o=r(404637);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t,r=e.title,s=e.onConfirm,l=e.bodyElement,c=e.description,u=e.buttonLabel,d=e.maxIndex,f=e.sentiment,m=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=function(){b(!1)},y=function(){b(!1),s()};return{confirmModal:(0,n.jsx)(o.I,{show:p,onClose:h,onCancel:h,onConfirm:y,title:r,subtitle:"",description:void 0===c?"":c,bodyElement:void 0===l?null:l,maxZIndexEnabled:void 0!==d&&d,buttonLabel:void 0===u?"":u,sentiment:void 0===f?"danger":f}),isConfirmModalOpen:p,onConfirmButtonClick:function(){b(!0)},onConfirmModalClose:h,onConfirmModal:y}}},806119:function(e,t,r){"use strict";r.d(t,{M:()=>i});var n=r(841818),i=function(){var e=(0,n.N)();if(!e)throw Error("Room not found");return e}},612890:function(e,t,r){"use strict";r.d(t,{S:()=>a});var n=r(524094),i=r(455842);function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var a=function(){var e=(0,n.y4)().leaveAsync,t=(0,i.QZ)();return function(){var r;return(r=function(){var r,n;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return[4,e()];case 1:return i.sent(),[4,t()];case 2:return i.sent(),null==(n=window.webview)||null==(r=n.onLeaveLiveStream)||r.call(n),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)})})()}}},160138:function(e,t,r){"use strict";r.d(t,{w:()=>u});var n=r(275271),i=function(){return!!navigator.mediaDevices},o=function(){var e;return!!(null==(e=navigator.permissions)?void 0:e.query)},a=r(609585);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e){var t=c((0,n.useState)([]),2),r=t[0],s=t[1],u=c((0,n.useState)(!0),2),d=u[0],f=u[1],m=(0,n.useRef)(!1),p=(0,n.useRef)(null),b=(0,n.useCallback)(function(){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!i())return[3,2];return[4,a.Z.getInstance().getDevices(e)];case 1:return s(t=r.sent()),[2,t];case 2:return[2,[]]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},[e]),h=(0,n.useCallback)(function(){m.current=!0,p.current=null;var e=function(e){return!!(null==e?void 0:e.length)&&e.some(function(e){var t;return!!(null==(t=e.label)?void 0:t.trim())})};e(r)||b().then(function(t){e(t)?m.current=!1:p.current=setTimeout(function(){h()},2e3)}).catch(function(e){console.error(e)})},[b,r]),y=(0,n.useCallback)(function(){b()},[b]);(0,n.useEffect)(function(){return i()&&(y(),navigator.mediaDevices.addEventListener("devicechange",y)),function(){return navigator.mediaDevices.removeEventListener("devicechange",y)}},[y]);var v=(0,n.useCallback)(function(e,t){return navigator.permissions.query({name:e}).then(function(e){return e.onchange=function(){"granted"===e.state&&b()},e}).catch(function(e){var r;return(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](e):e instanceof r)&&console.error(t,e.message),f(!1),null})},[b]);return(0,n.useEffect)(function(){if(o()){var e=null,t=null;return v("camera","Could not listen for camera permission status").then(function(t){e=t}),v("microphone","Could not listen for microphone permission status").then(function(e){t=e}),function(){e&&(e.onchange=null),t&&(t.onchange=null)}}},[v]),(0,n.useEffect)(function(){d||m.current||h()},[d,h]),(0,n.useEffect)(function(){return function(){p.current&&clearTimeout(p.current)}},[]),{devices:r}}},41506:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(275271),i=r(932699),o=function(e){var t=e.peers,r=e.speakingIds,o=e.handRaisedIds,a=e.pageSize,s=(0,n.useRef)([]);return(0,n.useMemo)(function(){var e=(0,i.keyBy)(t,"id"),n=s.current.filter(function(t){return e[t]});o.slice(0,a/2).concat(r).forEach(function(e){n.includes(e)||n.unshift(e),n.length>a&&n.pop()});var l=new Map(n.map(function(e,t){return[e,t+1]})),c=(0,i.sortBy)(t,function(e){return l.get(e.id)||1/0});return s.current=c.slice(0,a).map(function(e){return e.id})||[],c},[r,o,a,t])}},461357:function(e,t,r){"use strict";r.d(t,{a:()=>s});var n=r(171458),i=r(524094),o=r(437588),a=r(806119),s=function(e){var t,r=e||{id:""},s=r.id,l=r.customerUserId,c=r.roleName,u=r.name,d=(0,n.p$)(s),f=d.isHandRaised,m=d.lowerHand,p=(0,a.M)(),b=(0,i.cy)().participants,h=(0,o.pp)(e)||b[Number(l)],y=(0,n.F7)(s,p.id,null==h?void 0:h.community_member_id),v=(0,n.u9)(s,p.id,l),g=(0,n.fX)(s,p.id,null==h?void 0:h.community_member_id,l),_=(0,n.Ji)(s,p.id,l),x=!!(null==e?void 0:e.isLocal),j=!!(null==h?void 0:h.community_member_id)&&(null==h?void 0:h.community_member_id)===(null==p||null==(t=p.creator)?void 0:t.id),w=!j&&((null==h?void 0:h.role)===o.VM.HOST||c===o.VM.HOST),O=!j&&((null==h?void 0:h.role)===o.VM.MODERATOR||c===o.VM.MODERATOR),S=(0,n.C)(s,null==p?void 0:p.id,l);return{participant:h,name:(null==h?void 0:h.name)||u||"",avatarUrl:null==h?void 0:h.avatar_url,isCurrentParticipant:x,isHandRaised:f,isHost:j,isCohost:w,isModerator:O,inviteToCohost:y,removeAsCohost:v,lowerHand:m,removeParticipant:S,removeAsModerator:_,inviteToModerator:g}}},841818:function(e,t,r){"use strict";r.d(t,{N:()=>i});var n=r(524094),i=function(){return(0,n.cy)().room}},33372:function(e,t,r){"use strict";r.d(t,{s:()=>a});var n=r(552676),i=r(739792),o=r(957363),a=function(){return(0,n.jsxs)("div",{className:"mb-8 p-4 text-center shadow-none sm:mt-4 sm:p-8",children:[(0,n.jsx)("h1",{className:"mb-8 text-2xl",children:(0,i.t)("community.feature.no_live_streams.title")}),(0,n.jsx)("p",{className:"mb-8",children:(0,i.t)("community.feature.no_live_streams.description")}),(0,n.jsxs)("ul",{className:"mx-4 mb-8 list-none text-justify",children:[(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_3_admins")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_10_moderators")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.up_to_20_spaces")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.unlimited_members")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.custom_domain")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.advanced_analytics")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.custom_css")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.sso_wp_memberful")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.500MB_file_limit")})]}),(0,n.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,n.jsx)(o.JO,{type:"star",className:"mr-2",size:20}),(0,n.jsx)("span",{className:"w-full",children:(0,i.t)("plan_details.100GB_total_storage")})]})]}),(0,n.jsx)("a",{className:"btn btn-primary",href:"/settings/plans",children:(0,i.t)("plan_details.upgrade_plan")})]})}},755234:function(e,t,r){"use strict";r.d(t,{I:()=>a});var n=r(552676),i=r(739792),o=r(307488),a=function(e){var t,r=e.pendingConnectionsQuery,a=r.audience||[],s=!!r.hasNextPage,l=a.map(function(e){return{id:"".concat(e.id),person:e,type:"connection"}});return(0,n.jsx)(o.I,{title:(0,i.t)("members_directory.grow.requests"),items:l,totalCount:null!=(t=r.totalQueryAudience)?t:0,isLoading:!!r.isLoading,hasMore:s,fetchNextPage:function(){return r.fetchNextPage()},isFetchingNextPage:!!r.isFetchingNextPage})}},773907:function(e,t,r){"use strict";r.d(t,{V:()=>a});var n=r(552676),i=r(739792),o=r(307488),a=function(e){var t,r=e.recommendationsQuery,a=r.recommendations||[],s=!!r.hasNextPage,l=a.map(function(e){return{id:"".concat(e.id),person:e.target,type:"recommendation"}});return(0,n.jsx)(o.I,{title:(0,i.t)("".concat("members_directory.recommendations",".title")),items:l,totalCount:null!=(t=r.count)?t:0,isLoading:!!r.isLoading,hasMore:s,fetchNextPage:r.fetchNextPage,isFetchingNextPage:!!r.isFetchingNextPage,className:"mb-10",totalCountClassName:"bg-secondary text-dark"})}},710125:function(e,t,r){"use strict";r.d(t,{bV:()=>p});var n=r(552676),i=r(739792),o=r(381636),a=r(231113),s=r(579872),l=r(776937),c=r(163595),u=r(889228),d=r(532674);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=[{id:"connections-active",key:"connections",status:"active"}],p=function(e){var t,r=e.memberDirectorySettings,p=(0,u.D)()?l.nk.LIST:r.view,b=(t=(0,a.Q)({defaultCommunityView:p,views:l.nk}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,1)||function(e,t){if(e){if("string"==typeof e)return f(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],h=(0,s.D)({baseFilters:m,defaultSort:"alphabetical",isAdminScope:!1}),y=0===h.totalMembers&&!h.isLoading;return h.isLoading?(0,n.jsx)(d.E,{view:l.nk.LIST}):y?(0,n.jsx)("div",{className:"m-auto mx-2 mt-6 flex flex-col justify-center gap-y-2 text-center",children:(0,n.jsxs)("div",{className:"flex flex-col justify-center gap-y-2 text-center",children:[(0,n.jsx)(o.Z.TitleLg,{weight:"bold",color:"text-primary",children:(0,i.t)("members_directory.recommendations.build_connection_header")}),(0,n.jsx)(o.Z.BodySm,{children:(0,i.t)("members_directory.recommendations.build_connection_description")})]})}):(0,n.jsx)("div",{className:"flex flex-col px-6 pb-20 sm:px-0 md:pb-0",children:(0,n.jsx)(c.l,{activeView:b,titleI18nKey:"".concat("members_directory.connections",".title"),baseFilters:m,shouldShowHiddenMemberTooltip:!1,ignoreURLFilters:!0})})}},153785:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(901083),i=[n.CU,n.yE,n.pq,n.sE,n.xz,n.Q1,n.r7,n.Yl,n.en,n.Oq,n.EC,n.zu,n.LI,n.sm,n.Jm,n.JN,n.kQ,n.Q_,n.s3]},307488:function(e,t,r){"use strict";r.d(t,{I:()=>T});var n=r(552676),i=r(275271),o=r(739792),a=r(49845),s=r(720624),l=r(39905),c=r(381636),u=r(701168),d=r(664470),f=function(){return(0,n.jsxs)("li",{className:"border-primary bg-primary group flex w-full min-w-0 flex-1 gap-x-4 rounded-2xl px-6 py-4","data-testid":"expandable-list-item-skeleton",children:[(0,n.jsx)("div",{style:{aspectRatio:"1 / 1"},className:"h-10",children:(0,n.jsx)(d.qE,{})}),(0,n.jsx)("div",{className:"flex w-full min-w-0 flex-1 flex-col gap-y-3",children:(0,n.jsxs)("div",{className:"flex w-full min-w-0 flex-1 flex-row justify-between gap-y-3",children:[(0,n.jsx)("div",{className:"min-w-0 flex-1",children:(0,n.jsxs)("div",{className:"flex min-w-0 flex-col gap-y-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(d.X2,{md:!0,long:!0}),(0,n.jsx)(d.X2,{sm:!0,half:!0})]}),(0,n.jsx)("div",{className:"flex items-center gap-1",children:(0,n.jsx)(d.X2,{xs:!0,short:!0})})]})}),(0,n.jsx)("div",{className:"flex w-fit items-start gap-2",children:(0,n.jsx)(d.X2,{md:!0,className:"!h-9 !w-[100px] !rounded-full"})})]})})]})},m=function(e){var t=e.className,r=e.title,i=e.initialVisibleCount;return(0,n.jsxs)("div",{className:(0,u.A)("border-primary flex flex-col rounded-2xl border",t),children:[(0,n.jsx)("div",{className:"border-primary flex items-center gap-x-2 border-b px-6 py-3",children:(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:r})}),(0,n.jsx)("ul",{className:"flex list-none flex-col",children:Array.from({length:i}).map(function(e,t){return(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{}),t<i-1&&(0,n.jsx)(a.i,{})]},t)})})]})},p=r(169594),b=r(117617),h=r(859834),y=r(999896),v=r(957363),g=r(36762),_=r(316026),x=r(131906),j=r(60878),w=r(506097),O=function(e){var t=e.onClick,r=e.ariaLabel;return(0,n.jsx)("button",{type:"button",className:"bg-secondary focus-visible:!outline-secondary rounded-full p-[0.3562rem] leading-[1.188rem]",onClick:t,"aria-label":r,children:(0,n.jsx)(v.JO,{type:"20-close-sm","aria-hidden":!0,size:20,className:"text-light hover:text-dark"})})};function S(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var k=function(e){var t,r=e.recommendationId,i=(0,j.pm)(),a=(0,x.useQueryClient)(),s=(t={onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.invalidateQueries({queryKey:["recommendations"]})];case 1:return e.sent(),i.success((0,o.t)("members_directory.recommendations.messages.dismissed")),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)})})()}},(0,x.useMutation)(function(e){return w.v.dismissRecommendation(e)},t)).mutate;return(0,n.jsx)(O,{ariaLabel:(0,o.t)("members_directory.recommendations.actions.dismiss"),onClick:function(){return s(r)}})},N=r(889228);function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var A=function(e){var t,r,i,o=e.communityMember,a=e.item,s="recommendation"===a.type?Number.parseInt(a.id,10):void 0,l=(0,h.O)({public_uid:null!=(t=null==o?void 0:o.public_uid)?t:"",params:s?{recommendation_id:s}:void 0}),u=(0,b.kK)(),d=(0,N.D)(),f=null==o?void 0:o.connection_to_current_community_member,m=(0,_.N)(f).isOtherUserSentConnection;return o?(0,n.jsxs)("li",{className:"border-primary bg-primary group flex w-full min-w-0 flex-1 gap-x-4 rounded-2xl px-6 py-4","data-testid":"expandable-list-item",children:[(0,n.jsx)("div",{style:{aspectRatio:"1 / 1"},className:"h-10",children:(0,n.jsx)("a",C(P({},l),{children:(0,n.jsx)(g.y,{name:null!=(r=o.name)?r:"",src:null!=(i=o.avatar_url)?i:"",className:"!rounded-full"})}))}),(0,n.jsxs)("div",{className:"flex w-full min-w-0 flex-1 flex-col gap-y-3",children:[(0,n.jsxs)("div",{className:"flex w-full min-w-0 flex-1 flex-row justify-between gap-y-3",children:[(0,n.jsx)("a",C(P({},l),{className:"min-w-0 flex-1",children:(0,n.jsxs)("div",{className:"flex min-w-0 flex-col gap-y-3",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(c.Z.LabelSm,{truncate:!0,color:"text-dark",weight:"semibold",children:o.name}),(0,n.jsx)(c.Z.BodyXs,{truncate:!0,color:"text-default",children:o.headline})]}),o.location&&(0,n.jsx)("div",{className:"hidden items-center gap-1 md:flex",children:(0,n.jsxs)(c.Z.LabelXs,{truncate:!0,color:"text-default",children:[(0,n.jsx)(v.JO,{type:"16-location",size:16}),o.location]})})]})})),(0,n.jsxs)("div",{className:"flex w-fit items-start gap-2",children:[!d&&(0,n.jsx)(y.w,{member:o,shouldShowOnlyIcon:u,recommendationId:s}),"recommendation"==a.type&&(0,n.jsx)(k,{recommendationId:a.id})]})]}),m&&(null==f?void 0:f.note)&&(0,n.jsx)("div",{className:"ml-[-56px] md:ml-0",children:(0,n.jsx)(p.H,{note:null==f?void 0:f.note})}),d&&(0,n.jsx)("div",{children:(0,n.jsx)(y.w,{member:o,shouldShowOnlyIcon:u,recommendationId:s,shouldShowAcceptAtLeft:d})})]})]}):null};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t,r=e.title,d=e.items,f=e.totalCount,p=e.isLoading,b=e.hasMore,h=void 0!==b&&b,y=e.fetchNextPage,v=e.isFetchingNextPage,g=void 0!==v&&v,_=e.initialVisibleCount,x=void 0===_?2:_,j=e.incrementCount,w=void 0===j?2:j,O=e.className,S=e.totalCountClassName,k=(t=(0,i.useState)(x),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),N=k[0],P=k[1],C=d.slice(0,N),T=!!(y&&(d.length>N||h));return p?(0,n.jsx)(m,{className:O,title:r,initialVisibleCount:x}):0===d.length?null:(0,n.jsxs)("div",{className:"border-primary flex flex-col rounded-2xl border",children:[(0,n.jsxs)("div",{className:"border-primary flex items-center gap-x-2 border-b px-6 py-3",children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:r}),!!f&&f>0&&(0,n.jsx)("span",{className:(0,u.A)("bg-v2-danger-100 text-v2-danger flex h-[18px] items-center justify-center rounded-3xl px-1.5 py-0.5 text-center text-xs font-medium",S),children:f>99?"99+":f})]}),(0,n.jsx)("ul",{className:"flex list-none flex-col",children:C.map(function(e,t){return(0,n.jsxs)("div",{children:[(0,n.jsx)(A,{communityMember:e.person,item:e}),t<C.length-1&&(0,n.jsx)(a.i,{})]},null==e?void 0:e.person.public_uid)})}),g&&(0,n.jsx)(s.m,{}),T&&!g&&(0,n.jsx)("div",{className:"bg-secondary flex justify-center rounded-b-2xl",children:(0,n.jsx)(l.z,{variant:"tertiary",onClick:function(){var e=N+w;P(e),y&&h&&e>=d.length&&y()},className:"w-full !rounded-none !rounded-b-2xl",children:(0,o.t)("show_more")})})]})}},163595:function(e,t,r){"use strict";r.d(t,{l:()=>u});var n=r(552676),i=r(739792),o=r(940588),a=r(381636),s=r(701168),l=r(889228),c=r(408047),u=function(e){var t=e.mainWrapperClassName,r=e.activeView,u=e.baseFilters,d=e.memberDirectorySettings,f=e.shouldShowHiddenMemberTooltip,m=e.titleI18nKey,p=e.rightHeaderContent,b=e.ignoreURLFilters,h=(0,c.V)(),y=h.memberCount,v=h.setMemberCount,g=(0,l.D)();return(0,n.jsxs)("div",{className:(0,s.A)("flex flex-col gap-6 md:mb-6",!m&&"mt-0",t),children:[!g&&(m||p)&&(0,n.jsxs)("div",{className:"border-primary hidden md:flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2 pl-2 md:pl-0",children:[(0,n.jsx)(a.Z.LabelLg,{weight:"semibold",size:"text-xl",children:m?(0,i.t)(m):null}),y>0&&(0,n.jsx)("span",{className:"bg-secondary text-dark flex h-[22px] items-center justify-center rounded-3xl px-1.5 py-0.5 text-center text-xs font-medium",children:y})]}),p]}),(0,n.jsx)(o.S,{setMemberCount:v,defaultSort:null==d?void 0:d.defaultSort,shouldShowHiddenMemberTooltip:void 0===f||f,activeView:r,baseFilters:u,ignoreURLFilters:void 0!==b&&b})]})}},408047:function(e,t,r){"use strict";r.d(t,{V:()=>s,b:()=>l});var n=r(552676),i=r(275271);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,i.createContext)(null);a.displayName="MemberCountContext";var s=function(){var e=(0,i.useContext)(a);if(!e)throw Error("useMemberCount must be used within a MemberCountProvider");return e},l=function(e){var t,r=e.children,s=(t=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];return(0,n.jsx)(a.Provider,{value:{memberCount:l,setMemberCount:c},children:r})}},634332:function(e,t,r){"use strict";r.d(t,{b:()=>s});var n=r(441342),i=r(78456),o=r(22319),a=r(776937),s=function(){var e,t,r=(0,o.ww)().isAdminUsageContext,s=(0,n.wh)(),l=s.currentCommunitySettings,c=s.currentCommunityMember,u=s.isLoading,d={sort:a.aP["0"]},f=(null==l?void 0:l.member_directory_settings)||d,m={exclude_empty_name:!r},p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({visible_in_member_directory:!0},m),b=(0,i.vb)(c)?m:p;return{defaultSort:f.sort,scope:b,view:(t=a.nk.CARDS,(null==l||null==(e=l.member_directory_settings)?void 0:e.view)&&(t=l.member_directory_settings.view),t),isLoading:u}}},714866:function(e,t,r){"use strict";r.d(t,{z:()=>f});var n=r(552676),i=r(739792),o=r(825606),a=r(757105),s=r(434519),l=r(44820),c=function(e){var t=e.isSubmitting;return(0,n.jsx)(s.u_.Footer,{className:"!px-0",children:(0,n.jsx)(l._,{type:"submit",form:"bookmark-form",variant:"primary",full:!0,large:!0,submitting:void 0!==t&&t,children:(0,i.t)("save")})})},u=function(e){var t=e.isFolder,r=void 0===t||t,l=e.space,u=e.folderId,d=e.bookmark,f=e.isEdit,m=void 0!==f&&f,p=(0,a.dd)(),b=m?"edit":"create";return(0,n.jsxs)(s.u_,{isOpen:p.visible,onClose:p.hide,children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{className:"!overflow-visible",children:[(0,n.jsxs)(s.u_.Header,{children:[(0,n.jsx)(s.u_.Title,{className:"text-center",size:"md",children:(0,i.t)("".concat(b,"_").concat(r?"folder":"link"),{scope:"spaces.bookmarks"})}),(0,n.jsx)(s.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(s.u_.CloseButton,{onClick:p.hide})})]}),(0,n.jsx)(s.u_.Body,{className:"!overflow-visible px-2",children:(0,n.jsx)(o.X,{space:l,bookmark:d,folderId:u,isFolder:r,isEdit:m,renderFooter:c})})]})]})},d=a.gk.create(function(e){var t=e.folderId,r=e.space,i=e.isFolder,o=e.bookmark,a=e.isEdit;return(0,n.jsx)(u,{folderId:t,space:r,isFolder:i,bookmark:o,isEdit:a})}),f=function(){return(0,a.dd)(d)}},755929:function(e,t,r){"use strict";r.d(t,{L:()=>C});var n=r(552676),i=r(43226),o=r.n(i),a=r(131906),s=r(739792),l=r(757105),c=r(441342),u=r(251630),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)(function(e){var t=e.spaceGroupId,r=e.communityMembersId,n=e.shouldAddAllMembers;return u.iD.addMembers({spaceGroupId:t,body:{community_member_ids:r,add_all_members:n}})},e)},f=r(767900),m=r(434519),p=r(60878),b=r(227851),h=r(903225),y=r(918594),v=r(611787),g=r(701168),_=r(547144),x=r(381281),j=r(39905),w=r(381636),O=function(e){var t=e.onClose,r=e.formId,i=e.isLoading,o=void 0!==i&&i,a=(0,b.Gc)(),l=a.watch,c=a.setValue,u=a.formState.isDirty,d=l("community_member_ids",[])||[],p=l("add_all_members",!1),O=d.length>0,S=(0,m.UV)().contentPortalElement,k=(0,h.TH)().pathname;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"sm",className:"text-center",children:(0,s.t)("space_groups.form.edit.members.add_member")}),(0,n.jsx)(m.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(m.u_.CloseButton,{onClick:t})})]}),(0,n.jsxs)(m.u_.Body,{children:[(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)(w.Z.LabelMd,{children:[(0,s.t)("space_groups.add_members_to_space_group_description_without_link")," ",(0,n.jsx)(y.rU,{to:"".concat(_.Lo.members.invite,"?from=").concat(k),children:(0,s.t)("space_groups.add_members_to_space_group_link")}),"."]})}),(0,n.jsx)(f.l.CommunityMemberSelect,{name:"community_member_ids",direction:"down",variant:"tags",hideSelectedItems:!0,hideIcon:!0,disabled:p,appendTo:S,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,n.jsx)(v.Y,{memberIds:d,onRemove:function(e){c("community_member_ids",d.filter(function(t){return t!==e}))}}),(0,n.jsxs)("div",{className:(0,g.A)({hidden:O,visible:!O}),children:[(0,n.jsx)(x.X,{}),(0,n.jsx)("div",{className:"flex items-baseline",children:(0,n.jsx)(f.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,s.t)("space_groups.form.add_everyone_from_community"),id:"add_all_members",name:"add_all_members",className:"my-5 mr-2 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"ml-4 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,children:(0,n.jsx)(f.l.ToggleSwitch,{name:"add_all_members",variant:"small"})})})]})]}),(0,n.jsx)(m.u_.Footer,{className:"flex items-baseline justify-end",children:(0,n.jsx)(j.z,{variant:"primary",type:"submit",form:r,disabled:!u||o,children:o?(0,s.t)("space_groups.invite.adding_to_space_group"):(0,s.t)("space_groups.invite.add_to_space_group")})})]})},S="add-space-group-members-form",k={add_all_members:!1,community_member_ids:null},N=function(e){var t=e.spaceGroupId,r=(0,p.pm)(),i=(0,a.useQueryClient)(),u=(0,l.dd)(),b=(0,c.p7)(t).refetch,h=d({onError:function(e){r.error(e.message)},onSuccess:function(e){var t=e.message;i.invalidateQueries(["space-group-members"]),null==b||b(),r.success(t,{duration:"short",shouldUseProgress:!1}),u.hide()}}),y=h.mutate,v=h.isLoading;return(0,n.jsxs)(m.u_,{isOpen:u.visible,onClose:u.visible?u.hide:o(),contentPortalId:"add-space-group-member-portal-content",title:(0,s.t)("space_groups.form.edit.members.add_member"),children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsx)(m.u_.Content,{size:"md",children:(0,n.jsx)(f.l,{id:S,mode:"onChange",onSubmit:function(e){var r,n;return y((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({spaceGroupId:t},e.community_member_ids&&{communityMembersId:e.community_member_ids}),n=n={shouldAddAllMembers:e.add_all_members},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))},defaultValues:k,className:"flex flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col",children:(0,n.jsx)(O,{onClose:u.hide,isLoading:v,formId:S})})})]})},P=l.gk.create(function(e){var t=e.spaceGroupId;return(0,n.jsx)(N,{spaceGroupId:t})}),C=function(){return(0,l.dd)(P)}},611787:function(e,t,r){"use strict";r.d(t,{Y:()=>p});var n=r(552676),i=r(25593),o=r(278940),a=r(372019),s=r(751169),l=r(256060),c=r(739792),u=r(664657),d=r(39905),f=r(381636),m=function(e){var t=e.id,r=e.avatarUrl,i=e.name,o=e.onRemove;return(0,n.jsxs)(l.SC,{className:"group h-12",children:[(0,n.jsx)(l.pj,{variant:"no-padding",className:"rounded-l-lg",children:(0,n.jsx)("div",{className:"ml-4 mr-3",children:(0,n.jsx)(u.W,{name:a.C.test(""+i)?i.charAt(0):i,src:r,size:"8"})})}),(0,n.jsx)(l.pj,{variant:"no-padding",className:"w-full",children:(0,n.jsx)("div",{className:"truncate p-2 pl-0",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:i})})}),(0,n.jsx)(l.pj,{variant:"no-padding",className:"w-24 rounded-r-lg",children:(0,n.jsx)("div",{className:"text-dark invisible group-hover:visible",children:(0,n.jsx)(d.z,{type:"button",variant:"plain",onClick:function(){return o(t)},children:(0,c.t)("remove")})})})]},t)},p=function(e){var t=e.memberIds,r=void 0===t?[]:t,c=e.onRemove,u=r.length>0,d=(0,o.fd)({filters:{id:r},options:{enabled:u,keepPreviousData:u}}),f=d.hasNextPage,p=d.fetchNextPage,b=d.members;return u?(0,n.jsx)("div",{className:"-mx-4 mt-4 h-full max-h-80 overflow-y-auto",children:(0,n.jsx)(i.Z,{loader:(0,n.jsx)(s.a,{}),dataLength:r.length,style:{overflow:"initial"},scrollThreshold:.5,next:p,hasMore:!!f,children:(0,n.jsx)(l.iA,{variant:"no-border",className:"w-full max-w-full",tableClassName:"w-full",children:(0,n.jsxs)(l.RM,{children:[r.map(function(e){return a.C.test(""+e)?(0,n.jsx)(m,{id:e,name:e,onRemove:c,avatarUrl:""},e):null}),b.map(function(e){var t=e.id,r=e.avatar_url,i=e.name;return(0,n.jsx)(m,{id:t,avatarUrl:r,name:i,onRemove:c},t)})]})})})}):null}},646517:function(e,t,r){"use strict";r.d(t,{z:()=>R});var n=r(552676),i=r(932699),o=r(131906),a=r(739792),s=r(757105),l=r(251630),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMutation)(function(e){var t=e.spaceId,r=e.communityMembersId,n=e.notifyMembers,i=e.memberType,o=e.shouldAddAllMembers;return l.rb.addMemberToSpace({spaceId:t,body:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({community_member_ids_or_emails:r,notify_members:n,select_all_members:o},i&&{member_type:i})})},e)},u=r(767900),d=r(434519),f=r(60878),m=r(275271),p=r(227851),b=r(903225),h=r(524330),y=r(256338),v=r(380171),g=r(441342),_=r(60589),x=r(701168),j=r(547144),w=r(381281),O=r(39905),S=r(381636),k=r(611787),N=[{label:(0,a.t)("spaces.form.add_everyone_from_options.space_group"),value:"space_group"},{label:(0,a.t)("spaces.form.add_everyone_from_options.community"),value:"community"}],P="community_member_ids",C="should_add_all_members",A=function(e){var t=e.onClose,r=e.isLoading,i=e.formId,o=(0,p.Gc)(),s=o.watch,l=o.setValue,c=(0,d.UV)().contentPortalElement,f=(0,g.wh)(),A=f.currentCommunity,I=f.currentCommunitySettings,T=(0,b.TH)().pathname,E=(null==A?void 0:A.chat_space_members_limit)||0,L=(null==A?void 0:A.member_count)||0,D=(0,g.L2)().data,M=((0,(0,g.e2)().helpers.findBy)({id:null==D?void 0:D.space_group_id})||{}).space_group_members_count,R=s(P,[])||[],B=s(C,!1),z=s("member_type"),F=R.length>0,U=F||B,Z="space_group"===z,G=(0,_.Ug)(D)&&(Z?(void 0===M?0:M)>E:L>E);return(0,m.useEffect)(function(){G&&l(C,!1)},[G]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.u_.Header,{children:[(0,n.jsx)(d.u_.Title,{size:"sm",children:(0,a.t)("spaces.form.edit.members.add_member")}),(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(d.u_.CloseButton,{onClick:t})})]}),(0,n.jsxs)(d.u_.Body,{className:"!px-5 !py-4 md:!px-8 md:!py-2",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(S.Z.LabelSm,{children:[(0,a.t)("add_members_to_space_description_without_link")," ",(0,n.jsx)("a",{href:"".concat(j.Lo.members.invite,"?invite_type=csv&from=").concat(T),children:(0,a.t)("add_members_to_space_description_link")})]})}),(0,n.jsx)(u.l.CommunityMemberSelect,{name:P,variant:"tags",direction:"down",addable:!0,hideSelectedItems:!0,hideIcon:!0,disabled:B,placeholder:(0,a.t)("spaces.form.edit.members.add_member"),appendTo:c,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,n.jsx)(k.Y,{memberIds:R,onRemove:function(e){l(P,R.filter(function(t){return t!==e}))}}),(0,y.Wk)(I)&&(0,n.jsxs)("div",{className:(0,x.A)({hidden:F,visible:!F}),children:[(0,n.jsx)(w.X,{}),(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(S.Z.LabelSm,{weight:"semibold",children:(0,a.t)("settings.access_groups.admin.legacy_access.title")})}),(0,n.jsx)("div",{children:(0,n.jsx)(v.T,{role:"tooltip",content:(0,a.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(h.g,{square:!0,label:(0,a.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsxs)("div",{className:"flex flex-col items-start md:flex-row md:items-center md:gap-6",children:[(0,n.jsx)(v.T,{content:Z?(0,a.t)("members_in_space_group_limit_reached"):(0,a.t)("members_in_community_limit_reached"),disabled:!G,className:"flex w-full",children:(0,n.jsx)(u.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,a.t)("spaces.form.add_everyone_from"),id:C,name:C,className:"my-5 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"mx-2 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,isDisabled:G,children:(0,n.jsx)(u.l.ToggleSwitch,{name:C,variant:"small",disabled:G})})}),(0,n.jsx)(u.l.Item,{name:"member_type",className:"w-full text-sm font-normal",hideDescription:!0,hideLabel:!0,hideBorder:!0,hiddenField:!0,children:(0,n.jsx)(u.l.SelectNative,{name:"member_type",options:N})})]})]})]}),(0,n.jsxs)(d.u_.Footer,{className:"flex items-baseline justify-between",children:[(0,n.jsx)("div",{className:"-mt-4",children:(0,n.jsx)(u.l.Checkbox,{id:"notify_members",label:(0,a.t)("spaces.form.edit.members.notify_members"),name:"notify_members",labelClassName:"font-normal text-sm"})}),(0,n.jsx)(O.z,{large:!0,variant:"primary",type:"submit",form:i,disabled:r||!U,children:r?(0,a.t)("spaces.form.edit.members.adding"):(0,a.t)("spaces.form.edit.members.add")})]})]})};function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var E="add-space-members-form",L={notify_members:!1,community_member_ids:null,member_type:"space_group",should_add_all_members:!1},D=function(e){var t=e.onAdd,r=e.spaceId,l=(0,f.pm)(),m=(0,o.useQueryClient)(),p=(0,s.dd)(),b=c({onError:function(e){l.error(e.message)},onSuccess:function(){m.invalidateQueries({queryKey:["community-members"]}),l.success((0,a.t)("spaces.form.edit.members.members_added")),(0,i.isFunction)(t)?t():p.hide()}}),h=b.mutate,y=b.isLoading;return(0,n.jsxs)(d.u_,{isOpen:p.visible,onClose:p.visible?p.hide:i.noop,contentPortalId:"add-space-member-content-portal",title:(0,a.t)("spaces.form.edit.members.add_member"),children:[(0,n.jsx)(d.u_.Overlay,{}),(0,n.jsx)(d.u_.Content,{size:"xl",className:"max-w-md",children:(0,n.jsx)(u.l,{id:E,mode:"onChange",onSubmit:function(e){return h(T(I(T(I({spaceId:r},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{notifyMembers:!!e.notify_members}),e.should_add_all_members&&{memberType:e.member_type}),{shouldAddAllMembers:e.should_add_all_members}))},defaultValues:L,className:"flex h-full flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col h-full",children:(0,n.jsx)(A,{onClose:p.visible?p.hide:i.noop,isLoading:y,formId:E})})})]})},M=s.gk.create(function(e){var t=e.spaceId,r=e.onAdd;return(0,n.jsx)(D,{spaceId:t,onAdd:r})}),R=function(){return(0,s.dd)(M)}},900217:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(552676),i=r(739792),o=r(963549),a=function(e){var t=e.isOpen,r=e.onClose,a=e.onConfirm,s=e.confirmText,l=e.disabled;return(0,n.jsx)(o.c,{isOpen:void 0!==t&&t,onClose:r,onConfirm:a,confirmText:s,confirmVariant:"danger",title:(0,i.t)("remove"),disabled:void 0!==l&&l,cancelText:(0,i.t)("cancel"),children:(0,n.jsx)("p",{children:(0,i.t)("remove_member_confirm")})})}},833850:function(e,t,r){"use strict";r.d(t,{L:()=>l});var n=r(552676),i=r(157514),o=r(757105),a=function(e){var t=e.spaceId,r=(0,o.dd)(),a=r.visible,s=r.hide;return(0,n.jsx)(i.G,{isOpen:a,onClose:s,spaceId:t,shouldClearEventStateOnHide:!0})},s=o.gk.create(function(e){var t=e.spaceId;return(0,n.jsx)(a,{spaceId:t})}),l=function(){return(0,o.dd)(s)}},783873:function(e,t,r){"use strict";r.d(t,{t:()=>eN});var n=r(552676),i=r(757105),o=r(275271),a=r(739792),s=r(441342),l=r(437588),c=r(88663),u=r(437416),d=r(767900),f=r(60878),m=r(33372),p=r(932699),b=r(252484),h=r(78456);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var g=(0,o.createContext)({streamingHoursAvailable:!1,totalStreamingHours:0,limitsReachedIsOpen:!1,limitsReachedOnClose:p.noop,limitsReachedOnOpen:p.noop,shouldUpgradeAddons:!1,purchaseStreamingAddonWhenLimitReached:function(){return Promise.resolve()}});g.displayName="AddonsContext";var _=function(e){var t,r=e.children,i=(0,s.wh)().currentCommunityMember,a=(0,h.vb)(i),l=(0,b.tm)({enabled:a}),c=l.streamingHoursAvailable,u=l.streamingTotalPlanHours,d=l.isLoading,f=(0,b.$v)(p.noop,{enabled:a}),m=f.purchaseAsync,_=f.currentQuantity,x=f.unitSize,j=u+Number(_||0),w=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=w[0],S=w[1];(0,o.useEffect)(function(){S(a&&!d&&!c)},[a,d,c]);var k=!c;return(0,n.jsx)(g.Provider,{value:{streamingHoursAvailable:c,totalStreamingHours:j,limitsReachedIsOpen:O,limitsReachedOnClose:function(){S(!1)},limitsReachedOnOpen:function(){S(!0)},shouldUpgradeAddons:k,purchaseStreamingAddonWhenLimitReached:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(c||!x)return[2];return[4,m(x)];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)})})()}},children:r})},x=function(){var e=(0,o.useContext)(g);if(void 0===e)throw Error("useAddonsContext must be used within a AddonsProvider");return e},j=r(227851),w=r(701168),O=r(381636),S=r(957363),k=r(943544),N=function(e){var t=e.name,r=e.roomType,i=void 0===r?l.H0.STREAM:r,o=(0,b.oQ)().config,s=null==o?void 0:o.live_room_participants_capacity,c=(0,j.Gc)().control,u=[{value:l._d.OPEN,label:(0,a.t)("live_streams.form.access_type_community"),description:(0,n.jsx)(O.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_community_label"),{maxCapacity:s})})},{value:l._d.SECRET,label:(0,a.t)("live_streams.form.access_type_secret"),description:(0,n.jsx)(O.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_secret_label"))})}];return i===l.H0.STREAM&&u.push({value:l._d.PUBLIC_STREAM,label:(0,a.t)("live_streams.form.access_type_public"),description:(0,n.jsx)(O.Z.LabelSm,{children:(0,a.t)("live_streams.form.".concat(i,".access_type_public_label"))})}),(0,n.jsx)(j.Qr,{control:c,name:t,render:function(e){var t,r=e.field,i=r.onChange,o=(t=r.value,u.find(function(e){return e.value===t}));return(0,n.jsx)(k.Lt,{direction:"bottom-start",linkType:"button",button:(0,n.jsx)(k.Lt.MenuButton,{className:"form-control relative inline-block w-full text-left",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"content-start",children:(0,n.jsx)(O.Z.LabelMd,{children:null==o?void 0:o.label})}),(0,n.jsx)("div",{className:"flex content-end",children:(0,n.jsx)(S.JO,{type:"cheveron-down"})})]})}),buttonClassName:"w-full",className:"relative w-full",size:k.wk.EXTRA_LARGE,onChange:i,options:u,labelWeight:"semibold"})}})},P=function(e){var t,r,i=e.children,o=e.name,a=e.rules,s=e.tooltipText,l=e.hidePlaceholder,c=e.placeholder,u=e.inlineReverse,f=e.translationRoot,m=void 0===f?"live_streams.form":f,p=e.appendTranslationRoot,b=e.hideLabel,h=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","name","rules","tooltipText","hidePlaceholder","placeholder","inlineReverse","translationRoot","appendTranslationRoot","hideLabel"]);return(0,n.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:o,hideDescription:!0,translationRoot:p?"".concat(m,".").concat(p):m,rules:void 0===a?{}:a,hideBorder:!0,fullWidth:!0,hidePlaceholder:void 0!==l&&l,placeholder:c,tooltipText:s,inlineReverse:void 0!==u&&u,hideLabel:void 0!==b&&b},h),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},C=r(391150),A=r(39905),I=r(434519),T=function(e){var t=e.roomType,r=x(),i=r.streamingHoursAvailable,o=r.totalStreamingHours,s=r.limitsReachedIsOpen,l=r.limitsReachedOnClose;return(0,n.jsxs)(I.u_,{title:(0,a.t)("live_streams.form.limits_reached"),isOpen:!!s,onClose:l,className:"z-[2100]",children:[(0,n.jsx)(I.u_.Overlay,{}),(0,n.jsxs)(I.u_.Content,{className:"!overflow-visible",children:[(0,n.jsxs)(I.u_.Header,{children:[(0,n.jsx)(I.u_.Title,{className:"text-center",size:"md",children:(0,a.t)("live_streams.form.limits_reached")}),(0,n.jsx)(I.u_.HeaderActions,{children:(0,n.jsx)(I.u_.CloseButton,{onClick:l})})]}),(0,n.jsx)(I.u_.Body,{className:"!overflow-visible text-justify",children:(0,n.jsx)("ul",{className:"text-default list-outside pl-4 text-sm font-normal",children:!i&&(0,n.jsx)("li",{className:"text-dark text-xs font-normal",children:(0,n.jsx)(O.Z.BodyXs,{children:(0,a.t)("live_streams.form.".concat(t,".upgrade_streaming_hours_label_v3"),{hours:o})})})})}),(0,n.jsx)(I.u_.Footer,{children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",full:!0,large:!0,onClick:l,children:(0,a.t)("live_streams.form.close")})})]})]})},E=function(e){var t=e.roomType,r=x().limitsReachedIsOpen,i=(0,j.Gc)(),s=i.watch,c=i.setValue,u=s("access_type"),f=u===l._d.PUBLIC_STREAM||u===l._d.OPEN,m="limit_url_sharing";return(0,o.useEffect)(function(){f&&c(m,!1,{shouldDirty:!0})},[u,c]),(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(T,{roomType:t}),(0,n.jsx)(O.Z.TitleMd,{weight:"bold",children:(0,a.t)("live_streams.form.details")}),(0,n.jsxs)("div",{className:"mb-8 mt-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start sm:flex-row",children:[(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pr-3",children:(0,n.jsx)(P,{name:"name",rules:{required:(0,a.t)("live_streams.form.".concat(t,".name_required_error")),maxLength:{value:255,message:(0,a.t)("live_streams.form.".concat(t,".name_length_error"))}},children:(0,n.jsx)(d.l.Input,{autoFocus:!0})})}),(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pl-3",children:(0,n.jsx)(P,{name:"slug",tooltipText:"".concat(window.location.protocol,"//").concat(window.location.hostname,"/live/custom-url-slug"),rules:{maxLength:{value:255,message:(0,a.t)("live_streams.form.slug_length_error")}},children:(0,n.jsx)(d.l.Input,{})})})]}),(0,n.jsx)("div",{className:"mt-3 w-full",children:(0,n.jsx)(P,{name:"description",resizeDisabled:!0,rules:{maxLength:{value:255,message:(0,a.t)("live_streams.form.".concat(t,".description_length_error"))}},children:(0,n.jsx)(d.l.Input,{variant:"textarea",maxLength:255,rows:"6"})})}),(0,n.jsxs)("div",{className:"mt-3 flex flex-col",children:[(0,n.jsx)(P,{name:"recording_enabled",appendTranslationRoot:t,tooltipText:(0,a.t)("live_streams.form.".concat(t,".recording_enabled_tooltip")),inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:"recording_enabled",variant:"small"})}),(0,n.jsx)(P,{name:"mute_on_join",appendTranslationRoot:t,inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:"mute_on_join",variant:"small"})}),(0,n.jsx)(P,{name:"hide_participants_list",appendTranslationRoot:t,inlineReverse:!0,tooltipText:(0,a.t)("live_streams.form.".concat(t,".hide_participants_list_tooltip")),children:(0,n.jsx)(d.l.ToggleSwitch,{name:"hide_participants_list",variant:"small"})}),!f&&(0,n.jsx)(P,{name:m,appendTranslationRoot:t,tooltipText:(0,a.t)("live_streams.form.".concat(t,".limit_url_sharing_tooltip")),inlineReverse:!0,children:(0,n.jsx)(d.l.ToggleSwitch,{name:m,variant:"small"})})]})]}),(0,n.jsx)(O.Z.TitleMd,{weight:"bold",children:(0,a.t)("live_streams.form.access")}),(0,n.jsx)("div",{className:"my-4",children:(0,n.jsxs)("div",{className:"flex flex-col items-start sm:flex-row",children:[(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pr-3",children:(0,n.jsx)(P,{name:"view_type",labelClassName:"mb-3 text-lg",children:(0,n.jsx)(C.b,{roomType:t})})}),(0,n.jsx)("div",{className:"w-full sm:w-1/2 sm:pl-3",children:(0,n.jsx)(P,{name:"access_type",labelClassName:"mb-3 text-lg",children:(0,n.jsx)(N,{name:"access_type",roomType:t})})})]})})]})},L=r(540432),D=function(e){var t=(0,j.qo)({name:"room_type",defaultValue:l.H0.STREAM});return(0,o.useEffect)(function(){null==e||e(t)},[t,e]),t},M="attendees",R="cohosts",B="live-form-modal-body",z=r(310194),F=r(25593),U=r(664657),Z=r(720624),G=r(428414),q=r(131906),V=r(93199),W=r(698173),H=function(e,t,r,n){var i,o=(0,q.useInfiniteQuery)(["entities-preview",e,t,r,n],function(i){var o,a=i.pageParam;return o=void 0===a?1:a,(0,V.UT)(W.a.entityPreviews.index({params:{page:o,spaces_ids:e,space_groups_ids:t,member_tags_ids:r,members_ids:n}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),a=o.isLoading,s=o.isFetching,l=o.data,c=o.refetch,u=o.fetchNextPage,d=o.fetchPreviousPage,f=null==l||null==(i=l.pages)?void 0:i.reduce(function(e,t){return e.concat(t.records)},[]),m=(null==l?void 0:l.pages[(null==l?void 0:l.pages.length)-1])||{page:0,count:0,page_count:0,has_next_page:!1,records:[],per_page:50},p=m.page,b=m.count,h=m.page_count,y=b?Math.ceil(b/50):0,v=!!m.has_next_page,g=(p-1)*50+1;return{page:p,records:f,totalRecordCount:b,pageRecordCount:h,pageCount:y,hasNextPage:v,startRecordNumber:g,endRecordNumber:g+h-1,isLoading:a,isFetching:s,refetch:c,fetchNextPage:u,fetchPrevPage:d}},Q=function(e){var t=H(e.spaceIds,e.spaceGroupIds,e.memberTagIds,e.memberIds),r=t.records,i=t.fetchNextPage,o=t.hasNextPage;return(0,n.jsx)(F.Z,{next:i,hasMore:o,scrollableTarget:B,loader:(0,n.jsx)(Z.m,{}),dataLength:(null==r?void 0:r.length)||0,children:(0,n.jsx)("div",{className:"flex w-full flex-col",children:null==r?void 0:r.map(function(e){var t=e.id,r=e.avatar_url,i=e.name,o=e.email;return(0,n.jsxs)("div",{className:"hover:bg-secondary group flex h-12 items-center rounded-md border-none px-2",children:[(0,n.jsx)("div",{className:"mr-3",children:(0,n.jsx)(U.W,{src:r,name:i,size:"8"})}),(0,n.jsx)("div",{className:"w-1/3",children:(0,n.jsx)(G.Y,{children:(0,n.jsx)(O.Z.LabelSm,{weight:"semibold",children:i})})}),(0,n.jsx)("div",{className:"flex grow justify-end",children:(0,n.jsx)(G.Y,{children:(0,n.jsx)(O.Z.LabelSm,{children:o})})})]},t)})})})},K={members_ids:[],member_tags_ids:[],space_groups_ids:[],spaces_ids:[]},J=function(){var e=(0,j.qo)({name:"invited_entities_ids"})||K,t=e.spaces_ids,r=e.space_groups_ids,i=e.member_tags_ids,o=e.members_ids,s=Object.values(e).some(function(e){return!!(null==e?void 0:e.length)})?(0,a.t)("manage"):(0,a.t)("invite");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{name:"invited_entities_ids",className:"z-20 mb-6",hideLabel:!0,children:(0,n.jsx)(z.l,{name:"invited_entities_ids",rules:{required:!1},onModalSave:function(){},onModalClose:function(){},variant:"modal",countLabel:(0,a.t)("live_streams.form.members_invited_label"),tooltipText:(0,a.t)("live_streams.form.members_invited_tooltip"),selectionLabel:(0,a.t)("live_streams.form.members_invited_selection_label"),searchPlaceholder:(0,a.t)("live_streams.form.members_invited_placeholder"),buttonLabel:s,includeAllResultTypes:!0})}),(0,n.jsx)(Q,{spaceIds:t,spaceGroupIds:r,memberTagIds:i,memberIds:o})]})},$=r(101924);function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(){var e,t=(0,s.wh)().currentCommunityMember,r=(e=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return X(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],c=r[1],u=t?[t.id]:[],d=(0,j.qo)({name:"cohosts"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{name:"cohosts",className:"z-20 mb-6",hideLabel:!0,children:(0,n.jsx)(z.l,{name:"cohosts",rules:{required:!1},variant:"modal",countLabel:(0,a.t)("live_streams.form.cohosts_added_label"),selectionLabel:(0,a.t)("live_streams.form.cohosts_selection_label"),searchPlaceholder:(0,a.t)("live_streams.form.cohosts_placeholder"),disableSearch:i,excludedMemberIds:u,renderAfterSelection:(0,n.jsx)($.b,{setIsLimitReached:c,initialCohostQuantity:l.ln,shouldDisplayDisabledSearchMessage:i})})}),(0,n.jsx)(Q,{memberIds:Array.isArray(d)?d:[d],memberTagIds:[],spaceGroupIds:[],spaceIds:[]})]})};function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et=function(){var e,t=D()===l.H0.STREAM,r=[{label:(0,a.t)("live_streams.form.sections.people_attendees"),key:M}];t&&r.push({label:(0,a.t)("live_streams.form.sections.people_cohosts"),key:R});var i=r.length>1,s=(e=(0,o.useState)(r[0]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(L.m,{variant:"underline",className:"sticky",wrapperClassName:"overflow-x-auto overflow-y-hidden",controlled:!0,activeTab:c.label,onClick:function(e){u(r.find(function(t){return t.label===e})||r[0])},options:r}),c.key===M&&(0,n.jsx)(J,{}),c.key===R&&(0,n.jsx)(Y,{})]})},er=function(e){var t,r,i=e.appendTranslationRoot,o=void 0===i?"":i,a=e.children,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["appendTranslationRoot","children"]);return(0,n.jsx)(d.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hideBorder:!0,fullWidth:!0,hideDescription:!0,translationRoot:o?"live_streams.form.".concat(o):"live_streams.form"},s),r=r={children:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},en=function(e){var t=e.iconType,r=e.text;return(0,n.jsx)("li",{className:"list-none",children:(0,n.jsxs)("div",{className:"flex items-start gap-2.5 text-left",children:[(0,n.jsx)("span",{className:"mt-0.5 flex w-4",children:(0,n.jsx)(S.JO,{size:16,type:t})}),(0,n.jsx)(O.Z.LabelSm,{children:r})]})})},ei=function(e){var t=e.title,r=e.onClick,i=e.isSelected,o=e.disabled,a=e.children;return(0,n.jsxs)("button",{type:"button",className:(0,w.A)("order-none box-border flex size-full cursor-pointer flex-col items-stretch gap-2 rounded-lg border border-solid p-6 pt-5",{"bg-tertiary border-tertiary":i,"pointer-events-none cursor-not-allowed opacity-70":o}),onClick:function(){o||r()},children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(O.Z.LabelLg,{weight:"semibold",children:t}),(0,n.jsx)("div",{className:"text-dark",children:(0,n.jsx)(S.JO,{type:i?"circle-checked":"circle-unchecked",size:16})})]}),a&&(0,n.jsx)("div",{className:"mt-1",children:a})]})},eo=function(e){var t=e.onChange,r=e.value,i=e.liveStreamConfig,o=e.shouldDisableEventOption,c=(0,s.wh)().currentCommunityMember,u=(0,h.vb)(c),d=null==i?void 0:i.live_stream_max_host_capacity,f=(null==i?void 0:i.live_stream_max_spectator_capacity)+((0,b.wK)({enabled:u}).currentQuantity||0),m=null==i?void 0:i.live_room_participants_capacity;return(0,n.jsxs)("div",{className:"order-1 grid grid-cols-1 gap-2 p-0 sm:w-[1024px] sm:grid-cols-3 sm:gap-6",children:[(0,n.jsx)("div",{className:"order-3 h-full sm:order-1","data-testid":"schedule-a-live-event",children:(0,n.jsx)(ei,{title:(0,a.t)("live_streams.room_type_picker.live_event.v3.title"),onClick:function(){return t(l.H0.EVENT)},isSelected:r===l.H0.EVENT,disabled:o,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)(en,{iconType:"16-join-date",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_1",{spectators:f})}),(0,n.jsx)(en,{iconType:"16-calendar-add",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_2",{cohosts:d})}),(0,n.jsx)(en,{iconType:"16-live",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_3")}),(0,n.jsx)(en,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_event.v3.bullet_4")})]})})}),(0,n.jsx)("div",{className:"order-2 h-full","data-testid":"start-a-live-room",children:(0,n.jsx)(ei,{title:(0,a.t)("live_streams.room_type_picker.live_room.title"),onClick:function(){return t(l.H0.CONFERENCE)},isSelected:r===l.H0.CONFERENCE,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)(en,{iconType:"20-checkmark-circle",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_1")}),(0,n.jsx)(en,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_2",{participants:m})}),(0,n.jsx)(en,{iconType:"16-video",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_3")}),(0,n.jsx)(en,{iconType:"16-chat",text:(0,a.t)("live_streams.room_type_picker.live_room.v3.bullet_4")})]})})}),(0,n.jsx)("div",{className:"order-1 h-full sm:order-3","data-testid":"start-a-live-stream",children:(0,n.jsx)(ei,{title:(0,a.t)("live_streams.room_type_picker.live_stream.title"),onClick:function(){return t(l.H0.STREAM)},isSelected:r===l.H0.STREAM,children:(0,n.jsxs)("ul",{className:"order-1 flex flex-none list-outside flex-col items-start gap-3 self-stretch p-0",children:[(0,n.jsx)(en,{iconType:"20-checkmark-circle",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_1")}),(0,n.jsx)(en,{iconType:"20-members",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_2",{spectators:f})}),(0,n.jsx)(en,{iconType:"16-video",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_3")}),(0,n.jsx)(en,{iconType:"16-chat",text:(0,a.t)("live_streams.room_type_picker.live_stream.v3.bullet_4")})]})})})]})},ea=function(e){var t=e.name,r=e.rules,i=e.liveStreamConfig,o=e.shouldDisableEventOption,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","rules","liveStreamConfig","shouldDisableEventOption"]),s=(0,j.Gc)().control;return(0,n.jsx)(j.Qr,{control:s,name:t,rules:r,render:function(e){var t,r,s=e.field,l=s.onChange,c=s.value;return(0,n.jsx)(eo,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={onChange:l,value:c,liveStreamConfig:i,shouldDisableEventOption:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}})},es=function(){var e=(0,b.oQ)().config,t={canCreateEvent:((0,s.nT)().helpers.spacesWithPostCreationAllowed()||[]).some(function(e){return"event"===e.post_type})}.canCreateEvent;return(0,n.jsx)("div",{className:"mx-auto w-auto",children:(0,n.jsx)(er,{name:"room_type",rules:{required:(0,a.t)("live_streams.form.room_type_required_error")},hideLabel:!0,children:(0,n.jsx)(ea,{name:"room_type",liveStreamConfig:e,shouldDisableEventOption:!t})})})},el=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.H0.STREAM,t={roomType:(0,a.t)("live_streams.form.sections.room_type"),details:(0,a.t)("live_streams.form.sections.".concat(e,".room_details")),people:(0,a.t)("live_streams.form.sections.people")};return{sections:t,sectionTitles:Object.values(t)}},ec=function(e){var t=e.setRoomType,r=e.triggerValidationRef,i=(0,c.eW)().currentSection,a=D(t),s=el(a).sections,l=(0,j.Gc)().trigger,u=i===s.roomType;return(0,o.useEffect)(function(){r&&l&&(r.current=l)},[r,l]),(0,n.jsxs)("div",{className:(0,w.A)("mx-auto px-4 py-2 sm:px-0 sm:py-14",{"max-w-screen-md":!u,"max-w-max":u}),children:[(0,n.jsx)(O.Z.TitleXl,{weight:"bold hidden sm:block",children:i}),(0,n.jsxs)("div",{className:"sm:mt-8",children:[i===s.roomType&&(0,n.jsx)(es,{}),i===s.details&&(0,n.jsx)(E,{roomType:a}),i===s.people&&(0,n.jsx)(et,{})]})]})},eu=r(842953),ed=r(64282),ef=function(e){var t=el(e).sectionTitles,r=(0,c.eW)(),n=r.currentSection,i=r.setCurrentSection,o=r.formId,a=r.isSaving,s=r.onExit,l=r.onSave,u=t.indexOf(n),d=u+1,f=(null==t?void 0:t.length)||0;return{formId:o,isSaving:a,currentStep:d,totalSteps:f,isFirstStep:1===d,isLastStep:d===f,next:function(){u!==f-1&&i(t[u+1])},prev:function(){0!==u&&i(t[u-1])},onSave:l,onExit:s}},em=function(e){var t=e.roomType,r=e.validateAndContinue,i=ef(t),o=i.formId,s=i.isSaving,c=i.currentStep,u=i.totalSteps,d=i.isFirstStep,f=i.isLastStep,m=i.next,p=i.prev,b=i.onExit,h=(0,ed.Z)(),y=x(),v=y.streamingHoursAvailable,g=y.limitsReachedOnOpen;return(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(O.Z.TitleSm,{weight:"semibold",color:"text-light text-sm",children:(0,a.t)("live_streams.form.step",{currentStep:c,totalSteps:u})}),(0,n.jsxs)("div",{className:"flex items-center gap-3 sm:gap-5",children:[2!==c||v?null:(0,n.jsxs)("div",{className:"flex justify-start",children:[(0,n.jsx)("button",{type:"button",className:"mr-1 cursor-pointer underline",onClick:function(e){e.preventDefault(),g()},children:(0,a.t)("live_streams.form.one_upgrade")}),(0,n.jsx)("p",{children:(0,a.t)("live_streams.form.included")})]}),d&&(0,n.jsx)(A.z,{onClick:b,variant:"secondary",children:(0,a.t)("live_streams.form.cancel")}),!d&&(0,n.jsx)(A.z,{onClick:p,type:"button",variant:"secondary",children:(0,a.t)("live_streams.form.prev")}),!f&&(0,n.jsx)(A.z,{onClick:function(e){e.preventDefault(),t===l.H0.EVENT?(b(),h.show({locationType:eu.Bq.LIVE_STREAM})):r(m)},type:"button",variant:"circle",className:"border-darkest border",children:(0,a.t)("live_streams.form.next")}),f&&(0,n.jsx)(A.z,{form:o,disabled:s,type:"submit",variant:"circle",className:"border-darkest border",children:(0,a.t)("live_streams.form.submit_button_label")})]})]})},ep=function(){return(0,n.jsx)(c.h4.Actions,{children:(0,n.jsx)(O.Z.TitleSm,{weight:"semibold",children:(0,a.t)("live_streams.form.title_v3")})})},eb=r(903225),eh=r(251630),ey=r(547144),ev=function(e,t){var r=(0,f.pm)(),n=r.success,i=r.error,o=(0,eb.k6)();return(0,q.useMutation)(function(e){return eh.Qk.create({formData:e,forReactQuery:!0})},{onSuccess:function(r){t&&t(),n((0,a.t)("live_streams.form.".concat(e,".created_successfully"))),o.push(ey.dE.room({roomSlug:r.slug}))},onError:function(){return i((0,a.t)("live_streams.form.create_error"))}})},eg=function(){var e=(0,s.wh)().currentCommunity;return{room_type:l.H0.STREAM,view_type:l.Bk.GRID,access_type:l._d.OPEN,recording_enabled:!!(null==e?void 0:e.live_stream_recording_enabled),mute_on_join:!1,hide_participants_list:!1,limit_url_sharing:!1}};function e_(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ex=function(){var e=(0,o.useRef)(null);return{validateAndContinue:function(t){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!(0,p.isFunction)(e.current))return[3,2];return[4,e.current()];case 1:if(!r.sent())return[2];r.label=2;case 2:return t(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){e_(o,n,i,a,s,"next",e)}function s(e){e_(o,n,i,a,s,"throw",e)}a(void 0)})})()},triggerValidationRef:e}};function ej(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ew(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eO=function(e){var t,r=e.isOpen,i=e.onClose,p=((0,s.wh)().currentCommunity||{supports_live_streams:!1}).supports_live_streams,b=(t=(0,o.useState)(l.H0.STREAM),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ej(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ej(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=el(h),g=v.sections,_=v.sectionTitles,j=eg(),w=ev(h,i),O=w.mutateAsync,S=w.isLoading,k=ex(),N=k.validateAndContinue,P=k.triggerValidationRef,C=(0,f.pm)().success,A=x(),I=A.shouldUpgradeAddons,T=A.purchaseStreamingAddonWhenLimitReached,E=function(e){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,T()];case 1:return r.sent(),I&&C((0,a.t)("settings.billing.add_ons.changes_succeeded")),[4,O(e)];case 2:return r.sent(),[3,4];case 3:var n,i;return n=t=r.sent(),(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i)&&console.error(t.message),[3,4];case 4:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){ew(o,n,i,a,s,"next",e)}function s(e){ew(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsx)(u.x,{isOpen:r,onClose:i,shouldShowCloseButton:!0,contentPortalId:"live",children:(0,n.jsxs)(c.MW,{formId:"live-QWZ7d7ysBkm5cwhL235J9Q",sections:_,initialSection:g.roomType,title:(0,a.t)("live_streams.form.title_v3"),onExit:i,onSave:E,isSaving:S,children:[(0,n.jsx)(u.x.Header,{children:(0,n.jsx)(ep,{})}),(0,n.jsxs)(u.x.Body,{id:B,wrapperClassName:"max-w-full",children:[p&&(0,n.jsx)(d.l,{id:"live-QWZ7d7ysBkm5cwhL235J9Q",onSubmit:E,defaultValues:j,children:(0,n.jsx)(ec,{setRoomType:y,triggerValidationRef:P})}),!p&&(0,n.jsx)("div",{className:"mx-auto max-w-screen-md sm:py-14",children:(0,n.jsx)(m.s,{})})]}),p&&(0,n.jsx)(u.x.Footer,{children:(0,n.jsx)(em,{roomType:h,validateAndContinue:N})})]})})},eS=function(){var e=(0,i.dd)(),t=e.visible,r=e.hide;return(0,n.jsx)(_,{children:(0,n.jsx)(eO,{isOpen:t,onClose:r})})},ek=i.gk.create(function(){return(0,n.jsx)(eS,{})}),eN=function(){return(0,i.dd)(ek)}},871408:function(e,t,r){"use strict";r.d(t,{Y:()=>j});var n=r(552676),i=r(932699),o=r(757105),a=r(131906),s=r(739792),l=r(251630),c=r(441342),u=r(495727),d=r(60878),f=r(304403),m=r(38086),p=r(381636);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.space,r={default:["space_members","space_settings"],basic:["posts","engagement"],event:["events","engagement"],course:["course_info","course_progress","videos_and_files","comments"],image:["posts","engagement"],chat:["messages"]},i=h(r[t.post_type]||[]).concat(h(r.default));return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(p.Z.BodyMd,{children:(0,s.t)("spaces.delete.description")}),(0,n.jsxs)("div",{className:"border-primary space-y-2 rounded-lg border p-4",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:t.name})}),i&&(0,n.jsx)("ul",{className:"list-inside list-none",children:i.map(function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(p.Z.LabelSm,{children:(0,s.t)(["spaces.delete.details",e])})},e)})})]}),(0,n.jsx)(m.K,{contentSpecType:f.ry.Space,contentSpecId:t.id})]})};function v(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var g=function(e){var t=e.show,r=e.space,o=void 0===r?{}:r,f=e.onClose,m=e.onSuccess,p=(0,d.pm)(),b=(0,c.nT)().actions.refresh,h=(0,a.useMutation)(function(){return l.rb.destroy({id:o.id})},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent(),(0,i.isFunction)(m)&&m(),f(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){p.error((0,s.t)("delete_space_failed"))}}),g=h.mutate,_=h.isLoading;return(0,n.jsx)(u.V,{title:(0,s.t)("spaces.delete.title"),isOpen:t,confirmUserPrompt:(0,s.t)("spaces.delete.confirm_prompt"),onClose:f,onCancel:f,onConfirm:g,confirmVariant:"danger",isDisabled:_,confirmText:_?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,n.jsx)(y,{space:o})})},_=function(e){var t=e.space,r=e.onSuccess,a=e.onClose,s=void 0===a?i.noop:a,l=(0,o.dd)();return(0,n.jsx)(g,{show:l.visible,space:t,onClose:function(){s&&s(),l.hide()},onSuccess:r})},x=o.gk.create(function(e){var t=e.space,r=e.onSuccess,i=e.onClose;return(0,n.jsx)(_,{space:t,onSuccess:r,onClose:i})}),j=function(){return(0,o.dd)(x)}},523628:function(e,t,r){"use strict";r.d(t,{a:()=>Y});var n=r(552676),i=r(275271),o=r(739792),a=r(757105),s=r(767900),l=r(751169),c=r(318826),u=r(325885),d=r(240507),f=r.n(d),m=r(434519),p=r(381636),b=function(){var e=(0,m.UV)().contentPortalElement;return(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)(p.Z.TitleSm,{weight:"semibold",children:(0,o.t)("space_groups.form.moderators")}),(0,n.jsx)(s.l.Item,{translationRoot:"space_groups.form.edit",name:"moderator_community_member_ids",tooltipText:(0,o.t)("space_groups.form.edit.moderator_community_member_ids_tooltip"),hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(s.l.CommunityMemberSelect,{name:"moderator_community_member_ids",variant:"tags",excludeAdmins:!0,appendTo:e})})]})};b.propTypes={moderators:f().array};var h=function(e){var t=e.formId,r=e.onSubmit,i=e.defaultValues,o=e.loading;return void 0!==o&&o?(0,n.jsx)(l.a,{}):(0,n.jsx)(s.l,{id:t,onSubmit:r,defaultValues:i,className:"mx-1 h-full",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(u.K,{}),(0,n.jsx)(b,{}),(0,n.jsx)(c.a,{})]})})},y=r(131906),v=r(903225),g=r(251630),_=r(441342),x=r(547144),j=r(60878),w=function(e){var t,r,n=e.spaceGroup,i=e.onSuccess,a=(0,j.pm)(),s=a.success,l=a.error,c=(0,v.k6)(),u=(0,_.p7)(n.id).refetch;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,y.useMutation)(function(e){var t=e.moderator_community_member_ids,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["moderator_community_member_ids"]);return g.iD.update(n.id,{space_group:r,moderator_community_member_ids:t})},{onSuccess:function(e){s((0,o.t)("space_groups.form.edit.saved_successfully")),u(),i(),c.push(x.Ts.show({spaceGroupSlug:e.slug}))},onError:function(){return l((0,o.t)("space_groups.form.create.save_error"))}})),r=r={spaceGroup:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},O=r(739804),S=r(701168),k=r(117617),N=r(624804),P=r(524330),C=r(39905),A=r(411944),I=r(755929),T=r(900217),E=r(94612),L=r(514598),D=r(278940),M=r(93199);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var z=r(86003),F=r(701866),U=r(678793);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var q=function(e){var t,r,a=e.spaceGroup,s=(0,j.pm)(),c=(0,y.useQueryClient)(),u=G((0,i.useState)(!1),2),d=u[0],f=u[1],m=G((0,i.useState)(!1),2),p=m[0],b=m[1],h=G((0,i.useState)(""),2),v=h[0],g=h[1],_=G((0,i.useState)(null),2),w=_[0],O=_[1],S=(0,I.L)(),k=(0,L.H)().showMemberProfileEdit,N=(0,D.fd)({filters:{space_groups:a.slug},sort:D.zw.ROLE,query:v}),P=N.isLoading,C=N.hasNextPage,A=N.totalMembers,Z=N.fetchNextPage,q=N.members,V=N.queryKey,W=(t={onError:function(e){s.error(e.message)},onSuccess:function(){c.invalidateQueries(V),s.success((0,o.t)("space_groups.form.edit.members.members_removed"))},onSettled:function(){f(!1),b(!1),O(null)}},(0,y.useMutation)(function(e){var t=e.spaceGroupId,r=e.memberId;return(0,M.pC)(x.av.spaceGroups.deleteMember({spaceGroupId:t,memberId:r}))},t)).mutate,H=(r={onError:function(e){s.error(e.message)},onSuccess:function(){c.invalidateQueries(V),s.success((0,o.t)("space_groups.form.edit.members.changed_role"))}},(0,y.useMutation)(function(e){var t,r=e.spaceGroupId,n=e.memberId,i=e.isModerator;return(t=function(){var e,t,o;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:return[4,(0,M.UT)(x.av.communityMember.settings({memberId:n}))];case 1:var s,l;return t=(e=a.sent()).moderating_space_group_ids||[],o=i?((function(e){if(Array.isArray(e))return R(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]):t.filter(function(e){return e!==r}),[2,(0,M.aU)(x.av.communityMember.update({memberId:n}),(s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),l=l={moderator_space_group_ids:o},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))}),s))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){B(o,n,i,a,s,"next",e)}function s(e){B(o,n,i,a,s,"throw",e)}a(void 0)})})()},r)).mutate,Q=p?(0,o.t)("space_groups.form.edit.members.removing"):(0,o.t)("space_groups.form.edit.members.remove_member");if(P)return(0,n.jsx)(l.a,{});var K=q.map(function(e){var t,r=e.id,n=e.avatar_url,i=e.name,o=e.email,s=e.roles,l=e.moderating_space_group_ids;return{id:r,avatarUrl:n,name:i,email:o,public_uid:e.public_uid,role:(t=a.id,s.admin?"Admin":s.moderator&&l.includes(t)?"Moderator":"Member")}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between border-b border-gray-200 px-8 py-3 text-gray-600",children:[(0,n.jsx)(z.h,{onSearch:g,placeholder:(0,o.t)("space_groups.search_members")}),(0,n.jsx)(F.n,{spaceGroupId:a.id})]}),(0,n.jsx)("div",{className:"h-full overflow-auto px-4 py-2",children:(0,n.jsx)(E.r,{searchTerm:v,members:K,dataLength:A,next:Z,hasMore:C,onEdit:function(e){k({member:e})},onRemove:function(e){O(e),f(!0)},onAdd:function(){S.show({spaceGroupId:a.id})},onRoleChange:function(e,t){var r=t===U.K.MODERATOR;H({spaceGroupId:a.id,memberId:e,isModerator:r})},variant:"space-group-members",scrollableTarget:"scrollable-content"})}),(0,n.jsx)(T.G,{isOpen:d,onClose:function(){return f(!1)},onConfirm:function(){w&&d&&(b(!0),W({spaceGroupId:a.id,memberId:w}))},disabled:p,confirmText:Q})]})};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var K="edit-space-group-form",J=["Details","Members"],$=function(e){var t=e.spaceGroup,r=e.tab,s=void 0===r?J[0]:r,l=Q((0,i.useState)(s),2),c=l[0],u=l[1],d=Q((0,N.k)(!1),2),f=d[0],p=d[1],b=null==t?void 0:t.id,y=(0,_.p7)(b),v=y.data,g=y.isLoading,x=(0,k.kK)(),j=(0,_.e2)(),I=H({},t,void 0===v?{}:v),T=(0,a.dd)(),E=null==I?void 0:I.active_members_count,L=w({spaceGroup:I,onSuccess:T.hide}),D=L.mutateAsync,M=L.isLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.u_,{isOpen:T.visible,onClose:T.hide,contentPortalId:"edit-space-group-content-portal",title:(0,o.t)("space_groups.form.edit.title"),children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{size:"xl",children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"md",children:(0,o.t)("space_groups.form.edit.title")}),(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:T.hide})})]}),(0,n.jsx)(m.u_.Body,{id:"scrollable-content",className:(0,S.A)({"px-0 py-0":"Members"===c}),children:(0,n.jsxs)(A.O.Group,{selectedIndex:J.indexOf(c),onChange:function(e){return u(J[e])},children:[(0,n.jsxs)(A.O.List,{children:[(0,n.jsx)(A.O,{children:(0,o.t)("space_groups.details")}),(0,n.jsx)(A.O,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.t)("space_groups.members")," ",(0,n.jsx)(P.g,{square:!0,inverted:!0,label:String(E)})]})})]}),(0,n.jsxs)(A.O.Panels,{className:"mt-4",children:[(0,n.jsx)(A.O.Panel,{children:(0,n.jsx)(h,{formId:K,onSubmit:function(e){var t;return(t=function(){var t,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,D(e)];case 1:return n.sent(),null==j||null==(r=j.actions)||null==(t=r.refresh)||t.call(r),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){W(o,n,i,a,s,"next",e)}function s(e){W(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:I,loading:g})}),(0,n.jsx)(A.O.Panel,{children:(0,n.jsx)(q,{spaceGroup:I})})]})]})}),"Details"===c&&(0,n.jsxs)(m.u_.Footer,{className:"flex w-full justify-between gap-4 md:gap-0",children:[(0,n.jsx)(C.z,{type:"button",variant:"danger-outline",className:"hidden md:inline-block",onClick:p,children:(0,o.t)("space_groups.delete_space_group")}),(0,n.jsx)(C.z,{type:"button",full:!0,variant:"secondary",className:"inline-block text-center md:hidden",onClick:function(){T.hide()},children:(0,o.t)("cancel")}),(0,n.jsx)(C.z,{full:x,type:"submit",variant:"circle",form:K,disabled:M,children:M?(0,o.t)("space_groups.form.edit.submitting"):(0,o.t)("save_changes")})]})]})]}),(0,n.jsx)(O.x,{spaceGroupId:I.id,show:f,onClose:p,onSuccess:T.hide})]})},X=a.gk.create(function(e){return(0,n.jsx)($,H({},e))}),Y=function(){return(0,a.dd)(X)}},331136:function(e,t,r){"use strict";r.d(t,{S:()=>b});var n=r(552676),i=r(392042),o=r.n(i),a=r(903225),s=r(739792),l=r(833263),c=r(757105),u=r(441342),d=r(963549),f=r(381636),m=function(e){var t=e.onClose,r=(0,c.dd)(),i=(0,a.k6)(),m=(0,u.wh)().currentCommunity,p=(0,l.m)({onEnableFlagSuccess:function(){var e=null==m?void 0:m.home_page_enabled;if(o()(t)&&t(),r.hide(),e)return i.push("/home");window.location.href="/"}}).enableFlag;return(0,n.jsx)(d.c,{isOpen:r.visible,onClose:r.hide,title:(0,s.t)("remove_onboarding_confirmation_modal.title"),cancelText:(0,s.t)("remove_onboarding_confirmation_modal.cancel"),confirmText:(0,s.t)("remove_onboarding_confirmation_modal.confirm"),onConfirm:function(){p("getting_started_checklist_hidden")},children:(0,n.jsx)(f.Z.BodyMd,{children:(0,s.t)("remove_onboarding_confirmation_modal.description")})})},p=c.gk.create(function(e){var t=e.onClose;return(0,n.jsx)(m,{onClose:t})}),b=function(){return(0,c.dd)(p)}},869300:function(e,t,r){"use strict";r.d(t,{a:()=>s});var n=r(932699),i=r(131906),o=r(847373),a=r(547144),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="",s=Number(e),l={};return t&&((0,n.isFinite)(t.trial_period_days)&&(l["presenter_options[trial_period_days]"]=t.trial_period_days),r=(0,a.UK)(l)),(0,i.useQuery)({queryKey:["paywall-show",s,r],queryFn:function(){return o.i.getPaywall(s,l)}})}},531884:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(552676),i=r(279893),o=r(547144),a=function(e){var t=e.chat;return(0,n.jsx)(i.z,{chat:t,path:(0,o.Gr)({id:t.id.toString()}),isUnread:t.has_unread_messages_for_member,isBotType:!0,shouldHightlightChat:!0},t.id)}},708050:function(e,t,r){"use strict";r.d(t,{x:()=>_});var n=r(552676),i=r(25593),o=r(279893),a=r(834675),s=r(547144),l=r(861853),c=r(751169),u=r(903225),d=r(739792),f=r(982847),m=r(39905),p=r(326120),b=r(381636),h=r(334938),y=function(){var e=(0,f.F)({name:""}),t=e.botProfiles,r=e.isBotsLoading,i=(0,l.Dk)().setCurrentBotProfile,o=(0,u.k6)(),a=function(e){i(e),o.replace((0,s.W9)())};if(r)return(0,n.jsx)(c.a,{variant:"fullscreen"});if(!t.length)return(0,n.jsx)("div",{className:"flex size-full flex-col items-center justify-start pt-12",children:(0,n.jsx)(b.Z.LabelSm,{children:(0,d.t)("messaging.no_messages")})});if(1===t.length){var y=t[0];return(0,n.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)(h.I,{profile:y}),(0,n.jsx)(b.Z.TitleSm,{as:"h2",weight:"semibold",children:y.name}),(0,n.jsx)("div",{className:"text-center text-sm font-normal leading-5 tracking-tighter",children:(0,n.jsx)(p.T,{editable:!1,rich_text_body:y.bio})})]}),(0,n.jsx)(m.z,{variant:"circle",type:"button",onClick:function(){return a(y)},className:"text-xs-plus font-semibold",children:(0,d.t)("community_inbox.new_conversation")})]})}return(0,n.jsxs)("div",{className:"flex size-full flex-col",children:[(0,n.jsx)("div",{className:"flex flex-col gap-3 px-5 py-3.5",children:(0,n.jsx)(b.Z.BodySm,{color:"text-gray-500",children:(0,d.t)("community_inbox.start_conversation")})}),(0,n.jsx)("div",{className:"flex flex-col gap-1.5 px-5 pb-4",children:t.map(function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return a(e)},children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border px-5 py-4",children:[(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(h.I,{profile:e,className:"!h-11 !w-11 rounded-full border-4"})}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col text-left",children:[(0,n.jsx)(b.Z.LabelSm,{weight:"semibold",children:e.name}),(0,n.jsx)("div",{className:"text-tertiary text-xs font-normal leading-5 tracking-tight",children:(0,n.jsx)(p.T,{editable:!1,rich_text_body:e.bio})})]})]})},e.id)})})]})},v=r(957363),g=function(){var e=(0,f.F)({name:""}),t=e.botProfiles,r=e.isBotsLoading,i=(0,l.Dk)().setCurrentBotProfile,o=(0,u.k6)(),a=function(e){i(e),o.push((0,s.W9)())};if(r)return(0,n.jsx)(c.a,{variant:"fullscreen"});if(!t.length)return(0,n.jsx)("div",{className:"flex size-full flex-col items-center justify-start pt-12",children:(0,n.jsx)(b.Z.LabelSm,{children:(0,d.t)("messaging.no_messages")})});if(1===t.length){var y=t[0];return(0,n.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)(h.I,{profile:y}),(0,n.jsx)(b.Z.TitleSm,{as:"h2",weight:"semibold",children:y.name}),(0,n.jsx)("div",{className:"text-center text-sm font-normal leading-5 tracking-tighter",children:(0,n.jsx)(p.T,{editable:!1,rich_text_body:y.bio})})]}),(0,n.jsx)(m.z,{variant:"circle",type:"button",onClick:function(){return a(y)},className:"text-xs-plus font-semibold",children:(0,d.t)("community_inbox.new_conversation")})]})}return(0,n.jsxs)("div",{className:"flex size-full flex-col",children:[(0,n.jsx)("div",{className:"flex flex-col gap-3 px-5 py-3.5",children:(0,n.jsx)(b.Z.BodySm,{color:"text-gray-500",children:(0,d.t)("community_inbox.start_conversation")})}),(0,n.jsx)("div",{className:"flex flex-col gap-1.5 px-5 pb-4",children:t.map(function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return a(e)},children:(0,n.jsxs)("div",{className:"flex gap-3 rounded-lg border px-5 py-4",children:[(0,n.jsx)(h.I,{profile:e,className:"border-primary !h-11 !w-11 rounded-full border-4"}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col text-left",children:[(0,n.jsx)(b.Z.LabelSm,{weight:"semibold",children:e.name}),(0,n.jsx)("div",{className:"text-tertiary text-xs font-normal leading-5 tracking-tight",children:(0,n.jsx)(p.T,{editable:!1,rich_text_body:e.bio})})]}),(0,n.jsx)(v.JO,{type:"20-chevron-right",className:"text-default ml-auto",width:20,height:20})]})},e.id)})})]})},_=function(e){var t=e.isRightActionBlock,r=(0,a.c)({filter:"mine"}),u=r.isChatsLoading,d=r.hasNextPage,f=r.fetchNextPage,m=(0,l.Dk)(),p=m.currentChatId,b=m.memberChats;return u?(0,n.jsx)(c.a,{center:!0}):0===b.length?t?(0,n.jsx)(g,{}):(0,n.jsx)(y,{}):(0,n.jsx)(i.Z,{scrollThreshold:.8,next:f,hasMore:!!d,dataLength:b.length,scrollableTarget:"scrollable-dms-div",className:"mt-2 h-full overflow-auto",loader:(0,n.jsx)(c.a,{center:!0}),children:b.map(function(e){var t=e.id==p;return(0,n.jsx)(o.z,{chat:e,path:(0,s.Gr)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_member,isBotType:!0},e.id)})})}},437103:function(e,t,r){"use strict";r.d(t,{q:()=>c});var n=r(552676),i=r(716089),o=r(696630),a=r(701168),s=function(e){var t=e.user1,r=e.user2,i=e.className,s=[{name:(null==t?void 0:t.name)||"",src:(null==t?void 0:t.avatar_url)||""},{name:(null==r?void 0:r.name)||"",src:(null==r?void 0:r.avatar_url)||""}];return(0,n.jsx)("div",{className:(0,a.A)("border-tertiary max-h-10",void 0===i?"":i),children:(0,n.jsx)(o.L,{users:s,isFullRounded:!0})})};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.isDirect,r=e.otherParticipants;if(t){var o=(function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,1)||function(e,t){if(e){if("string"==typeof e)return l(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(r,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]||{},a=o.avatar_url,c=o.name,u=o.status;return(0,n.jsx)(i.g,{src:a,name:c,status:u,size:"9"})}return(0,n.jsx)(s,{user1:r[0],user2:r[1]})}},242045:function(e,t,r){"use strict";r.d(t,{m:()=>O});var n=r(552676),i=r(739792),o=r(757105),a=r(240507),s=r.n(a),l=r(767900),c=r(318826),u=r(325885),d=function(e){var t=e.onSubmit,r=e.formId,i=e.prefillData;return(0,n.jsx)(l.l,{id:r,onSubmit:t,defaultValues:i||{},className:"h-full",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(u.K,{}),(0,n.jsx)(c.a,{})]})})};d.propTypes={onSubmit:s().func,formId:s().string,prefillData:s().object};var f=r(131906),m=r(903225),p=r(251630),b=r(441342),h=r(547144),y=r(60878),v=function(e){var t=e.position,r=e.onSuccess,n=(0,m.k6)(),o=(0,y.pm)(),a=o.success,s=o.error,l=(0,b.e2)().actions;return(0,f.useMutation)(function(e){var r,n;return p.iD.create({space_group:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={position:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)})},{onSuccess:function(e){a((0,i.t)("space_groups.form.create.saved_successfully")),l.refresh(),r(),n.push(h.Ts.show({spaceGroupSlug:e.slug}))},onError:function(e){return s(e.errorDetails||(0,i.t)("space_groups.form.create.save_error"))}})},g=r(39905),_=r(434519),x="new-space-group-form",j=function(e){var t=e.position,r=e.prefillData,a=(0,o.dd)(),s=v({position:t,onSuccess:a.hide}),l=s.mutate,c=s.isLoading;return(0,n.jsxs)(_.u_,{title:(0,i.t)("space_groups.form.create.title"),isOpen:a.visible,onClose:a.hide,children:[(0,n.jsx)(_.u_.Overlay,{}),(0,n.jsxs)(_.u_.Content,{size:"md",children:[(0,n.jsxs)(_.u_.Header,{className:"!px-6 md:!px-8",children:[(0,n.jsx)(_.u_.Title,{size:"md",children:(0,i.t)("space_groups.form.create.title")}),(0,n.jsx)(_.u_.HeaderActions,{children:(0,n.jsx)(_.u_.CloseButton,{onClick:a.hide})})]}),(0,n.jsx)(_.u_.Body,{className:"!px-6 md:!px-8",children:(0,n.jsx)(d,{formId:x,onSubmit:l,prefillData:r})}),(0,n.jsx)(_.u_.Footer,{className:"flex justify-end",children:(0,n.jsx)(g.z,{type:"submit",variant:"circle",form:x,disabled:c,full:!0,large:!0,children:c?(0,i.t)("space_groups.form.create.submitting"):(0,i.t)("space_groups.form.create.submit")})})]})]})},w=o.gk.create(function(e){return(0,n.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),O=function(){return(0,o.dd)(w)}},478913:function(e,t,r){"use strict";r.d(t,{C:()=>v});var n=r(552676),i=r(739792),o=r(757105),a=r(379522),s=r(963549),l=r(125152),c=r(275271),u=r(131906),d=r(816040);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var p=function(e){var t,r=e.event,n=e.onChange,i=(t=(0,c.useState)(l.HA.ALL),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=(0,u.useQueryClient)(),p=(0,d.K)({event:r}).onRecurringUnRsvpSubmit;return{setEditMode:a,onUnRsvpConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,p(o)];case 1:var t,i;return e.sent(),n((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={rsvped_event:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t)),[4,s.invalidateQueries({queryKey:["posts"]})];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)})})()}}};function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(e){var t=e.event,r=e.onChange,c="events.un_rsvp.recurring_modal",u=(0,o.dd)(),d=p({event:t,onChange:r}),f=d.setEditMode,m=d.onUnRsvpConfirm;return(0,n.jsx)(s.c,{title:(0,i.t)("".concat(c,".not_going")),isOpen:u.visible,confirmText:(0,i.t)("".concat(c,".save")),cancelText:(0,i.t)("".concat(c,".cancel")),onClose:u.hide,onCancel:u.hide,onConfirm:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),[4,u.hide()];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()},size:"sm",children:(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(a.S,{defaultChecked:l.HA.CURRENT,name:"recurring_event_settings.frequency_edit",options:[{label:(0,i.t)("events.edit.recurring_event_modal.this_event"),value:l.HA.CURRENT},{label:(0,i.t)("events.edit.recurring_event_modal.this_and_following"),value:l.HA.REMAINING},{label:(0,i.t)("events.edit.recurring_event_modal.all_events"),value:l.HA.ALL}],size:"sm",onChange:function(e){return f(e)}})})})},y=o.gk.create(function(e){return(0,n.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),v=function(){return(0,o.dd)(y)}},880646:function(e,t,r){"use strict";r.d(t,{D:()=>to});var n=r(552676),i=r(739792),o=r(275271),a=r(43226),s=r.n(a),l=r(903225),c=r(309757),u=r(757105);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=(0,o.createContext)({filters:{},setFilters:function(){},resetFilters:function(){}}),m=function(e){var t,r=e.children,i=(t=(0,o.useState)({}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];return(0,n.jsx)(f.Provider,{value:{filters:a,setFilters:s,resetFilters:function(){return s({})}},children:r})},p=function(){return(0,o.useContext)(f)};f.displayName="FilterContext";var b=r(441342);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={Latest:"latest",Oldest:"oldest",Popular:"popular",Likes:"likes",Alphabetical:"alphabetical",NewActivity:"new_activity",Relevance:"relevance"},g=(0,o.createContext)({sort:{posts:v.Relevance,comments:v.Relevance,events:v.Relevance,lessons:v.Relevance,members:v.Relevance},setSort:function(){}});g.displayName="SortContext";var _=function(e){var t,r=e.children,i=(0,b.wh)().currentCommunity,a=null==i?void 0:i.default_search_sorting,s=a&&Object.values(v).includes(a)?a:v.Relevance,l=(t=(0,o.useState)({posts:s,comments:s,events:s,lessons:s,members:s}),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1];return(0,n.jsx)(g.Provider,{value:{sort:c,setSort:function(e,t){u(function(r){var n,i;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}({},r),i=null!=(i=y({},e,t))?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n})}},children:r})},x=function(){return(0,o.useContext)(g)},j=r(932699),w=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary m-auto text-center",children:t})},O=r(957363),S=r(381636),k=function(){return(0,n.jsx)(w,{children:(0,n.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-4 p-8 pb-14","data-testid":"empty-search",children:[(0,n.jsx)(O.JO,{type:"24-search-v2",className:"text-default !h-6 !w-6",size:24}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,i.t)("search_v2.search_community")}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,i.t)("search_v2.search_community_description")})]})]})})},N=function(e){var t=e.type;return(0,n.jsx)(w,{children:(0,n.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-2 p-8 pb-14 pt-20","data-testid":"no-results-found",children:[(0,n.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,i.t)("search_v2.empty_search_by_type.".concat(t))}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,i.t)("search_v2.empty_search_description")})]})})},P=r(701168),C=r(39905),A=function(e){var t=e.isFixed,r=e.onChange,a=e.searchValue,s=e.onKeydown,l=e.isLoading,c=e.onClickCancel,u=void 0===c?j.noop:c,d=e.shouldShowClearButton,f=d&&a.length>0,m=!d||0===a.length,p=eK(),b=p.visible,h=p.hide,y=(0,o.useRef)(null);return(0,o.useEffect)(function(){y.current&&y.current.focus()},[]),(0,n.jsxs)("div",{className:(0,P.A)("bg-primary isolate z-10 flex w-full items-center justify-between gap-4 rounded-t-md",{"border-primary sticky top-0 border-b px-4 py-4 md:static md:top-auto md:px-0 md:pl-6 md:pr-1":t}),children:[(0,n.jsxs)("div",{className:"bg-secondary sm:bg-primary mr-0 flex w-full flex-1 items-center gap-3 overflow-hidden rounded-md p-3 sm:rounded-none md:p-0",children:[l?(0,n.jsx)(O.JO,{type:"loader",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}):(0,n.jsx)(O.JO,{type:"search-v2",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}),(0,n.jsx)("input",{ref:y,className:"text-darkest sm:bg-primary placeholder:text-light w-full rounded bg-transparent text-base outline-none placeholder:opacity-100 sm:rounded-none",placeholder:(0,i.t)("search_or_ask_a_question"),"data-name":"v2-search","data-testid":"v2-search","aria-autocomplete":"list",value:a,onChange:function(e){return r(e.target.value)},onKeyDown:s})]}),m&&(0,n.jsx)(C.z,{variant:"text",className:"inline-flex md:hidden",onClick:function(){(0,j.isFunction)(u)&&u(),b&&h()},children:(0,i.t)("cancel")}),f&&(0,n.jsx)(C.z,{variant:"text",onClick:u,children:(0,i.t)("search_v2.clear_search")})]})},I=r(840905),T=r(467805),E=function(){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4 pt-6 md:pt-10",children:(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{lg:!0})})}),(0,n.jsx)(T.x,{})]})},L=function(e){var t=e.type,r=e.numberOfRecords;return(0,n.jsx)("div",{className:"mt-6 flex flex-col gap-8",children:Array.from({length:void 0===r?1:r}).map(function(e,r){switch(t){case"posts":case"events":case"messages":return(0,n.jsxs)("div",{children:[(0,n.jsxs)(I.mw,{lg:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{sm:!0})})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"lessons":return(0,n.jsxs)("div",{children:[(0,n.jsxs)(I.mw,{sm:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsx)(I.RN,{children:(0,n.jsx)(I.X2,{sm:!0})})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"comments":return(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsxs)(I.mw,{sm:!0,children:[(0,n.jsx)(I.qE,{sm:!0}),(0,n.jsxs)(I.RN,{children:[(0,n.jsx)(I.X2,{sm:!0,full:!0}),(0,n.jsx)(I.X2,{sm:!0})]})]}),(0,n.jsx)("div",{className:"mt-2.5",children:(0,n.jsxs)(I.RN,{md:!0,children:[(0,n.jsx)(I.X2,{md:!0,full:!0}),(0,n.jsx)(I.X2,{md:!0,almostFull:!0})]})})]},r);case"members":return(0,n.jsxs)(I.mw,{lg:!0,children:[(0,n.jsx)(I.qE,{}),(0,n.jsxs)(I.RN,{children:[(0,n.jsx)(I.X2,{sm:!0}),(0,n.jsx)(I.X2,{sm:!0})]})]},r)}return null})})};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}var R=function(){var e,t=(e=(0,o.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||M(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return(0,o.useEffect)(function(){try{var e=localStorage.getItem("recentSearches");e&&n(JSON.parse(e))}catch(e){console.error("Error parsing recent searches from local storage",e)}},[]),{recentSearches:r,addRecentSearch:function(e){e.query&&n(function(t){var r=t.filter(function(t){return t.query!==e.query}),n=[e].concat(function(e){if(Array.isArray(e))return D(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||M(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0,10);try{localStorage.setItem("recentSearches",JSON.stringify(n))}catch(e){console.error("Error saving recent searches to local storage",e)}return n})},removeRecentSearch:function(e){n(function(t){var r=t.filter(function(t){return t.query!==e});try{localStorage.setItem("recentSearches",JSON.stringify(r))}catch(e){console.error("Error saving recent searches to local storage",e)}return r})}}},B=function(e){var t=e.type;return({post:"/c/".concat(e.space_slug,"/").concat(e.slug),community_member:"/u/".concat(e.public_uid),comment:"/c/".concat(e.space_slug,"/").concat(e.post_slug,"#comment_wrapper_").concat(e.id),space:"/c/".concat(e.slug)})[t]},z=r(131906),F=r(93199),U=r(547144),Z=r(548298),G=function(e){var t=e.enabled,r=(0,z.useQuery)(["bot-profiles"],function(){return(0,F.UT)(U.av.communityBot.agents.indexForSearch())},{enabled:t,refetchOnWindowFocus:!1}).data;return{agents:null==r?void 0:r.records}};function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||H(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}var Q=function(e){var t=e.onPressEnter,r=e.scrollToElement,n=e.type,a=e.shouldDisplayAgents,s=void 0!==a&&a,l=x().sort,c=p().filters,u=V((0,o.useState)([]),2),d=u[0],f=u[1],m=V((0,o.useState)(""),2),b=m[0],h=m[1],y=(0,Z.c)(b,300),v=V((0,o.useState)(!1),2),g=v[0],_=v[1],w=V((0,o.useState)(0),2),O=w[0],S=w[1],k=Object.entries(c).reduce(function(e,t){var r=V(t,2),n=r[0],i=r[1];return i&&i.length&&(e[n]=i),e},{}),N=["search-results",y,n,l[n],k],P=(0,z.useInfiniteQuery)(N,function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,F.UT)(U.av.searchV2.advanced.index({params:{query:y,per_page:20,page:t,type:n,order:l[n],filters:k}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},enabled:!!y,refetchOnWindowFocus:!1}),C=P.data,A=P.isLoading,I=P.error,T=P.fetchNextPage,E=P.hasNextPage,L=(0,z.useQuery)(["search-count",y],function(){return(0,F.UT)(U.av.searchV2.count.index({params:{query:y}}))},{refetchOnWindowFocus:!1,retry:1,enabled:!!y.length&&"general"!==n}),D=L.data,M=L.isLoading,R=G({enabled:!!y.length&&s}).agents;(0,o.useEffect)(function(){if(y&&((null==C?void 0:C.pages)||(null==R?void 0:R.length))){var e=s&&(null==R?void 0:R.length)&&y?R.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"agent",highlighted_name:(0,i.t)("community_inbox.ask_agent",{agent_name:e.name})},e)}):[],t=(null==C?void 0:C.pages)&&y?(0,j.uniqBy)((0,j.flatten)(C.pages.map(function(e){return e.records})),"id"):[],r=W(e).concat(W(t));_(!!(0===r.length&&y)),S(0),f(r)}},[C,R,y,s]);var B=(0,o.useCallback)(function(){h(""),S(0),q()},[]),q=function(){f([])};return{isLoading:A,hasNoResults:g,error:I,setSearchValue:h,searchValue:b,results:d,selectedResultIndex:O,resetSearch:B,onKeydown:function(e){switch(e.key){case"Escape":d.length>0&&(B(),e.stopPropagation(),e.preventDefault());break;case"ArrowDown":S(function(e){if(e<d.length){var t=e+1;return r(t),t}return e}),e.preventDefault();break;case"ArrowUp":S(function(e){if(e>0){var t=e-1;return r(t),t}return e}),e.preventDefault();break;case"Enter":null==t||t(e,O)}},isLoadingCount:M,onMouseOver:function(e){S(Number(e.currentTarget.getAttribute("aria-posinset")))},onFocus:function(e){S(Number(e.currentTarget.getAttribute("aria-posinset")))},onMouseOut:function(e){e.currentTarget.getAttribute("aria-posinset")===O&&S(-1)},hasNextPage:E,fetchNextPage:T,countData:D}},K=r(282859);function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var $=function(e){var t=e.containerEl,r=e.itemSelector,n=e.scrollIntoViewOptions,i=void 0===n?{}:n,o=e.intersectionObserverOptions;if(t){var a=J({root:t,rootMargin:"0px",threshold:1},void 0===o?{}:o),s=t.querySelector(r);if(s){var l=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting)return void l.unobserve(s);s.scrollIntoView(J({behavior:"smooth",block:"nearest"},i)),l.unobserve(s)})},a);l.observe(s)}}},X=function(e){var t=e.onClose,r=e.type,n=e.onSearchInCommunity,i=void 0===n?j.noop:n,a=e.askAgent,s=void 0===a?j.noop:a,c=e.shouldDisplayAgents,u=void 0!==c&&c,d=(0,l.k6)(),f=(0,o.useRef)(null),m=(0,o.useRef)(null),p=Q({onPressEnter:function(e){if(0===x)i();else{var t=y[x-1],r=B(t);if((0,K.n2)(e))return window.open(r);d.push(r),I(t),"agent"===t.type&&u&&s(t,b)}},scrollToElement:function(e){-1!==e&&$({containerEl:m.current,itemSelector:'[aria-posinset="'.concat(String(e),'"]')})},type:void 0===r?"general":r,shouldDisplayAgents:u}),b=p.searchValue,h=p.setSearchValue,y=p.results,v=p.isLoading,g=p.hasNoResults,_=p.onKeydown,x=p.selectedResultIndex,w=p.resetSearch,O=p.onMouseOver,S=p.onFocus,k=p.fetchNextPage,N=p.hasNextPage,P=p.onMouseOut,C=p.countData,A=p.isLoadingCount,I=function(e){(0,K.n2)(e)||(w(),t())};return(0,o.useEffect)(function(){!b&&f.current&&w()},[b,f,w]),{searchValue:b,results:y,isLoading:v||A,isLoadingSearch:v,isLoadingCount:A,hasNoResults:g,selectedResultIndex:x,searchInputRef:f,resultsContainerRef:m,setSearchValue:h,onKeydown:_,fetchNextPage:k,hasNextPage:N,resetSearch:w,onNavigateToResult:I,onMouseOver:O,onFocus:S,onMouseOut:P,countData:C}},Y=r(656317);function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=function(e){var t=e.isInitialOpen,r=e.name,o=void 0===r?"name":r,a=p(),s=a.filters,l=a.setFilters;return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(o)),title:(0,i.t)("search_v2.filters.".concat(o)),selectedText:null==s?void 0:s[o],isInitialOpen:t,onApply:function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ee(e,t,r[t])})}return e}({},s),r=null!=(r=ee({},o,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},shouldShowRemoveButton:!0,children:(0,n.jsx)(Y.xo,{name:o,placeholder:(0,i.t)("search_v2.filters.name")})})},er=r(884690),en=r(60589),ei=r(751169),eo=function(e){var t,r=e.spaceType,o=void 0===r?"posts":r,a=p(),s=a.filters,l=a.setFilters,c=(0,b.nT)().helpers,u=(0,er.S)({spaces:c.spaceWithViewContentAccess().filter(function(e){switch(o){case"posts":return(0,en.H3)(e);case"courses":return(0,en.EG)(e);case"events":return(0,en.V5)(e);default:return(0,j.stubTrue)()}}),valueKey:"id"});return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.space"),title:(0,i.t)("search_v2.filters.space"),selectedText:(null==s?void 0:s.space_ids)?(0,i.t)("search_v2.filters.n_spaces",{count:(null==s||null==(t=s.space_ids)?void 0:t.length)||0}):"",onApply:function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},s),r=r={space_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},shouldShowRemoveButton:!!(null==s?void 0:s.space_ids),children:c.isDataLoading()?(0,n.jsx)(ei.a,{}):(0,n.jsx)(Y.Bi,{options:u,className:"w-full",param:{id:"spaces",key:"spaces",value:(null==s?void 0:s.space_ids)||[]},legend:(0,i.t)("search_v2.filters.space"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_spaces")}})})},ea=r(943511),es=r(366249),el="search_v2.filters",ec=r(288203),eu=r(392339);function ed(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ef(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var em={all:"all",today:"today",yesterday:"yesterday",week:"week",month:"month",year:"year"},ep="search_v2.filters.date_ranges",eb=r(767900);function eh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ey=function(e){var t,r=e.chip,o=e.title,a=e.name,s=e.options,l=e.close,c=p(),u=c.filters,d=c.setFilters,f=function(e){var t,r;d((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eh(e,t,r[t])})}return e}({},u),r=null!=(r=eh({},a,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};return(0,n.jsx)(Y.wn,{chip:r,title:o,selectedText:null==(t=s.find(function(e){return e.value===u[a]}))?void 0:t.label,onApply:f,shouldShowRemoveButton:!0,children:(0,n.jsxs)(eb.l,{defaultValues:eh({},a,u[a]),className:"p-4",onSubmit:function(e){f(e[a]),null==l||l()},children:[(0,n.jsx)(eb.l.RadioGroup,{variant:"radio",name:a,options:s}),(0,n.jsx)(C.z,{className:"mt-4",variant:"primary",type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},ev=(0,i.t)("search_v2.filters.space"),eg={posts:[{name:ev,component:eo,spaceType:"posts"},{name:"author_name",component:et},{name:"topics",component:function(){var e,t=p(),r=t.filters,o=t.setFilters,a=(0,b.wh)().currentCommunityMember,s=(0,z.useQuery)({queryKey:[es.Jl,"communityMember",null==a?void 0:a.id],enabled:!!a,queryFn:function(){return(0,F.UT)(U.av.topics.communityMemberTopics({}))}}).data;return s&&s.records&&a?(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.topic"),title:(0,i.t)("search_v2.filters.topic"),selectedText:(null==r?void 0:r.topic_ids)?(0,i.t)("search_v2.filters.n_topics",{count:(null==r||null==(e=r.topic_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={topic_ids:null==e?void 0:e.value},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.topic_ids),children:(0,n.jsx)(Y.Bi,{options:s.records.map(function(e){return{label:e.name,value:e.id}}),className:"w-full",param:{id:"topics",key:"topics",value:(null==r?void 0:r.topic_ids)||[]},legend:(0,i.t)("search_v2.filters.topic"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_topics")}})}):null}}],comments:[{name:ev,component:eo,spaceType:"posts"},{name:"author_name",component:et}],lessons:[{name:ev,component:eo,spaceType:"courses"}],events:[{name:ev,component:eo,spaceType:"events"},{name:"event_status",component:function(){return(0,n.jsx)(ey,{name:"status",chip:(0,i.t)("search_v2.filters.event_status.title"),title:(0,i.t)("search_v2.filters.event_status.title"),options:[{value:"past",label:(0,i.t)("search_v2.filters.event_status.past")},{value:"upcoming",label:(0,i.t)("search_v2.filters.event_status.upcoming")}]})}}],members:[{name:"tags",component:function(){var e,t=p(),r=t.filters,o=t.setFilters,a=(0,ea.Y)(),s=a.isLoading,l=a.memberTags;return s||!l.length?null:(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.tag"),title:(0,i.t)("search_v2.filters.tag"),selectedText:(null==r?void 0:r.member_tag_ids)?(0,i.t)("search_v2.filters.n_tags",{count:(null==r||null==(e=r.member_tag_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={member_tag_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.member_tag_ids),children:(0,n.jsx)(Y.Bi,{options:l,className:"w-full",param:{id:"member_tags",key:"member_tags",value:(null==r?void 0:r.member_tag_ids)||[]},legend:(0,i.t)("search_v2.filters.tag"),hasSearch:!0,searchProps:{placeholder:(0,i.t)("search_v2.filters.search_tags")}})})}}],messages:[{name:"author_id",component:function(e){var t=e.isInitialOpen,r=e.name,o=p(),a=o.filters,s=o.setFilters,l=a[r],c=(0,eu.$)({memberId:l}).communityMemberQuery.data;return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(r)),title:(0,i.t)("search_v2.filters.".concat(r)),selectedText:l,renderSelectedText:function(){if(c)return c.name},isInitialOpen:t,shouldShowRemoveButton:!0,onApply:function(e){var t,n;s((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ed(e,t,r[t])})}return e}({},a),n=null!=(n=ed({},r,null==e?void 0:e.toString()))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},children:(0,n.jsx)(ec.V,{name:r,defaultValue:c})})}},{name:"chats",component:function(){var e,t=p(),r=t.filters,o=t.setFilters,a=(0,b.nT)().helpers,s=(0,er.S)({spaces:a.spaceWithViewContentAccess().filter(function(e){return(0,en.Ug)(e)&&(null==e?void 0:e.is_chat_participant)}),valueKey:"chat_room_id"});return(0,n.jsx)(Y.wn,{chip:(0,i.t)([el,"chat"]),title:(0,i.t)([el,"chat"]),selectedText:(null==r?void 0:r.chat_room_ids)?(0,i.t)([el,"n_chats"],{count:(null==r||null==(e=r.chat_room_ids)?void 0:e.length)||0}):"",onApply:function(e){var t,n;o((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),n=n={chat_room_ids:((null==e?void 0:e.value)||[]).length?null==e?void 0:e.value:null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))},shouldShowRemoveButton:!!(null==r?void 0:r.chat_room_ids),children:a.isDataLoading()?(0,n.jsx)(ei.a,{}):(0,n.jsx)(Y.Bi,{options:s,className:"w-full",param:{id:"chat_room_ids",key:"chat_room_ids",value:(null==r?void 0:r.chat_room_ids)||[]},legend:(0,i.t)([el,"chats"]),hasSearch:!0,searchProps:{placeholder:(0,i.t)([el,"search_chats"])}})})}},{name:"date_range",component:function(e){var t=e.isInitialOpen,r=e.name,o=void 0===r?"name":r,a=p(),s=a.filters,l=a.setFilters,c=function(e){var t,r;l((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ef(e,t,r[t])})}return e}({},s),r=null!=(r=ef({},o,e))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};return(0,n.jsx)(Y.wn,{chip:(0,i.t)("search_v2.filters.".concat(o)),title:(0,i.t)("search_v2.filters.".concat(o)),selectedText:(null==s?void 0:s[o])?(0,i.t)([ep,null==s?void 0:s[o]]):null,isInitialOpen:t,onApply:c,children:(0,n.jsx)("div",{className:"p-2",children:Object.values(em).map(function(e){return(0,n.jsx)("button",{type:"button","aria-label":(0,i.t)([ep,e]),onClick:function(){return c(e)},className:"hover:bg-tertiary text-xs-plus group block w-full rounded-lg px-2 py-[10px] text-left font-medium transition-colors duration-75",children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{children:(0,i.t)([ep,e])})})},e)})})})}}]},e_=function(e){return(eg[e.type]||[]).map(function(e){var t=e.name,r=e.component,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","component"]);return(0,n.jsx)("div",{className:"py-1",children:(0,n.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t},i))},t)})},ex=r(943544),ej={posts:[v.Relevance,v.Latest,v.Oldest,v.Popular,v.Likes,v.Alphabetical,v.NewActivity],comments:[v.Relevance,v.Latest,v.Oldest,v.Likes,v.Alphabetical],events:[v.Relevance,v.Latest,v.Oldest,v.Popular,v.Likes,v.Alphabetical],lessons:[v.Relevance,v.Latest,v.Oldest,v.Alphabetical],members:[v.Relevance,v.Latest,v.Oldest,v.Alphabetical]},ew=function(e){var t=e.type,r=x(),o=r.sort,a=r.setSort,s=ej[t];return s?(0,n.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,n.jsx)(ex.Lt,{options:s.map(function(e){return{value:e,label:(0,i.t)("sorting_options.".concat(e))}}),activeOptionValue:o[t],onChange:function(e){return Object.values(v).includes(e)&&a(t,e)}})}):null},eO=r(437416),eS=r(411944),ek=r(25593),eN=r(49845),eP=r(918594),eC=r(900795),eA=r(664657),eI=r(946837),eT=r(524330),eE=function(e){var t=e.name,r=e.avatarUrl,o=e.postName,a=e.createdAt,s=e.userImageSize,l=e.flaggedForApprovalAt;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(eA.W,{src:r,name:t,size:void 0===s?"6":s})}),(0,n.jsxs)("div",{className:"w-[90%]",children:[(0,n.jsxs)("div",{className:"text-selector-active truncate",children:[(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:t})," ",(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",color:"text-selector-active",children:(0,i.t)("search_v2.commented_on")})," ",(0,n.jsx)(S.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:o})]}),(0,n.jsxs)("div",{className:"leading-3",children:[(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:(0,eI.p6)(a)}),l&&(0,n.jsx)(eT.g,{className:"!bg-author-in-review post__headline-tag align ml-2 border-0 align-middle uppercase text-white",label:(0,i.t)("in_review")})]})]})]})},eL=r(534860),eD=r(22319),eM=function(e){var t=e.originalText,r=e.highlightedText,i=(0,o.useMemo)(function(){var e,n;if(!t)return"";return e=(r?Array.from(r.matchAll(/<mark>(.*?)<\/mark>/g),function(e){return e[1]}):[]).map(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}),n=RegExp("(".concat(e.join("|"),")"),"gi"),t.replace(n,"<mark>$1</mark>")},[t,r]);return(0,n.jsx)(eC.w,{content:i})},eR=r(280219),eB=r(635556),ez=r(315346),eF=Object.assign({},{Comment:function(e){var t=e.item,r=B(t),i=t.highlighted_body||t.body;return(0,n.jsx)(eP.OL,{to:r,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"comment-result",children:(0,n.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,n.jsx)(eE,{name:t.user_name,postName:t.post_name,createdAt:t.created_at,avatarUrl:t.user_avatar_url,userImageSize:"8",flaggedForApprovalAt:t.flagged_for_approval_at}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eC.w,{content:i})})})]})})},Event:function(e){var t=e.item,r=(0,U.LM)({spaceSlug:t.space_slug,slug:t.slug}),i=(0,eD.TC)().isDarkAppearance?(0,eL.aP)("dark-mode-cover-thumbnail-2x.png"):(0,eL.aP)("light-mode-cover-thumbnail-2x.png");return(0,n.jsxs)(eP.OL,{className:"flex max-w-full flex-col items-start gap-4 pr-0 md:flex-row md:items-center md:gap-6 md:pr-6","data-testid":"event-result",to:r,children:[(0,n.jsx)("div",{className:"w-full rounded md:h-24 md:w-44",children:(0,n.jsx)("img",{loading:"lazy",className:"size-full rounded-md object-cover",src:t.cover_image_url||i,alt:""})}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-1 flex-col gap-4",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:t.name,highlightedText:t.highlighted_name})}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(O.JO,{type:"16-calendar",size:16,className:"text-default !h-4 !w-4"}),(0,n.jsx)(S.Z.LabelXs,{children:(0,eI.p6)(t.starts_at,"EEEE, MMM d, h:mm a (z)")})]})})]})]})},Member:function(e){var t,r=e.item,i=(0,U.zd)({public_uid:r.public_uid});return(0,n.jsxs)(eP.OL,{to:i,className:"flex gap-4 pr-6","data-testid":"second-user-result",children:[(0,n.jsx)(eA.W,{src:null!=(t=r.avatar_url)?t:"",name:r.name,size:"16"}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:r.name})," ",r.headline&&(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:r.headline})]}),r.bio&&(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.LabelSm,{color:"text-selector-active",children:r.bio})})]})]})},Post:function(e){var t,r=e.item,o=(0,U.LM)({spaceSlug:r.space_slug,slug:r.slug}),a=r.highlighted_body||r.body;return(0,n.jsxs)(eP.OL,{to:o,className:(0,P.A)("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.cover_image_url}),"data-testid":"post-result",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.W,{src:null!=(t=r.user_avatar_url)?t:"",name:r.user_name,size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name),"  ").concat((0,eI.p6)(r.created_at))}),r.flagged_for_approval_at&&(0,n.jsx)(eT.g,{className:"!bg-author-in-review post__headline-tag align mt-0 border-0 align-middle uppercase text-white",label:(0,i.t)("in_review")})]}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:r.name,highlightedText:r.highlighted_name})}),(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eC.w,{content:a})})})]})]}),r.cover_image_url&&(0,n.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,n.jsx)("img",{loading:"lazy",className:"size-full rounded-md object-cover",src:r.cover_image_url,alt:""})})]})},Lesson:function(e){var t=e.item,r=t.space_emoji||{},i=r.emoji,o=r.custom_emoji_url,a=r.custom_emoji_dark_url,s=(0,eD.TC)().currentAppearance,l=U.H4.showLesson({spaceSlug:t.space_slug,sectionId:String(t.section_id),lessonId:t.id}),c=t.highlighted_body||t.body;return(0,n.jsx)(eP.OL,{to:l,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"course-lesson-result",children:(0,n.jsxs)("div",{className:"flex max-w-full flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eR.S,{wrapperClassName:"flex items-center !w-5 !h-5",emoji:i,customEmojiUrl:o,customEmojiDarkUrl:a,appearance:s}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:t.space_name})]}),(0,n.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,n.jsx)(S.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)(eM,{originalText:t.name,highlightedText:t.highlighted_name})}),t.body&&(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eC.w,{content:c})})})]})]})})},ImagePost:function(e){var t,r=e.item,i=(0,U.LM)({spaceSlug:r.space_slug,slug:r.slug}),o=r.highlighted_body||r.body;return(0,n.jsxs)(eP.OL,{to:i,className:(0,P.A)("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.main_gallery_image_url}),"data-testid":"post-result",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[!r.hide_meta_info&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.W,{src:null!=(t=r.user_avatar_url)?t:"",name:r.user_name,size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name),"  ").concat((0,eI.p6)(r.created_at))})]}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(eC.w,{content:o})})})})]}),r.main_gallery_image_url&&(0,n.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,n.jsx)("img",{loading:"lazy",className:"size-full rounded-md object-cover",src:r.main_gallery_image_url,alt:""})})]})},Messages:function(e){var t,r,i=e.item,o=i.sender,a=i.sent_at,s=i.embedded,l=i.chat_space_slug,c=s?i.chat_space_name:i.chat_room_name;return(0,n.jsx)(eP.OL,{to:(0,ez.ut)({uuid:i.chat_room_uuid,slug:l},i),className:"flex gap-4 pr-0 md:gap-1 md:pr-6","data-testid":"message-result",children:(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eA.W,{src:null!=(t=i.user_avatar_url)?t:"",name:null!=(r=null==o?void 0:o.name)?r:"",size:"6"}),(0,n.jsx)(S.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(null==o?void 0:o.name),"  ").concat((0,eI.p6)(a),"  ").concat(c)})]}),(0,n.jsx)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:(0,n.jsx)("div",{className:"line-clamp-4",children:(0,n.jsx)(eB.z,{message:i,shouldShowPreviewBlocks:!1})})})]})})}}),eU=function(e){var t=e.item,r=(t||{}).type,i={post:eF.Post,community_member:eF.Member,comment:"comment"===t.type&&t.post_slug&&eF.Comment,lesson:eF.Lesson,event:eF.Event,image:eF.ImagePost,messages:eF.Messages}[r];return i?(0,n.jsx)(i,{item:t}):null},eZ=r(720624),eG=function(e){var t=e.searchResults,r=e.fetchNextPage,i=e.hasNextPage;return(0,n.jsx)(ek.Z,{className:"flex flex-col gap-5 py-6",next:r,hasMore:!!i,loader:(0,n.jsx)(eZ.m,{}),dataLength:t.length,style:{overflow:"initial"},scrollableTarget:"scrollable-container",children:t.map(function(e){return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(eU,{item:e}),(0,n.jsx)(eN.i,{})]},e.id)})})};function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eW=function(e){var t=e.isOpen,r=e.onClose,a=void 0===r?j.noop:r,s=e.defaultSearchValue,c=[{id:"posts",label:(0,i.t)("search_v2.tabs.posts")},{id:"comments",label:(0,i.t)("search_v2.tabs.comments")},{id:"messages",label:(0,i.t)("search_v2.tabs.messages")},{id:"lessons",label:(0,i.t)("search_v2.tabs.lessons")},{id:"events",label:(0,i.t)("search_v2.tabs.events")},{id:"members",label:(0,i.t)("search_v2.tabs.members")}],u=(0,b.wh)(),d=u.isViewOnlyMasquerading,f=u.currentCommunityMember,m=(0,l.TH)(),h=eV((0,o.useState)(""),2),y=h[0],v=h[1],g=R().addRecentSearch,_=eV((0,o.useState)(c[0].id),2),x=_[0],w=_[1],O=p(),C=O.filters,I=O.resetFilters,T=X({onClose:a,type:x}),D=T.isLoading,M=T.isLoadingCount,B=T.results,z=T.setSearchValue,F=T.onKeydown,U=T.searchValue,Z=T.fetchNextPage,G=T.hasNextPage,q=T.countData,V=f?c:c.filter(function(e){return!["messages","members"].includes(e.id)}),W=function(e){var t;return(null==q||null==(t=q.find(function(t){return t.type===e}))?void 0:t.count)||0},H=function(){g({type:x,query:y}),z(y)};return(0,o.useEffect)(function(){return z(s),v(s),function(){w("general")}},[s,z]),(0,o.useEffect)(function(){I()},[x]),(0,o.useEffect)(function(){a()},[m,a]),(0,n.jsxs)(eO.x,{isOpen:t,onClose:a,shouldShowCloseButton:!0,contentPortalId:"search-v2-portal",children:[(0,n.jsx)(eO.x.Header,{children:(0,n.jsx)(A,{isLoading:D,isFixed:!1,searchValue:y,onChange:v,onKeydown:function(e){if("Enter"===e.key)return void H();F(e)},onClickCancel:function(){z(""),v("")},shouldShowClearButton:!0})}),(0,n.jsxs)("div",{className:"mx-auto w-full max-w-screen-md px-3 lg:px-0",children:[M&&(0,n.jsx)(E,{}),(0,n.jsxs)("div",{className:(0,P.A)({hidden:M||!U}),children:[(0,n.jsx)("div",{className:"mb-4 line-clamp-2 pt-6 md:pt-10",children:(0,n.jsx)(S.Z.TitleMd,{children:(0,i.t)("search_v2.search_result_for",{query:U})})}),(0,n.jsx)(eS.O.Group,{onChange:d?j.noop:function(e){w(V[e].id)},className:"border-b",children:(0,n.jsx)(eS.O.List,{children:V.map(function(e){return(0,n.jsxs)(eS.O,{disabled:d,children:[e.label,(0,n.jsx)(eS.O.Counter,{children:W(e.id)})]},e.id)})})})]})]}),!D&&!!U&&(0,n.jsxs)("div",{className:"mx-auto mt-2 flex w-full max-w-screen-md list-none flex-wrap items-center space-x-2 px-3 lg:px-0",children:[0==B.length&&(0,j.isEmpty)(C)?null:(0,n.jsx)(e_,{type:x}),B.length>0&&(0,n.jsx)(ew,{type:x})]}),(0,n.jsx)(eO.x.Body,{wrapperClassName:"h-full overflow-auto max-w-screen-md px-3 lg:px-0",children:D?(0,n.jsx)(L,{type:x,numberOfRecords:10}):U?(0,n.jsx)("div",{id:"scrollable-container",className:"h-full overflow-auto",children:B.length>0?(0,n.jsx)(eG,{searchResults:B,fetchNextPage:Z,hasNextPage:G}):(0,n.jsx)(N,{type:x})}):(0,n.jsx)(k,{})})]})},eH=function(e){var t=e.searchValue,r=(0,u.dd)();return(0,n.jsx)(m,{children:(0,n.jsx)(_,{children:(0,n.jsx)(eW,{isOpen:r.visible,onClose:r.remove,defaultSearchValue:t})})})},eQ=u.gk.create(function(e){var t=e.searchValue;return(0,n.jsx)(eH,{searchValue:t})}),eK=function(){return(0,u.dd)(eQ)};r(589252);var eJ=function(e){var t=e.label;return(0,n.jsx)("span",{className:"border-primary bg-primary flex rounded border px-1.5 py-[1px]",children:(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:t})})},e$=r(117617),eX=function(e){var t=e.isSelected,r=e.onClick,o=e.onMouseOver,a=e.onFocus,s=e.index,l=e.searchValue,c=(0,e$.kK)();return(0,n.jsxs)("li",{"aria-current":t,"aria-posinset":s,className:(0,P.A)("focus:bg-tertiary flex w-full cursor-pointer list-none items-center rounded px-4 py-2.5",{"bg-tertiary":t}),onMouseOver:o,onFocus:a,children:[(0,n.jsxs)("button",{type:"button",onClick:r,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline",children:[(0,n.jsx)(O.JO,{type:"search-v2",className:"text-default !h-5 min-h-[20px] !w-5 min-w-[20px]",size:20,useWithFillCurrentColor:!0}),(0,n.jsx)(S.Z.LabelSm,{as:"div",children:(0,n.jsxs)("span",{className:"[word-break:break-word]",children:[l," -"," ",c?(0,i.t)("search_v2.search_community_quick_mobile"):(0,i.t)("search_v2.search_community_quick")]})})]}),t&&(0,n.jsx)(eJ,{label:(0,i.t)("search_v2.enter_character")})]})},eY=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary",children:t})};function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function e1(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var e2=function(e){var t=e.onClick,r=e.onKeyDown,i=e.children,o=e.link,a={onClick:t,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline"};return o?(0,n.jsx)(eP.rU,e1(e0({to:o},a),{children:i})):(0,n.jsx)("button",e1(e0({type:"button"},a),{children:i}))},e3=function(e){var t=e.profile;return(0,n.jsxs)(n.Fragment,{children:[!t.avatar_url&&(0,n.jsx)(O.JO,{type:"36-ai-bot",size:36,className:"!h-6 !w-6"}),t.avatar_url&&(0,n.jsx)("img",{src:t.avatar_url,alt:t.name,className:"size-6 rounded-full",loading:"lazy"})]})},e6=function(e){var t,r=e.isSelected,o=e.onClick,a=e.onMouseOver,s=e.onFocus,l=e.index,c=e.result,u=e.link,d="community_member"===c.type,f="agent"===c.type,m="space"===c.type,p=d&&c.profile_confirmed_at,b=d&&c.email,h=m?{emoji:c.emoji,customEmojiUrl:c.custom_emoji_url,customEmojiDarkUrl:c.custom_emoji_dark_url}:{},y=(0,eD.TC)().currentAppearance,v=m||d,g=(0,e$.en)(),_=m?"space":p?"community_member":"invited_member";return(0,n.jsx)("li",{"aria-current":r,"aria-posinset":l,title:f&&c.plain_text_bio?(0,i.t)("search_v2.search_community_quick_agents_bio",{bio:c.plain_text_bio}):"",className:(0,P.A)("focus:bg-tertiary group flex w-full cursor-pointer list-none items-center rounded px-4",{"bg-tertiary":r},b?"py-1.5":"py-2.5"),onMouseOver:a,onFocus:s,children:(0,n.jsxs)(e2,{onClick:o,onKeyDown:o,link:u,children:[d&&(0,n.jsx)(eA.W,{src:null!=(t=c.avatar_url)?t:"",name:c.name,size:"6"}),f&&(0,n.jsx)(e3,{profile:c}),m&&(0,n.jsx)("div",{className:"min-h-[1.5rem] min-w-[1.5rem]",children:(0,n.jsx)(eR.S,{className:"flex !h-6 !w-6 items-center justify-center align-top",emoji:h.emoji,customEmojiUrl:h.customEmojiUrl,customEmojiDarkUrl:h.customEmojiDarkUrl,appearance:y})}),(0,n.jsxs)("div",{className:(0,P.A)("flex flex-col",{"pt-1.5":b}),children:[(0,n.jsx)(S.Z.LabelSm,{as:"div",truncate:!0,children:(0,n.jsx)(eC.w,{content:c.highlighted_name||""})}),b&&(0,n.jsx)("div",{className:"-mt-1",children:(0,n.jsx)(S.Z.LabelSm,{as:"span",truncate:!0,children:(0,n.jsx)("span",{className:"text-light leading-none",children:c.email})})})]}),(0,n.jsx)("span",{className:(0,P.A)("ml-auto hidden group-focus:block",{"!block":r||!g}),children:v&&(0,n.jsx)(S.Z.LabelXs,{color:"text-default",children:(0,i.t)(["search_v2.types",_])})})]})})},e5=r(691525),e4=r(281772),e7=r(693276),e9=r(344815),e8=function(e){var t=e.searchTerm,r=e.index,i=e.activeIndex,o=e.handleClick,a=e.removeRecentSearch,s=e.canHover,l=e.setActiveIndex,c=e.dataTestId,u=r+1===i;return(0,n.jsxs)("li",{"aria-current":u,"aria-posinset":r+1,className:(0,P.A)("group flex w-full cursor-pointer list-none items-center rounded",{"bg-tertiary":u}),"data-testid":c,children:[(0,n.jsx)("button",{type:"button",onClick:function(){return o(t.query)},onMouseOver:function(){return l(r+1)},onFocus:function(){return l(r+1)},className:"w-full focus-visible:!outline",children:(0,n.jsxs)("div",{className:"flex items-center gap-3 truncate px-4 py-2",children:[(0,n.jsx)(O.JO,{type:"16-clock",size:16,className:"text-default !h-5 min-h-[16px] !w-5 min-w-[16px]",useWithFillCurrentColor:!0}),(0,n.jsx)("div",{className:"flex-1 truncate text-left",children:(0,n.jsx)(S.Z.LabelSm,{children:t.query})})]})}),(0,n.jsx)("button",{type:"button",onClick:function(){return a(t.query)},className:(0,P.A)("text-default ml-auto mr-2 hidden rounded-md focus-visible:!outline",{"!block":!s||u}),children:(0,n.jsx)(O.JO,{useWithFillCurrentColor:!0,type:"close"})})]})},te=function(e){var t=e.recentSearches,r=e.removeRecentSearch,o=eK().show,a=(0,e$.en)(),s=function(e){o({searchValue:e}).catch(function(e){return console.error(e)})},l=t.slice(0,5),c=(0,e9.t)({optionsCount:l.length+1,onEnter:function(e){s(0===e?"":t[e-1].query)}}),u=c.activeIndex,d=c.setActiveIndex;return(0,n.jsx)("div",{className:"p-2",children:(0,n.jsxs)("ul",{className:"list-none","data-testid":"recent-search-list",children:[(0,n.jsx)("li",{className:"ml-4",children:(0,n.jsx)(S.Z.LabelXxs,{weight:"semibold",color:"text-default",children:(0,i.t)("search_v2.recent_searches.title")})}),l.map(function(e,t){return(0,n.jsx)(e8,{searchTerm:e,index:t,activeIndex:u,handleClick:s,removeRecentSearch:r,canHover:a,setActiveIndex:d,dataTestId:"recent-search-item"},"".concat(e.type,"-").concat(e.query))})]})})},tt=function(e){var t=e.onClose,r=void 0===t?s():t,i=R(),a=i.recentSearches,u=i.addRecentSearch,d=i.removeRecentSearch,f=eK().show,m=(0,o.useRef)(null),p=(0,l.k6)(),b=(0,e5.wh)().currentCommunityMember,h=function(){u({type:"general",query:_}),f({searchValue:_}).catch(function(e){return console.error(e)}),r()},y=(0,e4.O)().createChat,v=function(e,t){y({id:e.id,body:(0,e7.S)(t)}).then(function(e){p.push((0,U.Gr)({id:e.id.toString()}))}).catch(function(e){console.error(e)})},g=X({onClose:r,type:b?"general":"spaces",onSearchInCommunity:h,shouldDisplayAgents:!0,askAgent:v}),_=g.searchValue,x=g.results,j=g.isLoading,w=g.hasNoResults,O=g.setSearchValue,S=g.resultsContainerRef,N=g.onKeydown,P=g.onMouseOver,C=g.onFocus,I=g.isLoadingSearch,T=g.selectedResultIndex,E=g.resetSearch;(0,c.Z)(m,r);var L=function(e){e||h(),((null==e?void 0:e.type)==="community_member"||(null==e?void 0:e.type)==="space")&&r(),(null==e?void 0:e.type)==="agent"&&(r(),v(e,_))};return(0,n.jsxs)("div",{ref:m,children:[(0,n.jsx)(A,{onChange:function(e){return O(e)},isFixed:!0,searchValue:_,onKeydown:function(e){(_||!a.length)&&N(e)},isLoading:I,onClickCancel:function(){r(),E()}}),(0,n.jsx)(eY,{children:_||a.length?!_&&a.length?(0,n.jsx)(te,{removeRecentSearch:d,recentSearches:a}):(0,n.jsx)("div",{className:"overflow-y-auto md:max-h-96",ref:S,children:(0,n.jsxs)("ul",{className:"list-none p-2",children:[(0,n.jsx)(eX,{index:0,searchValue:_,isSelected:0===T,onClick:function(){return L(null)},onMouseOver:P,onFocus:C}),!w&&!j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"-mx-2 my-2",children:(0,n.jsx)(eN.i,{})}),x.map(function(e,t){var r=t+1,i="".concat(e.type,"-").concat(e.id);return"space"===e.type||"community_member"===e.type||"agent"===e.type?(0,n.jsx)(e6,{index:r,result:e,onMouseOver:P,onFocus:C,isSelected:T===r,onClick:function(){return L(e)},link:"community_member"===e.type?(0,U.zd)({public_uid:e.public_uid}):"space"===e.type?"/c/".concat(e.slug):null},i):null})]})]})}):(0,n.jsx)(k,{})})]})},tr=r(434519),tn=function(){var e=(0,u.dd)();return(0,n.jsxs)(tr.u_,{title:(0,i.t)("search_v2.search_community_quick"),isOpen:e.visible,onClose:e.remove,children:[(0,n.jsx)(tr.u_.Overlay,{}),(0,n.jsx)(tr.u_.Content,{position:"top",className:(0,P.A)("border-primary w-full rounded-[0px] sm:rounded-lg sm:border md:w-[620px]"),size:"xl",children:(0,n.jsx)(m,{children:(0,n.jsx)(_,{children:(0,n.jsx)(tt,{onClose:e.hide})})})})]})},ti=u.gk.create(function(){return(0,n.jsx)(tn,{})}),to=function(){return(0,u.dd)(ti)}},186226:function(e,t,r){"use strict";r.d(t,{O:()=>n});var n=function(e){var t=e.action;return"notifications__row--".concat((null==t?void 0:t.includes("flagged"))?"flagged":t)}},158361:function(e,t,r){"use strict";r.d(t,{u:()=>d});var n=r(552676),i=r(15270),o=r(954329),a=r(484057),s=r(441342),l=r(701168),c=r(983485),u=r(38500),d=function(e){var t=e.handleClose,r=(0,s.wh)().isViewOnlyMasquerading,d=(0,a.f)().resizeNotificationWindow;return(0,c.w)(d),(0,n.jsx)(u.JB,{onClose:t,children:(0,n.jsxs)("div",{className:(0,l.A)("h-full w-fit",{"pointer-events-none":r}),id:"notifications-drawer","data-testid":"notifications-drawer",children:[(0,n.jsx)(o.h,{onClose:t}),(0,n.jsx)(i.u,{})]})})}},75936:function(e,t,r){"use strict";r.d(t,{n:()=>c});var n=r(131906),i=r(739792),o=r(93199),a=r(547144),s=r(503471),l=r(60878),c=function(e){var t=e.onClose,r=void 0===t?null:t,c=e.paywallCoupon,u=void 0===c?null:c,d=(0,n.useQueryClient)(),f=(0,l.pm)(),m=f.success,p=f.error,b="paywall-coupons";return{useListPaywallCoupons:function(){return(0,n.useQuery)({queryKey:[b],queryFn:function(){return(0,o.UT)(a.av.paywallCoupons.index())}})},useShowPaywallCoupon:function(e){var t=["paywall-coupon",e];return(0,n.useQuery)({queryKey:t,queryFn:function(){return s.p.showPaywallCoupon(e)},enabled:!!e})},updateMutation:(0,n.useMutation)(function(e){var t;return s.p.updatePaywallCoupon(null!=(t=null==u?void 0:u.id)?t:0,e)},{onSuccess:function(){m((0,i.t)("settings.paywall_coupons.alerts.success.updated")),null==r||r(),d.invalidateQueries({queryKey:[b]})},onError:function(e){console.error(e.errorDetails),p(e.errorDetails)}}),createMutation:(0,n.useMutation)(function(e){return s.p.createPaywallCoupon(e)},{onSuccess:function(){m((0,i.t)("settings.paywall_coupons.alerts.success.created")),null==r||r(),d.invalidateQueries({queryKey:[b]})},onError:function(e){console.error(e.errorDetails),p(e.errorDetails)}}),destroyMutation:(0,n.useMutation)(function(){var e;return s.p.destroyPaywallCoupon(null!=(e=null==u?void 0:u.id)?e:0)},{onSuccess:function(){m((0,i.t)("settings.paywall_coupons.alerts.success.deleted")),d.invalidateQueries({queryKey:[b]})},onError:function(e){console.error(e.message),p(e.message,{duration:"long"})}})}}},242515:function(e,t,r){"use strict";r.d(t,{W:()=>l});var n=r(131906),i=r(739792),o=r(93199),a=r(547144),s=r(60878),l=function(e){var t=e.closeModal,r=void 0===t?null:t,l=e.refetchPaywallGroups,c=void 0===l?null:l,u=(0,s.pm)(),d=u.success,f=u.error;return{useListPaywallGroups:function(e){return(0,n.useQuery)({queryKey:["paywall-groups"],queryFn:function(){return(0,o.UT)(a.av.paywallGroup.index({params:e}))}})},updateMutation:(0,n.useMutation)(function(e){return(0,o.aU)(a.av.paywallGroup.update({paywallGroupId:e.id}),{paywall_group:e})},{onSuccess:function(){d(i.ZP.t("settings.paywall_groups.alerts.success.updated")),null==r||r(),null==c||c()},onError:function(e){console.error(e.errorDetails),f(String(e.errorDetails||e.message),{duration:"long"})}}),createMutation:(0,n.useMutation)(function(e){return(0,o.Cu)(a.av.paywallGroup.create(),{paywall_group:e})},{onSuccess:function(){d(i.ZP.t("settings.paywall_groups.alerts.success.created")),null==r||r(),null==c||c()},onError:function(e){console.error(e.errorDetails),f(String(e.errorDetails||e.message),{duration:"long"})}}),useGetPaywallGroup:function(e){return(0,n.useQuery)({queryKey:["paywall-group-show"],queryFn:function(){return(0,o.UT)(a.av.paywallGroup.show({paywallGroupId:e}))}})}}}},894414:function(e,t,r){"use strict";r.d(t,{N:()=>i});var n=r(441342),i=function(){var e,t=(0,n.wh)().currentCommunity;return!!(null==t||null==(e=t.policies)?void 0:e.is_paywall_payment_settings_available)}},575159:function(e,t,r){"use strict";r.d(t,{L3:()=>i,dy:()=>n,ut:()=>o,vf:()=>a});var n=1,i=0,o=730,a=6},812514:function(e,t,r){"use strict";r.d(t,{I:()=>sg});var n,i,o,a,s=r(552676),l=r(275271),c=r(757105),u=r(441342),d=r(437416),f=r(767900),m=r(751169),p=r(743032),b=r(932699),h=r(969288),y=function(){var e=(0,u.wh)().currentCommunitySettings;return!!(null==e?void 0:e.paywall_upsells_enabled)},v=r(227851),g=r(739792),_=r(256338),x=r(451019),j=r(263271),w=r(679552),O=r(701168),S=function(e){var t=e.children,r=e.className,n=e.variants,i="traditional"===(void 0===n?"traditional":n),o=i?d.x.Body:l.Fragment;return(0,s.jsx)(o,{className:"!h-[calc(100svh-12.75rem)] md:!h-[calc(100svh-11.75rem)] lg:!h-[calc(100svh-4.90rem)]",wrapperClassName:"md:w-[45rem]",children:(0,s.jsx)("div",{className:(0,O.A)("flex flex-col gap-y-8",{"px-5 py-6 md:w-[45rem] md:px-0 md:py-12":i},r),children:t})})},k=r(282895),N=r(131906),P=r(242856),C=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{showQuery:(0,N.useQuery)({queryKey:["paywall-checkout-preview",e],queryFn:function(){return P.k.show(e)},enabled:t})}},A=r(65631),I=r(847373),T=r(93199),E=r(547144),L=function(e){var t=e.paywall_id;return function(){return(0,T.UT)(E.av.paywalls.offers.index({paywall_id:t}))}},D=r(333448);function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=r.find(function(t){return t.paywall_price.id===e.id});return M({checked:t||!!n,destroy:!1,paywall_price_id:e.id,title:e.short_description},n||{})},B=function(e){var t,r,n,i,o,a,s=(null==e?void 0:e.paywall_offered)?{description:null==e?void 0:e.paywall_offered.description,id:null==e?void 0:e.paywall_offered.id,name:null==e?void 0:e.paywall_offered.name,offer_prices:(null==e?void 0:e.paywall_offered.offer_prices)||[],available_paywall_prices:(null==e?void 0:e.paywall_offered.available_paywall_prices)||[]}:void 0,l=(null==e||null==(r=e.paywall_offered)||null==(t=r.available_paywall_prices)?void 0:t.map(function(t){return R(t,e.all_paywall_offered_prices,e.paywall_offered.offer_prices)}))||[];return{all_paywall_offered_prices:null==(a=null==e?void 0:e.all_paywall_offered_prices)||a,id:null==e?void 0:e.id,paywall_coupon_enabled:!!(null==e||null==(n=e.paywall_coupon)?void 0:n.id),paywall_coupon_id:null==e||null==(i=e.paywall_coupon)?void 0:i.id,paywall_offered_id:null==e||null==(o=e.paywall_offered)?void 0:o.id,paywall_offered:s,paywall_offer_prices_attributes:l,status:(null==e?void 0:e.status)||"active",subtype:null==e?void 0:e.subtype,type:"Paywalls::Offers::Upsell",destroy:!1}},z=r(60878),F="settings.paywalls.modal.tabs.upsell",U=function(){return"paywall_offers_attributes"},Z=function(e){return"paywall_offers_attributes.".concat(e)},G=function(e){return"paywall_offers_attributes.".concat(e,".status")},q=function(e){return"paywall_offers_attributes.".concat(e,".all_paywall_offered_prices")},V=function(e){return"paywall_offers_attributes.".concat(e,".paywall_offered_id")},W=function(e){return"paywall_offers_attributes.".concat(e,".paywall_offered")},H=function(e){return"paywall_offers_attributes.".concat(e,".paywall_coupon_enabled")},Q=function(e){return"paywall_offers_attributes.".concat(e,".paywall_coupon_id")},K=function(e){return"paywall_offers_attributes.".concat(e,".subtype")},J=function(e){return"paywall_offers_attributes.".concat(e,".paywall_offer_prices_attributes")};function $(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function X(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){$(o,n,i,a,s,"next",e)}function s(e){$(o,n,i,a,s,"throw",e)}a(void 0)})}}function Y(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ee=function(e){var t=e.mainPaywallId,r=e.paywallGroupId;return X(function(){return Y(this,function(e){switch(e.label){case 0:return[4,I.i.search({params:{filters:M({status:D.Tl.ACTIVE},r?{not_subscription_group:r}:{})}})()];case 1:return[2,e.sent().records.filter(function(e){return e.id!==t})]}})})()},et=function(e){return X(function(){var t;return Y(this,function(r){switch(r.label){case 0:return[4,L({paywall_id:e})()];case 1:return t=r.sent(),[2,t.length>0?t.map(B):[B()]]}})})()},er=function(){var e=(0,z.pm)().error;return{mutations:{fetchAndBuildInitialDataMutation:(0,N.useMutation)(et,{onError:function(){e((0,g.t)([F,"forms.errors.failed_to_fetch"]))}})},queryFunctions:{fetchAvailablePaywalls:ee}}};function en(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ei=(0,l.createContext)({onClose:b.noop});ei.displayName="PaywallFormProvider";var eo=function(){return(0,l.useContext)(ei)},ea=function(e){var t=e.children,r=e.validToClose,n=e.onClose,i=(0,A.K)(),o=(0,v.Gc)(),a=o.getValues,c=o.formState.isDirty,u=o.reset,d=a(),f=(0,l.useRef)(!1),m=(0,l.useMemo)(function(){var e;return null==i||null==(e=i.data)?void 0:e.find(function(e){return e.id===Number(d.currency_id)})},[null==d?void 0:d.currency_id,null==i?void 0:i.data]),p=C({preview_paywall:!0,currency_code:null==m?void 0:m.code},!!(null==m?void 0:m.code)).showQuery,b=er().mutations.fetchAndBuildInitialDataMutation;return(0,l.useEffect)(function(){if(!f.current&&d.id){var e;f.current=!0,(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,b.mutateAsync(d.id)];case 1:var r,n;return e=t.sent(),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),n=n={paywall_offers_attributes:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),u(r),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){en(o,n,i,a,s,"next",e)}function s(e){en(o,n,i,a,s,"throw",e)}a(void 0)})})()}},[]),(0,l.useEffect)(function(){r&&(r.current=function(){return!c||c&&confirm((0,g.t)("settings.paywalls.modal.tabs.close_warning"))})},[c,r]),(0,s.jsx)(ei.Provider,{value:{supportedCurrenciesQuery:i,selectedCurrency:m,checkoutDataQuery:p,onClose:n},children:t})},es=r(381636),el=r(222294),ec=r(510060),eu=r(963549),ed="settings.paywalls.modal_add_space_group_confirmation",ef=c.gk.create(function(e){var t=e.action,r=e.spaceGroups,n=(0,c.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(eu.c,{isOpen:n.visible,title:(0,g.t)([ed,"title"]),onClose:i,cancelText:(0,g.t)([ed,"cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,g.t)([ed,"confirm"]),children:(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([ed,"description"],{count:r.length,space_groups:r.map(function(e){return e.name}).join(", ")})})})}),em="settings.paywalls.modal_remove_space_confirmation",ep=c.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,c.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(eu.c,{isOpen:n.visible,title:(0,g.t)([em,"title"]),onClose:i,cancelText:(0,g.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,g.t)(["confirm"]),children:(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([em,"description"],{count:r.length,space_groups:r.map(function(e){return e.name}).join(", ")})})})}),eb=function(e){return{id:e.id,name:e.name,properties:{automatically_add_members_to_new_spaces:e.automatically_add_members_to_new_spaces},spaces:[]}},eh=function(){var e=(0,ec.zo)({serializeSpaceGroup:eb,serializeSpace:ec.lV}),t=e.options,r=e.spaceGroupIndex,n=e.spaceRecords,i=(0,v.Gc)().watch,o=i("space_group_ids"),a=i("id"),s=(0,c.dd)(ef).show,l=(0,c.dd)(ep).show,u=function(e){var t;return null==(t=r[e])?void 0:t.properties.automatically_add_members_to_new_spaces},d=function(e){var t,r,n,i=null==(t=e.lock_screen_blocks)?void 0:t.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==i||null==(n=i.data)||null==(r=n.paywalls)?void 0:r.find(function(e){return e.id===a}))};return{options:t,addSpaceGroupCallback:function(e,t){u(t.id)?s({action:e,spaceGroups:[t]}):e()},addAllSpaceGroupCallback:function(e){var r=t.filter(function(e){return!o.includes(e.id)&&e.properties.automatically_add_members_to_new_spaces});r.length>0?s({action:e,spaceGroups:r}):e()},removeSpaceCallback:function(e,t){var r=n.filter(function(e){return e.id===t.id&&d(e)});r.length>0?l({action:e,spaces:r}):e()}}},ey=function(){var e=eh(),t=e.options,r=e.addSpaceGroupCallback,n=e.addAllSpaceGroupCallback,i=e.removeSpaceCallback;return(0,s.jsxs)(el.i,{options:t,className:"flex-auto",children:[(0,s.jsx)(el.i.Header,{children:(0,s.jsx)(el.i.SearchBar,{})}),(0,s.jsxs)(el.i.Body,{className:"overflow-y-auto",children:[(0,s.jsxs)(el.i.ListHeader,{className:"min-h-[3rem]",children:[(0,s.jsx)(el.i.ListHeaderColumnNoAccess,{onAddAll:n}),(0,s.jsx)(el.i.ListHeaderColumnAccessGranted,{})]}),(0,s.jsxs)(el.i.ListContainer,{children:[(0,s.jsx)(el.i.ListMobile,{onAddParent:r}),(0,s.jsx)(el.i.ListNoAccess,{onAddParent:r}),(0,s.jsx)(el.i.ListAccessGranted,{onRemoveChild:i})]})]})]})},ev=function(){var e=(0,v.Gc)().control,t=(0,v.qo)({control:e,name:"all_spaces"});return(0,s.jsxs)("div",{className:(0,O.A)("paywalls-admin-drawer-access-tab__container flex min-h-[40vh] flex-col gap-y-4 pb-4"),children:[(0,s.jsx)(f.l.Item,{className:(0,O.A)("!mt-0 flex flex-row-reverse items-center gap-x-4 !py-0"),name:"all_spaces",translationRoot:"settings.paywalls.modal.tabs.access",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.access.all_spaces_tooltip"),inline:!0,hideBorder:!0,hideDescription:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{name:"all_spaces",variant:"small"})}),!t&&(0,s.jsx)(ey,{}),t&&(0,s.jsxs)("div",{className:"flex size-full flex-auto flex-col items-center justify-center gap-y-3 text-center",children:[(0,s.jsx)(es.Z.TitleSm,{color:"text-selector-active",weight:"semibold",children:(0,g.t)("settings.paywalls.modal.tabs.access.all_access_title")}),(0,s.jsx)(es.Z.LabelSm,{color:"text-selector-active",children:(0,g.t)("settings.paywalls.modal.tabs.access.all_access_subtitle")})]})]})},eg=r(379522),e_=r(900555),ex=r(242515),ej=r(434519),ew=r(376492),eO=r(39905),eS=r(509213),ek=r(900795),eN="settings.access_groups.paywall_migration.modal.form",eP=function(){return(0,s.jsxs)("div",{className:"mx-1",children:[(0,s.jsx)(f.l.Item,{name:"name",translationRoot:eN,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,g.t)([eN,"tooltips.name"]),children:(0,s.jsx)(f.l.Input,{})}),(0,s.jsx)(f.l.Item,{name:"description",translationRoot:eN,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,g.t)([eN,"tooltips.description"]),children:(0,s.jsx)(f.l.Input,{})})]})},eC=r(73557),eA=r(284695),eI=r(922976),eT=r(943544),eE="settings.access_groups.paywall_migration.modal.form.actions",eL=function(e){var t=e.accessGroupIndex,r=e.removeAccessGroup,n=[{label:(0,g.t)([eE,"remove"]),onClick:function(){r(t)}}];return(0,s.jsx)(eI.S,{label:(0,g.t)([eE,"label"]),children:null==n?void 0:n.map(function(e){return(0,s.jsx)(eT.Lt.ItemWithLink,{linkType:"button",onClick:e.onClick,children:(0,s.jsx)(eT.Lt.IconContainer,{children:(0,s.jsx)(es.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:e.label})})},e.label)})})},eD=Object.freeze({select_access_groups:"select_access_groups",new_access_group:"new_access_group"}),eM=Object.freeze({migration_flow:"migration_flow",name:"name",access_groups:"access_groups",paywall_id:"paywall_id",description:"description"}),eR="settings.access_groups.paywall_migration.modal.form",eB=function(e){var t=e.accessGroups,r=(0,v.Dq)({name:eM.access_groups}),n=r.remove,i=r.append,o=(0,(0,v.Gc)().watch)(eM.access_groups),a=function(){return t.filter(function(e){return!o.some(function(t){return t.id===e.id})})},c=(0,l.useMemo)(function(){return a().map(function(e){return{value:"".concat(e.id),label:e.name}})},[a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eC.rx,{placeholder:(0,g.t)([eR,"chooser","placeholder"]),emptyMessage:(0,g.t)([eR,"chooser","no_results"]),options:c,onChange:function(e){if(e){var r=t.find(function(t){return"".concat(t.id)===e});r&&i(r)}},value:""}),(0,s.jsx)("div",{className:"h-[260px] overflow-y-auto",children:o.map(function(e,t,r){return(0,s.jsx)(eA.U,{className:(0,O.A)({"rounded-none border-t-0":t>0&&t<r.length-1,"rounded-b-none":0===t&&r.length>1,"rounded-t-none border-t-0":t===r.length-1&&r.length>1}),title:e.name,actions:(0,s.jsx)(eL,{accessGroupIndex:t,removeAccessGroup:n}),membersCount:e.total_members,spacesCount:e.total_spaces},e.id)})})]})},ez="settings.access_groups.paywall_migration.modal.form",eF=function(e){var t=e.accessGroups,r=(0,v.Gc)(),n=r.setValue,i=(0,r.watch)(eM.migration_flow),o=i===eD.new_access_group,a=(0,b.isEmpty)(t)?(0,g.t)([ez,"new_access_group_description"]):(0,g.t)([ez,"select_access_group_description"]);return(0,s.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,s.jsx)(ek.w,{content:a})}),!(0,b.isEmpty)(t)&&(0,s.jsx)(eg.S,{shouldShowInlineOptions:!0,name:"migration_access_group_flow",onChange:function(e){i!==e&&n(eM.migration_flow,e)},defaultChecked:i,size:"sm",options:[{label:(0,g.t)([ez,"tabs.new_access_groups"]),value:eD.new_access_group},{label:(0,s.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,g.t)([ez,"tabs.select_access_groups"])}),value:eD.select_access_groups}],checkedOptionClassName:"pl-9"}),o&&(0,s.jsx)(eP,{}),!o&&t&&(0,s.jsx)(eB,{accessGroups:t})]})},eU=r(957363),eZ=function(e){var t=(0,N.useQuery)({queryKey:[E.av.admin.paywalls.accessGroupsMigration.preview(e)]});return{previewData:t.data,isLoading:t.isLoading,isError:t.isError,error:t.error}},eG=function(){var e,t=(0,(0,v.Gc)().getValues)();return{formValues:{paywall_id:t.paywall_id,name:t.name,migration_flow:t.migration_flow,description:t.description,access_group_ids:null==t||null==(e=t.access_groups)?void 0:e.map(function(e){return e.id}),paywall_group_id:t.paywall_group_id,paywall_group_name:t.paywall_group_name}}},eq=r(663676),eV=r(574398),eW=function(e){var t=e.spaces,r=e.iconType,n=e.titleTranslation,i=e.className;return t.length<=0?null:(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)(es.Z.LabelSm,{weight:"bold",children:(0,g.t)(["settings.access_groups.paywall_migration.modal.preview.space_changes",n],{count:t.length})}),(0,s.jsx)("ul",{className:"list-none pb-1 pt-2",children:t.map(function(e){return(0,s.jsxs)("li",{className:"flex justify-between pb-1",children:[(0,s.jsxs)("div",{className:"flex align-middle",children:[(0,s.jsx)("div",{children:(0,s.jsx)(eU.JO,{type:"14-blue-bullet"})}),(0,s.jsx)(es.Z.BodySm,{children:e})]}),(0,s.jsx)(eU.JO,{type:r})]},e)})})]})},eH="settings.access_groups.paywall_migration.modal.preview.space_changes",eQ=function(e){var t=e.lostSpaces,r=e.newSpaces,n=(0,c.dd)();return(0,s.jsxs)(ej.u_,{isOpen:n.visible,onClose:n.hide,children:[(0,s.jsx)(ej.u_.Overlay,{}),(0,s.jsxs)(ej.u_.Content,{children:[(0,s.jsxs)(ej.u_.Header,{children:[(0,s.jsxs)(ej.u_.Title,{size:"sm",children:[(0,s.jsx)(es.Z.TitleSm,{weight:"bold",children:(0,g.t)([eH,"title"])}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(es.Z.BodySm,{children:(0,g.t)([eH,"description"])})})]}),(0,s.jsx)(ej.u_.HeaderActions,{children:(0,s.jsx)(ej.u_.CloseButton,{onClick:n.hide})})]}),(0,s.jsxs)(ej.u_.Body,{className:"mb-9 overflow-y-auto pt-2",children:[r.length>0&&(0,s.jsx)(eW,{className:"mb-3",spaces:r,iconType:"15-green-checkmark",titleTranslation:"new_spaces"}),(0,s.jsx)(eW,{spaces:t,iconType:"12-red-close",titleTranslation:"lost_spaces"})]})]})]})},eK=c.gk.create(function(e){var t=e.lostSpaces,r=e.newSpaces;return(0,s.jsx)(eQ,{lostSpaces:t,newSpaces:r})}),eJ="settings.access_groups.paywall_migration.modal.preview",e$=function(e){var t,r,n=e.previewData,i=(0,c.dd)(eK),o=(null==(t=n.changes)?void 0:t.new_spaces.length)+(null==(r=n.changes)?void 0:r.lost_spaces.length);return(0,s.jsxs)("div",{className:"border-primary rounded-xl border",children:[(0,s.jsxs)("div",{className:"border-primary bg-xy-flow flex justify-between rounded-t-xl border-b p-4",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"bold",children:(0,g.t)([eJ,"access_groups"])}),o>0&&(0,s.jsx)(eO.z,{type:"button",variant:"link",small:!0,className:"font-normal underline",onClick:function(){return i.show({lostSpaces:n.changes.lost_spaces||[],newSpaces:n.changes.new_spaces||[]})},children:(0,g.t)([eJ,"space_changes.link"],{count:o})})]}),(0,s.jsx)("div",{className:"h-[340px] overflow-auto px-6 py-5",children:n.access_groups.map(function(e){var t;return(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(eV.g,{title:e.name,subtitle:(0,g.t)([eJ,"total_spaces"],{count:(0,eq.HA)(null!=(t=e.total_spaces)?t:0)}),defaultExpanded:!1,headerBackgroundColor:"bg-primary",textTransform:"none",children:(0,s.jsx)(eV.g.BulletedList,{composedItems:e.content.map(function(e){return{label:e.space_group_name,items:e.spaces.map(function(e){return e.name})}})})},e.name)},"container-".concat(e.name))})})]})},eX=r(25593),eY=r(720624),e0=r(428414),e1=r(664657),e2=r(759705),e3="paywall-migration-members-scrollable-target",e6=function(){var e=(0,(0,v.Gc)().watch)(eM.paywall_id),t=(0,e2._)({perPage:e2.L,order:{created_at:"desc"},query:"",initialPage:1,options:{keepPreviousData:!0},filters:[{id:e,key:"paywalls",value:e}],scope:{status:"all"},isAdminScope:!0}),r=t.totalQueryAudience,n=t.isLoading,i=t.audience,o=t.fetchNextPage,a=t.hasNextPage;return(0,s.jsxs)("div",{className:"border-primary rounded-xl border",children:[(0,s.jsx)("div",{className:"border-primary bg-xy-flow rounded-t-xl border-b p-4",children:(0,s.jsx)(es.Z.LabelSm,{weight:"bold",children:(0,g.t)(["settings.access_groups.paywall_migration.modal.preview","total_members"],{total:r})})}),(0,s.jsxs)("div",{id:e3,className:"h-[340px] overflow-auto",children:[n&&(0,s.jsx)(eY.m,{}),(0,s.jsx)(eX.Z,{style:{height:"100%",overflow:"hidden"},next:o,hasMore:a||!1,scrollableTarget:e3,loader:(0,s.jsx)(eY.m,{}),dataLength:(null==i?void 0:i.length)||0,scrollThreshold:.5,children:(0,s.jsx)("div",{className:"flex w-full flex-col px-5 pt-2",children:null==i?void 0:i.map(function(e){var t=e.id,r=e.avatar_url,n=e.name;return(0,s.jsxs)("div",{className:"group flex h-12 items-center rounded-md border-none",children:[(0,s.jsx)("div",{className:"mr-2",children:(0,s.jsx)(e1.W,{src:r,name:n,size:"8"})}),(0,s.jsx)("div",{className:"w-40",children:(0,s.jsx)(e0.Y,{children:(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",children:n})})})]},t)})})})]})]})},e5=function(){var e=eZ(eG().formValues),t=e.previewData,r=e.isLoading,n=e.error,i=e.isError,o=(0,z.pm)();return((0,l.useEffect)(function(){i&&n&&o.error(n.message)},[n,i]),r)?(0,s.jsx)(m.a,{}):t?(0,s.jsxs)("div",{children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,s.jsx)(ek.w,{content:(0,g.t)(["settings.access_groups.paywall_migration.modal.preview","description"])})}),(0,s.jsxs)("div",{className:"mt-5 flex gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(e6,{})}),(0,s.jsx)(eU.JO,{type:"24-arrow-right"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(e$,{previewData:t})})]})]}):null},e4=r(439788),e7="settings.access_groups.paywall_migration.modal.form",e9=function(e){var t=e.currencyId,r=(0,(0,ex.W)({}).useListPaywallGroups)({for_access_groups:!0}),n=r.data;if(r.isLoading)return(0,s.jsx)(m.a,{});var i=((void 0===n?[]:n)||[]).filter(function(e){var r;return(null==(r=e.currency)?void 0:r.id)===t}).map(function(e){return{value:"".concat(e.id),label:e.name}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(es.Z.LabelMd,{weight:"bold",children:(0,g.t)([e7,"subscription_groups.title"])})}),(0,s.jsx)("div",{className:"mt-4",children:i.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([e7,"subscription_groups.select_description"])}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(e4.N,{name:"paywall_group_id",label:(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",children:(0,g.t)([e7,"subscription_groups.select_label"])}),labelClassName:"!mb-2 !text-sm",rules:{required:(0,g.t)([e7,"validations.subscription_group_required"])},options:i,onChange:function(){}})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([e7,"subscription_groups.new_description"])}),(0,s.jsx)("div",{className:"mx-1 mt-0.5",children:(0,s.jsx)(f.l.Item,{name:"paywall_group_name",translationRoot:e7,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,g.t)([e7,"validations.subscription_group_required"]),maxLength:{value:65,message:(0,g.t)([e7,"validations.subscription_group_name_max_length"])}},children:(0,s.jsx)(f.l.Input,{})})})]})})]})},e8=r(903225),te=r(271738),tt=function(e){var t=e.closeAllModals,r=(0,z.pm)(),n=(0,e8.k6)(),i=(0,N.useMutation)({mutationFn:function(e){return(0,T.Cu)(E.av.admin.paywalls.accessGroupsMigration.create(e))},onSuccess:function(){r.success((0,g.t)("settings.access_groups.paywall_migration.modal.form.messages.success"))},onError:function(e){r.error(e.message)},onSettled:function(){te.Eh.invalidateQueries({queryKey:[p.Rx]}),n.push(E.Lo.paywalls.index),t()}});return{migrateMutation:i.mutate,isMigrating:i.isLoading}},tr=r(495727),tn="settings.access_groups.paywall_migration.modal.form.confirm_migration",ti=function(e){var t=e.formValues,r=e.closeModals,n=(0,c.dd)(),i=tt({closeAllModals:function(){n.hide(),r()}}),o=i.migrateMutation,a=i.isMigrating;return(0,s.jsx)(tr.V,{title:(0,g.t)([tn,"title"]),isOpen:n.visible,onClose:n.hide,onCancel:n.hide,isDisabled:a,confirmText:(0,g.t)([tn,"action"]),onConfirm:function(){o(t)},children:(0,s.jsx)(ek.w,{content:(0,g.t)([tn,"description"])})})},to=c.gk.create(function(e){return(0,s.jsx)(ti,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))});function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ts="settings.access_groups.paywall_migration.modal.form",tl=function(e,t){var r=e.paywall_group_name||"",n=e.paywall_group_id;return(0,b.isEmpty)(n)&&((0,b.isEmpty)(r)||""===r.trim())?(t.error((0,g.t)([ts,"validations.subscription_group_required"])),!1):!(0,b.isEmpty)(n)||!!(0,b.isEmpty)(r)||!(r.length>65)||(t.error((0,g.t)([ts,"validations.subscription_group_name_max_length"])),!1)},tc=function(e,t,r){var n=e.name||"",i=(0,b.isEmpty)(n)||""===n.trim(),o=!(0,b.isEmpty)(n)&&n.length>65;return t&&i?(r.error((0,g.t)([ts,"validations.name_required"])),!1):t&&o?(r.error((0,g.t)([ts,"validations.name_max_length"])),!1):!(!t&&(0,b.isEmpty)(e.access_group_ids))||(r.error((0,g.t)([ts,"validations.access_group_required"])),!1)},tu=function(e){var t,r=e.closeModals,n=e.shouldShowPaywallGroupSelector,i=(0,c.dd)(to),o=eG().formValues,a=(0,z.pm)(),s=(t=(0,l.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ta(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ta(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],d=s[1],f=o.migration_flow===eD.new_access_group,m={subscription:0,select:+!!n,review:n?2:1,totalSteps:n?3:2},p=u===m.subscription&&n,b=u===m.select,h=u===m.review,y=function(){return p?tl(o,a):!b||tc(o,f,a)},v=function(){i.show({formValues:o,closeModals:r})};return{isCreatingAccessGroup:f,handleFormNavigation:function(){if(!h){var e=p?m.select:b?m.review:null;null!==e&&y()&&d(e);return}y()&&v()},isFormValid:y,handleStepChange:function(e){y()&&d(e)},selectedStepIndex:u,isReviewChangesStep:h,isPaywallGroupSelectionStep:p,isAccessGroupConfigurationStep:b,totalSteps:m.totalSteps,shouldShowBackButton:h||!p&&n}},td="settings.access_groups.paywall_migration.modal",tf=function(e){var t=e.closeModals,r=e.shouldShowPaywallGroupSelector,n=e.currencyId,i=(0,ew.S)(),o=i.data,a=i.isLoading,l=tu({closeModals:t,shouldShowPaywallGroupSelector:r}),c=l.handleStepChange,u=l.selectedStepIndex,d=l.isReviewChangesStep,f=l.handleFormNavigation,p=l.isPaywallGroupSelectionStep,b=l.isAccessGroupConfigurationStep,h=l.totalSteps,y=l.shouldShowBackButton;return a?(0,s.jsx)(m.a,{}):(0,s.jsxs)("div",{className:"px-8",children:[(0,s.jsx)("div",{className:"h-[526px]",children:(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-6",children:p&&r?(0,s.jsx)(e9,{currencyId:n}):b?(0,s.jsx)(eF,{accessGroups:o}):(0,s.jsx)(e5,{})})}),(0,s.jsxs)("div",{className:"my-2 flex",children:[(0,s.jsx)("div",{className:"flex-1 justify-start",children:y&&(0,s.jsx)(eO.z,{type:"button",variant:"secondary",className:"!py-2",onClick:function(){return c(u-1)},children:(0,g.t)([td,"form.buttons.back"])})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(eS.D,{totalDots:h,activeDot:u})}),(0,s.jsx)("div",{className:"flex flex-1 justify-end",children:(0,s.jsx)(eO.z,{type:"button",variant:"circle",className:"!py-2",onClick:f,children:d?(0,g.t)([td,"form.buttons.confirm"]):(0,g.t)([td,"form.buttons.next"])})})]})]})};function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tp=function(e){var t,r=e.paywallId,n=e.closePaywallFormModal,i=e.paywallGroupId,o=e.currencyId,a=(0,c.dd)(),u=(0,(0,ex.W)({}).useListPaywallGroups)(),d=u.data,p=u.isLoading,b=(void 0===d?[]:d).find(function(e){return e.id===i}),h=(t=(0,l.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tm(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tm(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1];return((0,l.useEffect)(function(){if(b){var e,t;v((null!=(t=null==(e=b.upgradable_paywalls)?void 0:e.length)?t:0)>1)}},[b]),p)?(0,s.jsx)(m.a,{}):(0,s.jsxs)(ej.u_,{isOpen:a.visible,onClose:a.hide,children:[(0,s.jsx)(ej.u_.Overlay,{}),(0,s.jsxs)(ej.u_.Content,{size:"xl",children:[(0,s.jsxs)(ej.u_.Header,{children:[(0,s.jsx)(ej.u_.Title,{size:"sm",children:(0,s.jsx)(es.Z.TitleSm,{weight:"bold",children:(0,g.t)(["settings.access_groups.paywall_migration.modal","title"])})}),(0,s.jsx)(ej.u_.HeaderActions,{children:(0,s.jsx)(ej.u_.CloseButton,{onClick:a.hide})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(f.l,{onSubmit:function(){},defaultValues:{paywall_id:r,access_groups:[],migration_flow:eD.new_access_group,paywall_group_id:"",paywall_group_name:""},children:(0,s.jsx)(tf,{closeModals:function(){a.hide(),n()},currencyId:o,shouldShowPaywallGroupSelector:y})})})]})]})},tb=c.gk.create(function(e){var t=e.paywallId,r=e.closePaywallFormModal,n=e.paywallGroupId,i=e.currencyId;return(0,s.jsx)(tp,{paywallId:t,closePaywallFormModal:r,paywallGroupId:n,currencyId:i})}),th="settings.access_groups.paywall_migration.empty_state",ty=function(e){var t=e.closePaywallFormModal,r=(0,v.Gc)().watch,n=r("id"),i=r("paywall_group_id"),o=r("currency_id"),a=(0,c.dd)(tb);return(0,s.jsx)("div",{className:(0,O.A)("rounded border border-gray-200"),children:(0,s.jsx)(e_.u,{header:(0,g.t)([th,"header"]),description:(0,g.t)([th,"description"]),primaryLabel:(0,g.t)([th,"primary_cta"]),secondaryLabel:(0,g.t)([th,"secondary_cta"]),onPrimaryClick:function(){a.show({paywallId:n,closePaywallFormModal:t,paywallGroupId:i,currencyId:Number(o)})},onSecondaryClick:function(){window.open("https://help.circle.so/p/basics/community-access/access-group-overview","_blank")}})})};function tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tg="settings.access_groups.paywall_migration",t_=Object.freeze({access_groups:"access_groups",space_access:"space_access"}),tx=function(e){var t,r=e.spaceAccessNode,n=e.closePaywallFormModal,i=(t=(0,l.useState)(t_.space_access),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tv(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(eg.S,{shouldShowInlineOptions:!0,name:"access_groups_enabled",onChange:function(e){a(e)},defaultChecked:o,size:"sm",options:[{label:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,g.t)([tg,"tabs.access_groups"]),(0,s.jsx)("div",{className:"border-v2-danger bg-v2-danger flex w-fit items-center space-x-2 rounded-2xl px-1 text-white",children:(0,s.jsx)(es.Z.LabelXxs,{weight:"semibold",color:"text-inherit",truncate:!0,"data-testid":"chip-title",children:(0,g.t)([tg,"tabs.new"])})})]}),value:t_.access_groups},{label:(0,g.t)([tg,"tabs.space_access"]),value:t_.space_access}],checkedOptionClassName:"pl-9"}),o===t_.space_access&&r,o===t_.access_groups&&(0,s.jsx)(ty,{closePaywallFormModal:n})]})};function tj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tw=function(e){var t,r=e.hasSubscribers,n=(0,v.Gc)().control,i=eo().onClose,o=(0,v.qo)({control:n,name:"id"}),a=(0,v.qo)({control:n,name:"access_groups_enabled"}),c=a&&o,d=(0,u.wh)().currentCommunitySettings,f=(null==d?void 0:d.access_groups_enabled)&&!o||c,m=(t=(0,l.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tj(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tj(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(0,u.wh)().currentCommunityMember;return(0,j.s)({channel:x.uX,onMessageReceive:function(e){var t=e.event,r=JSON.parse(e.record),n=r.params;(0,x.gV)(null==r?void 0:r.type)&&(null==n?void 0:n.paywall_id)&&((0,x.O6)(t)?b(!0):b(!1))},canCreateConnection:!!(null==h?void 0:h.id),community_member_id:null==h?void 0:h.id}),(0,s.jsx)(S,{className:"min-h-[40vh]",children:o&&!a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.access.title"),subtitle:(0,g.t)("settings.access_groups.paywall_migration.subtitle")}),(0,s.jsx)(tx,{spaceAccessNode:(0,s.jsx)(ev,{}),closePaywallFormModal:i})]}):f?(0,s.jsx)("div",{children:(0,s.jsx)(w.m,{recordType:_.un.paywall,areFormItemsEmbedded:!0,spaceAccessNode:c?null:(0,s.jsx)("div",{className:"-mt-2",children:(0,s.jsx)(ev,{})}),isAccessGroupsTabEnabled:f,canRemoveAllAccessGroups:!1,isSyncing:p,syncingTooltip:(0,g.t)("settings.access_groups.paywall_migration.syncing_tooltip"),addConfirmationDetails:r?{bodyI18nRoot:"settings.access_groups.admin.entry_points.association.paywall.add_confirmation"}:void 0})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.access.title")}),(0,s.jsx)(ev,{})]})})},tO=r(399883),tS=function(e){var t=e.children;return(0,s.jsx)(tO.fD.Main,{children:(0,s.jsx)("div",{className:"relative [grid-area:canvas]",children:(0,s.jsxs)(tO.fD.Canvas,{className:"relative gap-3 px-6 pb-16 pt-6 [grid-area:none]",children:[(0,s.jsx)(tO.fD.CanvasZoomableSize,{children:(0,s.jsx)(tO.fD.CanvasCard,{className:"h-full rounded-2xl border-0",children:t})}),(0,s.jsx)(tO.fD.FullscreenPreview,{}),(0,s.jsx)(tO.fD.CanvasControls,{className:"bg-primary absolute bottom-[6.5rem] left-1/2 -translate-x-1/2 !gap-0 rounded-xl shadow-lg",children:(0,s.jsx)(tO.fD.CanvasSizeToggle,{})})]})})})},tk=r(651527),tN=r(69831),tP=r(149276),tC=r(722273),tA=r(65766),tI=r(860221),tT=function(e){return Number(e)||0},tE=[function(e,t){return(0,tI.ZN)(e)?tI.Rt.value:tT(t.trial_days)>0||tT(e.upfront_payment_amount)>0?null:tI.Rt.value},function(e,t){return tT(t.trial_days)>0&&0===tT(e.upfront_payment_amount)?tI.Rt.trialThenValue:null},function(e,t){return tT(t.trial_days)>0&&tT(e.upfront_payment_amount)>0&&!e.trial_requires_upfront_payment?tI.Rt.trialThenUpfrontThenValue:null},function(e,t){return 0===tT(t.trial_days)&&tT(e.upfront_payment_amount)>0?tI.Rt.upfrontThenValue:null},function(e,t){return tT(t.trial_days)>0&&tT(e.upfront_payment_amount)>0&&e.trial_requires_upfront_payment?tI.Rt.upfrontThenTrialThenValue:null}],tL=function(e,t){var r,n;return e._destroy?null:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={id:(null==e?void 0:e.id)||Math.floor(1e5*Math.random()),scenario:tE.reduce(function(r,n){return r||n(e,t)},null)||"value",interval_type:(0,tI.mn)(e),payable_payment_methods:["card"],trial_days:Number(t.trial_days)},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)},tD={price_type:"onetime",amount:1e4,trial_requires_upfront_payment:!1,preferred:!1,currency_id:1,tmp_id:"non_existent"},tM=function(){var e,t,r=eo(),n=r.selectedCurrency,i=r.checkoutDataQuery,o=(0,(0,v.Gc)().watch)(),a=(0,u.wh)(),c=a.currentCommunity,d=a.currentCommunityMember,f=a.currentUser,m=(0,tC.pI)({paywallId:null==o?void 0:o.id,enabled:!0}).paywallCouponsListQuery,p=new URLSearchParams(null==(e=null==o?void 0:o.checkout_path)?void 0:e.split("?")[1]).get("coupon_code"),h=p?null==m||null==(t=m.data)?void 0:t.find(function(e){return e.code===p}):void 0,y=(0,l.useMemo)(function(){if(!n)return null;var e,t,r,i=(0,b.compact)(null==o||null==(r=o.stripe_prices_attributes)?void 0:r.map(function(e){return tL(e,o)}));return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),t=t={status:tA.Tl.ACTIVE,currency:n,prices:0===i.length?(0,b.compact)([tL(tD,o)]):i,paywall_customization:null==o?void 0:o.paywall_customization_attributes},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e},[o,n]);if(!c||!d||!f||!i||(null==i?void 0:i.isLoading)||!(null==i?void 0:i.data)||!y||!y.prices||!y.currency||!n)return(0,s.jsx)("div",{className:"bg-primary border-primary flex size-full flex-col items-center justify-center rounded-2xl border",children:(0,s.jsx)("div",{children:(0,s.jsx)(tN.u,{})})});var g=(null==i?void 0:i.data)||{},_=g.community,x=g.community_payment_processor,j=g.community_member_payment_processor,w=g.policies,O=g.settings,S=g.auth_provider;return(0,s.jsx)(tP.b,{"data-testid":"checkout-builder-frame",className:"border-primary rounded-2xl border",children:(0,s.jsx)("div",{className:"pointer-events-none size-full",ref:function(e){return e&&e.setAttribute("inert","")},"data-testid":"checkout-preview",children:(0,s.jsx)(tk.h,{paywall:y,currentCommunity:_,currentCommunityProcessorPaymentMethodConfigurationId:x.payment_method_configuration_id,isLinkPreferenceEnabled:x.is_link_capability_active,isMemberWithSavedPaymentMethods:j.is_member_with_saved_payment_methods,currentCommunityMemberPaymentProcessorSessionClientSecret:void 0,hasAlreadyPurchased:w.has_already_purchased,loginUrl:O.login_url,communityRootUrl:O.community_url,checkoutConfirmationUrl:O.checkout_confirmation_url,processorId:x.processor_id,processorKey:x.public_api_key,areCouponsEnabled:w.are_coupons_enabled,isTaxCollectionEnabled:!1,isMemberAddressComplete:!1,isMemberAddressRequired:!1,memberBillingInfo:void 0,isBrazilianAccountAndProcessorStripeBr:x.is_brazilian_account_and_processor_stripe_brazil,shouldShowTaxIdForm:w.should_show_tax_id_form,isTaxIdMandatory:x.is_tax_id_mandatory,authProviderProperties:S,shouldUseWrapper:!1,resetPasswordUrl:O.reset_password_url,checkoutPreviewContext:{community_id:c.id,coupon_applied:h},isPaywallsCheckoutWithoutInternalResourcesEnabled:!1})})})},tR=function(){return(0,s.jsx)(tS,{children:(0,s.jsx)(tM,{})})},tB=r(94473);function tz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tF(e,t){if(e){if("string"==typeof e)return tz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tz(e,t)}}var tU=(0,l.createContext)({currentSidebar:tB.rl.DEFAULT,history:[tB.rl.DEFAULT],goBack:b.noop,goToSidebar:b.noop});tU.displayName="CheckoutTabProvider";var tZ=function(){return(0,l.useContext)(tU)},tG=function(e){var t,r=e.initialSidebar,n=void 0===r?tB.rl.DEFAULT:r,i=e.children,o=(0,v.Gc)().control,a=(0,v.Dq)({control:o,name:"paywall_customization_attributes.benefit_properties.benefits",shouldUnregister:!1}),c=(0,v.Dq)({control:o,name:"paywall_customization_attributes.testimonial_properties.testimonials",shouldUnregister:!1}),u=(0,v.Dq)({control:o,name:"paywall_customization_attributes.badge_properties.badges",shouldUnregister:!1}),d=(0,v.Dq)({control:o,name:"paywall_customization_attributes.price_callout_properties.prices",shouldUnregister:!1}),f=(0,v.Dq)({control:o,name:"paywall_customization_attributes.reduced_price_properties.prices",shouldUnregister:!1}),m=(t=(0,l.useState)([n]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||tF(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=p[p.length-1],y=(0,l.useCallback)(function(){p.length>1&&b(p.slice(0,-1))},[p,b]),g=(0,l.useCallback)(function(e){b(((function(e){if(Array.isArray(e))return tz(e)})(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||tF(p)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))},[b,p]);return(0,s.jsx)(tU.Provider,{value:{history:p,setHistory:b,currentSidebar:h,goBack:y,goToSidebar:g,testimonialPropertiesForm:c,badgePropertiesForm:u,benefitPropertiesForm:a,priceCalloutPropertiesForm:d,reducedPricePropertiesForm:f},children:i})},tq=function(e){var t=e.children,r=e.className;return(0,s.jsx)(tO.fD.FixedLeftSidebar,{className:r,children:t})},tV=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,s.jsx)("div",{className:(0,O.A)("flex flex-col gap-y-6 px-6 py-5",r),"data-testid":n,children:t})},tW=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,s.jsx)("div",{className:(0,O.A)("border-primary flex flex-row gap-x-2 border-b px-6 py-5",r),"data-testid":n,children:t})},tH=function(e){var t=e.children,r=e.className;return(0,s.jsx)(tW,{className:r,dataTestId:"paywall-checkout-sidebar-header",children:t})},tQ=function(e){var t=e.titleLocale,r=e.toggleName,n=e.dataTestId;return(0,s.jsxs)(tH,{className:"flex flex-row items-center justify-between px-6 py-4",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",children:t}),r&&(0,s.jsx)(f.l.ToggleSwitch,{name:r,variant:"large",dataTestId:n})]})},tK=function(){},tJ=function(e){var t=e.toggleName,r=e.containerDataTestId,n=(0,(0,v.Gc)().watch)(null!=t?t:"");(0,l.useEffect)(function(){var e=document.querySelector("[data-testid='".concat(r,"']"));n?e&&e.removeAttribute("inert"):e&&e.setAttribute("inert","")},[n,r])},t$=function(e){var t=e.titleLocale,r=e.descriptionLocale,n=e.descriptionDataTestId,i=e.toggleDataTestId,o=e.containerDataTestId,a=e.children,l=e.toggleName,c=e.containerClassName,u=e.useHooks;return(void 0===u?tJ:u)({toggleName:l,containerDataTestId:o}),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(tQ,{titleLocale:t,toggleName:l,dataTestId:i}),r&&(0,s.jsx)(tW,{dataTestId:n,children:(0,s.jsx)(es.Z.BodySm,{children:r})}),(0,s.jsx)(tV,{className:(0,O.A)("h-[calc(100%-3.823rem-3.972rem-4.784rem)] overflow-y-auto p-0 pb-8 pt-5",c),dataTestId:o,children:a})]})},tX=function(e){var t=e.isEnabled,r=e.children,n=e.className;return(0,s.jsx)("div",{className:(0,O.A)("divide-primary space-y-5 divide-y",n,{"pointer-events-none opacity-50":!t}),children:r})},tY=r(346705),t0=r(223125),t1=function(e){var t=e.children,r=e.className,n=e.dataTestId,i=e.withoutBorder;return(0,s.jsx)("div",{className:(0,O.A)("border-dark flex flex-col gap-y-3 rounded-lg border p-3",r,{"border-0":i}),"data-testid":n||void 0,children:t})},t2=function(e){var t=e.name,r=e.formClassName,n=e.translationRoot,i=(0,(0,v.Gc)().getValues)(t);return(0,s.jsx)(f.l.Item,{className:r,name:t,translationRoot:n,label:(0,g.t)([n,"action_type.title"]),hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.TextSelect,{name:t,initialValue:i,options:[{value:t0.KW.DO_NOTHING,label:(0,g.t)([n,"action_type.do_nothing"])},{value:t0.KW.REDIRECT_TO,label:(0,g.t)([n,"action_type.redirect_to"])}]})})},t3=r(380171),t6=function(e){var t=e.name,r=e.translationRoot;return(0,s.jsx)(f.l.RadioGroup,{name:t,variant:"radio",verticalSpacing:"tightest",options:[{label:(0,s.jsxs)("span",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(es.Z.BodySm,{children:(0,g.t)([r,"countdown_type.remaining_time"])}),(0,s.jsx)(t3.T,{content:(0,g.t)([r,"countdown_type.remaining_time_tooltip"]),children:(0,s.jsx)(eU.JO,{type:"question-mark",className:"icon icon--xs"})})]}),value:"remaining_time"},{label:(0,s.jsxs)("span",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(es.Z.BodySm,{children:(0,g.t)([r,"countdown_type.finish_at"])}),(0,s.jsx)(t3.T,{content:(0,g.t)([r,"countdown_type.finish_at_tooltip"]),children:(0,s.jsx)(eU.JO,{type:"question-mark",className:"icon icon--xs"})})]}),value:"finish_at"}]})},t5=r(119614),t4=r(404393),t7=r(134870);function t9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var t8=function(e){var t,r=e.name,n=e.formClassName,i=e.translationRoot,o=(0,v.Gc)(),a=o.watch,c=o.setValue,u=(t=(0,l.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return t9(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t9(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],m=u[1],p=(0,ej.UV)().contentPortalElement,b=a(r),h=(0,l.useMemo)(function(){return b?(0,t7.w)({dateTime:new Date(b),format:t7.f.long_date_short_time}):""},[b]);return(0,s.jsxs)(f.l.Item,{className:n,name:r,translationRoot:i,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",children:[(0,s.jsx)("div",{className:(0,O.A)("text-default form-control flex w-full rounded-lg"),"data-testid":"scheduled_at",children:(0,s.jsxs)("button",{className:"flex w-full items-center justify-between",type:"button",onClick:function(){return m(!0)},children:[(0,s.jsx)("span",{children:h}),(0,s.jsx)(eU.JO,{type:"16-calendar",size:16,className:"!h-4 !w-4"})]})}),(0,s.jsx)(t5.M,{datePickerVisible:d,onCancel:function(e){e&&e.preventDefault(),m(!1)},value:null!=b?b:t4.DT.toISOString(),onSave:function(e){m(!1),c(r,e,{shouldDirty:!0})},saveButtonVariant:"circle",placement:"bottom-start",appendTo:p||"parent"})]})},re=r(547395),rt=function(e){var t=e.name,r=e.maxLength,n=e.children,i=e.label,o=e.labelClassName,a=e.errorMessage,c=e.className,u=(0,v.Gc)(),d=u.watch,f=u.setError,m=u.clearErrors,p=d(t),b=(null==p?void 0:p.length)||0,h=b>r;return(0,l.useEffect)(function(){h?f(t,{type:"maxLength",message:a}):m(t)},[h,t,m,f,a]),(0,s.jsxs)("div",{className:(0,O.A)("flex flex-col gap-y-1",c),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(re.C,{label:i,labelClassName:o}),(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(es.Z.LabelXs,{color:h?"text-v2-danger":"text-default",children:"".concat(b," / ").concat(r)})})]}),n]})},rr=function(e){var t=e.name,r=e.translationRoot,n=e.formClassName;return(0,s.jsx)(rt,{name:t,label:(0,g.t)([r,"displayed_text"]),maxLength:30,errorMessage:(0,g.t)([r,"errors.displayed_text_max_length"]),children:(0,s.jsx)(f.l.Item,{className:n,name:t,translationRoot:r,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:30,message:(0,g.t)([r,"errors.displayed_text_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{"data-testid":"countdown-displayed_text-input"})})})},rn=r(125578),ri=function(e){var t=e.name,r=e.translationRoot,n=e.formClassName;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.l.Item,{className:n,name:t,translationRoot:r,placeholder:(0,g.t)([r,"redirect_to_placeholder"]),hideLabel:!0,hideBorder:!0,hideDescription:!0,variant:"extra-bottom-margin",rules:{validate:function(e){return""===e||(0,rn.K)(e)||(0,g.t)([r,"errors.action.redirect_to_invalid_url"])},maxLength:255},children:(0,s.jsx)(f.l.Input,{"data-testid":"countdown-redirect_text-input"})}),(0,s.jsx)(es.Z.BodyXs,{color:"text-light",children:(0,g.t)([r,"redirect_to_description"])})]})},ro=function(e){var t=Number(e.replace(/\D/g,""));return t>=4320?4320:t<1?1:t},ra=function(e){e.target.blur()},rs=function(e){var t=e.name,r=e.formClassName,n=e.translationRoot;return(0,s.jsx)(f.l.Item,{className:r,name:t,translationRoot:n,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,transformValue:ro,rules:{max:{value:4320,message:(0,g.t)([n,"errors.remaining_time_threshold"],{max_minutes:4320})},min:{value:1,message:(0,g.t)([n,"errors.remaining_time_threshold"],{max_minutes:4320})}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{"data-testid":"countdown-remaining_time-input",type:"number",min:1,max:4320,suffix:(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([n,"remaining_time_suffix"])}),onWheelCapture:ra})})};function rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rc="!mt-0 !py-0",ru=[tB.po,"builder.countdown.fields"].join("."),rd=function(e){var t,r=e.formRootName,n=(0,v.Gc)().watch,i=(0,l.useMemo)(function(){return{text:[r,"displayed_text"].join("."),countdown_type:[r,"countdown_type"].join("."),finish_at:[r,"finish_at"].join("."),remaining_time:[r,"remaining_time"].join("."),displayed_text:[r,"displayed_text"].join("."),action:{action_type:[r,"action.action_type"].join("."),redirect_to:[r,"action.redirect_to"].join(".")}}},[r]),o=(t=n([i.countdown_type,i.action.action_type]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rl(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],c=o[1];return(0,s.jsxs)(t1,{dataTestId:"paywall-customization-countdown-fields",className:"gap-y-5 px-6 py-0",withoutBorder:!0,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(t6,{name:i.countdown_type,translationRoot:ru}),(0,tY.$Z)(a)&&(0,s.jsx)(rs,{name:i.remaining_time,formClassName:rc,translationRoot:ru}),(0,tY.jS)(a)&&(0,s.jsx)(t8,{name:i.finish_at,formClassName:rc,translationRoot:ru})]}),(0,s.jsx)(rr,{name:i.displayed_text,translationRoot:ru,formClassName:rc}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(t2,{name:i.action.action_type,translationRoot:ru,formClassName:rc}),c===t0.KW.REDIRECT_TO&&(0,s.jsx)(ri,{name:i.action.redirect_to,translationRoot:ru,formClassName:rc})]})]})},rf="paywall_customization_attributes.countdown_properties",rm=function(){var e=(0,v.Gc)().watch,t=[rf,"enabled"].join("."),r=!!e(t);return(0,s.jsx)(t$,{titleLocale:(0,g.t)([tB.po,"builder.countdown.show_countdown"]),descriptionLocale:(0,g.t)([tB.po,"builder.countdown.fields.description"]),toggleName:t,toggleDataTestId:"paywall-customization-countdown-toggle",containerDataTestId:"paywall-customization-countdown-container",children:(0,s.jsx)(tX,{"data-testid":"countdown-properties-form-group",isEnabled:r,children:(0,s.jsx)(rd,{formRootName:rf})})})},rp=r(403697),rb=r(206394),rh=function(e){var t=e.value,r=e.processing,n=e.imageUrl,i=e.handleChangeCoverClick,o=e.handleDelete,a="border-dark bg-selector-active flex h-[134px] w-full flex-col justify-center rounded-lg border border-dashed";return t||r?r?(0,s.jsx)("div",{className:a,children:(0,s.jsx)(m.a,{})}):(0,s.jsxs)("div",{className:"border-primary flex flex-col gap-y-3 rounded-lg border","data-testid":"cover-image-preview",children:[(0,s.jsx)("div",{className:"px-3 pt-3",children:(0,s.jsx)("img",{src:n,alt:"",className:(0,O.A)(a,"border-solid"),loading:"eager"})}),(0,s.jsxs)("div",{className:"border-primary flex flex-row items-center justify-between border-t p-3",children:[(0,s.jsx)(eO.z,{type:"button",variant:"link",onClick:i,"data-testid":"cover-image-replace",className:"!p-0",children:(0,s.jsx)(es.Z.LabelXs,{weight:"semibold",children:(0,g.t)("replace")})}),(0,s.jsx)(eO.z,{type:"button",variant:"circle-plain",onClick:o,className:"hover:text-dark !hover:bg-primary !p-0","data-testid":"cover-image-delete",children:(0,s.jsx)(eU.JO,{type:"20-trash-bin",viewBox:"0 0 20 20"})})]})]}):(0,s.jsxs)(eO.z,{className:a,type:"button",variant:"circle-plain",onClick:i,"data-testid":"cover-image-add",children:[(0,s.jsx)(eU.JO,{type:"24-builder-ui-sidebar-add-element-filled",className:"!w-[3rem]"}),(0,s.jsx)("span",{children:(0,g.t)("add_image")})]})},ry=function(){var e=(0,v.Gc)().setValue;return(0,s.jsx)(rb.D,{showAddCoverBtn:!0,changeImageText:(0,g.t)("replace"),name:"paywall_customization_attributes.cover_image",hideUnsplash:!1,hideEmbedUrl:!1,aspectRatio:rp.pI.PAYWALL_COVER_IMAGE,renderer:rh,onImageAttachSuccess:function(){e("paywall_customization_attributes.should_remove_cover_image",!1),e("paywall_customization_attributes.cover_image_url",null)},onDelete:function(){e("paywall_customization_attributes.should_remove_cover_image",!0),e("paywall_customization_attributes.cover_image_url",null)},title:"",customAspectRatioHelpText:(0,g.t)([tB.po,"builder.default.cover_image.recommended_size"])})},rv=function(e){var t=e.title,r=e.onClick;return(0,s.jsxs)(eO.z,{className:"text-dark hover:bg-secondary -mx-3 flex flex-row justify-between !px-3 !py-1",onClick:r,variant:"circle-plain",isFullRounded:!1,children:[(0,s.jsx)(es.Z.BodySm,{textAlign:"text-left",children:t}),(0,s.jsx)(eU.JO,{type:"24-arrow-right"})]})},rg=function(e){var t=e.title,r=e.tooltipText,n=e.children,i=e.className;return(0,s.jsxs)("div",{className:(0,O.A)("flex flex-col gap-y-3",i),children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",children:t}),r&&(0,s.jsx)(t3.T,{content:r,children:(0,s.jsx)(eU.JO,{type:"question-mark",className:"!w-[11px]",viewBox:"0 0 25 25"})})]}),(0,s.jsx)("div",{className:"flex flex-col gap-y-1",children:n})]})},r_=function(){var e=tZ().goToSidebar;return(0,s.jsxs)(tV,{children:[(0,s.jsx)(rg,{title:(0,g.t)([tB.po,"builder.default.cover_image.title"]),tooltipText:(0,g.t)([tB.po,"builder.default.cover_image.tooltip"]),children:(0,s.jsx)(ry,{})}),(0,s.jsxs)(rg,{title:(0,g.t)([tB.po,"builder.default.product_details_title"]),children:[(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.badges.title"]),onClick:function(){return e(tB.rl.BADGES)}}),(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.benefits.title"]),onClick:function(){return e(tB.rl.BENEFITS)}}),(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.testimonials.title"]),onClick:function(){return e(tB.rl.TESTIMONIALS)}})]}),(0,s.jsxs)(rg,{title:(0,g.t)([tB.po,"builder.default.price_features_title"]),children:[(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.countdown.title_sidebar"]),onClick:function(){return e(tB.rl.COUNTDOWN)}}),(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.price_callouts.title_sidebar"]),onClick:function(){return e(tB.rl.PRICE_CALLOUTS)}}),(0,s.jsx)(rv,{title:(0,g.t)([tB.po,"builder.reduced_prices.title_sidebar"]),onClick:function(){return e(tB.rl.REDUCED_PRICES)}})]})]})},rx=r(572806);function rj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function rw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var rO=function(e,t){return e.findIndex(function(e){return t.id?e.id===t.id:e.tmp_id===t.tmp_id})},rS=(0,l.createContext)({currency:{id:1,code:"usd",direction:D.RV.ltr,smallest_unit:D.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},getTrialPeriodDays:function(){return 0},getHasTrialPeriod:function(){return!1},hasPricesEligibleForTrial:function(){return!1},addPrice:b.noop,markPriceAsPreferred:b.noop,removePrice:b.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:b.noop,hideAddPriceModal:b.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1}});rS.displayName="PricingTabContext";var rk=function(e){var t,r=e.currency,n=e.children,i=(0,u.wh)().currentCommunitySettings,o=null==i||null==(t=i.price_build_options)?void 0:t.stripe,a=(0,v.Gc)(),c=a.setValue,d=a.watch,f=(0,l.useCallback)(function(){var e=d("can_be_repurchased");return o?Object.keys(o).filter(function(t){return!e||t===rx.E4.onetime}).map(function(e){return{value:e,label:o[e].name}}):[]},[o,d]),m=(0,l.useCallback)(function(){return f()[0]},[f]),p=(0,l.useCallback)(function(){return d("stripe_prices_attributes")},[d]),b=(0,l.useCallback)(function(){return p().filter(function(e){return!e._destroy})},[p]),h=b().length>0,y=(0,l.useCallback)(function(){var e=b();return(0,tI.aG)(e).length>0},[b]),g=(0,l.useCallback)(function(){var e=b();return(0,tI.fe)(e).length>0},[b]),_=(0,l.useCallback)(function(){return parseInt(d("trial_days"))},[d]),x=(0,l.useCallback)(function(){return!!d("enable_trial")&&_()>0},[d,_]),j=(0,l.useCallback)(function(){var e=b();return(0,tI.PI)(e,tI.zA.addingPrice).length>0},[b]),w=(0,v.Dq)({name:"stripe_prices_attributes",rules:{minLength:1}}),O=w.append,S=w.update,k=w.remove,N=(0,l.useCallback)(function(e){O(rw(rj({},e),{preferred:!1,currency_id:r.id,tmp_id:"tmp_".concat(Date.now())}))},[r,O]),P=(0,l.useCallback)(function(e){var t=p(),r=t.findIndex(function(e){return e.preferred});r>-1&&S(r,rw(rj({},t[r]),{preferred:!1,_updated:!0}));var n=rO(t,e);n>-1&&S(n,rw(rj({},t[n]),{preferred:!0,_updated:!0}))},[p,S]),C=(0,l.useCallback)(function(e){var t=p(),r=rO(t,e);if(r>-1){var n=t[r];n.id?S(r,rw(rj({},n),{preferred:!1,_destroy:!0})):k(r)}},[p,S,k]),A=(0,l.useCallback)(function(){return!!d("isShowingAddPriceModal")},[d]),I=(0,l.useCallback)(function(){c("isShowingAddPriceModal",!0)},[c]),T=(0,l.useCallback)(function(){c("isShowingAddPriceModal",!1)},[c]);return(0,s.jsx)(rS.Provider,{value:{currency:r,priceBuildOptions:o||{},priceTypeOptions:f,defaultPriceTypeOption:m,getPrices:p,getActivePrices:b,hasRecurringPrices:y,getTrialPeriodDays:_,getHasTrialPeriod:x,hasPricesEligibleForTrial:j,addPrice:N,markPriceAsPreferred:P,removePrice:C,isShowingAddPriceModal:A,showAddPriceModal:I,hideAddPriceModal:T,hasActivePrices:h,hasSubscriptionPrices:g},children:n})},rN=function(){return(0,l.useContext)(rS)},rP=function(e){var t=e.name;return(0,s.jsxs)(tW,{className:"items-center justify-between",children:[(0,s.jsx)(re.C,{label:(0,g.t)([tB.po,"builder.price_callouts.fields.callout_color"])}),(0,s.jsx)(f.l.ColorPickerV2,{name:t,"data-testid":"paywall-callout-color-picker"})]})},rC=r(29607),rA=r(102056);function rI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rT=(rI(n={},rx.E4.onetime,function(e){var t,r=e.row.original,n=e.options,i=void 0===n?{}:n,o=r.price_type,a=r.amount,l=rN().currency;if(o!==rx.E4.onetime)return null;var c=(0,rC.LG)(a),u=(0,rA.I)(l,c,{amountInCents:!0,includeCurrencyCode:null==(t=null==i?void 0:i.shouldShowCurrency)||t});return(0,s.jsx)(s.Fragment,{children:u})}),rI(n,rx.E4.subscription,function(e){var t,r,n,i,o=e.row.original,a=e.options,l=void 0===a?{}:a,c=o.price_type,u=o.interval_count,d=o.interval,f=o.amount,m=o.upfront_payment_amount,p=o.trial_requires_upfront_payment,b=rN(),h=b.currency,y=b.priceBuildOptions,v=b.getHasTrialPeriod,_=b.getTrialPeriodDays;if(c!==rx.E4.subscription)return null;var x=null!=(r=null==l?void 0:l.trialPeriodDays)?r:_(),j=(null==l?void 0:l.trialPeriodDays)===void 0?v():((null==l?void 0:l.trialPeriodDays)||0)>0,w=y.subscription,O=(0,tI.X8)(w,d,u),S=(0,tI.TM)(h,m,{shouldShowCurrency:null==(n=null==l?void 0:l.shouldShowCurrency)||n}),k=(0,rC.LG)(f),N=(0,rA.I)(h,k,{amountInCents:!0,includeCurrencyCode:null==(i=null==l?void 0:l.shouldShowCurrency)||i}),P=[];j&&!p&&P.push("trial"),S.variant===tI.f.upfrontPayment&&P.push("upfront"),j&&p&&P.push("trial"),P.push("value");var C=P.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,g.t)(["settings.paywall_prices",c,"short_description",C],{upfront:S.amountFormatted,interval:null==O||null==(t=O.as_adverb)?void 0:t.toLowerCase(),amount:N,trial:x})})}),rI(n,rx.E4.installments,function(e){var t,r,n,i=e.row.original,o=e.options,a=void 0===o?{}:o,l=i.price_type,c=i.interval_count,u=i.interval,d=i.installments_count,f=i.amount,m=i.upfront_payment_amount,p=i.trial_requires_upfront_payment,b=rN(),h=b.currency,y=b.priceBuildOptions,v=b.getHasTrialPeriod,_=b.getTrialPeriodDays;if(l!==rx.E4.installments)return null;var x=null!=(r=null==a?void 0:a.trialPeriodDays)?r:_(),j=(null==a?void 0:a.trialPeriodDays)===void 0?v():((null==a?void 0:a.trialPeriodDays)||0)>0,w=Object.values(y.installments.frequencies).find(function(e){return e.interval===u&&e.interval_count===c}),O=(0,tI.TM)(h,m,{shouldShowCurrency:null==a?void 0:a.shouldShowCurrency}),S=(0,rC.LG)(f),k=(0,rA.I)(h,(0,tI.$_)(O,S,d),{amountInCents:!0,includeCurrencyCode:null==(n=null==a?void 0:a.shouldShowCurrency)||n}),N=[];j&&!p&&N.push("trial"),O.variant===tI.f.upfrontPayment&&N.push("upfront"),j&&p&&N.push("trial"),N.push("value");var P=N.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,g.t)(["settings.paywall_prices",l,"short_description",P],{upfront:O.amountFormatted,count:d,interval:null==w||null==(t=w.as_adverb)?void 0:t.toLowerCase(),amount:k,trial:x})})}),n),rE=function(e){var t=rT[e.row.original.price_type];return t?(0,s.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rI(e,t,r[t])})}return e}({},e)):null},rL=function(e){var t=e.name,r=e.translationRoot,n=e.formClassName,i=e.label;return(0,s.jsx)(rt,{name:t,label:(0,s.jsx)(t3.T,{content:i,children:(0,s.jsx)("span",{className:"text-default block max-w-[13rem] truncate font-normal",children:i})}),labelClassName:"!font-normal",maxLength:30,errorMessage:(0,g.t)([r,"errors.callout_text_max_length"]),children:(0,s.jsx)(f.l.Item,{className:n,name:t,translationRoot:r,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:30,message:(0,g.t)([r,"errors.callout_text_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{"data-testid":"price_callout-callout_text-input"})})})},rD={modifiers:[{name:"offset",options:{offset:[0,5]}}]},rM=function(e){var t=e.index,r=e.onClick,n=(0,ej.UV)().contentPortalElement,i=(0,(0,v.Gc)().watch)("paywall_customization_attributes.price_callout_properties.prices.".concat(t,".highlighted"));return(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"medium",children:(0,g.t)([tB.po,"builder.price_callouts.fields.highlight_row"],{row_number:t+1})}),(0,s.jsx)(eT.Lt,{button:(0,s.jsx)("div",{className:(0,O.A)("hover:bg-tertiary flex size-6 justify-center rounded"),children:(0,s.jsx)(eU.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),className:(0,O.A)("text-dark z-10 flex justify-end"),transitionWrapperClassName:"z-50",buttonWrapperClassName:"flex",popperOptions:rD,appendTo:null!=n?n:document.body,children:(0,s.jsx)(eT.Lt.ItemWithLink,{onClick:function(){return r(t,i)},children:(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,s.jsx)(eU.JO,{type:"16-star",useWithStrokeCurrentColor:!0,useWithFillCurrentColor:!0,viewBox:"0 0 16 16"}),(0,s.jsx)(es.Z.LabelSm,{weight:"medium",children:i?(0,g.t)("remove_highlight"):(0,g.t)("highlight")})]})})})]})},rR=function(e){var t=e.priceCallout,r=e.index,n=e.onClick,i=(0,(0,v.Gc)().watch)("stripe_prices_attributes"),o=(0,l.useCallback)(function(){return i.find(function(e){return[e.id,e.tmp_id].includes(t.price_id)})},[i,null==t?void 0:t.price_id])();return o?(0,s.jsxs)("div",{children:[(0,s.jsx)(rM,{index:r,onClick:n}),(0,s.jsx)(rL,{name:"paywall_customization_attributes.price_callout_properties.prices.".concat(r,".callout_text"),translationRoot:[tB.po,"builder.price_callouts.fields"].join("."),label:(0,s.jsx)(rE,{row:{original:o},options:{shouldShowCurrency:!1}}),formClassName:"!p-0"})]}):null},rB="paywall_customization_attributes.price_callout_properties",rz=function(){var e,t={callout_color:[rB,"callout_color"].join("."),prices:[rB,"prices"].join(".")},r=tZ().priceCalloutPropertiesForm,n=(0,v.Gc)(),i=n.watch,o=n.setValue,a=n.getValues,c=i("stripe_prices_attributes");(0,l.useEffect)(function(){o("paywall_customization_attributes.price_callout_properties.prices",(0,tY.bB)(c,(null==r?void 0:r.fields)||[]))},[]);var u=function(e,r){o("paywall_customization_attributes.price_callout_properties.prices",(a(t.prices)||[]).map(function(t,n){var i,o;return i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),o=o={highlighted:!r&&n===e},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i}),{shouldDirty:!0})},d=Number(a("currency_id")),f=(0,A.K)(),m=((null==f?void 0:f.data)||[]).find(function(e){return e.id===d});return m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rP,{name:t.callout_color}),(0,s.jsx)(rk,{currency:m,children:(0,s.jsx)(tW,{className:"flex flex-col gap-y-5",children:null==r||null==(e=r.fields)?void 0:e.map(function(e,t){return(0,s.jsx)(rR,{priceCallout:e,index:t,onClick:u},e.price_id)})})})]}):null},rF=function(){return(0,s.jsx)(t$,{containerDataTestId:"paywall-customization-price-callouts-container",containerClassName:"pt-0",useHooks:tK,children:(0,s.jsx)(tX,{"data-testid":"price-callouts-properties-form-group",className:"space-y-0 divide-y-0",isEnabled:!0,children:(0,s.jsx)(rz,{})})})},rU=(0,l.createContext)({onClose:b.noop});rU.displayName="PopoverPortalContext";var rZ=function(){return(0,l.useContext)(rU)};function rG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var rq=function(e){var t,r=e.subtitle,n=e.value,i=e.colors,o=e.onChange,a=e.pickerColorsTestId,c=(t=(0,l.useState)(n),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rG(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rG(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=rZ().onClose;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex w-full flex-col gap-y-3 px-4","data-testid":"color-picker-form",children:[(0,s.jsx)(es.Z.LabelXs,{color:"text-default",children:r}),(0,s.jsx)("div",{className:"grid grid-cols-6 gap-2","data-testid":a,children:i.map(function(e){return(0,s.jsx)("button",{type:"button",className:(0,O.A)("size-8 rounded-md border",{"border-darkest border-2":u===e}),style:{backgroundColor:e},onClick:function(){return d(e)}},e)})})]}),(0,s.jsxs)("div",{className:"flex w-full flex-row justify-between px-4 pt-3","data-testid":"color-picker-form-footer",children:[(0,s.jsx)(es.Z.LabelSm,{color:"text-lightest",children:u}),(0,s.jsx)(eO.z,{type:"button",onClick:function(){o(u),f()},variant:"circle",children:(0,g.t)("save")})]})]})},rV=r(775148),rW=function(){var e=rZ().onClose;return(0,s.jsxs)("div",{className:"border-primary flex w-full items-center justify-between border-b p-3",children:[(0,s.jsx)(es.Z.BodyMd,{color:"text-dark",weight:"font-semibold",children:(0,g.t)("color_picker_v2.color_picker")}),(0,s.jsx)(rV.h,{name:"16-close",buttonSize:24,iconSize:16,ariaLabel:(0,g.t)("close"),onClick:e})]})},rH=r(383294),rQ=r(230967),rK=r(321405),rJ=r(186463);function r$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r$(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rY=function(e){var t=e.children,r=e.color,n=e.dataTestId,i=e.popoverButtonClassName,o=rX((0,l.useState)(null),2),a=o[0],c=o[1],u=rX((0,l.useState)(null),2),d=u[0],f=u[1],m=(0,rK.D)(a,d,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),p=m.styles,b=m.attributes,h=r||"#000000";return(0,s.jsx)(rH.J,{as:"div",className:"relative flex",children:function(e){var r,o,a=e.open,l=e.close,u=document.getElementById(rJ.BW);return(0,s.jsxs)(rU.Provider,{value:{open:a,onClose:l},children:[(0,s.jsx)(rH.J.Button,{ref:c,className:(0,O.A)("border-primary size-7 rounded-lg border",i),style:{backgroundColor:h},"data-testid":n}),(0,rQ.createPortal)((0,s.jsx)(rH.J.Panel,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:f,style:p.popper},b.popper),o=o={className:"bg-primary border-primary z-[9999] flex w-[16.5rem] flex-col items-center justify-center gap-y-[1.063rem] rounded-lg border pb-4 shadow-2xl",children:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)),null!=u?u:document.body)]})}})},r0=function(e){var t=e.dataTestId,r=e.pickerColorsTestId,n=e.value,i=e.subtitle,o=e.onChange,a=e.colors;return(0,s.jsxs)(rY,{color:n,dataTestId:t,children:[(0,s.jsx)(rW,{}),(0,s.jsx)(rq,{value:n,subtitle:i,onChange:o,colors:a,pickerColorsTestId:r})]})},r1=[tB.po,"builder.badges.fields"].join("."),r2=["#000000","#1F2937","#374151","#475569","#1E3A8A","#1E40AF","#1E293B","#064E3B","#581C87","#7C2D12","#3C2415","#451A03"],r3=["#F6F6F6","#F5F2ED","#F3F4F6","#FEF7F7","#F9EDE4","#FDF1F1","#FEF3E2","#EBF4FF","#ECFDF5","#F3F0FF","#E6FFFA","#F1F0EE"],r6=function(e){var t=e.keyFormId,r=e.name,n=(0,l.useMemo)(function(){return{label:[r,"label"].join("."),text_color:[r,"text_color"].join("."),background_color:[r,"background_color"].join("."),icon:[r,"icon"].join(".")}},[r]),i=(0,v.Gc)().control;return(0,s.jsxs)(t1,{dataTestId:"paywall-customization-badge-fields",children:[(0,s.jsx)(rt,{name:n.label,label:(0,g.t)([r1,"label"]),maxLength:30,errorMessage:(0,g.t)([r1,"errors.label_max_length"]),children:(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:n.label,translationRoot:r1,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:30,message:(0,g.t)([r1,"errors.label_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{prefix:(0,s.jsx)(f.l.EmojiPickerV3Wrapper,{name:n.icon,className:"!w-[3rem]"}),"data-testid":"badge-label-input"},t)})}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(re.C,{label:(0,g.t)([r1,"text_color"])}),(0,s.jsx)(v.Qr,{name:n.text_color,control:i,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,s.jsx)(r0,{colors:r2,subtitle:(0,g.t)([r1,"text_color"]),onChange:r,value:n,dataTestId:"badge-text-color-picker",pickerColorsTestId:"badge-text-picker-colors"})}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(re.C,{label:(0,g.t)([r1,"background_color"])}),(0,s.jsx)(v.Qr,{name:n.background_color,control:i,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,s.jsx)(r0,{colors:r3,subtitle:(0,g.t)([r1,"background_color"]),onChange:r,value:n,dataTestId:"badge-background-color-picker",pickerColorsTestId:"badge-background-picker-colors"})}})]})]})},r5=function(e){var t=e.onClick,r=e.disabled,n=e.label,i=e.dataTestId;return(0,s.jsx)("div",{className:"pl-6",children:(0,s.jsxs)(eO.z,{disabled:r,type:"button",onClick:t,variant:"circle","data-testid":i,children:[(0,s.jsx)(eU.JO,{type:"20-plus-v2"}),n]})})},r4=function(e){var t=e.dataTestId,r=e.index,n=e.fields,i=e.hasReachedLimit,o=e.hasReachedMinimum,a=e.onRemoveClick,l=e.onDuplicateClick,c=e.children,u=e.title;return(0,s.jsxs)("div",{className:(0,O.A)("flex flex-col gap-y-2 px-6",{"pt-5":r>0&&r<n.length}),"data-testid":t,children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between","data-testid":"form-item-group-actions",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",children:u||(0,g.t)("item")}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,s.jsx)(eO.z,{type:"button",variant:"circle-plain",disabled:o,className:"hover:text-dark !hover:bg-primary !p-1",onClick:a,"data-testid":"form-item-group-remove-button",children:(0,s.jsx)(eU.JO,{type:"16-trash-bin",viewBox:"0 0 16 16",className:"!h-4 !w-4"})}),(0,s.jsx)(eO.z,{disabled:i,variant:"circle-plain",className:"hover:text-dark !hover:bg-primary !p-1",type:"button",onClick:l,"data-testid":"form-item-group-duplicate-button",children:(0,s.jsx)(eU.JO,{type:"16-copy",viewBox:"0 0 16 16",className:"!h-4 !w-4"})})]})]}),c]})},r7=function(){var e=(0,v.Gc)(),t=e.watch,r=e.getValues,n=tZ().badgePropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.badge_properties.enabled"),c=i.length>=5,u=i.length<=1;return(0,s.jsxs)(t$,{titleLocale:(0,g.t)([tB.po,"builder.badges.show_badges"]),toggleName:"paywall_customization_attributes.badge_properties.enabled",toggleDataTestId:"paywall-customization-badge-toggle",containerDataTestId:"paywall-customization-badge-container",children:[(0,s.jsx)(tX,{"data-testid":"badge-properties-form-group",isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.badge_properties.badges.".concat(t);return(0,s.jsx)(r4,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(r(n))},onRemoveClick:function(){return a(t)},title:(0,g.t)("badge"),dataTestId:"badge-form-item-group",children:(0,s.jsx)(r6,{keyFormId:e.id,name:n,disabled:!l})},e.id)})}),(0,s.jsx)(r5,{label:(0,g.t)([tB.po,"builder.badges.add_badge"]),onClick:function(){return o(tY.uf)},disabled:c||!l,dataTestId:"add-badge-button"})]})},r9="!mt-0 !py-0",r8=[tB.po,"builder.benefits.fields"].join("."),ne=function(e){var t=e.keyFormId,r=e.name,n=(0,l.useMemo)(function(){return{title:[r,"title"].join("."),description:[r,"description"].join("."),icon:[r,"icon"].join(".")}},[r]);return(0,s.jsxs)(t1,{dataTestId:"paywall-customization-benefit-fields",children:[(0,s.jsx)(rt,{name:n.title,label:(0,g.t)([r8,"title"]),maxLength:50,errorMessage:(0,g.t)([r8,"errors.title_max_length"]),children:(0,s.jsx)(f.l.Item,{className:r9,name:n.title,translationRoot:r8,hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:50,message:(0,g.t)([r8,"errors.title_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{prefix:(0,s.jsx)(f.l.EmojiPickerV3Wrapper,{name:n.icon,className:"!w-[3rem]"}),"data-testid":"benefit-title-input"},t)})}),(0,s.jsx)(rt,{name:n.description,label:(0,g.t)([r8,"description"]),maxLength:280,errorMessage:(0,g.t)([r8,"errors.description_max_length"]),children:(0,s.jsx)(f.l.Item,{className:r9,name:n.description,translationRoot:r8,placeholder:(0,g.t)([r8,"description_placeholder"]),hideBorder:!0,hideLabel:!0,fullWidth:!1,hideDescription:!0,rules:{maxLength:{value:280,message:(0,g.t)([r8,"errors.description_max_length"])}},children:(0,s.jsx)(f.l.TextArea,{name:n.description,"data-testid":"benefit-description-input"},t)})})]})},nt="builder.benefits.fields",nr=function(e){var t=e.className;return(0,s.jsx)(rt,{name:"paywall_customization_attributes.benefit_properties.title",label:(0,g.t)("title"),maxLength:50,errorMessage:(0,g.t)([tB.po,nt,"errors","title_max_length"]),className:t,children:(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"paywall_customization_attributes.benefit_properties.title",hideLabel:!0,hidePlaceholder:!0,hideBorder:!0,hideDescription:!0,rules:{maxLength:{value:50,message:(0,g.t)([tB.po,nt,"errors","title_max_length"])}},variant:"extra-bottom-margin",children:(0,s.jsx)(f.l.Input,{})})})},nn=function(){var e=(0,v.Gc)(),t=e.watch,r=e.getValues,n=tZ().benefitPropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.benefit_properties.enabled"),c=i.length>=10,u=i.length<=1;return(0,s.jsxs)(t$,{titleLocale:(0,g.t)([tB.po,"builder.benefits.show_benefits"]),toggleName:"paywall_customization_attributes.benefit_properties.enabled",containerDataTestId:"paywall-customization-benefit-container",toggleDataTestId:"paywall-customization-benefit-toggle",children:[(0,s.jsx)(nr,{className:"border-primary border-b px-6 pb-5"}),(0,s.jsx)(tX,{isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.benefit_properties.benefits.".concat(t);return(0,s.jsx)(r4,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(r(n))},onRemoveClick:function(){return a(t)},title:(0,g.t)("item"),dataTestId:"benefit-form-item-group",children:(0,s.jsx)(ne,{keyFormId:e.id,name:n})},e.id)})}),(0,s.jsx)(r5,{label:(0,g.t)([tB.po,"builder.benefits.add_item"]),onClick:function(){return o(tY.Wt)},disabled:c||!l,dataTestId:"add-benefit-button"})]})},ni=r(532602),no=function(e){var t=e.value,r=e.processing,n=e.imageUrl,i=e.handleChangeCoverClick,o=e.handleDelete,a=e.testimonialName,l="w-5 h-5";return t||r?r?(0,s.jsx)("div",{className:(0,O.A)(l,"bg-secondary rounded-full")}):(0,s.jsx)(eO.z,{type:"button",variant:"circle-plain",onClick:o,className:(0,O.A)("hover:text-dark !hover:bg-primary !p-0",l),"data-testid":"cover-image-delete",children:(0,s.jsx)(ni.s,{name:a,isFullRounded:!0,size:"6",src:n})}):(0,s.jsx)(eO.z,{className:(0,O.A)(l,"!p-0"),type:"button",variant:"circle-plain",onClick:i,"data-testid":"cover-image-add",children:(0,s.jsx)(ni.s,{name:a,isFullRounded:!0,size:"6"})})},na=function(e){var t=e.signedIdField,r=e.urlField,n=e.testimonialName,i=(0,v.Gc)().setValue;return(0,s.jsx)(rb.D,{showAddCoverBtn:!0,changeImageText:(0,g.t)("replace"),name:t,hideUnsplash:!0,hideEmbedUrl:!0,aspectRatio:rp.pI.PAYWALL_AVATAR_IMAGE,renderer:function(e){var t,r;return(0,s.jsx)(no,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={testimonialName:n||(0,g.t)("random")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},onDelete:function(){i(t,null),i(r,null)},title:(0,g.t)([tB.po,"builder.testimonials.fields.avatar_image_title"]),customAspectRatioHelpText:(0,g.t)([tB.po,"builder.testimonials.fields.avatar_image_recomendation_size"])})},ns=[tB.po,"builder.testimonials.fields"].join("."),nl="!mt-0 !py-0",nc=function(e){var t=e.name,r=e.disabled,n=e.keyFormId,i=(0,l.useMemo)(function(){return{quote:[t,"quote"].join("."),name:[t,"name"].join("."),avatar_image:[t,"avatar_image"].join("."),avatar_image_url:[t,"avatar_image_url"].join("."),headline:[t,"headline"].join("."),display_style_type:[t,"display_style.type"].join("."),display_style_color:[t,"display_style.color"].join(".")}},[t]),o=(0,v.Gc)(),a=o.watch,c=o.getValues,u=o.setValue,d=a(i.display_style_type),m=(0,l.useRef)(c(i.display_style_type));(0,l.useEffect)(function(){m.current!==d&&u(i.display_style_color,d===tB.y_.STARS?tB.F_.STARS:tB.F_.QUOTATION_MARK),m.current=d},[d]);var p=a(i.name)||"",b=a(i.quote)||"",h=a(i.headline)||"",y=function(){return""!==p||""!==b||""!==h||(0,g.t)([ns,"errors.fulfill_one_field_at_least"])};return(0,s.jsxs)(t1,{dataTestId:"paywall-customization-testimonial-fields",children:[(0,s.jsx)(rt,{name:i.quote,label:(0,g.t)([ns,"quote"]),maxLength:500,errorMessage:(0,g.t)([ns,"errors.quote_max_length"]),children:(0,s.jsx)(f.l.Item,{className:nl,name:i.quote,translationRoot:ns,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,fullWidth:!1,hideDescription:!0,rules:{validate:y,maxLength:{value:500,message:(0,g.t)([ns,"errors.quote_max_length"])}},children:(0,s.jsx)(f.l.TextArea,{name:i.quote,"data-testid":"testimonial-quote-input"},n)})}),(0,s.jsx)(f.l.Item,{className:nl,name:i.name,labelClassName:"!font-medium",label:(0,g.t)([ns,"image_and_name"]),translationRoot:ns,hidePlaceholder:!0,hideBorder:!0,fullWidth:!1,hideDescription:!0,rules:{validate:y},children:(0,s.jsx)(f.l.Input,{prefix:(0,s.jsx)(na,{signedIdField:i.avatar_image,urlField:i.avatar_image_url,testimonialName:p}),prefixWrapperClassName:"px-3","data-testid":"testimonial-name-input"},n)}),(0,s.jsx)(f.l.Item,{className:nl,name:i.headline,labelClassName:"!font-medium",label:(0,g.t)([ns,"headline"]),translationRoot:ns,hidePlaceholder:!0,hideBorder:!0,fullWidth:!1,hideDescription:!0,rules:{validate:y},children:(0,s.jsx)(f.l.Input,{"data-testid":"testimonial-headline-input"},n)}),(0,s.jsx)(f.l.Item,{className:nl,labelClassName:"!font-medium",label:(0,g.t)([ns,"display_style"]),translationRoot:ns,hideBorder:!0,fullWidth:!1,hideDescription:!0,hidePlaceholder:!0,children:(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-3",children:[(0,s.jsx)(f.l.SelectNative,{name:i.display_style_type,options:[{label:(0,g.t)([ns,"display_style_options.stars"]),value:tB.y_.STARS},{label:(0,g.t)([ns,"display_style_options.quotation_mark"]),value:tB.y_.QUOTATION_MARK}],disabled:r,"data-testid":"testimonial-display-style-select"},n),(0,s.jsx)("div",{children:(0,s.jsx)(f.l.ColorPickerV2,{name:i.display_style_color},n)})]})})]})},nu=function(){var e=(0,v.Gc)(),t=e.watch,r=e.getValues,n=tZ().testimonialPropertiesForm||{fields:[],append:function(){},remove:function(){}},i=n.fields,o=n.append,a=n.remove,l=!!t("paywall_customization_attributes.testimonial_properties.enabled"),c=i.length>=10,u=i.length<=1;return(0,s.jsxs)(t$,{titleLocale:(0,g.t)([tB.po,"builder.testimonials.show_testimonials"]),toggleName:"paywall_customization_attributes.testimonial_properties.enabled",toggleDataTestId:"paywall-customization-testimonial-toggle",containerDataTestId:"paywall-customization-testimonial-container",children:[(0,s.jsx)(tX,{isEnabled:l,children:i.map(function(e,t){var n="paywall_customization_attributes.testimonial_properties.testimonials.".concat(t);return(0,s.jsx)(r4,{index:t,fields:i,hasReachedLimit:c,hasReachedMinimum:u,onDuplicateClick:function(){return o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r(n)))},onRemoveClick:function(){return a(t)},dataTestId:"testimonial-form-item-group",children:(0,s.jsx)(nc,{keyFormId:e.id,name:n,disabled:!l})},e.id)})}),(0,s.jsx)(r5,{label:(0,g.t)([tB.po,"builder.testimonials.add_item"]),onClick:function(){return o(tY.hZ)},disabled:c||!l,dataTestId:"add-testimonial-button"})]})},nd=r(784047),nf="paywall_customization_attributes.reduced_price_properties.prices",nm=function(e){var t,r=e.name,n=e.index,i=e.transformValue,o=[nf,n,r].join("."),a=[nf,n,"original_".concat(r)].join("."),c=(0,v.Gc)(),u=c.watch,d=c.setError,m=c.clearErrors,p=c.getFieldState,b=u(o),h=u(a),y=p(o);return(0,l.useEffect)(function(){(0,nd.O)(b)<(0,nd.O)(h)?d(o,{type:"manual",message:(0,g.t)([tB.po,"builder.reduced_prices.fields.errors.before_price_higher_than_current_price"])}):m(o)},[b,h,o,d,m]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.l.Input,{name:o,wrapperClassName:(0,O.A)("col-span-4",{"ring-red-500":null==y?void 0:y.error}),transformValue:i,"data-testid":"reduced-price-original-amount-input"}),(0,s.jsx)(eU.JO,{type:"24-arrow-right"}),(0,s.jsx)(f.l.Input,{name:a,wrapperClassName:"col-span-4",disabled:!0,transformValue:i}),(null==y?void 0:y.error)&&(0,s.jsx)("span",{className:"col-span-9",children:(0,s.jsx)(es.Z.BodySm,{color:"text-feedback-error",children:null==y||null==(t=y.error)?void 0:t.message})})]})},np="paywall_customization_attributes.reduced_price_properties.prices",nb=function(e){var t=e.index,r=e.reducedPrice,n=(0,v.Gc)().watch,i=n("stripe_prices_attributes"),o=n([np,t,"enabled"].join(".")),a=(0,l.useCallback)(function(){return i.find(function(e){return[e.id,e.tmp_id].includes(r.price_id)})},[i,null==r?void 0:r.price_id]),c=rN().currency,u=a(),d=(0,rC.Bj)(c);return u?(0,s.jsxs)("div",{className:"border-primary flex flex-col gap-y-3 border-b px-6 py-5","data-testid":"reduced-price-form-group",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"medium",children:(0,g.t)([tB.po,"builder.reduced_prices.fields.price_index"],{row_number:t+1})}),(0,s.jsx)(es.Z.BodySm,{color:"text-secondary",children:(0,s.jsx)(rE,{row:{original:u},options:{shouldShowCurrency:!1}})})]}),(0,s.jsx)(f.l.ToggleSwitch,{name:[np,t,"enabled"].join("."),variant:"small",shouldUseCheckmark:!1,dataTestId:"reduced-price-toggle"})]}),o&&(0,s.jsxs)("div",{className:"grid grid-cols-9 gap-x-3 gap-y-2",children:[(0,s.jsx)("span",{className:"col-span-4",children:(0,s.jsx)(es.Z.LabelXs,{textTransform:"uppercase",color:"text-tertiary",weight:"medium",children:(0,g.t)([tB.po,"builder.reduced_prices.fields.before_price"])})}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{className:"col-span-4",children:(0,s.jsx)(es.Z.LabelXs,{textTransform:"uppercase",color:"text-tertiary",weight:"medium",children:(0,g.t)([tB.po,"builder.reduced_prices.fields.your_price"])})}),(u.upfront_payment_amount||0)>0&&(0,s.jsx)(nm,{name:"upfront_amount",index:t,transformValue:d}),(0,s.jsx)(nm,{name:"amount",index:t,transformValue:d})]})]}):null},nh=function(){var e,t=tZ().reducedPricePropertiesForm,r=(0,v.Gc)(),n=r.watch,i=r.setValue,o=Number((0,r.getValues)("currency_id")),a=(0,A.K)(),c=((null==a?void 0:a.data)||[]).find(function(e){return e.id===o}),u=n("stripe_prices_attributes");return((0,l.useEffect)(function(){c&&i("paywall_customization_attributes.reduced_price_properties.prices",(0,tY.Ll)(u,(null==t?void 0:t.fields)||[],c))},[]),c)?(0,s.jsx)(rk,{currency:c,children:(0,s.jsx)("div",{className:"flex flex-col pb-[12rem]",children:null==t||null==(e=t.fields)?void 0:e.map(function(e,t){return(0,s.jsx)(nb,{reducedPrice:e,index:t},e.id)})})}):null},ny=function(){return(0,s.jsx)(t$,{containerDataTestId:"paywall-customization-reduced-prices-container",containerClassName:"pt-0",descriptionLocale:(0,g.t)([tB.po,"builder.reduced_prices.description"]),useHooks:tK,children:(0,s.jsx)(tX,{"data-testid":"reduced-prices-properties-form-group",className:"space-y-0 divide-y-0",isEnabled:!0,children:(0,s.jsx)(nh,{})})})};function nv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ng(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n_=function(){var e,t,r=tZ(),n=r.goBack,i=r.history,o=r.currentSidebar,a=(e=(ng(t={},tB.rl.DEFAULT,[r_,(0,g.t)([tB.po,"builder.default.title"])]),ng(t,tB.rl.TESTIMONIALS,[nu,(0,g.t)([tB.po,"builder.testimonials.title"])]),ng(t,tB.rl.BADGES,[r7,(0,g.t)([tB.po,"builder.badges.title"])]),ng(t,tB.rl.BENEFITS,[nn,(0,g.t)([tB.po,"builder.benefits.title"])]),ng(t,tB.rl.COUNTDOWN,[rm,(0,g.t)([tB.po,"builder.countdown.title"])]),ng(t,tB.rl.PRICE_CALLOUTS,[rF,(0,g.t)([tB.po,"builder.price_callouts.title"])]),ng(t,tB.rl.REDUCED_PRICES,[ny,(0,g.t)([tB.po,"builder.reduced_prices.title"])]),t)[o]||[l.Fragment,""],function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return nv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nv(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1];return(0,s.jsxs)(tq,{className:"flex w-[328px] flex-col",children:[(0,s.jsxs)(tH,{className:"gap-x-3.5",children:[i.length>1&&(0,s.jsx)(eO.z,{onClick:n,variant:"circle-text",className:"text-dark",children:(0,s.jsx)(eU.JO,{type:"24-arrow-left"})}),(0,s.jsx)(es.Z.LabelMd,{weight:"semibold",children:u})]}),(0,s.jsx)(c,{})]})},nx=r(215918),nj=r(197040),nw=r(128311),nO=function(e){var t=e.children;return(0,s.jsx)(tO.fD.Provider,{theme:nx.D.defaultTheme,block:nw.d,blockMapping:nj.V,canvasSize:"desktop",children:(0,s.jsx)(tO.fD.Shell,{children:t})})},nS=function(){return(0,s.jsx)(tG,{children:(0,s.jsx)(S,{variants:"full-width",className:"size-full",children:(0,s.jsxs)(nO,{children:[(0,s.jsx)(tq,{className:"flex w-[328px] flex-col gap-y-5",children:(0,s.jsx)(n_,{})}),(0,s.jsx)(tR,{})]})})})},nk=r(766560),nN=r.n(nk),nP=function(e){return nN()(null!=e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}).split("?coupon_code=")[0]},nC=function(e){return nN()(null!=e?e:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!1}).split("?coupon_code=")[1]},nA=function(e,t){return!t.checkout_path&&nC(e)||""};function nI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nT(e,t){if(e){if("string"==typeof e)return nI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nI(e,t)}}var nE=function(){var e,t=(0,v.Gc)(),r=t.formState,n=t.control,i=t.setValue,o=t.getValues,a=t.watch,c=(0,v.qo)({control:n,name:"checkout_path"}),u=a("id"),d=(0,tC.pI)({paywallId:u||"",enabled:!0}).paywallCouponsListQuery.data,m=(e=(0,l.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||nT(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=nA(c,r.dirtyFields),y=a("auto_apply_coupon");return(0,l.useEffect)(function(){d&&(b(d.map(function(e){return{label:e.code,value:e.code}})),h&&!r.dirtyFields.coupon_selector&&i("coupon_selector",h))},[d,h,r.dirtyFields.coupon_selector,i]),(0,s.jsxs)("div",{className:"flex flex-col gap-y-2.5",children:[(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",labelClassName:"!font-normal",name:"auto_apply_coupon",translationRoot:"settings.paywalls.modal.tabs.details",fullWidth:!0,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_tooltip"),hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{"data-testid":"auto_apply_coupon",name:"auto_apply_coupon",variant:"small",onToggleChange:function(e){e||(i("coupon_selector",""),i("checkout_path",nP(c)))}})}),y&&(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,name:"coupon_selector",translationRoot:"settings.paywalls.modal.tabs.details",children:(0,s.jsx)(f.l.SelectNative,{name:"coupon_selector",options:[{label:(0,g.t)("settings.paywalls.modal.tabs.details.auto_apply_coupon_placeholder"),value:""}].concat(function(e){if(Array.isArray(e))return nI(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||nT(p)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),value:o("coupon_selector")})})]})},nL=r(936877),nD=r(846051),nM=function(){var e=(0,v.Gc)(),t=e.control,r=e.getValues,n=e.setValue,i=e.setFocus,o=e.formState,a=(0,v.qo)({control:t,name:"display_name"}),s=(0,v.qo)({control:t,name:"coupon_selector"}),c=(0,v.qo)({control:t,name:"checkout_path"});return(0,l.useEffect)(function(){n("checkout_path",nN()(null!=c?c:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}))},[n,c]),(0,l.useEffect)(function(){(""===c||o.dirtyFields.display_name&&!o.dirtyFields.checkout_path)&&n("checkout_path",a)},[o.dirtyFields.checkout_path,o.dirtyFields.display_name,n,c,a]),(0,l.useEffect)(function(){var e=nP(c),t=r("coupon_selector"),i=nA(c,o.dirtyFields),a=t?"?coupon_code=".concat(encodeURIComponent(t)):i?"?coupon_code=".concat(encodeURIComponent(i)):"",s=!!(i&&!t);n("checkout_path","".concat(e).concat(a),{shouldDirty:s})},[o.dirtyFields.checkout_path,r,n,s,c]),(0,l.useEffect)(function(){c&&!c.includes("coupon_code=")&&n("coupon_selector","")},[n,c]),{copyWithPrefix:function(){(0,nD.p0)(r("checkout_path"),"#paywalls-list"),i("checkout_path",{shouldSelect:!0})}}},nR=function(e){var t=e.requiresCurrency,r=e.canChangeCurrency,n=nM().copyWithPrefix;return(0,s.jsxs)(S,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.details.title")}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"display_name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.details.display_name_tooltip"),hideDescription:!0,fullWidth:!1,rules:{required:(0,g.t)("settings.paywalls.modal.tabs.details.alerts.display_name_is_required"),maxLength:255},hidePlaceholder:!0,children:(0,s.jsx)(f.l.Input,{})}),(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.details.name_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:255},children:(0,s.jsx)(f.l.Input,{})})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"subtitle",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.details.subtitle_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:70},children:(0,s.jsx)(f.l.Input,{maxLength:"70"})}),t&&(0,s.jsx)(nL.H,{formItemClassName:"!mt-0 !py-0",formItemName:"currency_id",formItemTranslationRoot:"settings.paywalls.modal.tabs.details",formItemRules:{required:(0,g.t)("settings.paywalls.modal.tabs.details.alerts.currency_is_required")},formItemTooltipText:(0,g.t)("settings.paywalls.modal.tabs.details.currency_id_tooltip"),disabled:!r})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",labelWrapperClassName:"inline-flex justify-between",name:"checkout_path",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:(0,g.t)("settings.paywalls.modal.tabs.details.alerts.checkout_path_is_required"),maxLength:255},description:(0,s.jsx)("button",{type:"button",onClick:n,className:"text-lightest hover:text-default",children:(0,g.t)("copy_link")}),variant:"checkout-path",children:(0,s.jsx)(f.l.Input,{prefix:(0,s.jsx)("p",{className:"p-3",children:(0,nD.Sr)()}),prefixWrapperClassName:"sm:whitespace-normal md:whitespace-nowrap"})}),(0,s.jsx)(nE,{})]}),(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"description",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hideDescription:!0,children:(0,s.jsx)(f.l.TextArea,{name:"description"})})]})},nB=function(e){var t=e.className,r=e.children;return(0,s.jsx)("div",{className:(0,O.A)("flex flex-col gap-y-6",t),children:r})},nz={invalid:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.alerts.redirect_url_is_invalid")},nF=function(e){var t=e.isDisabled;return t?null:(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"redirect_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,placeholder:window.location.origin,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),rules:{validate:function(e){return""===e||(0,rn.K)(e)||nz.invalid},maxLength:255},children:(0,s.jsx)(f.l.Input,{disabled:t})})},nU=function(){return(0,s.jsx)(f.l.Item,{name:"redirect_url_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",className:"!mt-0 !py-0",inline:!0,hideBorder:!0,hideDescription:!0,labelClassName:"text-xl tightest font-semibold",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),children:(0,s.jsx)(f.l.ToggleSwitch,{variant:"large",name:"redirect_url_enabled"})})},nZ=function(){return(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"thank_you_page_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.thank_you_page_enabled_tooltip"),hideDescription:!0,hideBorder:!0,labelClassName:"text-xl tightest font-semibold",children:(0,s.jsx)(f.l.ToggleSwitch,{name:"thank_you_page_enabled",variant:"large"})})},nG=r(805116);function nq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nV=function(){return"trix-editor-".concat(Math.floor(1e6*Math.random()))},nW=function(e){var t,r=e.isDisabled,n=(t=(0,l.useState)(nV()),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nq(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,v.Gc)().formState.isSubmitSuccessful;return(0,l.useEffect)(function(){o(nV())},[a]),(0,s.jsxs)("div",{className:(0,O.A)("trix-v2",{"pointer-events-none cursor-not-allowed":r}),children:[(0,s.jsx)("label",{children:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.body")}),(0,s.jsx)(nG.O,{id:"post_purchase_email_message_input",name:"post_purchase_email_message",is_private_space:!1,preventAccidentalLeave:!1,type:"textarea",featureFlags:{embeds:!1,videoUpload:!1,fileUploadLink:!1}})]},"".concat(i))},nH=function(e){var t=e.isDisabled;return(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.button_label",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,children:(0,s.jsx)(f.l.Input,{disabled:t})})},nQ={invalid:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.alerts.custom_button_url_is_invalid")},nK=function(e){var t=e.isDisabled;return(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.button_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,rules:{validate:function(e){return""===e||(0,rn.K)(e)||nQ.invalid}},children:(0,s.jsx)(f.l.Input,{disabled:t})})},nJ=function(){return(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.post_purchase_email_enabled_tooltip"),hideDescription:!0,hideBorder:!0,labelClassName:"text-xl tightest font-semibold",children:(0,s.jsx)(f.l.ToggleSwitch,{variant:"large",name:"post_purchase_email_enabled"})})},n$=function(e){var t=e.isDisabled;return(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",name:"post_purchase_email_meta.subject",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,s.jsx)(f.l.Input,{disabled:t})})},nX=function(e){var t=e.setActiveTab;return e.hide?null:(0,s.jsxs)("div",{className:"bg-tertiary flex items-start rounded-md p-4",children:[(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(eU.JO,{type:"20-lightning",size:20})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.title")}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(es.Z.BodySm,{color:"text-light",children:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.description")})}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(eO.z,{small:!0,variant:"secondary",onClick:function(){t(p.eA.WORKFLOWS_TAB)},children:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.workflows_banner.button")})})]})]})};function nY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var n0=function(e){var t,r=e.shouldDisplayWorkflowsTab,n=e.setActiveTab,i=(0,u.wh)().currentCommunitySettings,o=(0,v.Gc)(),a=o.watch,c=o.setValue,d=(t=a(["post_purchase_email_enabled","redirect_url_enabled"]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nY(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1],p=r&&(null==i?void 0:i.upgrade_flows_for_workflows_paywalls_enabled);return(0,l.useEffect)(function(){m||c("redirect_url","")},[m]),(0,s.jsxs)(S,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.post_purchase.title")}),(0,s.jsxs)(nB,{children:[(0,s.jsx)(nX,{setActiveTab:n,hide:!p}),(0,s.jsx)(nZ,{}),(0,s.jsxs)(nB,{className:"gap-y-2",children:[(0,s.jsx)(nU,{}),(0,s.jsx)(nF,{isDisabled:!m})]}),(0,s.jsx)(nJ,{})]}),(0,s.jsxs)(nB,{className:(0,O.A)({"opacity-50":!f}),children:[(0,s.jsx)(n$,{isDisabled:!f}),(0,s.jsx)(nW,{isDisabled:!f}),(0,s.jsx)(nH,{isDisabled:!f}),(0,s.jsx)(nK,{isDisabled:!f})]})]})},n1=r(355158),n2=r(411944);function n3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function n5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function n4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n3(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n7=(0,l.createContext)({currency:{id:1,code:"usd",direction:tA.RV.ltr,smallest_unit:tA.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},addPrice:b.noop,removePrice:b.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:b.noop,hideAddPriceModal:b.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1},billingFrequencyOptions:function(){return[]},disableAddPriceButton:function(){return!1}});n7.displayName="MobilePricingTabContext";var n9=function(e){var t,r=e.currency,n=e.children,i=(0,u.wh)().currentCommunitySettings,o=null==i||null==(t=i.price_build_options)?void 0:t.mobile,a=(0,v.Gc)(),c=a.setValue,d=a.watch,f=(0,l.useCallback)(function(){return d("mobile_price_packages_attributes")},[d]),m=(0,l.useCallback)(function(){return f().filter(function(e){return!e._destroy})},[f]),p=m().length>0,b=(0,l.useCallback)(function(){return!!m().find(function(e){return(0,tI.ZN)(e.price_properties)})},[m]),h=(0,l.useCallback)(function(){return!!m().find(function(e){return(0,tI.T)(e.price_properties)})},[m]),y=(0,l.useCallback)(function(){var e=m();return(0,tI.fe)(e).length>0},[m]),g=(0,v.Dq)({name:"mobile_price_packages_attributes",rules:{minLength:1}}),_=g.append,x=g.update,j=g.remove,w=(0,l.useCallback)(function(){return o?Object.keys(o).filter(function(e){return e!==rx.E4.installments}).filter(function(e){return e!==rx.E4.onetime||!b()&&e===rx.E4.onetime}).map(function(e){return{value:e,label:o[e].name}}):[]},[o,b]),O=(0,l.useCallback)(function(){return o?Object.entries(o.subscription.frequencies).filter(function(e){var t=n4(e,2),r=(t[0],t[1]);return!m().find(function(e){return e.price_properties.interval===r.interval&&e.price_properties.interval_count===r.interval_count})}).map(function(e){var t=n4(e,2);return{value:t[0],label:t[1].as_adjective}}):[]},[o,d,b()]),S=(0,l.useCallback)(function(){return w()[0]},[w]),k=(0,l.useCallback)(function(e){_(n5(n6({},e),{tmp_id:"tmp_".concat(Date.now())}))},[r,_]),N=(0,l.useCallback)(function(e){var t=f(),r=t.findIndex(function(t){return e.id?t.id===e.id:t.tmp_id===e.tmp_id});if(r>-1){var n=t[r];n.id?x(r,n5(n6({},n),{_destroy:!0})):j(r)}},[f,x,j]),P=(0,l.useCallback)(function(){return!!d("isShowingAddPriceModal")},[d]),C=(0,l.useCallback)(function(){c("isShowingAddPriceModal",!0)},[c]),A=(0,l.useCallback)(function(){c("isShowingAddPriceModal",!1)},[c]),I=(0,l.useCallback)(function(){return 0===O().length&&!w().find(function(e){return e.value===rx.E4.onetime})},[O,w,rx.E4]);return(0,s.jsx)(n7.Provider,{value:{currency:r,priceBuildOptions:o||{},priceTypeOptions:w,defaultPriceTypeOption:S,getPrices:f,getActivePrices:m,hasRecurringPrices:h,addPrice:k,removePrice:N,isShowingAddPriceModal:P,showAddPriceModal:C,hideAddPriceModal:A,hasActivePrices:p,hasSubscriptionPrices:y,billingFrequencyOptions:O,disableAddPriceButton:I},children:n})},n8=function(){return(0,l.useContext)(n7)},ie=function(e){var t=e.name,r=e.labelKey,n=e.required,i=void 0!==n&&n,o=e.options,a=e.tooltipText,l=n8().priceTypeOptions;return(0,s.jsx)("div",{className:"grow leading-5",children:(0,s.jsx)(e4.N,{name:t,rules:{required:i},label:(0,s.jsxs)(s.Fragment,{children:[(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),i&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:null!=o?o:l(),tooltipText:a})})},it=r(318943),ir=function(e){var t=e.children;return(0,s.jsxs)(it.v,{className:"flex flex-row gap-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)(eU.JO,{type:"information-outline",size:24})}),(0,s.jsx)(es.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},ii=function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0&&!(0,b.isEmpty)(t("billing_frequency"))},io=function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0&&!(0,b.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=2},ia=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&!r&&!n},stateValidator:io,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,rC.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return["installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:o-1,installment_amount:(0,rA.I)(r,a),total_amount:(0,rA.I)(r,i)}]}},{matcher:function(e){return e.priceType===rx.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return["onetime",{total_amount:(0,rA.I)(t,(0,rC.LG)(r("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&!r&&!n},stateValidator:ii,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&!r&&n},stateValidator:io,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,rC.LG)(i("amount")),a=parseInt(i("installments_count")),s=Math.round(o/a);return["trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,rA.I)(r,s),total_amount:(0,rA.I)(r,o),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&!r&&n},stateValidator:ii,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0}),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.installments&&r&&n&&!i},stateValidator:io,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,rC.LG)(i("amount")),a=(0,rC.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["trial_then_upfront_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,rA.I)(r,l),total_amount:(0,rA.I)(r,o),upfront_payment_amount:(0,rA.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.subscription&&r&&n&&!i},stateValidator:ii,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_upfront_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount"))),upfront_payment_amount:(0,rA.I)(r,(0,rC.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&r&&!n},stateValidator:io,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,rC.LG)(n("amount")),o=(0,rC.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a);return["upfront_then_installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,rA.I)(r,s),total_amount:(0,rA.I)(r,i),upfront_payment_amount:(0,rA.I)(r,o)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&r&&!n},stateValidator:ii,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["upfront_then_subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(n("amount"))),upfront_payment_amount:(0,rA.I)(r,(0,rC.LG)(n("upfront_payment_amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.installments&&r&&n&&i},stateValidator:io,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,rC.LG)(i("amount")),a=(0,rC.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),l=Math.round((o-a)/s);return["upfront_then_trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,rA.I)(r,l),total_amount:(0,rA.I)(r,o),upfront_payment_amount:(0,rA.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.subscription&&r&&n&&i},stateValidator:ii,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["upfront_then_trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount"))),upfront_payment_amount:(0,rA.I)(r,(0,rC.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}}];function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var il=function(){var e,t,r,n=n8(),i=n.currency,o=n.priceBuildOptions,a=(0,v.Gc)().watch,l=!!a("enable_trial"),c=a("trial_type"),u=null!=(r=null==(t=o.subscription.trial_options[c])?void 0:t.trial_days)?r:0,d=a("price_type"),f=o[d],m=!!a("upfront_payment_enabled"),p=!!a("trial_requires_upfront_payment"),b=ia.find(function(e){return(0,e.matcher)({priceType:d,hasUpfrontPayment:m,hasTrialPeriod:l,isUpfrontPaymentRequiredForTrial:p})});if(!b||!(0,b.stateValidator)({watch:a}))return null;var h=(e=(0,b.messagePropsResolver)({buildOptions:f,currency:i,trialPeriodDays:u,watch:a}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return is(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return is(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],_=h[1];return(0,s.jsx)(ir,{children:(0,g.t)(["settings.paywalls.modal.tabs.pricing.add_price_modal.notice",y],_)})},ic=r(150788),iu=r(619803),id=r.n(iu),im=function(e){var t,r,n=e.name,i=e.labelKey,o=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","labelKey","children"]),l=(0,v.Gc)().formState.errors[n];return(0,s.jsx)(f.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={name:n,className:id()({"border-red-500":l},"!m-0 grow !p-0"),label:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(i||n)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ip=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=n8().currency,o=(0,rC.Bj)(i,{amountInCents:!0}),a=(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,rA.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,rA.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(im,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,rC.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,s.jsx)(ic.a,{currency:i})})},ib=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=e.tooltipText;return(0,s.jsx)(im,{name:t,labelKey:r,placeholder:void 0===n?"":n,tooltipText:i,rules:{required:!0},children:(0,s.jsx)(f.l.Input,{})})},ih="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text",iy=function(){var e=(0,n8().billingFrequencyOptions)();return(0,s.jsx)(ie,{name:"billing_frequency",options:e,required:!0,tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text.billing_frequency")})},iv="settings.paywalls.modal.tabs.pricing.add_price_modal",ig=function(){var e=(0,v.Gc)(),t=e.watch,r=e.setValue,n=n8().priceBuildOptions,i=t("enable_trial"),o=t("trial_type");(0,l.useEffect)(function(){i||(r("trial_type",null),r("trial_days",0))},[i,o]);var a=Object.keys(n.subscription.trial_options).map(function(e){return{label:(0,g.t)([iv,"trial_options",e]),value:e}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",children:(0,s.jsx)(f.l.ToggleSwitch,{name:"enable_trial",variant:"small",value:"false"})}),i&&(0,s.jsx)(e4.N,{name:"trial_type",rules:{required:!0},label:(0,s.jsxs)(s.Fragment,{children:[(0,g.t)([iv,"field_labels.trial_options"]),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:a})]})},i_="settings.paywalls.modal.tabs.pricing.add_price_modal.tooltip_text";function ix(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ij=(ix(i={},rx.E4.onetime,function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)(ib,{name:"in_app_apple_processor_id",tooltipText:(0,g.t)([ih,"in_app_apple_processor_id"])}),(0,s.jsx)(ib,{name:"in_app_google_processor_id",tooltipText:(0,g.t)([ih,"in_app_apple_processor_id"])})]}),(0,s.jsx)(ip,{name:"amount",labelKey:"price"})]})}),ix(i,rx.E4.subscription,function(){return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)(ib,{name:"subscription_apple_processor_id",tooltipText:(0,g.t)([i_,"subscription_apple_processor_id"])}),(0,s.jsx)(ib,{name:"subscription_google_processor_id",tooltipText:(0,g.t)([i_,"subscription_google_processor_id"])})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(iy,{})}),(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(ip,{name:"amount",labelKey:"recurring_price"})})]}),(0,s.jsx)(ig,{})]})}),i),iw=function(){var e=ij[(0,(0,v.Gc)().watch)("price_type")];return e?(0,s.jsx)(e,{}):null},iO=function(){var e=n8(),t=e.priceBuildOptions,r=e.addPrice,n=e.hideAddPriceModal,i=e.currency,o=(0,v.Gc)().handleSubmit;return{onConfirm:(0,l.useCallback)(function(){o(function(e){var o,a,s=e.price_type,l=(0,rC.LG)(e.amount);if(e.billing_frequency){var c=t[e.price_type].frequencies[e.billing_frequency];c&&(o=c.interval,a=c.interval_count)}var u=null==e?void 0:e.enable_trial,d=null==e?void 0:e.trial_type,f=(null==e?void 0:e.in_app_google_processor_id)||(null==e?void 0:e.subscription_google_processor_id),m=(null==e?void 0:e.in_app_apple_processor_id)||(null==e?void 0:e.subscription_apple_processor_id),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({currency_id:i.id,price_type:s,amount:l,interval:o,interval_count:a,installments_count:0,upfront_payment_amount:0,trial_requires_upfront_payment:!1,platform_type:e,processor_id:r},u?t.subscription.trial_options[d]:{})};r({status:"pending",price_properties:p(),prices_attributes:[p("google",f),p("apple",m)]}),n()})().catch(function(e){return console.error("Error adding price",e)})},[t,r,n,o]),hideAddPriceModal:n}},iS=function(){var e=iO(),t=e.onConfirm,r=e.hideAddPriceModal;return(0,s.jsx)(eu.c,{isOpen:!0,title:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title_mobile"),confirmText:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:t,onClose:r,onCancel:r,size:"lg",dataTestId:"save-paywall-price-mobile",confirmVariant:"circle",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(ie,{name:"price_type",labelKey:"payment_type"}),(0,s.jsx)(iw,{}),(0,s.jsx)(il,{})]})})},ik=function(){var e=(0,n8().defaultPriceTypeOption)();return(0,s.jsx)(f.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:b.noop,children:(0,s.jsx)(iS,{})})},iN=r(134062),iP=function(e){var t=e.variant,r=n8(),n=r.showAddPriceModal,i=(0,r.disableAddPriceButton)();return(0,s.jsx)(eO.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:i,large:!0,children:(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",color:"primary"===t?"text-secondary":"text-primary",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},iC=r(335149),iA="settings.paywalls.modal_remove_price_confirmation",iI=c.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,c.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(eu.c,{isOpen:n.visible,title:(0,g.t)([iA,"title"]),onClose:i,cancelText:(0,g.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,g.t)(["confirm"]),children:(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([iA,"description"],{count:r.length,space_names:r.map(function(e){return e.name}).join(", ")})})})}),iT=function(e){var t=e.row.original,r=(0,c.dd)(iI).show,n=(0,u.nT)().records,i=(0,ej.UV)().contentPortalElement,o=n8(),a=o.getPrices,l=o.removePrice,d=1===a().length;if(d)return null;var f=function(e){var r,n,i,o=null==(r=e.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==o||null==(i=o.data)||null==(n=i.paywalls)?void 0:n.find(function(e){var r,n;return(null==t?void 0:t.id)&&((null==e||null==(r=e.web_paywall_price)?void 0:r.id)===(null==t?void 0:t.id)||(null==e||null==(n=e.mobile_paywall_price)?void 0:n.id)===(null==t?void 0:t.id))}))};return(0,s.jsx)(iN.w.Actions,{contentPortalElement:null!=i?i:document.body,children:!d&&(0,s.jsx)(iC.g,{hasDanger:!0,onClick:function(){var e=n.filter(function(e){return f(e)});e.length>0?r({action:function(){return l(t)},spaces:e}):l(t)},linkType:"button",children:g.ZP.t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")})},iE=function(e){var t,r=e.row.original,n=r.price_properties,i=r.price_properties,o=i.price_type,a=i.interval_count,l=i.interval,c=n8().priceBuildOptions,u=c[o];if((0,tI.QT)(n)){var d=c[o],f=(0,tI.X8)(d,l,a);t=(null==f?void 0:f.as_adjective)||d.name}else t=u.name;return(0,s.jsx)("div",{className:"flex flex-row items-center gap-2",children:t})};function iL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iD=(iL(o={},rx.E4.onetime,function(e){var t=e.row.original.price_properties,r=t.price_type,n=t.amount,i=n8().currency;if(r!==rx.E4.onetime)return null;var o=(0,rC.LG)(n),a=(0,rA.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,s.jsx)(s.Fragment,{children:a})}),iL(o,rx.E4.subscription,function(e){var t,r=e.row.original.price_properties,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,l=r.upfront_payment_amount,c=r.trial_days,u=r.trial_requires_upfront_payment,d=n8(),f=d.currency,m=d.priceBuildOptions;if(n!==rx.E4.subscription)return null;var p=!!c,b=m.subscription,h=(0,tI.X8)(b,o,i),y=(0,tI.TM)(f,l),v=(0,rC.LG)(a),_=(0,rA.I)(f,v,{amountInCents:!0,includeCurrencyCode:!0}),x=[];p&&!u&&x.push("trial"),y.variant===tI.f.upfrontPayment&&x.push("upfront"),p&&u&&x.push("trial"),x.push("value");var j=x.join("_then_");return(0,s.jsx)(s.Fragment,{children:(0,g.t)(["settings.paywall_prices",n,"short_description",j],{upfront:y.amountFormatted,interval:null==h||null==(t=h.as_adverb)?void 0:t.toLowerCase(),amount:_,trial:c})})}),iL(o,rx.E4.installments,void 0),o),iM=function(e){var t=iD[e.row.original.price_properties.price_type];return t?(0,s.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){iL(e,t,r[t])})}return e}({},e)):null},iR=r(595342),iB="settings.paywalls.modal.tabs.pricing.mobile_price_packages.status",iz=function(e){var t,r=e.row.original.status,n={pending:{locale:[iB,"pending"],variant:"default"},active:{locale:[iB,"active"],variant:"success"},denied:{locale:[iB,"denied"],variant:"danger"},unknown:{locale:[iB,"unknown"],variant:"default"}},i=null!=(t=n[r])?t:n.unknown;return(0,s.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,s.jsx)(iR.O,{variant:i.variant,children:(0,g.t)(i.locale)})})};function iF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var iU=[{accessorKey:"paymentType",header:(0,g.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,s.jsx)(iE,iF({},e))}},{accessorKey:"pricing",header:(0,g.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,s.jsx)(iM,iF({},e))}},{accessorKey:"status",header:(0,s.jsx)(function(){return(0,s.jsxs)(s.Fragment,{children:[(0,g.t)("settings.paywalls.modal.tabs.pricing.table.columns.status"),(0,s.jsx)("span",{className:"ml-2 inline-flex cursor-pointer",children:(0,s.jsx)(t3.T,{content:(0,g.t)("settings.paywalls.modal.tabs.pricing.tooltip_text.status"),children:(0,s.jsx)(eU.JO,{type:"question-mark",className:"icon icon--xs"})})})]})},{}),cell:function(e){return(0,s.jsx)(iz,iF({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,s.jsx)(iT,iF({},e))}}],iZ=function(){var e=(0,n8().getActivePrices)();return(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("div",{className:"w-4/5 flex-none",children:[(0,s.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)("settings.paywalls.modal.tabs.pricing.mobile_description")})]}),(0,s.jsx)("div",{className:"w-1/5 flex-none text-right",children:(0,s.jsx)(iP,{variant:"secondary"})})]}),(0,s.jsx)(iN.w,{columns:iU,data:e,children:(0,s.jsxs)(iN.w.Table,{children:[(0,s.jsx)(iN.w.Header,{}),(0,s.jsx)(iN.w.Body,{})]})})]})},iG=function(e){var t=e.className;return(0,s.jsx)(f.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"mobile_paywall_resource_attributes.processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,g.t)("settings.paywalls.form.offering_label"),hideBorder:!0,tooltipText:(0,g.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","offering_processor_id"]),rules:{required:!0},children:(0,s.jsx)(f.l.Input,{})})},iq=function(e){var t=e.className,r=n8().hasRecurringPrices,n=(0,v.Gc)().setValue;return(0,l.useEffect)(function(){r()||n("apple_subscription_group_processor_id","")},[r]),(0,s.jsx)(f.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"apple_subscription_group_processor_id",hideDescription:!0,hidePlaceholder:!0,label:(0,g.t)("settings.paywalls.form.subscription_group_id_label"),hideBorder:!0,rules:{required:r()},children:(0,s.jsx)(f.l.Input,{disabled:!r()})})},iV=function(e){var t=e.className,r=n8().hasRecurringPrices,n=(0,v.Gc)().setValue;return(0,l.useEffect)(function(){r()||n("apple_subscription_group_name","")},[r]),(0,s.jsx)(f.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),name:"apple_subscription_group_name",hideDescription:!0,hidePlaceholder:!0,label:(0,g.t)("settings.paywalls.form.subscription_group_name_label"),tooltipText:(0,g.t)(["settings.paywalls.modal.tabs.pricing.tooltip_text","subscription_group_name"]),hideBorder:!0,rules:{required:r()},children:(0,s.jsx)(f.l.Input,{disabled:!r()})})},iW=function(){return(0,s.jsxs)(it.v,{className:"border-primary flex flex-col gap-y-4 border px-6 py-5",children:[(0,s.jsx)(es.Z.LabelLg,{weight:"bold",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,s.jsx)(iG,{}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-4",children:[(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(iV,{})}),(0,s.jsx)("div",{className:"basis-1/2",children:(0,s.jsx)(iq,{})})]})]})]})},iH="settings.paywalls.modal.tabs.pricing.mobile_tab.empty_state",iQ=function(){var e=n8(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=t();return(0,s.jsxs)(s.Fragment,{children:[i&&i.length?(0,s.jsxs)("div",{className:"mr-4 flex flex-col gap-y-8 pb-8",children:[(0,s.jsx)(iZ,{}),(0,s.jsx)(iW,{})]}):(0,s.jsx)("div",{className:"m-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20",children:(0,s.jsx)(e_.u,{header:(0,g.t)([iH,"title"]),description:(0,g.t)([iH,"description"]),onPrimaryClick:n,primaryLabel:(0,g.t)([iH,"cta_primary"]),onSecondaryClick:function(){window.open(E.Lo.plans.brandedApps,"_blank")},secondaryLabel:(0,g.t)([iH,"cta_secondary"])})}),r()&&(0,s.jsx)(ik,{})]})},iK=r(981097),iJ=r(990809),i$=r(891564),iX=function(e){var t,r,n=e.name,i=e.labelKey,o=e.children,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","labelKey","children"]),l=(0,v.Gc)().formState.errors[n];return(0,s.jsx)(f.l.Item,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={name:n,className:id()({"border-red-500":l},"!m-0 grow !p-0"),label:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(i||n)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},iY=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=rN().currency,o=(0,rC.Bj)(i,{amountInCents:!0}),a=(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,rA.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,rA.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(iX,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,rC.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,s.jsx)(ic.a,{currency:i})})},i0=function(e){var t=e.name,r=e.labelKey,n=e.options,i=e.required,o=void 0!==i&&i;return(0,s.jsx)("div",{className:"grow leading-5",children:(0,s.jsx)(e4.N,{name:t,rules:{required:o},label:(0,s.jsxs)(s.Fragment,{children:[(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),o&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),options:n})})};function i1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i2=function(){var e=Object.entries(rN().priceBuildOptions[(0,(0,v.Gc)().watch)("price_type")].frequencies).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return i1(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i1(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{value:t[0],label:t[1].as_adjective}});return(0,s.jsx)(i0,{name:"billing_frequency",options:e,required:!0})},i3=function(){var e=(0,v.Gc)(),t=e.formState.errors,r=e.watch,n=r("price_type"),i=r("amount"),o=(0,rC.LG)(i),a=rN().currency,l=(0,rC.Bj)(a,{amountInCents:!0}),c=(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,rA.I)(a,a.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,rA.I)(a,a.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})}),u=(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.upfront_payment_amount",{total:(0,rA.I)(a,o,{amountInCents:!0,includeCurrencyCode:!1})});return(0,s.jsx)(f.l.Item,{name:"upfront_payment_amount",className:id()({"border-red-500":t.upfront_payment_amount},"!m-0 !mt-2 grow !p-0"),errorClassName:"mt-1 text-red-500 text-sm",placeholder:l(0),hideBorder:!0,hideLabel:!0,hideDescription:!0,rules:{required:!0,validate:{bounds:function(e){var t=(0,rC.LG)(e);return isNaN(t)||t<a.min_charge_amount||t>a.max_charge_amount?c:n!==rx.E4.installments||!(t>o)||u}}},transformValue:l,children:(0,s.jsx)(ic.a,{currency:a})})},i6=function(){var e=(0,rN().getHasTrialPeriod)(),t=(0,v.Gc)(),r=t.watch,n=t.setValue,i=r("upfront_payment_enabled");return(0,l.useEffect)(function(){i||n("upfront_payment_amount","")},[i,n]),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(f.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"upfront_payment_enabled",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.upfront_payment_enabled_tooltip"),fullWidth:!0,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{name:"upfront_payment_enabled",variant:"small"})}),i&&(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(i3,{}),e&&(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_upfront_payment",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{name:"trial_requires_upfront_payment",variant:"small"})})]})]})};function i5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i4=(i5(a={},rx.E4.onetime,function(){return(0,s.jsx)(iY,{name:"amount",labelKey:"price"})}),i5(a,rx.E4.subscription,function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(i2,{}),(0,s.jsx)(iY,{name:"amount",labelKey:"recurring_price"})]}),(0,s.jsx)(i6,{})]})}),i5(a,rx.E4.installments,function(){var e=rN().priceBuildOptions.installments,t=(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.installments_count",{min:e.limits.installments_count.min,max:e.limits.installments_count.max});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(i2,{}),(0,s.jsx)(iX,{name:"installments_count",labelKey:"rebills",placeholder:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.placeholder"),rules:{valueAsNumber:!0,required:!0,validate:{bounds:function(r){var n=parseInt(r);return!isNaN(n)&&n>=e.limits.installments_count.min&&n<=e.limits.installments_count.max||t}}},children:(0,s.jsx)(f.l.Input,{variant:"text",type:"number"})})]}),(0,s.jsx)("div",{className:"flex flex-row gap-4",children:(0,s.jsx)(iY,{name:"amount",labelKey:"total_price"})}),(0,s.jsx)(i6,{})]})}),a),i7=function(){var e=i4[(0,(0,v.Gc)().watch)("price_type")];return e?(0,s.jsx)(e,{}):null},i9=function(e){var t=e.children;return(0,s.jsxs)(it.v,{className:"flex flex-row gap-3",children:[(0,s.jsx)("div",{className:"text-default",children:(0,s.jsx)(eU.JO,{type:"information-outline",size:24})}),(0,s.jsx)(es.Z.LabelSm,{weight:"regular",as:"div",color:"text-default",children:t})]})},i8="settings.paywalls.modal.tabs.pricing.add_price_modal.notice_v2",oe=function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0&&!(0,b.isEmpty)(t("billing_frequency"))},ot=function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0&&!(0,b.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=1},or=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&!r&&!n},stateValidator:ot,messagePropsResolver:function(e){var t=e.currency,r=e.watch,n=(0,rC.LG)(r("amount")),i=parseInt(r("installments_count")),o=Math.round(n/i),a=r("billing_frequency"),s=(0,rA.I)(t,o),l=(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:s}),c=(0,g.t)([i8,"phrases","total_amount"],{amount:(0,rA.I)(t,n)});return 1===i?[["onetime"],{member_charged_immediately_phrase:l}]:[["installments",a],{count:i-1,member_charged_immediately_phrase:l,installment_amount:s,total_amount_phrase:c}]}},{matcher:function(e){return e.priceType===rx.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,rC.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return[["onetime"],{member_charged_immediately_phrase:(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:(0,rA.I)(t,(0,rC.LG)(r("amount")))})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&!r&&!n},stateValidator:oe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,rA.I)(r,(0,rC.LG)(n("amount")));return[["subscription"],{member_charged_immediately_phrase:(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:i}),recurring_amount:i,recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase()}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&!r&&n},stateValidator:ot,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,rC.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return[["trial_then_installments",n("billing_frequency")],{member_free_trial_phrase:(0,g.t)([i8,"phrases","member_free_trial"],{count:r}),count:o,installment_amount:(0,rA.I)(t,a),total_amount_phrase:(0,g.t)([i8,"phrases","total_amount"],{amount:(0,rA.I)(t,i)})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&!r&&n},stateValidator:oe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["trial_then_subscription"],{member_free_trial_phrase:(0,g.t)([i8,"phrases","member_free_trial"],{count:n}),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0})}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.installments&&r&&n&&!i},stateValidator:ot,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,rC.LG)(n("amount")),o=(0,rC.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a),l=n("billing_frequency"),c=(0,g.t)([i8,"phrases","member_free_trial"],{count:r}),u=(0,g.t)([i8,"phrases","then_upfront_amount"],{amount:(0,rA.I)(t,o)}),d=(0,g.t)([i8,"phrases","total_amount"],{amount:(0,rA.I)(t,i)});return[["trial_then_upfront_then_installments",l],{count:a,member_free_trial_phrase:c,then_upfront_amount_phrase:u,installment_amount:(0,rA.I)(t,s),total_amount_phrase:d}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.subscription&&r&&n&&!i},stateValidator:oe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["trial_then_upfront_then_subscription"],{member_free_trial_phrase:(0,g.t)([i8,"phrases","member_free_trial"],{count:n}),then_upfront_amount_phrase:(0,g.t)([i8,"phrases","then_upfront_amount"],{amount:(0,rA.I)(r,(0,rC.LG)(i("upfront_payment_amount")))}),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount"))),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase()}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.installments&&r&&!n},stateValidator:ot,messagePropsResolver:function(e){var t=e.currency,r=e.watch,n=(0,rC.LG)(r("amount")),i=(0,rC.LG)(r("upfront_payment_amount")),o=parseInt(r("installments_count")),a=Math.round((n-i)/o),s=r("billing_frequency"),l=(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:(0,rA.I)(t,i)}),c=(0,g.t)([i8,"phrases","total_amount"],{amount:(0,rA.I)(t,n)});return[["upfront_then_installments",s],{count:o,member_charged_immediately_phrase:l,installment_amount:(0,rA.I)(t,a),total_amount_phrase:c}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===rx.E4.subscription&&r&&!n},stateValidator:oe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return[["upfront_then_subscription"],{member_charged_immediately_phrase:(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:(0,rA.I)(r,(0,rC.LG)(n("upfront_payment_amount")))}),recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.installments&&r&&n&&i},stateValidator:ot,messagePropsResolver:function(e){var t=e.currency,r=e.trialPeriodDays,n=e.watch,i=(0,rC.LG)(n("amount")),o=(0,rC.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a),l=n("billing_frequency"),c=(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:(0,rA.I)(t,o)}),u=(0,g.t)([i8,"phrases","then_member_paid_trial"],{count:r}),d=(0,g.t)([i8,"phrases","total_amount"],{amount:(0,rA.I)(t,i)});return[["upfront_then_trial_then_installments",l],{count:a,member_charged_immediately_phrase:c,then_member_paid_trial_phrase:u,installment_amount:(0,rA.I)(t,s),total_amount_phrase:d}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===rx.E4.subscription&&r&&n&&i},stateValidator:oe,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return[["upfront_then_trial_then_subscription"],{member_charged_immediately_phrase:(0,g.t)([i8,"phrases","member_charged_immediately"],{amount:(0,rA.I)(r,(0,rC.LG)(i("upfront_payment_amount")))}),then_member_paid_trial_phrase:(0,g.t)([i8,"phrases","then_member_paid_trial"],{count:n}),recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,rA.I)(r,(0,rC.LG)(i("amount")))}]}}];function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oi=function(){var e,t=rN(),r=t.currency,n=t.priceBuildOptions,i=t.getHasTrialPeriod,o=(0,t.getTrialPeriodDays)(),a=i(),l=(0,v.Gc)().watch,c=l("price_type"),u=n[c],d=!!l("upfront_payment_enabled"),f=!!l("trial_requires_upfront_payment"),m=or.find(function(e){return(0,e.matcher)({priceType:c,hasUpfrontPayment:d,hasTrialPeriod:a,isUpfrontPaymentRequiredForTrial:f})});if(!m||!(0,m.stateValidator)({watch:l}))return null;var p=(e=(0,m.messagePropsResolver)({buildOptions:u,currency:r,trialPeriodDays:o,watch:l}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return on(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return on(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=p[0],h=p[1],y=[i8,"scenarios",b.join(".")];return(0,s.jsx)(i9,{children:(0,g.t)(y,h)})},oo=function(){var e=rN(),t=e.priceBuildOptions,r=e.priceTypeOptions,n=e.addPrice,i=e.hideAddPriceModal,o=(0,v.Gc)().handleSubmit,a=(0,l.useCallback)(function(){o(function(e){var r,o,a,s,l,c=e.price_type,u=(0,rC.LG)(e.amount);if(e.billing_frequency){var d=t[e.price_type].frequencies[e.billing_frequency];d&&(r=d.interval,o=d.interval_count)}e.installments_count&&(a=parseInt(e.installments_count)),e.upfront_payment_enabled&&(s=(0,rC.LG)(e.upfront_payment_amount),l=e.trial_requires_upfront_payment),n({price_type:c,amount:u,interval:r,interval_count:o,installments_count:a,upfront_payment_amount:s,trial_requires_upfront_payment:null!=l&&l}),i()})().catch(function(e){return console.error("Error adding price",e)})},[t,n,i,o]);return(0,s.jsx)(eu.c,{isOpen:!0,title:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title"),confirmText:(0,g.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:a,onClose:i,onCancel:i,size:"lg",dataTestId:"save-paywall-price",confirmVariant:"circle",children:(0,s.jsx)("div",{className:"min-h-[30rem]",children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)(i0,{name:"price_type",labelKey:"payment_type",options:r()}),(0,s.jsx)(i7,{}),(0,s.jsx)(oi,{})]})})})},oa=function(){var e=(0,rN().defaultPriceTypeOption)();return(0,s.jsx)(f.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:b.noop,children:(0,s.jsx)(oo,{})})},os=r(575159),ol=function(e){var t=e.variant,r=rN(),n=r.showAddPriceModal,i=(0,r.getActivePrices)().length>=os.vf;return(0,s.jsx)(eO.z,{type:"button",variant:t,onClick:n,className:"whitespace-nowrap",disabled:i,large:!0,children:(0,s.jsx)(es.Z.LabelSm,{weight:"semibold",color:"primary"===t?"text-secondary":"text-primary",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},oc="settings.paywalls.modal_remove_price_confirmation",ou=c.gk.create(function(e){var t=e.action,r=e.spaces,n=(0,c.dd)(),i=function(){n.hide(),n.remove()};return(0,s.jsx)(eu.c,{isOpen:n.visible,title:(0,g.t)([oc,"title"]),onClose:i,cancelText:(0,g.t)(["cancel"]),onConfirm:function(){t(),i()},confirmVariant:"primary",confirmText:(0,g.t)(["confirm"]),children:(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)([oc,"description"],{count:r.length,space_names:r.map(function(e){return e.name}).join(", ")})})})}),od=function(e){var t=e.row.original,r=(0,c.dd)(ou).show,n=(0,u.nT)().records,i=(0,ej.UV)().contentPortalElement,o=rN(),a=o.getPrices,l=o.markPriceAsPreferred,d=o.removePrice,f=1===a().length;if(f&&t.preferred)return null;var m=function(e){var r,n,i,o=null==(r=e.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});return!!(null==o||null==(i=o.data)||null==(n=i.paywalls)?void 0:n.find(function(e){var r,n;return(null==t?void 0:t.id)&&((null==e||null==(r=e.web_paywall_price)?void 0:r.id)===(null==t?void 0:t.id)||(null==e||null==(n=e.mobile_paywall_price)?void 0:n.id)===(null==t?void 0:t.id))}))};return(0,s.jsxs)(iN.w.Actions,{contentPortalElement:null!=i?i:document.body,children:[!t.preferred&&(0,s.jsx)(iC.g,{hasDanger:!1,onClick:function(){return l(t)},linkType:"button",children:g.ZP.t("settings.paywalls.modal.tabs.pricing.table.actions.preferred")},"preferred"),!f&&(0,s.jsx)(iC.g,{hasDanger:!0,onClick:function(){var e=n.filter(function(e){return m(e)});e.length>0?r({action:function(){return d(t)},spaces:e}):d(t)},linkType:"button",children:g.ZP.t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")]})},of=function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.preferred,l=rN().priceBuildOptions,c=l[n];if((0,tI.QT)(r)){var u=l[n],d=(0,tI.X8)(u,o,i);t=(null==d?void 0:d.as_adjective)||u.name}else t=c.name;return(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t,a&&(0,s.jsx)(eU.JO,{type:"16-check-circle",size:16})]})};function om(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var op=[{accessorKey:"paymentType",header:(0,g.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,s.jsx)(of,om({},e))}},{accessorKey:"pricing",header:(0,g.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,s.jsx)(rE,om({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,s.jsx)(od,om({},e))}}],ob=function(){var e=(0,rN().getActivePrices)();return(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-x-8",children:[(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(es.Z.LabelLg,{weight:"semibold",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,s.jsx)(es.Z.BodyMd,{color:"text-default",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.description")})]}),(0,s.jsx)("div",{className:"col-span-2 flex justify-end",children:(0,s.jsx)(ol,{variant:"secondary"})})]}),(0,s.jsx)(iN.w,{columns:op,data:e,children:(0,s.jsxs)(iN.w.Table,{children:[(0,s.jsx)(iN.w.Header,{}),(0,s.jsx)(iN.w.Body,{})]})})]})},oh=function(e){var t=e.tooltipText,r=e.isToggleDisabled;return(0,s.jsx)(f.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"can_be_repurchased",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(f.l.ToggleSwitch,{name:"can_be_repurchased",variant:"small",disabled:r})})},oy=function(){var e=rN(),t=e.hasRecurringPrices,r=!e.hasActivePrices||t();return(0,s.jsx)(oh,{tooltipText:r?"can_be_repurchased_tooltip_disabled":"can_be_repurchased_tooltip",isToggleDisabled:r})},ov=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.onChanging;return(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_cancelable",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(f.l.ToggleSwitch,{onToggleChange:n,name:"self_cancelable",variant:"small",disabled:r})})};function og(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o_=function(){var e,t=rN().hasSubscriptionPrices,r=!t(),n=(0,v.Gc)(),i=n.watch,o=n.setValue,a=!!i("id"),c=i("self_cancelable"),u=(e=(0,l.useState)(t()&&!c),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return og(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return og(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];(0,l.useEffect)(function(){r?o("self_cancelable",!1):a||d||o("self_cancelable",!0)},[r,o,d,a]);var m=r?"self_cancelable_tooltip_disabled":"self_cancelable_tooltip";return(0,s.jsx)(ov,{tooltipText:m,isToggleDisabled:r,onChanging:function(){f(!0)}})},ox=function(e){var t=(0,v.Gc)().control,r=(0,v.qo)({control:t,name:"id"}),n=(0,v.qo)({control:t,name:"access_groups_enabled"}),i=(0,v.Gc)().setValue,o=rN().hasSubscriptionPrices,a=(0,(0,ex.W)({}).useListPaywallGroups)({for_access_groups:n}).data,s=o(),c=(a||[]).filter(function(t){var r;return(null==(r=t.currency)?void 0:r.id)===e.id}),u=c.length>0&&r,d=s&&r,f=c.length>0?c[0].id:"",m=c.map(function(e){return{value:"".concat(e.id),label:e.name}}),p=!(0,v.qo)({name:"id"}),b=!!(0,v.qo)({control:t,name:"enable_subscription_group",defaultValue:!1}),h=(0,l.useRef)(b);return(0,l.useEffect)(function(){p&&s&&!h.current&&r&&i("enable_subscription_group",!0)},[h,s,p,i,r]),(0,l.useEffect)(function(){s||(i("enable_subscription_group",!1),i("paywall_group_id",f))},[f,s,i]),{canShowChooser:u,canEnableChooser:d,isSubscriptionGroupEnabled:b,paywallGroupSelectOptions:m}},oj=function(e){var t=e.isSelectDisabled,r=e.paywallGroupSelectOptions,n=e.className,i=(0,(0,v.Gc)().watch)("paywall_group_id");return(0,s.jsx)(f.l.Item,{className:(0,O.A)("!py-0",void 0===n?"":n,{"opacity-50":t}),labelClassName:"!font-normal",name:"paywall_group_id",hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,isDisabled:t,children:(0,s.jsx)(f.l.SelectNative,{prompt:(0,g.t)("settings.paywalls.modal.tabs.pricing.paywall_group_prompt"),value:i,name:"paywall_group_id",options:r,disabled:t,rules:{shouldUnregister:!0}})})},ow=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.enableSubscriptionGroup;return(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_subscription_group",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,s.jsx)(f.l.ToggleSwitch,{name:"enable_subscription_group",variant:"small",value:String(n),disabled:r})})},oO=function(e){var t=e.toggleField,r=e.fieldToggleable,n=e.hideToggleableField;return(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[!!t&&t,!!r&&!n&&(0,s.jsx)("div",{className:"flex flex-col gap-y-2 pl-11",children:r})]})},oS=function(){var e=rN().currency,t=(0,v.Gc)().watch,r=(0,v.Gc)().control,n=(0,v.qo)({control:r,name:"id"}),i=ox(e),o=i.canShowChooser,a=i.canEnableChooser,l=i.paywallGroupSelectOptions,c=i.isSubscriptionGroupEnabled,u=!o||!a,d="create_a_paywall_first";n&&(d=u?"paywall_group_tooltip_disabled":"paywall_group_tooltip");var f=t(U()),m=(f||[]).filter(function(e){return e.paywall_offered_id&&!e.destroy}),p=!!f&&m.length>0,b=(0,g.t)("settings.paywalls.modal.tabs.pricing.paywall_group_tooltip_disabled_by_upsell"),h=t("enable_subscription_group"),y=u||!c||p;return(0,s.jsx)(t3.T,{content:b,enabled:p,offset:[-200,0],placement:"top",arrow:!1,children:(0,s.jsx)(oO,{toggleField:(0,s.jsx)(ow,{tooltipText:d,isToggleDisabled:u||p,enableSubscriptionGroup:c}),fieldToggleable:(0,s.jsx)(oj,{isSelectDisabled:y,paywallGroupSelectOptions:l,className:"w-7/12"}),hideToggleableField:!h})})},ok=function(){var e=rN().hasPricesEligibleForTrial,t=(0,v.Gc)(),r=t.setValue,n=t.setFocus,i=!!(0,t.watch)("enable_trial"),o=(0,l.useRef)(!1);return(0,l.useEffect)(function(){e()||r("enable_trial",!1)},[e,r]),(0,l.useEffect)(function(){i?(o.current&&r("trial_requires_card",!0),n("trial_days")):(r("trial_days",0),r("trial_requires_card",!1),r("self_trial_cancelable",!1)),o.current=!0},[i,n,r]),{hasPricesEligibleForTrial:e,hasTrial:i}},oN=function(e){var t=e.className,r=ok().hasTrial;return(0,s.jsx)(f.l.Item,{className:"!py-0 ".concat(void 0===t?"":t),labelClassName:"!font-normal",name:"trial_days",hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,hideBorder:!0,isDisabled:!r,rules:{pattern:/^[0-9]+$/,min:{value:r?os.dy:os.L3,message:(0,g.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:os.ut,message:(0,g.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}},children:(0,s.jsx)(f.l.Input,{"data-testid":"trial_days",inputMode:"numeric",suffix:(0,g.t)("settings.paywalls.form.free_trial.days_label"),disabled:!r})})},oP=function(){return(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_card",translationRoot:"settings.paywalls.form.free_trial",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{"data-testid":"trial_requires_card",name:"trial_requires_card",variant:"small"})})},oC=function(){var e=rN().hasRecurringPrices,t=(0,v.Gc)().setValue;return(0,l.useEffect)(function(){e()||t("self_trial_cancelable",!1)},[e()]),(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_trial_cancelable",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,isDisabled:!e(),children:(0,s.jsx)(f.l.ToggleSwitch,{name:"self_trial_cancelable",variant:"small",disabled:!e()})})},oA=function(){var e=ok(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,s.jsx)(f.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",isDisabled:!t(),children:(0,s.jsx)(f.l.ToggleSwitch,{name:"enable_trial",variant:"small",disabled:!t(),value:String(r)})})},oI=function(){var e=ok(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,s.jsx)(oO,{toggleField:(0,s.jsx)(oA,{}),fieldToggleable:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(oN,{className:"w-7/12"}),(0,s.jsx)(oP,{}),(0,s.jsx)(oC,{})]}),hideToggleableField:!t()||!r})},oT=function(){return(0,s.jsxs)(it.v,{className:"border-primary flex flex-col gap-y-4 border px-6",children:[(0,s.jsx)(es.Z.LabelLg,{weight:"bold",children:(0,g.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,s.jsx)(oy,{}),(0,s.jsx)(oS,{}),(0,s.jsx)(oI,{}),(0,s.jsx)(o_,{})]})]})},oE=function(){var e=rN(),t=e.getPrices,r=e.isShowingAddPriceModal,n=e.showAddPriceModal,i=(0,iJ.C)().trackEvent,o=t();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-8",children:[o&&o.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ob,{}),(0,s.jsx)(oT,{})]}):(0,s.jsx)("div",{className:(0,O.A)("mt-4 flex flex-col items-center justify-center gap-4 rounded-lg border py-20"),children:(0,s.jsx)(e_.u,{header:(0,g.t)("settings.paywalls.modal.tabs.pricing.empty_state.title"),description:(0,g.t)("settings.paywalls.modal.tabs.pricing.empty_state.description"),onPrimaryClick:n,primaryLabel:(0,g.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})}),(0,s.jsx)(i$.V.Banner,{title:(0,g.t)("settings.paywalls.modal.tabs.pricing.branded_apps_title"),onClick:function(){i("plus_banner.cta.clicked",{origin:"paywalls.stripe_pricing_tab"}),window.open(iK.L.plans.brandedApps,"_blank")}})]}),r()&&(0,s.jsx)(oa,{})]})},oL=r(480610),oD=function(){var e=(0,v.Gc)().watch,t=(0,oL.z)().brandedApp,r=(0,n1.g)(),n=(0,A.K)(),i=n.data;if(n.isLoading)return(0,s.jsx)(m.a,{});var o=e("currency_id"),a=null==i?void 0:i.find(function(e){return e.id===parseInt(o)});return a?(0,s.jsxs)(S,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.pricing.title")}),(0,s.jsxs)(n2.O.Group,{className:"!overflow-hidden",children:[t.isEnabled&&r&&(0,s.jsxs)(n2.O.List,{className:"border-primary border-b",children:[(0,s.jsx)(n2.O,{isButtonType:!0,children:(0,g.t)("web")}),(0,s.jsx)(n2.O,{isButtonType:!0,children:(0,g.t)("mobile")})]}),(0,s.jsxs)(n2.O.Panels,{className:(0,O.A)("pb-10",{"pt-8":t.isEnabled}),children:[(0,s.jsx)(n2.O.Panel,{children:(0,s.jsx)(rk,{currency:a,children:(0,s.jsx)(oE,{})})}),t.isEnabled&&r&&(0,s.jsx)(n2.O.Panel,{children:(0,s.jsx)(n9,{currency:a,children:(0,s.jsx)(iQ,{})})})]})]})]}):null},oM=r(190412),oR=r(604039),oB="settings.paywalls.tracking_js_code",oz=[{group:(0,g.t)([oB,"group.member"]),label:(0,g.t)([oB,"variables.member_email"]),value:(0,g.t)([oB,"variables.member_email"])},{group:(0,g.t)([oB,"group.charge"]),label:(0,g.t)([oB,"variables.amount_paid"]),value:(0,g.t)([oB,"variables.amount_paid"])},{group:(0,g.t)([oB,"group.coupon"]),label:(0,g.t)([oB,"variables.coupon_code"]),value:(0,g.t)([oB,"variables.coupon_code"])},{group:(0,g.t)([oB,"group.paywall"]),label:(0,g.t)([oB,"variables.paywall_internal_name"]),value:(0,g.t)([oB,"variables.paywall_internal_name"])},{group:(0,g.t)([oB,"group.paywall"]),label:(0,g.t)([oB,"variables.paywall_display_name"]),value:(0,g.t)([oB,"variables.paywall_display_name"])},{group:(0,g.t)([oB,"group.paywall"]),label:(0,g.t)([oB,"variables.paywall_trial_days"]),value:(0,g.t)([oB,"variables.paywall_trial_days"])},{group:(0,g.t)([oB,"group.paywall_price"]),label:(0,g.t)([oB,"variables.paywall_price_amount"]),value:(0,g.t)([oB,"variables.paywall_price_amount"])},{group:(0,g.t)([oB,"group.paywall_price"]),label:(0,g.t)([oB,"variables.paywall_price_interval"]),value:(0,g.t)([oB,"variables.paywall_price_interval"])},{group:(0,g.t)([oB,"group.paywall_price"]),label:(0,g.t)([oB,"variables.paywall_price_type"]),value:(0,g.t)([oB,"variables.paywall_price_type"])}],oF=function(){var e=(0,u.wh)().currentCommunity;return(0,s.jsxs)(S,{children:[(0,s.jsx)(k.G,{title:(0,g.t)("settings.paywalls.modal.tabs.tracking.title")}),(null==e?void 0:e.paywall_tracking_code_feature_flag_enabled)?(0,s.jsx)(f.l.Item,{name:"conversion_tracking_js_code",translationRoot:"settings.paywalls.modal.tabs.tracking",tooltipText:(0,g.t)("settings.paywalls.modal.tabs.tracking.conversion_tracking_js_code_tooltip"),hideBorder:!0,fullWidth:!1,hideDescription:!0,className:"!mt-0 !flex min-h-[55vh] flex-auto flex-col !py-0",children:(0,s.jsx)(oM.K,{name:"conversion_tracking_js_code",className:"max-h-[30vh] flex-auto",showMenuBar:!0,menuBarOptions:oz})}):(0,s.jsx)(oR.S,{PlanFeatureName:(0,g.t)("pricing_plans.feature.conversion_tracking_code")})]})},oU=r(926092),oZ=function(e){var t=e.children;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden size-full flex-row lg:flex",children:t}),(0,s.jsx)(oU.R,{className:"lg:hidden",title:(0,g.t)("builder_ui.mobile_unsupported.title"),description:(0,g.t)("builder_ui.mobile_unsupported.description")})]})},oG=function(e){var t=e.children,r=e.className;return(0,s.jsx)("div",{className:(0,O.A)("flex size-full flex-col gap-y-6 px-16 py-12",r),children:t})},oq=function(e){var t=e.children;return(0,s.jsx)("div",{className:"bg-secondary flex size-full items-center justify-center",children:t})},oV=function(e){var t=e.children,r=e.className;return(0,s.jsx)("div",{className:(0,O.A)("bg-primary relative flex h-[120px] w-[302px] justify-center rounded-2xl shadow-sm",r),children:t})},oW=function(e){var t=e.index,r=e.title;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-3",children:[(0,s.jsx)("div",{className:(0,O.A)("flex size-8 min-h-8 min-w-8 items-center justify-center rounded-full text-center",{"bg-secondary border-primary border":t%2!=0,"bg-c-active-item-color":t%2==0}),children:(0,s.jsx)(es.Z.LabelSm,{weight:"bold",color:(0,O.A)({"text-default":t%2!=0,"text-feature-dark":t%2==0}),children:t})}),(0,s.jsx)(es.Z.LabelMd,{weight:"semibold",color:"text-default",children:r})]})},oH=function(e){var t=e.title;return(0,s.jsx)("div",{className:"bg-secondary border-primary absolute top-[-0.875rem] rounded-[1.375rem] border px-3 py-0.5",children:(0,s.jsx)(es.Z.BodySm,{color:"text-dark",weight:"normal",children:t})})},oQ=function(){return(0,s.jsx)("div",{className:"h-[2.438rem] w-px",children:(0,s.jsx)("div",{className:"bg-disabled h-[1.75rem] w-px"})})},oK=function(e){var t=e.children,r=e.className,n=e.disableTab;return(0,s.jsx)("div",{ref:function(e){return n&&e&&e.setAttribute("inert","")},className:(0,O.A)("flex size-full flex-col items-center justify-center gap-y-3",r),children:t})},oJ=function(){return(0,s.jsxs)(oK,{children:[(0,s.jsxs)(oV,{children:[(0,s.jsx)(oH,{title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.checkout")[0]}),(0,s.jsx)(oW,{index:1,title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.checkout")[1]})]}),(0,s.jsx)(oQ,{}),(0,s.jsxs)(oV,{className:"shadow-xl",children:[(0,s.jsx)(oH,{title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.post_purchase")[0]}),(0,s.jsx)(oW,{index:2,title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.post_purchase")[1]})]}),(0,s.jsx)(oQ,{}),(0,s.jsxs)(oV,{children:[(0,s.jsx)(oH,{title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.post_upsell")[0]}),(0,s.jsx)(oW,{index:3,title:(0,g.t)("settings.paywalls.modal.tabs.upsell.canvas.empty_state.post_upsell")[1]})]})]})},o$=function(){var e=(0,v.Gc)().watch,t=er().queryFunctions.fetchAvailablePaywalls,r=e("enable_subscription_group")?e("paywall_group_id"):void 0,n=e("id");return(0,N.useQuery)(["paywalls-available-for-upsells",n,r],function(){return t({mainPaywallId:n,paywallGroupId:r})},{retryOnMount:!0,refetchIntervalInBackground:!1})};function oX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function oY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var o0=function(e,t){var r,n=t.find(function(t){return t.paywall_price_id===e.id});return{paywall_price_id:e.id,checked:null==(r=null==n?void 0:n.checked)||r,destroy:!1,title:e.short_description}},o1=function(e){return oY(oX({},e),{destroy:!0})},o2=function(e,t){var r=e;return void 0!==t&&(r=e.filter(function(e,r){return e&&r!==t})),r.every(function(e){return e.destroy})},o3=function(e,t){if(!e)return"no_action";var r=e[t];return r&&r.id?"mark_to_be_removed":"remove_object_entirely"},o6=function(e){return{updateUpsell:function(t,r,n,i){var o,a=!n.paywall_offered,s=nC(r.checkout_path),l=a&&i.find(function(e){return e.code===s}),c=a&&l?{paywall_coupon_id:l.id,paywall_coupon_enabled:!0}:{},u=oY(oX({},B(),n,c),{paywall_offered_id:r.id,all_paywall_offered_prices:null==(o=null==n?void 0:n.all_paywall_offered_prices)||o,paywall_offered:{id:r.id,name:r.name||r.display_name,description:r.description,offer_prices:[],available_paywall_prices:r.stripe_prices_attributes},paywall_offer_prices_attributes:r.stripe_prices_attributes.map(function(e){return o0(e,(null==n?void 0:n.paywall_offer_prices_attributes)||[])})});e.update(t,u)},removeUpsell:function(t){var r=e.fields,n=o3(r,t);if("remove_object_entirely"===n)e.remove(t),o2(r,t)&&e.append(B());else if("mark_to_be_removed"===n){var i,o=r[t];e.update(t,oY(oX({},o),{destroy:!0,paywall_offer_prices_attributes:(0,b.compact)((null==(i=o.paywall_offer_prices_attributes)?void 0:i.map(o1))||[])})),e.append(B())}return!0}}},o5=r(836047),o4=function(e){var t=e.paywallId,r=(0,tC.pI)({paywallId:t,couponStatuses:[o5.U.active],enabled:!!t}).paywallCouponsListQuery,n=(0,tC.pI)({paywallId:void 0,enabled:!0,couponStatuses:[o5.U.active]}).paywallCouponsListQuery,i=(0,l.useMemo)(function(){return r.data?r.data.map(function(e){return{label:e.code,value:e.id}}):[]},[r.dataUpdatedAt]);return{allActiveCouponsList:(null==n?void 0:n.data)||[],couponOptions:i,isLoading:r.isLoading||n.isLoading}};function o7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o9=(0,l.createContext)({couponOptions:[],isLoading:!1,lastIndex:0,paywallsAvailableList:[],allAvailableCouponsForPaywallOffered:[],removeUpsell:b.noop,updateUpsell:b.noop});o9.displayName="UpsellTabProvider";var o8=function(){return(0,l.useContext)(o9)},ae=function(e){var t,r=e.children,n=(t=(0,l.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o7(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o7(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,v.Gc)(),c=a.control,u=a.watch,d=o$(),f=(0,v.Dq)({control:c,name:U(),keyName:"offersFieldArrayId"}),m=Math.max(f.fields.length-1,0),p=o4({paywallId:u(V(m))}),b=p.couponOptions,h=p.isLoading,y=p.allActiveCouponsList,g=o6(f),_=g.removeUpsell,x=g.updateUpsell;(0,l.useEffect)(function(){d.data&&o(d.data)},[d.data]);var j={updateUpsell:x,removeUpsell:_,paywallsAvailableList:i,allAvailableCouponsForPaywallOffered:y,couponOptions:b,isLoading:(null==d?void 0:d.isLoading)||h,lastIndex:m};return(0,s.jsx)(o9.Provider,{value:j,children:r})},at=r(649767),ar=r(266515);function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ai={price_type:"onetime",scenario:"value",trial_days:0,amount:1e4,trial_requires_upfront_payment:!1,preferred:!1,currency_id:1,tmp_id:"non_existent",id:-1},ao=function(e){var t,r,n,i=e.paywallPriceOffers,o=e.paywall,a=(t=(0,l.useMemo)(function(){var e=[],t=i.reduce(function(t,r){return r.paywall_price_id&&(t[r.paywall_price_id]=!!r.checked),r.checked&&r.paywall_price_id&&e.push(r.paywall_price_id),t},{});return[e,t]},[i]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return an(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return an(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],c=a[1],u=(null==o?void 0:o.prices.filter(function(e){return c[e.id]}))||[],d=0===u.length;return o?{key:s.join("-"),paywall:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),n=n={prices:d?[ai]:u},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)}:{key:"",paywall:null}},aa=function(){var e,t,r,n=o8(),i=n.lastIndex,o=n.allAvailableCouponsForPaywallOffered,a=(0,v.Gc)().watch,c=a(V(i)),u=a(J(i)),d=a(H(i)),f=a(Q(i)),p=(0,l.useMemo)(function(){if(f&&d)return o.find(function(e){return e.id===f})},[f,o,d]),b=C({paywall_id:c,scenario:"upsell_preview"},!0).showQuery,h=ao({paywall:null==b||null==(r=b.data)?void 0:r.paywall,paywallPriceOffers:u}),y=h.paywall,g=h.key;if(b.isLoading||!b.data||!(null==b?void 0:b.data.paywall)||!y)return(0,s.jsx)(m.a,{});var _=b.data,x=_.community,j=_.community_payment_processor,w=_.settings,O=_.policies,S=_.auth_provider;if(!y)return(0,s.jsx)(m.a,{});var k={paywall:y,currentCommunity:x,currentCommunityProcessorPaymentMethodConfigurationId:j.payment_method_configuration_id,isLinkPreferenceEnabled:!1,isMemberWithSavedPaymentMethods:!1,currentCommunityMemberPaymentProcessorSessionClientSecret:void 0,hasAlreadyPurchased:!1,loginUrl:w.login_url,communityRootUrl:w.community_url,checkoutConfirmationUrl:w.checkout_confirmation_url,processorId:j.processor_id,processorKey:j.public_api_key,areCouponsEnabled:!0,isTaxCollectionEnabled:!1,isMemberAddressComplete:!1,isMemberAddressRequired:!1,memberBillingInfo:void 0,isPaywallsCheckoutWithoutInternalResourcesEnabled:!1,isBrazilianAccountAndProcessorStripeBr:j.is_brazilian_account_and_processor_stripe_brazil,shouldShowTaxIdForm:O.should_show_tax_id_form,isTaxIdMandatory:j.is_tax_id_mandatory,authProviderProperties:S,shouldUseWrapper:!1,resetPasswordUrl:w.reset_password_url,checkoutPreviewContext:{community_id:x.id,coupon_applied:p}};return(0,s.jsx)(tP.b,{style:{position:"inherit",width:"768px",transform:"scale(0.80)"},children:(0,s.jsx)(oK,{disableTab:!0,className:"pointer-events-none",children:(0,s.jsx)(at.o.Preview,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},k),t=t={children:(0,s.jsx)("div",{className:"flex flex-col w-[500px] h-auto",children:(0,s.jsx)(ar.i.Upsell,{})})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))})},"".concat([g,null==p?void 0:p.code].join("_")))},as=function(){var e=o8().lastIndex,t=(0,(0,v.Gc)().watch)(Z(e)),r=(0,l.useMemo)(function(){var e=!t,r=!!(null==t?void 0:t.destroy),n=!!(null==t?void 0:t.paywall_offered);return e||r||!n?(0,s.jsx)(oJ,{}):n?(0,s.jsx)(aa,{}):(0,s.jsx)(m.a,{})},[t]);return(0,s.jsx)(s.Fragment,{children:r})},al=function(e){var t=e.children;return(0,s.jsx)("div",{className:"border-primary bg-primary flex flex-col gap-y-4 rounded-xl border p-6",children:t})},ac=function(e){var t=e.title,r=e.subtitle;return(0,s.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,s.jsx)(es.Z.LabelSm,{weight:"medium",color:"text-darkest",children:t}),(0,s.jsx)(es.Z.BodySm,{weight:"normal",color:"text-default",children:r})]})},au=function(){var e=o8(),t=e.paywallsAvailableList,r=e.lastIndex,n=e.updateUpsell,i=e.allAvailableCouponsForPaywallOffered,o=(0,v.Gc)(),a=o.watch,c=o.getValues,u=a(V(r)),d=t.map(function(e){return{label:e.name||e.display_name,value:e.id}});return((0,l.useEffect)(function(){var e=c(Z(r)),o=t.find(function(e){return e.id===u});o&&e&&n(r,o,e,i)},[u,r]),u)?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ac,{title:(0,g.t)([F,"forms.addon.title"]),subtitle:(0,g.t)([F,"forms.addon.description"])}),(0,s.jsx)(e4.N,{name:V(r),hideLabel:!0,options:d||[],"data-testid":"upsell-paywall-select"})]})},ad=function(){return!1},af=function(){var e=o8(),t=e.lastIndex,r=e.removeUpsell,n=(0,v.Gc)(),i=n.setValue,o=(0,n.watch)(G(t)),a=ad(),l=function(e){i(G(t),e,{shouldDirty:!0})};return(0,s.jsxs)(eI.S,{label:(0,g.t)("actions"),children:[a&&(0,s.jsx)(eT.Lt.ItemWithLink,{onClick:function(){},linkType:"button",children:(0,g.t)("preview")}),"inactive"!==o&&(0,s.jsx)(eT.Lt.ItemWithLink,{onClick:function(){return l("inactive")},linkType:"button",children:(0,g.t)("disable")}),"active"!==o&&(0,s.jsx)(eT.Lt.ItemWithLink,{onClick:function(){return l("active")},linkType:"button",children:(0,g.t)("enable")}),(0,s.jsx)(eT.Lt.ItemWithLink,{onClick:function(){r(t)},linkType:"button",children:(0,g.t)("remove")})]})},am=function(e){var t=e.paywallName;return(0,s.jsxs)("div",{className:"flex flex-row gap-x-2 items-center",children:[(0,s.jsx)(es.Z.LabelMd,{weight:"semibold",truncate:!0,textTransform:"max-w-[21.875rem]",children:(0,g.t)([F,"forms.paywall_selection.title"],{paywall_name:t})}),(0,s.jsx)(t3.T,{className:"cursor-pointer",content:(0,g.t)([F,"forms.paywall_selection.title_tooltip"]),children:(0,s.jsx)(eU.JO,{type:"question-mark",className:"!w-4 !h-4 text-default"})})]})},ap={unknown:{children:(0,g.t)("unknown"),variant:"default"},active:{children:(0,g.t)("enabled"),variant:"success"},inactive:{children:(0,g.t)("disabled"),variant:"danger"}},ab=function(){var e=o8().lastIndex,t=(0,v.Gc)().watch,r=t(W(e)),n=t(G(e));return(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-4 items-center",children:[(0,s.jsx)(am,{paywallName:(null==r?void 0:r.name)||""}),(0,s.jsx)(iR.O,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},ap[n||"unknown"]))]}),(0,s.jsx)(af,{})]})},ah=r(226262),ay=function(){var e=(0,v.Gc)(),t=e.control,r=e.watch,n=o8().lastIndex,i=r(q(n));return(0,s.jsx)(v.Qr,{control:t,name:q(n),render:function(e){var t=e.field.onChange;return(0,s.jsx)(ah.o,{name:q(n),disabled:!1,checked:!!i,option:{label:(0,g.t)([F,"forms.price_selection.all_prices_checkbox"])},isDescriptionTooltip:!1,className:"!mt-0",labelClassName:"font-normal",onChange:t,"data-testid":"upsell-all-prices-checkbox"})}})};function av(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ag(e){return function(e){if(Array.isArray(e))return av(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return av(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return av(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a_=function(e){var t=e.value,r=e.index,n=o8().lastIndex,i=(0,v.Gc)(),o=i.getValues,a=i.setValue,s=i.watch,c=s(q(n)),u=J(n),d=s(J(n)),f=null==d?void 0:d.find(function(e){return e.paywall_price_id===t}),m="".concat(u,".").concat(r);return(0,l.useEffect)(function(){if(c){var e=ag(o(u)||[]);e.forEach(function(e){e.destroy&&(e.destroy=!1),e.checked=!0}),a(u,e,{shouldDirty:!0})}},[c]),{onChange:function(){var e,r=ag(null!=(e=o(u))?e:[]),i=null==r?void 0:r.find(function(e){return e.paywall_price_id===t});(null==i?void 0:i.id)&&i.checked?(i.checked=!i.checked,i.destroy=!0):(null==i?void 0:i.id)&&!i.checked?(i.checked=!i.checked,i.destroy=!1):i&&(i.checked=!i.checked),c&&a(q(n),!1),a(u,r,{shouldDirty:!0})},currentObject:f,formName:m}},ax=function(e){var t=e.value,r=e.label,n=a_({value:t,label:r,index:e.index}),i=n.onChange,o=n.currentObject,a=n.formName;return(0,s.jsx)(ah.o,{className:"!mt-0",labelClassName:(0,O.A)("font-normal"),name:a,value:t,checked:!!(null==o?void 0:o.checked),onChange:i,option:{label:r}})},aj=function(){var e=o8().lastIndex,t=(0,v.Gc)().watch,r=t(J(e)),n=t(W(e)),i=ad();return n?(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsx)(ab,{}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)(ay,{}),null==r?void 0:r.map(function(e,t){return(0,s.jsx)(ax,{index:t,value:e.paywall_price_id,label:(null==e?void 0:e.title)||""},"price-checkbox-".concat(e.paywall_price_id))})]}),i&&(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(eO.z,{variant:"circle",type:"button",children:(0,g.t)([F,"forms.paywall_selection.customize_page"])})})]}):null},aw=function(e){var t=e.paywallId,r=e.toggleNameField,n=e.couponNameField,i=o8().couponOptions,o=(0,(0,v.Gc)().watch)(r),a=0===i.length;return t?(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(f.l.Item,{className:"!mt-0 !py-0",labelClassName:"!font-normal",name:r,label:(0,g.t)([F,"forms.coupons.auto_apply"]),fullWidth:!0,tooltipText:(0,g.t)([F,"forms.coupons",a?"auto_apply_disabled_tooltip":"auto_apply_tooltip"]),hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,s.jsx)(f.l.ToggleSwitch,{name:r,"data-testid":"auto_apply_coupon",variant:"small",checked:o,disabled:a})}),o&&(0,s.jsx)(e4.N,{disabled:a,name:n,hideLabel:!0,options:i,"data-testid":"upsell-coupon-select"})]}):null},aO=function(){var e=o8(),t=e.lastIndex,r=e.isLoading,n=(0,v.Gc)().watch,i=n(K(t)),o=n(V(t));return"addon"!==i?null:r?(0,s.jsx)(m.a,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(al,{children:[(0,s.jsx)(au,{}),(0,s.jsx)(aj,{})]}),(0,s.jsx)(aw,{paywallId:o,couponNameField:Q(t),toggleNameField:H(t)})]})},aS=function(e){var t=e.text,r=e.tooltip;return(0,s.jsx)(t3.T,{role:"tooltip",content:r,className:"cursor-pointer",children:(0,s.jsx)("div",{className:"bg-primary border-primary rounded-md border px-2 py-px",children:(0,s.jsx)(es.Z.LabelXs,{weight:"medium",color:"text-secondary",children:t})})})},ak=function(e){var t=e.title,r=e.badgeText,n=e.badgeTooltip,i=e.disabled;return(0,s.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,s.jsx)(es.Z.LabelSm,{color:(0,O.A)({"text-tertiary":i,"text-primary":!i}),children:t}),r&&(0,s.jsx)(aS,{text:r,tooltip:n})]})};function aN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var aP=function(){var e,t=(0,v.Gc)(),r=t.control,n=t.getValues,i=t.watch,o=o8().lastIndex,a=(e=(0,l.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return aN(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aN(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1],d=(0,l.useRef)(n(K(o))),f=i(K(o));return(0,l.useEffect)(function(){d.current!=f&&(u(c+1),d.current=f)},[d.current,c,u,f]),(0,s.jsxs)("div",{className:"flex flex-col gap-y-6","data-testid":"upsell-type-selection",children:[(0,s.jsx)(es.Z.TitleXl,{children:(0,g.t)([F,"title"])}),(0,s.jsx)(es.Z.BodySm,{children:(0,g.t)([F,"description"])}),(0,s.jsx)(v.Qr,{control:r,name:K(o),render:function(e){var t=e.field,r=t.onChange,n=t.value,i=t.name;return(0,s.jsx)(eg.S,{name:i,onChange:r,defaultChecked:n,shouldShowInlineOptions:!0,hasCheckedIcon:!1,options:[{label:(0,s.jsx)(ak,{title:(0,g.t)([F,"forms.upsell.options.addon.title"])}),value:"addon",icon:"16-add-to-basket",iconSize:16,disabled:!1},{label:(0,s.jsx)(ak,{title:(0,g.t)([F,"forms.upsell.options.upgrade.title"]),disabled:!0,badgeText:(0,g.t)([F,"forms.upsell.options.upgrade.badge"]),badgeTooltip:(0,g.t)([F,"forms.upsell.options.upgrade.tooltip"])}),value:"upgrade",icon:"20-trends",iconSize:20,disabled:!0}]})}})]},c)},aC=function(){return(0,s.jsx)(ae,{children:(0,s.jsxs)(oZ,{children:[(0,s.jsx)("div",{className:"flex size-full justify-center",children:(0,s.jsxs)(oG,{className:"max-w-[42rem] lg:max-w-[52rem]",children:[(0,s.jsx)(aP,{}),(0,s.jsx)(aO,{})]})}),(0,s.jsx)(oq,{children:(0,s.jsx)(as,{})})]})})},aA=r(117617),aI=r(315574),aT=function(){var e=(0,aA.Be)(),t=eo().onClose;return(0,s.jsx)(S,{className:"-mx-6 -mt-4",children:(0,s.jsx)(aI.k,{category:"paywalls",pageSize:e?4:3,onClose:t,shouldAutoAdjust:!0})})},aE=r(611255);function aL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aD=function(e){var t,r=e.active,n=e.disabled,i=e.label,o=e.onClick,a=function(){return!n&&o&&o()};return(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:(0,O.A)(aE.O.className,(aL(t={},aE.O.activeClassName,r),aL(t,"hover:text-default focus:text-default cursor-auto opacity-50",!r&&n),t)),onClick:a,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a())},type:"button",children:i})})},aM=r(770434),aR=function(e){var t,r,n=e.onClick,i=e.className,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","className"]);return(0,s.jsxs)(eO.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"button",variant:"plain",small:!0,onClick:n,className:void 0===i?"":i},o),r=r={children:[(0,s.jsx)("span",{className:"sr-only",children:(0,g.t)("close")}),(0,s.jsx)(eU.JO,{className:(0,O.A)("!text-dark"),type:"20-close",size:20})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};function aB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var az=function(){var e,t=eo().onClose,r=(e=(0,(0,v.Gc)().watch)(["display_name","id"]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return aB(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aB(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1],o=(0,g.t)("settings.paywalls.modal.no_title_available"),a=i?(0,g.t)("settings.paywalls.modal.title_editing",{paywall_name:n||o}):(0,g.t)("settings.paywalls.modal.title_creation",{paywall_name:n||o});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{className:"border-primary hidden border-r pr-4 lg:block",children:(0,s.jsx)(rV.h,{name:"20-arrow-left",iconSize:20,buttonSize:28,className:"text-default",iconClassName:"!w-5 !h-5",ariaLabel:(0,g.t)("back"),onClick:function(){return t(!0)}})}),(0,s.jsx)("span",{className:(0,O.A)("grid min-w-0 lg:ml-4"),children:(0,s.jsx)(aM.Y,{content:a,className:"truncate text-lg font-semibold",children:a})})]}),(0,s.jsx)(aR,{onClick:function(){return t(!0)},className:"lg:hidden"})]})},aF=function(e){var t=e.tabs,r=e.activeTab,n=e.onClickTab,i=e.rightContainer;return(0,s.jsxs)(d.x.HeaderNav.NavContainer,{className:"!grid-cols-[1fr_3fr_1fr] md:px-4 md:py-[1.125rem]",children:[(0,s.jsx)(d.x.HeaderNav.LeftContainer,{children:(0,s.jsx)(az,{})}),(0,s.jsx)(d.x.HeaderNav.NavGroup,{children:t.map(function(e){var t,i;return(0,l.createElement)(aD,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={active:e.label===r,key:e.label,onClick:function(){return n(e.label)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}),t))})}),i&&(0,s.jsx)(d.x.HeaderNav.RightContainer,{className:"hidden lg:flex",children:i})]})},aU=r(62750),aZ=r(412142),aG=function(e){var t,r,n=e.activeTab,i=e.currentPaywallStatus,o=eo().onClose,a=(0,v.Gc)(),s=a.register,c=a.setValue,u=a.watch,d=a.getValues,f=a.formState,m=(0,N.useQueryClient)(),y=d(),_=(0,aZ.F)(y,function(){m.refetchQueries([aU.lP]),o()}),x=_.publish,j=_.archive,w=_.remove,O=_.masquerade,S=(0,l.useMemo)(function(){return n===p.eA.TRACKING_TAB},[n]),k=function(e){s("publish"),c("publish",e)},P=function(){return k(!0)},C=(0,l.useMemo)(function(){return{active:{buttonLabel:(0,g.t)("settings.paywalls.modal.footer.save"),variant:"circle",onClick:b.noop},draft:{onClick:b.noop,variant:"circle",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.save")},inactive:{onClick:b.noop,variant:"circle",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.save")},paywallCreation:{variant:"circle",buttonLabel:S?(0,g.t)("settings.paywalls.modal.footer.publish"):(0,g.t)("settings.paywalls.modal.footer.next"),onClick:function(){return S&&P()}}}},[S,P]),A={active:{onClick:function(){k(!1),s("status"),c("status",tA.Tl.INACTIVE)},variant:"danger",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.unpublish")},draft:{onClick:P,variant:"secondary",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.publish")},inactive:{onClick:P,variant:"secondary",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.publish")},paywallCreation:{onClick:b.noop,variant:"secondary",buttonLabel:(0,g.t)("settings.paywalls.modal.footer.save_draft")}},I=null!=(t=i&&A[i])?t:A.paywallCreation,T=null!=(r=i&&C[i])?r:C.paywallCreation,E=!(0,h.dR)(i)&&S,L=u("destroyable"),D=i===tA.Tl.ACTIVE,M=(0,l.useMemo)(function(){var e=[];return(0,h.dR)(i)&&(e.push({label:(0,g.t)(["actions"]),value:(0,g.t)(["actions"]),hide:!0}),D&&e.push({label:(0,g.t)(["archive"]),value:(0,g.t)(["archive"]),onClick:j,pathTo:"#"}),D||e.push({label:(0,g.t)(["publish"]),value:(0,g.t)(["publish"]),onClick:x,pathTo:"#"}),L&&e.push({label:(0,g.t)(["delete"]),value:(0,g.t)(["delete"]),onClick:w,color:"text-v2-danger",pathTo:"#"}),e.push({label:(0,g.t)(["view_as"]),value:(0,g.t)(["view_as"]),onClick:O,pathTo:"#"})),e},[j,x,w,O,L,D,i]);return{isEditingMode:(0,h.dR)(i),currentPrimaryButtonState:T,currentSecondaryButtonState:I,isCreatingAndLastStep:E,options:M,formState:f}},aq=function(e){var t=e.isSubmitting,r=e.mutation,n=e.activeTab,i=e.shouldBlockSubmitButton,o=aG({activeTab:n,currentPaywallStatus:e.currentPaywallStatus}),a=o.isEditingMode,l=o.currentPrimaryButtonState,c=o.currentSecondaryButtonState,u=o.options,d=o.isCreatingAndLastStep,f=o.formState,m=Object.keys((null==f?void 0:f.errors)||{}).length>0;return(0,s.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[d&&(0,s.jsx)(eO.z,{type:"submit",variant:c.variant,disabled:t||r.isLoading||i,onClick:c.onClick,children:c.buttonLabel}),a&&(0,s.jsx)(eT.Lt,{options:u}),(0,s.jsx)(eO.z,{type:"submit",variant:l.variant,disabled:!(null==f?void 0:f.isDirty)||m||t||r.isLoading||i,onClick:l.onClick,children:l.buttonLabel})]})};function aV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aW=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=e.usePaywallFormContentHook,o=e.mutation,a=e.isSubmitting,c=e.requiresCurrency,u=e.canChangeCurrency,f=e.currentPaywallStatus,m=e.workflowsEnabled,v=e.hasSubscribers,g=i({activeTab:r,setActiveTab:n}),_=g.handleTabClick,x=g.tabOptions,j=g.shouldBlockSubmitButton,w=y(),O=!m||!(0,h.j2)(f),S=!w,k=(0,l.useMemo)(function(){return(0,b.compact)([O?p.eA.WORKFLOWS_TAB:null,S?p.eA.UPSELL_TAB:null])},[O,S]),N=(0,l.useMemo)(function(){return O||S?x.filter(function(e){return!k.includes(e.label)}):x},[x,O,S,k]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.x.Header,{className:"z-10",children:(0,s.jsx)(aF,{tabs:N,onClickTab:_,activeTab:r,rightContainer:(0,s.jsx)(aq,{isSubmitting:a,mutation:o,activeTab:r,shouldBlockSubmitButton:j,currentPaywallStatus:f})})}),(aV(t={},p.eA.DETAILS_TAB,(0,s.jsx)(nR,{requiresCurrency:c,canChangeCurrency:u})),aV(t,p.eA.CHECKOUT_TAB,(0,s.jsx)(nS,{})),aV(t,p.eA.UPSELL_TAB,(0,s.jsx)(aC,{})),aV(t,p.eA.PRICING_TAB,(0,s.jsx)(oD,{})),aV(t,p.eA.ACCESS_TAB,(0,s.jsx)(tw,{hasSubscribers:v})),aV(t,p.eA.POST_PURCHASE_TAB,(0,s.jsx)(n0,{shouldDisplayWorkflowsTab:(0,h.j2)(f),setActiveTab:n})),aV(t,p.eA.TRACKING_TAB,(0,s.jsx)(oF,{})),aV(t,p.eA.WORKFLOWS_TAB,(0,s.jsx)(aT,{})),t)[r],(0,s.jsx)("div",{className:"border-primary sticky border-t p-5 md:py-4 lg:hidden lg:px-6",children:(0,s.jsx)(aq,{isSubmitting:a,mutation:o,activeTab:r,shouldBlockSubmitButton:j,currentPaywallStatus:f})})]})};function aH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var aQ=function(e,t,r){return t.includes(e)||r.some(function(e){return!e()})},aK=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=(t=(0,l.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return aH(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aH(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=y(),c=(0,v.Gc)(),u=c.control,d=c.formState,f=(0,v.qo)({control:u,name:"display_name"}),m=(0,v.qo)({control:u,name:"checkout_path"}),h=(0,v.qo)({control:u,name:"stripe_prices_attributes"}),g=(0,v.qo)({control:u,name:"all_spaces"}),_=(0,v.qo)({control:u,name:"space_group_ids"})||[],x=(0,v.qo)({control:u,name:"access_groups"})||{},j=(0,v.qo)({control:u,name:"space_ids"})||[],w=(0,l.useCallback)(function(e,t){var n=!t===o;e!==r||n||a(!t)},[o,a,r]),O=(0,l.useCallback)(function(){var e=!!f&&!!m;return w(p.eA.DETAILS_TAB,e),e},[f,w,m]),S=(0,l.useCallback)(function(){var e=Array.isArray(h)&&h.some(function(e){return!!e.id&&!e._destroy||!!e.tmp_id});return w(p.eA.PRICING_TAB,e),e},[w,h]),k=(0,l.useCallback)(function(){var e=!!g||Array.isArray(_)&&_.length>0||Array.isArray(j)&&j.length>0||!(0,b.isEmpty)(x);return w(p.eA.ACCESS_TAB,e),e},[g,_,j,w,x]),N=(0,l.useCallback)(function(){return!(null==d?void 0:d.errors.redirect_url)&&!(null==d?void 0:d.errors.post_purchase_email_meta)},[d]);return{handleTabClick:function(e){n(e)},tabOptions:(0,l.useMemo)(function(){return(0,b.compact)([{label:p.eA.DETAILS_TAB,disabled:aQ(r,[],[O])},{label:p.eA.PRICING_TAB,disabled:aQ(r,[p.eA.DETAILS_TAB],[O,S])},{label:p.eA.ACCESS_TAB,disabled:aQ(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB],[O,S,k])},{label:p.eA.CHECKOUT_TAB,disabled:aQ(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB,p.eA.ACCESS_TAB],[O,S,k])},s?{label:p.eA.UPSELL_TAB,disabled:aQ(r,[p.eA.DETAILS_TAB,p.eA.PRICING_TAB,p.eA.ACCESS_TAB,p.eA.CHECKOUT_TAB],[O,S,k])}:null,{label:p.eA.POST_PURCHASE_TAB,disabled:aQ(r,(0,b.compact)([p.eA.DETAILS_TAB,p.eA.PRICING_TAB,p.eA.CHECKOUT_TAB,s?p.eA.UPSELL_TAB:null,p.eA.ACCESS_TAB]),[O,S,k,N])},{label:p.eA.TRACKING_TAB,disabled:!0}])},[s,r,k,O,N,S]),shouldBlockSubmitButton:o}},aJ=function(e){var t=e.setActiveTab,r=y();return{handleTabClick:function(e){t(e)},tabOptions:(0,l.useMemo)(function(){return(0,b.compact)([{label:p.eA.DETAILS_TAB},{label:p.eA.PRICING_TAB},{label:p.eA.ACCESS_TAB},{label:p.eA.CHECKOUT_TAB},r?{label:p.eA.UPSELL_TAB}:null,{label:p.eA.POST_PURCHASE_TAB},{label:p.eA.TRACKING_TAB},{label:p.eA.WORKFLOWS_TAB}])},[r]),shouldBlockSubmitButton:!1}},a$=function(e){var t,r=e.activeTab,n=e.setActiveTab,i=e.mutation,o=e.isSubmitting,a=e.currentPaywallStatus,l=e.requiresCurrency,c=e.canChangeCurrency,d=e.hasSubscribers,f=(0,u.wh)().currentCommunitySettings;return(0,s.jsx)(aW,{activeTab:r,setActiveTab:n,usePaywallFormContentHook:a?aJ:aK,mutation:i,isSubmitting:o,currentPaywallStatus:a,requiresCurrency:l,canChangeCurrency:c,workflowsEnabled:null!=(t=null==f?void 0:f.upgrade_flows_for_workflows_paywalls_enabled)&&t,hasSubscribers:d})},aX=function(e){var t=(0,z.pm)(),r=t.success,n=t.error,i=(0,c.dd)(),o=(0,N.useMutation)(function(e){return I.i.updateMemberAccess(e)}),a=o.isLoading;return{isOpen:i.visible,isSubmitting:a,onClose:function(){o.isLoading||i.hide()},handleSubmit:function(){o.mutate(e,{onSuccess:function(){r((0,g.t)("settings.paywalls.alerts.success.update_access_member")),i.hide().then(function(){return i.remove()})},onError:function(){n("settings.paywalls.alerts.error.action_failed"),i.hide().then(function(){return i.remove()})}})}}},aY=function(e){var t=aX(e.paywallId),r=t.isOpen,n=t.isSubmitting,i=t.onClose,o=t.handleSubmit;return(0,s.jsxs)(eu.c,{isOpen:r,title:(0,g.t)("settings.paywalls.modal_update_access_member.title"),onClose:i,cancelText:(0,g.t)("settings.paywalls.modal_update_access_member.only_new_members"),onConfirm:o,confirmVariant:"primary",confirmText:(0,g.t)("settings.paywalls.modal_update_access_member.all_members"),disabled:n,children:[(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)("settings.paywalls.modal_update_access_member.description")}),(0,s.jsx)("br",{}),(0,s.jsx)(es.Z.BodyMd,{children:(0,g.t)("settings.paywalls.modal_update_access_member.description_warning")})]})},a0=c.gk.create(function(e){return(0,s.jsx)(aY,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),a1=r(442481);function a2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var a3=function(e){return e.filter(function(e){return e.checked||e.id}).map(function(e){return{id:e.id,paywall_price_id:e.paywall_price_id,destroy:e.destroy,checked:e.checked}})},a6=Object.assign(function(e){if(e&&0!==e.length){var t={};return e.forEach(function(e){var r="".concat(e.paywall_offered_id);if(["type","subtype","status","paywall_offered_id","all_paywall_offered_prices","paywall_offer_prices_attributes"].every(function(t){return void 0!==e[t]})){var n,i,o,a,s=t[r]||{},l=e.paywall_coupon_enabled?{paywall_coupon_id:e.paywall_coupon_id}:{};t[r]=(o=a2({id:e.id||s.id,type:e.type,subtype:e.subtype,status:e.status,destroy:e.destroy},l),a=a={paywall_offered_id:e.paywall_offered_id,all_paywall_offered_prices:!!e.all_paywall_offered_prices,paywall_offer_prices_attributes:a3((n=s.paywall_offer_prices_attributes||[],i=e.paywall_offer_prices_attributes,0===n.length?i:n.map(function(e){var t=i.find(function(t){return e.paywall_price_id&&t.paywall_price_id===e.paywall_price_id});return a2({},e,t)})))},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o)}}),Object.values(t)}},{paywall_offer_prices_attributes:a3});function a5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function a4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a7=function(e){return e.tmp_id?e:e._destroy?{id:e.id,_destroy:1}:e._updated?{id:e.id,preferred:e.preferred}:null},a9=function(e){var t=e.name,r=e.headline,n=e.quote;return[void 0,null,""].includes(t)&&t===r&&r===n?null:e},a8=function(e){var t,r,n={paywall_group_id:(null==e?void 0:e.enable_subscription_group)?e.paywall_group_id:null},i=e.paywall_customization_attributes||{};return{publish:e.publish,paywall:a4(a5({},e,n),{stripe_prices_attributes:e.stripe_prices_attributes.map(a7).filter(function(e){return e}),paywall_offers_attributes:a6(e.paywall_offers_attributes),paywall_customization_attributes:a4(a5({},i),{reduced_price_properties:nd.z.serializeReducedPriceProperties(i.reduced_price_properties),price_callout_properties:nd.z.serializePriceCalloutProperties(i.price_callout_properties),countdown_properties:nd.z.serializeCountdownProperties(i.countdown_properties),testimonial_properties:{enabled:(null==i||null==(t=i.testimonial_properties)?void 0:t.enabled)||!1,testimonials:(0,b.compact)(((null==i||null==(r=i.testimonial_properties)?void 0:r.testimonials)||[]).map(a9))}})})}},se=function(e,t){return null==e||0===e.length?[function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t)]:e},st=function(e){var t=e.reducedPriceProperties,r=e.paywallParam;return{prices:(0,tY.Ll)((null==r?void 0:r.stripe_prices_attributes)||[],(null==t?void 0:t.prices)||[],null==r?void 0:r.currency)}},sr=function(e){var t,r;return{enabled:null!=(t=null==e?void 0:e.enabled)&&t,title:null!=(r=null==e?void 0:e.title)?r:(0,g.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.title_placeholder"),benefits:se(null==e?void 0:e.benefits,tY.Wt)}},sn=function(e){var t;return{enabled:null!=(t=null==e?void 0:e.enabled)&&t,testimonials:se(null==e?void 0:e.testimonials,tY.hZ)}},si=function(e){var t;return{enabled:null!=(t=null==e?void 0:e.enabled)&&t,badges:se(null==e?void 0:e.badges,tY.uf)}},so=function(e){var t,r,n;return{enabled:null!=(n=null==e?void 0:e.enabled)&&n,countdown_type:(null==e?void 0:e.countdown_type)||t0.sI.REMAINING_TIME,remaining_time:(null==e?void 0:e.remaining_time)||tY.V5,remaining_time_interval:"minutes",finish_at:(null==e?void 0:e.finish_at)?new Date(null==e?void 0:e.finish_at).toString():new Date().toString(),displayed_text:(null==e?void 0:e.displayed_text)||(0,g.t)("settings.paywalls.modal.tabs.checkout.builder.countdown.fields.displayed_text_default"),action:{action_type:(null==e||null==(t=e.action)?void 0:t.action_type)||t0.KW.DO_NOTHING,redirect_to:(null==e||null==(r=e.action)?void 0:r.redirect_to)||""}}},sa=function(e){var t=e.priceCalloutProperties,r=e.paywallParam,n=e.brandColor;return{callout_color:(null==t?void 0:t.callout_color)||(null==n?void 0:n.light)||tY.Um,prices:(0,tY.bB)((null==r?void 0:r.stripe_prices_attributes)||[],(null==t?void 0:t.prices)||[])}},ss=r(159855);function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function su(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var sd=function(e){var t=e.paywallCustomization,r=e.paywallParam,n=e.brandColor;return su(sc({},t||{}),{reduced_price_properties:st({reducedPriceProperties:null==t?void 0:t.reduced_price_properties,paywallParam:r}),countdown_properties:so(null==t?void 0:t.countdown_properties),benefit_properties:sr(null==t?void 0:t.benefit_properties),testimonial_properties:sn(null==t?void 0:t.testimonial_properties),badge_properties:si(null==t?void 0:t.badge_properties),price_callout_properties:sa({priceCalloutProperties:null==t?void 0:t.price_callout_properties,paywallParam:r,brandColor:n})})},sf=function(){var e,t=(0,u.nT)().records,r=function(e,r){var n=function(e){if(Array.isArray(e))return sl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sl(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sl(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return t.forEach(function(e){r.includes(e.space_group_id)&&n.push(e.id)}),Array.from(new Set(n))},n=(0,u.wh)(),i=n.currentCommunitySettings,o=n.currentCommunity,a=null==i?void 0:i.access_groups_enabled,s=null==o||null==(e=o.prefs)?void 0:e.brand_color;return{getDefaultValues:function(e){var t,n,i,o={paywall_offers_attributes:[],trial_days:0,trial_requires_card:!1,can_be_repurchased:!1,stripe_prices_attributes:[],mobile_price_packages_attributes:[],all_spaces:!1,auto_apply_coupon:!1,space_group_ids:[],space_ids:[],redirect_url_enabled:!1,thank_you_page_enabled:!0,post_purchase_email_enabled:!0,self_trial_cancelable:!1,mobile_paywall_resource_attributes:{id:null,processor_id:null},post_purchase_email_message:(0,g.t)("settings.paywalls.form.post_purchase_email_default_message_text"),post_purchase_email_meta:{subject:(0,g.t)("settings.paywalls.form.post_purchase_email_default_subject_text")},currency_id:"",conversion_tracking_js_code:"",access_groups_enabled:a,access_groups:[],paywall_customization_attributes:sc({},sd({brandColor:s}))};if(!e)return o;var l=nC(e.checkout_path);return su(sc({},o,e),{auto_apply_coupon:l,redirect_url_enabled:!!(null==e?void 0:e.redirect_url),enable_trial:(null==e?void 0:e.trial_days)>0,enable_subscription_group:!!(null==e?void 0:e.paywall_group_id),space_ids:r(e.space_ids,e.space_group_ids),space_group_ids:null!=(n=e.space_group_ids)?n:[],currency_id:null!=(i=null==e||null==(t=e.currency)?void 0:t.id)?i:"",access_groups_enabled:null==e?void 0:e.access_groups_enabled,access_groups:(0,ss.tu)(null==e?void 0:e.access_group_sources),paywall_customization_attributes:sc({},sd({paywallCustomization:null==e?void 0:e.paywall_customization,paywallParam:e,brandColor:s}))})}}};function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sm(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var sb=function(e,t,r,n,i,o){if(t===p.eA.DETAILS_TAB)e(p.eA.PRICING_TAB);else if(t===p.eA.PRICING_TAB)e(p.eA.ACCESS_TAB);else if(t===p.eA.ACCESS_TAB)e(p.eA.CHECKOUT_TAB);else if(t===p.eA.CHECKOUT_TAB&&i)e(p.eA.UPSELL_TAB);else if(t!==p.eA.CHECKOUT_TAB||i){if(t===p.eA.UPSELL_TAB)e(p.eA.POST_PURCHASE_TAB);else if(t===p.eA.POST_PURCHASE_TAB)e(p.eA.TRACKING_TAB);else if(t===p.eA.TRACKING_TAB)return void r.mutateAsync(a8(n)).then(function(e){o(e)})}else e(p.eA.POST_PURCHASE_TAB)},sh=function(e){var t=e.paywall,r=e.refetchPaywalls,n=e.onClose,i=e.isModalVisible,o=e.initialTab,a=void 0===o?p.eA.DETAILS_TAB:o,s=sp((0,l.useState)(a),2),u=s[0],d=s[1],f=sp((0,l.useState)(null==t?void 0:t.status),2),m=f[0],b=f[1],h=(0,c.dd)(a0).show,v=sf().getDefaultValues,g=y(),_=er().mutations.fetchAndBuildInitialDataMutation;(0,l.useEffect)(function(){i||d(a),b(null==t?void 0:t.status)},[i,a,null==t?void 0:t.status]);var x=(0,a1.B)({updateCallback:function(e){var t;r(),b(e.status),(null==(t=e.policies)?void 0:t.can_update_all_members_access)&&(null==e?void 0:e.access_to_content_changed)&&h({paywallId:e.id})},createCallback:function(e){n(),r(),b(e.status)},paywall:t}),j=x.createMutation,w=x.updateMutation,O=function(e,t){var r=v(e);_.mutate(r.id,{onSuccess:function(e){var n,i;t((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),i=i={paywall_offers_attributes:e},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n))}})};return{getDefaultValues:v,activeTab:u,setActiveTab:d,handleSubmit:function(e,t){var r=t.reset;if(e.id)return void w.mutateAsync(a8(e)).then(function(e){O(e,r)}).catch(function(e){console.error(e)});sb(d,u,j,e,g,function(e){return O(e,r)})},mutation:t?w:j,currentPaywallStatus:m}},sy=function(e){var t,r,n,i,o=e.paywall,a=e.refetchPaywalls,b=e.initialTab,h=(0,c.dd)(),y=(0,u.wh)(),v=y.currentCommunitySettings,g=y.isLoading,_=(0,l.useRef)(function(){return!0}),x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(!e||_.current())&&(h.hide(),h.remove())},j=sh({initialTab:b,paywall:o,refetchPaywalls:a,onClose:x,isModalVisible:h.visible}),w=j.getDefaultValues,O=j.setActiveTab,S=j.activeTab,k=j.handleSubmit,N=j.mutation,P=j.currentPaywallStatus;if(g)return(0,s.jsx)(m.a,{});var C=null!=(n=null==o||null==(t=o.policies)?void 0:t.requires_currency)?n:!!(null==v?void 0:v.currencies_enabled),A=null==(i=null==o||null==(r=o.policies)?void 0:r.can_change_currency)||i,I=S===p.eA.WORKFLOWS_TAB,T=!!((null==o?void 0:o.id)&&((null==o?void 0:o.total_active_onetime_subscribers)!="0"||(null==o?void 0:o.total_active_recurring_subscribers)!="0"));return(0,s.jsx)(d.x,{isOpen:h.visible,contentPortalId:"paywall-admin-modal",onClose:function(){return x(!0)},size:"screen",children:(0,s.jsx)(f.l,{onSubmit:I?function(){}:k,"data-testid":"paywall-admin-modal",defaultValues:w(o),className:"h-max-screen-dynamic lg:h-full",formClassName:"h-max-screen-dynamic h-full overflow-hidden",children:function(e){var t=e.formState.isSubmitting;return(0,s.jsx)(ea,{onClose:x,validToClose:_,children:(0,s.jsx)(a$,{activeTab:S,setActiveTab:O,isSubmitting:t,mutation:N,currentPaywallStatus:P,requiresCurrency:C,canChangeCurrency:A,hasSubscribers:T})})}})})},sv=c.gk.create(function(e){return(0,s.jsx)(sy,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),sg=function(){return(0,c.dd)(sv)}},382444:function(e,t,r){"use strict";r.d(t,{d:()=>o});var n=r(552676),i=r(739792),o=function(e){var t=e.children;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t,(0,n.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.generic.call_support")}})]})}},553525:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(552676),i=r(739792),o=r(595342),a=r(647372),s=function(e){var t=e.paymentProcessor;if(!(null==t?void 0:t.is_restricted_soon))return null;var r="warning",s=(0,n.jsx)(o.O,{variant:r,children:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.status")}),l=(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.title"),c=(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.description")}}),(0,n.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_soon.call_support")}})]});return(0,n.jsx)(a.t,{sentiment:r,badge:s,title:l,description:c})}},588612:function(e,t,r){"use strict";r.d(t,{q:()=>B});var n=r(552676),i=r(739792),o=r(39905),a=r(767900),s=r(757105),l=r(434519),c=r(60878),u="stripe-onboarding-flow-v2",d=["US","BR","GB","AU","CA","DE","FR"],f=["IN","MY","TH"],m=["AL","AG","AR","AM","AT","BS","BH","BE","BO","BA","BG","KH","CL","CO","CR","CI","HR","CY","CZ","DK","DO","EC","EG","SV","EE","ET","FI","GM","GH","GR","GT","GY","HK","HU","IS","ID","IE","IL","IT","JM","JP","JO","KE","KW","LV","LI","LT","LU","MO","MG","MT","MU","MD","MN","MX","MA","NA","NL","NZ","NG","MK","NO","OM","PA","PY","PE","PH","PL","PT","QA","RO","RW","SA","SN","RS","SI","SG","SK","ZA","KR","ES","LK","LC","SE","CH","TW","TZ","TT","TN","TR","AE","UY","UZ","VN"],p=r(131906),b=r(814640),h=function(e){var t=e.onSuccess,r=e.onError,n=(0,i.t)("settings.paywalls.alerts.error.action_failed"),o=(0,c.pm)().error,a=(0,p.useMutation)(function(e){return b.p.create(e)}),s=a.mutate,l=a.isLoading,u=a.isSuccess,d=function(e){window.location.href=e.url},f=function(e){o((null==e?void 0:e.message)||n)};return{onSubmit:function(e){s(e,{onSuccess:t||d,onError:r||f})},isLoading:l,isSuccess:u}},y=r(275271),v=r(619803),g=r.n(v),_=r(227851),x=r(530133),j=r(172667),w=r(900795),O=r(664904),S=r(381636),k="stripe_onboarding_modal",N=function(e){var t,r,o=e.countries,s=e.isDisabled,c=e.defaultValue,u=(0,l.UV)().contentPortalElement;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 py-4",children:[(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(w.w,{content:(0,i.t)([k,"subtitles"])[0]})}),(0,n.jsx)(S.Z.BodySm,{color:"text-default",children:(0,n.jsx)(w.w,{content:(0,i.t)([k,"subtitles"])[1]})}),(0,n.jsx)(a.l.TextSelect,{name:"country",options:o,label:null,initialValue:c,disabled:s,appendTo:u,rules:{validate:{countryIsSupported:function(e){return!f.includes(e.toUpperCase())}}},popperOptions:{modifiers:[(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},O.Z),r=r={phase:"afterWrite"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)]}})]})},P=r(957363),C=r(318943),A=function(e){var t=e.children;return(0,n.jsxs)(C.v,{className:"flex flex-row gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(P.JO,{type:"information-outline",size:24})}),(0,n.jsx)(S.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},I=function(e){var t=e.isDisabled,r=e.onClose;return(0,n.jsx)(l.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,n.jsx)(o.z,{type:"button",variant:"secondary",onClick:r,disabled:t,children:(0,i.t)("cancel")}),(0,n.jsx)(o.z,{form:u,type:"submit",variant:"circle",disabled:t,children:(0,i.t)("continue")})]})})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e){var t=e.isLoading,r=e.onClose,o=e.defaultCountry,a=(0,_.Gc)(),s=a.watch,c=a.formState.isSubmitSuccessful,u=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,p=(0,y.useMemo)(function(){var e=d.map(function(e){return{label:(0,i.t)([j.p,e]),value:e.toLowerCase()}}),t=E(m).concat(E(f)).map(function(e){return{label:(0,i.t)([j.p,e]),value:e.toLowerCase()}}).sort(function(e,t){return e.label>=t.label?1:-1});return E(e).concat(E(t))},[]),b=s("country"),h=f.includes(b.toUpperCase()),v=t||c,O=t||c||h;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.u_.Body,{className:g()({"!px-5":u}),children:[(0,n.jsx)(N,{countries:p,isDisabled:v,defaultValue:o}),h&&(0,n.jsx)(A,{children:(0,n.jsx)(w.w,{content:(0,i.t)(["stripe_onboarding_modal","country_not_supported"],{country:(0,i.t)([j.p,b.toUpperCase()])})})})]}),(0,n.jsx)(I,{isDisabled:O,onClose:r})]})},D=function(){var e=(0,s.dd)(),t=(0,c.pm)().error,r=h({onError:function(e){t(null==e?void 0:e.message),b()}}),o=r.onSubmit,d=r.isLoading,f=r.isSuccess,m=function(){var e,t,r=null==(e=window)?void 0:e.CLOUDFLARE_COUNTRY_CODE,n=(null==(t=window)?void 0:t.locale)==="pt"?"BR":null;return(r||n||"US").toLowerCase()},p=d||f,b=function(){p||e.remove()},y={country:m()};return(0,n.jsx)(a.l,{id:u,onSubmit:o,defaultValues:y,children:(0,n.jsxs)(l.u_,{isOpen:e.visible,onClose:b,contentPortalId:"stripe-onboarding-business-modal",children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsx)(l.u_.Title,{size:"md",children:(0,i.t)(["stripe_onboarding_modal","title"])}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:b})})]}),(0,n.jsx)(L,{isLoading:d,onClose:b,defaultCountry:m()})]})]})})},M=function(){var e=(0,s.dd)(s.gk.create(D)),t=(0,i.t)("settings.paywalls.processor_status_v2.onboarding.subtitles"),r=h({}).onSubmit;return(0,n.jsxs)(a.l,{onSubmit:r,defaultValues:{forceForm:!0},formClassName:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[0]}}),(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[1]}}),(0,n.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[2]}})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,n.jsx)(o.z,{type:"button",variant:"circle","data-testid":"stripe-connect",onClick:function(){e.show()},children:(0,n.jsx)("span",{children:(0,i.t)("settings.paywalls.buttons.connect")})}),(0,n.jsx)(o.z,{type:"button",variant:"secondary",onClick:function(){window.open("https://help.circle.so/c/paywall-setup/","_blank")},children:(0,i.t)("learn_more")})]})]})},R=r(647372),B=function(){var e=(0,i.t)("settings.paywalls.processor_status_v2.onboarding.title");return(0,n.jsxs)("div",{className:"flex size-full flex-col gap-y-4 self-center md:w-3/4",children:[(0,n.jsx)(R.t,{sentiment:"default",title:e,description:(0,n.jsx)(M,{})}),(0,n.jsx)("p",{className:"text-default text-xs",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.onboarding.stripe_regulations_description")}})]})}},708002:function(e,t,r){"use strict";r.d(t,{a:()=>f});var n=r(552676),i=r(131906),o=r(739792),a=r(814640),s=r(39905),l=r(595342),c=r(60878),u=r(382444),d=r(647372),f=function(){var e=(0,o.t)("settings.paywalls.alerts.error.action_failed"),t=(0,c.pm)().error,r=(0,i.useMutation)(function(){return a.p.refresh()}),f=r.mutate,m=r.isLoading,p="danger",b=(0,n.jsx)(l.O,{variant:p,children:(0,o.t)("settings.paywalls.processor_status_v2.restricted.status")}),h=(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(u.d,{children:(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,o.t)("settings.paywalls.processor_status_v2.restricted.description")}})}),(0,n.jsx)("div",{children:(0,n.jsx)(s.z,{variant:"circle",onClick:function(){f(void 0,{onSuccess:function(e){window.location.href=e.url},onError:function(r){t((null==r?void 0:r.message)||e)}})},disabled:m,children:(0,o.t)("settings.paywalls.buttons.refresh")})})]});return(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,n.jsx)(d.t,{sentiment:p,title:(0,o.t)("settings.paywalls.processor_status_v2.restricted.title"),badge:b,description:h})})}},634321:function(e,t,r){"use strict";r.d(t,{c:()=>l});var n=r(552676),i=r(739792),o=r(441342),a=r(595342),s=r(647372),l=function(){var e=(0,o.wh)().currentCommunitySettings,t=(0,n.jsx)(a.O,{variant:"warning",children:(0,i.t)("settings.paywalls.processor_status_v2.restricted.status")}),r=(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.description")}});return(null==e?void 0:e.paywalls_for_restricted_country_enabled)?null:(0,n.jsx)(s.t,{sentiment:"warning",title:(0,i.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.title"),badge:t,description:r})}},647372:function(e,t,r){"use strict";r.d(t,{t:()=>a});var n=r(552676),i=r(701168),o=r(381636),a=function(e){var t=e.sentiment,r=e.title,a=e.badge,s=e.description,l=(0,i.A)("md:border md:border-primary md:rounded-lg md:p-8 bg-primary",{"flex flex-row":"default"!==t});return(0,n.jsx)("div",{className:l,"data-testid":"payment-processor-status",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[a&&(0,n.jsx)("div",{children:a}),r&&(0,n.jsx)(o.Z.TitleMd,{"data-testid":"title",children:r}),s&&(0,n.jsx)("div",{"data-testid":"description",children:s})]})})}},284484:function(e,t,r){"use strict";r.d(t,{t:()=>c});var n=r(552676),i=r(739792),o=r(914899),a=r(595342),s=r(382444),l=r(647372),c=function(e){var t=e.status,r=t==o.Q_.REJECTED?"danger":"warning",c=(0,n.jsx)(a.O,{variant:r,children:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".status"))}),u=(0,n.jsx)(s.d,{children:(0,n.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".description"))}})});return(0,n.jsx)(l.t,{sentiment:r,badge:c,title:(0,i.t)("settings.paywalls.processor_status_v2.".concat(t,".title")),description:u})}},282895:function(e,t,r){"use strict";r.d(t,{G:()=>l});var n=r(552676),i=r(701168),o=r(845201),a=r(381636),s=function(e){var t=e.children;return(0,n.jsx)(a.Z.TitleXl,{truncate:!0,weight:"font-bold",children:t})},l=function(e){var t=e.title,r=e.titleNode,a=e.subtitle,l=e.subtitleNode,c=e.className;return(0,n.jsxs)("div",{className:(0,i.A)("flex flex-col gap-y-2",c),children:[t&&(0,n.jsx)(s,{children:t}),void 0===r?null:r,a&&(0,n.jsx)(o.k,{children:a}),void 0===l?null:l]})}},845201:function(e,t,r){"use strict";r.d(t,{k:()=>o});var n=r(552676),i=r(381636),o=function(e){var t=e.children;return(0,n.jsx)(i.Z.BodyMd,{color:"text-default",children:t})}},743032:function(e,t,r){"use strict";r.d(t,{J6:()=>o,Rx:()=>s,eA:()=>i,nh:()=>a});var n=r(739792),i={DETAILS_TAB:(0,n.t)("settings.paywalls.modal.tabs.details.title"),CHECKOUT_TAB:(0,n.t)("settings.paywalls.modal.tabs.checkout.title"),UPSELL_TAB:(0,n.t)("settings.paywalls.modal.tabs.upsell.title"),PRICING_TAB:(0,n.t)("settings.paywalls.modal.tabs.pricing.title"),ACCESS_TAB:(0,n.t)("settings.paywalls.modal.tabs.access.title"),POST_PURCHASE_TAB:(0,n.t)("settings.paywalls.modal.tabs.post_purchase.title"),TRACKING_TAB:(0,n.t)("settings.paywalls.modal.tabs.tracking.title"),WORKFLOWS_TAB:(0,n.t)("settings.paywalls.modal.tabs.workflows.title")},o={NOT_EXIST:"PAYMENT_PROCESSOR_NOT_EXIST",RESTRICTED:"PAYMENT_PROCESSOR_RESTRICTED",RESTRICTED_FOR_APPLICATION_FEES:"PAYMENT_PROCESSOR_RESTRICTED_FOR_APPLICATION_FEES",PENDING:"PAYMENT_PROCESSOR_PENDING",REJECTED:"PAYMENT_PROCESSOR_REJECTED",ENABLED:"PAYMENT_PROCESSOR_ENABLED"},a=[{title:(0,n.t)("settings.paywalls.list.form.display_name_label"),dataIndex:"displayName",key:"displayName"},{title:(0,n.t)("settings.paywalls.list.form.amount_label"),dataIndex:"preferred_price",key:"preferred_price"},{title:(0,n.t)("settings.paywalls.list.form.status_label"),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"},{title:" ",dataIndex:"actionMenu",key:"actionMenu"}],s="paywalls"},646844:function(e,t,r){"use strict";r.d(t,{l:()=>o});var n=r(914899),i=r(743032),o=function(e){var t=e.paymentProcessor,r=void 0;return(0,n.$1)(t).some(function(e){r||(r=e())}),{paymentProcessorStatus:null!=r?r:i.J6.ENABLED}}},442481:function(e,t,r){"use strict";r.d(t,{B:()=>j});var n=r(131906),i=r(739792),o=r(847373),a=r(757105),s=r(552676),l=r(497202),c=r(57851),u=r(476934),d=r(810116),f=r(957363),m=r(390431),p=r(431089),b="settings.paywalls.paywall_momentum_modal",h=a.gk.create(function(e){var t,r=e.paywall,n=e.onClose,o=(0,l.dd)(),a=(0,u.g)("paywall_momo"),h=(0,d.A)({templateKey:null!=(t=null==a?void 0:a.template_key)?t:"",isAutomationWorkflow:(null==a?void 0:a.template_type)==="dynamic"}),y=h.createFromTemplate,v=h.isLoading;return(0,s.jsx)(m.o,{isOpen:o.visible,onClose:function(){o.hide(),null==n||n()},title:(0,i.t)("".concat(b,".paywall_created")),description:(0,i.t)("".concat(b,".paywall_created_description"),{paywall_display_name:r.display_name}),isLoading:v,"data-testid":"paywall-momentum-modal",children:(0,s.jsx)(c.X,{title:(0,i.t)([b,"workflow_trigger_section.title"]),description:(0,i.t)([b,"workflow_trigger_section.description"]),children:(0,s.jsx)(p.K,{iconEl:(0,s.jsx)(f.JO,{type:"16-lightning-filled",size:16}),onClick:function(){y(void 0,{onSuccess:function(){o.hide()}})},disabled:v,children:(0,i.t)([b,"workflow_trigger_section.cta"])})})})}),y=r(969288),v=r(65766),g=r(60878),_=r(62750),x=function(){var e=(0,n.useQueryClient)();return{invalidatePaywallQueries:function(){e.invalidateQueries({queryKey:[_.lP]})}}},j=function(e){var t=e.createCallback,r=e.updateCallback,s=e.paywall,l=(0,g.pm)(),c=l.success,u=l.error,d=x().invalidatePaywallQueries,f=(0,i.t)("settings.paywalls.alerts.error.action_failed"),m=function(e,t,r){var n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];n&&c(t),r&&r(e),d()},p=function(e){u("string"==typeof(null==e?void 0:e.errorDetails)?null==e?void 0:e.errorDetails:f,{duration:"long"})},b=function(e){return{publish:e,paywall:{status:e?null==s?void 0:s.status:v.Tl.INACTIVE}}};return{updateMutation:(0,n.useMutation)(function(e){return o.i.updatePaywall(null==s?void 0:s.id,e)},{onSuccess:function(e){m(e,(0,i.t)("settings.paywalls.alerts.success.updated"),r)},onError:p}),createMutation:(0,n.useMutation)(function(e){return o.i.createPaywall(e)},{onSuccess:function(e,r){m(e,(0,i.t)("settings.paywalls.alerts.success.created"),t,!r.publish),r.publish&&a.gk.show(h,{paywall:e})},onError:p}),publishMutation:(0,n.useMutation)(function(){return o.i.updatePaywall(null==s?void 0:s.id,b(!0))},{onSuccess:function(e){m(e,(0,i.t)("settings.paywalls.alerts.success.published"),r,!1),(0,y._h)(s)||a.gk.show(h,{paywall:e})},onError:p}),archiveMutation:(0,n.useMutation)(function(){return o.i.updatePaywall(null==s?void 0:s.id,b(!1))},{onSuccess:function(e){return m(e,(0,i.t)("settings.paywalls.alerts.success.archived"),r)},onError:p}),deleteMutation:(0,n.useMutation)(function(){return o.i.deletePaywall(null==s?void 0:s.id)},{onSuccess:function(e){return m(e,(0,i.t)("settings.paywalls.alerts.success.deleted"),r)},onError:p})}}},753564:function(e,t,r){"use strict";r.d(t,{x:()=>i});var n=r(441342),i=function(){var e,t=(0,n.wh)().currentCommunity;return null==t||null==(e=t.policies)?void 0:e.is_paywall_tax_available}},735282:function(e,t,r){"use strict";r.d(t,{P:()=>s});var n=r(552676),i=r(619803),o=r.n(i);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r,i=e.children,s=e.className,l=e.displayView,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className","displayView"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}({className:o()("space__posts !pb-16 lg:!pb-6",a({},"space__posts--".concat(l),l),s),"data-testid":"post_section"},c),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},290161:function(e,t,r){"use strict";r.d(t,{v:()=>_});var n=r(275271),i=r(619803),o=r.n(i),a=r(903225),s=r(60589),l=r(547144),c=r(1892),u=r(261193),d=r(440274),f=r(441342),m=r(715731),p=r(624804),b=r(396354);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r=e.enabled,i=e.key,o=e.onLoadInEditMode,a=(0,b.t)().edit,s=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];(0,n.useEffect)(function(){c(!1)},[i]),(0,n.useEffect)(function(){r&&!l&&"true"===a&&(o(),c(!0))},[r,l,a,o])};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var _=function(){var e,t,r,i=(0,a.UO)(),b=i.postSlug,h=i.spaceSlug,_=(0,f.wh)().isLoading,x=(0,f.nT)(),j=(0,a.k6)(),w=(0,d.L)().show,O=x.helpers.findBy({slug:h}),S=(0,c.t)({spaceId:null==O?void 0:O.id,spaceSlug:h,postSlug:b}),k=(0,u.D)(),N=(0,m.I)(),P=!!(null==O?void 0:O.hide_right_sidebar)&&!(0,s.V5)(O),C=(e=(0,p.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return v(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=C[0],I=C[1];(0,n.useEffect)(function(){document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})},[null==S||null==(t=S.post)?void 0:t.id]);var T=o()("view-space view-space--".concat(null==(r=S.data)?void 0:r.space_id," view-space-in-group view-space-in-group--").concat(null==O?void 0:O.space_group_id)),E=k||S.isLoading||!S.data;y({enabled:!_&&!E,key:"".concat(h).concat(b),onLoadInEditMode:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,w({post:S.data,onPostChange:S.onPostChange})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)})})()}});var L=S.data?[[S.data.id]]:[];return{isLoading:E,isLoadingAppData:k,isIframeEmbed:N,space:O,postResource:S,bodyClassNames:T,hasRightSidebar:P,shouldShowEditPostModal:A,setShouldShowEditPostModal:I,perPagePostIds:L,onPostDestroy:function(){h&&j.push(l.RZ.show({spaceSlug:h}))},spacesContext:x,spaceSlug:h,postSlug:b}}},246407:function(e,t,r){"use strict";r.d(t,{h:()=>y});var n=r(552676),i=r(275271),o=r(347624),a=r(403697),s=r(283095),l=r(441342),c=r(392042),u=r.n(c),d=r(39905),f=r(957363),m=function(e){var t=e.children,r=e.className,i=e.hasIcon,o=e.id,a=e.isButton,s=e.linkName,l=e.render,c=e.showModal;return u()(l)?(0,n.jsx)(n.Fragment,{children:l({onClick:c})}):void 0!==a&&a?(0,n.jsxs)(d.z,{type:"button",className:r,id:o,onClick:c,"aria-haspopup":!0,large:!0,isFullRounded:!0,children:[void 0!==i&&i&&(0,n.jsx)(f.JO,{type:"plus"}),s||t]}):(0,n.jsx)("a",{className:r,id:o,onClick:c,href:"#new-post","aria-haspopup":!0,children:s||t})},p=r(7011);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t,r=e.bodyForEditor,c=void 0===r?"":r,u=e.children,d=e.className,f=e.currentSpaceId,b=e.hasIcon,y=e.id,v=e.isButton,g=e.linkName,_=e.maxZIndexEnabled,x=e.onSubmitSuccess,j=e.render,w=e.tiptapBodyForEditor,O=e.title,S=void 0===O?"":O,k=(0,l.wh)().isViewOnlyMasquerading,N=(0,o.r)(),P=h((0,i.useState)(!1),2),C=P[0],A=P[1],I=(0,l.L2)(),T=f||(null==I||null==(t=I.data)?void 0:t.id),E=(0,s.d)({cacheKey:a._7}).getPersistedFormFieldValues,L=h((0,i.useState)({space_id:T}),2),D=L[0],M=L[1];return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(m,{className:d,hasIcon:void 0!==b&&b,id:y,isButton:void 0===v||v,linkName:g,render:j,showModal:function(e){if(!k){e.preventDefault();var t,r,n=E();M((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n),r=r={name:S||(null==n?void 0:n.name),body_for_editor:c||(null==n?void 0:n.body),space_id:T||(null==n?void 0:n.space_id)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),N.show({spaceId:T,onSubmitSuccess:x,bodyForEditor:c,tiptapBodyForEditor:w})}},children:u}),C&&(0,n.jsx)(l.DW,{post:D,onPostChange:M,children:(0,n.jsx)(p.Y,{show:!0,closeModal:function(){A(!1),M({})},currentSpaceId:T,maxZIndexEnabled:void 0!==_&&_,onSubmitSuccess:x})})]},T)}},347624:function(e,t,r){"use strict";r.d(t,{r:()=>O});var n=r(552676),i=r(932699),o=r(739792),a=r(757105),s=r(986214),l=r(403697),c=r(441342),u=r(283095),d=function(e){var t;return void 0!==(null==e||null==(t=e.data)?void 0:t.id)},f=function(e){var t=e.spaceId,r=e.bodyForEditor,i=e.tiptapBodyForEditor,o=e.shouldSkipRedirectAfterSubmit,a=e.onSubmitSuccess,f=(0,c.L2)(),m=t||(d(f)?f.data.id:void 0),p=(0,(0,u.d)({cacheKey:l._7}).getPersistedFormFieldValues)(),b={id:null,space_id:m||(null==p?void 0:p.space_id),name:null==p?void 0:p.name,body_for_editor:r||(null==p?void 0:p.body),tiptap_body:i||(null==p?void 0:p.tiptap_body),cover_image:null==p?void 0:p.cover_image};return(0,n.jsx)(c.DW,{post:b,children:(0,n.jsx)(s.H,{shouldSkipRedirectAfterSubmit:o,onSubmitSuccess:a})})},m=r(843515),p=r(720987),b=r(313087),h=r(434519),y=r(257210),v=r(391149),g=r(856516),_=r(179895),x=r(706233),j=function(e){var t=e.spaceId,r=e.shouldSkipRedirectAfterSubmit,s=e.onSubmitSuccess,l=e.bodyForEditor,c=e.tiptapBodyForEditor,u=(0,a.dd)(),d=(0,m.L)().isDirty,j=(0,b.c)({shouldPrevent:d}),w=(0,_.Z)(),O=(0,x.d)(),S=(0,g.d)(),k=w.visible||O.visible||S.visible;return(0,p.u)({disabled:k,onClose:j}),(0,n.jsxs)(h.u_,{isOpen:u.visible,onClose:i.noop,className:"quick-post-v2-modal w-full max-w-3xl","aria-label":(0,o.t)("quick_post_v2.title"),children:[(0,n.jsx)(h.u_.Overlay,{onClick:j}),(0,n.jsx)(v.H,{children:(0,n.jsx)(y._x,{children:(0,n.jsx)(f,{spaceId:t,bodyForEditor:l,tiptapBodyForEditor:c,shouldSkipRedirectAfterSubmit:r,onSubmitSuccess:s})})})]})},w=a.gk.create(function(e){return(0,n.jsx)(j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),O=function(){return(0,a.dd)(w)}},54738:function(e,t,r){"use strict";r.d(t,{G:()=>n});var n={ALL:"all",ACTIVE:"active",ARCHIVED:"archived"}},748125:function(e,t,r){"use strict";r.d(t,{n:()=>l});var n=r(932699),i=r(26758),o=r(935975),a=r(656317),s=r(54738),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.G.ALL,t=(0,a.Xt)().queryParams,r=(0,i.v)(),l=r.setPage,c=r.initialPage,u=(0,n.omit)(t,["page","status"]),d=(0,n.isNil)(e)?u:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({status:e},u);return{accessGroupsInfiniteQuery:(0,o.M)({perPage:o.L,initialPage:c,options:{keepPreviousData:!1},filters:d}),initialPage:c,setPage:l}}},659986:function(e,t,r){"use strict";r.d(t,{d:()=>p,x:()=>b});var n=r(552676),i=r(275271),o=r(932699),a=r(43226),s=r.n(a),l=r(756468),c=r(514598);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||f(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}var m=(0,i.createContext)({accessGroup:{id:0,name:"",space_group_ids:[],space_ids:[],has_members:!1,status:"active"},updateFiltersToAddMembers:s(),selectedMemberIds:[],setSelectedMemberIds:s(),clearSelectedMemberIds:s(),addMemberId:s(),updateTotalMembersToProcess:s(),totalMembersToProcess:0,shouldBlockActions:!1,setShouldBlockActions:s(),filtersToProcessMembers:{},setFiltersToProcessMembers:s(),clearMemberIdsAndFilters:s(),showMemberProfileEdit:s()});m.displayName="AccessGroupDataContext";var p=function(){var e=(0,i.useContext)(m);return(0,l.Z)(e,"useAccessGroupData must be used within a AccessGroupDataContextProvider"),e};function b(e){var t=e.accessGroup,r=e.children,a=d((0,i.useState)([]),2),s=a[0],l=a[1],p=d((0,i.useState)(!1),2),b=p[0],h=p[1],y=d((0,i.useState)(0),2),v=y[0],g=y[1],_=d((0,i.useState)([]),2),x=_[0],j=_[1],w=(0,i.useCallback)(function(){l([])},[l]),O=(0,i.useCallback)(function(e){l(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return u(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||f(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},[l]),S=(0,i.useCallback)(function(e){(0,o.isEqual)(e,x)||(w(),j(e))},[x,w]),k=(0,i.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s.length;t>0?t!=v&&g(s.length):e!=v&&g(e)},[s.length,v]),N=(0,i.useCallback)(function(){l([]),j([])},[l,j]),P=(0,c.H)().showMemberProfileEdit;return(0,n.jsx)(m.Provider,{value:{accessGroup:t,selectedMemberIds:s,setSelectedMemberIds:l,clearSelectedMemberIds:w,addMemberId:O,updateFiltersToAddMembers:S,updateTotalMembersToProcess:k,totalMembersToProcess:v,shouldBlockActions:b,setShouldBlockActions:h,setFiltersToProcessMembers:j,filtersToProcessMembers:x,clearMemberIdsAndFilters:N,showMemberProfileEdit:P},children:r})}},138669:function(e,t,r){"use strict";r.d(t,{D:()=>O});var n=r(552676),i=r(757105),o=r(739792),a=r(663676),s=r(495727),l=r(381636),c=r(131906),u=r(903225),d=r(203176),f=r(547144),m=r(22319),p=r(60878),b=r(748125),h=function(e){var t=e.hideModal,r=(0,b.n)().accessGroupsInfiniteQuery,n=(0,p.pm)(),i=(0,d.L)().destroyAccessGroup,a=(0,u.k6)();return(0,c.useMutation)(function(e){return i(e.accessGroupId)},{onSuccess:function(){m.Eh.invalidateQueries(r.queryKey[0]),n.success((0,o.t)("settings.access_groups.admin.messages.archived")),a.push(f.Lo.members.access_groups),t()},onError:function(e){return n.error(e.message)}})},y="settings.access_groups.admin.form.archive",v=function(e){var t,r,i=e.accessGroup,c=e.isOpen,u=e.onClose,d=h({hideModal:u}),f=d.mutate,m=d.isLoading,p=null==i||null==(t=i.policies)?void 0:t.can_destroy;return(0,n.jsx)(s.V,{title:(0,o.t)([y,"title"],{name:i.name}),isOpen:c,onClose:u,onCancel:u,confirmText:(0,o.t)([y,"action"]),confirmVariant:"danger",isDisabled:m||!p,onConfirm:function(){f({accessGroupId:i.id})},children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(l.Z.BodyMd,{children:i.has_members?(0,o.t)([y,"archive_with_members.count"],{count:(0,a.HA)(null!=(r=i.total_members)?r:0)}):(0,o.t)([y,"are_you_sure"])}),(0,n.jsx)(l.Z.BodyMd,{children:(0,o.t)([y,"active_workflows_notice"])})]})})},g=r(963549),_="settings.access_groups.admin.form.archive",x=function(e){var t,r,i,a=e.accessGroup,s=e.isOpen,c=e.onClose;return(0,n.jsx)(g.c,{title:(0,o.t)([_,"title"],{name:a.name}),isOpen:s,onClose:c,disabled:!0,onConfirm:function(){},confirmText:(0,o.t)([_,"action"]),confirmVariant:"danger",children:(0,n.jsxs)(n.Fragment,{children:[(0,o.t)([_,"remove_entry_points_body"]),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:(0,o.t)([_,"entry_points"])})}),null==a||null==(i=a.running_sources)||null==(r=i.map(function(e){return e.record_display_name}))||null==(t=r.filter(function(e){return e}))?void 0:t.join(", ")]})})},j=function(e){var t=e.accessGroup,r=(0,i.dd)();return t.running_sources&&t.running_sources.length>0?(0,n.jsx)(x,{accessGroup:t,isOpen:r.visible,onClose:r.hide}):(0,n.jsx)(v,{accessGroup:t,isOpen:r.visible,onClose:r.hide})},w=i.gk.create(function(e){var t=e.accessGroup;return(0,n.jsx)(j,{accessGroup:t})}),O=function(){return(0,i.dd)(w)}},271660:function(e,t,r){"use strict";r.d(t,{c:()=>th});var n=r(552676),i=r(903225),o=r(437416),a=r(659986),s=r(739792),l=r(775148),c=r(381636),u=r(144102),d=r(957363),f=r(39905),m=r(943544),p=r(138669),b=r(652621),h="settings.access_groups.admin.form.actions",y=function(){var e=(0,a.d)().accessGroup,t=(0,b.e)(),r=(0,p.D)();return(0,n.jsxs)(m.Lt,{button:(0,n.jsxs)(f.z,{type:"button",variant:"tertiary",className:"flex !pr-4",large:!0,children:[(0,s.t)([h,"title"]),(0,n.jsx)(d.JO,{type:"caret-down-bold",size:16,className:"ml-1"})]}),menuButtonEl:"div",children:[(0,n.jsx)(m.Lt.ItemWithLink,{linkType:"button",onClick:function(){return t.show({accessGroup:e})},children:(0,n.jsx)(m.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"rename"])})})}),(0,n.jsx)(m.Lt.ItemWithLink,{linkType:"button",onClick:function(){return r.show({accessGroup:e})},children:(0,n.jsx)(m.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"archive"])})})}),(0,n.jsx)(m.Lt.ItemWithLink,{onClick:function(){return(0,u.g)({entityId:e.id,entityType:"AccessGroup"}).then(function(e){return window.open(e.masquerade_url,"_self")}).catch(function(e){return console.error(e)})},children:(0,n.jsx)(m.Lt.IconContainer,{children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)([h,"view_as"])})})})]})},v=r(767900),g=r(275271),_=r(932699),x=r(227851),j=r(222294),w=r(510060),O=function(e){return{id:e.id,name:e.name,spaces:[]}};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r=e.defaultValues,i={options:(0,w.zo)({serializeSpaceGroup:O,serializeSpace:w.lV}).options}.options,a=(0,x.qo)(),l=(t=(0,g.useState)(!0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1];return(0,g.useEffect)(function(){d((0,_.isEqual)((0,_.sortBy)(a.space_ids),(0,_.sortBy)(r.space_ids))&&(0,_.isEqual)((0,_.sortBy)(a.space_group_ids),(0,_.sortBy)(r.space_group_ids)))},[a,r]),(0,n.jsxs)(o.x.Body,{className:"h-full overflow-y-auto",children:[(0,n.jsxs)("div",{className:"mb-4 mt-14 h-full overflow-y-auto px-8 pb-20",children:[(0,n.jsx)(c.Z.TitleMd,{children:(0,s.t)("settings.access_groups.admin.modal.access.title")}),(0,n.jsx)(c.Z.LabelMd,{color:"text-light",children:(0,s.t)("settings.access_groups.admin.modal.access.description")}),(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsxs)(j.i,{options:i,className:"flex-auto",children:[(0,n.jsx)(j.i.Header,{children:(0,n.jsx)(j.i.SearchBar,{})}),(0,n.jsxs)(j.i.Body,{className:"overflow-y-auto",children:[(0,n.jsxs)(j.i.ListHeader,{className:"min-h-[3rem]",children:[(0,n.jsx)(j.i.ListHeaderColumnNoAccess,{}),(0,n.jsx)(j.i.ListHeaderColumnAccessGranted,{})]}),(0,n.jsxs)(j.i.ListContainer,{children:[(0,n.jsx)(j.i.ListMobile,{}),(0,n.jsx)(j.i.ListNoAccess,{}),(0,n.jsx)(j.i.ListAccessGranted,{})]})]})]})})]}),(0,n.jsx)("div",{className:"bg-primary border-primary absolute bottom-0 left-0 w-full border-t",children:(0,n.jsx)("div",{className:"mx-auto max-w-screen-md px-6 py-4",children:(0,n.jsx)("div",{className:"flex w-full flex-row justify-end",children:(0,n.jsx)(f.z,{type:"submit",variant:"circle",disabled:u,children:(0,s.t)("settings.access_groups.admin.modal.access.actions.save")})})})})]})},N=r(757105),P=r(963549),C=r(131906),A=r(93199),I=r(547144),T=r(22319),E=r(60878),L=r(450180),D=function(e){var t=e.accessGroupId,r=e.closeModal,n=(0,E.pm)(),i=function(e){var t=e.accessGroupId,r=e.params;return(0,A.aU)(I.av.admin.accessGroupContent.update(t),r)},o=(0,C.useMutation)({mutationFn:function(e){return i({accessGroupId:t,params:e})},onSuccess:function(){T.Eh.invalidateQueries((0,L.M)(t)),n.success((0,s.t)("settings.access_groups.admin.modal.access.messages.updated")),r&&r()},onError:function(e){n.error(e.message),r&&r()}}),a=o.mutate;return{isSubmitting:o.isLoading,handleSubmit:a}},M="settings.access_groups.admin.modal.access.update_confirmation",R=function(e){var t=e.contentData,r=e.accessGroupId,i=(0,N.dd)(),o=function(){i.hide(),i.remove()},a=D({accessGroupId:r,closeModal:o}),l=a.handleSubmit,u=a.isSubmitting;return(0,n.jsx)(P.c,{isOpen:i.visible,title:(0,s.t)([M,"title"]),onClose:o,onConfirm:function(){l(t)},confirmVariant:"circle",confirmText:(0,s.t)([M,"on_confirm"]),disabled:u,children:(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([M,"description"])})})},B=N.gk.create(function(e){var t=e.contentData,r=e.accessGroupId;return(0,n.jsx)(R,{contentData:t,accessGroupId:r})});function z(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var F=function(){var e=(0,a.d)().accessGroup,t=(0,N.dd)(B),r=D({accessGroupId:e.id}).handleSubmit,i={space_group_ids:e.space_group_ids,space_ids:e.space_ids};return(0,n.jsx)(v.l,{onSubmit:function(n){var i;return(i=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!e.has_members)return[3,2];return[4,t.show({contentData:n,accessGroupId:e.id})];case 1:return i.sent(),[3,3];case 2:r(n),i.label=3;case 3:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,n){var o=i.apply(e,t);function a(e){z(o,r,n,a,s,"next",e)}function s(e){z(o,r,n,a,s,"throw",e)}a(void 0)})})()},defaultValues:i,children:(0,n.jsx)(k,{defaultValues:i})})},U=r(138317),Z=function(){var e=(0,i.k6)();return{redirectToEditModal:function(){e.push(U.y.MEMBERS)},redirectToAddMembers:function(){e.push(U.y.ADD_MEMBERS)}}},G=r(334568),q=r(133975),V=r(396354),W=r(134062),H=function(e){var t=e.page,r=e.queryParams,n=e.history,i=e.pageQueryName,o=void 0===i?"page":i;(0,g.useEffect)(function(){if(Number(r[o]||1)!==t){var e=new URLSearchParams(n.location.search);t>1?e.set(o,String(t)):e.delete(o),n.push({search:e.toString()})}},[t,n])},Q=r(51732),K=function(){return{manageAccessGroupMembers:function(e){var t=e.id,r=e.params;return(0,A.Cu)(I.av.admin.accessGroupMembers.manage(t),r)}}},J=Object.freeze({JOIN:"join",REMOVE:"remove"}),$=function(e){var t=e.closeConfirmationModal,r=(0,a.d)(),n=r.selectedMemberIds,i=r.filtersToProcessMembers,o=r.accessGroup,s=r.setShouldBlockActions,l=r.clearSelectedMemberIds,c=(0,E.pm)(),u=K().manageAccessGroupMembers;return(0,C.useMutation)({mutationFn:function(){return u({id:o.id,params:{community_member_ids:n,process_type:J.REMOVE,filters:n.length>0?void 0:i}})},onSuccess:function(){l(),s(!0),t()},onError:function(e){return c.error(e.message)}})},X="settings.access_groups.admin.modal.members.bulk_actions.remove_confirmation",Y=function(e){var t=e.isVisible,r=e.onClose,i=(0,a.d)().totalMembersToProcess,o=$({closeConfirmationModal:function(){r()}}),l=o.mutate,c=o.isLoading;return(0,n.jsx)(P.c,{title:(0,s.t)([X,"title"]),isOpen:t,onClose:r,disabled:c,onConfirm:function(){l()},confirmText:(0,s.t)([X,"confirm"]),confirmVariant:"danger",children:(0,s.t)([X,"description"],{count:i})})};function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et="settings.access_groups.admin.actions.bulk_actions",er=function(){var e,t=(0,a.d)().shouldBlockActions,r=(e=(0,Q.Z)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ee(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],l=[{icon:"16-remove-user",label:(0,s.t)([et,"remove_members"]),onClick:function(){o()},value:"reorder"}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y,{isVisible:i,onClose:o}),(0,n.jsx)(m.Lt,{direction:"bottom-start",button:(0,n.jsx)(m.Lt.MenuButton,{children:(0,n.jsxs)(f.z,{disabled:t,small:!0,variant:"secondary-light",children:[(0,n.jsx)(c.Z.LabelXs,{weight:"medium",children:(0,s.t)([et,"title"])}),(0,n.jsx)(d.JO,{type:"16-chevron-down",size:16})]})}),options:l})]})},en=r(900555),ei="settings.access_groups.admin.modal.members",eo=function(){var e=Z().redirectToAddMembers,t=(0,a.d)().shouldBlockActions;return(0,n.jsx)("div",{className:"w-full pt-7 lg:px-9",children:(0,n.jsx)("div",{className:"border-primary rounded-2xl border py-12",children:(0,n.jsx)(en.u,{header:(0,s.t)([ei,"setup"]),description:(0,s.t)([ei,"setup_description"]),secondaryLabel:(0,s.t)([ei,"actions.select_members"]),secondaryDisabled:t,onSecondaryClick:function(){e()}})})})},ea=r(413847),es=r(935565),el=r(985798),ec=function(e){var t=e.communityMember,r=(0,a.d)(),i=r.selectedMemberIds,o=r.addMemberId,s=r.updateTotalMembersToProcess;return(0,n.jsx)("input",{type:"checkbox",className:"text-dark bg-primary hover:bg-tertiary hover:border-secondary disabled:bg-tertiary disabled:border-selector-inactive border-secondary focus:bg-tertiary focus:border-secondary placeholder:text-light size-4 cursor-pointer rounded align-middle placeholder:opacity-100 focus:ring-0 focus:ring-offset-0",id:"community-member-".concat(t.id,"-box"),checked:i.includes(t.id),onChange:function(){o(t.id),s(0)},disabled:!1})},eu=r(664657),ed=function(e){var t=e.member,r=e.isAvatarHidden,i=(0,a.d)().showMemberProfileEdit,o=t.name,l=t.avatar_url,u=t.email;return o?(0,n.jsxs)("button",{className:"flex items-center gap-3 text-left",type:"button",onClick:function(){return i({member:t})},children:[!(void 0!==r&&r)&&(0,n.jsx)(eu.W,{src:l,name:o,size:"6"}),(0,n.jsxs)("div",{className:"grid pr-4",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:o}),(0,n.jsx)(c.Z.LabelSm,{color:"text-default",children:u})]})]}):(0,n.jsx)(n.Fragment,{children:(0,s.t)("dash")})};function ef(e){var t=e.memberId,r=e.shortDisabledLabel,i=e.shouldHideIfNoScore,o=(0,es.wW)(),a=o.data,l=o.isLoading,u=(0,ea.m3)();if(l)return null;if(u){var d={activityScore:{label:void 0!==r&&r?(0,s.t)("activity_score.view"):(0,s.t)("activity_score.view_score"),activity:"disabled"}};return(0,n.jsx)("div",{children:(0,n.jsx)(es.uy,{activityScore:d.activityScore})})}var f=null==a?void 0:a.get(t);return void 0!==i&&i&&!f?null:f?(0,n.jsx)(es.Yf,{scoreDetail:f}):(0,n.jsx)(c.Z.LabelSm,{color:"text-default",children:(0,s.t)("n/a")})}var em=r(994543),ep=r(217123),eb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PP";if(!e)return"";var r=new Date(e);return(0,em.default)(r)?(0,_.startCase)((0,ep.default)(r,t)):""},eh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.admin?(0,s.t)("role_admin"):e.moderator?(0,s.t)("moderator"):(0,s.t)("member")},ey=r(884302),ev=r(54096);function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e_=ey.f2.SpaceGroupsFilterV2,ex=ey.f2.SpacesFilter,ej=ey.f2.StatusFilter,ew=ey.f2.MemberTagsFilter,eO=ey.f2.PaywallsFilter,eS=ey.f2.EventsFilter,ek=ey.f2.HasPastDueSubscriptionFilter,eN=ey.f2.JoinedCommunityDaysAgoFilter,eP=ey.f2.LastLoggedInDaysAgoFilter,eC=ey.f2.AvatarSet,eA=ey.f2.ActivityScoreFilter,eI=ey.f2.HeadlineFilter,eT=ey.f2.NameFilter,eE=ey.f2.LocationFilter,eL=ey.f2.BioFilter,eD=ey.f2.EmailFilter,eM=ey.f2.InvitationLinksFilter,eR=[{name:"joined_community_days_ago",component:eN,label:(0,s.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,s.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:eP,label:(0,s.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],eB=[{name:"name",component:eT,label:(0,s.t)("members_directory.header.search.filters.name")},{name:"email",component:eD,label:(0,s.t)("members_directory.header.search.filters.email")},{name:"spaces",component:ex,label:(0,s.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"invitation_link_ids",component:eM,label:(0,s.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"space_groups",component:e_,label:(0,s.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"online_status",component:ej,label:(0,s.t)("members_directory.header.search.filters.online_status")},{name:"headline",component:eI,label:(0,s.t)("members_directory.header.search.filters.headline")},{name:"bio",component:eL,label:(0,s.t)("members_directory.header.search.filters.bio")},{name:"location",component:eE,label:(0,s.t)("members_directory.header.search.filters.location")},{name:"tags",component:ew,label:(0,s.t)("members_directory.header.search.filters.tags.singular_title")},{name:"paywalls",component:eO,label:(0,s.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:eS,label:(0,s.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:ek,label:(0,s.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(function(e){if(Array.isArray(e))return eg(e)}(eR)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(eR)||function(e,t){if(e){if("string"==typeof e)return eg(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eg(e,t)}}(eR)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{name:"is_avatar_set",component:eC,label:(0,s.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:eA,label:(0,s.t)("members_directory.header.search.filters.activity_score")}]),ez=function(){return(0,n.jsx)("div",{className:"!px-0",children:(0,n.jsx)(ey.YP,{platformFilters:eB,defaultFilterNames:["name","spaces","tags","events"],className:"!items-start border-none pb-0 pt-7",children:(0,n.jsx)(ev.kT,{})})})};function eF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eU=function(e){var t=e.onSort,r=e.setPage,i=e.initialPage,o=e.infiniteQuery,l=e.order,c=e.children,u=(0,ea.rV)(),d=(0,g.useMemo)(function(){return l?Object.entries(l).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eF(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eF(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{id:t[0],desc:"desc"===t[1]}}):null},[l]),f=(0,a.d)().accessGroup,m=(0,g.useMemo)(function(){var e;return e=f.id,(0,_.compact)([{accessorKey:"memberIdCheckbox",header:"",accessorFn:function(e){return e},cell:function(t){return(0,n.jsx)(ec,{accessGroupId:e,communityMember:t.getValue()})},cellClassName:"!align-middle"},{accessorKey:"name",header:(0,s.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(ed,{member:e.getValue()})}},u&&{accessorKey:"activity_score",header:(0,s.t)("settings.manage_members.activity_score"),accessorFn:function(e){return e.id},cell:function(e){return(0,n.jsx)(ef,{shortDisabledLabel:!0,memberId:e.getValue()})},cellClassName:"!align-middle"},{accessorKey:"roles",header:(0,s.t)("settings.manage_members.role"),cell:function(e){return eh(e.getValue())},canSort:!1,cellClassName:"!align-middle"},{accessorKey:"profile_confirmed_at",header:(0,s.t)("settings.manage_members.joined"),cell:function(e){return eb(e.getValue())},cellClassName:"!align-middle"}])},[u,f.id]),p=(0,g.useMemo)(function(){var e,t;return(null==(t=o.data)||null==(e=t.pages)?void 0:e.flatMap(function(e){return e.records}).map(function(e){return e.id}))||[]},[o]);return(0,n.jsxs)(es.XR,{ids:p,children:[(0,n.jsx)(ez,{}),(0,n.jsx)(el.J,{columns:m,infiniteQuery:o,initialSort:d,onChangeSorting:t,onChangePage:function(e){r(e)},initialPage:i,pageSize:(0,q.b7)(),children:(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[c,(0,n.jsxs)("div",{className:"max-w-full overflow-x-auto px-6 lg:px-9","data-testid":"access-group-members-table",children:[(0,n.jsxs)(W.w.Table,{className:"w-full min-w-[800px]",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{className:"w-4"}),(0,n.jsx)("col",{}),u&&(0,n.jsx)("col",{className:"min-w-[2rem]"}),(0,n.jsx)("col",{className:"w-3/12"}),(0,n.jsx)("col",{className:"min-w-[4rem]"})]}),(0,n.jsx)(W.w.SortableHead,{}),(0,n.jsx)(W.w.Loader,{}),(0,n.jsx)(W.w.NoRecords,{text:(0,s.t)("settings.manage_members.no_members_found")}),(0,n.jsx)(W.w.Body,{})]}),(0,n.jsx)(W.w.Pagination,{align:"left",direction:"reverse"})]})]})})]})},eZ=r(442392),eG=r(776937);function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eW(e){return function(e){if(Array.isArray(e))return eq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eH(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eH(e,t){if(e){if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}var eQ=function(e){var t,r,n=e.accessGroupId,o=e.shouldLoadGroupMembers,a=(0,i.k6)(),s=(0,i.TH)(),l=(0,ea.ov)(),c=(0,g.useCallback)(function(){return l?{activity_score:"desc"}:{profile_confirmed_at:"desc"}},[l]),u=function(){return[eV({key:"access_group_ids",value:n},!o&&{filter_type:"is_not"})]},d=function(){return{exclude_empty_profiles:!1,status:eG.vC.ALL}},f=(0,eZ.k)(),m=f.queryParams,p=m.order,b=m.filters;return t=eV({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(f.queryParams,["order","filters"])),r=r={onSort:function(e){var t=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||eH(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=new URLSearchParams(s.search);p&&Object.keys(p).forEach(function(e){r.delete("order[".concat(e,"]"))}),t&&r.append("order[".concat(t.id,"]"),t.desc?"desc":"asc"),a.push({search:r.toString()})},order:null!=p?p:c(),filters:eW(u()).concat(eW(b)),scope:d(),getAccessGroupFilterFilter:u,getOrderField:c,getGroupMembersInitialQueryOptions:function(){return{order:c(),initialPage:1,query:void 0,filters:eV({},u()),scope:d}}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t};function eK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eJ="page",e$="settings.access_groups.admin.modal.members",eX=function(){var e,t,r=(0,V.t)(),o=Number(r[eJ]||1),l=(e=(0,g.useState)(o),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eK(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eK(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=(0,i.k6)(),f=(0,a.d)(),m=f.accessGroup,p=f.updateFiltersToAddMembers,b=f.updateTotalMembersToProcess,h=f.selectedMemberIds,y=eQ({accessGroupId:m.id,shouldLoadGroupMembers:!0}),v=y.query,_=y.order,x=y.onSort,j=y.filters,w=y.scope,O=y.getGroupMembersInitialQueryOptions,S={order:_,initialPage:o,query:v,filters:j,scope:w};location.pathname.includes("members/add")&&(S=O()),H({page:c,queryParams:r,history:d,pageQueryName:eJ});var k=(0,q.fd)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({perPage:(0,q.b7)(),options:{keepPreviousData:!1},isAdminScope:!0},S));return((0,g.useEffect)(function(){p(j),b(k.totalQueryMembers)},[k.totalQueryMembers,b,j,p]),(null!=(t=null==m?void 0:m.total_members)?t:0)===0)?(0,n.jsx)(eo,{}):(0,n.jsx)(eU,{initialPage:S.initialPage,order:S.order,onSort:x,setPage:u,infiniteQuery:k,children:(0,n.jsxs)(W.w.Headline,{children:[(0,n.jsx)(W.w.Headline.Title,{children:(0,n.jsx)("div",{className:"flex items-center gap-5",children:0==h.length?(0,s.t)([e$,"count"],{count:k.totalQueryMembers}):(0,s.t)([e$,"count_selected"],{count:k.totalQueryMembers,total_selected:h.length})})}),(0,n.jsx)(er,{})]})})},eY="settings.access_groups.admin.modal.members",e0=function(){var e=(0,a.d)(),t=e.accessGroup,r=e.shouldBlockActions,i=e.clearMemberIdsAndFilters;(0,G.I)();var l=Z().redirectToAddMembers;return(0,n.jsx)(o.x.Body,{wrapperClassName:"max-w-screen-lg",children:(0,n.jsxs)("div",{className:"mt-14",children:[(0,n.jsxs)("div",{className:"flex justify-between px-6 lg:px-9",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.TitleMd,{children:(0,s.t)([eY,"title"],{access_group:t.name})}),(0,n.jsx)(c.Z.LabelMd,{color:"text-light",children:(0,s.t)([eY,"subtitle"])})]}),(0,n.jsx)("div",{children:(0,n.jsx)(f.z,{disabled:r,variant:"secondary-light",isFullRounded:!1,onClick:function(){i(),l()},className:"!border-primary",children:(0,s.t)([eY,"actions.add_members"])})})]}),(0,n.jsx)(eX,{})]})})},e1=r(43226),e2=r.n(e1),e3=r(756468);function e6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||e4(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e4(e,t){if(e){if("string"==typeof e)return e6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e6(e,t)}}var e7=(0,g.createContext)({updateFiltersToAddMembers:e2(),selectedMemberIds:[],setSelectedMemberIds:e2(),clearSelectedMemberIds:e2(),addMemberId:e2(),updateTotalMembersToProcess:e2(),totalMembersToProcess:0,filtersToProcessMembers:{},setFiltersToProcessMembers:e2()});e7.displayName="AddAccessGroupMembersDataContext";var e9=function(){var e=(0,g.useContext)(e7);return(0,e3.Z)(e,"useAddAccessGroupMemberData must be used within a AddAccessGroupMembersDataContextProvider"),e};function e8(e){var t=e.children,r=e5((0,g.useState)([]),2),i=r[0],o=r[1],a=e5((0,g.useState)(0),2),s=a[0],l=a[1],c=e5((0,g.useState)([]),2),u=c[0],d=c[1],f=(0,g.useCallback)(function(){o([])},[o]),m=(0,g.useCallback)(function(e){o(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):((function(e){if(Array.isArray(e))return e6(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||e4(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},[o]),p=(0,g.useCallback)(function(e){(0,_.isEqual)(e,u)||(f(),d(e))},[u,f]),b=(0,g.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=i.length;t>0?t!=s&&l(i.length):e!=s&&l(e)},[i.length,s]);return(0,n.jsx)(e7.Provider,{value:{selectedMemberIds:i,setSelectedMemberIds:o,clearSelectedMemberIds:f,addMemberId:m,updateFiltersToAddMembers:p,updateTotalMembersToProcess:b,totalMembersToProcess:s,setFiltersToProcessMembers:d,filtersToProcessMembers:u},children:t})}var te=function(){var e=(0,a.d)(),t=e.accessGroup,r=e.setShouldBlockActions,n=(0,E.pm)(),i=K().manageAccessGroupMembers,o=Z().redirectToEditModal,s=e9(),l=s.clearSelectedMemberIds,c=s.filtersToProcessMembers,u=s.selectedMemberIds;return(0,C.useMutation)({mutationFn:function(){return i({id:t.id,params:{community_member_ids:u,process_type:J.JOIN,filters:u.length>0?void 0:c}})},onSuccess:function(){l(),r(!0),o()},onError:function(e){return n.error(e.message)}})},tt="settings.access_groups.admin.modal.members",tr=function(e){var t=e.isProcessingMembers,r=e.totalMembersToProcess,i=e.handleAddMembers,o=(0,N.dd)();return(0,n.jsx)(P.c,{isOpen:o.visible,onClose:o.hide,title:(0,s.t)([tt,"add.confirm_title"]),confirmVariant:"circle",confirmText:(0,s.t)([tt,"actions.add_selected_members"],{count:r}),disabled:t||0===r,onConfirm:function(){o.hide(),i()},children:(0,n.jsxs)("div",{className:"grid gap-y-6",children:[(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([tt,"add.description1"],{count:r})}),(0,n.jsx)(c.Z.BodyMd,{children:(0,s.t)([tt,"add.description2"])})]})})},tn=N.gk.create(function(e){return(0,n.jsx)(tr,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),ti=r(751169),to=function(e){var t=e.communityMemberId,r=e9(),i=r.selectedMemberIds,o=r.addMemberId,a=r.updateTotalMembersToProcess;return(0,n.jsx)("input",{type:"checkbox",className:"text-dark bg-primary hover:bg-tertiary hover:border-secondary disabled:bg-tertiary disabled:border-selector-inactive border-secondary focus:bg-tertiary focus:border-secondary placeholder:text-light size-4 cursor-pointer rounded align-middle placeholder:opacity-100 focus:ring-0 focus:ring-offset-0",id:"community-member-".concat(t,"-box"),checked:i.includes(t),onChange:function(){o(t),a(0)},disabled:!1})};function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ts=function(e){var t=e.onSort,r=e.setPage,i=e.initialPage,o=e.infiniteQuery,a=e.order,l=e.children,c=(0,g.useMemo)(function(){return a?Object.entries(a).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ta(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ta(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{id:t[0],desc:"desc"===t[1]}}):null},[a]),u=(0,g.useMemo)(function(){return(0,_.compact)([{accessorKey:"memberIdCheckbox",header:"",accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(to,{communityMemberId:e.getValue().id})},thClassName:"!px-3",cellClassName:"!align-middle"},{accessorKey:"name",header:(0,s.t)("settings.manage_members.name"),accessorFn:function(e){return e},cell:function(e){return(0,n.jsx)(ed,{member:e.getValue()})},thClassName:"!px-3"},{accessorKey:"roles",header:(0,s.t)("settings.manage_members.role"),cell:function(e){return eh(e.getValue())},canSort:!1,thClassName:"!px-3",cellClassName:"!align-middle"},{accessorKey:"profile_confirmed_at",header:(0,s.t)("settings.manage_members.joined"),cell:function(e){return eb(e.getValue())},thClassName:"!px-3",cellClassName:"!align-middle"}])},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ez,{}),(0,n.jsx)(el.J,{columns:u,infiniteQuery:o,initialSort:c,onChangeSorting:t,onChangePage:function(e){r(e)},initialPage:i,pageSize:(0,q.b7)(),children:(0,n.jsxs)("div",{className:"flex h-full flex-col",children:[l,(0,n.jsxs)("div",{className:"max-w-full overflow-x-auto px-6 lg:px-9",children:[(0,n.jsxs)(W.w.Table,{className:"w-full min-w-[800px]",children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{className:"w-4"}),(0,n.jsx)("col",{}),(0,n.jsx)("col",{className:"w-3/12"}),(0,n.jsx)("col",{className:"min-w-[4rem]"})]}),(0,n.jsx)(W.w.SortableHead,{}),(0,n.jsx)(W.w.Loader,{}),(0,n.jsx)(W.w.NoRecords,{text:(0,s.t)("settings.manage_members.no_members_found")}),(0,n.jsx)(W.w.Body,{})]}),(0,n.jsx)(W.w.Pagination,{align:"left",direction:"reverse"})]})]})})]})};function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tc="settings.access_groups.admin.modal.members",tu="page",td=function(){var e,t=(0,V.t)(),r=Number(t[tu]||1),o=(e=(0,g.useState)(r),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tl(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1],u=(0,i.k6)(),d=(0,a.d)().accessGroup,f=e9(),m=f.updateTotalMembersToProcess,p=f.updateFiltersToAddMembers,b=f.selectedMemberIds,h=eQ({accessGroupId:d.id,shouldLoadGroupMembers:!1}),y=h.query,v=h.order,_=h.onSort,x=h.filters,j=h.scope;H({page:l,queryParams:t,history:u,pageQueryName:tu});var w=(0,q.fd)({perPage:(0,q.b7)(),options:{keepPreviousData:!1},isAdminScope:!0,order:v,initialPage:r,query:y,filters:x,scope:j});return((0,g.useEffect)(function(){p(x),m(w.totalQueryMembers)},[w.totalQueryMembers,m,x,p]),w.isRefetching&&!w.isFetched)?(0,n.jsx)(ti.a,{center:!0}):(0,n.jsx)(ts,{initialPage:r,order:v,onSort:_,setPage:c,infiniteQuery:w,children:(0,n.jsx)(W.w.Headline,{children:(0,n.jsx)(W.w.Headline.Title,{children:0==b.length?(0,s.t)([tc,"count"],{count:w.totalQueryMembers}):(0,s.t)([tc,"count_selected"],{count:w.totalQueryMembers,total_selected:b.length})})})})},tf="settings.access_groups.admin.modal.members",tm=function(){var e=e9().totalMembersToProcess,t=Z().redirectToEditModal,r=function(){t()},i=te(),a=i.mutate,l=i.isLoading,u=function(){a()},d=(0,N.dd)(tn),m=(0,g.useCallback)(function(){d.show({isProcessingMembers:l,totalMembersToProcess:e,handleAddMembers:u})},[l,e,u,d]);return(0,n.jsxs)(o.x,{isOpen:!0,onClose:r,shouldShowCloseButton:!0,size:"xl",children:[(0,n.jsx)(o.x.Header,{className:"lg:px-9",children:(0,n.jsx)(o.x.HeaderContent,{children:(0,n.jsx)(c.Z.TitleSm,{truncate:!0,weight:"semibold",children:(0,s.t)([tf,"add.title"])})})}),(0,n.jsx)(o.x.Body,{wrapperClassName:"!ml-0",children:(0,n.jsx)(td,{})}),(0,n.jsx)(o.x.Footer,{children:(0,n.jsxs)("div",{className:"flex w-full flex-row justify-end gap-3",children:[(0,n.jsx)(f.z,{type:"button",onClick:r,variant:"secondary",children:(0,s.t)([tf,"actions.cancel"])}),(0,n.jsx)(f.z,{onClick:m,type:"submit",disabled:l||0===e,variant:"circle",children:(0,s.t)([tf,"actions.add_selected_members"],{count:e})})]})})]})},tp=function(){return(0,n.jsx)(e8,{children:(0,n.jsx)(tm,{})})},tb=function(e){var t=e.onClose,r=e.initialTab,u=(0,a.d)().accessGroup,d=[{label:(0,s.t)("settings.access_groups.admin.modal.tabs.members"),href:U.y.MEMBERS},{label:(0,s.t)("settings.access_groups.admin.modal.tabs.access"),href:U.y.CONTENT}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.x.Header,{children:(0,n.jsx)(o.x.HeaderNav,{titleNode:(0,n.jsxs)("div",{className:"divide-primary flex items-center divide-x",children:[(0,n.jsx)(l.h,{name:"20-arrow-left",iconSize:20,buttonSize:28,className:"text-default me-4",iconClassName:"w-5 h-5",ariaLabel:(0,s.t)("back"),onClick:t}),(0,n.jsx)("div",{className:"ps-4",children:(0,n.jsx)(c.Z.TitleSm,{weight:"semibold",truncate:!0,children:null==u?void 0:u.name})})]}),items:d,rightNode:(0,n.jsx)(y,{})})}),(0,n.jsx)(o.x.Body,{wrapperClassName:"max-w-screen-lg",children:(0,n.jsxs)(i.rs,{children:[(0,n.jsx)(i.AW,{exact:!0,path:U.y.MEMBERS,children:(0,n.jsx)(e0,{})}),(0,n.jsx)(i.AW,{exact:!0,path:U.y.ADD_MEMBERS,children:(0,n.jsx)(tp,{})}),(0,n.jsx)(i.AW,{exact:!0,path:U.y.CONTENT,children:(0,n.jsx)(F,{})}),(0,n.jsx)(i.l_,{to:(void 0===r?"":r)||U.y.MEMBERS})]})})]})},th=function(e){var t=e.accessGroup,r=e.handleClose,s=e.initialTab,l=e.isOpen;return(0,n.jsx)(a.x,{accessGroup:t,children:(0,n.jsx)(i.VA,{children:(0,n.jsx)(o.x,{isOpen:void 0===l||l,onClose:r,shouldShowCloseButton:!0,children:(0,n.jsx)(tb,{onClose:r,initialTab:void 0===s?"":s})})})})}},652621:function(e,t,r){"use strict";r.d(t,{e:()=>_});var n=r(552676),i=r(275271),o=r(932699),a=r(739792),s=r(757105),l=r(963549),c=r(767900),u=r(131906),d=r(203176),f=r(60878),m=r(748125),p=r(450180),b=function(e){var t=e.id,r=(0,u.useQueryClient)(),n=(0,f.pm)(),i=(0,d.L)().updateAccessGroup,o=(0,m.n)().accessGroupsInfiniteQuery;return(0,u.useMutation)(function(e){return i({id:t,params:{name:e.name,description:e.description}})},{onSuccess:function(){r.invalidateQueries((0,p.M)(t)),r.invalidateQueries(o.queryKey[0]),n.success((0,a.t)("settings.access_groups.admin.messages.updated"))},onError:function(e){return n.error(e.message)}})},h="settings.access_groups.admin.form",y=(0,o.uniqueId)(),v=function(e){var t=e.accessGroup,r=(0,i.useRef)(null),o=(0,s.dd)(),u=b({id:t.id}),d=u.mutate,f=u.isLoading,m=function(e){d(e,{onSuccess:function(){return o.hide()}})};return(0,n.jsx)(l.c,{formId:y,isOpen:o.visible,onClose:o.hide,title:(0,a.t)([h,"update_title"]),confirmVariant:"circle",confirmText:(0,a.t)(["save"]),disabled:f,initialFocusRef:r,children:(0,n.jsxs)(c.l,{id:y,mode:"onChange",defaultValues:{name:t.name,description:t.description||""},onSubmit:function(e){return m(e)},children:[(0,n.jsx)(c.l.Item,{name:"name",translationRoot:h,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,a.t)([h,"validations.name_required"])},tooltipText:(0,a.t)([h,"tooltips.name"]),children:(0,n.jsx)(c.l.Input,{ref:r})}),(0,n.jsx)(c.l.Item,{name:"description",translationRoot:h,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,tooltipText:(0,a.t)([h,"tooltips.description"]),children:(0,n.jsx)(c.l.Input,{})})]})})},g=s.gk.create(function(e){var t=e.accessGroup;return(0,n.jsx)(v,{accessGroup:t})}),_=function(){return(0,s.dd)(g)}},138317:function(e,t,r){"use strict";r.d(t,{y:()=>n});var n=Object.freeze({CONTENT:"/content",MEMBERS:"/members",ADD_MEMBERS:"/add_members"})},334568:function(e,t,r){"use strict";r.d(t,{I:()=>y});var n=r(552676),i=r(451019),o=r(263271),a=r(441342),s=r(822301),l=r(22319),c=r(60878),u=r(659986),d=r(275271);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e,t=(e=(0,d.useState)({}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{toastsIdsMap:t[0],setToastsIdsMap:t[1],updateToastProgress:function(e){c.V2.setCustomProgress(e)}}};function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){b(e,t,r[t])})}return e}var y=function(){var e=(0,a.wh)().currentCommunityMember,t=m(),r=t.toastsIdsMap,d=t.setToastsIdsMap,f=t.updateToastProgress,y=(0,u.d)(),v=y.setShouldBlockActions,g=y.shouldBlockActions,_=(0,c.pm)(),x=_.error,j=_.show,w=window.location.pathname,O=w.split("/").pop();(0,o.s)({channel:i.uX,onMessageReceive:function(e){var t;return(t=function(){var t,o,a,u,m,p,y;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(_){switch(_.label){case 0:if(t=e.event,a=(o=JSON.parse(e.record)).id,u=o.params,m=String(a),p=(null==u?void 0:u.access_group_id)||((null==u?void 0:u.access_group_ids)||[]).find(function(e){return e===Number(O)}),!(0,i.nb)(null==o?void 0:o.type)&&!(0,i.gV)(null==o?void 0:o.type))return[2];return y=!(p&&s.X.edit({accessGroupId:p})===w),r[m]||d(function(e){var t,r;return j("",{id:String(m),shouldAutohide:!1,render:function(e){return(0,n.jsx)(c.cT,h({},e))}}),t=h({},e),r=null!=(r=b({},m,!0))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}),(0,i.O6)(t)?(g||v(!0),f({toastId:m,customProgress:0,message:o.progress,shouldHideToast:y})):(0,i.HY)(t)&&((0,i.WD)(o.status)?(x(o.message),f({toastId:m,customProgress:100,shouldHideToast:!0})):f({toastId:m,customProgress:100,message:o.message,shouldHideToast:y}),v(!1)),[4,l.Eh.invalidateQueries({queryKey:["community-members"]})];case 1:return _.sent(),[4,l.Eh.invalidateQueries({queryKey:["access_groups","show"]})];case 2:return _.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()},canCreateConnection:!!(null==e?void 0:e.id),community_member_id:null==e?void 0:e.id})}},450180:function(e,t,r){"use strict";r.d(t,{M:()=>s,S:()=>l});var n=r(131906),i=r(739792),o=r(203176),a=r(60878),s=function(e){return["access_groups","show",e]},l=function(e){var t=(0,a.pm)(),r=(0,o.L)().showAccessGroup;return(0,n.useQuery)({queryKey:s(e),queryFn:function(){return r(e)},onError:function(){return t.error((0,i.t)("error"))}})}},131343:function(e,t,r){"use strict";r.d(t,{o:()=>j});var n=r(552676),i=r(275271),o=r(932699),a=r(739792),s=r(757105),l=r(963549),c=r(767900),u=r(131906),d=r(903225),f=r(203176),m=r(822301),p=r(22319),b=r(60878),h=r(748125),y=function(e){var t=e.closeModal,r=e.onSuccess,n=(0,h.n)().accessGroupsInfiniteQuery,i=(0,b.pm)(),o=(0,f.L)().createAccessGroup,a=(0,d.k6)(),s=(0,u.useMutation)({mutationFn:function(e){return o(e)},onSuccess:function(e){p.Eh.invalidateQueries(n.queryKey),t(),r?r(e):a.push({pathname:m.X.edit({accessGroupId:e.id})})},onError:function(e){return i.error(e.message)}}),l=s.mutate;return{isSubmitting:s.isLoading,handleSubmit:l}},v="settings.access_groups.admin.form",g=(0,o.uniqueId)(),_=function(e){var t=e.accessGroupName,r=e.accessGroupDescription,o=e.onSuccess,u=(0,i.useRef)(null),d=(0,s.dd)(),f=y({closeModal:d.hide,onSuccess:o}),m=f.isSubmitting,p=f.handleSubmit;return(0,n.jsx)(l.c,{formId:g,isOpen:d.visible,onClose:d.hide,title:(0,a.t)([v,"create_title"]),confirmText:(0,a.t)([v,"create_confirm_text"]),confirmVariant:"circle",disabled:m,initialFocusRef:u,children:(0,n.jsxs)(c.l,{id:g,mode:"onChange",defaultValues:{name:t||"",description:r||""},onSubmit:function(e){return p(e)},children:[(0,n.jsx)(c.l.Item,{name:"name",translationRoot:v,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{required:(0,a.t)([v,"validations.name_required"]),maxLength:{value:65,message:(0,a.t)([v,"validations.name_max_length"])}},tooltipText:(0,a.t)([v,"tooltips.name"]),children:(0,n.jsx)(c.l.Input,{ref:u})}),(0,n.jsx)(c.l.Item,{name:"description",translationRoot:v,tooltipText:(0,a.t)([v,"tooltips.description"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,rules:{maxLength:{value:100,message:(0,a.t)([v,"validations.description_max_length"])}},children:(0,n.jsx)(c.l.Input,{})})]})})},x=s.gk.create(function(e){var t=e.accessGroupName,r=e.accessGroupDescription,i=e.onSuccess;return(0,n.jsx)(_,{accessGroupName:t,accessGroupDescription:r,onSuccess:i})}),j=function(){return(0,s.dd)(x)}},400233:function(e,t,r){"use strict";r.d(t,{v:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.cms_video_analytics_enabled)}},655017:function(e,t,r){"use strict";r.d(t,{X:()=>s});var n=r(552676),i=r(739792),o=r(718083),a=r(381636),s=function(){return(0,n.jsx)(o.b,{className:"lg:-mt-16",leftContent:(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,n.jsx)("a",{className:"text-dark",href:"/",children:(0,i.t)("settings.analytics.title")})})})}},943511:function(e,t,r){"use strict";r.d(t,{Y:()=>f});var n=r(552676),i=r(275271),o=r(932699),a=r(131906),s=r(441342),l=r(93199),c=r(78456),u=r(912979),d=r(547144);function f(){var e=(0,s.wh)().currentCommunityMember,t=(0,c.vb)(e),r=(0,a.useInfiniteQuery)(["member-tags"],function(e){var t=e.pageParam;return(0,l.UT)(d.av.memberTags.index({params:{page:void 0===t?1:t}}))},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),f=r.data,m=r.fetchNextPage,p=r.hasNextPage,b=r.isLoading;return(0,i.useEffect)(function(){p&&m()},[f]),{isLoading:b,memberTags:(0,i.useMemo)(function(){var e=(0,o.flatten)(null==f?void 0:f.pages.map(function(e){return e.records})),r=function(e){return{label:e.name,richLabel:(0,n.jsxs)("span",{className:"flex gap-1.5",children:[e.custom_emoji_url?(0,n.jsx)("img",{loading:"lazy",className:"mt-[3px] block h-4",src:e.custom_emoji_url,alt:e.name}):(0,n.jsx)("span",{children:e.emoji}),(0,n.jsx)("span",{children:e.name})]}),value:e.id.toString()}};return t?e.map(r):(0,u.U)({memberTags:e}).map(r)},[f,t])}}},762111:function(e,t,r){"use strict";r.d(t,{e:()=>b});var n=r(275271),i=r(932699),o=r(793672),a=r(903225),s=r(779774),l=r(721523),c=r(28116);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var p=s.Ry().shape({filters:s.IX().of(s.Ry().shape({id:s.Z_().defined(),key:s.Z_().defined(),filter_type:s.Z_(),value:s.nK(),profile_field_id:s.Rx(),profile_field_type:s.Z_()})).nullable().ensure(),start_date:s.Z_().nullable(),end_date:s.Z_().nullable(),predefined_range:s.Z_().nullable(),date_grouping:s.Z_(),page:s.Rx().optional(),tab_key:s.Z_().optional(),analytics_period_comparison:s.Z_().optional(),comparison_mode:s.Z_().optional()}).unknown(!0);function b(){var e=(0,l.t)(p),t=(0,a.k6)(),r=(0,n.useCallback)(function(r,n){t.push({search:(0,o.stringify)(m(f({},e),{filters:function(){var t=e.filters;if((0,c.N)(n))return t.filter(function(e){return r!==e.id});var o=t.some(function(e){return r===e.id}),a=(0,i.omit)(n,["isInitialOpen"]);return o?t.map(function(e){return e.id===r?f({},e,a):e}):((function(e){if(Array.isArray(e))return u(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([a])}()}))})},[t,e]),s=(0,n.useCallback)(function(){t.push({search:""})},[t]),b=(0,n.useCallback)(function(){var r=(0,i.omit)(e,["filters"]);t.push({search:(0,o.stringify)(r)})},[e,t]),h=(0,n.useCallback)(function(r){var n=m(f({},e),{page:r});t.push({search:(0,o.stringify)(n)})},[e,t]),y=(0,n.useCallback)(function(r,n){var i=m(f({},e),d({},"".concat(r,"_page"),n));t.push({search:(0,o.stringify)(i)})},[e,t]),v=(0,n.useCallback)(function(t){return e["".concat(t,"_page")]||1},[e]);return{queryParams:e,updateUrl:r,removeAllQueryParams:s,removeFilterFromUrl:b,setPage:h,setTablePage:y,getTablePage:v}}},485653:function(e,t,r){"use strict";r.d(t,{w:()=>O});var n=r(552676),i=r(795053),o=r(762111),a=r(903640),s=r(527350),l=r(135822),c=r(217123),u=r(739792),d=r(344484),f=r(381636),m=r(11079),p=function(e){var t=e.data,r=e.rootLocale,i=e.seriesKey;return(0,n.jsx)("div",{className:"bg-primary w-max rounded-lg p-4 shadow-md",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"date"]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:(0,c.default)((0,m.Y)(String(t.Date)),d.zT)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,i]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:t.count.toLocaleString()})]})]})})},b=r(408306),h=function(e){var t=e.data,r=e.rootLocale,i=e.headerLabel,o=e.trendDeltaPercentage,a=t.conversations||0;return(0,n.jsxs)("div",{className:"bg-primary w-max rounded-lg p-4 shadow-md",children:[i&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:i})}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"conversations"]),":"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:a.toLocaleString()}),"number"==typeof o?(0,n.jsx)(b.E,{deltaPercentage:o,withBackground:!1}):null]})]})]})},y=function(e){var t=e.data,r=e.rootLocale;return(0,n.jsx)("div",{className:"bg-primary w-max rounded-lg p-4 shadow-md",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"conversion_rate"]),":"]}),(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[t.rate.toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"date"]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:(0,c.default)((0,m.Y)(String(t.Date)),d.zT)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"conversions"]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:t.conversions.toLocaleString()})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"views"]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:t.views.toLocaleString()})]})]})})},v=r(701168),g=r(22319),_=function(e){var t=e.data,r=e.rootLocale,i=e.seriesKeys,o=e.hoveredSeriesId,a=(0,g.TC)().isLightAppearance?"-mx-2 rounded px-2 py-1 bg-gray-100 text-gray-900":"-mx-2 rounded px-2 py-1 bg-white/10 text-white ring-1 ring-white/10";return(0,n.jsx)("div",{className:"bg-primary w-max rounded-lg p-4 shadow-md",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"date"]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:(0,c.default)(new Date(t.Date),d.zT)})]}),i.map(function(e){var s,l=o===e,c=i.length>1;return(0,n.jsxs)("div",{className:(0,v.A)("flex items-center justify-between gap-4",l&&c?a:""),children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"chart_tooltip",e]),":"]}),(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:null==(s=t[e])?void 0:s.toLocaleString()})]},"tooltip-".concat(e))})]})})},x=r(466056),j=function(e){var t=e.data,r=e.rootLocale,i=e.headerLabel,o=e.trendDeltaPercentage,a=t.total_rsvps||0;return(0,n.jsxs)("div",{className:"bg-primary w-max rounded-lg p-4 shadow-md",children:[i&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:i})}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(f.Z.LabelSm,{weight:"semibold",children:[(0,u.t)([r,"total_rsvps"]),":"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:a.toLocaleString()}),"number"==typeof o?(0,n.jsx)(b.E,{deltaPercentage:o,withBackground:!1}):null]})]})]})},w=function(e,t,r,i,a){var s=(0,o.e)().queryParams,c=a||s.date_grouping||"weekly",u=function(o){var a=o.point,s=a.data,u=a.seriesId,d=s.x,f=(null==i?void 0:i.join("."))||"";if("activity"===t){var m={unique_visitors:"Unique Visitors",page_views:"Page Views",bounce_rate:"Bounce Rate %"}[u],b=null==e?void 0:e.find(function(e){return"Date"in e&&"type"in e&&e.Date===d&&e.type===m});return b?(0,n.jsx)(p,{data:b,rootLocale:f,seriesKey:u}):null}var v=null==e?void 0:e.find(function(e){return"Date"in e&&e.Date===d});if(!v)return null;switch(t){case"histogram_generic":return(0,n.jsx)(_,{data:v,rootLocale:f,seriesKeys:r,hoveredSeriesId:u});case"conversion":return(0,n.jsx)(y,{data:v,rootLocale:f});case"members":var g=(0,l.Y)(c,v.Date);return(0,n.jsx)(x.p,{data:v,rootLocale:f,headerLabel:g});case"conversations":var w=(0,l.Y)(c,v.Date);return(0,n.jsx)(h,{data:v,rootLocale:f,headerLabel:w});case"rsvps":var O=(0,l.Y)(c,v.Date);return(0,n.jsx)(j,{data:v,rootLocale:f,headerLabel:O});default:return null}};return u.displayName="LineChartTooltipComponent",u},O=function(e){var t=e.fetchData,r=e.mapData,l=e.queryKey,c=e.title,u=e.className,d=e.tooltip,f=e.titleLabel,m=e.prefix,p=e.suffix,b=e.indexBy,h=e.seriesKeys,y=e.colors,v=e.rootLocale,g=e.enablePoints,_=e.tooltipType,x=e.showLegend,j=e.secondaryAxis,O=e.customTooltip,S=e.enableArea,k=e.emptyStateDescription,N=e.extractSeriesKeys,P=e.translateLegendLabels,C=e.curve,A=e.enableComparison,I=e.comparisonWindowDays,T=e.dateGroupingOverride,E=(0,o.e)().queryParams,L=T||E.date_grouping||"weekly",D=(0,s.a)({fetchData:t,queryKey:l,comparisonRangeDays:"number"==typeof I?I:void 0,enabled:!!A,dateGroupingOverride:T}),M=D.currentData,R=D.isLoadingCurrent,B=r(M||[]),z=N?N(M||[]):h||[],F=y||(0,a.EC)(z.length),U=w(v&&_?"conversion"===_||"activity"===_?M:B:[],_||"histogram_generic",z,v,L);return(0,n.jsx)(i.D,{title:c,tooltip:d,titleLabel:f,data:B,previousData:A&&1===z.length?r(D.previousData||[]):void 0,isLoading:R,className:u,prefix:m,suffix:p,indexBy:b,seriesKeys:z,colors:F,rootLocale:v||[],dateGrouping:L,customTooltip:O||(v&&_?U:void 0),enablePoints:void 0===g||g,showLegend:void 0!==x&&x,secondaryAxis:j,enableArea:S,emptyStateDescription:k,translateLegendLabels:P,curve:C})}},379810:function(e,t,r){"use strict";r.d(t,{NS:()=>w,WJ:()=>x,_x:()=>_,cM:()=>N,dv:()=>j,yG:()=>g});var n=r(11598),i=r(217123),o=r(987132),a=r(141784),s=r(345585),l=r(664586),c=r(474238),u=r(762111),d=r(467767);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function b(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}var h="yyyy-MM-dd",y=[0,0,0,0],v=[23,59,59,999],g=["previous_period","previous_month","previous_year"],_=g[0],x=g[1],j=g[2],w=function(e){return e===j?"MMM dd, yyyy":"MMM dd"},O=function(e,t){if("string"==typeof t&&null!=e&&(void 0===e?"undefined":p(e))==="object"&&!Array.isArray(e)){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),n=n={__range:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}return null!=e?e:void 0},S=function(e){if(e&&e!==d.l7.value){var t=d.rG.find(function(t){return t.value===e});if(t)return k(t.onSelect())}},k=function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||b(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];return r.setHours.apply(r,m(y)),n.setHours.apply(n,m(v)),{start:r,end:n}},N=function(e){var t,r,d,f,m,b,y,v,g=(0,u.e)().queryParams,_=null!=(m=null!=(f=null==e?void 0:e.dateGroupingOverride)?f:g.date_grouping)?m:"weekly",w=g.filters,k=g.predefined_range,N=null!=(b=null==e?void 0:e.comparisonModeOverride)?b:(t=g.comparison_mode)===x||t===j?t:"previous_period",P=null!=w&&(void 0===w?"undefined":p(w))==="object"?w:void 0,C=g.start_date?(0,o.default)(String(g.start_date)):void 0,A=g.end_date?(0,o.default)(String(g.end_date)):void 0,I=(0,a.default)(new Date),T=null!=(y=S(k))?y:{start:(0,s.default)(I,3),end:I},E=T.end,L=null!=A?A:E,D=null!=(v=null!=C?C:null==T?void 0:T.start)?v:(0,s.default)(L,3),M=(null==e?void 0:e.comparisonRangeDays)&&e.comparisonRangeDays>0&&e.endDateOverride?(0,o.default)(e.endDateOverride):L,R=(null==e?void 0:e.comparisonRangeDays)&&e.comparisonRangeDays>0?(0,l.default)(M,e.comparisonRangeDays):D,B=Math.max(1,(0,n.default)(M,R)+1),z=N===x?{start:(0,s.default)(R,1),end:(0,s.default)(M,1)}:N===j?{start:(0,c.default)(R,1),end:(0,c.default)(M,1)}:{start:(0,l.default)(R,B),end:(0,l.default)(R,1)},F=O(P,k);return r=z.start,d=z.end,{currentRangeInDays:(0,n.default)(M,R)+1,currentParams:{start_date:(0,i.default)(R,h),end_date:(0,i.default)(M,h),date_grouping:_,filters:F},compareParams:{start_date:(0,i.default)(r,h),end_date:(0,i.default)(d,h),date_grouping:_,filters:F},comparisonMode:N}}},527350:function(e,t,r){"use strict";r.d(t,{a:()=>a});var n=r(131906),i=r(379810),o=r(203468),a=function(e){var t,r=e.fetchData,a=e.queryKey,s=e.enabled,l=e.comparisonRangeDays,c=e.endDateOverride,u=e.dateGroupingOverride,d=e.skipCurrentFetch,f=void 0!==d&&d,m="number"==typeof l||!!c||!!u,p=(0,i.cM)(m?{comparisonRangeDays:l,endDateOverride:c,dateGroupingOverride:u}:void 0),b=p.currentParams,h=p.compareParams,y=(0,n.useQueries)([{queryKey:(0,o.Nb)(a,"current",b),queryFn:function(){return r(b)},keepPreviousData:!0,notifyOnChangeProps:"tracked",enabled:!f},{queryKey:(0,o.Nb)(a,"compare",h),queryFn:function(){return r(h)},keepPreviousData:!0,notifyOnChangeProps:"tracked",enabled:void 0===s||s}]),v=y[0],g=y[1];return{currentData:null!=(t=f?[]:v.data||[])?t:[],previousData:g.data||[],isLoadingCurrent:!!v.isLoading,isLoadingCompare:!!g.isLoading,isFetchingCurrent:!!v.isFetching,isError:!!(v.isError||g.isError)}}},82681:function(e,t,r){"use strict";r.d(t,{L$:()=>m,if:()=>d,zu:()=>f});var n=r(739792),i=r(285122),o=r(903640);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||c(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}var u=function(e){return e||""},d=function(e){return e.map(function(e){return{id:e.Date,label:u(e.Date),Date:u(e.Date),course_enrollments:e.course_enrollments||0}})},f=function(e){var t={},r=l(["enrollments","started","completed","dropouts"].map(function(e){return(0,n.t)(["settings.analytics.dashboards.courses","course_activity","series",e])}),4),o=r[0],a=r[1],c=r[2],u=r[3],d={"Course enrollments":o,"Courses started":a,"Courses completed":c,"Course dropouts":u};return e.forEach(function(e){var r,n,i="string"==typeof e.date||"number"==typeof e.date?String(e.date):"";if(i){var l="string"==typeof e.type?e.type:"";if(l){var f=null!=(r=d[l])?r:l;t[i]||(t[i]=(s(n={},o,0),s(n,a,0),s(n,c,0),s(n,u,0),n)),t[i][f]+="number"==typeof e.count||"string"==typeof e.count?Number(e.count):0}}}),Object.entries(t).sort(function(e,t){var r=l(e,1)[0],n=l(t,1)[0];return r.localeCompare(n)}).map(function(e){var t=l(e,2),r=t[0],n=t[1],o=(0,i.ie)(r,{month:"short",day:"numeric",year:"numeric"});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({id:r,Date:r,label:o},n)})},m=function(e){var t=["0%","1-25%","26-50%","51-75%","76-99%","100%"],r=((function(e){if(Array.isArray(e))return a(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(function(e,r){return t.indexOf(e.completion_rate)-t.indexOf(r.completion_rate)}),n=(0,o.EC)(r.length),i=r.reduce(function(e,t){return e+Number(t.number_of_students)},0);return r.map(function(e,t){var r=Number(e.number_of_students),o=i>0?r/i*100:0,a="".concat(o.toFixed(1),"%");return{id:e.completion_rate,label:e.completion_rate,value:r,color:n[t],percentage:o,formattedPercentage:a}})}},733697:function(e,t,r){"use strict";r.d(t,{Av:()=>p,Hl:()=>h,Od:()=>f,Rc:()=>c,ib:()=>d});var n=r(552676),i=r(217123),o=r(120651);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var l=function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&null!==e},c=function(e){return e.map(function(e){return{x:e.day,y:e.time_range,value:e.visits}})},u=function(e){return e||""},d=function(e){return e.map(function(e){return{id:e.Date,label:u(e.Date),Date:u(e.Date),total_rsvps:e.total_rsvps||0}})},f=function(e){return e.map(function(e){return{id:e.date,label:u(e.date),events_completed:e.events_completed,rsvps:e.rsvps,live_attendees:e.live_attendees}})},m=function(e){return l(e)},p=function(e){return e.filter(m).map(function(e){return s(a({},e),{name:(0,n.jsx)(o.Q,{href:"https://".concat(e.request_host).concat(e.show_path),children:e.name}),name_for_csv:e.name,rsvps:Number(e.rsvps),live_attendees:Number(e.live_attendees),date_for_csv:e.date,date:(0,i.default)(new Date(e.date),"MMM dd, yyyy")})})},b=function(e){return l(e)},h=function(e){return e.filter(b).map(function(e){return s(a({},e),{name:(0,n.jsx)(o.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.name}),name_for_csv:e.name})})}},636171:function(e,t,r){"use strict";r.d(t,{Is:()=>d,Lu:()=>u,QD:()=>c,Qv:()=>f,VF:()=>l,Wx:()=>m,X_:()=>p,eJ:()=>b,hi:()=>a,w$:()=>s});var n=r(552676),i=r(120651),o=function(e){return e||""},a=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:e.Date,total_members:e.total_members||0}})},s=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:e.Date,active_members:e.active_members||0}})},l=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:e.Date,new_members:e.new_members||0}})},c=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:e.Date,mau:e.mau||0}})},u=function(e){return Object.values(e.reduce(function(e,t){var r=t.Date;e[r]||(e[r]={id:r,label:o(r),presence:0,participation:0,contribution:0,connection:0});var n=t.Category.toLowerCase();return n in e[r]&&(e[r][n]=t.Value||0),e},{})).sort(function(e,t){return e.label.localeCompare(t.label)})},d=function(e){return e.map(function(e){return{member:(0,n.jsx)(i.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.member}),score:e.score||"0",public_uid:e.public_uid||"",request_host:e.request_host||""}})},f=function(e){return e.map(function(e){return{display_title:(0,n.jsx)(i.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.display_title}),Comments:e.Comments||0,public_uid:e.public_uid||"",request_host:e.request_host||""}})},m=function(e){return e.map(function(e){return{display_title:(0,n.jsx)(i.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.display_title}),Posts:e.Posts||0,public_uid:e.public_uid||"",request_host:e.request_host||""}})},p=function(e){return e.map(function(e){return{display_title:(0,n.jsx)(i.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.display_title}),Likes:e.Likes||"0",public_uid:e.public_uid||"",request_host:e.request_host||""}})},b=function(e){return e.map(function(e){return{x:e.day_of_week,y:e.time_range,value:e.visits||0}})}},223016:function(e,t,r){"use strict";r.d(t,{Q9:()=>u,ZL:()=>l,b3:()=>s,eM:()=>c,gy:()=>d,sh:()=>m,yk:()=>a,zv:()=>f});var n=r(552676),i=r(120651),o=function(e){return e||""},a=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),messages:e.messages||0}})},s=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),conversations:e.conversations||0}})},l=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),conversations:e.conversations||0}})},c=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),messages:e.messages||0}})},u=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),conversations:e.conversations||0}})},d=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),messages:e.messages||0}})},f=function(e){return e.map(function(e){return{id:e.Date,label:o(e.Date),Date:o(e.Date),messages:e.messages||0}})},m=function(e){return e.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={name:(0,n.jsx)(i.Q,{href:"https://".concat(e.request_host,"/u/").concat(e.public_uid),children:e.name}),name_for_csv:e.name,conversations:e.conversations||"0",direct_messages:e.direct_messages||"0",group_messages:e.group_messages||"0"},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})}},847806:function(e,t,r){"use strict";r.d(t,{AO:()=>b,BE:()=>c,MJ:()=>p,lY:()=>m,mG:()=>u,oB:()=>d,tc:()=>h});var n=r(285122),i=r(903640);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&null!==e},s=function(e){return(0,n.ie)(e,{month:"short",day:"numeric",year:"numeric"})},l=function(e,t){var r=((function(e){if(Array.isArray(e))return o(e)})(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(function(e,t){return e.price_type.localeCompare(t.price_type)}),n=(0,i.EC)(r.length),a=r.reduce(function(e,r){return e+Number(r[t])},0);return r.map(function(e,r){var i=Number(e[t]),o=a>0?i/a*100:0,s="".concat(o.toFixed(1),"%");return{id:e.price_type,label:e.price_type,value:i,color:n[r],percentage:o,formattedPercentage:s}})},c=function(e){return l(e,"sales_count")},u=function(e){return l(e,"revenue_total")},d=function(e){return e.map(function(e){return{id:e.Date,label:s(e.Date),"One-time":e.onetime||0,Subscription:e.subscription||0,Installments:e.installments||0,Refunds:e.refunds||0,total:e.onetime+e.subscription+e.installments+e.refunds}})},f=function(e){return a(e)&&"string"==typeof e.Paywall&&("number"==typeof e.Amount||"string"==typeof e.Amount)&&("string"==typeof e.Count||"number"==typeof e.Count)},m=function(e){var t=e.filter(f),r=t.map(function(e){return Number(e.Amount)}).reduce(function(e,t){return e+t},0);return t.map(function(e,t){var n=Number(e.Amount),i=r>0?n/r*100:0,o="".concat(i.toFixed(1),"%");return{id:"paywall-".concat(t),paywall:e.Paywall,amount:n,count:Number(e.Count),percentage:i,formattedPercentage:o}})},p=function(e){return e.map(function(e){return{id:e.Date,label:s(e.Date),"One-time":e.onetime||0,Refunds:e.refunds||0}})},b=function(e){return e.map(function(e){return{id:e.Date,label:s(e.Date),Installments:e.Installments||0,Refunds:e.Refunds||0}})},h=function(e){return e.map(function(e){return{id:e.Date,label:s(e.Date),"Net Change":e.NetChange||0,Renewals:e.Renewals||0,New:e.New||0,Churn:e.Churn||0}})}},120651:function(e,t,r){"use strict";r.d(t,{Q:()=>o});var n=r(552676),i=r(701168),o=function(e){var t=e.href,r=e.children,o=e.className,a=e.newTab,s=void 0===a||a;return(0,n.jsx)("a",{href:t,target:s?"_blank":void 0,rel:s?"noopener noreferrer":void 0,className:(0,i.A)("text-current transition-none visited:text-current hover:text-current focus:text-current active:text-current",o),children:r})};o.displayName="TableInlineLink"},888140:function(e,t,r){"use strict";r.d(t,{$5:()=>u,Hl:()=>c,Kn:()=>d,L1:()=>f,SY:()=>l,g$:()=>o,gk:()=>n,j3:()=>a,o8:()=>i,yO:()=>s});var n=function(e){return e},i=function(e){return e},o=function(e){return e},a=function(e){return e},s=function(e){return e},l=function(e){return e},c=function(e){return Object.values(e.reduce(function(e,t){var r=t.Date;return e[r]||(e[r]={id:r,label:r,Date:r,unique_visitors:0,page_views:0,bounce_rate:0}),"Unique Visitors"===t.type?e[r].unique_visitors=t.count:"Page Views"===t.type?e[r].page_views=t.count:"Bounce Rate %"===t.type&&(e[r].bounce_rate=t.count),e},{}))},u=function(e){return e.map(function(e){return{id:e.Date,label:e.Date||"",Date:e.Date||"",unique_visitors:e.unique_visitors||0}})},d=function(e){return e.map(function(e){return{id:e.Date,label:e.Date||"",Date:e.Date||"",page_views:e.page_views||0}})},f=function(e){return e.map(function(e){return{id:e.Date,label:e.Date||"",Date:e.Date||"",bounce_rate:e.bounce_rate||0}})}},425389:function(e,t,r){"use strict";r.d(t,{D:()=>a});var n=r(691525),i=r(65766),o=i.RV.ltr,a=function(){var e,t,r,a,s=(0,n.wh)().currentCommunity,l=(null==s||null==(t=s.payment_processor)||null==(e=t.currency)?void 0:e.symbol)||"$",c=(null==s||null==(a=s.payment_processor)||null==(r=a.currency)?void 0:r.direction)||o,u=c===i.RV.ltr?l:"",d=c===i.RV.rtl?l:"";return{currencySymbol:l,currencyDirection:c,prefix:u,suffix:d}}},203345:function(e,t,r){"use strict";r.d(t,{$:()=>i});var n=r(552676),i=function(){return(0,n.jsx)("div",{className:"my-8",children:(0,n.jsx)("div",{className:"bg-overlay-dark h-[1px] w-full"})})}},880981:function(e,t,r){"use strict";r.d(t,{s:()=>N});var n=r(552676),i=r(275271),o=r(932699),a=r(739792),s=r(489860),l=r(778152),c=r(840905),u=r(381636),d=r(300864),f=r(984954),m=r(22424),p=r(39905),b=r(767900),h=r(227851),y=r(403697),v=r(410623),g=function(){var e="settings.mobile_app.design_section",t=(0,h.Gc)().watch,r=t("brand_color_light_mode"),i=t("brand_color_dark_mode"),o=t("button_text_color_light"),s=t("button_text_color_dark");return(0,n.jsx)("div",{className:"bg-tertiary mt-2 rounded-lg px-6 py-5",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(b.l.Item,{name:"brand_color_light_mode",label:(0,a.t)([e,"brand_color_light"]),hideDescription:!0,className:"flex !items-center justify-between !border-none",inline:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof r&&r?r.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"brand_color_light_mode"})]}),(0,n.jsxs)(b.l.Item,{name:"brand_color_dark_mode",inline:!0,label:(0,a.t)([e,"brand_color_dark"]),className:"flex !items-center justify-between !border-none",hideDescription:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof i&&i?i.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"brand_color_dark_mode"})]}),(0,n.jsxs)(b.l.Item,{name:"button_text_color_light",label:(0,a.t)([e,"button_text_color_light"]),hideDescription:!0,className:"flex !items-center justify-between !border-none",inline:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof o&&o?o.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"button_text_color_light"})]}),(0,n.jsxs)(b.l.Item,{name:"button_text_color_dark",inline:!0,label:(0,a.t)([e,"button_text_color_dark"]),className:"flex !items-center justify-between !border-none",hideDescription:!0,children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",color:"text-dark",children:"string"==typeof s&&s?s.toUpperCase():""}),(0,n.jsx)(b.l.ColorPickerV2,{name:"button_text_color_dark"})]}),(0,n.jsx)(v.Y,{name:"logo_light",isHorizontal:!0,className:"py-2",isCropEnabled:!1,label:(0,a.t)([e,"logo_light"]),title:(0,a.t)([e,"logo_light"]),description:(0,a.t)([e,"logo_light_description"]),aspectRatio:y.pI.COMMUNITY_LOGO_V3}),(0,n.jsx)(v.Y,{name:"logo_dark",isHorizontal:!0,className:"py-2",isCropEnabled:!1,label:(0,a.t)([e,"logo_dark"]),title:(0,a.t)([e,"logo_dark"]),description:(0,a.t)([e,"logo_dark_description"]),aspectRatio:y.pI.COMMUNITY_LOGO_V3})]})})},_=function(e){var t=e.defaultValues,r=e.handleSubmit,i=e.isSaving;return(0,n.jsxs)(b.l,{onSubmit:r,defaultValues:t,children:[(0,n.jsx)(g,{}),(0,n.jsx)("div",{className:"mt-6 flex justify-end",children:(0,n.jsx)(p.z,{type:"submit",variant:"circle",disabled:i,children:i?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})},x=r(203345),j=r(853788),w=function(e){var t,r,i=e.defaultValues,o=e.handleSubmit,s=e.isSaving,l=(0,h.cI)({defaultValues:i,mode:"onChange"});return(0,n.jsx)(h.RV,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={children:(0,n.jsxs)(b.l,{onSubmit:o,defaultValues:i,children:[(0,n.jsx)("div",{className:"bg-tertiary mt-2 rounded-lg px-6 py-5",children:(0,n.jsx)(j.k,{})}),(0,n.jsx)("div",{className:"mt-6 flex justify-end",children:(0,n.jsx)(p.z,{type:"submit",variant:"circle",disabled:s,children:s?(0,a.t)("saving"):(0,a.t)("save_changes")})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},O=r(82442);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e,t){if(!e||!t)return null;var r=t.find(function(t){return t.signed_id===e});return r||null},N=function(){var e,t,r,p=(0,a.t)("settings_nav_v3.branded_apps_dashboard.title"),b=(0,m.w)(),h=b.defaultValues,y=b.mobileHomeSegments,v=b.mutate,g=b.isSaving,j=b.isLoading,N=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),P=N[0],C=N[1];(0,i.useEffect)(function(){y&&y.length>0&&C(y)},[y]);var A=(0,s.C)(),I=A.designConfigData,T=A.isLoading,E=A.mutateDesignConfig;if(T||j||(0,o.isEmpty)(I))return(0,n.jsxs)("div",{className:"mx-auto max-w-[784px] px-8 pb-8",children:[(0,n.jsx)(l.S,{title:p,bodyClassNames:"view-plans"}),(0,n.jsx)(d.y,{disableRightSidebar:!0}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(c.gi,{variant:"mobile-home-segments"})})]});var L=null==I?void 0:I.config,D=null==I?void 0:I.theme,M=null==I?void 0:I.attachments,R=k(null==L||null==(t=L.community_logo_light)?void 0:t.signed_id,M),B=k(null==L||null==(r=L.community_logo_dark)?void 0:r.signed_id,M),z={brand_color_light_mode:(null==D?void 0:D.brand_color_light_mode)||"",brand_color_dark_mode:(null==D?void 0:D.brand_color_dark_mode)||"",button_text_color_light:(null==D?void 0:D.button_text_color_light)||"",button_text_color_dark:(null==D?void 0:D.button_text_color_dark)||"",logo_light:(null==R?void 0:R.signed_id)||"",logo_dark:(null==B?void 0:B.signed_id)||""};return(0,n.jsx)(f.X,{orderedMobileHomeSegments:P,setOrderedMobileHomeSegments:C,children:(0,n.jsxs)("div",{className:"mx-auto max-w-[784px] px-8 pb-8",children:[(0,n.jsx)(l.S,{title:p,bodyClassNames:"view-plans"}),(0,n.jsx)(d.y,{disableRightSidebar:!0}),(0,n.jsxs)("div",{className:"bg-primary border-primary mt-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"border-primary flex justify-between",children:(0,n.jsx)(u.Z.TitleSm,{children:(0,a.t)("settings_nav_v3.branded_apps_dashboard.navigation")})})})}),(0,n.jsx)(x.$,{}),(0,n.jsx)(w,{defaultValues:h,handleSubmit:function(e){var t,r,n=P.map(function(e){return e.kind});v({community_setting:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={mobile_home_segments_order:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)})},isSaving:g}),(0,n.jsx)("div",{className:"mt-4 flex",children:(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"border-primary flex justify-between",children:(0,n.jsx)(u.Z.TitleSm,{children:(0,a.t)("settings_nav_v3.branded_apps_dashboard.branding")})})})}),(0,n.jsx)(x.$,{}),(0,n.jsx)(_,{defaultValues:z,handleSubmit:function(e){E({branded_mobile_app:{brand_color_light_mode:e.brand_color_light_mode||"",brand_color_dark_mode:e.brand_color_dark_mode||"",button_text_color_light:e.button_text_color_light||"",button_text_color_dark:e.button_text_color_dark||"",community_logo_light:e.logo_light||"",community_logo_dark:e.logo_dark||""}})},isSaving:g})]}),(0,n.jsx)("div",{className:"bg-primary border-primary mt-6 rounded-lg border px-8 py-7",children:(0,n.jsx)(O.A,{})})]})})}},82442:function(e,t,r){"use strict";r.d(t,{A:()=>I});var n=r(552676),i=r(275271),o=r(739792),a=r(767900),s=r(751169),l=r(131906),c=r(956018),u=function(){var e=(0,l.useQuery)({queryKey:["spaces"],queryFn:function(){return c.r.list({params:{include_sidebar:!0}})}});return{data:e.data,isLoading:e.isLoading,error:e.error}},d=r(534431),f=r(693723),m=r(480610),p=r(39905),b=r(381636),h=r(203345),y=r(93199),v=r(104342),g=r(60878),_="welcome-data",x=function(){var e=(0,g.pm)(),t=(0,l.useQueryClient)(),r=(0,l.useQuery)({queryKey:[_],queryFn:function(){return(0,y.UT)(v.b.welcomeData.get())}});return{data:r.data,isLoading:r.isLoading,error:r.error,updateWelcomeSpaces:(0,l.useMutation)({mutationFn:function(e){return(0,y.aU)(v.b.welcomeData.put(),e)},onSuccess:function(r){t.setQueryData([_],r),e.success((0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.save.success"))},onError:function(){e.error((0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.save.error"))}}).mutateAsync}},j=function(){var e=(0,g.pm)(),t=(0,l.useQueryClient)(),r=(0,l.useQuery)({queryKey:["welcome-spaces"],queryFn:function(){return(0,y.UT)(v.b.welcomeSpaces.get())}});return{data:r.data,isLoading:r.isLoading,error:r.error,updateWelcomeSpaces:(0,l.useMutation)({mutationFn:function(e){return(0,y.aU)(v.b.welcomeSpaces.put(),e)},onSuccess:function(r){t.setQueryData(["welcome-spaces"],r),e.success((0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.save.success"))},onError:function(){e.error((0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.save.error"))}}).mutateAsync}};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}var N="settings_nav_v3.branded_apps_dashboard.welcome_space",P={label:(0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.no_space"),value:"",group:"",leftAddon:""},C=(0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.spaces"),A=(0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.screens"),I=function(){var e,t,r,l,c,y=u(),v=y.data,g=y.isLoading,_=x(),w=_.data,I=_.isLoading,T=_.updateWelcomeSpaces,E=(0,d.m)({status:"published"}).homeTabsPages,L=(0,m.z)().brandedAppsBuilder.isWelcomePagesHomeTabsEnabled,D=j(),M=D.data,R=D.isLoading,B=D.updateWelcomeSpaces,z=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||k(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),F=z[0],U=z[1],Z=null==w?void 0:w.welcome_data,G=null==M?void 0:M.welcome_spaces,q=function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:U(!0),t.label=1;case 1:if(t.trys.push([1,,6,7]),!L)return[3,3];return[4,T(W(e))];case 2:return t.sent(),[3,5];case 3:return[4,B(e)];case 4:t.sent(),t.label=5;case 5:return[3,7];case 6:return U(!1),[7];case 7:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)})})()},V=(0,i.useMemo)(function(){var e=((null==v?void 0:v.records)||[]).map(function(e){return{label:e.name,value:String(e.id),group:C,leftAddon:e.emoji||""}}),t=Object.values(E||{}).filter(function(e){var t,r;return!(null==(t=e.meta)?void 0:t.isInNav)&&!(null==(r=e.meta)?void 0:r.isDefaultPage)}).map(function(e){var t,r;return{label:(null==(t=e.meta)?void 0:t.custom_name)||(null==(r=e.meta)?void 0:r.kind),value:e.id,group:A,leftAddon:""}});return L?[P].concat(S(t),S(e)):[P].concat(S(e))},[null==v?void 0:v.records,E,L]),W=function(e){var t=V.find(function(t){return t.value===e.new_member_space_id}),r=V.find(function(t){return t.value===e.regular_member_space_id}),n={welcome_data:{spaces:{new_member_space_id:null,regular_member_space_id:null},screens:{new_member_screen_id:null,regular_member_screen_id:null}}};return t&&(t.group===C?n.welcome_data.spaces.new_member_space_id=Number(t.value):t.group===A&&(n.welcome_data.screens.new_member_screen_id=t.value)),r&&(r.group===C?n.welcome_data.spaces.regular_member_space_id=Number(r.value):r.group===A&&(n.welcome_data.screens.regular_member_screen_id=r.value)),n},H=function(e){return null==e?"":String(e)},Q=(0,i.useMemo)(function(){var e=function(e){return V.some(function(t){return t.value===e})?e:P.value};if(L){var t,r,n,i,o=H((null==Z||null==(t=Z.spaces)?void 0:t.new_member_space_id)||(null==Z||null==(r=Z.screens)?void 0:r.new_member_screen_id)),a=H((null==Z||null==(n=Z.spaces)?void 0:n.regular_member_space_id)||(null==Z||null==(i=Z.screens)?void 0:i.regular_member_screen_id));return{new_member_space_id:e(o),regular_member_space_id:e(a)}}var s=H(null==G?void 0:G.new_member_space_id),l=H(null==G?void 0:G.regular_member_space_id);return{new_member_space_id:e(s),regular_member_space_id:e(l)}},[L,null==Z||null==(t=Z.screens)?void 0:t.new_member_screen_id,null==Z||null==(r=Z.screens)?void 0:r.regular_member_screen_id,null==Z||null==(l=Z.spaces)?void 0:l.new_member_space_id,null==Z||null==(c=Z.spaces)?void 0:c.regular_member_space_id,null==G?void 0:G.new_member_space_id,null==G?void 0:G.regular_member_space_id,V]);return g||I||R?(0,n.jsx)(s.a,{}):(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:"border-primary flex justify-between",children:(0,n.jsx)(b.Z.TitleSm,{children:(0,o.t)("settings_nav_v3.branded_apps_dashboard.welcome_space.title")})})})}),(0,n.jsx)(h.$,{}),(0,n.jsx)("div",{children:(0,n.jsxs)(a.l,{onSubmit:function(e){return q(e)},defaultValues:Q,children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(f.x,{id:"new_member_space_id",name:"new_member_space_id",isHorizontal:!0,className:"!flex w-full",translationRoot:N,children:(0,n.jsx)(a.l.TextSelect,{name:"new_member_space_id",options:V,label:"",groupBy:function(e){return e.group},initialValue:Q.new_member_space_id})})}),(0,n.jsx)("div",{children:(0,n.jsx)(f.x,{id:"regular_member_space_id",name:"regular_member_space_id",isHorizontal:!0,className:"!flex w-full",translationRoot:N,children:(0,n.jsx)(a.l.TextSelect,{label:"",name:"regular_member_space_id",options:V,groupBy:function(e){return e.group},initialValue:Q.regular_member_space_id})})}),(0,n.jsx)("div",{className:"mt-6 flex justify-end",children:(0,n.jsx)(p.z,{type:"submit",variant:"circle",disabled:F,children:F?(0,o.t)("saving"):(0,o.t)("save_changes")})})]})})]})}},575563:function(e,t,r){"use strict";r.d(t,{r:()=>a});var n=r(552676),i=r(739792),o=r(381636),a=function(){return(0,n.jsx)("div",{className:"border-primary flex h-14 items-center border-b px-6 py-2",children:(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",children:(0,i.t)("settings_nav_v3.community_inbox.label")})})}},279893:function(e,t,r){"use strict";r.d(t,{z:()=>b});var n=r(552676),i=r(619803),o=r.n(i),a=r(932699),s=r(918594),l=r(739792),c=r(437103),u=r(308683),d=r(957363),f=r(381636),m=r(919877),p=function(e){var t,r,i=e.isDirect,a=e.chatRoomName,s=e.timestamp,l=e.lastMessage,c=e.isUnread,u=e.isAiSnoozed,p=!(0,m.Z)(new Date(l.created_at));return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:o()("truncate",p?"max-w-[106px]":"max-w-[130px]"),children:(0,n.jsx)(f.Z.BodySm,{truncate:!0,weight:"font-semibold",children:a})}),(0,n.jsx)("span",{className:"mt-[-1px] min-w-fit shrink-0",children:(0,n.jsx)(f.Z.BodySm,{as:"time",weight:"font-medium",color:"text-timestamp",children:s})}),(0,n.jsxs)("div",{className:"flex grow justify-end",children:[u&&(0,n.jsx)(d.JO,{type:"16-ai-snooze-v3",size:16}),c&&(0,n.jsx)(d.JO,{type:"16-inbox-unread",size:16})]})]}),(0,n.jsx)("div",{className:"mt-0.5",children:(0,n.jsx)("p",{className:"text-default !line-clamp-1 flex items-center overflow-hidden hyphens-auto break-all text-left text-sm",children:"".concat(i?"":"".concat(null==(t=l.sender)?void 0:t.name,": ")).concat((null==(r=l.body)?void 0:r.circle_ios_fallback_text)||"")})})]})},b=function(e){var t=e.chat,r=e.path,i=e.isBotType,m=void 0!==i&&i,b=e.shouldHightlightChat,h=void 0!==b&&b,y=e.isUnread,v=t.community_bot_profile,g=t.community_member,_=t.last_message,x=void 0===_?{}:_,j=t.id,w=t.ai_snoozed,O=m?v:g,S=m&&!O.avatar_url;return(0,a.isNull)(x)?null:(0,n.jsx)("div",{className:o()({"border-secondary-dark mx-2 border-b last:border-none":!h}),children:(0,n.jsxs)(s.OL,{className:o()("hover:bg-secondary-dark -mx-2 block cursor-pointer py-[9px]",h?"bg-[#674FD90A]/[.04] px-6":"rounded-lg px-4"),activeClassName:"bg-secondary-dark",to:r,"data-testid":"chat-room-dm-list",children:[h&&(0,n.jsxs)("div",{className:"-mt-1",children:[(0,n.jsx)(d.JO,{type:"20-ai-bot-gradient",size:20,className:"mt-1"}),(0,n.jsx)(f.Z.LabelXxs,{weight:"semibold",as:"span",textTransform:"uppercase",color:"bg-gradient-to-t from-[#6C47D2] to-[#516DF1] bg-clip-text text-transparent",children:(0,l.t)("messaging.agent")})]}),(0,n.jsx)("div",{className:"flex w-full items-start justify-between",children:(0,n.jsxs)("div",{className:"flex w-full items-center space-x-3",children:[S?(0,n.jsx)(d.JO,{type:"36-ai-bot",size:36,className:"!h-[36px] !w-[36px] shrink-0"}):(0,n.jsx)(c.q,{isDirect:!0,otherParticipants:[O]}),(0,n.jsx)(p,{isDirect:!0,chatRoomName:O.name,timestamp:(0,u.TF)(x.created_at,{format:"short"}),lastMessage:x,isUnread:void 0!==y&&y,isAiSnoozed:w})]})})]},j)})}},573902:function(e,t,r){"use strict";r.d(t,{o:()=>a});var n=r(552676),i=r(739792),o=r(381636),a=function(){return(0,n.jsxs)("div",{className:"flex h-[calc(100dvh-160px)] flex-col items-center justify-center",children:[(0,n.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,i.t)("community_inbox.chats.no_conversations")}),(0,n.jsx)(o.Z.LabelSm,{children:(0,i.t)("community_inbox.chats.no_conversations_description")})]})}},284435:function(e,t,r){"use strict";r.d(t,{j:()=>y});var n=r(552676),i=r(175850),o=r(535756),a=r(25593),s=r(547144),l=r(861853),c=r(751169),u=r(834675),d=r(441342),f=r(263271),m=function(){var e=(0,d.wh)().currentCommunity,t=null==e?void 0:e.id,r=(0,l.Dk)(),n=r.appendMessage,i=r.updateMessage,o=r.destroyMessage,a=r.appendChat,s=r.updateChat,c=r.destroyChat;return(0,f.s)({channel:"CommunityInbox::AdminChannel",community_id:t,canCreateConnection:!!t,onMessageReceive:function(e){switch(e.event){case"createMessage":n(e.json_message,"admin");break;case"updateMessage":i(e.json_message);break;case"destroyMessage":o(e.json_message.id);break;case"createChat":var t=e.json_message;t.has_member_interaction&&a(t,"admin");break;case"updateChat":var r=e.json_message;r.has_member_interaction&&s(r,"admin");break;case"destroyChat":c(e.json_message.id,"admin")}}},[t])},p=r(279893),b=r(573902),h=function(e){var t=e.activeSort,r=e.activeChatType,i=e.activeAgent,o=(0,u.c)({sort:t,filter:"has_member_interaction",chatType:r,agentId:i.id}),d=o.isChatsLoading,f=o.hasNextPage,h=o.fetchNextPage,y=(0,l.Dk)(),v=y.adminChats,g=y.currentChatId;return(m(),d)?(0,n.jsx)("div",{className:"h-full overflow-auto p-2",children:(0,n.jsx)(c.a,{})}):(0,n.jsxs)(n.Fragment,{children:[0==v.length&&(0,n.jsx)(b.o,{}),(0,n.jsx)(a.Z,{className:"!h-[calc(100dvh-160px)] overflow-auto px-2",style:{overflow:"auto"},scrollThreshold:.8,next:h,height:600,hasMore:!!f,dataLength:v.length,loader:(0,n.jsx)(c.a,{center:!0}),children:v.map(function(e){var t=e.id==g;return(0,n.jsx)(p.z,{chat:e,path:(0,s.Av)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_admin},e.id)})})]})},y=function(e){var t=e.activeSort,r=e.activeChatType,a=e.activeAgent;return(0,n.jsx)(o.S,{renderFunc:i.$,children:(0,n.jsx)(h,{activeSort:t,activeChatType:r,activeAgent:a})})}},25488:function(e,t,r){"use strict";r.d(t,{C:()=>v});var n=r(552676),i=r(25593),o=r(739792),a=r(605603),s=r(547144),l=r(861853),c=r(548298),u=r(751169),d=r(279893),f=r(573902),m=r(932699),p=r(131906),b=r(93199),h=r(698173),y=function(e){var t=(0,l.Dk)().setChats,r=(0,p.useInfiniteQuery)(["community-inbox-search",e],function(t){var r,n=t.pageParam;return r=void 0===n?1:n,(0,b.UT)(h.a.search.communityInbox.chats({params:{page:r,query:e}}))},{enabled:e.length>0,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,m.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},onSuccess:function(e){t((null==e?void 0:e.pages)||[],"admin")}});return{fetchNextPage:r.fetchNextPage,hasNextPage:r.hasNextPage,isLoading:r.isFetching}},v=function(e){var t=e.searchQuery,r=e.setSearchQuery,m=e.setIsSearchBarVisible,p=(0,c.c)(t,300),b=y(p),h=b.isLoading,v=b.fetchNextPage,g=b.hasNextPage,_=(0,l.Dk)(),x=_.adminChats,j=_.currentChatId;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-primary my-1 flex h-10 w-full items-center justify-center",children:(0,n.jsx)(a.M,{searchValue:t,onChange:r,onKeyPress:function(e){e.shiftKey||"Enter"!==e.key||e.preventDefault()},onClickCancel:function(){m(!1),r("")},placeholder:(0,o.t)("community_inbox.header.placeholder"),className:"!h-[34px] duration-500 ease-in",showCancelButton:!0,shouldAutoFocus:!0})}),t&&(h?(0,n.jsx)("div",{className:"h-auto overflow-auto p-2",children:(0,n.jsx)(u.a,{center:!0})}):(0,n.jsxs)(n.Fragment,{children:[0==x.length&&p.length>0&&(0,n.jsx)(f.o,{}),(0,n.jsx)(i.Z,{className:"!h-[calc(100dvh-160px)] overflow-auto px-2",scrollThreshold:.8,next:v,hasMore:!!g,dataLength:x.length,loader:(0,n.jsx)(u.a,{center:!0}),height:"100%",children:x.map(function(e){var t=e.id==j;return(0,n.jsx)(d.z,{chat:e,path:(0,s.Av)({id:e.id.toString()}),isUnread:!t&&e.has_unread_messages_for_admin},e.id)})})]}))]})}},115945:function(e,t,r){"use strict";r.d(t,{h:()=>g});var n=r(552676),i=r(275271),o=r(739792),a=r(775148),s=r(691525),l=r(293291),c=r(957363),u=r(380171),d=r(943544),f=r(381636),m=function(e){var t=e.className,r=e.activeItem,i=e.onItemClick,o=e.items,a=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:"bottom-start",className:t,buttonClassName:"w-32",menuItemsClassName:"!w-40",buttonDataTestId:a,button:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex h-[34px] !w-fit justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"max-w-18 gap-x-2 truncate text-left",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:r.name})}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})})]}),children:o.map(function(e){var t=e.name,o=e.id;return(0,n.jsx)(d.Lt.Item,{onClick:function(){return i(e)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r.id===o,"aria-label":t,children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{className:"block w-full truncate",children:t})})})},o)})})},p=r(682384),b=function(e){var t=e.className,r=e.activeItem,i=e.localeScope,a=e.onItemClick,s=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:"bottom-start",className:t,buttonClassName:"w-full",menuItemsClassName:"!w-40",buttonDataTestId:s,button:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex justify-between !gap-1 rounded-md border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"flex gap-x-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:(0,o.t)([i,r])})}),(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})]}),children:p.UC.map(function(e){var t=e.value,s=e.icon;return(0,n.jsx)(d.Lt.Item,{onClick:function(){return a(t)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r===t,"aria-label":(0,o.t)([i,t]),children:(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(c.JO,{type:s,size:20}),(0,n.jsx)("span",{children:(0,o.t)([i,t])})]})})},t)})})},h=function(e){var t=e.className,r=e.activeItem,i=e.localeScope,a=e.onItemClick,s=e.items,l=e.button,u=e.direction,m=e.dataTestId;return(0,n.jsx)(d.Lt,{direction:void 0===u?"bottom-start":u,className:t,buttonClassName:"w-full",menuItemsClassName:"!w-40",buttonDataTestId:m,button:null!=l?l:(0,n.jsxs)(d.Lt.MenuButton,{className:"hover:bg-secondary-dark border-primary flex justify-between rounded-lg border bg-transparent !py-1.5 pl-3 pr-2 transition-colors",children:[(0,n.jsx)("div",{className:"flex gap-x-2",children:(0,n.jsx)(f.Z.LabelSm,{weight:"medium",children:(0,o.t)([i,r])})}),(0,n.jsx)(c.JO,{size:16,type:"16-chevron-triangle-down-small",className:"text-dark"})]}),children:s.map(function(e){return(0,n.jsx)(d.Lt.Item,{onClick:function(){return a(e)},children:(0,n.jsx)(d.Lt.ItemLink,{type:"button",active:r===e,"aria-label":(0,o.t)([i,e]),children:(0,n.jsx)("div",{className:"flex items-center gap-x-2",children:(0,n.jsx)("span",{children:(0,o.t)([i,e])})})})},e)})})};function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}var g=function(e){var t,r=e.activeSort,f=e.setActiveSort,g=e.activeChatType,_=e.setActiveChatType,x=e.activeAgent,j=e.setActiveAgent,w=e.setIsSearchBarVisible,O=((0,s.wh)().currentCommunitySettings||{}).community_inbox_chat_search_enabled,S=(t=(0,i.useState)([p.hP]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||v(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),k=S[0],N=S[1],P=(0,l.OH)({currentPage:1}).data;return(0,i.useEffect)(function(){var e;(null==P?void 0:P.records)&&P.records.length>0&&N([p.hP].concat(function(e){if(Array.isArray(e))return y(e)}(e=P.records)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},[P]),(0,n.jsxs)("div",{className:"bg-primary sticky top-0 z-10 my-1 flex h-10 items-center justify-between gap-2 pl-2 pr-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(b,{className:"min-w-fit",activeItem:g,localeScope:"community_inbox.filters",onItemClick:_,dataTestId:"chat-types-dropdown"}),(0,n.jsx)(m,{className:"min-w-fit",activeItem:x,onItemClick:function(e){return j(e)},items:k,dataTestId:"agent-dropdown"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h,{className:"min-w-fit",items:Object.values(p.W_),activeItem:r,localeScope:"community_inbox.filters",onItemClick:f,dataTestId:"sort-filter-dropdown",button:(0,n.jsx)(d.Lt.MenuButton,{className:"hover:bg-tertiary flex justify-between rounded-full bg-transparent !py-1.5 px-1 transition-colors",children:(0,n.jsx)(c.JO,{type:"16-sort-v2",className:"text-default",size:16})}),direction:"bottom-end"}),O&&(0,n.jsx)(u.T,{interactive:!1,content:(0,o.t)("community_inbox.header.search_messages"),children:(0,n.jsx)(a.h,{iconSize:20,buttonSize:24,name:"20-search-v3",ariaLabel:(0,o.t)("community_inbox.header.search_messages"),className:"!rounded-full",onClick:function(){return w(!0)}})})]})]})}},682384:function(e,t,r){"use strict";r.d(t,{Ki:()=>s,UC:()=>c,W_:()=>a,hP:()=>l});var n,i=r(739792);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={LATEST:"latest",OLDEST:"oldest"},s={ALL:"all",UNREAD:"admin_unread",AI_PAUSED:"ai_paused"},l={name:(0,i.t)("community_inbox.filters.all_agents"),id:0},c=Object.values((o(n={},s.ALL,{value:s.ALL,icon:"20-inbox"}),o(n,s.UNREAD,{value:s.UNREAD,icon:"20-inbox-unread"}),o(n,s.AI_PAUSED,{value:s.AI_PAUSED,icon:"20-inbox-snooze"}),n))},834675:function(e,t,r){"use strict";r.d(t,{c:()=>u});var n=r(275271),i=r(131906),o=r(682384),a=r(861853),s=r(93199),l=r(698173);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.filter,u=void 0===r?"":r,d=t.per_page,f=void 0===d?20:d,m=t.sort,p=void 0===m?o.W_.LATEST:m,b=t.chatType,h=void 0===b?o.Ki.ALL:b,y=t.agentId,v=void 0===y?0:y,g=t.isPinned,_=void 0!==g&&g,x=(0,a.Dk)(),j=x.setChats,w=x.appendChats,O=(e=(0,n.useState)(1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=O[0],k=O[1];(0,n.useEffect)(function(){k(1)},[h,u,_,v,p]);var N=function(e){var t={page:e,filter:u,per_page:f,sort:p,chat_type:h};return 0!==v&&(t.agent_id=v),(0,s.UT)(l.a.communityInbox.index({params:t}))},P=(0,i.useQuery)(["community-inbox",u,f,p,h,v,_,S],function(){return N(S)},{onSuccess:function(e){if(!_){var r=e||{},n=r.page,i=r.records,o=void 0===i?[]:i,a="mine"===t.filter?"member":"admin";1===n?j(o,a):w(o,a)}}}),C=P.data,A=void 0===C?{}:C,I=P.isLoading,T=(null==A?void 0:A.records)||[],E=(null==A?void 0:A.has_next_page)||!1;return{chats:T,isChatsLoading:I&&1===S,hasNextPage:E,fetchNextPage:function(){E&&k(A.page+1)}}}},103180:function(e,t,r){"use strict";r.d(t,{U:()=>i});var n=r(834675),i=function(){var e,t=(0,n.c)({filter:"mine",per_page:1,isPinned:!0}),r=t.chats,i=void 0===r?[]:r,o=t.isChatsLoading;return{botChat:null==i||null==(e=i.filter(function(e){return!e.disabled}))?void 0:e[0],isLoading:o}}},924091:function(e,t,r){"use strict";r.d(t,{T:()=>f});var n=r(552676),i=r(131906),o=r(739792),a=r(93199),s=r(547144),l=r(984208),c=r(441342),u=r(60878),d=r(381636),f=function(e){var t=e.show,r=e.onClose,f=(0,u.pm)(),m=(0,c.N3)(),p=null==m?void 0:m.active_paywall_subscriptions,b=null==m?void 0:m.active_but_non_cancelable_paywall_subscriptions,h=s.av.communityMembers.deactivateAccount({id:null==m?void 0:m.id}),y=(0,i.useMutation)(function(){return(0,a.pC)(h)},{onSuccess:function(){f.success((0,o.t)("deactivate_account_confirmation_modal.successfully_deactivated")),r(),window.location.href=(0,s.jE)()},onError:function(){f.error((0,o.t)("deactivate_account_confirmation_modal.error_deactivated"))}}),v=y.mutateAsync,g=y.isLoading;return b?(0,n.jsx)(l.W,{title:(0,o.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account-not-allowed",actionVariant:"primary",actionText:(0,o.t)("deactivate_account_confirmation_modal.not_allowed_action"),onAction:r,disabled:g,children:(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.not_allowed_description")})}):(0,n.jsxs)(l.W,{title:(0,o.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account",actionVariant:"danger",actionText:(0,o.t)("deactivate_account_confirmation_modal.deactivate"),onAction:v,disabled:g,children:[p&&(0,n.jsx)("div",{className:"pb-3",children:(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.description_with_subscription")})}),(0,n.jsx)(d.Z.LabelMd,{color:"text-default",children:(0,o.t)("deactivate_account_confirmation_modal.description")})]})}},462950:function(e,t,r){"use strict";r.d(t,{Z:()=>m});var n=r(552676),i=r(932699),o=r(739792),a=r(757105),s=r(963549),l=r(21486),c=r(699198),u=(0,i.uniqueId)("broadcast-settings-form-"),d=function(e){var t=e.confirmText,r=e.onSuccess,i=(0,a.dd)();return(0,n.jsx)(s.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"circle",confirmText:t||(0,o.t)("save"),title:(0,o.t)([c.jD,"can_you_tell_bit_more"]),onCancel:i.hide,formId:u,size:"xl",titleSize:"md",headerClassName:"!pb-4 !border-solid !border-b",footerClassName:"border border-t",children:(0,n.jsx)(l.e,{className:"py-6",formId:u,shouldShowSaveButton:!1,modal:i,onSuccess:r})})},f=a.gk.create(function(e){var t=e.confirmText,r=e.onSuccess;return(0,n.jsx)(d,{confirmText:t,onSuccess:r})}),m=function(){return(0,a.dd)(f)}},21486:function(e,t,r){"use strict";r.d(t,{e:()=>K});var n=r(552676),i=r(619803),o=r.n(i),a=r(887279),s=r(751169),l=r(514275),c=r(932699),u=r(131906),d=r(739792),f=r(926816),m=r(60878),p=r(699198),b=function(e){var t=e.modal,r=e.onSuccess,n=(0,u.useQueryClient)(),i=(0,m.pm)();return(0,u.useMutation)({mutationFn:function(e){return f.G.upsert(e)},onSuccess:function(){i.success((0,d.t)([p.jD,"settings_updated"])),n.invalidateQueries(l.E),null==t||t.remove(),(0,c.isFunction)(r)&&r()},onError:function(){i.error((0,d.t)("unexpected_error"))}})},h=r(547144),y=r(900795),v=r(227851),g=r(441342),_=r(548298),x=function(e){var t=(0,m.pm)();return(0,u.useQuery)({queryKey:["marketing-email-address-settings","footer-html",e],queryFn:function(){return f.G.footerHtml({root_url:e.rootUrl,address_line_1:e.addressLine1,address_city:e.addressCity,address_postal_code:e.addressPostalCode,address_country:e.addressCountryCode,address_state:e.addressState||""})},onError:function(){return t.error((0,d.t)("error"))},keepPreviousData:!0})},j=function(){var e=(0,g.wh)().currentCommunity,t=(void 0===e?{}:e).root_url,r=(0,v.Gc)().watch,i=r("address_line_1"),o=r("address_city"),a=r("address_postal_code"),s=r("address_country"),l=r("address_state"),c=(x((0,_.c)({rootUrl:t||"",addressLine1:i,addressCity:o,addressPostalCode:a,addressCountryCode:s,addressState:l},500)).data||{footer_html:""}).footer_html;return(0,n.jsx)(y.w,{content:c})},w=r(381636),O=function(e){var t=e.children,r=e.title,i=e.description,a=e.childrenClassName,s=e.shouldHideMarginBottom;return(0,n.jsxs)("div",{className:o()({"mb-12":!(void 0!==s&&s)}),children:[(0,n.jsx)(w.Z.TitleSm,{weight:"bold",children:r}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(w.Z.BodyMd,{color:"text-default",children:i})}),(0,n.jsx)("div",{className:o()("mt-2",a),children:t})]})},S=function(e){var t=e.shouldHideBottomMargin;return(0,n.jsx)(O,{title:(0,d.t)([p.jD,"footer"]),description:(0,n.jsx)(y.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,d.t)([p.jD,"footer_description"],{url:(0,h.UN)()})}),childrenClassName:"mt-7",shouldHideMarginBottom:void 0===t||t,children:(0,n.jsx)(j,{})})},k=r(957363),N=r(767900),P=r(310989),C=function(e){var t=e.children,r=e.name,i=e.label,o=e.tooltipText;return(0,n.jsx)(N.l.Item,{className:"grow basis-0 !pt-4",hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,labelClassName:"mb-2",errorClassName:"mt-1 text-v2-danger text-sm",name:r,label:i,tooltipText:o,children:t||(0,n.jsx)(N.l.Input,{})})};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){var t=(0,v.Gc)().getValues,r=I(t(["sender_email_domain"]),1)[0],i=I(t(["is_custom_domain_enabled_for_email_hub"]),1)[0];return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(N.l.Input,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({suffix:(0,n.jsx)("div",{className:"whitespace-nowrap py-1",children:(0,n.jsx)(w.Z.LabelMd,{color:"text-light",children:"@".concat(r)})}),suffixWrapperClassName:"!bg-selector-active"},e)),!i&&(0,n.jsx)(w.Z.LabelXs,{color:"text-default",children:(0,d.t)([p.jD,"sender_email_description"])})]})}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(){var e,t=(0,v.Gc)(),r=t.watch,i=t.getValues,o=r(p.r_),a=(e=i(["is_custom_domain_enabled_for_email_hub"]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||function(e,t){if(e){if("string"==typeof e)return E(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,n.jsxs)(O,{title:(0,d.t)([p.jD,"from_address"]),description:(0,d.t)([p.jD,"from_address_description"]),children:[(0,n.jsx)(C,{name:"sender_name",label:(0,d.t)([p.jD,"sender_name"])}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(C,{name:"sender_email_local_part",label:(0,d.t)([p.jD,"sender_email_local_part"]),tooltipText:a?"":(0,d.t)([p.jD,"sender_email_tooltip"]),children:(0,n.jsx)(T,{})}),!a&&(0,n.jsx)(P.q,{iconEl:(0,n.jsx)(k.JO,{type:"16-info",size:16,className:"text-default mt-0.5"}),className:"bg-tertiary border-primary mb-6",children:(0,n.jsx)(w.Z.LabelSm,{children:(0,n.jsx)(y.w,{content:(0,d.t)([p.jD,"from_address_info_notice"]),sanitizeProps:{ADD_ATTR:["target"]}})})})]}),(0,n.jsx)(N.l.Item,{className:"!flex flex-row-reverse !pt-4",labelClassName:"text-base text-default !font-normal ml-4",translationRoot:p.jD,hideDescription:!0,hideBorder:!0,fullWidth:!0,inline:!0,name:p.r_,id:p.r_,children:(0,n.jsx)(N.l.ToggleSwitch,{id:p.r_,wrapperClass:"!ml-0",name:p.r_,variant:"small"})}),o&&(0,n.jsx)(C,{name:"reply_to_email",label:(0,d.t)([p.jD,"reply_to_email"]),tooltipText:(0,d.t)([p.jD,"reply_to_email_tooltip"])})]})},D=r(275271),M=r(439788),R=r(172667);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function z(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(){var e=p.i4.map(function(e){return{label:(0,d.t)([R.p,e]),value:e.toLowerCase()}}),t=p.Q9.map(function(e){return{label:(0,d.t)([R.p,e]),value:e.toLowerCase()}}).sort(function(e,t){return e.label>=t.label?1:-1});return z(e).concat(z(t))},U=function(){var e=(0,D.useMemo)(function(){return F()},[]);return(0,n.jsx)(M.N,{wrapperClassName:"form-group no-border grow basis-0 !pt-4",name:"address_country",label:(0,d.t)([p.jD,"address_country"]),options:e,placeholder:(0,d.t)([p.jD,"select_country"])})},Z=function(){return(0,n.jsxs)(O,{title:(0,d.t)([p.jD,"postal_address"]),description:(0,d.t)([p.jD,"postal_address_description"]),childrenClassName:"mt-3",children:[(0,n.jsx)(C,{name:"address_line_1",label:(0,d.t)([p.jD,"address_line_1"])}),(0,n.jsxs)("div",{className:"grid gap-3 sm:grid-cols-1 md:grid-cols-2",children:[(0,n.jsx)(C,{name:"address_city",label:(0,d.t)([p.jD,"address_city"])}),(0,n.jsx)(C,{name:"address_state",label:(0,d.t)([p.jD,"address_state"])}),(0,n.jsx)(C,{name:"address_postal_code",label:(0,d.t)([p.jD,"address_postal_code"])}),(0,n.jsx)(U,{})]})]})},G=r(39905),q=function(){var e=(0,v.Gc)().formState.isSubmitting;return(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(G.z,{variant:"circle",className:"float-right",large:!0,disabled:e,children:e?(0,d.t)([p.jD,"saving_changes"]):(0,d.t)([p.jD,"save_changes"])})})},V=r(779774),W="settings.emails.settings.errors",H=V.Ry().shape({sender_name:V.Z_().required((0,d.t)([W,"sender_name_is_required"])),sender_email_local_part:V.Z_().matches(p.lb,{message:(0,d.t)([W,"please_enter_valid_email_address"])}).required((0,d.t)([W,"sender_email_is_required"])),reply_to_email:V.Z_().when(p.r_,{is:!0,then:V.Z_().email((0,d.t)([W,"please_enter_valid_email_address"])).required((0,d.t)([W,"reply_to_email_is_required"]))}),address_country:V.Z_().required((0,d.t)([W,"country_is_required"])),address_line_1:V.Z_().required((0,d.t)([W,"address_is_required"])),address_city:V.Z_().required((0,d.t)([W,"city_is_required"])),address_postal_code:V.Z_().required((0,d.t)([W,"zip_code_is_required"]))});function Q(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var K=function(e){var t=e.shouldShowSaveButton,r=void 0===t||t,i=e.formId,c=e.modal,u=e.onSuccess,d=e.className,f=b({modal:c,onSuccess:u}).mutateAsync,m=(0,l.F)(),p=m.data;return m.isLoading?(0,n.jsx)(s.a,{}):(0,n.jsxs)(a.l,{id:i,className:o()("flex flex-col",void 0===d?"":d),defaultValues:p,validationSchema:H,onSubmit:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,f(e)];case 1:return t.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){Q(o,n,i,a,s,"next",e)}function s(e){Q(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:[(0,n.jsx)(L,{}),(0,n.jsx)(Z,{}),(0,n.jsx)(S,{shouldHideBottomMargin:!r}),r&&(0,n.jsx)(q,{})]})}},699198:function(e,t,r){"use strict";r.d(t,{Q9:()=>s,i4:()=>a,jD:()=>n,lb:()=>o,r_:()=>i});var n="settings.emails.settings",i="use_custom_reply_to_email",o=/^[A-Z0-9._%+-]+$/i,a=["US","BR","GB","AU","CA","DE","FR"],s=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CX","CY","CZ","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","GA","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]},72040:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(275271),i=r(251896),o=function(){var e=(0,i.aH)().data;return{shouldShowEmailNotices:(0,n.useMemo)(function(){return!!(0,i.su)(e)},[e]),isSendingMarketingEmailsAllowed:(0,n.useMemo)(function(){return!(0,i.su)(e)||e.limits.allowance>0},[e]),marketingHubData:(0,n.useMemo)(function(){return(0,i.su)(e)?e:null},[e])}}},555471:function(e,t,r){"use strict";r.d(t,{D8:()=>u,DA:()=>m,MS:()=>h,SL:()=>l,Ut:()=>f,V9:()=>d,Z4:()=>a,lJ:()=>c,uf:()=>s});var n,i=r(739792);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={ALL:"all",DRAFT:"draft",SENT:"sent",PROCESSING:"processing",SCHEDULED:"scheduled",FAILED:"failed"},s={TRIAL_LIMIT_REACHED:"trial_limit_reached",LIMIT_REACHED:"limit_reached",SYSTEM_UNAVAILABLE:"system_unavailable",EMAIL_HUB_NOT_ENABLED:"email_hub_not_enabled",BLOCKED:"blocked",UNKNOWN:"unknown"},l={standard:"standard",workflow:"workflow"},c=[a.ALL,a.SENT,a.DRAFT,a.SCHEDULED],u=(o(n={},a.ALL,"default"),o(n,a.DRAFT,"default"),o(n,a.SENT,"success"),o(n,a.PROCESSING,"info"),o(n,a.SCHEDULED,"warning"),o(n,a.FAILED,"danger"),n),d="status",f=[a.PROCESSING,a.SENT,a.FAILED],m=15e3,p=(0,i.t)("dynamic_vars_groups.member"),b=(0,i.t)("dynamic_vars_groups.community"),h=[{group:p,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:p,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:p,label:"{{member.name}}",value:"{{member.name}}"},{group:p,label:"{{member.email}}",value:"{{member.email}}"},{group:p,label:"{{member.public_uid}}",value:"{{member.public_uid}}"},{group:b,label:"{{community.name}}",value:"{{community.name}}"},{group:b,label:"{{community.url}}",value:"{{community.url}}"}]},257086:function(e,t,r){"use strict";r.d(t,{b:()=>l});var n=r(131906),i=r(739792),o=r(251896),a=r(551507),s=r(60878),l=function(){var e=(0,s.pm)(),t=(0,n.useQueryClient)();return(0,n.useMutation)({mutationFn:function(e){return a.w.create(e)},onSuccess:function(){t.invalidateQueries({queryKey:[o.$4]})},onError:function(){return e.error((0,i.t)(["settings.emails.broadcasts.new_broadcast_modal","error_saving"]))}})}},256965:function(e,t,r){"use strict";r.d(t,{R:()=>d,S:()=>f});var n=r(552676),i=r(275271),o=r(756468),a=r(244444),s=r(584587);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=(0,i.createContext)(null);u.displayName="BuilderBlockContext";var d=function(){var e=(0,i.useContext)(u);return(0,o.Z)(e,"useBuilderBlockContext must be used within a BuilderBlockContextProvider"),e};function f(e){var t,r,o,l,d,f,m,p,b,h,y=e.children,v=(0,a.u)().data,g=(null==v||null==(t=v.community_segment)?void 0:t.audience_count)||0,_=(0,i.useMemo)(function(){var e,t,r,n,i,o,a,l,c,u;return new Map([["to",(u=null==v||null==(o=v.community_segment)||null==(i=o.rules)?void 0:i.rule_type)===s.g.ALL_MEMBERS||u===s.g.ALL_CONTACTS||u===s.g.CUSTOM_FILTERS&&!!(null==v||null==(c=v.community_segment)||null==(l=c.rules)||null==(a=l.rules)?void 0:a.length)],["subject",!!(null==v||null==(e=v.broadcast_content)?void 0:e.subject)],["preview_text",!!(null==v||null==(t=v.broadcast_content)?void 0:t.preview_text)],["email_content",!!(null==v||null==(r=v.broadcast_content)?void 0:r.email_content)],["visual_email_builder_content",!!(null==v||null==(n=v.broadcast_content)?void 0:n.visual_email_builder_content)],["schedule",!!(null==v?void 0:v.send_type)]])},[null==v||null==(o=v.community_segment)||null==(r=o.rules)?void 0:r.rule_type,null==v||null==(f=v.community_segment)||null==(d=f.rules)||null==(l=d.rules)?void 0:l.length,null==v||null==(m=v.broadcast_content)?void 0:m.email_content,null==v||null==(p=v.broadcast_content)?void 0:p.visual_email_builder_content,null==v||null==(b=v.broadcast_content)?void 0:b.preview_text,null==v||null==(h=v.broadcast_content)?void 0:h.subject,null==v?void 0:v.send_type]),x=(0,i.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var n,i=_[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=c(n.value,2),a=o[0];if(!o[1])return a}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return"to"},[_]),j=c((0,i.useState)(x),2),w=j[0],O=j[1],S=(0,i.useMemo)(function(){return{activeSection:w,setActiveSection:O,filledStatus:_,audienceCount:g}},[w,O,_,g]);return(0,n.jsx)(u.Provider,{value:S,children:y})}},118192:function(e,t,r){"use strict";r.d(t,{n:()=>k,B:()=>N});var n=r(552676),i=r(903225),o=r(757105),a=r(244444),s=r(118746),l=r(473129),c=r(12564),u=r(767900),d=r(434519),f=r(594023),m=r(227851),p=r(739792),b=r(957363),h=r(381636),y=r(22319),v=r(701168),g="settings.emails.builder.email_builder_selector.tile",_=function(e){var t=e.tileName,r=e.isSelected,i=(0,y.TC)().isDarkAppearance;return t?(0,n.jsxs)("div",{className:(0,v.A)("border-primary flex w-full cursor-pointer flex-col gap-5 rounded-xl border p-3 transition-colors duration-300","hover:border-dark hover:shadow-md",{"border-secondary hover:border-secondary":r}),children:[(0,n.jsx)("div",{className:"bg-secondary h-[144px] rounded-lg",children:(0,n.jsx)(b.JO,{type:i?"".concat(t,"-email-builder-dark"):"".concat(t,"-email-builder"),viewBox:"0 0 244 144",className:"!w-full"})}),(0,n.jsxs)("div",{className:"mx-1 mb-2 flex flex-col gap-2 text-center",children:[(0,n.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,n.jsx)(h.Z.LabelMd,{weight:"bold",children:(0,p.t)([g,t,"name"])}),"visual"===t&&(0,n.jsx)("div",{className:"flex items-center gap-1 rounded bg-blue-500/10 px-1 py-px",children:(0,n.jsx)(h.Z.LabelXxs,{color:"text-date-blue",children:(0,p.t)([g,"new"])})})]}),(0,n.jsx)(h.Z.LabelXs,{color:"text-default",weight:"light",children:(0,p.t)([g,t,"description"])})]})]}):null},x=function(){var e=["visual","text"],t="editor",r=(0,m.Gc)().control;return(0,n.jsx)(d.u_.Body,{children:(0,n.jsx)(u.l.Item,{name:t,hideLabel:!0,hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,n.jsx)(m.Qr,{name:t,control:r,render:function(t){var r=t.field,i=r.value,o=r.onChange;return(0,n.jsx)(f.E,{className:"my-5 flex gap-6",value:i,onChange:o,children:e.map(function(e){return(0,n.jsx)(f.E.Option,{value:e,className:"flex-1",children:function(t){var r=t.checked;return(0,n.jsx)(_,{tileName:e,isSelected:r})}},e)})})}})})})},j=r(39905),w=function(e){var t=e.onClose,r=(0,(0,m.Gc)().watch)("editor");return(0,n.jsx)(d.u_.Footer,{children:(0,n.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,n.jsx)(j.z,{type:"button",variant:"secondary",onClick:function(){t()},children:(0,p.t)("cancel")}),(0,n.jsx)(j.z,{type:"submit",variant:"circle",disabled:!r,children:(0,p.t)("continue")})]})})},O="settings.emails.builder.email_builder_selector.modal",S=function(e){var t=e.onClose;return(0,n.jsxs)(d.u_.Header,{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between",children:[(0,n.jsx)(d.u_.Title,{children:(0,p.t)([O,"title"])}),(0,n.jsx)(d.u_.HeaderActions,{children:(0,n.jsx)(d.u_.CloseButton,{onClick:t})})]}),(0,n.jsx)("div",{className:"w-full text-left",children:(0,n.jsx)(h.Z.LabelSm,{color:"text-default",children:(0,p.t)([O,"description"])})})]})},k="broadcast-editor-selection-modal",N=o.gk.create(function(){var e=(0,i.k6)(),t=(0,o.dd)(),r=(0,o.dd)(c.K),f=(0,l.Q)(),m=f.visualBuilderPath,p=f.contentPath,b=(0,a.u)().data;return(0,n.jsxs)(d.u_,{isOpen:t.visible,onClose:t.hide,children:[(0,n.jsx)(d.u_.Overlay,{}),(0,n.jsx)(d.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:(0,n.jsxs)(u.l,{onSubmit:function(n){var i,a,l,c="visual"===n.editor?m:p,u=!!(null!=(l=null==b||null==(i=b.broadcast_content)?void 0:i.email_content)?l:null==b||null==(a=b.broadcast_content)?void 0:a.visual_email_builder_content);t.hide(),r.hide(),u?o.gk.show(s.t,{templateId:null,templateContentType:"visual"===n.editor?"visual_email_builder":"tip_tap_email",shouldResetContent:!0}):e.push(c)},defaultValues:{editor:null},shouldStopPropagation:!0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},children:[(0,n.jsx)(S,{onClose:t.hide}),(0,n.jsx)(x,{}),(0,n.jsx)(w,{onClose:t.hide})]})})]})})},584587:function(e,t,r){"use strict";r.d(t,{V:()=>a,g:()=>o});var n=r(739792),i="settings.emails.builder",o={ALL_CONTACTS:"all_contacts",ALL_MEMBERS:"all_members",CUSTOM_FILTERS:"custom_filters",SELECTED_MEMBERS:"selected_members"},a=[{text:(0,n.t)([i,"all_contacts"]),value:o.ALL_CONTACTS},{text:(0,n.t)([i,"all_members"]),value:o.ALL_MEMBERS},{text:(0,n.t)([i,"custom_filters"]),value:o.CUSTOM_FILTERS}]},331695:function(e,t,r){"use strict";r.d(t,{Mb:()=>n,b:()=>o,gv:()=>i});var n=255,i=140,o=140},664275:function(e,t,r){"use strict";r.d(t,{K:()=>u,Z:()=>c});var n=r(2071),i=r.n(n),o=r(739792),a=r(915912),s=r.n(a),l="settings.forms.edit.embed",c=function(e){var t,r=e.embedCodeRef,n=e.embedCodeText,i=e.toast;r.current&&(null==(t=window.getSelection())||t.selectAllChildren(r.current),s()(n)?i.success((0,o.t)([l,"copy_success"]),{duration:"short",shouldUseProgress:!1}):i.error((0,o.t)([l,"copy_error"])))},u=function(e){var t=e.formUid,r=e.isPopup,n=e.currentCommunityFullUrl,o=e.isPreview,a=e.isUsedOnPages,s=e.popupDelay,l=e.popupFrequency;return'<div data-is-popup="'.concat(r,'" data-circle-form-uid="').concat(t,'" ').concat(d(void 0!==o&&o,void 0!==a&&a,r,s,l),"></div>\n          <script>").concat(i()({code:"\n    if (!window.circleFormsScriptLoaded) {\n      window.circleFormsScriptLoaded = true;\n      const script = document.createElement('script');\n      script.src = '".concat(n,"external/form-embeds.js';\n      script.defer = true;\n      document.head.appendChild(script);\n    }\n  ")}),"<\/script>")},d=function(e,t,r,n,i){var o="";return e&&(o+='data-is-preview="'.concat(e,'"')),t&&(o+=' data-is-used-on-pages="'.concat(t,'"')),r&&(o+=' data-popup-frequency="'.concat(i,'" data-popup-delay="').concat(n,'"')),o}},538484:function(e,t,r){"use strict";r.d(t,{u:()=>s});var n=r(131906),i=r(739792),o=r(62880),a=r(60878),s=function(e){var t=e.id,r=(0,a.pm)();return(0,n.useQuery)({queryKey:["forms","show",t],queryFn:function(){return void 0===t?null:o.G.show(t)},onError:function(){return r.error((0,i.t)("error"))},enabled:void 0!==t})}},299783:function(e,t,r){"use strict";r.d(t,{E:()=>s,L:()=>a});var n=r(275271),i=r(131906),o=r(62880),a=20,s=function(e){var t,r,s,l,c,u,d,f=e.perPage,m=void 0===f?a:f,p=e.initialPage,b=["forms","list",m,p],h=(0,i.useInfiniteQuery)(b,function(e){var t=e.pageParam,r=void 0===t?p:t,n=1;return"number"==typeof r&&r>0&&(n=r),o.G.index({page:n,per_page:m})},{getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0}),y=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=h.data)?void 0:e.pages)?t:[]},[null==(s=h.data)?void 0:s.pages]),v=null!=(u=null==(l=y[0])?void 0:l.count)?u:0,g=null!=(d=null==(c=y[0])?void 0:c.per_page)?d:a;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},h),r=r={queryKey:b,totalRecords:v,pageSize:g,pages:y},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},13074:function(e,t,r){"use strict";r.d(t,{e:()=>s});var n=r(552676),i=r(739792),o=r(900795),a=r(381636),s=function(){return(0,n.jsx)("div",{className:"py-5",children:(0,n.jsx)(a.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(o.w,{content:(0,i.t)(["settings.emails.view_broadcast","please_wait_processing_recipient_list"])})})})}},274481:function(e,t,r){"use strict";r.d(t,{M:()=>n});var n=function(e){var t=e.value,r=e.total,n=e.precision,i=e.fallbackValue,o=void 0===i?"0.0%":i;return t&&r&&r>0&&t>=0?"".concat((t/r*100).toFixed(void 0===n?1:n),"%"):o}},886862:function(e,t,r){"use strict";r.d(t,{r:()=>i});var n=r(514275),i=function(){var e=(0,n.F)(),t=e.data,r=e.isLoading;return{areMarketingSettingsAvailable:!!(null==t?void 0:t.id),isLoading:r}}},450449:function(e,t,r){"use strict";r.d(t,{t:()=>l,x:()=>s});var n=r(131906),i=r(739792),o=r(551507),a=r(60878),s=function(e){return["broadcasts","show",e]},l=function(e){var t=e.id,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["id"]),l=(0,a.pm)();return(0,n.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryKey:s(t),queryFn:function(){return o.w.show({id:t})},onError:function(){return l.error((0,i.t)("error"))},enabled:!!t},r))}},959917:function(e,t,r){"use strict";r.d(t,{w:()=>l});var n=r(131906),i=r(739792),o=r(551507),a=r(60878),s=r(555471),l=function(e){var t=e.id,r=(0,a.pm)();return(0,n.useQuery)({queryKey:["broadcasts",t,"report"],queryFn:function(){return o.w.report({id:t})},onError:function(){return r.error((0,i.t)("error"))},refetchInterval:s.DA})}},514275:function(e,t,r){"use strict";r.d(t,{E:()=>s,F:()=>l});var n=r(131906),i=r(739792),o=r(926816),a=r(60878),s=["marketing-email-address-settings"],l=function(){var e=(0,a.pm)();return(0,n.useQuery)({queryKey:s,queryFn:function(){return o.G.show()},onError:function(){return e.error((0,i.t)("error"))}})}},392490:function(e,t,r){"use strict";r.d(t,{j:()=>p});var n=r(131906),i=r(903225),o=r(756468),a=r(551507),s=r(473129),l=r(271738),c=r(244444),u=r(450449);function d(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){d(o,n,i,a,s,"next",e)}function s(e){d(o,n,i,a,s,"throw",e)}a(void 0)})}}function m(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var p=function(){var e=(0,n.useMutation)(a.w.resetContent),t=e.mutateAsync,r=e.isLoading,d=(0,c.u)().data,p=(0,i.k6)(),b=(0,s.Q)(),h=b.visualBuilderPath,y=b.contentPath;return{handleResetBroadcastContent:function(e){return f(function(){return m(this,function(r){return(0,o.Z)(d,"Broadcast is required"),[2,t({id:d.id},{onSuccess:function(){return f(function(){var t;return m(this,function(r){switch(r.label){case 0:return t="visual_email_builder"===e?h:y,[4,l.Eh.invalidateQueries((0,u.x)(d.id))];case 1:return r.sent(),p.push(t),[2]}})})()}})]})})()},isResettingBroadcastContent:r}}},334502:function(e,t,r){"use strict";r.d(t,{F:()=>j});var n=r(131906),i=r(903225),o=r(739792),a=r(551507),s=r(244444),l=r(60878),c=r(462950),u=r(552676),d=r(58664),f=r(757105),m=r(441342),p=r(984208),b=r(751169),h=r(381636),y="settings.emails.builder",v=function(e){var t=e.handleSendTestEmail,r=(0,f.dd)(),n=(0,m.wh)(),i=n.currentUser;return n.isLoading?(0,u.jsx)(b.a,{}):(0,u.jsxs)(p.W,{isOpen:r.visible,onClose:function(){r.hide()},actionVariant:"circle",actionText:(0,o.t)([y,"send"]),onAction:t,title:(0,o.t)([y,"send_test_email_modal.send_test_email"]),children:[(0,u.jsx)("div",{className:"mb-1",children:(0,u.jsx)(d.I,{value:(null==i?void 0:i.email)||"",disabled:!0})}),(0,u.jsx)("div",{className:"leading-tight",children:(0,u.jsx)(h.Z.LabelXs,{color:"text-default",children:(0,o.t)([y,"send_test_email_modal.description"])})})]})},g=f.gk.create(function(e){var t=e.handleSendTestEmail;return(0,u.jsx)(v,{handleSendTestEmail:t})}),_=r(886862);function x(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var j=function(){var e,t=(0,l.pm)(),r=(0,s.u)().data,u=(0,i.UO)().id,d=null!=(e=null==r?void 0:r.id)?e:Number(u),m=(0,_.r)(),p=m.isLoading,b=m.areMarketingSettingsAvailable,h=(0,c.Z)(),y=(0,f.dd)(g),v=(0,n.useMutation)(function(){return a.w.sendTestEmail({id:d})},{onSuccess:function(){t.success((0,o.t)("settings.emails.builder.send_test_email_modal.test_email_sent"))},onError:function(){t.error((0,o.t)("request_failure_message"))}}),j=v.mutate,w=v.isLoading,O=function(){y.show({handleSendTestEmail:function(){j(),y.hide()}})};return{isSending:w,isLoadingMarketingSettings:p,handleTestEmail:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(b)return[2,O()];return[4,h.show({confirmText:(0,o.t)(["settings.emails.builder","save_and_send"]),onSuccess:j})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},267792:function(e,t,r){"use strict";r.d(t,{j:()=>l});var n=r(131906),i=r(739792),o=r(551507),a=r(60878),s=r(450449),l=function(e){var t=e.id,r=(0,n.useQueryClient)(),l=(0,a.pm)();return(0,n.useMutation)({mutationFn:function(e){var r=e.body;return o.w.update({id:t,body:{internal_name:r.internal_name,broadcast_content_attributes:r.broadcast_content,community_segment_attributes:r.community_segment,scheduled_at:r.scheduled_at,send_type:r.send_type,email_hub_theme_id:r.email_hub_theme_id}})},onSuccess:function(){r.invalidateQueries((0,s.x)(t))},onError:function(e){if(e.message)return l.error(e.message);l.error((0,i.t)("unexpected_error"))}})}},772447:function(e,t,r){"use strict";r.d(t,{Ed:()=>h,LI:()=>g,Oj:()=>y});var n=r(275271),i=r(932699),o=r(131906),a=r(739792),s=r(251630),l=r(534860),c=r(441342),u=r(431841),d=r(60878);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b="settings.general.messages",h=["name","locale","slug","is_private","allow_signups_to_public_community","private_signup_link_label","private_signup_link_url","prefs","logo","icon","default_og_image","reply_to_email","community_switcher_enabled","circle_discover_button_hidden","white_label","default_existing_member_space_id","default_logged_out_space_id","default_new_member_space_id","default_search_sorting","custom_cta_for_share_links","locked_post_cta_heading","locked_post_cta_body","locked_post_cta_button_text","locked_post_cta_button_url"],y=["default_space_ids","deactivate_account_enabled","browser_notifications_enabled","allow_profile_search_indexing","truncate_post_body_in_email_notifications","hide_emails_on_member_profiles","allow_members_to_go_live","enforce_otp_for_signup","community_activity_notifications_email_enabled","community_activity_notifications_in_app_enabled","desktop_app_community_visibility_enabled","default_logged_out_redirect_type","default_logged_out_redirect_id","allow_moderator_csv_download","member_media_uploads_enabled","eoy_recap_enabled_for_members","eoy_recap_enabled_for_non_members"],v="".concat(String(l.hz),"-PunditUserContext"),g=function(){var e=(0,d.pm)(),t=(0,o.useQueryClient)(),r=(0,c.wh)(),l=r.isLoading,f=r.currentCommunity,g=r.currentCommunitySettings,_=r.currentUser,x=(0,u._)(v).resetValue,j=null==_?void 0:_.email,w=(0,n.useMemo)(function(){var e,t,r=(f||{}).reply_to_email;return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,i.pick)(f,p(h).concat(p(y)))),t=t={reply_to_email:r||j},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e},[f,j]),O=function(e){var t=e||{},r=t.slug,n=t.full_url,o=t.prefs,a=f||{},s=a.slug,l=a.prefs,c=(o||{}).brand_color,u=(l||{}).brand_color;(0,i.isEqual)(c,u)?r!==s&&n&&(x(),window.location.replace("".concat(n,"settings"))):window.location.reload()},S=(0,o.useMutation)(function(e){var t=(0,i.pick)(e,h),r=(0,i.pick)(e,y);return s.$.update({community:t,community_setting:r})},{onSuccess:function(r){var n;return(n=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return[4,t.invalidateQueries(["pundit-user"])];case 1:return n.sent(),e.success((0,a.t)([b,"success"]),{onComplete:function(){O(r)}}),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){e.error((0,a.t)([b,"error"]))}}),k=S.mutate;return{isLoading:l,isSaving:S.isLoading,defaultValues:w,currentCommunity:f,currentCommunitySettings:g,handleSubmit:function(e,t){var r=t.setError;k(e,{onError:function(e){var t=e||{},n=t.message,i=t.errorDetails;i&&(void 0===i?"undefined":i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)=="object"&&Object.keys(i).forEach(function(e){r(e,{message:(0,a.t)(["settings.validation",e],{defaultValue:n})})})}})}}}},955078:function(e,t,r){"use strict";r.d(t,{f:()=>i});var n=r(552676),i=function(e){var t=e.title,r=e.subtitle,i=e.children;return(0,n.jsxs)("div",{className:"form-content",children:[!!t&&(0,n.jsx)("h1",{children:t}),!!r&&(0,n.jsx)("div",{className:"subtitle",children:r}),i]})}},719784:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(552676),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"form-wrapper !mt-6",children:t})}},618014:function(e,t,r){"use strict";r.d(t,{l:()=>x,S:()=>_});var n=r(552676),i=r(275271),o=r(903225),a=r(924091),s=function(e){var t;return!!(null==e||null==(t=e.currentUser)?void 0:t.id)},l=r(773371),c=r(624804),u=r(562598),d=r(441342),f=r(701168),m=r(981097),p=r(840905);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,i.memo)(function(){var e,t=(e=(0,c.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1],h=(0,o.TH)().pathname,y=(0,l.C)().isPlansPageLayout,v=h.includes(m.L.community_inbox.index),g=(0,d.wh)();return g.isLoading?(0,n.jsx)(p.gi,{variant:"community-sidebar-v2"}):s(g)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.T,{show:r,onClose:i}),(0,n.jsx)("div",{className:"sidebar sidebar--left","data-testid":"sidebar-left",children:(0,n.jsx)("div",{className:(0,f.A)("fixed h-full",v?"!max-w-[24rem]":"!max-w-[23rem]",y?"":"!w-full"),"data-draggable":"false",children:(0,n.jsx)(u.R,{})})})]}):(0,n.jsx)(o.l_,{to:"/"})});function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v={disableRightSidebar:!1,renderLeftSidebar:function(){return(0,n.jsx)(h,{})},disableSidebar:!1,hideAppBar:!1,shouldHideSidebarNestedNavBar:!1},g=(0,i.createContext)({config:{},setConfig:function(){},mergeConfig:function(){}});g.displayName="LayoutContext";var _=function(e){var t,r=e.children,o=(t=(0,i.useState)(v),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return(0,n.jsx)(g.Provider,{value:{config:a,setConfig:s,resetToDefault:function(){s(v)},mergeConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a,e))}},children:r})},x=function(){return(0,i.useContext)(g)}},300864:function(e,t,r){"use strict";r.d(t,{y:()=>s});var n=r(275271),i=r(392042),o=r.n(i),a=r(618014),s=function(e){var t=(0,a.l)().mergeConfig;return(0,n.useEffect)(function(){o()(t)&&t(e)},[]),null}},13605:function(e,t,r){"use strict";r.d(t,{Q:()=>l});var n=r(552676),i=r(739792),o=r(664657),a=r(514598),s=r(381636),l=function(e){var t=e.member,r=e.isAvatarHidden,l=e.children,c=(0,a.H)().showMemberProfileEdit,u=t.name,d=t.avatar_url;return u?(0,n.jsxs)("div",{className:"group flex items-center justify-between gap-x-1",children:[(0,n.jsxs)("button",{className:"flex items-center gap-3 text-left",type:"button",onClick:function(){return c({member:t})},children:[!(void 0!==r&&r)&&(0,n.jsx)(o.W,{src:d,name:u,size:"6"}),(0,n.jsx)(s.Z.LabelSm,{weight:"medium",children:u})]}),l]}):(0,n.jsx)(n.Fragment,{children:(0,i.t)("dash")})}},717651:function(e,t,r){"use strict";r.d(t,{a:()=>o});var n=r(275271);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=function(e){var t=e.allFilters,r=e.selectedFilters;return(0,n.useMemo)(function(){var e,n=((function(e){if(Array.isArray(e))return i(e)})(e=t.map(function(e){return e.name}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["profile_field","geo_location","near_me"]);return r.filter(function(e){return n.includes(e.key)})},[t,r])}},665144:function(e,t,r){"use strict";r.d(t,{Z:()=>n});let n=(0,r(798104).Ue)(function(e){return{manageMemberQueryParams:{},setManageMemberQueryParams:function(t){return e({manageMemberQueryParams:t})},resetManageMemberQueryParams:function(){return e({manageMemberQueryParams:void 0})}}})},26758:function(e,t,r){"use strict";r.d(t,{v:()=>c});var n=r(275271),i=r(903225),o=r(547144),a=r(396354);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l="page",c=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],c=Number((0,a.t)()[l]||t),u=(e=(0,n.useState)(c),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1],m=(0,i.k6)();return(0,n.useEffect)(function(){r&&m.push({search:(0,o.m_)(l,String(d))})},[d,m,r]),{page:d,setPage:f,initialPage:c}}},795288:function(e,t,r){"use strict";r.d(t,{$:()=>f});var n=r(275271),i=r(903225),o=r(634332),a=r(442392),s=r(776937);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=new Map([[0,s.vC.ALL],[1,s.vC.ALL],[2,s.vC.ACTIVE],[3,s.vC.INACTIVE],[4,s.vC.ACTIVE],[5,s.vC.ACTIVE]]),f=function(e){var t=(0,i.k6)(),r=(0,i.TH)(),f=(0,o.b)(),m=(0,n.useCallback)(function(){return{created_at:"desc"}},[]),p=(0,a.k)(),b=p.queryParams,h=b.order,y=b.filters;return u(c({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(p.queryParams,["order","filters"])),{onSort:function(e){var n=(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,1)||function(e,t){if(e){if("string"==typeof e)return l(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],i=new URLSearchParams(r.search);h&&Object.keys(h).forEach(function(e){i.delete("order[".concat(e,"]"))}),n&&i.append("order[".concat(n.id,"]"),n.desc?"desc":"asc"),t.push({search:i.toString()})},order:null!=h?h:m(),filters:null!=y?y:[],scope:u(c({},f.scope),{status:d.get(e)||s.vC.ALL})})}},714034:function(e,t,r){"use strict";r.d(t,{c:()=>s});var n=r(131906),i=r(93199),o=r(547144),a=["settings","storage","metrics"],s=function(){var e,t,r,s,l,c,u,d,f,m=(0,n.useQuery)(a,function(){return(0,i.UT)(o.av.settings.storage.metrics.show())}),p=m.data,b=m.isLoading,h=m.refetch;return{totalBytesUsed:null!=(e=null==p?void 0:p.total_bytes_used)?e:0,totalBytesInPlan:null!=(t=null==p?void 0:p.total_bytes_in_plan)?t:0,imageBytes:null!=(r=null==p?void 0:p.image_bytes)?r:0,videoBytes:null!=(s=null==p?void 0:p.video_bytes)?s:0,videoTranscodingBytes:null!=(l=null==p?void 0:p.video_transcoding_bytes)?l:0,audioBytes:null!=(c=null==p?void 0:p.audio_bytes)?c:0,recordingBytes:null!=(u=null==p?void 0:p.recording_bytes)?u:0,otherBytes:null!=(d=null==p?void 0:p.other_bytes)?d:0,extraStorage:null!=(f=null==p?void 0:p.extra_storage)?f:null,isLoadingStorageMetrics:b,refetchStorageMetrics:h}}},853788:function(e,t,r){"use strict";r.d(t,{k:()=>C});var n=r(552676),i=r(739792),o=r(844081),a=r(381636),s=r(548857),l=r(984954),c=r(589252),u=r(957363),d=r(380171),f=r(943544),m=r(775148),p=r(757105),b=r(963549),h=r(767900),y=r(60878),v=r(932699),g=r(131906),_=r(93199),x=r(547144),j=function(e){var t=e.id,r=e.payload;return(0,_.gN)(x.av.settings.mobileHomeSegments.update(t),r)},w=r(22424),O=function(e){var t=e.onSuccess,r=(0,y.pm)(),n=(0,g.useQueryClient)(),i=(0,g.useMutation)({mutationFn:j,onSuccess:function(){n.invalidateQueries({queryKey:[w.R]}),(0,v.isFunction)(t)&&t()},onError:function(e){r.error(e.message)}}),o=i.mutate,a=i.mutateAsync;return{mutate:o,isUpdating:i.isLoading,mutateAsync:a}},S="settings.mobile_app.mobile_home_segments_order.rename_modal",k=function(e){var t=e.segment,r=(0,p.dd)(),o=(0,y.pm)(),a=O({onSuccess:function(){o.success((0,i.t)([S,"success"])),r.hide()}}),s=a.mutate,l=a.isUpdating;return(0,n.jsx)(b.c,{formId:"rename-segment-modal",isOpen:r.visible,onClose:r.hide,title:(0,i.t)([S,"title"]),confirmVariant:"circle",confirmText:(0,i.t)([S,"save"]),disabled:l,children:(0,n.jsx)(h.l,{id:"rename-segment-modal",defaultValues:{custom_name:t.custom_name},onSubmit:function(e){s({id:t.id,payload:e})},children:(0,n.jsx)(h.l.Item,{name:"custom_name",translationRoot:S,tooltipText:(0,i.t)([S,"custom_name_tooltip"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,children:(0,n.jsx)(h.l.Input,{name:"custom_name",maxLength:255,autocomplete:"off"})})})})},N=p.gk.create(function(e){return(0,n.jsx)(k,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),P=function(){var e,t,r,l=(0,p.dd)(N),b=(0,o.dI)().item,h="".concat(s.I18N_ROOT,".mobile_home_segments_order"),y=!b.available&&(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order",b.kind,"unavailable_state_label"]),v=(r="#506cf0",(t="--brand")in(e={})?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e);return(0,n.jsxs)("div",{className:"bg-primary flex h-full justify-between px-6 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,n.jsx)(u.JO,{type:"16-reorder",size:16}),(0,n.jsx)(a.Z.LabelSm,{color:b.available?"text-dark":"text-light",children:b.custom_name||(0,i.t)([h,b.kind,"label"])})]}),y&&(0,n.jsx)(d.T,{allowHTML:!0,content:(0,n.jsx)(c.Z,{style:v,html:(0,i.t)([h,"unavailable_tooltip"],{path:(0,i.t)([h,b.kind,"enable_in_path"])})}),children:(0,n.jsx)(a.Z.LabelXs,{color:"text-light",children:y})}),!y&&(0,n.jsx)(f.Lt,{button:(0,n.jsx)(m.h,{name:"16-menu-dots-horizontal",iconClassName:"!text-dark",ariaLabel:(0,i.t)([h,"actions","aria_label"])}),children:(0,n.jsx)(f.Lt.ItemWithLink,{onClick:function(){return l.show({segment:b})},linkType:"button",children:(0,i.t)([h,"actions",b.custom_name?"edit_custom_name":"assign_custom_name"])})})]})},C=function(){var e=(0,l.u)(),t=e.orderedMobileHomeSegments,r=e.setOrderedMobileHomeSegments;return(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(a.Z.LabelMd,{weight:"semibold",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","title"])})}),(0,n.jsx)(a.Z.BodyMd,{size:"text-sm",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","subtitle"])}),(0,n.jsx)("div",{className:"bg-primary border-primary mt-6 flex border-b py-3 pl-12 pr-6",children:(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",children:(0,i.t)([s.I18N_ROOT,"mobile_home_segments_order","menu_title"])})}),(0,n.jsxs)(o.cm,{items:t,onSort:r,lockedVerticalAxis:!0,distance:10,children:[(0,n.jsx)(o.cm.List,{gap:0,className:"divide-y",children:t.map(function(e){return(0,n.jsx)(o.cm.Item,{item:e,className:"border-primary h-14",children:(0,n.jsx)(P,{})},e.id)})}),(0,n.jsx)(o.cm.DragOverlay,{shouldRestrictToParent:!0,children:(0,n.jsx)("div",{className:"border-primary border-y shadow-md",children:(0,n.jsx)(P,{})})})]})]})}},984954:function(e,t,r){"use strict";r.d(t,{X:()=>a,u:()=>s});var n=r(552676),i=r(275271),o=(0,i.createContext)({orderedMobileHomeSegments:[],setOrderedMobileHomeSegments:function(){}});o.displayName="MobileHomeSegmentsContext";var a=function(e){var t=e.orderedMobileHomeSegments,r=e.setOrderedMobileHomeSegments,i=e.children;return(0,n.jsx)(o.Provider,{value:{orderedMobileHomeSegments:t,setOrderedMobileHomeSegments:r},children:i})},s=function(){return(0,i.useContext)(o)}},22424:function(e,t,r){"use strict";r.d(t,{R:()=>s,w:()=>l});var n=r(131906),i=r(739792),o=r(348641),a=r(60878),s="mobileAppSettings",l=function(){var e=(0,a.pm)(),t=(0,n.useQueryClient)(),r=(0,n.useQuery)({queryKey:[s],queryFn:o.D.show}),l=r.isLoading,c=r.data,u=(null==c?void 0:c.community_setting)||{mobile_home_segments:[]},d=u.mobile_home_segments,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(u,["mobile_home_segments"]),m=(0,n.useMutation)(function(e){return o.D.update(e)},{onSuccess:function(){t.invalidateQueries({queryKey:[s]}),e.success((0,i.t)("settings.mobile_app.messages.success"))},onError:function(t){e.error(t.message)}});return{defaultValues:{community_setting:f},mobileHomeSegments:d,isLoading:l,mutate:m.mutate,isSaving:m.isLoading}}},548857:function(e,t,r){"use strict";r.r(t),r.d(t,{I18N_ROOT:()=>k,MobileApp:()=>N,default:()=>P});var n=r(552676),i=r(275271),o=r(739792),a=r(985870),s=r(39905),l=r(767900),c=r(751169),u=r(955078),d=r(719784),f=r(363833),m=r(971462),p=r(227851),b=r(441342),h=r(853788),y=r(589252),v=r(693723),g=function(){var e,t,r=(0,b.wh)().currentCommunity||{},a=r.has_plus_plan,s=r.name;return(0,n.jsx)(v.x,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"community_setting.show_ios_app_banner",translationRoot:k,childrenWrapper:i.Fragment,isHorizontal:!0},a&&{description:(0,n.jsx)(y.Z,{html:(0,o.t)([k,"community_setting.show_ios_app_banner_description_for_plus"],{community_name:s})})}),t=t={children:(0,n.jsx)(l.l.ToggleSwitch,{name:"community_setting.show_ios_app_banner",variant:"small"})},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))},_=function(e){var t=e.iosAppEnabled,r=e.hasBrandedApp;return t||r?r?(0,n.jsx)(g,{}):(0,n.jsxs)("div",{className:"bg-tertiary mt-6 rounded-lg px-6 py-5",children:[(0,n.jsx)(h.k,{}),(0,n.jsx)(g,{})]}):null},x=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-primary border-t"}),(0,n.jsx)(v.x,{name:"community_setting.ios_app_enabled",translationRoot:k,childrenWrapper:i.Fragment,isHorizontal:!0,description:(0,n.jsx)(y.Z,{html:(0,o.t)([k,"community_setting.ios_app_enabled_description"])}),children:(0,n.jsx)(l.l.ToggleSwitch,{name:"community_setting.ios_app_enabled",variant:"small"})})]})},j=function(){var e=(0,b.wh)().currentCommunity,t=(0,(0,p.Gc)().watch)("community_setting.ios_app_enabled");return(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)(x,{}),(0,n.jsx)(_,{iosAppEnabled:t,hasBrandedApp:!!(null==e?void 0:e.has_branded_app)})]})},w=r(984954),O=r(22424);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k="settings.mobile_app",N=function(){var e,t=(0,O.w)(),r=t.defaultValues,p=t.mobileHomeSegments,b=t.isLoading,h=t.mutate,y=t.isSaving,v=(e=(0,i.useState)([]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=v[0],_=v[1];return((0,i.useEffect)(function(){_(p)},[p]),b)?(0,n.jsx)(c.a,{center:!0}):(0,n.jsxs)(w.X,{orderedMobileHomeSegments:g,setOrderedMobileHomeSegments:_,children:[(0,n.jsx)(m.b,{pageTitle:(0,o.t)([k,"title"])}),(0,n.jsxs)(f.T,{children:[(0,n.jsx)(a.C,{}),(0,n.jsx)(d.n,{children:(0,n.jsx)(u.f,{subtitle:(0,o.t)([k,"subtitle"]),children:(0,n.jsxs)(l.l,{defaultValues:r,onSubmit:function(e){e.community_setting.mobile_home_segments_order=g.map(function(e){return e.kind}),h(e)},children:[(0,n.jsx)(j,{}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(s.z,{type:"submit",variant:"circle",disabled:y,large:!0,children:y?(0,o.t)("saving"):(0,o.t)("save_changes")})})]})})})]})]})};let P=N},458418:function(e,t,r){"use strict";r.d(t,{D:()=>l,L:()=>s});var n=r(275271),i=r(131906),o=r(588262);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=20,l=function(e){var t,r,l,c,u,d,f,m=(0,o.M)().list,p=null!=e?e:{},b=p.query,h=void 0===b?"":b,y=p.perPage,v=void 0===y?s:y,g=p.initialPage,_=void 0===g?1:g,x=p.options,j=p.status,w=void 0===j?"inbox":j,O=["flagged-content",h,v,_,w],S=a({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===x?{}:x),k=(0,i.useInfiniteQuery)(O,function(e){var t=e.pageParam,r=void 0===t?_:t,n=1;return r>0&&(n=r),m({params:a({page:n,per_page:v,status:w},h&&{query:h})})},S),N=(0,n.useMemo)(function(){var e,t;return null!=(t=null==(e=k.data)?void 0:e.pages)?t:[]},[null==(l=k.data)?void 0:l.pages]),P=null!=(d=null==(c=N[0])?void 0:c.count)?d:0,C=null!=(f=null==(u=N[0])?void 0:u.per_page)?f:v;return t=a({},k),r=r={queryKey:O,totalRecords:P,pageSize:C,pages:N},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},976581:function(e,t,r){"use strict";r.d(t,{JH:()=>a,V9:()=>o,dW:()=>i,de:()=>s,vC:()=>n});var n={INBOX:"inbox",APPROVED:"approved",REJECTED:"rejected"},i=["inbox","approved","rejected"],o="status",a="post",s="comment"},588262:function(e,t,r){"use strict";r.d(t,{M:()=>o});var n=r(93199),i=r(547144),o=function(){return{list:function(e){var t=e.params;return(0,n.UT)(i.av.flaggedContent.index({params:void 0===t?{}:t}))},exportCsv:function(e){return(0,n.Cu)(i.av.flaggedContent.exportCsv(e))},get:function(e){return(0,n.UT)(i.av.flaggedContent.show({id:e}))},approve:function(e){return(0,n.gN)(i.av.flaggedContent.approve({id:e}))},reject:function(e,t){return(0,n.gN)(i.av.flaggedContent.reject({id:e}),{action_reason_body:t})}}}},562066:function(e,t,r){"use strict";r.d(t,{O:()=>o});var n=r(458418),i=r(976581),o=function(){var e=(0,n.D)({status:i.vC.INBOX}).totalRecords,t=(0,n.D)({status:i.vC.APPROVED}).totalRecords,r=(0,n.D)({status:i.vC.REJECTED}).totalRecords;return{inboxCount:e,approvedCount:t,rejectedCount:r,totalReports:e+t+r}}},165853:function(e,t,r){"use strict";r.d(t,{Am:()=>c,E7:()=>l,Fw:()=>s,aj:()=>u,kD:()=>o,mH:()=>d,uH:()=>a});var n=r(779774),i=r(739792),o=["enabled","disabled","admin_only"],a="everyone",s="logged_in",l="logged_out",c=[a,s,l],u={name:"",url:"",open_in_new_window:"true",visibility:o[0]},d=n.Ry().shape({name:n.Z_().trim().required().max(20,(0,i.t)("settings.navigation.add_link_modal.form.name.max_length")),url:n.Z_().url().required(),open_in_new_window:n.Z_().required(),visibility:n.Z_().oneOf(["enabled","disabled","admin_only"]).required()})},160685:function(e,t,r){"use strict";r.d(t,{w:()=>a});var n=r(131906),i=r(93199),o=r(547144),a=function(e){var t=e.id,r=e.audience;return(0,n.useQuery)(["community","header-nav-items",r],function(){return(0,i.UT)(o.av.settings.navigation.list(r?{params:{audience:r}}:{}))},{enabled:!!t,staleTime:432e5,cacheTime:864e5})}},102214:function(e,t,r){"use strict";r.d(t,{_:()=>a,s:()=>i});var n=r(739792),i=function(e){return e.name||e.display_name},o=function(e){var t;return null!=(t=e.stripe_prices_attributes.find(function(e){return e.preferred}))?t:e.stripe_prices_attributes[0]},a=function(e){var t=o(e);return(null==t?void 0:t.short_description)||(0,n.t)("settings.paywalls.list.form.no_preferred_price_selected")}},735278:function(e,t,r){"use strict";r.d(t,{v:()=>w});var n=r(552676),i=r(131906),o=r(739792),a=r(757105),s=r(434519),l=r(60878),c=r(44820),u=r(767900),d=r(751169),f=r(979186),m=r(482601),p=r(275271),b=r(428566),h=r(38151);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t,r,i,a=e.name,s=e.interval,l=e.monthlyAmount,c=e.step,d=e.toggleable,f=void 0!==d&&d,v=e.maxPurchasableQuantity,g=e.priceCurrency,_=e.unitSize,x=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","interval","monthlyAmount","step","toggleable","maxPurchasableQuantity","priceCurrency","unitSize"]),j=(0,m.S)(),w=j.defaultValues,O=j.getAddOnPrice,S=j.updateTotalPrice,k=(t=(0,p.useState)((null==w?void 0:w[a])!==void 0?O(a,null==w?void 0:w[a]):void 0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),N=k[0],P=k[1],C=function(e){S(a,A(e))},A=(0,p.useCallback)(function(e){var t=O(a,e);return P(t),t},[O,a]);return(0,n.jsx)(u.l.Item,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:a,hideBorder:!0,isFirstChild:!0,label:(0,o.t)("settings.billing.add_ons.manage.".concat(a)),description:(0,o.t)("settings.billing.add_ons.manage.".concat(s,".").concat(a,"_description"),{amount:l,quantity:_})},x),i=i={children:(0,n.jsxs)("div",{className:"form-input manage-add-ons__item",children:[f&&(0,n.jsx)("div",{className:"manage-add-ons__item-button",children:(0,n.jsx)(b.R,{name:a,onChange:C})}),!f&&(0,n.jsx)("div",{className:"manage-add-ons__item-button",children:(0,n.jsx)(h.A,{name:a,step:void 0===c?1:c,onChange:C,max:v})}),(0,n.jsx)("div",{className:"manage-add-ons__item-price",children:(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:g+N})," ",(0,o.t)("separator_slash")," ",s.charAt(0)]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))},g=function(e){var t=e.onAfterSubmit,r=(0,m.S)(),i=r.isLoading,a=r.addOnsData,s=r.defaultValues,l=r.onSubmit,p=r.total,b=r.serverErrors,h=r.getPlanInterval,y=r.getPlanCurrency,g=r.grandfatheredAddonNames,_=r.handleAddonsMutation.isLoading;return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("div",{className:"manage-add-ons__loader",children:(0,n.jsx)(d.a,{})}),!i&&(0,n.jsxs)("div",{children:[g&&(0,n.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,o.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:g})}})}),(0,n.jsx)(u.l,{onSubmit:function(e){l(e),null==t||t()},defaultValues:s,children:(0,n.jsxs)("div",{className:"manage-add-ons__fields-wrapper text-dark space-y-2",children:[b&&(0,n.jsx)(f.Q,{serverErrors:b}),a.map(function(e){var t;return(0,n.jsx)("div",{children:(0,n.jsx)(v,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:"boolean"==typeof e.quantity,interval:e.interval,maxPurchasableQuantity:null!=(t=e.max_purchasable_quantity)?t:void 0,unitSize:e.unit_size,priceCurrency:e.price_currency})},e.slug)}),(0,n.jsxs)("div",{className:"manage-add-ons__total",children:[(0,n.jsx)("div",{className:"manage-add-ons__total-label",children:(0,o.t)("settings.billing.add_ons.manage.total_purchase")}),(0,n.jsxs)("div",{className:"manage-add-ons__total-value",children:[(0,n.jsx)("b",{children:y()+p})," ",(0,o.t)("separator_slash")," ",h().charAt(0)]})]}),(0,n.jsx)("div",{className:"form-actions",children:(0,n.jsx)(c._,{type:"submit",variant:"primary",full:!0,submitting:_,children:(0,o.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},_=new i.QueryClient,x=function(e){var t=e.onSuccess,r=e.refetchCurrentPlan,c=(0,l.pm)(),u=(0,a.dd)(),d=function(){u.hide(),u.remove()};return(0,n.jsx)(i.QueryClientProvider,{client:_,children:(0,n.jsx)(m.T,{onSuccess:t,onCloseModal:d,refetchCurrentPlan:r,children:(0,n.jsxs)(s.u_,{isOpen:u.visible,onClose:d,className:"manage-add-ons__modal",title:(0,o.t)("settings.billing.add_ons.manage_addons"),children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{size:"lg",children:[(0,n.jsx)(s.u_.Header,{children:(0,n.jsx)(s.u_.Title,{size:"sm",children:(0,o.t)("settings.billing.add_ons.manage_addons")})}),(0,n.jsx)(s.u_.Body,{children:(0,n.jsx)(g,{onAfterSubmit:function(){t&&(d(),c&&c.success((0,o.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},j=a.gk.create(function(e){var t=e.onSuccess,r=e.refetchCurrentPlan;return(0,n.jsx)(x,{onSuccess:t,refetchCurrentPlan:r})}),w=function(){return(0,a.dd)(j)}},979186:function(e,t,r){"use strict";r.d(t,{Q:()=>o});var n=r(552676),i=r(698837),o=function(e){var t,r,o=e.serverErrors,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["serverErrors"]),s=o.title,l=o.errors,c=o.topExtraInfo,u=o.bottomExtraInfo;return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"server-errors"},a),r=r={children:(0,n.jsxs)("div",{className:"server-errors__wrapper",children:[(0,n.jsx)("div",{className:"server-errors__close-icon",children:(0,n.jsx)(i.Z,{className:"server-errors__icon-svg"})}),(0,n.jsxs)("div",{className:"server-errors__container",children:[s&&(0,n.jsx)("h3",{className:"server-errors__title",children:s}),c&&(0,n.jsx)("p",{className:"server-errors__extra-info",children:c}),l&&Array.isArray(l)&&(0,n.jsx)("div",{className:"server-errors__content",children:(0,n.jsx)("ul",{className:"server-errors__list",children:l.map(function(e){return(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"server-errors__error-title",children:e.title}),":"," ",(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})]},e.title)})})}),u&&(0,n.jsx)("p",{className:"server-errors__extra-info",children:u})]})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},482601:function(e,t,r){"use strict";r.d(t,{S:()=>y,T:()=>h});var n=r(552676),i=r(275271),o=r(739792),a=r(206046),s=r(131906),l=r(60878),c=function(e){var t=e.handleOnSuccess,r=e.setServerErrors,n=e.onCloseModal,i=e.refetchCurrentPlan,c=(0,l.pm)();return{handleAddonsMutation:(0,s.useMutation)(function(e){return a.z.create(e)},{onSuccess:function(){t?t():(null==i||i(),c.success((0,o.t)("settings.billing.add_ons.changes_succeeded")),null==n||n())},onError:function(e){console.error(e),r&&r({title:null==e?void 0:e.message,errors:null==e?void 0:e.errorDetails})}})}};function u(e,t,r){return"boolean"==typeof e?e?t:0:e*t/r}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=(0,i.createContext)(void 0);b.displayName="AddOnsSettingsContext";var h=function(e){var t=e.onSuccess,r=e.onCloseModal,s=e.children,l=e.refetchCurrentPlan,d=p((0,i.useState)(),2),h=d[0],y=d[1],v=p((0,i.useState)([]),2),g=v[0],_=v[1],x=p((0,i.useState)(),2),j=x[0],w=x[1],O=p((0,i.useState)(),2),S=O[0],k=O[1],N=p((0,i.useState)(!0),2),P=N[0],C=N[1],A=p((0,i.useState)(),2),I=A[0],T=A[1],E=p((0,i.useState)(),2),L=E[0],D=E[1],M=c({handleOnSuccess:t,setServerErrors:T,onCloseModal:r,refetchCurrentPlan:l}).handleAddonsMutation,R=function(){var e=0;S&&(Object.keys(S).forEach(function(t){e+=S[t]}),y(e))},B=function(e){var t={};return e.forEach(function(e){t[e.slug]=u(e.quantity,e.base_amount,e.unit_size)}),t},z=function(e){var t={};return e.forEach(function(e){t[e.slug]=e.quantity}),t},F=function(e){return g.find(function(t){return t.slug===e})},U=function(){var e;return(e=function(){var e;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,a.z.index()];case 1:return w(z(e=t.sent())),_(e.map(function(e){var t,r;return t=m({},e),r=r={step:e.unit_size},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})),D(e.filter(function(e){return e.is_grandfathered}).map(function(e){return e.name}).join(", ")),k(B(e)),[3,4];case 2:return t.sent(),T({title:(0,o.t)("something_went_wrong")}),[3,4];case 3:return C(!1),[7];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,i.useEffect)(function(){U()},[]),(0,i.useEffect)(function(){R()},[S]),(0,n.jsx)(b.Provider,{value:{getPlanInterval:function(){return g[0].interval},getPlanCurrency:function(){return g[0].price_currency},total:h,addOnsData:g,defaultValues:j,isLoading:P,handleAddonsMutation:M,serverErrors:I,getAddOnPrice:function(e,t){var r=F(e);return r?u(t,r.base_amount,r.unit_size):0},updateTotalPrice:function(e,t){var r=m({},S);r[e]=t,k(r)},onSubmit:function(e){var t={};Object.keys(e).forEach(function(r){var n=F(r);n&&(t[n.id.toString()]=e[r])}),M.mutate(t)},grandfatheredAddonNames:L},children:s})},y=function(){var e=(0,i.useContext)(b);if(void 0===e)throw Error("useAddOnsSettingsContext must be used within an AddOnsSettingsContextProvider");return e}},615679:function(e,t,r){"use strict";r.d(t,{d:()=>A});var n=r(552676),i=r(757105),o=r(739792),a=r(434519),s=r(906082);let l=r.p+"static/images/features/ai-actions/en/value-prop_1x-ada5cde634ab4d2f.png",c=r.p+"static/images/features/ai-actions/en/value-prop_2x-14689d55280fff16.png";var u=r(824869),d=r(779869),f=r(494375),m=r(269075),p=r(957363),b=r(39905),h=r(381636),y=function(e){var t=e.description;return(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"mt-1 flex size-5 items-center justify-center",children:(0,n.jsx)(p.JO,{type:"20-checkmark-circle-fill-thin",size:20,className:"text-black-600"})}),(0,n.jsx)(h.Z.BodySm,{color:"text-default",children:t})]})},v=function(){return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(h.Z.LabelSm,{weight:"bold",children:(0,o.t)("settings.ai_actions.modal.ai_actions.title")})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_actions.deploy_agents_desc")}),(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_actions.train_agents_desc")})]})]})},g=function(){return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(h.Z.LabelSm,{weight:"bold",children:(0,o.t)("settings.ai_actions.modal.ai_filters.title")})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_filters.analyze_sentiment_desc")}),(0,n.jsx)(y,{description:(0,o.t)("settings.ai_actions.modal.ai_filters.content_moderation_desc")})]})]})},_=r(751169),x=function(e){var t=e.plan;return e.isLoading?(0,n.jsx)("div",{className:"bg-primary border-primary flex h-32 w-full items-center justify-center rounded-b-lg border",children:(0,n.jsx)(_.a,{})}):t?(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-b-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,n.jsx)(h.Z.LabelLg,{weight:"semibold",children:t.display_name}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1 align-middle",children:[(0,n.jsx)(h.Z.LabelMd,{weight:"bold",children:t.display_base_monthly_amount}),(0,n.jsx)(h.Z.BodyMd,{weight:"font-normal",color:"text-slate-700 dark:text-slate-300",size:"text-sm",children:(0,o.t)("settings.ai_actions.modal.monthly_interval")})]})]}),(0,n.jsx)(h.Z.LabelXs,{children:(0,o.t)((0,s.pE)(t.interval)?"settings.ai_actions.modal.annual_amount":"settings.ai_actions.modal.monthly_amount",(0,s.pE)(t.interval)?{dollar_amount:t.annual_base_amount_with_currency}:{})})]}):null},j=function(e){var t=e.handleActivate,r=e.handleLearnMore,i=e.isPlanLoading,a=e.plan;return(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(h.Z.BodyMd,{children:(0,o.t)("settings.ai_actions.modal.description")})}),(0,n.jsx)(g,{}),(0,n.jsx)(v,{}),(0,n.jsxs)(b.z,{onClick:r,variant:"secondary",className:"mb-4 w-auto self-start",children:[(0,o.t)("settings.ai_actions.modal.learn_more_button"),(0,n.jsx)(p.JO,{type:"16-arrow-top-right",size:16,className:"ml-2"})]}),(0,n.jsxs)("div",{className:"mt-auto flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"lg:hidden",children:(0,n.jsx)(x,{plan:a,isLoading:i})}),(0,n.jsx)(b.z,{onClick:t,large:!0,full:!0,variant:"marketing-gradient",children:(0,o.t)("settings.ai_actions.modal.upgrade_to",{plan_name:"Enterprise"})})]})]})},w=function(e){var t=e.image1x,r=e.imageVariants,i=e.alt,o=e.plan,a=e.isLoading,s="".concat(r.thumbnail," 300w, ").concat(r.small," 600w, ").concat(r.medium," 900w, ").concat(r.large," 1200w");return(0,n.jsx)("div",{className:"hidden h-full flex-1 lg:flex",children:(0,n.jsxs)("div",{className:"relative size-full",children:[(0,n.jsx)("div",{className:"size-full",children:(0,n.jsx)("img",{src:t,srcSet:s,alt:i,loading:"eager",className:"size-full object-cover"})}),(0,n.jsx)(x,{plan:o,isLoading:a})]})})};function O(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var S=function(e){var t=e.handleClose,r=(0,d.w)(),i=(0,u.E)().defaultCurrency,p=(0,m.R)({planTier:s.Gb.enterprise,billingCurrency:i||void 0}),b=p.plan,h=p.isPlanLoading;return(0,n.jsx)(a.u_.Body,{children:(0,n.jsxs)("div",{className:"flex h-full gap-8 pb-6 pt-4",children:[(0,n.jsx)(j,{handleActivate:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return t(),[4,r.show({planTier:s.Gb.enterprise,showPlanDetails:!1,successButtonLabel:(0,o.t)("pricing_plans.upgrade_modal.actions.close"),source:f.fe.AI_ACTIONS_ENABLE_MODAL})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O(o,n,i,a,s,"next",e)}function s(e){O(o,n,i,a,s,"throw",e)}a(void 0)})})()},handleLearnMore:function(){window.open("https://help.circle.so/c/workflow-setup/getting-started-with-ai-workflows","_blank")},plan:b,isPlanLoading:h}),(0,n.jsx)(w,{image1x:l,imageVariants:{thumbnail:l,small:l,medium:l,large:c},alt:(0,o.t)("settings.ai_actions.modal.image_alt"),plan:b,isLoading:h})]})})},k=function(e){var t=e.handleClose;return(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{size:"md",className:"w-full text-left",children:(0,n.jsx)(h.Z.TitleMd,{weight:"font-bold",children:(0,o.t)("settings.ai_actions.modal.title")})}),(0,n.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(a.u_.CloseButton,{onClick:t})})]})};function N(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var P=function(e){var t=e.afterClose,r=(0,i.dd)(),s=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,r.hide()];case 1:return e.sent(),r.remove(),null==t||t(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,s,"next",e)}function s(e){N(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(a.u_,{title:(0,o.t)("settings.ai_actions.modal.title"),isOpen:r.visible,onClose:s,children:[(0,n.jsx)(a.u_.Overlay,{}),(0,n.jsxs)(a.u_.Content,{size:"2xl",children:[(0,n.jsx)(k,{handleClose:s}),(0,n.jsx)(S,{handleClose:s})]})]})},C=i.gk.create(function(e){var t=e.afterClose,r=e.source;return(0,n.jsx)(P,{afterClose:t,source:r})}),A=function(){return(0,i.dd)(C)}},274002:function(e,t,r){"use strict";r.d(t,{g:()=>eO});var n=r(552676),i=r(339720),o=r(498936),a=r(275271),s=r(739792),l=r(990809),c=r(432050),u=r(751169),d=r(381636),f=r(735278),m=function(e){var t,r=e.currentPlan,i=e.refetchCurrentPlan,o=(0,f.v)(),a=r.plan_addons_total_amount_with_interval;return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsx)(d.Z.TitleSm,{weight:"bold",children:(0,s.t)("settings.billing.add_ons.my_addons")}),(0,n.jsx)(d.Z.TitleSm,{weight:"bold",children:a})]}),null==r||null==(t=r.plan_addons)?void 0:t.map(function(e){return(0,n.jsxs)("div",{className:"flex justify-between gap-3 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.Z.LabelSm,{children:[e.value," ",e.label]}),"number"==typeof e.remaining_resources&&(0,n.jsx)(d.Z.LabelSm,{color:"text-light pl-2",children:(0,s.t)("settings.billing.add_ons.remaining_resources",{count:e.remaining_resources})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(d.Z.LabelSm,{weight:"bold",children:e.amount_with_interval})})]},e.community_plan_addon_id)}),(0,n.jsx)("button",{type:"button",onClick:function(){return o.show({refetchCurrentPlan:i})},children:(0,n.jsx)(d.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,s.t)("settings.billing.add_ons.manage_add_ons")})})]})},p=r(991712),b=r(303189),h=r(217123),y=function(e){var t=e.startDate;return(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("settings.billing.ai_actions.usage_this_month_starting_from",{date:(0,h.default)(new Date(1e3*t),"MMM d, yyyy")})})})},v=r(701168),g=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:(0,v.A)("bg-primary border-primary rounded-lg border px-8 py-7",r),children:t})},_=r(663676),x=r(957363),j=r(380171),w=function(e){var t=e.finalOveragePrice,r=e.currencySymbol,i=e.isOverage,o=e.priceOverage;return(0,n.jsxs)("div",{className:"mb-1 flex justify-between",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,s.t)("settings.billing.ai_actions.product_name")})}),i&&t&&o&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:"".concat(r).concat((0,_.HA)(t))}),(0,n.jsx)(j.T,{content:(0,s.t)("settings.billing.ai_actions.overage_tooltip",{price:"".concat(r).concat((0,_.HA)(o))}),children:(0,n.jsx)(x.JO,{type:"16-info",useWithStrokeCurrentColor:!0,size:16,className:"ml-1"})})]})]})},O=function(){return(0,n.jsx)("div",{className:"border-primary mb-6 border-b pb-6"})},S=r(66219),k=r(386932);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onDateRangeSelect,r=(e=(0,a.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return N(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1],o=(0,k.e)({enabled:n,products:["ai_actions"]}),l=o.billingCycles,c=o.isLoading,u=o.hasData,d=o.refetch,f=(0,a.useCallback)(function(e,t,r,n){var i=(0,h.default)(e,"MMM d");return r||n?(0,s.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,s.t)("settings.billing.ai_actions.date_ranges.present")}):e.toDateString()===t.toDateString()?(0,s.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,h.default)(t,"MMM d")}):e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?(0,s.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,h.default)(t,"d")}):(0,s.t)("settings.billing.ai_actions.date_ranges.range_format",{start:i,end:(0,h.default)(t,"MMM d")})},[]),m=(0,a.useMemo)(function(){return u?l.sort(function(e,t){return t.start_date-e.start_date}).map(function(e){var t,r=new Date(1e3*e.start_date),n=new Date(1e3*e.end_date),i=new Date;return{label:f(r,n,r<=i&&i<=n,(null==(t=l[0])?void 0:t.id)===e.id),value:e.id,startDate:e.start_date,endDate:e.end_date}}):[]},[l,u,f]),p=(0,a.useCallback)(function(){u||c?u&&d():i(!0)},[u,c,d]);return{dateRanges:m,handleDateRangeSelect:function(e){null==t||t(e)},isLoading:c,hasData:u,fetchBillingCycles:p}},C=r(39905),A=r(943544),I=function(e){var t=e.dateRanges,r=e.isLoading,i=e.onDropdownClick,o=e.onDateRangeSelect;return(0,n.jsx)(A.Lt,{direction:"bottom-start",size:"large",onToggle:function(e){e&&i()},button:(0,n.jsx)(A.Lt.MenuButton,{className:"!border-0 !bg-transparent !p-0",children:(0,n.jsx)(C.z,{variant:"text",className:"!p-0",children:(0,n.jsxs)("span",{className:"inline-flex items-center gap-0",children:[(0,s.t)("settings.billing.ai_actions.view_usage_history"),(0,n.jsx)(x.JO,{type:"caret-down-bold",size:12,className:"mb-1 shrink-0"})]})})}),children:(0,n.jsx)("div",{className:"py-1",children:r?(0,n.jsx)("div",{className:"flex items-center justify-center px-4 py-8",children:(0,n.jsx)(u.a,{className:"size-5"})}):0===t.length?(0,n.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:(0,s.t)("settings.billing.ai_actions.no_billing_cycles",{defaultValue:"No billing cycles found"})}):t.map(function(e){return(0,n.jsx)(A.Lt.Item,{children:(0,n.jsx)("button",{type:"button",onClick:function(){return o(e)},className:"text-dark hover:bg-secondary w-full px-4 py-2 text-left text-sm transition-colors",children:e.label})},e.value)})})})},T=r(131906),E=r(93199),L=r(547144);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){var t=e.start_date,r=e.end_date,n=e.free_quantity,i=e.price_overage,o=e.initialPage,s=e.initialPerPage,l=e.initialSortField,c=e.initialSortDirection,u=e.enabled,d=M((0,a.useState)(void 0===o?1:o),2),f=d[0],m=d[1],p=M((0,a.useState)(void 0===s?10:s),2),b=p[0],h=p[1],y=M((0,a.useState)(void 0===l?"total_credits_consumed":l),2),v=y[0],g=y[1],_=M((0,a.useState)(void 0===c?"desc":c),2),x=_[0],j=_[1],w={start_date:t,end_date:r,free_quantity:n,price_overage:i,page:f,per_page:b,sort_field:v,sort_direction:x},O=(0,T.useQuery)(["ai-workflows-billing-history",w],function(){var e;return e=w,(0,E.UT)(L.av.aiWorkflowsBillingHistory.list({params:e}))},{enabled:(void 0===u||u)&&!!t&&!!r,keepPreviousData:!0}),S=O.data,k=O.isLoading,N=O.error,P=O.refetch;return{workflows:(null==S?void 0:S.workflows)||[],pagination:(null==S?void 0:S.pagination)||{current_page:f,per_page:b,total_pages:0,total_count:0},isLoading:k,error:N,refetch:P,page:f,perPage:b,sortField:v,sortDirection:x,handlePageChange:function(e){m(e)},handlePerPageChange:function(e){h(e),m(1)},handleSortChange:function(e){e===v?j("asc"===x?"desc":"asc"):(g(e),j("desc")),m(1)}}},B=r(757105),z=r(134062),F=r(434519),U=function(){var e=(0,b.D)(),t=e.currentPlan,r=e.isCurrentPlanLoading,n=e.errorFetchingCurrentPlan;return{billingDetails:null==t?void 0:t.ai_actions_billing,isLoading:r,error:n}},Z=function(e){var t=new Date(e);return(0,n.jsx)(d.Z.BodyMd,{children:(0,h.default)(t,(0,s.t)("settings.billing.ai_actions.date_format"))})},G=function(e){var t=e.dateRange,r=e.freeQuantity,i=(0,B.dd)(),o=U().billingDetails,l=(0,a.useMemo)(function(){if(!t||0===t.startDate||0===t.endDate)return{startDate:"",endDate:""};var e=new Date(1e3*t.startDate),r=new Date(1e3*t.endDate);return{startDate:(0,h.default)(e,"yyyy-MM-dd"),endDate:(0,h.default)(r,"yyyy-MM-dd")}},[t]),c=l.startDate,u=l.endDate,f=R({start_date:c,end_date:u,free_quantity:r,price_overage:(null==o?void 0:o.price_overage)||0,enabled:i.visible&&!!c&&!!u}),m=f.workflows,p=f.pagination,b=f.isLoading,y=f.error,v=f.page,g=f.sortField,x=f.sortDirection,j=f.handlePageChange,w=f.handleSortChange,O=function(){i.hide(),i.remove()},S=(0,a.useMemo)(function(){return[{accessorKey:"workflow_name",header:(0,s.t)("settings.billing.ai_actions.table_headers.name"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(d.Z.BodyMd,{children:t})}},{accessorKey:"total_credits_consumed",header:(0,s.t)("settings.billing.ai_actions.table_headers.credits"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(d.Z.BodyMd,{children:(0,_.HA)(t)})}},{accessorKey:"total_runs",header:(0,s.t)("settings.billing.ai_actions.table_headers.total_runs"),cell:function(e){var t;return t=e.getValue(),(0,n.jsx)(d.Z.BodyMd,{children:(0,_.HA)(t)})}},{accessorKey:"created_at",header:(0,s.t)("settings.billing.ai_actions.table_headers.created_at"),cell:function(e){return Z(e.getValue())}}]},[]);return(0,n.jsxs)(F.u_,{isOpen:i.visible,onClose:O,children:[(0,n.jsx)(F.u_.Overlay,{}),(0,n.jsxs)(F.u_.Content,{size:"full",className:"max-w-screen-xl",children:[(0,n.jsxs)(F.u_.Header,{children:[(0,n.jsx)(F.u_.Title,{children:(0,s.t)("settings.billing.ai_actions.modal_title")}),(0,n.jsx)(F.u_.HeaderActions,{children:(0,n.jsx)(F.u_.CloseButton,{onClick:O})})]}),(0,n.jsx)(F.u_.Body,{className:"flex h-full flex-col p-8",children:y?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(d.Z.BodyMd,{color:"text-danger",children:(0,s.t)("settings.billing.ai_actions.error_loading_data")})}):(0,n.jsx)(z.w,{data:m,columns:S,totalRecordsCount:p.total_count,isLoading:b,onChangePage:j,pageSize:p.per_page,initialPage:v,onChangeSorting:function(e){e.length>0&&w(e[0].id)},initialSort:[{id:g,desc:"desc"===x}],children:(0,n.jsxs)(z.w.TableWrapper,{className:"px-0",children:[(0,n.jsxs)(z.w.Table,{children:[(0,n.jsxs)("colgroup",{children:[(0,n.jsx)("col",{style:{width:"40%"}}),(0,n.jsx)("col",{style:{width:"25%"}}),(0,n.jsx)("col",{style:{width:"15%"}}),(0,n.jsx)("col",{style:{width:"20%"}})]}),(0,n.jsx)(z.w.SortableHead,{}),(0,n.jsx)(z.w.Loader,{}),(0,n.jsx)(z.w.NoRecords,{text:(0,s.t)("settings.billing.ai_actions.no_workflows_found")}),(0,n.jsx)(z.w.Body,{})]}),(0,n.jsx)(z.w.Pagination,{align:"left",direction:"reverse"})]})})})]})]})},q=B.gk.create(function(e){var t=e.dateRange,r=e.freeQuantity;return(0,n.jsx)(G,{dateRange:t,freeQuantity:r})}),V=function(e){var t=e.freeQuantity,r=e.isOverage,i=e.progress,o=e.usageCount,a=(0,B.dd)(q),l=P({onDateRangeSelect:function(e){a.show({dateRange:e,freeQuantity:t})}}),c=l.dateRanges,u=l.handleDateRangeSelect,f=l.isLoading,m=l.fetchBillingCycles;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.LabelMd,{weight:"semibold",children:(0,s.t)("settings.billing.ai_actions.credits")})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(S.N,{progress:i,size:"sm",type:r?"danger":"success"})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("settings.billing.ai_actions.credits_in_tier",{current_credits_count:(0,_.HA)(o),max_credits_count_in_tier:(0,_.HA)(t)})}),(0,n.jsx)("div",{children:(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:!r&&(0,s.t)("settings.billing.ai_actions.included")})})]}),(0,n.jsx)("div",{className:"mt-3 inline-block",children:(0,n.jsx)(I,{dateRanges:c,isLoading:f,onDropdownClick:m,onDateRangeSelect:u})}),r&&(0,n.jsx)("div",{className:"mt-4 flex flex-col items-start gap-2",children:(0,n.jsx)(d.Z.LabelSm,{color:"text-danger",children:(0,s.t)("settings.billing.ai_actions.overage_message")})})]})},W=function(){var e=U().billingDetails;if(!e||"canceled"===e.status)return null;var t=e.free_quantity,r=e.usage_count,i=e.overage,o=e.final_overage_price,a=e.price_overage,s=e.cycle,l=e.currency_symbol,c=e.progress;return(0,n.jsxs)(g,{children:[(0,n.jsx)(w,{isOverage:i,finalOveragePrice:o,priceOverage:a,currencySymbol:l}),(0,n.jsx)(y,{startDate:s.start_date}),(0,n.jsx)(O,{}),(0,n.jsx)(V,{usageCount:r,freeQuantity:t,isOverage:i,progress:c})]})},H=r(918594),Q=r(55627),K=r(524330),J=r(424168),$=function(e){var t=e.freePeriod,r=null==t?void 0:t.ends_at,i=function(e){return new Date(e.toDateString())},o=i(new Date),a=i(new Date(r)),l=Math.max((0,J.Z)(a,o),0),c=(0,h.default)(a,"MMM d, yyyy");return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("div",{className:"dark:bg-tertiary rounded-lg bg-blue-100 p-4",children:[(0,n.jsx)(d.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,s.t)("settings.billing.email_hub.free_period_banner.title")}),(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(d.Z.BodySm,{color:"text-secondary",children:(0,s.t)("settings.billing.email_hub.free_period_banner.remaining_days",{days_left:l,end_date:c})})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.BodySm,{children:(0,s.t)("settings.billing.email_hub.free_period_banner.banner_text")})}),(0,n.jsx)(H.rU,{to:L.Lo.email.overview,children:(0,n.jsx)(C.z,{variant:"secondary",children:(0,n.jsx)(d.Z.LabelSm,{children:(0,s.t)("settings.billing.email_hub.free_period_banner.send_broadcast")})})})]})})},X=function(){return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("div",{className:"dark:bg-tertiary rounded-lg bg-blue-100 p-6",children:[(0,n.jsx)(d.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,s.t)("settings.billing.email_hub.free_tier_banner.title")}),(0,n.jsx)("div",{className:"my-2",children:(0,n.jsx)(d.Z.BodySm,{color:"text-secondary",children:(0,s.t)("settings.billing.email_hub.free_tier_banner.banner_text")})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(H.rU,{to:L.Lo.email.overview,children:(0,n.jsx)(C.z,{variant:"secondary",children:(0,n.jsx)(d.Z.LabelSm,{children:(0,s.t)("settings.billing.email_hub.free_period_banner.send_broadcast")})})})})]})})},Y=function(e){var t=e.billingDetails,r=t.percentage_completion_in_tier,i=t.max_contacts_count_in_tier,o=t.current_contacts_count,a=t.amount_with_currency_interval,l=t.amount_with_currency,c=t.free_period,u=t.billing_status,f=t.free_tier,m=Q.J.useCancellationModal();return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,s.t)("settings.billing.email_hub.title")}),"free_period"===u&&(0,n.jsx)(K.g,{label:(0,s.t)("settings.billing.email_hub.free_period_badge")}),f&&(0,n.jsx)(K.g,{label:(0,s.t)("settings.billing.email_hub.free_tier_badge")})]}),(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:(null==c?void 0:c.active)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("s",{children:l}),(0,s.t)("settings.billing.email_hub.per_month")]}):a})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.LabelMd,{weight:"semibold",children:(0,s.t)("settings.billing.email_hub.contacts")})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(S.N,{progress:r,size:"sm"})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("settings.billing.email_hub.contacts_in_tier",{current_contacts_count:o,max_contacts_count_in_tier:i})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("settings.billing.email_hub.scales_as_you_grow")}),(0,n.jsx)(j.T,{content:(0,s.t)("settings.billing.email_hub.scales_as_you_grow_tooltip"),children:(0,n.jsx)(x.JO,{type:"16-info",useWithStrokeCurrentColor:!0,size:16,className:"ml-1"})})]})]})]}),(null==c?void 0:c.active)&&(0,n.jsx)($,{freePeriod:c}),f&&(0,n.jsx)(X,{}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(H.rU,{to:L.Lo.members.manage,children:(0,n.jsx)("button",{type:"button",children:(0,n.jsx)(d.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,s.t)("settings.billing.email_hub.manage_contacts")})})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"button",onClick:function(){return m.show()},children:(0,n.jsx)(d.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,s.t)("settings.billing.email_hub.disable_email_hub")})})})]})]})},ee=r(535410),et=r(134870),er=function(e){var t=e.billingDetails.current_period_end,r=(0,ee.K)(),i=r.reactivateEmailHubSubscription,o=r.isReactivatingEmailHubSubscription,a=(0,et.w)({dateTime:new Date(t),format:et.f.short_month_and_date_with_year});return o?(0,n.jsx)(u.a,{variant:"fullscreen",center:!0}):(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,s.t)("settings.billing.email_hub.title")})})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(d.Z.BodySm,{color:"secondary",children:(0,s.t)("settings.billing.email_hub.cancel_at_period_end_state.callout",{date:a})})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.BodySm,{color:"secondary",children:(0,s.t)("settings.billing.email_hub.cancel_at_period_end_state.text")})}),(0,n.jsx)("div",{children:(0,n.jsx)(C.z,{onClick:function(){i(),setTimeout(function(){window.location.reload()},2e3)},variant:"secondary",children:(0,n.jsx)(d.Z.LabelSm,{weight:"medium",children:(0,s.t)("settings.billing.email_hub.cancel_at_period_end_state.button")})})})]})},en=r(302352),ei=function(){var e=(0,en.T)();return(0,n.jsxs)("div",{className:"dark:bg-tertiary border-primary my-6 rounded-lg border bg-blue-100 px-8 py-7",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(d.Z.TitleSm,{weight:"medium",children:(0,s.t)("settings.billing.email_hub.inactive_state.title")})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.BodySm,{color:"secondary",children:(0,s.t)("settings.billing.email_hub.inactive_state.description")})}),(0,n.jsx)("div",{children:(0,n.jsx)(C.z,{onClick:function(){return e.show()},variant:"secondary",children:(0,n.jsx)(d.Z.LabelSm,{weight:"medium",children:(0,s.t)("settings.billing.email_hub.inactive_state.enable_button")})})})]})},eo=function(){var e=(0,b.D)().currentPlan;if(!(null==e?void 0:e.email_hub_billing))return null;var t=e.email_hub_billing.billing_status;return"active"===t||"free_period"===t?(0,n.jsx)(Y,{billingDetails:e.email_hub_billing}):"cancel_at_period_end"===t?(0,n.jsx)(er,{billingDetails:e.email_hub_billing}):(0,n.jsx)(ei,{})},ea=r(714034),es=r(840905),el=r(590996),ec=r(441342),eu=function(){var e=(0,ec.wh)().currentCommunitySettings,t=(0,ea.c)(),r=t.extraStorage,i=t.totalBytesUsed,o=t.totalBytesInPlan,a=t.isLoadingStorageMetrics;if(!(null==e?void 0:e.growth_storage_billing_enabled))return null;if(a)return(0,n.jsx)(es.gi,{variant:"card-view"});if(!r)return null;var l=r.monthly_price_cents/100,c="".concat(r.currency_symbol).concat((0,_.HA)(l)),u=o+r.purchased_storage_bytes;return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"extra-storage-title",children:(0,s.t)("settings.billing.extra_storage.title")})}),(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"extra-storage-price",children:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.LabelMd,{weight:"semibold",children:(0,s.t)("settings.billing.extra_storage.storage_limit")})}),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(S.N,{progress:u>0?i/u*100:0,size:"sm"})}),(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("settings.billing.extra_storage.storage_usage",{used:(0,el.s)(i),total:(0,el.s)(u),addon:(0,el.s)(r.purchased_storage_bytes)})})})]})]})},ed=r(906082),ef=function(e){var t=e.count,r=e.remainingValue;return(0,n.jsxs)("div",{className:"flex gap-3 pb-2",children:[(0,n.jsx)(x.JO,{type:"check",size:16}),(0,n.jsx)(d.Z.LabelSm,{color:"text-dark",children:t}),"number"==typeof r&&(0,n.jsx)(d.Z.LabelSm,{color:"text-light",children:(0,s.t)("pricing_plans.features_with_values.remaining_resources",{count:r})})]})},em=function(e){var t=e.currentPlan;return(0,n.jsxs)("div",{className:"bg-primary border-primary rounded-lg border px-8 py-7",children:[(0,n.jsxs)("div",{className:"border-primary mb-6 flex justify-between border-b pb-6",children:[(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-name",children:(0,ed.gR)(t.tier)?t.name:(0,s.t)("settings.billing.plans.".concat(t.tier))}),(0,n.jsx)(d.Z.TitleSm,{weight:"bold","data-testid":"plan-price",children:(0,ed.gR)(t.tier)?t.annual_base_amount_with_interval:t.base_amount_with_interval})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(d.Z.LabelMd,{weight:"semibold",children:(0,s.t)("settings.billing.your_plan")})}),(0,n.jsx)(ef,{count:t.max_space_count,remainingValue:t.remaining_max_space_count}),(0,n.jsx)(ef,{count:t.max_admin_count,remainingValue:t.remaining_max_admin_count}),(0,n.jsx)(ef,{count:t.max_moderator_count,remainingValue:t.remaining_max_moderator_count}),(0,n.jsx)(ef,{count:t.max_member_count,remainingValue:t.remaining_max_member_count}),(0,n.jsx)(ef,{count:t.live_stream_max_host_capacity}),(0,n.jsx)(ef,{count:t.live_stream_max_spectator_capacity}),(0,n.jsx)(ef,{count:t.live_stream_monthly_stream_hours,remainingValue:t.remaining_live_stream_monthly_stream_hours}),(0,n.jsx)(ef,{count:t.live_room_participants_capacity})]})},ep=function(){var e=(0,T.useQuery)(["community-upcoming-invoice"],function(){return(0,E.UT)(L.av.accountPaymentProcessors.invoice.upcomingInvoice())},{retry:10});return{upcomingInvoice:e.data,isUpcomingInvoiceLoading:e.isLoading,errorFetchingUpcomingInvoice:e.error,refetchUpcomingInvoice:e.refetch,isRefetchingUpcomingInvoice:e.isRefetching}},eb=function(e){var t=e.item,r=e.labelTranslation,i=e.label,o=e.amountColor,a=e.labelColor;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsxs)("div",{className:"flex justify-between pb-2",children:[(0,n.jsx)(d.Z.LabelSm,{color:void 0===a?"text-dark":a,children:r?(0,s.t)("settings.billing.preview_invoice.".concat(r)):i}),(0,n.jsx)(d.Z.LabelSm,{color:void 0===o?"text-dark":o,children:t})]})})},eh=function(e){var t=e.invoice,r=e.title;return null===t?null:(0,n.jsxs)(n.Fragment,{children:[t.next_payment_date&&(0,n.jsxs)("div",{className:"border-primary mb-3 flex justify-between border-b pb-3",children:[(0,n.jsx)(d.Z.LabelSm,{weight:"bold",children:r}),(0,n.jsx)(d.Z.LabelSm,{children:t.next_payment_date})]}),t.line_items.map(function(e){return(0,n.jsx)(eb,{item:e.amount,label:e.name},e.id)}),t.coupon_amount&&(0,n.jsx)(eb,{item:t.coupon_amount,label:(0,s.t)("settings.billing.preview_invoice.coupon_terms",{coupon_name:t.coupon_name,discount:t.coupon_terms}),labelColor:"text-light",amountColor:"text-v2-success"}),t.tax&&(0,n.jsx)(eb,{item:t.tax,labelTranslation:"tax"}),t.balance&&(0,n.jsx)(eb,{item:t.balance,labelTranslation:"balance",amountColor:"text-v2-success"}),(0,n.jsx)(eb,{item:t.amount_due,labelTranslation:"amount_due"})]})},ey=r(945941),ev=r(911638),eg=r(757387),e_=function(e){var t=e.cancellingMetadata,r=(0,eg.u)(),i=r.onGenerateBillingPortalUrl,o=r.isCreatingBillingPortal,a=(0,ev.n5)()?"UJB6AB55":"nH21fEOM";return(0,n.jsxs)("div",{className:"border-t border-gray-200 py-5",children:[o&&(0,n.jsx)(u.a,{variant:"fullscreen"}),["view_invoices","manage_card","manage_billing_address"].map(function(e){return(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("button",{type:"button",onClick:i,children:(0,n.jsx)(d.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,s.t)("pricing_plans.".concat(e))})})},e)}),t&&(0,n.jsx)(ey.PopupButton,{id:a,size:66,medium:"demo-test",hidden:t,children:(0,n.jsx)(d.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,s.t)("pricing_plans.cancel_plan")})})]})},ex=function(e){var t=e.showBillingPortal,r=e.currentPlan,i=ep(),o=i.upcomingInvoice;if(i.isUpcomingInvoiceLoading)return(0,n.jsx)(u.a,{center:!0});var a=o.community_plan_invoice,l=o.secondary_subscription_invoice,c=o.shared_invoice;return(0,n.jsxs)("div",{className:"bg-primary border-primary my-6 rounded-lg border px-8 py-7",children:[(0,n.jsx)("div",{className:"mb-6 flex justify-between",children:(0,n.jsx)(d.Z.TitleSm,{weight:"bold",children:(0,s.t)("settings.billing.billing_cycle.title")})}),(0,n.jsx)(eh,{invoice:a,title:(0,s.t)("settings.billing.preview_invoice.community_plan_title",{community_plan:"Circle ".concat(r.display_name)})}),!c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)(eh,{invoice:l,title:(0,s.t)("settings.billing.preview_invoice.marketing_plan_title")})]}),t&&(0,n.jsx)(e_,{cancellingMetadata:r.cancelling_metadata})]})},ej=function(e){var t=e.showBillingPortal,r=e.showAddons,i=e.forceFromSubscription,o=e.showBillingDetails,d=(0,b.D)(void 0===i||i),f=d.currentPlan,h=d.isCurrentPlanLoading,y=d.errorFetchingCurrentPlan,v=d.refetchCurrentPlan,g=(0,l.C)().trackEvent;return((0,a.useEffect)(function(){g("plan_settings.billing_page.visited",{})},[]),h)?(0,n.jsx)(u.a,{center:!0}):y||!f?(0,n.jsx)(c.b,{title:(0,s.t)("settings.billing.plans.errors.plan_not_found"),type:"alert"}):(0,n.jsxs)(n.Fragment,{children:[f.scheduled_downgrade_metadata&&(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(p.o,{currentPlan:f})}),(0,n.jsx)(em,{currentPlan:f}),r&&(0,n.jsx)(m,{currentPlan:f,refetchCurrentPlan:v}),(0,n.jsx)(eu,{}),(0,n.jsx)(eo,{}),(0,n.jsx)(W,{}),(void 0===o||o)&&(0,n.jsx)(ex,{showBillingPortal:t,currentPlan:f})]})};function ew(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var eO=function(e){return(0,i.i)()?(0,n.jsx)(o.$,ew({},e)):(0,n.jsx)(ej,ew({},e))}},498936:function(e,t,r){"use strict";r.d(t,{$:()=>td});var n=r(552676),i=r(275271),o=r(990809),a=r(117617),s=r(739792),l=r(39905),c=r(381636),u=r(131906),d=r(93199),f=r(441342),m=r(547144),p=function(){var e=(0,f.wh)().currentCommunityMember,t=!!(null==e?void 0:e.is_admin),r=(0,u.useQuery)({queryKey:["community-billing-details"],queryFn:function(){return(0,d.UT)(m.av.communities.billing.communitySubscription.show())},retry:2,enabled:t,cacheTime:36e5,staleTime:6e5});return{currentPlan:r.data,isCurrentPlanLoading:r.isLoading,errorFetchingCurrentPlan:r.error,refetchCurrentPlan:r.refetch,isRefetchingCurrentPlan:r.isRefetching}},b=function(){var e,t,r,n=(0,f.wh)().currentCommunityMember,i=!!(null==n?void 0:n.is_admin),o=(0,u.useQuery)({queryKey:["communities","billing","auxiliary-subscription"],queryFn:function(){return(0,d.UT)(m.av.communities.billing.auxiliarySubscription.show())},retry:2,enabled:i,cacheTime:36e5,staleTime:6e5}),a=o.data,s=o.isLoading,l=o.error,c=o.refetch,p=o.isRefetching;return{auxiliarySubscription:a,storageBilling:null!=(e=null==a?void 0:a.storage)?e:null,emailHubBilling:null!=(t=null==a?void 0:a.email_hub)?t:null,aiActionsBilling:null!=(r=null==a?void 0:a.ai_actions)?r:null,isAuxiliarySubscriptionLoading:s,errorFetchingAuxiliarySubscription:l,refetchAuxiliarySubscription:c,isRefetchingAuxiliarySubscription:p}},h=r(906082),y=(0,i.createContext)({auxiliarySubscription:void 0,currentPlan:void 0,errorFetchingAuxiliarySubscription:null,errorFetchingCurrentPlan:null,isAuxiliarySubscriptionLoading:!1,isCurrentPlanLoading:!1,isCurrentPlanPlus:!1,refetchAuxiliarySubscription:function(){},refetchCurrentPlan:function(){},showAddons:!1,showBillingDetails:!1,showBillingPortal:!1});y.displayName="BillingContext";var v=function(e){var t=e.showAddons,r=e.showBillingDetails,o=e.showBillingPortal,a=e.children,s=p(),l=s.currentPlan,c=s.isCurrentPlanLoading,u=s.errorFetchingCurrentPlan,d=s.refetchCurrentPlan,f=b(),m=f.auxiliarySubscription,v=f.isAuxiliarySubscriptionLoading,g=f.errorFetchingAuxiliarySubscription,_=f.refetchAuxiliarySubscription,x=(0,i.useMemo)(function(){return{auxiliarySubscription:m,currentPlan:l,errorFetchingAuxiliarySubscription:g,errorFetchingCurrentPlan:u,isAuxiliarySubscriptionLoading:v,isCurrentPlanLoading:c,isCurrentPlanPlus:(0,h.gR)(null==l?void 0:l.tier),refetchAuxiliarySubscription:_,refetchCurrentPlan:d,showAddons:t,showBillingDetails:r,showBillingPortal:o}},[m,l,g,u,v,c,_,d,t,r,o]);return(0,n.jsx)(y.Provider,{value:x,children:a})},g=function(){return(0,i.useContext)(y)},_=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary border-primary rounded-2xl border p-6",children:t})},x=r(957363),j=function(e){var t=e.item;return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(x.JO,{type:"circle-checked",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-default"}),(0,n.jsxs)(c.Z.BodySm,{children:[t.value," ",t.label]}),"number"==typeof t.remaining&&(0,n.jsx)(c.Z.BodySm,{color:"text-light",children:(0,s.t)("settings.billing.add_ons.remaining_resources",{count:t.remaining})})]}),(0,n.jsx)(c.Z.BodySm,{weight:"semibold",children:t.amount})]})},w=r(664470),O=function(){return(0,n.jsxs)("div",{className:"flex animate-pulse flex-col gap-y-5",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(w.X2,{squareExtraLarge:!0}),(0,n.jsx)(w.X2,{long:!0})]}),(0,n.jsx)(w.X2,{short:!0})]}),(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:Array.from({length:5},function(e,t){return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.X2,{half:!0}),(0,n.jsx)(w.X2,{short:!0})]},t)})})]})},S=r(757105),k=r(434519),N=r(60878),P=r(482601),C=r(44820),A=r(767900),I=r(751169),T=r(979186),E=r(227851),L=r(428566),D=r(38151);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var R=function(e){var t,r=e.name,o=e.interval,a=e.monthlyAmount,l=e.step,u=e.toggleable,d=e.maxPurchasableQuantity,f=e.priceCurrency,m=e.unitSize,p=(0,E.Gc)().register,b=(0,P.S)(),h=b.defaultValues,y=b.getAddOnPrice,v=b.updateTotalPrice,g=(t=(0,i.useState)((null==h?void 0:h[r])!==void 0?y(r,null==h?void 0:h[r]):void 0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return M(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_=g[0],x=g[1],j=function(e){v(r,w(e))},w=(0,i.useCallback)(function(e){var t=y(r,e);return x(t),t},[y,r]),O=(0,s.t)("settings.billing.add_ons.manage.".concat(r)),S=(0,s.t)("settings.billing.add_ons.manage.".concat(o,".").concat(r,"_description"),{amount:a,quantity:m});return(0,n.jsxs)("div",{className:"border-primary flex items-center justify-between gap-4 border-b py-3",children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},p(r))),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:O}),(0,n.jsx)(c.Z.BodySm,{color:"text-light",children:S})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[void 0!==u&&u?(0,n.jsx)(L.R,{name:r,onChange:j}):(0,n.jsx)(D.A,{name:r,step:void 0===l?1:l,onChange:j,max:d}),(0,n.jsx)("div",{className:"w-24 text-right",children:(0,n.jsxs)(c.Z.LabelSm,{weight:"semibold",children:[f+_," ",(0,s.t)("separator_slash")," ",o.charAt(0)]})})]})]})},B=function(e){var t=e.addonNames;return(0,n.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,s.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:t})}})})},z=function(e){var t=e.onAfterSubmit,r=(0,P.S)(),i=r.isLoading,o=r.addOnsData,a=r.defaultValues,l=r.onSubmit,u=r.total,d=r.serverErrors,f=r.getPlanInterval,m=r.getPlanCurrency,p=r.grandfatheredAddonNames,b=r.handleAddonsMutation.isLoading;return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("div",{className:"flex justify-center py-4",children:(0,n.jsx)(I.a,{})}),!i&&(0,n.jsxs)("div",{children:[p&&(0,n.jsx)(B,{addonNames:p}),(0,n.jsx)(A.l,{onSubmit:function(e){l(e),null==t||t()},defaultValues:a,children:(0,n.jsxs)("div",{className:"text-dark mt-2",children:[d&&(0,n.jsx)(T.Q,{serverErrors:d}),o.map(function(e){var t;return(0,n.jsx)(R,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:"boolean"==typeof e.quantity,interval:e.interval,maxPurchasableQuantity:null!=(t=e.max_purchasable_quantity)?t:void 0,unitSize:e.unit_size,priceCurrency:e.price_currency},e.slug)}),(0,n.jsxs)("div",{className:"my-6 flex justify-between",children:[(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,s.t)("settings.billing.add_ons.manage.total_purchase")}),(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:"".concat(m()).concat(u," ").concat((0,s.t)("separator_slash")," ").concat(f().charAt(0))})]}),(0,n.jsx)("div",{className:"my-6",children:(0,n.jsx)(C._,{type:"submit",variant:"marketing-gradient",large:!0,full:!0,submitting:b,children:(0,s.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},F=new u.QueryClient,U=function(e){var t=e.onSuccess,r=e.refetchCurrentPlan,i=(0,N.pm)(),o=(0,S.dd)(),a=function(){o.hide(),o.remove()};return(0,n.jsx)(u.QueryClientProvider,{client:F,children:(0,n.jsx)(P.T,{onSuccess:t,onCloseModal:a,refetchCurrentPlan:r,children:(0,n.jsxs)(k.u_,{isOpen:o.visible,onClose:a,title:(0,s.t)("settings.billing.add_ons.manage_addons"),children:[(0,n.jsx)(k.u_.Overlay,{}),(0,n.jsxs)(k.u_.Content,{size:"lg",className:"!rounded-2xl",children:[(0,n.jsxs)(k.u_.Header,{children:[(0,n.jsx)(k.u_.Title,{size:"sm",children:(0,s.t)("settings.billing.add_ons.manage_addons")}),(0,n.jsx)(k.u_.HeaderActions,{children:(0,n.jsx)(k.u_.CloseButton,{onClick:a})})]}),(0,n.jsx)(k.u_.Body,{children:(0,n.jsx)(z,{onAfterSubmit:function(){t&&(a(),i&&i.success((0,s.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},Z=S.gk.create(function(e){var t=e.onSuccess,r=e.refetchCurrentPlan;return(0,n.jsx)(U,{onSuccess:t,refetchCurrentPlan:r})}),G=function(){return(0,S.dd)(Z)},q="settings.billing.manage_billing.addons",V=function(){var e,t,r=g(),i=r.currentPlan,o=r.isCurrentPlanLoading,a=r.refetchCurrentPlan,u=null==i?void 0:i.addons_details,d=G(),f=function(){d.show({refetchCurrentPlan:function(){a()}})};return o?(0,n.jsx)(_,{children:(0,n.jsx)(O,{})}):(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,s.t)("".concat(q,".title"))}),(0,n.jsx)(l.z,{variant:"secondary",onClick:f,children:(0,s.t)("".concat(q,".manage"))})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(null==u||null==(e=u.items)?void 0:e.length)===0&&(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(x.JO,{type:"plus-v2",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-default cursor-pointer",onClick:f}),(0,n.jsx)(c.Z.BodySm,{color:"text-default",children:(0,s.t)([q,"no_addons"])})]}),null==u||null==(t=u.items)?void 0:t.map(function(e){return(0,n.jsx)(j,{item:e},e.id)})]})]})})},W=r(691525),H=r(532602),Q=function(){var e=g().isCurrentPlanPlus,t=(0,W.wh)().currentCommunity,r=null==t?void 0:t.csm;if(!e||!r)return null;var i=r.since?new Date(r.since).toLocaleDateString("en-US",{month:"long",year:"numeric"}):null;return(0,n.jsx)("div",{className:"p-3 border-primary border rounded-2xl",children:(0,n.jsxs)("div",{className:"flex rounded-lg py-8 flex-col items-center dark:from-[#2C2F36] dark:to-[#2C2F36] gap-y-4 bg-gradient-to-b from-[#EDEDEE] to-white",children:[r.profile_image&&(0,n.jsx)("img",{loading:"lazy",src:r.profile_image,alt:r.name,className:"size-20 rounded-full"}),!r.profile_image&&(0,n.jsx)(H.s,{name:r.name,size:"16",isFullRounded:!0}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-y-0.5",children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:r.name}),i&&(0,n.jsx)(c.Z.LabelXs,{color:"text-default",children:(0,s.t)("settings.billing.manage_billing.plus_contact_manager.since",{date:i})})]}),(0,n.jsx)(l.z,{variant:"secondary",onClick:function(){globalThis.location.href="mailto:".concat(r.email)},children:(0,s.t)("settings.billing.manage_billing.plus_contact_manager.message")})]})})},K=r(589345),J=r(945941),$=r(911638),X=function(e){var t=e.cancellingMetadata,r=(0,$.n5)()?"UJB6AB55":"nH21fEOM";return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(J.PopupButton,{id:r,size:66,medium:"demo-test",className:"underline",hidden:t,children:(0,s.t)("settings.billing.manage_billing.cancellation.description.end_subscription")})})},Y="settings.billing.manage_billing.cancellation",ee=function(){var e=g(),t=e.currentPlan,r=e.isCurrentPlanPlus,i=(0,K.tQ)().toggleWidget,o=null==t?void 0:t.cancelling_metadata;return!o||r?null:(0,n.jsxs)("div",{className:"my-4 flex flex-col gap-y-1",children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,s.t)("".concat(Y,".title"))}),(0,n.jsxs)(c.Z.BodySm,{color:"text-default",children:[(0,s.t)("".concat(Y,".description.you_can")),(0,n.jsx)(X,{cancellingMetadata:o}),(0,s.t)("".concat(Y,".description.any_time")),(0,n.jsx)("button",{type:"button",onClick:function(){return i()},className:"underline",children:(0,s.t)("".concat(Y,".description.contact_us"))})," ",(0,s.t)("".concat(Y,".description.for_support"))]})]})},et=r(302352),er=r(762892),en="settings.billing.manage_billing.email_hub_banner",ei=function(){var e=(0,er.f)(),t=e.isActive,r=e.isInFreePeriod,i=e.isCancelAtPeriodEnd,o=e.billingStatus,a=(0,et.T)();return t||r||i||!o?null:(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-row items-start gap-x-4",children:[(0,n.jsx)("div",{className:"shrink-0 self-start",children:(0,n.jsx)(x.JO,{type:"20-send",size:20,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"shrink-0 self-start"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,s.t)("".concat(en,".title"))}),(0,n.jsx)(c.Z.BodySm,{color:"text-default",children:(0,s.t)("".concat(en,".description"))}),(0,n.jsx)(l.z,{variant:"secondary",className:"mt-2 w-fit",onClick:function(){return a.show()},children:(0,s.t)("".concat(en,".enable_now"))})]})]})})},eo="settings.billing.manage_billing.plan_details",ea=function(){var e=g().currentPlan;return e?(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,s.t)("".concat(eo,".included"))}),(0,n.jsxs)(c.Z.BodySm,{children:[(0,n.jsx)(x.JO,{type:"circle-checked",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-dark mr-2"}),(0,s.t)("".concat(eo,".included_features.").concat(e.tier))]})]}):null},es="settings.billing.manage_billing.plan_details",el=function(){var e=g().currentPlan;return e?(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,s.t)("".concat(es,".not_included"))}),(0,n.jsxs)(c.Z.BodySm,{children:[(0,n.jsx)(x.JO,{type:"16-cross",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"mr-2 text-red-500"}),(0,s.t)("".concat(es,".not_included_features.").concat(e.tier))]})]}):null},ec=function(){return(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 animate-pulse",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(w.X2,{xxl:!0,half:!0}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,n.jsx)(w.X2,{lg:!0,short:!0}),(0,n.jsx)(w.X2,{sm:!0,short:!0})]})]}),(0,n.jsx)("div",{className:"flex flex-col gap-y-3",children:Array.from({length:2},function(e,t){return(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(w.X2,{lg:!0,short:!0}),(0,n.jsx)(w.X2,{sm:!0,half:!0}),(0,n.jsx)(w.X2,{sm:!0,almostFull:!0})]},t)})})]})})},eu=r(756810),ed="settings.billing.manage_billing.plan_details",ef=function(){var e=g().currentPlan,t=(0,eu.w)();if(!e)return null;var r=!(0,h.gR)(e.tier)&&!(0,h.kw)(e.tier),i=(0,h.FZ)(e.tier);return(0,n.jsxs)("div",{className:"flex  items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(c.Z.LabelXl,{weight:"semibold",children:(0,s.t)("".concat(ed,".plan_name.").concat(e.tier))}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:e.display_base_monthly_amount}),(0,n.jsx)(c.Z.LabelSm,{color:"text-default",weight:"medium",children:(0,s.t)("".concat(ed,".per_month"))})]})]}),r&&(0,n.jsx)(l.z,{variant:"secondary",onClick:function(){i&&t.show({planTier:i,showPlanDetails:!0})},children:(0,s.t)("".concat(ed,".upgrade"))})]})},em=function(){var e=g().currentPlan;return e?(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)(ef,{}),(0,n.jsx)(ea,{}),(0,h._D)(h.Gb.enterprise,e.tier)&&(0,n.jsx)(el,{})]})}):(0,n.jsx)(ec,{})},ep=function(){var e=(0,u.useQuery)(["community-upcoming-invoice-by-product"],function(){return(0,d.UT)(m.av.communities.billing.upcomingInvoice.show())},{retry:3});return{upcomingInvoiceData:e.data,isUpcomingInvoiceLoading:e.isLoading,errorFetchingUpcomingInvoice:e.error,refetchUpcomingInvoice:e.refetch,isRefetchingUpcomingInvoice:e.isRefetching}},eb=r(943544),eh=r(757387),ey="settings.billing.manage_billing.upcoming_invoice",ev=function(){var e=(0,eh.u)(),t=e.onGenerateBillingPortalUrl,r=e.isCreatingBillingPortal;return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(I.a,{variant:"fullscreen"}),(0,n.jsxs)(eb.Lt,{button:(0,n.jsxs)(l.z,{type:"button",variant:"secondary",children:[(0,s.t)("".concat(ey,".actions")),(0,n.jsx)(x.JO,{type:"16-chevron-down",size:16})]}),menuButtonEl:"div",children:[(0,n.jsx)(eb.Lt.ItemWithLink,{linkType:"button",onClick:t,children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)("".concat(ey,".view_invoices"))})}),(0,n.jsx)(eb.Lt.ItemWithLink,{linkType:"button",onClick:t,children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)("".concat(ey,".manage_card"))})}),(0,n.jsx)(eb.Lt.ItemWithLink,{linkType:"button",onClick:t,children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"text-very-dark",children:(0,s.t)("".concat(ey,".manage_billing_address"))})})]})]})},eg=r(932699),e_=r(559462),ex=r(294186),ej=function(e){var t=e.label,r=e.value,i=e.labelColor,o=e.valueColor;return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(c.Z.BodySm,{weight:"normal",color:void 0===i?"text-default":i,children:t}),(0,n.jsx)(c.Z.BodySm,{weight:"normal",color:void 0===o?"text-default":o,children:r})]})},ew="settings.billing.manage_billing.upcoming_invoice",eO=function(e){if(!e)return e_.g.generic;var t=e.toLowerCase();return t in e_.g?t:e_.g.generic},eS=function(e){var t=e.invoice,r=e.cardType,i=e.cardLast4,o=t.title,a=t.billing_period,l=t.due_date,u=t.line_items,d=t.applied_balance,f=t.amount_due,m=r&&i,p=eO(r);return(0,n.jsxs)("div",{className:"flex flex-col gap-y-3",children:[a&&(0,n.jsxs)("div",{className:"mb-1 flex flex-col",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:o}),(0,n.jsx)(c.Z.BodyXs,{weight:"normal",color:"text-default",children:a})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[u.map(function(e){return(0,n.jsx)(ej,{label:e.label,value:e.amount},e.label)}),d&&(0,n.jsx)(ej,{label:(0,s.t)("".concat(ew,".balance")),value:d,valueColor:"text-v2-success"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:(0,s.t)("".concat(ew,".amount_due"),{due_date:l})})}),(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:f})]}),m&&(0,n.jsxs)("div",{className:"mt-0.5 flex items-center gap-x-1",children:[(0,n.jsx)(c.Z.BodyXs,{color:"text-light",children:(0,s.t)("".concat(ew,".card_ending"),{brand:(0,eg.capitalize)(p),last4:i})}),(0,n.jsx)(ex.g,{cardBrand:p,variant:"sm"})]})]})]})},ek=function(e){var t=e.withBorder;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-2 ".concat(void 0!==t&&t?"border-primary border-b pb-4":""),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.X2,{half:!0}),(0,n.jsx)(w.X2,{short:!0})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.X2,{half:!0}),(0,n.jsx)(w.X2,{short:!0})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.X2,{half:!0}),(0,n.jsx)(w.X2,{short:!0})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.X2,{almostFull:!0,lg:!0}),(0,n.jsx)(w.X2,{short:!0})]})]})},eN=function(){return(0,n.jsxs)("div",{className:"flex animate-pulse flex-col gap-y-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(w.X2,{squareExtraLarge:!0,half:!0}),(0,n.jsx)(w.X2,{squareExtraLarge:!0})]}),(0,n.jsx)(w.X2,{square:!0})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,n.jsx)(ek,{withBorder:!0}),(0,n.jsx)(ek,{})]})]})},eP=function(){var e=ep(),t=e.upcomingInvoiceData,r=e.isUpcomingInvoiceLoading,i=g().isCurrentPlanPlus;if(r)return(0,n.jsx)(_,{children:(0,n.jsx)(eN,{})});var o=null!=t?t:{headline:null,invoices:[]},a=o.headline,l=o.invoices;return a&&0!==l.length?(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(c.Z.LabelXl,{weight:"semibold",color:"text-light",children:(0,s.t)("settings.billing.manage_billing.upcoming_invoice.title")}),!i&&(0,n.jsx)(ev,{})]}),(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:a.amount})]}),(0,n.jsx)("div",{children:l.map(function(e,t){var r=t===l.length-1;return(0,n.jsxs)("div",{children:[(0,n.jsx)(eS,{invoice:e,cardType:a.card_type,cardLast4:a.card_last4}),!r&&(0,n.jsx)("hr",{className:"border-primary my-5"})]},e.title)})})]})}):null},eC=r(663676),eA=function(e,t){return e&&t?Math.round(t/e*100):0},eI=function(e){var t=e.title;return(0,n.jsxs)("div",{className:"border-primary flex animate-pulse flex-col gap-1 border-b pb-4 last:border-b-0 last:pb-0",children:[t?(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:t}):(0,n.jsx)(w.X2,{short:!0}),(0,n.jsx)(w.X2,{full:!0,sm:!0}),(0,n.jsx)(w.X2,{xs:!0})]})},eT=r(701168),eE=function(e){var t=e.progress,r=Math.min(Math.max(t,0),100);return(0,n.jsx)("div",{className:"bg-slate-200 h-1 w-full rounded-full",children:(0,n.jsx)("div",{className:(0,eT.A)("h-1 rounded-full",t>80?"bg-v2-warning":"bg-v2-success"),style:{width:"".concat(r,"%")}})})},eL=function(e){var t=e.title,r=e.progress,i=e.description,o=e.price,a=e.action,s=e.isWarning,l=e.loading;return void 0!==l&&l?(0,n.jsx)(eI,{title:t}):(0,n.jsxs)("div",{className:"flex flex-row justify-start gap-x-3 items-center",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-y-1",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"medium",children:t}),(0,n.jsx)(eE,{progress:r}),(0,n.jsx)(c.Z.BodySm,{color:void 0!==s&&s?"text-amber-700":"text-default",children:i})]}),o&&!a&&(0,n.jsx)(c.Z.BodySm,{children:o}),a]})},eD="settings.billing.manage_billing.usage_details.api",eM=function(e){var t=e.details,r=e.loading;if(!t)return null;var i=t.limit,o=t.usage;return(0,n.jsx)(eL,{loading:void 0!==r&&r,title:(0,s.t)("".concat(eD,".admin_api_requests.title")),progress:eA(i,o),description:(0,s.t)("".concat(eD,".admin_api_requests.description"),{current_usage:(0,eC.HA)(o),total_usage:(0,eC.HA)(i)})})},eR="settings.billing.manage_billing.usage_details.api",eB=function(e){var t=e.details,r=e.loading;if(!t)return null;var i=t.limit,o=t.usage;return(0,n.jsx)(eL,{loading:void 0!==r&&r,title:(0,s.t)("".concat(eR,".member_api_requests.title")),progress:eA(i,o),description:(0,s.t)("".concat(eR,".member_api_requests.description"),{current_usage:(0,eC.HA)(o),total_usage:(0,eC.HA)(i)})})},ez=function(e){var t=e.items;return(0,n.jsx)(n.Fragment,{children:t.map(function(e){return(0,n.jsx)(eb.Lt.ItemWithLink,{to:e.link,onClick:e.action,hasDanger:"danger"===e.variant,as:e.link?"a":"button",children:(0,n.jsx)(c.Z.LabelSm,{weight:"regular",color:"danger"===e.variant?"text-red-500":"text-very-dark",children:e.title})},e.title)})})},eF=function(e){var t=e.title,r=e.children,i=e.menuItems;return(0,n.jsxs)("div",{className:"border-primary -mx-6 flex flex-col gap-y-5 px-6 [&:not(:last-child)]:border-b [&:not(:last-child)]:pb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:t}),i&&(0,n.jsx)(eb.Lt,{button:(0,n.jsx)(x.JO,{type:"menu-dots",className:"cursor-pointer"}),menuButtonEl:"div",children:i})]}),r]})},eU="settings.billing.manage_billing.usage_details.api",eZ=function(){var e=g(),t=e.auxiliarySubscription,r=e.isAuxiliarySubscriptionLoading,i=null==t?void 0:t.api_usage;if(!(null==i?void 0:i.admin)&&!(null==i?void 0:i.headless))return null;var o=[{title:(0,s.t)("".concat(eU,".menu.manage")),link:m.Lo.developers.api}];return(0,n.jsxs)(eF,{title:(0,s.t)("".concat(eU,".title")),menuItems:(0,n.jsx)(ez,{items:o}),children:[(0,n.jsx)(eB,{details:i.headless,loading:r}),(0,n.jsx)(eM,{details:i.admin,loading:r})]})},eG="settings.billing.manage_billing.usage_details.ai_actions",eq=function(){var e,t=g(),r=t.auxiliarySubscription,i=t.isAuxiliarySubscriptionLoading;if(!(null==r||null==(e=r.ai_actions)?void 0:e.is_active))return null;var o=r.ai_actions,a=o.usage_count,l=o.free_quantity,c=o.progress,u=o.currency_symbol,d=o.final_overage_price,f=o.overage,p=(0,s.t)("".concat(eG,".credits.description"),{used:(0,eC.HA)(a),total:(0,eC.HA)(l)}),b=f?"".concat(u).concat((0,eC.HA)(d)):void 0,h=[{title:(0,s.t)("".concat(eG,".menu.manage")),link:m.Lo.workflows.all}];return(0,n.jsx)(eF,{title:(0,s.t)("".concat(eG,".title")),menuItems:(0,n.jsx)(ez,{items:h}),children:(0,n.jsx)(eL,{loading:i,title:(0,s.t)("".concat(eG,".credits.title")),progress:c,description:p,price:b})})},eV="settings.billing.manage_billing.usage_details",eW=function(e){var t=e.used,r=e.max,i=e.includesAddons,o=e.isExhausted,a=e.resourceKey;return(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{children:[(0,s.t)("".concat(eV,".resource_of"),{current_usage:t,total_usage:r}),i&&(0,n.jsx)("span",{className:"text-light",children:(0,s.t)("".concat(eV,".includes_addons"))})]}),o&&(0,n.jsxs)("span",{className:"text-amber-700",children:["\xa0-\xa0",(0,s.t)("".concat(eV,".").concat(a,".exhausted"))]})]})},eH={},eQ=function(){var e,t=g(),r=t.currentPlan,n=t.isCurrentPlanLoading,o=null!=(e=null==r?void 0:r.usage_details)?e:eH,a=o.spaces,s=o.admins,l=o.moderators,c=o.live_stream_hours,u=(0,i.useMemo)(function(){return[a,s,l,c].some(function(e){return null==e?void 0:e.is_warning})},[a,s,l,c]);return{usageDetails:{spaces:a,admins:s,moderators:l,live_stream_hours:c},hasWarning:u,isLoading:n}},eK="settings.billing.manage_billing.usage_details.community",eJ=function(){var e,t,r,i,o,a,c,u,d,f,m,p,b,h,y,v,_,x,j,w,O,S,k,N,P=g(),C=P.showAddons,A=P.currentPlan,I=P.isCurrentPlanLoading,T=P.refetchCurrentPlan,E=eQ().usageDetails,L=G();if(!I&&!(null==A?void 0:A.usage_details))return null;var D=E.spaces,M=E.admins,R=E.moderators,B=E.live_stream_hours,z=function(){L.show({refetchCurrentPlan:function(){T()}})},F=function(e){return C&&(null==e?void 0:e.is_exhausted)?(0,n.jsx)(l.z,{variant:"circle",onClick:z,children:(0,s.t)("".concat(eK,".add_button"))}):null};return(0,n.jsxs)(eF,{title:(0,s.t)("".concat(eK,".title")),children:[(0,n.jsx)(eL,{loading:I,title:(0,s.t)("".concat(eK,".spaces.title")),progress:null!=(e=null==D?void 0:D.progress)?e:0,isWarning:null!=(t=null==D?void 0:D.is_warning)&&t,price:null==D?void 0:D.addon_amount,action:F(D),description:(0,n.jsx)(eW,{used:null!=(r=null==D?void 0:D.used)?r:0,max:null!=(i=null==D?void 0:D.max)?i:0,includesAddons:null!=(o=null==D?void 0:D.includes_addons)&&o,isExhausted:null!=(a=null==D?void 0:D.is_exhausted)&&a,resourceKey:"community.spaces"})}),(0,n.jsx)(eL,{loading:I,title:(0,s.t)("".concat(eK,".admins.title")),progress:null!=(c=null==M?void 0:M.progress)?c:0,isWarning:null!=(u=null==M?void 0:M.is_warning)&&u,price:null==M?void 0:M.addon_amount,action:F(M),description:(0,n.jsx)(eW,{used:null!=(d=null==M?void 0:M.used)?d:0,max:null!=(f=null==M?void 0:M.max)?f:0,includesAddons:null!=(m=null==M?void 0:M.includes_addons)&&m,isExhausted:null!=(p=null==M?void 0:M.is_exhausted)&&p,resourceKey:"community.admins"})}),(0,n.jsx)(eL,{loading:I,title:(0,s.t)("".concat(eK,".moderators.title")),progress:null!=(b=null==R?void 0:R.progress)?b:0,isWarning:null!=(h=null==R?void 0:R.is_warning)&&h,price:null==R?void 0:R.addon_amount,action:F(R),description:(0,n.jsx)(eW,{used:null!=(y=null==R?void 0:R.used)?y:0,max:null!=(v=null==R?void 0:R.max)?v:0,includesAddons:null!=(_=null==R?void 0:R.includes_addons)&&_,isExhausted:null!=(x=null==R?void 0:R.is_exhausted)&&x,resourceKey:"community.moderators"})}),(0,n.jsx)(eL,{loading:I,title:(0,s.t)("".concat(eK,".live_stream_hours.title")),progress:null!=(j=null==B?void 0:B.progress)?j:0,isWarning:null!=(w=null==B?void 0:B.is_warning)&&w,price:null==B?void 0:B.addon_amount,action:F(B),description:(0,n.jsx)(eW,{used:null!=(O=null==B?void 0:B.used)?O:0,max:null!=(S=null==B?void 0:B.max)?S:0,includesAddons:null!=(k=null==B?void 0:B.includes_addons)&&k,isExhausted:null!=(N=null==B?void 0:B.is_exhausted)&&N,resourceKey:"community.live_stream_hours"})})]})},e$=r(55627),eX=r(535410),eY=r(134870),e0=r(918594),e1={info:{container:"bg-blue-100 dark:bg-tertiary",icon:"text-default"},warning:{container:"bg-amber-100 dark:bg-amber-900/20",icon:"text-default"}},e2=function(e){var t=e.buttonAction,r=e.buttonLink,i=e.buttonText,o=e.children,a=e.icon,s=e.variant,c=e1[void 0===s?"info":s],u=(0,n.jsx)(l.z,{variant:"secondary",onClick:t,className:"mt-2 w-fit",children:i});return(0,n.jsxs)("div",{className:(0,eT.A)("flex items-start gap-4 rounded-lg p-4",c.container),children:[(0,n.jsx)("div",{className:"shrink-0 self-start",children:(0,n.jsx)(x.JO,{type:a,size:20,className:c.icon})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[o,r?(0,n.jsx)(e0.rU,{to:r,children:u}):u]})]})},e3="settings.billing.email_hub",e6=function(e){var t=e.currentPeriodEnd,r=(0,eX.K)(),i=r.reactivateEmailHubSubscription,o=r.isReactivatingEmailHubSubscription,a=g().refetchAuxiliarySubscription,l=(0,u.useQueryClient)(),d=(0,eY.w)({dateTime:new Date(t),format:eY.f.short_month_and_date_with_year});return o?(0,n.jsx)(I.a,{center:!0}):(0,n.jsxs)(e2,{icon:"20-info",variant:"warning",buttonText:(0,s.t)("".concat(e3,".cancel_at_period_end_state.button")),buttonAction:function(){i(void 0,{onSuccess:function(){setTimeout(function(){a(),l.invalidateQueries(["community-current-plan"])},1e3)}})},children:[(0,n.jsx)(c.Z.LabelMd,{weight:"medium",children:(0,s.t)("".concat(e3,".cancel_at_period_end_state.callout"),{date:d})}),(0,n.jsx)(c.Z.BodySm,{color:"text-secondary",children:(0,s.t)("".concat(e3,".cancel_at_period_end_state.text"))})]})},e5=r(424168),e4=r(217123),e7="settings.billing.email_hub",e9=function(e){var t=e.freePeriod,r=null==t?void 0:t.ends_at;if(!r)return null;var i=function(e){return new Date(e.toDateString())},o=i(new Date),a=i(new Date(r)),l=Math.max((0,e5.Z)(a,o),0),u=(0,e4.default)(a,"MMM d, yyyy");return(0,n.jsxs)(e2,{icon:"20-info",buttonText:(0,s.t)("".concat(e7,".free_period_banner.send_broadcast")),buttonLink:m.Lo.email.overview,children:[(0,n.jsx)(c.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,s.t)("".concat(e7,".free_period_banner.title"))}),(0,n.jsx)(c.Z.BodySm,{color:"text-secondary",children:(0,s.t)("".concat(e7,".free_period_banner.remaining_days"),{days_left:l,end_date:u})}),(0,n.jsx)(c.Z.BodySm,{children:(0,s.t)("".concat(e7,".free_period_banner.banner_text"))})]})},e8="settings.billing.email_hub",te=function(){return(0,n.jsxs)(e2,{icon:"20-info",buttonText:(0,s.t)("".concat(e8,".free_period_banner.send_broadcast")),buttonLink:m.Lo.email.overview,children:[(0,n.jsx)(c.Z.LabelMd,{color:"text-secondary",weight:"medium",children:(0,s.t)("".concat(e8,".free_tier_banner.title"))}),(0,n.jsx)(c.Z.BodySm,{color:"text-secondary",children:(0,s.t)("".concat(e8,".free_tier_banner.banner_text"))})]})},tt=function(e){var t=e.currentPeriodEnd,r=e.freePeriod,i=(0,er.f)(),o=i.isInFreePeriod,a=i.isCancelAtPeriodEnd,s=i.isFreeTier;return(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsx)(e9,{freePeriod:r}),s&&!a&&(0,n.jsx)(te,{}),a&&(0,n.jsx)(e6,{currentPeriodEnd:t})]})},tr="settings.billing.manage_billing.usage_details.email_hub",tn=function(){var e=g(),t=e.auxiliarySubscription,r=e.isAuxiliarySubscriptionLoading,i=null==t?void 0:t.email_hub,o=e$.J.useCancellationModal();if(!(null==i?void 0:i.email_hub_billing_active))return null;var a=i.current_contacts_count,l=i.max_contacts_count_in_tier,c=i.percentage_completion_in_tier,u=i.amount_with_currency,d=i.free_period,f=i.current_period_end,p=(0,s.t)("".concat(tr,".contacts.description"),{current_usage:(0,eC.HA)(a),total_usage:(0,eC.HA)(l)}),b=[{title:(0,s.t)("".concat(tr,".menu.manage")),link:m.Lo.members.manage},{title:(0,s.t)("".concat(tr,".menu.cancel")),action:function(){o.show()},variant:"danger"}];return(0,n.jsxs)(eF,{title:(0,s.t)("".concat(tr,".title")),menuItems:(0,n.jsx)(ez,{items:b}),children:[(0,n.jsx)(eL,{loading:r,title:(0,s.t)("".concat(tr,".contacts.title")),progress:c,description:p,price:u}),(0,n.jsx)(tt,{freePeriod:d,currentPeriodEnd:f})]})},ti=r(590996),to="settings.billing.manage_billing.usage_details.storage",ta=function(){var e=g(),t=e.auxiliarySubscription,r=e.isAuxiliarySubscriptionLoading,i=null==t?void 0:t.storage;if(!i||!i.extra_storage)return null;var o=i.total_bytes_used,a=i.total_capacity_bytes,l=i.usage_percentage,c=i.formatted_price,u=i.has_addon,d=i.extra_storage,f=(0,s.t)(u?"".concat(to,".limit.description_with_addon"):"".concat(to,".limit.description"),{used:(0,ti.s)(o),total:(0,ti.s)(a),addon:(0,ti.s)(d.purchased_storage_bytes)}),p=[{title:(0,s.t)("".concat(to,".menu.manage")),link:m.Lo.content.files}];return(0,n.jsx)(eF,{title:(0,s.t)("".concat(to,".title")),menuItems:(0,n.jsx)(ez,{items:p}),children:(0,n.jsx)(eL,{loading:r,title:(0,s.t)("".concat(to,".limit.title")),progress:l,description:f,price:null!=c?c:""})})},ts=r(180932),tl="settings.billing.manage_billing.usage_details.community.upgrade_banner",tc=function(){var e=g().currentPlan,t=(0,eu.w)();if(!e||!(!(0,h.gR)(e.tier)&&!(0,h.kw)(e.tier)))return null;var r=(0,h.FZ)(e.tier);return(0,n.jsx)("div",{className:"py-4 px-5 bg-v2-info/10 rounded-lg",children:(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,s.t)("".concat(tl,".title"),{plan_name:(0,ts.Vp)(r||"")})}),(0,n.jsx)(c.Z.BodySm,{children:(0,s.t)("".concat(tl,".description"))})]}),(0,n.jsx)("button",{type:"button",onClick:function(){r&&t.show({planTier:r,showPlanDetails:!0})},children:(0,n.jsx)(c.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,s.t)("".concat(tl,".learn_more"))})})]})})},tu=function(){var e=eQ().hasWarning;return(0,n.jsx)(_,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,s.t)("settings.billing.manage_billing.usage_details.title")})}),e&&(0,n.jsx)(tc,{}),(0,n.jsx)(eJ,{}),(0,n.jsx)(ta,{}),(0,n.jsx)(tn,{}),(0,n.jsx)(eq,{}),(0,n.jsx)(eZ,{})]})})},td=function(e){var t=e.showAddons,r=e.showBillingDetails,s=e.showBillingPortal,l=(0,o.C)().trackEvent,c=(0,a.j)();(0,i.useEffect)(function(){l("plan_settings.billing_page.visited",{})},[]);var u=(0,n.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,n.jsx)(eP,{}),(0,n.jsx)(Q,{})]});return(0,n.jsx)(v,{showAddons:t,showBillingDetails:r,showBillingPortal:s,children:(0,n.jsx)("div",{className:"my-12",children:(0,n.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row lg:gap-x-6",children:[(0,n.jsxs)("div",{className:"flex w-full flex-col gap-y-6 lg:w-[680px]",children:[(0,n.jsx)(em,{}),!c&&u,t&&(0,n.jsx)(V,{}),(0,n.jsx)(tu,{}),(0,n.jsx)(ei,{}),(0,n.jsx)(ee,{})]}),c&&(0,n.jsx)("div",{className:" w-[375px]",children:u})]})})})}},757387:function(e,t,r){"use strict";r.d(t,{u:()=>c});var n=r(131906),i=r(739792),o=r(93199),a=r(547144),s=function(){return(0,o.Cu)(a.av.accountPaymentProcessors.billingPortal.create(),{})},l=r(60878),c=function(){var e=(0,l.pm)().error,t=(0,n.useMutation)(s,{onSuccess:function(t){t.url?window.location.replace(t.url):e((0,i.t)("pricing_plans.payment_processor.errors.billing_portal"))},onError:function(t){console.error(t),e((0,i.t)("pricing_plans.payment_processor.errors.billing_portal"))}});return{onGenerateBillingPortalUrl:function(){t.mutate()},isCreatingBillingPortal:t.isLoading}}},714356:function(e,t,r){"use strict";r.d(t,{I:()=>s});var n=r(552676),i=r(957363),o=r(701168),a=r(381636),s=function(e){var t=e.feature,r=e.isHighlighted,s=e.isOnOffer,l=e.color,c=e.highlightColor,u=e.LabelComponent,d=void 0===u?a.Z.BodySm:u;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[r?(0,n.jsx)(i.JO,{type:"16-star-fill",size:16,className:(0,o.A)("mr-1",r?void 0===c?"text-blue-highlight":c:"",void 0!==s&&s?"text-[#493B73]":""),useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0}):(0,n.jsx)(i.JO,{type:"check",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-green-success mr-1"}),(0,n.jsx)(d,{color:void 0===l?"text-slate-700 dark:text-slate-300":l,children:t},t)]},t)}},991712:function(e,t,r){"use strict";r.d(t,{o:()=>m});var n=r(552676),i=r(739792),o=r(779869),a=r(494375),s=r(148097),l=r(180932),c=r(957363),u=r(381636),d=r(39905),f=r(741813),m=function(e){var t=e.currentPlan,r=null==t?void 0:t.scheduled_downgrade_metadata,m=null==r?void 0:r.plan_downgrade,p=m?a.P6.PLAN_DOWNGRADE:a.P6.INTERVAL_DOWNGRADE,b="pricing_plans.downgrade_schedule_banner.".concat(p),h=(0,o.w)();if(!(null==r?void 0:r.next_plan))return null;var y=(0,l.Sy)(r.next_plan).toLowerCase(),v=r.switch_date,g=r.annual_discount_amount_with_currency;return(0,n.jsx)(f.q,{children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"mr-2 mt-[2px]",children:(0,n.jsx)(c.JO,{type:"information-outline",size:24})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(u.Z.LabelMd,{color:"text-default",weight:"semibold",children:(0,i.t)([b,"title"],{nextPlanName:y,switchDate:v})})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(u.Z.BodySm,{color:"text-default",children:(0,i.t)([b,"body"],m?{nextPlanName:(0,l.Vp)(r.next_plan.tier),currentPlanName:(0,l.Vp)(t.tier)}:{discountAmount:g})})}),(0,n.jsx)(d.z,{variant:"secondary",onClick:function(){h.show({source:s.V.SCHEDULED_DOWNGRADE_BANNER,showPlanDetails:!1})},children:(0,i.t)([b,"cta_button"])})]})]})})}},741813:function(e,t,r){"use strict";r.d(t,{q:()=>i});var n=r(552676);r(275271);var i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"dark:bg-primary dark:border-primary rounded-2xl border border-amber-200 bg-amber-100 p-6","data-testid":"plan-cancelled",children:t})}},37845:function(e,t,r){"use strict";r.d(t,{H:()=>t$});var n=r(552676),i=r(275271),o=r(441342),a=r(990809),s=r(773371),l=r(589345),c=r(241328),u=r(701168),d=r(751169),f=r(739792),m=r(381636),p=r(957363),b=function(){return(0,n.jsx)("div",{className:"mr-2",children:(0,n.jsx)(p.JO,{type:"check",size:16,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,className:"text-green-success"})})},h=function(e){return e.value?(0,n.jsx)(b,{}):(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:""})},y=function(e){var t=e.children;return(0,n.jsx)("div",{className:"border-primary flex items-center border-y border-t-0 py-4",children:t})},v=r(619803),g=r.n(v),_=function(e){var t=e.value,r=e.hideCheckIcon,i=e.className;return(0,n.jsxs)("div",{className:g()("flex items-center",i),children:[!(void 0!==r&&r)&&(0,n.jsx)(b,{}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:t})]})};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=e.title,r=e.basic,i=e.professional,o=e.business,a=e.enterprise,s=(0,c.x)().plans,l=Object.entries({basic:r,professional:i,business:o,enterprise:a}).filter(function(e){var t=j(e,1)[0];return s.some(function(e){return e.tier===t})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{children:(0,n.jsx)(_,{className:"pr-5",value:t,hideCheckIcon:!0})}),l.map(function(e){var t=j(e,2),r=t[0],i=t[1];return(0,n.jsx)(y,{children:"string"==typeof i?(0,n.jsx)(_,{value:i}):(0,n.jsx)(h,{value:!!i})},r)})]})},O=function(e){var t,r,i=e.sectionName,o=e.children,a=(0,c.x)().plans,s="grid-cols-".concat(a.length+1),l=(0,u.A)("grid",s,"bg-primary");return(0,n.jsxs)("div",{className:"bg-primary mb-12",children:[(0,n.jsx)("div",{className:l,children:(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(m.Z.LabelMd,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},{weight:"medium"}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})}),(0,n.jsx)("div",{className:(0,u.A)("grid",s),children:o})]})},S=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.ai_agents"),children:[(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.chat_agents"),basic:!1,professional:!1,business:!1,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.knowledge_engine"),basic:!1,professional:!1,business:!1,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.ai_inbox"),basic:!1,professional:!1,business:!1,enterprise:!0})]})},k=r(913382);function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={admin:{business:"5,000",enterprise:"30,000"},headless:{business:"100",enterprise:"500"}},C=function(e,t,r,n){var i,o=(t||"usd").toLowerCase();if("included"===n)return"admin"===r?"".concat(P[r][e]," ").concat((0,f.t)("pricing_plans.interval.abbreviation.month")):"".concat(P[r][e]," ").concat((0,f.t)("settings.developers.mau"));if("admin"===r){var a,s=(N(a={},k.X.USD.code.toLowerCase(),{business:.005,enterprise:.002,symbol:k.X.USD.symbol}),N(a,k.X.BRL.code.toLowerCase(),{business:.03,enterprise:.012,symbol:k.X.BRL.symbol}),a),l=s[o][e],c=s[o].symbol;return"".concat(c).concat(l," / ").concat((0,f.t)("pricing_plans.request"))}var u=(N(i={},k.X.USD.code.toLowerCase(),{business:.5,enterprise:.3,symbol:k.X.USD.symbol}),N(i,k.X.BRL.code.toLowerCase(),{business:3.5,enterprise:2,symbol:k.X.BRL.symbol}),i),d=u[o][e],m=u[o].symbol;return"".concat(m).concat(d," / ").concat((0,f.t)("pricing_plans.mau"))},A=function(){var e=(0,c.x)().billingCurrency;return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.api"),children:[(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.included_admin_api"),basic:!1,professional:!1,business:C("business",e,"admin","included"),enterprise:C("enterprise",e,"admin","included")}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.extra_admin_api"),basic:!1,professional:!1,business:C("business",e,"admin","extra"),enterprise:C("enterprise",e,"admin","extra")}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.included_headless_api"),basic:!1,professional:!1,business:C("business",e,"headless","included"),enterprise:C("enterprise",e,"headless","included")}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.extra_headless_api"),basic:!1,professional:!1,business:C("business",e,"headless","extra"),enterprise:C("enterprise",e,"headless","extra")})]})},I=r(180932),T=function(e){var t=e.value;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(b,{}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:t})]})},E=function(e){var t=e.value,r=e.suffix,i=0===t||!t;return(0,n.jsx)("div",{className:"flex items-center",children:i?(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:"-"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,I.tL)(t)?(0,f.t)("settings.billing.unlimited"):"".concat(t).concat(void 0===r?"":r)})]})})},L=function(e){var t=e.title,r=e.feature,i=e.suffix,o=e.mapper,a=(0,c.x)().plans;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{children:(0,n.jsx)(_,{className:"pr-5",value:t,hideCheckIcon:!0})}),a.map(function(e){var t,a=e.plan_feature_flags[r];return(0,n.jsx)(y,{children:(t="number"==typeof a,o?(0,n.jsx)(T,{value:o(a)}):t?(0,n.jsx)(E,{value:a,suffix:i}):(0,n.jsx)(h,{value:!!a}))},e.id)})]})};function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function M(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var R=function(){var e,t=(0,c.x)().currentPlan;return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.features"),children:[(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.custom_domain"),feature:I.GY.custom_domain}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.private_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.bulk_import_export"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.notifications"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.member_profiles_directory"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.moderation_basic"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.direct_messaging"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.group_chat"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.email_digest"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.events"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.gdpr_compliant"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.ios_app"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.chat_spaces"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.scheduled_posts"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.gamification"),basic:!0,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.custom_snippets"),feature:I.GY.custom_css}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.zapier"),feature:I.GY.zapier_token_automatic_creation}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.integrately"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.embed"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.white_labelling"),basic:!1,professional:!0,business:!0,enterprise:!0}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.moderation_automated"),feature:I.GY.automated_moderation}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.advanced_reporting"),feature:I.GY.advanced_reporting}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.color_themes"),basic:!1,professional:!0,business:!0,enterprise:!0}),(e={title:(0,f.t)("pricing_plans.feature.courses")},t.show_pro_grandfathered_for_courses?(0,n.jsx)(w,M(D({},e),{basic:!1,professional:!0,business:!0,enterprise:!0})):(0,n.jsx)(L,M(D({},e),{feature:I.GY.courses}))),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.conversion_tracking_code"),feature:I.GY.paywall_conversion_tracking_code}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.automated_workflows"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.custom_profile_fields"),feature:I.GY.profile_fields_enabled}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.sender_email_customization"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.affiliates"),feature:I.GY.affiliates}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.analytics_filtering"),feature:I.GY.analytics_filters})]})},B=r(380171),z=function(e){var t=e.tooltipKey,r=e.tooltipProps;return(0,n.jsx)(B.T,{className:"flex items-center",content:(0,f.t)(t,r),children:(0,n.jsx)(p.JO,{type:"16-info",size:16,className:"ml-2"})})},F=function(e){var t=e.plan,r=e.feature,i=t.plan_feature_flags[r],o=t.legacy_limits_info[r],a=o&&o.is_legacy_limit,s=null==o?void 0:o.current_plan_value,l=(0,f.t)("settings.billing.".concat(r)),c=r===I.GY.max_member_count&&t.unlimited_members;return(0,n.jsxs)(y,{children:[c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{value:(0,f.t)("settings.billing.unlimited")}),(0,n.jsx)(z,{tooltipKey:"settings.billing.unlimited_members_tooltip",tooltipProps:{total:s,resource:l}})]}):(0,n.jsx)(E,{value:i}),a&&(0,n.jsx)(z,{tooltipKey:"settings.billing.legacy_limits_tooltip",tooltipProps:{total:s,resource:l}})]})},U=function(e){var t=e.featureFlagKeys,r=(0,c.x)().plans;return(0,n.jsx)(n.Fragment,{children:t.map(function(e){return(0,I.FV)(e)?null:(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(y,{children:(0,n.jsx)(_,{hideCheckIcon:!0,value:(0,f.t)("pricing_plans.feature.".concat(e)),className:"pr-5"})}),r.map(function(t){return(0,n.jsx)(F,{plan:t,feature:e},t.id)})]},e)})})},Z=r(590996),G=function(){return(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.total_storage"),feature:I.GY.included_storage_gigabytes,mapper:function(e){return(0,Z.s)(0x40000000*e)}})},q=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.community"),children:[(0,n.jsx)(U,{featureFlagKeys:[I.GY.max_member_count,I.GY.max_admin_count,I.GY.max_moderator_count,I.GY.max_space_count]}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.transaction_fees"),feature:I.GY.payments_fee_percentage,suffix:"%"}),(0,n.jsx)(G,{}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.admin_api_requests"),business:(0,f.t)("pricing_plans.feature.admin_api_requests_business"),enterprise:(0,f.t)("pricing_plans.feature.admin_api_requests_enterprise")})]})},V=function(e){return function(t){return t.tier===e}},W=function(e,t){return function(r){if(Array.isArray(null==r?void 0:r.plan_addons_info)){var n=r.plan_addons_info.find(function(t){return Object.hasOwn(t,e)});if(n&&n[e])return n[e][t]}}},H=function(e,t,r){var n=e.find(V(t));if(!n)return"";var i=W(r,"value")(n);return null!=i?i:""},Q=function(e,t,r){var n=e.find(V(t));if(!n)return"";var i=W(r,"monthly_amount")(n);return null!=i?i:""},K=r(906082),J=function(){var e=(0,c.x)(),t=e.plans;if(e.isPlansLoading)return(0,n.jsx)(d.a,{center:!0});var r="settings.billing.add_ons.manage",i="settings.billing.add_ons.included";return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.community"),children:[(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.manage.admins"),professional:(0,f.t)("".concat(r,".admins_description"),{amount:Q(t,K.Gb.professional,I.GY.max_admin_count)}),business:(0,f.t)("".concat(r,".admins_description"),{amount:Q(t,K.Gb.business,I.GY.max_admin_count)}),enterprise:(0,f.t)("".concat(r,".admins_description"),{amount:Q(t,K.Gb.enterprise,I.GY.max_admin_count)})}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.manage.moderators"),professional:(0,f.t)("".concat(r,".moderators_description"),{quantity:H(t,K.Gb.professional,I.GY.max_moderator_count),amount:Q(t,K.Gb.professional,I.GY.max_moderator_count)}),business:(0,f.t)("".concat(r,".moderators_description"),{quantity:H(t,K.Gb.business,I.GY.max_moderator_count),amount:Q(t,K.Gb.business,I.GY.max_moderator_count)}),enterprise:(0,f.t)("".concat(r,".moderators_description"),{quantity:H(t,K.Gb.enterprise,I.GY.max_moderator_count),amount:Q(t,K.Gb.enterprise,I.GY.max_moderator_count)})}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.manage.spaces"),professional:(0,f.t)("".concat(r,".spaces_description"),{quantity:H(t,K.Gb.professional,I.GY.max_space_count),amount:Q(t,K.Gb.professional,I.GY.max_space_count)}),business:(0,f.t)("".concat(r,".spaces_description"),{quantity:H(t,K.Gb.business,I.GY.max_space_count),amount:Q(t,K.Gb.business,I.GY.max_space_count)}),enterprise:(0,f.t)("".concat(r,".spaces_description"),{quantity:H(t,K.Gb.enterprise,I.GY.max_space_count),amount:Q(t,K.Gb.enterprise,I.GY.max_space_count)})}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.manage.email_white_labeling"),professional:(0,f.t)("settings.billing.add_ons.manage.email_white_labeling_description",{amount:Q(t,K.Gb.professional,I.GY.email_whitelist)}),business:(0,f.t)(i),enterprise:(0,f.t)(i)}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.manage.profile_fields"),professional:(0,f.t)("settings.billing.add_ons.manage.profile_fields_description",{amount:Q(t,K.Gb.professional,I.GY.profile_fields_enabled)}),business:(0,f.t)(i),enterprise:(0,f.t)(i)})]})},$=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.community_ai"),children:[(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.content_co_pilot"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.automated_transcriptions"),basic:!1,professional:!1,business:!0,enterprise:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.activity_scores"),basic:!1,professional:!1,business:!0,enterprise:!0})]})},X="grid-cols-".concat(5),Y="pricing_plans.annual_only",ee=function(e){var t=e.children;return(0,n.jsx)("div",{className:"grid ".concat(X),children:(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(m.Z.TitleSm,{weight:"bold",children:t})})})},et=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.live_streams"),children:[(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.live_stream_max_spectator_capacity"),feature:I.GY.live_stream_max_spectator_capacity}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.live_room_participants"),feature:I.GY.live_room_participants_capacity}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.live_stream_hosts"),feature:I.GY.live_stream_max_host_capacity}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.live_stream_monthly_stream_hours"),feature:I.GY.live_stream_monthly_stream_hours})]})},er=function(){var e=(0,c.x)(),t=e.plans;return e.isPlansLoading?(0,n.jsx)(d.a,{center:!0}):(0,n.jsxs)(O,{sectionName:(0,f.t)("settings.billing.add_ons.live_stream.title"),children:[(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.live_stream.live_attendees"),professional:(0,f.t)("settings.billing.add_ons.live_stream.live_attendees_professional",{amount:Q(t,K.Gb.professional,I.GY.live_stream_max_spectator_capacity)}),enterprise:(0,f.t)("settings.billing.add_ons.live_stream.live_attendees_enterprise"),business:(0,f.t)("settings.billing.add_ons.live_stream.live_attendees_business",{amount:Q(t,K.Gb.business,I.GY.live_stream_max_spectator_capacity)})}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.live_stream.hours"),professional:(0,f.t)("settings.billing.add_ons.live_stream.hours_professional",{amount:Q(t,K.Gb.professional,I.GY.live_stream_monthly_stream_hours)}),enterprise:(0,f.t)("settings.billing.add_ons.live_stream.hours_enterprise",{amount:Q(t,K.Gb.enterprise,I.GY.live_stream_monthly_stream_hours)}),business:(0,f.t)("settings.billing.add_ons.live_stream.hours_business",{amount:Q(t,K.Gb.business,I.GY.live_stream_monthly_stream_hours)})}),(0,n.jsx)(w,{title:(0,f.t)("settings.billing.add_ons.live_stream.video_storage"),professional:(0,f.t)("settings.billing.add_ons.live_stream.video_storage_professional",{amount:Q(t,K.Gb.professional,I.GY.live_stream_recording_hours)}),enterprise:(0,f.t)("settings.billing.add_ons.live_stream.video_storage_enterprise",{amount:Q(t,K.Gb.enterprise,I.GY.live_stream_recording_hours)}),business:(0,f.t)("settings.billing.add_ons.live_stream.video_storage_business",{amount:Q(t,K.Gb.business,I.GY.live_stream_recording_hours)})})]})},en=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.services"),children:[(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.concierge"),basic:!1,professional:!1,enterprise:(0,f.t)(Y),business:!1}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.support_dedicated"),basic:!1,professional:!1,enterprise:(0,f.t)(Y),business:!1}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.business_review"),basic:!1,professional:!1,enterprise:(0,f.t)(Y),business:!1}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.payments_migration"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.courses_migration"),basic:!1,professional:!1,enterprise:(0,f.t)(Y),business:(0,f.t)(Y)})]})},ei=function(){var e=[{title:(0,f.t)("pricing_plans.feature.facebook"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.twitter"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.memberstack"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.memberspace"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.teachable"),basic:!0,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.memberful"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.wordpress"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.bubble"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.outseta"),basic:!1,professional:!0,business:!0,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.auth0"),basic:!1,professional:!1,business:!1,enterprise:!0},{title:(0,f.t)("pricing_plans.feature.custom_oauth"),basic:!1,professional:!1,business:!1,enterprise:!0}];return(0,n.jsx)(O,{sectionName:(0,f.t)("pricing_plans.section.sso"),children:e.map(function(e){var t,r;return(0,i.createElement)(w,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={key:e.title},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})},eo=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.support"),children:[(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.circle_community"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.support_basic"),basic:!0,professional:!0,enterprise:!0,business:!0}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.support_priority"),basic:!1,professional:!1,business:!1,enterprise:(0,f.t)(Y)}),(0,n.jsx)(w,{title:(0,f.t)("pricing_plans.feature.beta_features"),basic:!1,professional:!1,business:!1,enterprise:(0,f.t)(Y)})]})},ea=function(){return(0,n.jsxs)(O,{sectionName:(0,f.t)("pricing_plans.section.workflows"),children:[(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.workflows.automations"),feature:I.GY.max_dynamic_workflows_count}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.workflows.scheduled_workflows"),feature:I.GY.max_scheduled_workflows_count}),(0,n.jsx)(L,{title:(0,f.t)("pricing_plans.feature.workflows.bulk_actions"),feature:I.GY.max_bulk_action_workflows_count,suffix:(0,f.t)("pricing_plans.per_month")})]})},es=r(39905),el="pricing_plans.plan_settings.plan_selection.features",ec=function(){return(0,n.jsxs)("div",{className:"mb-4 grid grid-cols-4",children:[(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:(0,f.t)([el,"usage"])}),(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:(0,f.t)([el,"tiers","professional"])}),(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:(0,f.t)([el,"tiers","business"])}),(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:(0,f.t)([el,"tiers","enterprise"])})]})};function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let ed=function(){var e,t=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eu(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eu(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];return(0,n.jsxs)("div",{className:"hidden sm:block",children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)(es.z,{variant:"secondary",onClick:function(){return o(function(e){return!e})},className:"mb-6 !text-base","aria-expanded":r,"aria-controls":"features-content",large:!0,children:[(0,f.t)("pricing_plans.plan_settings.plan_selection.features.toggle_text"),(0,n.jsx)(p.JO,{type:r?"20-chevron-up":"20-chevron-down",className:"ml-1"})]})}),r&&(0,n.jsxs)("div",{id:"features-content",children:[(0,n.jsx)(ee,{children:(0,f.t)(["pricing_plans.plan_settings.plan_selection.features","title"])}),(0,n.jsx)(ec,{}),(0,n.jsx)(q,{}),(0,n.jsx)(ea,{}),(0,n.jsx)(et,{}),(0,n.jsx)(R,{}),(0,n.jsx)($,{}),(0,n.jsx)(S,{}),(0,n.jsx)(ee,{children:(0,f.t)("settings.billing.add_ons.title")}),(0,n.jsx)(J,{}),(0,n.jsx)(A,{}),(0,n.jsx)(er,{}),(0,n.jsx)(ei,{}),(0,n.jsx)(eo,{}),(0,n.jsx)(en,{})]})]})};var ef=r(594023),em=r(824869),ep=r(840905),eb=r(903225),eh=function(){var e=(0,eb.k6)(),t=(0,eb.TH)();return function(r,n){var i=new URLSearchParams(t.search);i.set(r,n),e.replace({pathname:t.pathname,search:i.toString()})}},ey=r(786396),ev=function(){var e=(0,c.x)(),t=e.shouldRenderBillingCurrency,r=e.billingCurrency,i=eh();return t?(0,n.jsx)(ey.v,{billingCurrency:r,onCurrencyChange:function(e){return i("billing_currency",e)},useCurrencySymbol:!0}):null},eg=function(){var e=(0,c.x)().selectedPlan,t=(null==e?void 0:e.tier)===K.Gb.enterprise;return(0,n.jsxs)("div",{className:(0,u.A)("border-primary flex items-center justify-between px-6 pb-5 pt-6",t&&"border-b"),children:[(0,n.jsx)(m.Z.LabelXl,{weight:"semibold",color:"text-dark",children:(0,f.t)(["pricing_plans.plan_settings.plan_selection","title"])}),(0,n.jsx)(ev,{})]})},e_=r(117617),ex=r(524330),ej=r(99595),ew="pricing_plans.plan_settings.plan_selection.plan_selector",eO=function(e){var t=e.plan;return t.annual_discount_amount_with_currency?(0,n.jsxs)(m.Z.BodyXs,{weight:"light",children:[(0,f.t)("".concat(ew,".annual_amount"),{dollar_amount:t.annual_base_amount_with_currency}),(0,n.jsx)("span",{className:"text-green-success-dark ml-1 font-semibold",children:t.fetch_discount?(0,f.t)("".concat(ew,".saved_dollar_amount_with_percentage"),{dollar_amount:t.annual_discount_amount_with_currency,percentage:(0,K.g_)(t)}):(0,f.t)("".concat(ew,".saved_dollar_amount"),{dollar_amount:t.annual_discount_amount_with_currency})})]}):null},eS=r(714356),ek="pricing_plans.plan_settings.plan_selection.plan_selector.plan_card.tier_highlights",eN={basic:[(0,f.t)("".concat(ek,".basic.rich_member_profiles")),(0,f.t)("".concat(ek,".basic.search_member_profiles")),(0,f.t)("".concat(ek,".basic.discussions")),(0,f.t)("".concat(ek,".basic.events")),(0,f.t)("".concat(ek,".basic.paid_memberships")),(0,f.t)("".concat(ek,".basic.weekly_digest")),(0,f.t)("".concat(ek,".basic.gamification")),(0,f.t)("".concat(ek,".basic.custom_domain"))],professional:[(0,f.t)("".concat(ek,".professional.courses")),(0,f.t)("".concat(ek,".professional.website_builder")),(0,f.t)("".concat(ek,".professional.live_streams")),(0,f.t)("".concat(ek,".professional.live_rooms")),(0,f.t)("".concat(ek,".professional.unlimited_members")),(0,f.t)("".concat(ek,".professional.custom_branding")),(0,f.t)("".concat(ek,".professional.reporting_and_analytics")),(0,f.t)("".concat(ek,".professional.custom_code_snippets")),(0,f.t)("".concat(ek,".professional.conversion_tracking"))],business:[(0,f.t)("".concat(ek,".business.workflows")),(0,f.t)("".concat(ek,".business.custom_profile_fields")),(0,f.t)("".concat(ek,".business.headless_member_api")),(0,f.t)("".concat(ek,".business.admin_api")),(0,f.t)("".concat(ek,".business.branded_email_notifications")),(0,f.t)("".concat(ek,".business.content_co_pilot")),(0,f.t)("".concat(ek,".business.automated_transcriptions")),(0,f.t)("".concat(ek,".business.activity_scores"))],enterprise:[(0,f.t)("".concat(ek,".enterprise.ai_agents")),(0,f.t)("".concat(ek,".enterprise.ai_workflows")),(0,f.t)("".concat(ek,".enterprise.unlimited_workflows")),(0,f.t)("".concat(ek,".enterprise.custom_sso")),(0,f.t)("".concat(ek,".enterprise.priority_support")),(0,f.t)("".concat(ek,".enterprise.advanced_analytics")),(0,f.t)("".concat(ek,".enterprise.lower_transaction_fees")),(0,f.t)("".concat(ek,".enterprise.sandbox_community")),(0,f.t)("".concat(ek,".enterprise.up_to_10_admins_and_100_moderators")),(0,f.t)("".concat(ek,".enterprise.concierge_onboarding")),(0,f.t)("".concat(ek,".enterprise.dedicated_csm"))]},eP=function(e){var t=e.plan,r=e.shouldHighlightFeatures;if(t.tier===K.Gb.plus)return null;var i=eN[t.tier];return(0,n.jsx)(n.Fragment,{children:i.map(function(e){return(0,n.jsx)(eS.I,{feature:e,isOnOffer:!!t.is_on_offer,isHighlighted:r},e)})})},eC="pricing_plans.plan_settings.plan_selection.plan_selector.plan_card",eA=function(e,t){var r=e===K.Gb.enterprise?"md:grid-rows-6":e===K.Gb.professional?"md:grid-rows-5":e===K.Gb.basic||e===K.Gb.business?"md:grid-rows-4":"";return(0,u.A)(t?"grid grid-cols-1 gap-y-2":"grid auto-cols-max grid-flow-col gap-x-10 gap-y-2",r)},eI=function(e){var t=e.plan,r=(0,em.E)(),o=r.currentPlanTier,a=r.isCommunityOnTrial,l=(0,s.C)(),c=l.isCompactLayout,u=l.isMobileLayout,d=!!(a||o&&(0,K.sR)(o,t.tier)),p=(0,i.useMemo)(function(){var e;return t.tier===K.Gb.basic?(0,f.t)("".concat(eC,".core_features")):t.tier===K.Gb.professional?(0,f.t)("".concat(eC,".professional_features")):(0,f.t)("".concat(eC,".everything_plus"),{tier:(0,K.fm)(null!=(e=(0,K._q)(t.tier))?e:"")})},[t]);return(0,n.jsx)("div",{className:"mt-2 px-0 sm:mt-6 sm:px-11",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"mb-2 sm:mb-4",children:(0,n.jsx)(m.Z.LabelXs,{weight:"semibold",children:p})}),(0,n.jsx)("div",{className:eA(t.tier,c||u),children:(0,n.jsx)(eP,{plan:t,shouldHighlightFeatures:d})})]})})},eT=function(e){var t,r,i=e.plan,o=(0,I.sq)(i.plan_action),a=i.is_on_offer&&!o&&(null==(t=i.plan_coupon)?void 0:t.discounted_monthly_price),s=a?(0,K.Zb)((null==(r=i.plan_coupon)?void 0:r.discounted_monthly_price)||"",i.currency):i.display_base_monthly_amount;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1 align-middle",children:[a&&(0,n.jsx)(m.Z.BodyMd,{weight:"font-normal",color:"text-slate-400 dark:text-slate-400",size:"text-normal",textTransform:"line-through",children:i.display_base_monthly_amount}),(0,n.jsx)(m.Z.TitleMd,{weight:"font-bold",children:s}),(0,n.jsx)(m.Z.BodyMd,{weight:"font-normal",color:"text-slate-700 dark:text-slate-300",size:"text-sm",children:(0,f.t)("".concat("pricing_plans.plan_settings.plan_selection.plan_selector",".monthly_interval"))})]})};function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eL="pricing_plans.plan_settings.plan_selection.plan_selector",eD=function(e){var t,r,o,a,l=e.plan,d=e.selected,p=e.onClick,b=(0,I.sq)(l.plan_action),h=(0,e_.WJ)(),y=(0,c.x)().currentPlan,v=(null==y||null==(r=y.plan_trial)?void 0:r.active)&&(null==y||null==(o=y.plan_trial)?void 0:o.tier)===l.tier,g=(0,s.C)(),_=g.isDesktopLayout,x=g.isCompactLayout,j=(0,i.useRef)(null),w=(t=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eE(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eE(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=w[0],S=w[1];(0,i.useEffect)(function(){S(d&&j.current?j.current.scrollHeight:0)},[d]);var k=(0,n.jsx)(m.Z.BodySm,{weight:"font-normal",children:(0,f.t)("".concat(eL,".tier_descriptions.").concat(l.tier))});return(0,n.jsxs)(ef.E.Option,{value:l.id,className:(0,u.A)("border-primary cursor-pointer border-b p-4 last:border-none sm:p-6",d?"bg-gray-50 dark:bg-gray-900":"bg-primary"),onClick:p,children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex items-start",children:(0,n.jsx)(ej.Y,{value:l.id,label:"",checked:d})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:l.display_name}),b&&(0,n.jsx)(ex.g,{label:(0,f.t)("".concat(eL,".current_plan")),square:!0}),l.is_on_offer&&!b&&(null==(a=l.plan_coupon)?void 0:a.display_discount_percentage)&&(0,n.jsx)(ex.g,{label:(0,f.t)([eL,"plan_card","discount_percentage"],{percentage:l.plan_coupon.display_discount_percentage}),className:"bg-gradient-to-r from-[#312F79] to-[#493B73] text-white",square:!0}),v&&(0,n.jsx)(ex.g,{label:(0,f.t)("".concat(eL,".trialing_plan")),square:!0,truncate:!1,className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"})]}),h&&(0,n.jsx)("div",{className:"hidden sm:block",children:k})]})]})}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[!x&&(0,n.jsx)(eT,{plan:l}),h&&!_&&(0,n.jsx)("div",{className:"hidden sm:block",children:(0,n.jsx)(eO,{plan:l})})]})]}),(0,n.jsx)("div",{ref:j,className:"overflow-hidden duration-300 ease-in-out",style:{height:"".concat(O,"px")},children:(0,n.jsxs)("div",{className:"px-7 sm:px-0",children:[!h&&(0,n.jsx)("div",{className:"mt-2 block sm:hidden",children:(0,n.jsx)("div",{className:"mt-1",children:k})}),(0,n.jsx)(eI,{plan:l})]})})]},l.id)};function eM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||eB(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eB(e,t){if(e){if("string"==typeof e)return eM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eM(e,t)}}var ez=function(){var e=(0,c.x)(),t=e.plans,r=e.selectedPlan,o=e.setSelectedPlanTier,a=(0,em.E)(),l=a.isCommunityOnPaidPlan,u=a.currentPlanTier,d=a.isCommunityOnTrial,b=eR((0,i.useState)(!1),2),h=b[0],y=b[1],v=(0,i.useRef)(null),g=eR((0,i.useState)(0),2),_=g[0],x=g[1],j=(0,s.C)().isDesktopLayout,w=(0,i.useMemo)(function(){return((function(e){if(Array.isArray(e))return eM(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||eB(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse()},[t]),O=(0,i.useMemo)(function(){if(h)return{visiblePlans:w,hiddenPlans:[]};var e=function(e){return d?e.tier===K.Gb.basic:!!l&&!!u&&(0,K._D)(u,e.tier)};return{visiblePlans:w.filter(function(t){return!e(t)}),hiddenPlans:w.filter(function(t){return e(t)})}},[w,h,d,l,u]),S=O.visiblePlans,k=O.hiddenPlans;if((0,i.useEffect)(function(){h&&v.current?x(v.current.scrollHeight):x(0)},[h,k.length]),0===t.length)return(0,n.jsx)(ep.gi,{variant:"plan-selector",cardCount:3});var N=h?"see_less_plans":"see_more_plans";return(0,n.jsx)(ef.E,{value:null==r?void 0:r.id,children:(0,n.jsx)("div",{className:"flex w-full justify-center",children:(0,n.jsxs)("ul",{className:"border-primary flex w-full flex-col overflow-hidden rounded-2xl border",children:[j&&(0,n.jsx)(eg,{}),S.map(function(e){return(0,n.jsx)(eD,{plan:e,selected:e.tier===(null==r?void 0:r.tier),onClick:function(){return o(e.tier)}},e.id)}),k.length>0&&(0,n.jsx)("div",{ref:v,className:"overflow-hidden duration-300 ease-in-out",style:{height:"".concat(_,"px")},children:k.map(function(e){return(0,n.jsx)(eD,{plan:e,selected:e.tier===(null==r?void 0:r.tier),onClick:function(){return o(e.tier)}},e.id)})}),k.length>0&&(0,n.jsxs)("button",{type:"button",className:"bg-primary flex w-full cursor-pointer flex-row justify-start gap-0 px-6 py-4",onClick:function(){return y(!h)},children:[(0,n.jsx)(m.Z.BodyXs,{weight:"font-medium",children:(0,f.t)("".concat("pricing_plans.plan_settings.plan_selection.plan_selector",".").concat(N))}),(0,n.jsx)(p.JO,{type:h?"16-chevron-up":"16-chevron-down",size:12,className:"ml-2"})]})]})})})},eF=r(769125),eU=r(691525),eZ=r(668437),eG=r.n(eZ),eq=r(900795),eV=r(741813),eW=function(e){var t=e.currentPlan,r=(0,K.Dr)(t.tier)||(0,K.kw)(t.tier)&&!t.public?"legacy_plan_downgrade_warning":t.show_pro_grandfathered_for_courses?"professional_downgrade_warning":"";return(0,n.jsx)(eV.q,{children:(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(eq.w,{content:(0,f.t)(r,{name:eG()(t.tier),price:t.base_amount,interval:t.interval})})})})},eH=function(){return(0,n.jsxs)("div",{className:"relative overflow-hidden rounded-xl bg-black px-10 py-8",children:[(0,n.jsx)("div",{className:"absolute left-[66px] top-[-336px] h-[380px] w-[947px] rounded-full bg-[#3655E5] blur-[107px]"}),(0,n.jsxs)("div",{className:"relative z-10 flex flex-row items-center gap-x-12",children:[(0,n.jsx)("div",{className:"text-7xl font-extrabold text-white",children:(0,f.t)("pricing_plans.marketing_campaign.banner.discount")}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z.TitleXl,{color:"text-white",children:(0,f.t)("pricing_plans.marketing_campaign.banner.title")})})]})]})},eQ=r(186598),eK=r(348918),eJ=function(e){var t=e.children;return(0,n.jsx)("div",{className:"dark:border-primary dark:bg-primary rounded-2xl border border-blue-200 bg-blue-100 p-6","data-testid":"plan-trial-info",children:t})},e$=function(){var e=(0,eQ.j)(),t=e.isPlanTrialActive,r=e.planTrialEndDateFormatted,i=e.planTrialDaysLeft,o=e.planTrial,s=(0,a.C)().trackEvent,l=(0,eK.A)();return t?(0,n.jsxs)(eJ,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("plan_trial_plans_page_banner.title",{date:r})}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,f.t)("plan_trial_plans_page_banner.description")}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(es.z,{variant:"secondary",onClick:function(){s("trial_banner.plans_page.manage_trial.clicked",{days_left:i,is_plan_trial:!0,trial_type:null==o?void 0:o.trial_type}),l.show()},children:(0,f.t)("plan_trial_plans_page_banner.manage_trial")})})]}):null},eX=r(22039),eY=r(134592),e0=function(){var e=(0,eX.K)(),t=(0,a.C)().trackEvent;return(0,eY.c)()?(0,n.jsx)("div",{className:"dark:border-primary mb-4 rounded-lg border border-blue-200 bg-gradient-to-b from-white to-[#F1F6FF] p-4 dark:bg-gradient-to-b dark:from-gray-800 dark:to-gray-900",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"mt-0.5 shrink-0",children:(0,n.jsx)("div",{className:"flex size-10 items-center justify-center",children:(0,n.jsx)(p.JO,{type:"16-star-fill",size:16,className:"text-blue-600 dark:text-blue-400",useWithFillCurrentColor:!0})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(m.Z.LabelMd,{weight:"bold",children:(0,f.t)("settings.billing.plans.trial_opt_in_banner.title")})}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(m.Z.BodySm,{color:"text-light",children:(0,f.t)("settings.billing.plans.trial_opt_in_banner.description")})}),(0,n.jsx)(es.z,{variant:"secondary",onClick:function(){t("plan_trial_opt_in_banner.clicked",{page:"plan_settings"}),e.show({planTier:K.Gb.business,trialType:"business_thirty_day",onConfirm:function(){t("plan_trial_opt_in_modal.trial_started",{page:"plan_settings"})},onCancel:function(){t("plan_trial_opt_in_modal.cancelled",{page:"plan_settings"})}})},children:(0,f.t)("settings.billing.plans.trial_opt_in_banner.cta")})]})]})}):null},e1=r(991712),e2=function(){var e=(0,o.wh)().currentCommunity;return(0,n.jsxs)(eV.q,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("subscription.expired_trial_title")}),(0,n.jsxs)(m.Z.BodyMd,{color:"text-default",children:[(0,f.t)("pricing_plans.to_access_upgrade",{community_name:null==e?void 0:e.name}),(0,n.jsx)(eq.w,{content:(0,f.t)("pricing_plans.please_reach_out")})]})]})},e3=function(){return(0,n.jsxs)(eV.q,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("pricing_plans.spc.banner.title")}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,n.jsx)(eq.w,{content:(0,f.t)("pricing_plans.spc.banner.subtitle")})})]})},e6=function(){var e=(0,o.wh)().currentCommunity;return(0,n.jsxs)(eV.q,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("pricing_plans.plan_cancelled")}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,f.t)("pricing_plans.to_access",{community_name:null==e?void 0:e.name})})]})},e5=function(){return(0,n.jsxs)(eV.q,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("subscription.incomplete_expired_title")}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,f.t)("subscription.incomplete_expired_description")})]})},e4=r(308683),e7=function(){var e,t,r=(0,o.wh)().currentCommunity;return(null==r||null==(e=r.subscription)?void 0:e.ends_at)?(0,n.jsxs)(eV.q,{children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("subscription.subscription_on_grace_period.title")}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,f.t)("subscription.subscription_on_grace_period.description",{date:(0,e4.TF)(null==r||null==(t=r.subscription)?void 0:t.ends_at)})})]}):null},e9=r(131906),e8=r(547144);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tt=function(){var e,t=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return te(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],o=(0,e9.useQuery)({queryKey:[e8.av.accountPaymentProcessors.invoice.show()],enabled:r});return{latestInvoice:o.data,isLoadingInvoice:o.isLoading,onRetrieveLatestInvoice:function(){n(function(e){return!e})},shouldRetrieveInvoice:r}},tr=function(){var e=tt(),t=e.isLoadingInvoice,r=e.onRetrieveLatestInvoice,i=e.latestInvoice;return(null==i?void 0:i.hosted_invoice_url)&&window.location.replace(i.hosted_invoice_url),(0,n.jsxs)(eV.q,{children:[t&&(0,n.jsx)(d.a,{variant:"fullscreen"}),(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)("subscription.incomplete_reactified.title")}),(0,n.jsx)(m.Z.BodyMd,{color:"text-default",children:(0,f.t)("subscription.incomplete_reactified.description")}),(0,n.jsx)("div",{className:"inline-block",children:(0,n.jsx)(es.z,{variant:"secondary",disabled:t,onClick:r,children:(0,f.t)("subscription.incomplete_reactified.action")})})]})},tn=function(){var e=(0,em.E)(),t=e.isExpiredTrial,r=e.isCommunitySubscriptionIncompleteExpired,i=e.isCommunitySubscriptionFullyCancelled,o=e.isCommunitySubscriptionOnGracePeriod,a=e.hasCommunityIncompletePayment,s=e.isCommunityOnPaidPlan,l=e.isPromoCodeEnabledForCommunity;return t?(0,n.jsx)(e2,{}):a?(0,n.jsx)(tr,{}):r?(0,n.jsx)(e5,{}):i?(0,n.jsx)(e6,{}):o?(0,n.jsx)(e7,{}):l&&!s?(0,n.jsx)(e3,{}):null},ti=function(){var e=(0,c.x)().currentPlan,t=(0,eU.wh)().currentCommunity,r=(0,em.E)(),i=r.isExpiredTrial,o=r.isCommunityOnTrial,a=r.hasActiveOffer,s=e&&(e.show_pro_grandfathered_for_courses||(0,K.kw)(e.tier)&&!e.public||(0,K.Dr)(e.tier))&&!i&&!o;return t?(null==e?void 0:e.is_community_hub_downgrade_scheduled)?(0,n.jsx)(e1.o,{currentPlan:e}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e0,{}),(0,n.jsx)(e$,{}),e&&(0,K._c)(e.tier)&&(0,n.jsx)(eF.Z,{logoUrl:t.logo_url,appName:t.name,brandColors:t.prefs.brand_color}),s&&(0,n.jsx)(eW,{currentPlan:e}),(0,n.jsx)(tn,{}),a&&(0,n.jsx)(eH,{})]}):null},to=r(598222),ta=r(912655),ts=function(e){var t=e.plan_action;return(0,I.sR)(t)||(0,I._D)(t)?"pricing_plans.variant_c_actions.".concat(t):(0,I.Zi)(e)?"pricing_plans.variant_c_actions.switch_to_annual":(0,I.XV)(e)?"pricing_plans.variant_c_actions.switch_to_monthly":"pricing_plans.actions.".concat(t)},tl=function(e){var t=e.plan_action;return(0,I.sR)(t)||(0,I.Zi)(e)?"marketing-gradient":(0,I.XV)(e)?"secondary":(0,I.q2)(t)||(0,I.s5)(t)||(0,I.sq)(t)?"circle":(0,I._D)(t)?"secondary":void 0},tc=function(e){if((0,I.Kj)(e.plan_action))return{disabled:!1,shouldShowContactSupport:!0,testId:"submit-button-".concat(e.plan_action),text:(0,f.t)("pricing_plans.actions.contact_cx"),variant:"secondary",className:""};var t=tl(e),r=e.is_on_offer&&!(0,I.sq)(e.plan_action)?"bg-[linear-gradient(135deg,#3655E5_0%,#1a2870_60%,#000000_100%)] text-white":"";return{disabled:(0,I.sq)(e.plan_action),shouldShowContactSupport:!1,testId:"submit-button-".concat(e.plan_action),text:(0,f.t)(ts(e),{plan_name:e.display_name}),className:r,variant:t||"secondary"}},tu=r(779869);function td(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function tf(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){td(o,n,i,a,s,"next",e)}function s(e){td(o,n,i,a,s,"throw",e)}a(void 0)})}}function tm(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tp=function(e){var t=(0,c.x)(),r=t.updateSubscription,n=t.refetchPlans,i=t.refetchCurrentPlan,o=(0,eb.k6)(),a=(0,tu.w)(),s=(0,em.E)(),l=s.shouldShowProration,u=s.isCommunityOnTrial,d=function(){return e.professional_grandfathered_id||e.id},m=function(){n(),i()},p=function(){return tf(function(){return tm(this,function(e){switch(e.label){case 0:return o.push("/feed"),[4,a.hide()];case 1:return e.sent(),[2]}})})()},b=function(){var t=!u&&!l(e);return{planId:d(),onSuccess:p,successButtonLabel:(0,f.t)("pricing_plans.change_plan.go_to_community"),showPlanDetails:t,onCloseModal:m}},h=function(){return tf(function(){return tm(this,function(e){switch(e.label){case 0:return[4,a.show(b())];case 1:return e.sent(),[2]}})})()};return{handleChangePlanButtonClick:function(){return tf(function(){return tm(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),[2]}})})()},handleRedeemOfferButtonClick:function(){return tf(function(){return tm(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),[2]}})})()},handleResumeButtonClick:function(){r(d())},handleRenewButtonClick:function(){return a.show({planId:d(),onSuccess:function(){return p()},successButtonLabel:(0,f.t)("pricing_plans.change_plan.go_to_community"),onCloseModal:m,isRenewal:!0})},handleCurrentPlanButtonClick:function(){},handleContactSupportOnClick:function(){window.open("mailto:support@circle.so","emailWindow")}}};function tb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var th=function(e){var t,r,n,i=tc(e),o=tp(e),a=(tb(n={},I.$v.upgrade,o.handleChangePlanButtonClick),tb(n,I.$v.change_plan,o.handleChangePlanButtonClick),tb(n,I.$v.downgrade,o.handleChangePlanButtonClick),tb(n,I.$v.resume,o.handleResumeButtonClick),tb(n,I.$v.renew,o.handleRenewButtonClick),tb(n,I.$v.current_plan,o.handleCurrentPlanButtonClick),tb(n,I.$v.redeem_offer,o.handleRedeemOfferButtonClick),tb(n,I.$v.contact_support,o.handleContactSupportOnClick),n),s=i.shouldShowContactSupport?o.handleContactSupportOnClick:function(e){var t=a[e];if(!t)throw Error("No handler found for plan action: ".concat(e));return t}(e.plan_action);return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tb(e,t,r[t])})}return e}({},i),r=r={handler:s,plan:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},ty=function(e){var t=th(e.plan);return(0,n.jsx)(es.z,{variant:t.variant,large:!0,onClick:t.handler,disabled:t.disabled,"data-testid":t.testId,className:(0,u.A)("w-full",t.className),children:t.text})},tv=function(e){var t=e.onExpand,r=e.selectedPlan;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("button",{type:"button",onClick:t,children:(0,n.jsx)(m.Z.LabelXs,{color:"text-default",textTransform:"underline",children:(0,f.t)(["pricing_plans.plan_settings.mobile_checkout_overlay","view_summary"])})}),(0,n.jsx)(m.Z.LabelXs,{weight:"semibold",children:r.annual_base_amount_with_currency})]}),(0,n.jsx)(ty,{plan:r})]})},tg=r(637811),t_=function(){var e=(0,c.x)(),t=e.billingCycle,r=e.currentPlan,n=(0,o.wh)().currentCommunity,i=eh(),a=!t&&r?!(null==n?void 0:n.is_on_trial):(0,K.pE)(t),s=(0,I.Km)(r);return{billingCycle:t,currentPlan:r,isYearly:a,shouldShowBillingCycleOptions:s,isSelected:function(e){return!t&&r?e===I.ff.year?!(null==n?void 0:n.is_on_trial):!!(null==n?void 0:n.is_on_trial):t===e},handleIntervalChange:function(e){i("billing_cycle",e)},handleToggle:function(e){i("billing_cycle",e?I.ff.year:I.ff.month)},planIntervals:I.ff}},tx=r(826307),tj=function(){var e=(0,c.x)(),t=e.billingCycle,r=e.billingCurrency,n=e.selectedPlan,i=e.selectedPlanTier,o=e.plans,a=e.isPlansLoading,s=t===I.ff.month?I.ff.year:I.ff.month,l=(0,tx.B)({billing_cycle:s,billing_currency:r,locale:null}),u=l.plans,d=l.isPlansLoading,f=i?u.find(function(e){return e.tier===i}):void 0,m=!a&&!d&&o.length>0&&u.length>0,p=t===I.ff.year?n:f,b=t===I.ff.month?n:f;return{auxiliaryPlans:u,auxiliarySelectedPlan:f,areBothIntervalsLoaded:m,auxiliaryBillingCycle:s,monthlyPlan:b,yearlyPlan:p}},tw="pricing_plans.plan_settings.plan_summary",tO=(0,i.memo)(function(e){var t=e.id,r=e.interval,i=e.isSelected,o=e.onIntervalChange,a=e.plan;return(0,n.jsx)(ej.Y,{id:t,name:"billing-interval",label:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,f.t)([tw,"annual_billing"])}),a&&(0,n.jsx)("div",{className:"flex items-center rounded-md bg-green-50 px-2 py-0.5",children:(0,n.jsx)(m.Z.LabelXs,{weight:"medium",color:"text-green-700",children:(0,f.t)([tw,"annual_savings"],{percentage:(0,K.g_)(a)})})})]}),value:r,description:(0,n.jsx)(m.Z.BodySm,{weight:"normal",children:(0,f.t)([tw,"plan_annual_amount"],{amount:null==a?void 0:a.display_base_monthly_amount})}),defaultChecked:i,onChange:function(){return o(r)}})});tO.displayName="AnnualRadioOption";var tS="pricing_plans.plan_settings.plan_summary",tk=(0,i.memo)(function(e){var t=e.id,r=e.interval,i=e.isSelected,o=e.onIntervalChange,a=e.plan;return(0,n.jsx)(ej.Y,{id:t,name:"billing-interval",label:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,f.t)([tS,"monthly_billing"])}),value:r,description:(0,n.jsx)(m.Z.BodySm,{weight:"normal",children:(0,f.t)([tS,"plan_monthly_amount"],{amount:null==a?void 0:a.display_base_monthly_amount})}),defaultChecked:i,onChange:function(){return o(r)}})});tk.displayName="MonthlyRadioOption";var tN=function(){var e=t_(),t=e.isYearly,r=e.shouldShowBillingCycleOptions,i=e.handleIntervalChange,o=tj(),a=o.areBothIntervalsLoaded,s=o.monthlyPlan,l=o.yearlyPlan;return r&&a?(0,n.jsxs)(tg.p,{legend:"Billing Cycle",children:[(0,n.jsx)(tO,{id:"annual-billing",interval:I.ff.year,isSelected:t,plan:l,onIntervalChange:i}),(0,n.jsx)(tk,{id:"monthly-billing",interval:I.ff.month,isSelected:!t,plan:s,onIntervalChange:i})]}):null};tN.displayName="BillingIntervalRadio";var tP=function(){var e=(0,c.x)().selectedPlan;return e?(0,n.jsx)("div",{className:"flex flex-row gap-1",children:(0,K.pE)(e.interval)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z.BodyXs,{textTransform:"line-through",color:"text-default",children:e.strike_through_price}),(0,n.jsx)(m.Z.BodyXs,{color:"text-default",children:(0,f.t)(["pricing_plans.plan_settings.plan_summary","plan_annual_amount"],{amount:e.display_base_monthly_amount})})]})}):null},tC=r(193336);function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tT=function(e){var t=e.description,r=e.value,i=e.descriptionProps,o=e.valueProps;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(m.Z.BodySm,tI(tA({},i),{children:t})),(0,n.jsx)(m.Z.BodySm,tI(tA({},o),{children:r}))]})},tE=function(e){var t=e.selectedPlan;return(0,n.jsx)(tT,{description:(0,f.t)(["pricing_plans.plan_settings.plan_summary","annual_savings"],{percentage:(0,K.g_)(t)}),value:"-".concat((0,K.Dt)(t.annual_discount_amount_with_currency||"",t.currency)),valueProps:{color:"text-green-success"}})},tL=function(e){var t=e.currentPlanCredit;return(0,n.jsx)(tT,{description:(0,f.t)(["pricing_plans.plan_settings.plan_summary","current_plan_credit"]),value:t,valueProps:{color:"text-green-success"}})},tD=function(e){var t=e.discountCoupon;return(0,n.jsx)(tT,{description:(0,f.t)(["pricing_plans.plan_settings.plan_summary","discount_coupon"]),value:t,valueProps:{color:"text-green-success"}})},tM=function(e){var t=e.dueToday;return(0,n.jsx)(tT,{description:(0,f.t)(["pricing_plans.plan_settings.plan_summary","due_today"]),value:t,descriptionProps:{weight:"font-medium"},valueProps:{weight:"font-medium"}})},tR=function(e){var t=e.auxiliarySelectedPlan;return(0,n.jsx)(tT,{description:(0,f.t)(["pricing_plans.plan_settings.plan_summary","annual_savings"],{percentage:(0,K.g_)(t)}),value:"-".concat((0,K.Dt)(t.annual_discount_amount_with_currency||"",t.currency)),descriptionProps:{color:"text-red-500",textTransform:"line-through"},valueProps:{color:"text-red-500",textTransform:"line-through"}})},tB=r(664470),tz=function(){return(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-y-2 border-t pt-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(tB.X2,{md:!0,long:!0}),(0,n.jsx)(tB.X2,{md:!0,short:!0})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(tB.X2,{md:!0,half:!0}),(0,n.jsx)(tB.X2,{md:!0,short:!0})]})]})},tF=function(){var e=(0,c.x)().selectedPlan,t=(0,em.E)().isCommunityOnTrial,r=tj(),i=r.auxiliarySelectedPlan,o=r.yearlyPlan,a=(0,tC.c)({plan:e,alternativePlan:i,isAnnualPlan:(0,K.pE)(null==e?void 0:e.interval),isCommunityOnTrial:t,isPlanLoading:!1}),s=a.pricing,l=a.isLoadingPricing;return!e||(0,I.sq)(e.plan_action)?null:!l&&i&&o?(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-y-1 border-t pt-4",children:[(0,K.pE)(e.interval)&&(0,n.jsx)(tE,{selectedPlan:o}),(0,K.W)(e.interval)&&(0,n.jsx)(tR,{auxiliarySelectedPlan:i}),s.currentPlanCredit&&(0,I.Vu)(e)&&(0,n.jsx)(tL,{currentPlanCredit:s.currentPlanCredit}),s.discountCoupon&&(0,n.jsx)(tD,{discountCoupon:s.discountCoupon}),s.dueToday&&(0,n.jsx)(tM,{dueToday:s.dueToday})]}):(0,n.jsx)(tz,{})},tU=function(){var e=(0,c.x)().selectedPlan;return e?(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,f.t)(["pricing_plans.plan_settings.plan_summary","plan_name"],{plan:e.display_name})}),(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,K.pE)(e.interval)?(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:e.annual_base_amount_with_currency}):(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:e.display_base_monthly_amount})})]}):null},tZ=function(){return(0,n.jsxs)("div",{className:"border-primary mt-4 flex w-[375px] flex-col gap-y-3 rounded-2xl border p-6",children:[(0,n.jsx)("div",{className:"bg-tertiary h-5 w-full animate-pulse rounded-lg"}),(0,n.jsx)(tB.X2,{md:!0,half:!0}),(0,n.jsx)(tB.X2,{md:!0,half:!0}),(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-y-2 border-t pt-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(tB.X2,{md:!0,long:!0}),(0,n.jsx)(tB.X2,{md:!0,short:!0})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(tB.X2,{md:!0,half:!0}),(0,n.jsx)(tB.X2,{md:!0,short:!0})]}),(0,n.jsx)("div",{className:"bg-tertiary mt-3 h-10 w-full animate-pulse rounded-3xl"})]})]})},tG=(0,i.forwardRef)(function(e,t){var r=e.onCollapse,i=e.selectedPlan;return i?(0,n.jsxs)("div",{ref:t,className:"bg-primary absolute inset-x-0 bottom-0 flex max-h-[80vh] flex-col gap-y-5 overflow-y-auto rounded-t-2xl p-5",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(m.Z.LabelLg,{weight:"semibold",children:(0,f.t)(["pricing_plans.plan_settings.mobile_checkout_overlay","summary"])}),(0,n.jsx)("button",{type:"button",onClick:r,children:(0,n.jsx)(p.JO,{type:"20-close",size:20})})]}),(0,n.jsx)(tN,{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(tU,{}),(0,n.jsx)(tP,{})]}),(0,n.jsx)(tF,{}),(0,n.jsx)(ty,{plan:i})]}):(0,n.jsx)(tZ,{})});function tq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}tG.displayName="ExpandedCheckoutView";var tV=function(){var e,t,r,o=(0,c.x)().selectedPlan,a=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tq(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tq(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1];return o?(0,n.jsxs)("div",{className:"fixed inset-x-0 bottom-0 z-50 md:hidden",children:[(0,n.jsx)(to.u,{show:s,as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50",onClick:function(){return l(!1)},"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"bg-primary border-primary relative border-t px-5 py-4 shadow-lg",children:[!s&&(0,n.jsx)(tv,{onExpand:function(){return l(!0)},selectedPlan:o}),(0,n.jsx)(to.u,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({show:s,as:i.Fragment},ta.Fc),r=r={children:(0,n.jsx)(tG,{onCollapse:function(){return l(!1)},selectedPlan:o})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))]})]}):null},tW=function(){var e=(0,c.x)().selectedPlan,t=(0,s.C)().isCompactLayout;return e?(0,n.jsxs)("div",{className:(0,u.A)("border-primary flex flex-col gap-y-5 rounded-2xl border p-6",t?"w-[325px]":"w-[375px]"),children:[(0,n.jsx)(m.Z.LabelXl,{weight:"semibold",children:(0,f.t)(["pricing_plans.plan_settings.plan_summary","title"])}),(0,n.jsx)(tN,{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(tU,{}),(0,n.jsx)(tP,{})]}),(0,n.jsx)(tF,{}),(0,n.jsx)(ty,{plan:e})]}):(0,n.jsx)(tZ,{})},tH=r(500460);let tQ=r.p+"static/react/components/SettingsApp/Plan/PlanSettings/experiment/socialProof-89073aa46a7dd337.svg",tK=r.p+"static/react/components/SettingsApp/Plan/PlanSettings/experiment/social_proof_dark-391cde1a073cc9ce.svg";var tJ=function(e){var t=e.scale,r=(0,tH.TC)().isDarkAppearance;return(0,n.jsx)("img",{src:r?tK:tQ,loading:"lazy",alt:(0,f.t)(["pricing_plans.plan_settings.plan_selection","title"]),style:{transform:"scale(".concat(void 0===t?1:t,")")}})},t$=function(){var e=(0,o.wh)().isLoading,t=(0,c.x)(),r=t.isCurrentPlanLoading,f=t.selectedPlan,m=(0,l.tQ)(),p=m.hideFab,b=m.showFab,h=(0,s.C)(),y=h.isCompactLayout,v=h.isDesktopLayout,g=h.isMobileLayout,_=(0,a.C)().trackEvent;if((0,i.useEffect)(function(){_("plan_settings.plans_page.visited",{})},[_]),(0,i.useEffect)(function(){return f&&g?p():b(),function(){b()}},[f,g,p,b]),r||e)return(0,n.jsx)(d.a,{variant:"fullscreen"});var x=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tJ,{scale:g?1.4:1}),(0,n.jsx)(ed,{})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,n.jsx)(ti,{}),(0,n.jsxs)("div",{className:"flex md:gap-6",children:[(0,n.jsxs)("div",{className:(0,u.A)("flex flex-col gap-10",y?"w-[550px]":"w-[681px]"),children:[(0,n.jsx)(ez,{}),!y&&x]}),(0,n.jsx)("div",{children:v&&(0,n.jsx)(tW,{})})]}),y&&(0,n.jsx)("div",{className:"mx-auto flex max-w-[681px] flex-col gap-y-6",children:x})]}),(0,n.jsx)(tV,{})]})}},51639:function(e,t,r){"use strict";r.d(t,{K:()=>b});var n=r(552676),i=r(339720),o=r(498936),a=r(739792),s=r(441342),l=r(432050),c=r(524330),u=r(381636),d=r(274002),f=r(247075),m=function(e){var t=e.name,r=e.email,i=e.image;return(0,n.jsxs)("div",{className:"border-primary inline-block rounded-lg border",children:[i&&(0,n.jsx)("img",{loading:"lazy",alt:(0,a.t)("settings.billing.account_manager.alt",{name:t}),src:i,className:"rounded-t-lg"}),(0,n.jsxs)("div",{className:"p-5",children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.Z.LabelMd,{weight:"semibold",children:t})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.Z.LabelMd,{children:(0,a.t)("settings.billing.account_manager.contact")})}),(0,n.jsx)("div",{className:"pt-6",children:(0,n.jsx)(f.Q,{href:"mailto:".concat(r),variant:"circle",children:(0,a.t)("settings.billing.account_manager.message")})})]})]})},p=function(e){var t=e.isExpired,r=(0,s.wh)().currentCommunity,i=null==r?void 0:r.csm;return(0,n.jsxs)("div",{className:"bg-primary h-full pb-10",children:[(0,n.jsxs)("div",{className:"bg-secondary px-5 py-20 xl:px-40",style:{backgroundColor:"#191B1F"},children:[(0,n.jsx)(c.g,{label:(0,a.t)("settings.billing.your_membership"),inverted:!0,square:!0}),(0,n.jsx)("div",{children:(0,n.jsx)(u.Z.TitleXxl,{color:"text-white",children:(0,a.t)("settings.billing.plans.plus")})})]}),t&&(0,n.jsx)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:(0,n.jsx)(l.b,{className:"!w-full",title:(0,a.t)("settings.billing.plans.errors.canceled_plus_subscription"),type:"warning"})}),(0,n.jsxs)("div",{className:"mt-20 px-5 xl:flex xl:px-40",children:[(0,n.jsx)("div",{className:"grow pr-6",children:(0,n.jsx)(d.g,{showBillingDetails:!t,forceFromSubscription:!1})}),i&&(0,n.jsx)("div",{children:(0,n.jsx)(m,{name:i.name,email:i.email,image:i.profile_image})})]})]})},b=function(e){var t=e.isExpired;return(0,i.i)()?(0,n.jsx)("div",{className:"bg-primary min-h-screen -mt-10 py-12 px-4 md:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"mx-auto w-full max-w-4xl",children:(0,n.jsx)(o.$,{showBillingDetails:!t})})}):(0,n.jsx)(p,{isExpired:t})}},241328:function(e,t,r){"use strict";r.d(t,{x:()=>g,o:()=>_});var n=r(552676),i=r(275271),o=r(903225),a=r(441342),s=r(56664),l=r(913382),c=r(180932),u=r(535410),d=r(824869),f=r(303189),m=r(826307),p=r(906082),b=function(e){var t=e.plans,r=e.currentPlan,n=e.isCommunityOnTrial,i=e.isExpiredTrial,o=e.isCommunityOnPaidPlan;if(t.length){var a=t.find(function(e){return"renew"===e.plan_action});if(a)return a.tier;if(r&&"enterprise"===r.tier)return r.tier;if(n||i){var s=t.find(function(e){return(0,p.BD)(e.tier)});if(s)return s.tier}if(o&&r&&!(0,p.kw)(r.tier)){var l=t.find(function(e){return e.tier===(0,p.FZ)(r.tier)});if(l)return l.tier}}};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=(0,i.createContext)(void 0);v.displayName="PlansContext";var g=function(){var e=(0,i.useContext)(v);if(!e)throw Error("usePlans must be used within a PlansProvider");return e},_=function(e){var t,r,p=e.children,h=(0,o.TH)(),g=new URLSearchParams(h.search),_=g.get("billing_cycle"),x=g.get("billing_currency"),j=g.get("locale"),w=(0,f.D)(),O=w.currentPlan,S=w.isCurrentPlanLoading,k=w.refetchCurrentPlan,N=(0,d.E)(),P=N.isCommunityOnPaidPlan,C=N.isCommunityOnTrial,A=N.isExpiredTrial,I=N.canChooseCurrency,T=(0,a.wh)().experimentation,E=T.experiments,L=T.flags,D=(0,i.useCallback)(function(){return C||A?c.ff.year:!S&&O?O.interval:c.ff.year},[C,S,O,A]),M=y((0,i.useState)(null),2),R=M[0],B=M[1],z=y((0,i.useState)(null),2),F=z[0],U=z[1],Z=y((0,i.useState)(null),2),G=Z[0],q=Z[1],V=(0,u.K)(),W=V.renewSubscription,H=V.isRenewLoading,Q=V.updateSubscription,K=V.isUpdatingSubscription,J=(0,s.$)(),$=J.scheduleDowngrade,X=J.isSchedulingDowngrade,Y=(0,m.B)({billing_cycle:R,billing_currency:G,locale:F}),ee=Y.plans,et=Y.isPlansLoading,er=Y.refetchPlans;(0,i.useEffect)(function(){x?q(x):O&&q(null),j&&U(j),_&&(_===c.ff.month||_===c.ff.year)?B(_):O&&B(D())},[h,D,O]);var en=et||S,ei=ee.length>0&&!et?ee[0].currency:null,eo=I&&(!!x||ei===l.X.BRL.code.toLowerCase()),ea=ei||G,es=y((0,i.useState)(void 0),2),el=es[0],ec=es[1],eu=(0,i.useMemo)(function(){return b({plans:ee,currentPlan:O,isCommunityOnTrial:C,isExpiredTrial:A,isCommunityOnPaidPlan:P})},[ee,O,C,A,P]);(0,i.useEffect)(function(){void 0===el&&eu&&ec(eu)},[el,eu]);var ed=ee.find(function(e){return e.tier===el}),ef=!!(null==E?void 0:E.some(function(e){return"professional_price_test"===e.flag_name})),em="object"==((t=null==L?void 0:L.professional_price_test)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)&&(null==L||null==(r=L.professional_price_test)?void 0:r.type)==="control",ep=ef&&em&&R===c.ff.year?ee.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={annual_discount_amount_with_currency:"professional"===e.tier?"$120":e.annual_discount_amount_with_currency,fetch_discount:"professional"===e.tier?"-10%":e.fetch_discount},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}):ee;return(0,n.jsx)(v.Provider,{value:{plans:ep,isPlansLoading:et,selectedPlanTier:el,selectedPlan:ed,currentPlan:O,isCurrentPlanLoading:S,billingCycle:R,billingCurrency:ea,renewSubscription:W,isRenewLoading:H,shouldRenderBillingCurrency:eo,updateSubscription:Q,isUpdatingSubscription:K,refetchPlans:er,refetchCurrentPlan:k,isListingPlans:en,setSelectedPlanTier:ec,scheduleDowngrade:$,isSchedulingDowngrade:X},children:p})}},650212:function(e,t,r){"use strict";r.d(t,{w:()=>n});var n="settings.billing.upgrade_modal_plan_details_with_proration"},193336:function(e,t,r){"use strict";r.d(t,{c:()=>m});var n=r(275271),i=r(739792),o=r(871160),a=r(650212),s=function(e){var t={};return e.display_prorated_charges_credit_amount&&(t.currentPlanCredit=e.display_prorated_charges_credit_amount),e.display_total_discount&&(t.discountCoupon=e.display_total_discount),e.display_total_due_today&&(t.dueToday=e.display_total_due_today),t},l=function(e,t){if(e.amount&&"number"==typeof e.amount){var r,n=(null==(r=e.currency)?void 0:r.toUpperCase())||"USD";return"$".concat((e.amount/100).toFixed(0)," ").concat(n)}return t?e.annual_base_amount_with_currency||"":e.display_base_monthly_amount||""},c=function(e){var t=e.split(" "),r=t.length>1?t[t.length-1]:"USD",n=parseFloat(t[0].replace(/[$,]/g,""));return{amount:isNaN(n)?0:n,currency:r}},u=function(e,t){var r=Math.round(e);return"$".concat(r.toLocaleString("en-US")," ").concat(t)},d=function(e,t){var r=c(e),n=r.amount,i=r.currency;if(0===n)return{discountAmount:"",finalAmount:e};var o=Math.round(n*t/100);return{discountAmount:"-".concat(u(o,i)),finalAmount:u(n-o,i)}},f=function(e,t){var r=c(e),n=r.amount,i=r.currency;return u(n-c(t.replace("-","")).amount,i)},m=function(e){var t=e.plan,r=e.alternativePlan,c=e.isAnnualPlan,u=e.isCommunityOnTrial,m=e.planCouponId,p=e.isPlanLoading,b=!u&&!!(null==t?void 0:t.id),h=(0,o.t)({new_plan_id:(null==t?void 0:t.id)||0,plan_coupon_id:m,only_ch:!0,enabled:b}),y=h.prorationData,v=h.isProrationLoading,g=h.errorFetchingProration;return{pricing:(0,n.useMemo)(function(){if(!t)return{};var e={};if(y&&!g&&(e=s(y)),!e.annualSavings){var n=c?t:r;if(null==n?void 0:n.annual_discount_amount_with_currency){var o=t.currency.toUpperCase();e.annualSavings=(0,i.t)("".concat(a.w,".pricing_summary.discount_format"),{amount:n.annual_discount_amount_with_currency,currency:o})}}if(e.dueToday||(e.dueToday=l(t,c)),t.is_on_offer){var u=d(l(t,c),25),m=u.discountAmount,p=u.finalAmount;e.discountCoupon=m,e.dueToday&&(null==y?void 0:y.display_total_due_today)?e.dueToday=f(e.dueToday,m):e.dueToday=p}return e.isAnnualPlan=c,e},[t,r,c,y,g]),isLoadingPricing:!!(p||b&&v)}}},339720:function(e,t,r){"use strict";r.d(t,{i:()=>l});var n=r(275271),i=r(793672),o=r(903225),a=function(e){var t=(0,o.TH)();return(0,n.useMemo)(function(){return"true"===(0,i.parse)(t.search,{ignoreQueryPrefix:!0})[e]},[t.search,e])},s=r(441342),l=function(){var e=(0,s.wh)().currentCommunitySettings,t=a("new_billing_page");return!!(null==e?void 0:e.new_billing_details_enabled)||t}},826307:function(e,t,r){"use strict";r.d(t,{B:()=>a});var n=r(131906),i=r(251630),o=r(532244),a=function(e){var t,r=e.billing_cycle,a=e.billing_currency,s=e.locale,l=(0,o.f)(),c=(0,n.useQuery)(["plans",r,a,s,l],function(){return i.Q2.fetchPlans({billing_cycle:r,billing_currency:a,locale:s,isPriceTestingEnabled:l})},{enabled:!!r,cacheTime:6e5,staleTime:6e4}),u=c.data,d=c.isLoading,f=c.error,m=c.refetch,p=c.isRefetching,b="month"===r?"year":"month";return(0,n.useQuery)(["plans",b,a,s,l],function(){return i.Q2.fetchPlans({billing_cycle:b,billing_currency:a,locale:s,isPriceTestingEnabled:l})},{enabled:!!r,cacheTime:6e5,staleTime:6e4}),{plans:null!=(t=null==u?void 0:u.plans)?t:[],isPlansLoading:d,errorFetchingPlans:f,refetchPlans:m,isRefetchingPlans:p}}},190597:function(e,t,r){"use strict";r.d(t,{k:()=>s});var n=r(779774),i=r(721523),o=r(670714),a=r(776810),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.t)(n.Ry()),r=t.page,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["page"]),l=Number(r)||1,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({status:o.MG},s,e),u={page:l,filter:c};"scheduled"===c.status&&(u.sort="scheduled_at");var d=(0,a.D)(u);return{posts:d.posts,postsCount:d.postsCount,isLoadingPosts:d.isLoadingPosts,filter:c,page:l}}},375489:function(e,t,r){"use strict";r.d(t,{s:()=>n});var n=["/settings","/audience/manage","/members/invite","/members/invitation_links","/members/onboarding","/members/bulk_import","/members/edit","/members/profile_fields","/settings/members/activity_logs"]},363833:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(552676),i=r(619803),o=r.n(i),a=r(739792),s=function(e){var t=e.maxWidth,r=e.className,i=e.children;return(0,n.jsx)("main",{"aria-label":(0,a.t)("main_content"),className:o()("settings-app text-dark mx-auto p-4 lg:px-9 lg:py-12",{md:"max-w-4xl",lg:"max-w-[1152px]",xl:"max-w-8xl",none:"max-w-none"}[void 0===t?"md":t]||"",r),children:i})}},971462:function(e,t,r){"use strict";r.d(t,{b:()=>m});var n=r(552676),i=r(778152),o=r(718083),a=r(300864),s=r(289424),l=r(252804),c=r(972171),u=r(441342),d=r(29378);function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var m=function(e){var t=e.pageTitle,r=e.layoutConfigProps,m=e.pageMetaProps,p=e.rightContent,b=e.leftContent,h=e.filters,y=e.headline,v=e.hasBorder,g=e.children,_=window.innerWidth<=768,x=(0,u.wh)().currentCommunity,j=(0,d.Aq)(x);return(0,s.$)(_?".no-header:not(#canvas-header-preview .no-header)":".header__inside:not(#canvas-header-preview .header__inside)"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.S,f({title:t},m)),(0,n.jsx)(a.y,f({disableRightSidebar:!1},r)),!j&&(0,n.jsxs)(l.n,{children:[(0,n.jsx)(o.b,{leftContent:b||(0,n.jsx)(c.y,{children:t}),rightContent:p,filters:h,headline:y,hasBorder:v}),g]})]})}},935985:function(e,t,r){"use strict";r.d(t,{N:()=>c});var n=r(552676),i=r(275271),o=r(739792),a=r(227373),s=r(381636),l=r(191105),c=(0,i.memo)(function(e){var t=e.currentAppearance,r=e.onAppearanceChange;return(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-4 border-b px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(a.g,{children:(0,o.t)("builder_ui.design.appearance.title")}),(0,n.jsx)(l.N,{value:t,onChange:r,name:"site-theme-appearance-toggle"})]}),(0,n.jsx)(s.Z.LabelXs,{color:"text-default",as:"p",children:(0,o.t)("builder_ui.design.appearance.description")})]})});c.displayName="AppearanceToggle"},255632:function(e,t,r){"use strict";r.d(t,{T:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.builder_global_theming_enabled)}},713759:function(e,t,r){"use strict";r.d(t,{D:()=>a});var n=r(131906),i=r(93199),o=["google-fonts"],a=function(){return(0,n.useQuery)({queryKey:o,queryFn:function(){return(0,i.UT)("https://www.googleapis.com/webfonts/v1/webfonts?key=".concat("AIzaSyAf-__UKJbHC8ObQ1UEoTwWemvhnKwBG6U","&sort=popularity"))},select:function(e){var t=e.items.map(function(e){return{family:e.family,variants:e.variants.filter(function(e){var t=/^\d+(italic|bold|black|light|medium|thin|extra|semi|ultra)$/i.test(e),r=/^\d+$/.test(e);return"regular"===e||r&&!t})}}),r=t.map(function(e){return{label:e.family,value:e.family}});return{fonts:t,options:r}},staleTime:6048e5})}},363904:function(e,t,r){"use strict";r.d(t,{G:()=>p});var n=r(552676),i=r(275271),o=r(739792),a=r(579664),s=r(757105),l=r(39905),c=r(767900),u=r(434519),d=r(60878),f=function(e){var t=e.block,r=(0,i.useRef)(null),f=(0,s.dd)(),m=(0,d.pm)(),p=(0,a.Qb)({onSuccess:function(){m.success((0,o.t)("settings.site.pages.builder.save_reusable_block.saved")),f.remove()},onError:function(){m.error((0,o.t)("settings.site.pages.builder.save_reusable_block.error"))}}).mutate;return(0,n.jsxs)(u.u_,{title:(0,o.t)("settings.site.pages.builder.save_reusable_block.title"),isOpen:f.visible,onClose:f.remove,initialFocus:r,children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{size:"md",className:"max-w-screen-md",children:[(0,n.jsxs)(u.u_.Header,{className:"md:pb-5",children:[(0,n.jsx)(u.u_.Title,{size:"sm",children:(0,o.t)("settings.site.pages.builder.save_reusable_block.title")}),(0,n.jsx)(u.u_.HeaderActions,{children:(0,n.jsx)(u.u_.CloseButton,{onClick:f.remove})})]}),(0,n.jsx)(u.u_.Body,{className:"!py-0",children:(0,n.jsx)(c.l,{id:"save-reusable-block-form",onSubmit:function(e){p({name:e.name,block_data:t})},defaultValues:{name:""},className:"h-full pb-0.5",formClassName:"flex flex-col h-full",children:(0,n.jsx)(c.l.Item,{name:"name",label:(0,o.t)("settings.site.pages.builder.save_reusable_block.input"),hideDescription:!0,hideBorder:!0,className:"!p-0",children:(0,n.jsx)(c.l.Input,{name:"name",ref:r})})})}),(0,n.jsxs)(u.u_.Footer,{className:"flex justify-end gap-2",children:[(0,n.jsx)(l.z,{variant:"secondary",onClick:f.remove,children:(0,o.t)("settings.site.pages.builder.save_reusable_block.cancel")}),(0,n.jsx)(l.z,{variant:"circle",type:"submit",form:"save-reusable-block-form",children:(0,o.t)("settings.site.pages.builder.save_reusable_block.save")})]})]})]})},m=s.gk.create(function(e){var t=e.block;return(0,n.jsx)(f,{block:t})}),p=function(){return(0,s.dd)(m)}},178797:function(e,t,r){"use strict";r.d(t,{j:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.builder_custom_themes_enabled)}},146103:function(e,t,r){"use strict";r.d(t,{X:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.reusable_blocks_enabled)}},411291:function(e,t,r){"use strict";r.d(t,{LZ:()=>s,ON:()=>l,qt:()=>c});var n=r(131906),i=r(93199),o=r(698173);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=["settings","site","pages"],l=function(e){return((function(e){if(Array.isArray(e))return a(e)})(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([String(e)])},c=function(e){var t=(0,n.useQuery)(l(e),function(){return(0,i.UT)(o.a.settings.sites.pages.show({pageId:e.toString()}))});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({page:t.data},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["data"]))}},494236:function(e,t,r){"use strict";r.d(t,{L:()=>u,i:()=>d});var n=r(275271),i=r(131906),o=r(93199),a=r(698173),s=r(411291);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=20,d=function(e){var t,r,d,f,m,p=e.perPage,b=void 0===p?u:p,h=e.initialPage,y=void 0===h?1:h,v=e.query,g=void 0===v?"":v,_=e.status,x=e.options,j=(0,i.useInfiniteQuery)(((function(e){if(Array.isArray(e))return l(e)})(t=s.LZ)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{perPage:b,query:g}]),function(e){var t=e.pageParam;return(0,o.UT)(a.a.settings.sites.pages.index({params:c({page:void 0===t?y:t,per_page:b,query:g},_?{status:_}:{})}))},c({getNextPageParam:function(e){return(null==e?void 0:e.has_next_page)?e.page+1:void 0}},void 0===x?{}:x)),w=j.data,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(j,["data"]),S=(0,n.useMemo)(function(){var e;return null!=(e=null==w?void 0:w.pages)?e:[]},[null==w?void 0:w.pages]);return c({data:w,totalRecords:null!=(f=null==(r=S[0])?void 0:r.count)?f:0,pageSize:null!=(m=null==(d=S[0])?void 0:d.per_page)?m:b},O)}},706439:function(e,t,r){"use strict";r.d(t,{s:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.sites_enabled)}},118340:function(e,t,r){"use strict";r.d(t,{$:()=>l});var n=r(131906),i=r(739792),o=r(956018),a=r(441342),s=r(60878),l=function(e){var t=e.space,r=(0,s.pm)(),l=r.error,c=r.success,u=(0,a.wh)().currentUser;return{mutateChatTranscript:(0,n.useMutation)(function(e){return o.r.chatTranscript({id:null==t?void 0:t.id,params:{time_frame:e}})},{onSuccess:function(){c((0,i.t)("settings.spaces.chat_export.success",{name:null==t?void 0:t.name,email:null==u?void 0:u.email}))},onError:function(){return l((0,i.t)("settings.spaces.chat_export.error"))}}).mutate}}},929312:function(e,t,r){"use strict";r.d(t,{V:()=>C});var n=r(552676),i=r(275271),o=r(240507),a=r.n(o),s=(r(999623),r(367367),r(227851)),l=r(739792),c=(r(917435),r(552634)),u=(r(722705),r(394343)),d=r(244444),f=r(947532),m=r(751169),p=r(388894);r(763647);r(203178),r(565510),r(725076),r(132309);var b=r(874709),h=r(619803),y=r.n(h),v=r(311947),g=r(957363),_=r(943544),x=r(380171),j=r(524330),w=r(381636),O=(r(134511),r(334245),r(932699)),S=r(912369),k=r(441342),N=r(779869),P=r(439788);a().object,a().number,r(280466);var C=function(e){var t=e.actionType,r=e.apiParams,n=c.U0.find(function(e){return e.value===t});return n&&"getActionTitle"in n?n.getActionTitle(r):(0,l.t)("settings.workflows.view.actions.".concat(t,".title"),{defaultValue:(0,l.t)("settings.workflows.form.add_an_action")})};a().bool,a().func,a().func},134511:function(e,t,r){"use strict";r.d(t,{B:()=>a,t:()=>s});var n=r(552676),i=r(275271),o=(0,i.createContext)(null);o.displayName="CurrentActionContext";var a=function(){var e=(0,i.useContext)(o);if(!e)throw Error("useCurrentAction must be used within a Action");return e},s=function(e){var t=e.action,r=e.index,i=void 0===r?0:r,a=e.children,s=e.isViewOnlyMode,l="actions.".concat(i),c="".concat(l,".api_params"),u="string"==typeof(null==t?void 0:t.id)&&!t.id.startsWith("action");return(0,n.jsx)(o.Provider,{value:{action:t,index:i,isSaved:u,paramsPath:c,path:l,isViewOnlyMode:void 0!==s&&s},children:a})}},334245:function(e,t,r){"use strict";r.d(t,{Z:()=>g});var n=r(552676),i=r(739792),o=r(966570),a=r(722705),s=r(428281),l=r(132309),c=r(134511),u=r(280466),d=r(462950),f=r(886862),m=r(283235);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var b=function(e){var t,r,n=(0,f.r)(),i=n.areMarketingSettingsAvailable,o=n.isLoading,a=(0,d.Z)(),s=(0,m.q)(null!=(r=null==e||null==(t=e.api_params)?void 0:t.broadcast_id)?r:null).onUpsert;return{handleEmailActionContinue:function(e){var t,r=e.continueAction;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!i)return[3,3];return[4,s()];case 1:return e.sent(),[4,r()];case 2:return e.sent(),[3,5];case 3:return[4,a.show({onSuccess:function(){r()}})];case 4:e.sent(),e.label=5;case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()},isLoadingMarketingSettings:o}};function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})}}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}let g=function(e){var t,r=e.onSubmit,d=e.onSuccess,f=(0,o.Ve)().setActionNodeUpdateParams,m=(0,u.o)(),p=m.saveActions,h=m.isSavingActions,g=(0,c.B)(),_=g.action,x=g.path,j=(0,l.l)(x),w=j.value,O=j.revalidate,S=j.hasValue,k=b(_),N=k.handleEmailActionContinue,P=k.isLoadingMarketingSettings,C=w.action_type;t=h?(0,i.t)("settings.workflows.form.saving"):(0,i.t)("settings.workflows.form.continue");var A=C===a.Cz.value;return(0,n.jsx)(s.f,{disabled:h||!S||A&&P,onClick:function(){return y(function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,O()];case 1:if(!t.sent())return[2];if(f({nodeId:w.id,isUpdating:!0}),e=function(){return y(function(){return v(this,function(e){switch(e.label){case 0:return[4,p(d)];case 1:return e.sent(),null==r||r(),[2]}})})()},!A)return[3,3];return[4,N({continueAction:e})];case 2:return t.sent(),[3,5];case 3:return[4,e()];case 4:t.sent(),t.label=5;case 5:return f({nodeId:"",isUpdating:!1}),[2]}})})()},children:t})}},999623:function(e,t,r){"use strict";r.d(t,{Lz:()=>u});var n=r(552676),i=r(739792),o=r(757105),a=r(963549),s="settings.workflows.edit.confirm_delete_action_modal",l=function(e){var t=e.onConfirm,r=e.onCancel,l=e.disabled,c=(0,o.dd)();return(0,n.jsx)(a.c,{isOpen:c.visible,onClose:c.hide,confirmVariant:"danger",confirmText:(0,i.t)("".concat(s,".confirm_text")),title:(0,i.t)("".concat(s,".title")),cancelText:(0,i.t)("".concat(s,".cancel_text")),onConfirm:t,onCancel:r,disabled:void 0!==l&&l,children:(0,i.t)("".concat(s,".body"))})},c=o.gk.create(function(e){var t=e.onConfirm,r=e.onCancel,i=e.disabled;return(0,n.jsx)(l,{onConfirm:t,onCancel:r,disabled:void 0!==i&&i})}),u=function(){return(0,o.dd)(c)}},947532:function(e,t,r){"use strict";r.d(t,{B2:()=>n.B,ol:()=>i.o}),r(552676),r(275271),r(665144),r(384991),r(929312);var n=r(134511),i=r(280466)},130170:function(e,t,r){"use strict";r.d(t,{a:()=>s,q:()=>l});var n=r(932699),i=r(227851),o=r(67933),a=r(523527),s="actions",l=function(){var e=(0,i.Gc)(),t=e.watch,r=e.formState,l=r.dirtyFields,c=r.touchedFields,u=t(s,[]),d=u.some(function(e,t){var r="".concat(s,"[").concat(t,"]"),i=(0,n.get)(l,r,null);return(0,a.p)(i)}),f=u.some(function(e,t){var r="".concat(s,"[").concat(t,"]"),i=(0,n.get)(c,r,null);return(0,a.p)(i)}),m=u.every(function(e){return(0,o.a)(e)}),p=u.every(function(e){return(0,n.isString)(null==e?void 0:e.id)&&!e.id.startsWith("action")});return{doesActionhasServerId:function(e){return(0,n.isString)(null==e?void 0:e.id)&&!e.id.startsWith("action")},areSomeActionsDirty:d,areSomeActionsTouched:f,areAllActionsFilled:m,areAllActionsWithServerIds:p,areAllActionsSaved:m&&!d&&p}}},280466:function(e,t,r){"use strict";r.d(t,{o:()=>Z});var n=r(275271),i=r(215385),o=r(850362),a=r(227851),s=r(131906),l=r(251630),c=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,(0,a.Gc)().watch)("id"),i=(0,s.useQueryClient)(),o=(0,l.WX)();return(0,s.useMutation)(function(e){return o.deleteAction({workflowId:n,id:e})},(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),t=t={onSuccess:function(e,t,o){var a;i.invalidateQueries(["workflows",n]),null==(a=r.onSuccess)||a.call(r,e,t,o)}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))},u=r(66964),d=r(541378),f=r(874052),m=r(736913);function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h=function(e){return b({action_type:e.action_type,api_params:e.api_params,community_segment_id:e.community_segment_id},e.id&&!e.id.startsWith("action")&&{id:e.id})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,a.Gc)().watch)("id"),r=(0,l.WX)(),n=function(e){var t,n=e.workflowId,i=e.actions;return(t=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:return[4,Promise.all(i.map(f.z))];case 1:return e=o.sent(),[4,(0,m.Cw)({workflowId:n})];case 2:return o.sent(),t=e.map(h),[4,r.upsertActions({workflowId:n,body:{actions:t}})];case 3:var a,s;return[2,(a=o.sent(),s=e,a.map(function(e){var t,r,n=e.community_segment_id;if(!n)return e;var i=s.find(function(e){return e.community_segment_id===n});return i?(t=b({},e),r=r={rules:i.rules},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t):e}))]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,s.useMutation)(function(e){return n({workflowId:t,actions:e})},e)},v=r(932699),g=r(392042),_=r.n(g),x=r(739792),j=r(670216),w=r(906082),O=r(912369),S=r(441342),k=r(384991),N=r(779869),P=r(60878),C=r(584555),A=r(67933),I=r(130170);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E={id:"0"},L=function(){var e=(0,(0,a.Gc)().watch)(I.a,[]).map(function(e,t){return{id:(null==e?void 0:e.id)||t+1}});return{itemsIds:[E].concat(function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),actionsIds:e}};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function R(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){M(o,n,i,a,s,"next",e)}function s(e){M(o,n,i,a,s,"throw",e)}a(void 0)})}}function B(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function z(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}function U(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Z=function(){var e,t=(e=(0,n.useState)(!0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||F(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],s=t[1],l=(0,k.d)(),f=l.onCloseItemAndOpenNext,m=l.setActiveItemId,p=(0,P.pm)(),b=(0,i.hp)(),h=(0,a.Gc)(),g=h.watch,T=h.setError,E=h.trigger,D=h.setValue,M=h.resetField,Z=h.formState,G=L(),q=G.actionsIds,V=G.itemsIds,W=(0,I.q)(),H=W.doesActionhasServerId,Q=W.areSomeActionsDirty,K=W.areSomeActionsTouched,J=W.areAllActionsFilled,$=W.areAllActionsWithServerIds,X=W.areAllActionsSaved,Y=Z.errors,ee=Z.defaultValues,et=g(I.a,[]),er=et.length>0,en=Object.keys(Y).length>0,ei=(0,a.Dq)({name:I.a}),eo=ei.remove,ea=ei.replace,es=(0,o.D)(),el=es.status,ec=es.id,eu=(0,u.m)({workflowId:ec}).refetch,ed=(0,S.wh)().currentCommunity,ef=null==ed?void 0:ed.current_plan_tier,em=(0,N.w)(),ep=(0,S.wh)().refetch,eb=function(e){var t,r;em.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,j.h)(e)&&{planTier:(0,w.gq)(ef)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,j.w)(e),source:(0,O.yf)(),onSuccess:function(){return R(function(){return U(this,function(e){switch(e.label){case 0:return[4,ep()];case 1:return e.sent(),[2]}})})()},successButtonLabel:(0,x.t)("settings.workflows.upgrade_modal.activate_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};(0,n.useEffect)(function(){r&&!er&&(s(!1),ea(null==ee?void 0:ee.actions))},[null==ee?void 0:ee.actions,er,r,ea]);var eh=c(),ey=eh.mutate,ev=eh.isLoading,eg=(0,d.H)(),e_=eg.mutateAsync,ex=eg.isLoading,ej=eg.isError,ew=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return R(function(){var r;return U(this,function(n){switch(n.label){case 0:ea(r=e.map(function(e){return(0,v.omit)(e,"errors")})),M(I.a,{defaultValue:r}),_()(t)?t():f(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eu()];case 2:return n.sent(),[3,4];case 3:return console.error(n.sent()),[3,4];case 4:return[2]}})})()},eO=function(e){var t,r;return(((null==e||null==(r=e.body)||null==(t=r.data)?void 0:t.actions)||[]).forEach(function(e,t){for(var r in e)T("".concat(I.a,"[").concat(t,"].").concat(r),{type:"server",message:e[r]})}),(0,j.h)(e)||(0,j.w)(e))?eb(e):p.error(e.message)},eS=y({onSuccess:ew,onError:eO}),ek=eS.mutateAsync,eN=eS.isLoading,eP=eS.isError,eC=function(e,t){var r;ea(e),M(I.a,{defaultValue:e}),m(null==(r=e[t])?void 0:r.id)};return{actionsIds:q,isFirstRender:r,addActionAfterPosition:function(e){var t=e.index,r=(0,C.Ep)(),n=g(I.a,[]);eC(z(n.slice(0,t+1)).concat([r],z(n.slice(t+1))),t+1)},addActionAtStart:function(){eC([(0,C.Ep)()].concat(z(g(I.a,[]))),0)},formActions:et,hasActions:er,hasErrors:en,isActionError:ej,doesActionhasServerId:H,isActionsError:eP,isSavingActions:eN,isUpdatingAction:ex,itemsIds:V,isActionDeleting:ev,removeActionAtPosition:function(e){return R(function(){var t,r,n,i;return U(this,function(o){switch(o.label){case 0:if(o.trys.push([0,4,,5]),r=H(t=g(I.a,[])[e]),eo(e),n=g(I.a,[]),M(I.a,{defaultValue:n}),!r)return[2];if(ey(t.id),0!==n.length||el!==C.qN.ACTIVE)return[3,3];return D("status",C.qN.INACTIVE),[4,eu()];case 1:return o.sent(),[4,b.show({i18nBase:"settings.workflows.edit.incomplete_workflow_no_actions_modal",onAction:function(){b.hide()}})];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:return console.error(i=o.sent()),p.error(B(i,Error)?i.message:String(i)),[3,5];case 5:return[2]}})})()},saveAction:function(e){var t=e.path,r=e.action,n=e.skipOpenNext,i=void 0!==n&&n;return R(function(){var e,n;return U(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e_(r)];case 1:return(D(t,e=o.sent()),M(t,{defaultValue:e}),i&&e&&(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&"id"in e)?m(e.id):f(),eu(),[3,3];case 2:return console.error(n=o.sent()),p.error(B(n,Error)?n.message:String(n)),[3,3];case 3:return[2]}})})()},saveActions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.noop;return R(function(){var t;return U(this,function(r){switch(r.label){case 0:return[4,E(I.a)];case 1:if(t=r.sent(),!J)return et.forEach(function(e,t){(0,A.a)(e)||T("actions[".concat(t,"]"),{type:"manual",message:(0,x.t)("settings.workflows.form.step_incomplete")})}),[2];if(!t||!J)return[2];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,ek(g(I.a)||[])];case 3:return ew(r.sent(),e),[3,5];case 4:return eO(r.sent()),[3,5];case 5:return[2]}})})()},areAllActionsFilled:J,areSomeActionsDirty:Q,areSomeActionsTouched:K,areAllActionsWithServerIds:$,areAllActionsSaved:X}}},237581:function(e,t,r){"use strict";r.d(t,{I:()=>O});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(227851),l=r(380171),c=r(381636),u=r(767900),d=r(800625),f=r(780754),m=r(947532),p=r(758269),b="ensure_one",h="allow_none",y=[{text:(0,i.t)("settings.workflows.form.ensure_at_least_one_topic_enabled"),value:b},{text:(0,i.t)("settings.workflows.form.ai_agents_edit_topics.allow_no_match"),value:h}],v=r(131906),g=r(93199),_=r(698173),x=r(86388),j=r(547144),w=r(441342),O={label:(0,i.t)("settings.workflows.form.actions.ai_agents_edit_topics"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_edit_topics"),value:"ai_agents_edit_topics",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-topics",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t=(0,m.B2)(),r=t.paramsPath,o=t.isViewOnlyMode,v=(0,s.Gc)(),g=v.watch,_=v.setValue,x=null==(e=g("".concat(r,".ensure_at_least_one")))||e;return(0,p.h)("".concat(r,".excluded_topic_ids"),[]),(0,p.h)("".concat(r,".ensure_at_least_one"),!0),(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(a.JO,{type:"16-ai-action",size:16,className:"mt-0.5 shrink-0"}),(0,n.jsx)(c.Z.BodySm,{children:(0,i.t)("settings.workflows.form.ai_agents_edit_topics.description")})]}),(0,n.jsx)(u.l.Item,{name:"".concat(r,".excluded_topic_ids"),hideDescription:!0,hideBorder:!0,rules:{required:!1},label:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.ai_agents_edit_topics.exclude_topics")}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.view.actions.ai_agents_edit_topics.tooltip"),className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),children:(0,n.jsx)(f.w,{name:"".concat(r,".excluded_topic_ids"),containerClassName:"bg-primary border-primary rounded-md border",creatable:!1,deletable:!o})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.assignment_mode")}),(0,n.jsx)(d.P,{value:x?b:h,onChange:function(e){var t=e.value===b;_("".concat(r,".ensure_at_least_one"),t),_("".concat(r,".allow_no_match"),!t)},data:y,name:"".concat(r,".ensure_at_least_one")})]})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l,u,d,f,m=e.log,p=null!=(d=null==(t=m.message.response_details)?void 0:t.body)?d:{},b=p.space_slug,h=p.post_slug,y=(null==(o=m.message.request_details)||null==(r=o.body)?void 0:r.excluded_topic_ids)||[],w=null==(f=null==(s=m.message.request_details)||null==(a=s.body)?void 0:a.ensure_at_least_one)||f,O=(0,v.useQuery)({queryKey:["workflows","topics"],staleTime:6e5,queryFn:function(){return(0,g.UT)(j.av.settings.topics.index({params:{per_page:250}}))}}).data,S=((null==O?void 0:O.records)||[]).filter(function(e){return y.includes(e.id)}),k=(0,v.useQuery)({queryKey:["posts",null==(u=m.message.response_details)||null==(l=u.body)?void 0:l.id],queryFn:function(){return(0,g.UT)(_.a.posts.show({postSlug:h,spaceSlug:b}))},retry:!1}),N=k.data,P=k.isLoading;return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:N?(0,n.jsx)("a",{href:"/c/".concat(b,"/").concat(h),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(c.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(P?"post_loading":"post_not_found"))})})]}),S.length>0&&(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.excluded_topics")})}),(0,n.jsx)("div",{className:"w-3/4 flex flex-wrap gap-2",children:S.map(function(e){return(0,n.jsx)(x.V,{label:e.name,variant:"secondary"},e.id)})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.assignment_mode")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(c.Z.LabelSm,{children:w?(0,i.t)("settings.workflows.form.ensure_at_least_one_topic_enabled"):(0,i.t)("settings.workflows.form.skip_assignment_if_no_clear_matches")})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY,released:function(){var e=(0,w.wh)().currentCommunitySettings;return!!(null==e?void 0:e.ai_workflows_edit_topics_enabled)}}},997346:function(e,t,r){"use strict";r.d(t,{o:()=>b});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(227851),l=r(381636),c=r(767900),u=r(947532),d=r(758269),f=r(131906),m=r(93199),p=r(698173),b={label:(0,i.t)("settings.workflows.form.actions.ai_agents_hide_post_from_featured_areas"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_hide_post_from_featured_areas"),value:"ai_agents_hide_post_from_featured_areas",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-hide",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,u.B2)().paramsPath,t=(0,s.Gc)().setValue;return(0,d.h)("".concat(e,".close_comments"),!1),(0,d.h)("".concat(e,".hide_metadata"),!1),(0,d.h)("".concat(e,".hide_post_from_featured_areas"),!1),(0,n.jsx)("div",{className:"flex flex-col gap-9",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.what_do_you_want_to_do")})}),(0,n.jsx)(c.l.Item,{name:"".concat(e,".close_comments"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small",name:"".concat(e,".close_comments"),onChange:function(r){return t("".concat(e,".close_comments"),r.target.value)}})}),(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.close_comments")})]})}),(0,n.jsx)(c.l.Item,{name:"".concat(e,".hide_post_from_featured_areas"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small",name:"".concat(e,".hide_post_from_featured_areas"),onChange:function(r){return t("".concat(e,".hide_post_from_featured_areas"),r.target.value)}})}),(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.hide_post_from_featured_areas")})]})}),(0,n.jsx)(c.l.Item,{name:"".concat(e,".hide_metadata"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small",name:"".concat(e,".hide_metadata"),onChange:function(r){return t("".concat(e,".hide_metadata"),r.target.value)}})}),(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.hide_metadata")})]})})]})})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,c,u,d=e.log,b=null!=(c=null==(t=d.message.response_details)?void 0:t.body)?c:{},h=b.space_slug,y=b.post_slug,v=(0,f.useQuery)({queryKey:["posts",null!=(u=null==(o=d.message.response_details)||null==(r=o.body)?void 0:r.post_id)?u:null],queryFn:function(){return(0,m.UT)(p.a.posts.show({postSlug:y,spaceSlug:h}))},retry:!1,enabled:!!(null==(s=d.message.response_details)||null==(a=s.body)?void 0:a.post_id)}),g=v.data,_=v.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:g?(0,n.jsx)("a",{href:"/c/".concat(h,"/").concat(y),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(l.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(_?"post_loading":"post_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},209905:function(e,t,r){"use strict";r.d(t,{w:()=>_});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(227851),l=r(380171),c=r(863034),u=r(381636),d=r(299725),f=r(767900),m=r(947532),p=r(758269),b=Array.from({length:10},function(e,t){return{text:"".concat(100-10*t,"%"),value:100-10*t}}),h=r(131906),y=r(93199),v=r(698173),g=r(67093),_={label:(0,i.t)("settings.workflows.form.actions.ai_agents_post_comment"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_post_comment"),value:"ai_agents_post_comment",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-action",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,m.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,h=r("".concat(e,".community_bot_profile_id")),y=r("".concat(e,".response_rate")),v=r("".concat(e,".additional_instructions"));return(0,p.h)("".concat(e,".community_bot_profile_id"),null),(0,p.h)("".concat(e,".response_rate"),100),(0,p.h)("".concat(e,".additional_instructions"),""),(0,p.h)("".concat(e,".skip_if_answered"),!0),(0,n.jsxs)("div",{className:"workflows-form-post-comment flex flex-col gap-5",children:[(0,n.jsx)(f.l.Item,{name:"".concat(e,".community_bot_profile_id"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.agent"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(c.E,{selectedId:h,setValue:function(t){return o("".concat(e,".community_bot_profile_id"),t)},placeholderKey:"settings.workflows.form.select_agent",notFoundKey:"settings.workflows.form.no_agents_found",enabledStatus:!0})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".response_rate"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{className:"mb-0.5 flex items-center gap-[3px]",children:[(0,n.jsxs)("span",{children:[(0,i.t)("settings.workflows.form.response_rate")," "]}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.response_rate_description"),className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(f.l.Select,{value:null!=y?y:100,onChange:function(t){return o("".concat(e,".response_rate"),Number(t.value))},data:b,name:"".concat(e,".response_rate")})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".additional_instructions"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mb-0.5 mr-1"}),(0,n.jsx)("span",{children:(0,i.t)("settings.workflows.form.additional_instructions")})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.additional_instructions_placeholder"),rules:{required:!1},children:(0,n.jsx)(d.t,{value:v,onChange:function(t){return o("".concat(e,".additional_instructions"),t.target.value)},name:"".concat(e,".additional_instructions"),rows:8,maxLength:1500})}),(0,n.jsx)(f.l.Item,{name:"".concat(e,".skip_if_answered"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(f.l.ToggleSwitch,{variant:"small",name:"".concat(e,".skip_if_answered"),onChange:function(t){return o("".concat(e,".skip_if_answered"),t.target.value)}})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.skip_if_answered")}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.skip_if_answered_tooltip"),arrow:!1,className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",className:"ml-0.5",size:16,useWithStrokeCurrentColor:!0})})]})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o=e.body,a=e.log,s=o.community_bot_profile_id,l=(0,h.useQuery)({queryKey:["comments",null==(r=a.message.response_details)||null==(t=r.body)?void 0:t.id],queryFn:function(){return(0,y.UT)(v.a.comments.show({id:a.message.response_details.body.id}))},retry:!1}),c=l.data,d=l.isLoading;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.ai_agent")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(g.t,{communityBotProfileId:s})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment")})}),(0,n.jsx)("div",{className:"w-3/4",children:c?(0,n.jsx)("a",{href:c.show_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment_link")}):(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(d?"comment_loading":"comment_not_found"))})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},784260:function(e,t,r){"use strict";r.d(t,{l:()=>y});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(227851),l=r(380171),c=r(299725),u=r(767900),d=r(947532),f=r(758269),m=r(131906),p=r(93199),b=r(698173),h=r(381636),y={label:(0,i.t)("settings.workflows.form.actions.ai_agents_rename_post_title"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_rename_post_title"),value:"ai_agents_rename_post_title",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-rename",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,m=r("".concat(e,".instructions"));return(0,f.h)("".concat(e,".instructions"),""),(0,n.jsx)("div",{className:"workflows-form-rename-post-title flex flex-col gap-5",children:(0,n.jsx)(u.l.Item,{name:"".concat(e,".instructions"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{className:"mb-0.5 flex items-center gap-[3px]",children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mr-1"}),(0,n.jsxs)("span",{children:[(0,i.t)("settings.workflows.form.instructions")," "]}),(0,n.jsx)(l.T,{content:(0,i.t)("settings.workflows.form.ai_rename_post_instructions_description"),className:"flex",children:(0,n.jsx)(a.JO,{type:"16-question-mark",size:16,useWithStrokeCurrentColor:!0})})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.ai_rename_post_instructions_placeholder"),rules:{required:!1},children:(0,n.jsx)(c.t,{value:m,onChange:function(t){return o("".concat(e,".instructions"),t.target.value)},name:"".concat(e,".instructions"),rows:8,maxLength:500})})})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l=e.log,c=null!=(a=null==(t=l.message.response_details)?void 0:t.body)?a:{},u=c.space_slug,d=c.post_slug,f=(0,m.useQuery)({queryKey:["posts",null!=(s=null==(o=l.message.response_details)||null==(r=o.body)?void 0:r.id)?s:null],queryFn:function(){return(0,p.UT)(b.a.posts.show({postSlug:d,spaceSlug:u}))},retry:!1}),y=f.data,v=f.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(h.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:y?(0,n.jsx)("a",{href:"/c/".concat(u,"/").concat(d),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(h.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(v?"post_loading":"post_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},638998:function(e,t,r){"use strict";r.d(t,{c:()=>g});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(275271),l=r(565439),c=r.n(l),u=r(227851),d=r(381636),f=r(299725),m=r(767900),p=r(947532),b=r(758269),h=r(131906),y=r(93199),v=r(698173),g={label:(0,i.t)("settings.workflows.form.actions.ai_agents_report_comment"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_report_comment"),value:"ai_agents_report_comment",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-report",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,p.B2)(),t=e.paramsPath,r=e.isSaved,o=(0,u.Gc)(),a=o.setValue,l=o.getValues,h=o.formState;(0,b.h)("".concat(t,".reported_reason_body"),""),(0,s.useEffect)(function(){if(!r){var e=l("".concat(t,".hide_until_approved")),n=!!c()(h.touchedFields,"".concat(t,".hide_until_approved")),i=!!c()(h.dirtyFields,"".concat(t,".hide_until_approved"));null!=e&&!1!==e||n||i||a("".concat(t,".hide_until_approved"),!0,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})}},[r,l,a,t,h.dirtyFields,h.touchedFields]);var y=l("".concat(t,".reported_reason_body"));return(0,n.jsxs)("div",{className:"flex flex-col gap-[21px]",children:[(0,n.jsx)(m.l.Item,{name:"".concat(t,".hide_until_approved"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(m.l.ToggleSwitch,{variant:"small",name:"".concat(t,".hide_until_approved")})}),(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.flag_comment_for_review_and_hide_until_approved")})]})}),(0,n.jsx)(m.l.Item,{name:"".concat(t,".reported_reason_body"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.explanation"),labelClassName:"!mb-2 !text-sm",className:"!py-0",rules:{required:!1},placeholder:(0,i.t)("settings.workflows.form.ai_agents_report_comment_placeholder"),children:(0,n.jsx)(f.t,{value:y,onChange:function(e){return a("".concat(t,".reported_reason_body"),e.target.value)},name:"".concat(t,".reported_reason_body"),rows:8,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o=e.log,a=(0,h.useQuery)({queryKey:["comments",null==(r=o.message.response_details)||null==(t=r.body)?void 0:t.comment_id],queryFn:function(){return(0,y.UT)(v.a.comments.show({id:o.message.response_details.body.comment_id}))},retry:!1}),s=a.data,l=a.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment")})}),(0,n.jsx)("div",{className:"w-3/4",children:s?(0,n.jsx)("a",{href:s.show_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.comment_link")}):(0,n.jsx)(d.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(l?"comment_loading":"comment_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},844123:function(e,t,r){"use strict";r.d(t,{m:()=>g});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(275271),l=r(565439),c=r.n(l),u=r(227851),d=r(381636),f=r(299725),m=r(767900),p=r(947532),b=r(758269),h=r(131906),y=r(93199),v=r(698173),g={label:(0,i.t)("settings.workflows.form.actions.ai_agents_report_post"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_report_post"),value:"ai_agents_report_post",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-report",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,p.B2)(),t=e.paramsPath,r=e.isSaved,o=(0,u.Gc)(),a=o.setValue,l=o.getValues,h=o.formState;(0,b.h)("".concat(t,".reported_reason_body"),""),(0,s.useEffect)(function(){if(!r){var e=l("".concat(t,".hide_until_approved")),n=!!c()(h.touchedFields,"".concat(t,".hide_until_approved")),i=!!c()(h.dirtyFields,"".concat(t,".hide_until_approved"));null!=e&&!1!==e||n||i||a("".concat(t,".hide_until_approved"),!0,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})}},[r,l,a,t,h.dirtyFields,h.touchedFields]);var y=l("".concat(t,".reported_reason_body"));return(0,n.jsxs)("div",{className:"flex flex-col gap-[21px]",children:[(0,n.jsx)(m.l.Item,{name:"".concat(t,".hide_until_approved"),hideBorder:!0,fullWidth:!0,hideDescription:!0,hideLabel:!0,className:"!py-0",rules:{required:!1},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4",children:(0,n.jsx)(m.l.ToggleSwitch,{variant:"small",name:"".concat(t,".hide_until_approved")})}),(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.flag_post_for_review_and_hide_until_approved")})]})}),(0,n.jsx)(m.l.Item,{name:"".concat(t,".reported_reason_body"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.explanation"),labelClassName:"!mb-2 !text-sm",className:"!py-0",rules:{required:!1},placeholder:(0,i.t)("settings.workflows.form.ai_agents_report_post_placeholder"),children:(0,n.jsx)(f.t,{value:y,onChange:function(e){return a("".concat(t,".reported_reason_body"),e.target.value)},name:"".concat(t,".reported_reason_body"),rows:8,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s,l=e.log,c=null!=(a=null==(t=l.message.response_details)?void 0:t.body)?a:{},u=c.space_slug,f=c.post_slug,m=(0,h.useQuery)({queryKey:["posts",null!=(s=null==(o=l.message.response_details)||null==(r=o.body)?void 0:r.id)?s:null],queryFn:function(){return(0,y.UT)(v.a.posts.show({postSlug:f,spaceSlug:u}))},retry:!1}),p=m.data,b=m.isLoading;return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(d.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post")})}),(0,n.jsx)("div",{className:"w-3/4",children:p?(0,n.jsx)("a",{href:"/c/".concat(u,"/").concat(f),target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.post_link")}):(0,n.jsx)(d.Z.LabelSm,{children:(0,i.t)("settings.workflows.action_messages.ai_agents.".concat(b?"post_loading":"post_not_found"))})})]})})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},736855:function(e,t,r){"use strict";r.d(t,{M:()=>b});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(227851),l=r(863034),c=r(299725),u=r(767900),d=r(947532),f=r(758269),m=r(381636),p=r(67093),b={label:(0,i.t)("settings.workflows.form.actions.ai_agents_send_dm"),textLabel:(0,i.t)("settings.workflows.form.actions.ai_agents_send_dm"),value:"ai_agents_send_dm",group:(0,i.t)("settings.workflows.form.action_groups.ai_agents"),leftAddon:(0,n.jsx)(a.JO,{type:"16-ai-send-dm",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.Gc)(),r=t.getValues,o=t.setValue,m=r("".concat(e,".community_bot_profile_id")),p=r("".concat(e,".ai_prompt"));return(0,f.h)("".concat(e,".community_bot_profile_id"),null),(0,f.h)("".concat(e,".ai_prompt"),""),(0,n.jsxs)("div",{className:"workflows-form-ai-agents-send-dm flex flex-col gap-5",children:[(0,n.jsx)(u.l.Item,{name:"".concat(e,".community_bot_profile_id"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.agent"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,n.jsx)(l.E,{selectedId:m,setValue:function(t){return o("".concat(e,".community_bot_profile_id"),t)},placeholderKey:"settings.workflows.form.select_agent",notFoundKey:"settings.workflows.form.no_agents_found",enabledStatus:!0})}),(0,n.jsx)(u.l.Item,{name:"".concat(e,".ai_prompt"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.JO,{type:"20-ai-prompt",size:20,className:"mb-0.5 mr-1"}),(0,n.jsx)("span",{children:(0,i.t)("settings.workflows.form.additional_instructions")})]}),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.ai_prompt_placeholder"),rules:{required:!1},children:(0,n.jsx)(c.t,{value:p,onChange:function(t){return o("".concat(e,".ai_prompt"),t.target.value)},name:"".concat(e,".ai_prompt"),rows:8,maxLength:500})})]})},viewComponent:null,historyDetailViewComponent:function(e){var t,r,o,a,s=e.body,l=e.log,c=s.community_bot_profile_id;return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.ai_agent")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.t,{communityBotProfileId:c})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.ai_agents.chat")})}),(0,n.jsx)("div",{className:"w-3/4",children:(null==(r=l.message.response_details)||null==(t=r.body)?void 0:t.chat_id)&&(0,n.jsx)("a",{href:null==(a=l.message.response_details)||null==(o=a.body)?void 0:o.chat_url,target:"_blank",className:"text-sm",rel:"noopener noreferrer",children:(0,i.t)("settings.workflows.action_messages.ai_agents.chat_link")})})]})]})},icon:"chat",isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},896846:function(e,t,r){"use strict";r.d(t,{P:()=>s});var n=r(552676),i=r(619803),o=r.n(i),a=r(381636),s=Object.assign(function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("flex flex-col gap-6",t),children:r})},{Section:function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("flex flex-col gap-2",t),children:r})},Title:function(e){var t=e.children;return(0,n.jsx)("div",{children:(0,n.jsx)(a.Z.LabelSm,{weight:"semibold",children:t})})}})},839315:function(e,t,r){"use strict";r.d(t,{t:()=>x,I:()=>j});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(275271),l=r(227851),c=r(693723),u=r(691525),d=r(767900),f=r(318943),m=r(381636),p=r(439788),b=r(947532),h="settings.workflows.form.time_delay",y=[{value:"hours",label:(0,i.t)([h,"time_unit_options.hours_label"]),rules:{minValue:1,maxValue:999}},{value:"days",label:(0,i.t)([h,"time_unit_options.days_label"]),rules:{minValue:1,maxValue:365}},{value:"weeks",label:(0,i.t)([h,"time_unit_options.weeks_label"]),rules:{minValue:1,maxValue:52}}],v=r(134870),g=function(e,t){var r=x[t.time_unit]||1,n=t.time_unit_amount*r;return(0,v.w)({dateTime:new Date(new Date(e).getTime()+1e3*n),format:"short_date_at_short_time"})},_={cancelled:{time:function(e){return(0,n.jsx)(m.Z.LabelSm,{children:(0,v.w)({dateTime:new Date(null==e?void 0:e.updated_at),format:"short_date_at_short_time"})})},title:(0,n.jsx)(m.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.cancelled")}),statusTitle:(0,n.jsx)(m.Z.LabelSm,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("settings.workflows.table.result.cancelled")})},in_progress:{time:function(e,t){return(0,n.jsx)(m.Z.LabelSm,{children:(0,n.jsx)("i",{children:g(null==e?void 0:e.created_at,t)})})},title:(0,n.jsx)(m.Z.LabelSm,{weight:"medium",children:(0,n.jsx)("i",{children:(0,i.t)("settings.workflows.view.actions.time_delay.expected_end")})}),statusTitle:(0,n.jsx)(m.Z.LabelSm,{color:"text-messaging-info-blue",children:(0,i.t)("settings.workflows.table.result.in_progress")})},success:{time:function(e){return(0,n.jsx)(m.Z.LabelSm,{children:(0,v.w)({dateTime:new Date(e.updated_at),format:"short_date_at_short_time"})})},title:(0,n.jsx)(m.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.ended")}),statusTitle:(0,n.jsx)(m.Z.LabelSm,{color:"text-v2-success",children:(0,i.t)("settings.workflows.table.result.success")})}},x={hours:3600,days:86400,weeks:604800},j={label:(0,i.t)("settings.workflows.form.actions.time_delay"),value:"time_delay",group:(0,i.t)("settings.workflows.form.action_groups.flow"),leftAddon:(0,n.jsx)(a.JO,{type:"16-workflow-time-delay",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t,r=(0,b.B2)(),v=r.paramsPath,g=r.action,_=(0,b.ol)().doesActionhasServerId,x=(0,l.Gc)(),j=x.watch,w=x.setValue,O=x.clearErrors,S=x.trigger,k=(0,u.wh)().currentCommunitySettings,N=(0,(0,l.Gc)().getValues)("status")===o.qN.DRAFT,P=j("".concat(v,".time_unit")),C=null!=(t=null==(e=y.find(function(e){return e.value===P}))?void 0:e.rules)?t:{minValue:1,maxValue:999},A=C.minValue,I=C.maxValue;return((0,s.useEffect)(function(){P||(w("".concat(v,".time_unit_amount"),1),w("".concat(v,".time_unit"),"days",{shouldValidate:!0}))},[v,w,P]),(0,s.useEffect)(function(){O("".concat(v,".time_unit_amount")),S("".concat(v,".time_unit_amount"))},[P,O,v,S]),!(null==k?void 0:k.edit_time_delays_enabled)&&_(g)&&!N)?(0,n.jsx)(f.v,{className:"flex justify-between !py-3",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(a.JO,{className:"mr-3",type:"20-info",size:20}),(0,n.jsx)(m.Z.LabelSm,{children:(0,i.t)([h,"cannot_edit_time_delay"])})]})}):(0,n.jsxs)("div",{className:"react-form",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:(0,i.t)([h,"time_unit_amount"])}),(0,n.jsxs)("div",{className:"mt-2 flex flex-row gap-5",children:[(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(c.x,{className:"w-full !p-0",name:"".concat(v,".time_unit_amount"),hideLabel:!0,placeholder:(0,i.t)([h,"time_unit_amount_placeholder"]),translationRoot:h,hideDescription:!0,rules:{required:(0,i.t)([h,"errors.time_unit_amount.required"]),min:{value:A,message:(0,i.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:A,end:I})},max:{value:I,message:(0,i.t)([h,"errors.time_unit_amount.enter_a_value_between"],{start:A,end:I})}},children:(0,n.jsx)(d.l.Input,{type:"number",name:"".concat(v,".time_unit_amount"),"data-testid":"time_unit_amount"})})}),(0,n.jsx)("div",{className:"flex flex-1",children:(0,n.jsx)(p.N,{wrapperClassName:"w-full",name:"".concat(v,".time_unit"),label:"",options:y,rules:{required:(0,i.t)([h,"errors.time_unit.required"])}})})]})]})},viewComponent:function(e){var t,r=(e.action||{}).api_params;return(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsxs)("div",{className:"border-dark flex h-[60px] w-[360px] justify-center gap-3 rounded-xl border px-5 py-[18px]",children:[(0,n.jsx)(a.JO,{type:"20-time-delay",size:20,useWithFillCurrentColor:!0,"aria-hidden":!0}),(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:null==(t=j.getActionTitle)?void 0:t.call(j,r)})]})})},isCompactView:!0,compactViewTitlePrefix:(0,n.jsx)(a.JO,{type:"24-workflow-time-delay",size:24,className:"!h-5 !w-5"}),historyDetailViewComponent:function(e){var t,r=e.apiParams,a=e.log,s=e.status,l=_[a.message.status===o.bI.IN_PROGRESS&&s===o.bI.IN_PROGRESS?o.bI.IN_PROGRESS:a.message.status===o.bI.SUCCESS?o.bI.SUCCESS:(null==a?void 0:a.created_at)===(null==a?void 0:a.updated_at)&&(null==a?void 0:a.action)==="task_action_completed"||"cancelled"===a.message.status?"cancelled":"in_progress"],c=(0,v.w)({dateTime:new Date(a.created_at),format:"short_date_at_short_time"});return(0,n.jsxs)("div",{className:"flex flex-col rounded-lg",children:[(0,n.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-1 rounded-t-lg border-b px-6 py-5",children:[(0,n.jsx)(m.Z.LabelMd,{weight:"semibold",children:"".concat((0,i.t)("settings.workflows.view.actions.time_delay.delay")," ").concat(null==(t=j.getActionTitle)?void 0:t.call(j,r))}),l.statusTitle]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.view.actions.time_delay.started")}),(0,n.jsx)(m.Z.LabelSm,{children:c})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[l.title,(0,n.jsx)(m.Z.LabelSm,{children:l.time(a,r)})]})]})]})},getActionTitle:function(e){var t=e.time_unit_amount,r=e.time_unit;return t&&r?(0,i.t)("settings.workflows.view.actions.time_delay.title_with_units",{time_unit_amount:t,time_unit:(0,i.t)("settings.workflows.view.actions.time_delay.options.".concat(r),{count:Number(t)})}):(0,i.t)("settings.workflows.view.actions.time_delay.title")},icon:"clock",isCompactHistoryView:!0,isApplicableToMembersOnly:!1,availablePlanTier:o.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN}},782470:function(e,t,r){"use strict";r.d(t,{s:()=>p});var n=r(552676),i=r(739792),o=r(693723),a=r(947532),s=r(767900),l="settings.workflows.form.award_points",c=r(381636),u=r(896846),d="settings.workflows.view",f=r(584555),m=r(957363),p={label:(0,i.t)("settings.workflows.form.actions.award_points"),value:"award_points",group:(0,i.t)("settings.workflows.form.action_groups.gamification"),leftAddon:(0,n.jsx)(m.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,a.B2)().paramsPath;return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.x,{name:"".concat(e,".points"),hideDescription:!0,label:(0,i.t)([l,"points.label"]),placeholder:(0,i.t)([l,"points.placeholder"]),translationRoot:l,rules:{required:(0,i.t)([l,"errors.points.required"]),min:{value:1,message:(0,i.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})},max:{value:500,message:(0,i.t)([l,"errors.points.enter_a_value_between"],{start:1,end:500})}},children:(0,n.jsx)(s.l.Input,{type:"number",name:"".concat(e,".points"),"data-testid":"points"})}),(0,n.jsx)(o.x,{name:"".concat(e,".reason"),label:(0,i.t)([l,"reason.label"]),hideDescription:!0,placeholder:(0,i.t)([l,"reason.placeholder"]),translationRoot:l,rules:{maxLength:{value:255,message:(0,i.t)([l,"errors.reason.max_length"])}},children:(0,n.jsx)(s.l.Input,{type:"text",name:"".concat(e,".reason"),"data-testid":"reason"})})]})},viewComponent:function(e){var t=(e.action||{}).api_params||{},r=t.points,o=t.reason;return(0,n.jsxs)(u.P,{children:[(0,n.jsxs)(u.P.Section,{children:[(0,n.jsx)(u.P.Title,{children:(0,i.t)([d,"points"])}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:r})})]}),o&&(0,n.jsxs)(u.P.Section,{children:[(0,n.jsx)(u.P.Title,{children:(0,i.t)([d,"reason"])}),(0,n.jsx)("div",{children:(0,n.jsx)(c.Z.LabelSm,{children:o})})]})]})},historyDetailViewComponent:function(e){var t=e.points;return(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.award_points.points")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:t})})]})},icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:f.PQ.HIGHER_TIER_PLAN_ONLY}},722705:function(e,t,r){"use strict";r.d(t,{KY:()=>eR,Ah:()=>eI,TQ:()=>eM,MK:()=>eA,Cz:()=>tu,r1:()=>td,zW:()=>eD});var n,i=r(552676),o=r(739792),a=r(584555),s=r(957363),l=r(275271),c=r(227851),u=r(441342),d=r(767900),f=r(947532),m=r(850362),p=r(227036),b=r(692998),h=r(39905),y=r(751169),v=r(381636),g=r(131906),_=r(251630),x=r(393828),j=r(68167),w=r(873321),O=r(853262),S=r(824553),k=r(13465),N=r(898779),P=r(270600),C=r(649333),A=r(57840),I=r(466564),T=r(796471),E=r(299385),L=r(720760),D=r(891188),M=r(530622),R=r(15696),B=r(140818),z=r(243609),F=r(723634),U=r(787105),Z=r(435354),G=r(603922),q=r(28911),V=r(123836);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return W(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var K="event",J="space",$="space_group",X="member_tag",Y="post",ee=["post","flagged_content"],et=["comment","flagged_content"],er=["paywall","paywall_price","paywall_coupon","currency"],en=(H(n={},j.Zo.value,[K]),H(n,j.PJ.value,[K]),H(n,j.OC.value,[K]),H(n,q.G.value,[K]),H(n,j.BP.value,[K]),H(n,j.Q4.value,[K]),H(n,G.aD.value,[J]),H(n,G.D1.value,[J]),H(n,x.ey.value,[J]),H(n,x.ES.value,[J]),H(n,x.dP.value,[J]),H(n,V._.value,[$]),H(n,V.d.value,[$]),H(n,w.m.value,[X]),H(n,w.E.value,[X]),H(n,Z.dO.value,[Y]),H(n,Z.fT.value,[Y]),H(n,Z.jU.value,ee),H(n,Z.pC.value,ee),H(n,Z.GT.value,ee),H(n,Z.Qw.value,["comment"]),H(n,Z.Uu.value,et),H(n,Z.Fw.value,et),H(n,Z.sj.value,et),H(n,I.u.value,er),H(n,T.H.value,er),H(n,L.I.value,er),H(n,B.t.value,er),H(n,z.j.value,er),H(n,F.Z.value,er),H(n,E.T.value,er),H(n,R.k.value,er),H(n,A.A.value,er),H(n,M.v.value,er),H(n,D._.value,er),H(n,U.j.value,er),H(n,C.x.value,er),H(n,O.z.value,er),H(n,S.k.value,er),H(n,k.O.value,er),H(n,N.R.value,er),H(n,P.E.value,er),n),ei=function(e){var t=e.triggerType,r=en[t]||"",n=Q(["community_member","community"]).concat(Q(r)).filter(Boolean),i=(0,_.WX)();return(0,g.useQuery)(["workflows-fetch-preview-attributes",t],function(){return i.fetchPreviewAttributes({params:{resource_names:n}})})},eo=r(920153),ea=r(664657),es=r(757105),el=r(326120),ec=r(434519),eu=function(e){var t=e.children,r=(0,es.dd)();return(0,i.jsxs)(ec.u_,{title:(0,o.t)("settings.workflows.form.preview_message.modal_title"),isOpen:r.visible,onClose:r.hide,contentPortalId:"",children:[(0,i.jsx)(ec.u_.Overlay,{}),(0,i.jsxs)(ec.u_.Content,{size:"lg",children:[(0,i.jsxs)(ec.u_.Header,{children:[(0,i.jsx)(ec.u_.Title,{className:"text-left",children:(0,o.t)("settings.workflows.form.preview_message.modal_title")}),(0,i.jsx)(ec.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,i.jsx)(ec.u_.CloseButton,{onClick:r.hide})})]}),(0,i.jsxs)(ec.u_.Body,{className:"pt-0",children:[(0,i.jsx)("p",{className:"text-default mb-6 text-sm",children:(0,o.t)("settings.workflows.form.preview_message.modal_description")}),(0,i.jsx)("div",{className:"border-primary mb-6 flex rounded border px-4 py-6",children:t})]})]})]})},ed=r(932699),ef=r(547144),em=function(e){var t=e.communityMemberId,r=e.body,n=e.resourceAttributes,i=(0,_.WX)(),o=(0,g.useQuery)({queryKey:["workflows-fetch-interpolated-preview-message",t,r,n],queryFn:function(){return i.fetchInterpolatedPreviewMessage({body:{rich_text_body:r,mappings:n}})},enabled:!(0,ed.isEmpty)(n)}),a=o.data,s=(void 0===a?{}:a).interpolated_body,l=o.isLoading,c=(0,g.useQuery)({queryKey:[ef.av.communityMembers.show({id:t})],enabled:!!t}),u=c.data;return{isLoadingPreviewMessageBody:l,isLoadingCommunityMember:c.isLoading,interpolatedBody:void 0===s?{}:s,communityMember:u}},ep=function(e){var t=e.body,r=e.communityMemberId,n=e.resourceAttributes,a=e.localSgidToObjectMap,s=em({body:t,communityMemberId:r,resourceAttributes:n}),l=s.interpolatedBody,c=s.isLoadingCommunityMember,u=s.isLoadingPreviewMessageBody,d=s.communityMember;if(c||u||!d)return(0,i.jsx)(eu,{children:(0,i.jsx)(y.a,{})});var f=d.name,m=d.avatar_url;return(0,i.jsxs)(eu,{children:[(0,i.jsx)("div",{className:"px-2",children:(0,i.jsx)(ea.W,{size:"10",src:m,name:f})}),Object.keys(l).length>0&&(0,i.jsxs)("div",{className:"max-w-[calc(100%-3rem)] px-2",children:[(0,i.jsxs)("div",{className:"mb-2 flex items-center gap-x-2",children:[(0,i.jsx)(v.Z.LabelMd,{weight:"semibold",children:f}),(0,i.jsx)(v.Z.LabelXs,{color:"text-light",weight:"medium",children:(0,o.t)("settings.workflows.form.preview_message.placeholder_time")})]}),(0,i.jsx)(el.T,{rich_text_body:{body:l,sgids_to_object_map:void 0===a?{}:a},editable:!1})]})]})},eb=es.gk.create(function(e){return(0,i.jsx)(ep,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}),eh=r(93199),ey=r(301737),ev=function(e){var t=e.triggerType,r=e.shouldSupportTriggerVariables,n=["dynamic_variables",t];return(0,g.useQuery)({queryKey:n,queryFn:function(){return(0,eh.UT)(ey.v.fetchDynamicVariables({params:{trigger_type:t,support_trigger_variables:r}}))}})},eg=function(e,t){return Object.values(e||{}).some(function(e){return(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"?Array.isArray(e)?e.some(function(e){return eg(e,t)}):eg(e,t):"string"==typeof e&&t.test(e)})},e_=function(){var e=(0,c.Gc)(),t=e.watch,r=e.getValues,n=(0,f.B2)().paramsPath,i=(0,es.dd)(eb),o=(0,eo.Z)(),a=r("trigger.trigger_type"),s=ev({triggerType:a,shouldSupportTriggerVariables:o}),l=s.data,u=(void 0===l?{}:l).supported_variables,d=s.isLoading,m=t("".concat(n,".rich_text_body")),p=ei({triggerType:a}),b=p.data,h=p.isSuccess;return{paramsPath:n,triggerType:a,dynamicVariables:void 0===u?[]:u,isLoadingDynamicVariables:d,shouldShowPreviewDmButton:eg(m||{},/{{[^{}]+}}/g)&&h,handlePreviewDmClick:function(){i.show({body:r("".concat(n,".rich_text_body")).body,communityMemberId:r("".concat(n,".from")),localSgidToObjectMap:r("".concat(n,".rich_text_body")).localSgidToObjectMap,resourceAttributes:b})}}},ex=function(){var e=(0,f.B2)().isViewOnlyMode,t=e_(),r=t.paramsPath,n=t.triggerType,a=t.isLoadingDynamicVariables,s=t.dynamicVariables,l=t.shouldShowPreviewDmButton,c=t.handlePreviewDmClick;return a?(0,i.jsx)(y.a,{}):(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.form.message_body")}),(0,i.jsx)(p._,{placeholder:(0,o.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(r,".rich_text_body"),submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",menuBarComponent:b.D,menubarProps:{dynamicVariables:s},type:"workflow",disabled:e},n),l&&(0,i.jsx)(h.z,{variant:"circle-plain",type:"button",className:"max-w-fit !px-2",onClick:c,children:(0,o.t)("settings.workflows.form.preview_message.button_label")})]})},ej=function(e,t){var r=(0,c.Gc)(),n=r.getValues,i=r.setValue;(0,l.useEffect)(function(){n(e)||i(e,t)},[e,i,n,t])},ew=r(814998),eO=r(240507),eS=r.n(eO),ek=r(958892),eN=r(896846),eP="settings.workflows.view",eC=function(e){var t=(e.action||{}).api_params||{},r=t.from,n=t.rich_text_body;return r&&n?(0,i.jsxs)(eN.P,{children:[(0,i.jsxs)(eN.P.Section,{children:[(0,i.jsx)(eN.P.Title,{children:(0,o.t)([eP,"from"])}),(0,i.jsx)("div",{children:(0,i.jsx)(ew.q,{communityMemberId:r})})]}),(0,i.jsxs)(eN.P.Section,{children:[(0,i.jsx)(eN.P.Title,{children:(0,o.t)([eP,"to"])}),(0,i.jsx)("div",{children:(0,i.jsx)(ek.C,{icon:(0,i.jsx)(s.JO,{type:"12-lightning",size:12,className:"!text-default !h-3 !w-3"}),text:(0,o.t)("settings.workflows.view.initiator")})})]}),(0,i.jsxs)(eN.P.Section,{children:[(0,i.jsx)(eN.P.Title,{children:(0,o.t)([eP,"message_body"])}),(0,i.jsx)("div",{className:"text-default text-sm",children:(0,i.jsx)(el.T,{type:"workflow",rich_text_body:{body:n.body,sgids_to_object_map:n.localSgidToObjectMap},editable:!1},(0,ed.uniqueId)("tiptap_"))})]})]}):null};eC.propTypes={action:eS().object,hasSeparator:eS().bool};var eA={label:(0,o.t)("settings.workflows.form.actions.send_dm"),textLabel:(0,o.t)("settings.workflows.form.actions.send_dm"),value:"send_dm",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-messages",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,f.B2)().paramsPath,t=(0,c.Gc)().register,r=(0,m.D)().isBulkAction,n=(0,u.N3)().id;return ej("".concat(e,".from"),n),ej("".concat(e,".to"),r?void 0:"initiator"),(0,i.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,i.jsx)(d.l.Item,{name:"".concat(e,".from"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)("settings.workflows.form.from"),labelClassName:"!mb-2 !text-sm",className:"!py-0",children:(0,i.jsx)(d.l.CommunityMemberSelect,{defaultValue:n,name:"".concat(e,".from"),filters:{role:"admin_or_moderator",messaging_enabled:!0}})}),(0,i.jsx)("div",{className:"hidden",children:(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("".concat(e,".to"))))}),(0,i.jsx)(ex,{})]})},viewComponent:eC,historyDetailViewComponent:function(e){var t=e.body,r=t.executor_member_id,n=t.receiver_member_id,a=t.rich_text_body;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.from")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:r})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.to")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:n})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_dm.message")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(el.T,{editable:!1,rich_text_body:a,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},eI={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_community"),value:"remove_community_member_from_community",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-workflow-user-remove-outline",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=new URL(e.url).pathname.split("/").pop();return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:t})})]})},icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eT=r(573622),eE="settings.workflows.view",eL=function(e){var t=(e.action||{}).api_params||{},r=t.path,n=t.message,a=(0,u.wh)().currentCommunity.root_url;return n?(0,i.jsxs)(eN.P,{children:[r&&(0,i.jsxs)(eN.P.Section,{children:[(0,i.jsx)(eN.P.Title,{children:(0,o.t)([eE,"path"])}),(0,i.jsx)("div",{children:(0,i.jsx)(v.Z.LabelSm,{children:"https://".concat(a,"/").concat(r)})})]}),(0,i.jsxs)(eN.P.Section,{children:[(0,i.jsx)(eN.P.Title,{children:(0,o.t)([eE,"message_body"])}),(0,i.jsx)("div",{className:"text-default text-sm",children:(0,i.jsx)(el.T,{rich_text_body:n,editable:!1},(0,ed.uniqueId)("tiptap_"))})]})]}):null};eL.propTypes={action:eS().object,hasSeparator:eS().bool};var eD={label:(0,o.t)("settings.workflows.form.actions.send_notification_to_member"),value:"send_notification_to_member",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-mobile",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,f.B2)(),t=e.paramsPath,r=e.isViewOnlyMode,n=(0,u.wh)().currentCommunity.root_url,a=(0,c.Gc)(),s=a.getValues,m=a.setValue,b=s("".concat(t,".path"));return(0,l.useEffect)(function(){if(b){if(b.match(/^\//)){var e=b.replace(/^\//,"");m("".concat(t,".path"),e);return}var r=b.split("://");if(!(r.length<=1)){var n=r[1].split("/");if(n.length<=1)return void m("".concat(t,".path"),"");var i=n.slice(1).join("/");m("".concat(t,".path"),i)}}},[b]),(0,i.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,i.jsx)(d.l.Item,{name:"".concat(t,".path"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)("settings.workflows.form.path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,o.t)("settings.workflows.form.path.placeholder"),rules:{pattern:{value:eT.i4,message:(0,o.t)("settings.workflows.form.path.error")}},children:(0,i.jsx)(d.l.Input,{prefix:(0,i.jsx)("div",{className:"whitespace-nowrap pl-4 pr-2",children:(0,i.jsx)(v.Z.LabelMd,{children:"".concat(n,"/")})})})}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.form.message_body")}),(0,i.jsx)(p._,{placeholder:(0,o.t)("settings.workflows.form.message_body_placeholder"),name:"".concat(t,".message"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",maxLength:150,disabled:r,type:"workflow"})]})]})},viewComponent:eL,historyDetailViewComponent:function(e){var t=e.body,r=t.path,n=t.message,a=(0,u.wh)().currentCommunity,s=(null!=a?a:{}).root_url;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_notification_to_member.path")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.Z.LabelSm,{children:"https://".concat(s,"/").concat(r)})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.send_notification_to_member.message")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(el.T,{editable:!1,rich_text_body:n,editorClassName:"text-sm inline-flex flex-col w-full"})})]})]})},icon:"notification",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eM={label:(0,o.t)("settings.workflows.form.actions.enable_messaging_on_member"),value:"enable_messaging_on_member",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-enable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.body.community_member_id;return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:t})})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},eR={label:(0,o.t)("settings.workflows.form.actions.disable_messaging_on_member"),value:"disable_messaging_on_member",group:(0,o.t)("settings.workflows.form.action_groups.members"),leftAddon:(0,i.jsx)(s.JO,{type:"16-disable-DM",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=new URL(e.url).pathname.split("/").pop();return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:t})})]})},icon:"chat",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY,disablable:!0,disableToolTipText:(0,o.t)("workflows_v2.action_selector.enable_dm_for_action_tooltip")},eB=r(331695),ez=r(450449),eF=r(244444),eU=r(934352),eZ=r(741901),eG=r(903225),eq=r(756468),eV=r(118192),eW=r(990290),eH=r(118746),eQ=r(473129),eK=r(12564),eJ=r(532898),e$=r(334502),eX=r(285122),eY=r(219677),e0=r(840905),e1=r(132309),e2=r(888853);function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var e5=function(){var e,t=(0,eG.$B)(),r=t.path,n=t.params,i=(e=(0,l.useState)({contentPath:"",editPath:"",visualBuilderPath:""}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return e3(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e3(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s="".concat(r,"/send-email/:broadcastId"),c="".concat(s,"/visual-builder");return{editorUrls:o,setEditorUrlsForBroadcast:function(e){a({editPath:"",visualBuilderPath:(0,eG.Gn)(c,e6({broadcastId:e},n)),contentPath:(0,eG.Gn)(s,e6({broadcastId:e},n))})}}},e4=r(283235);function e7(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function e9(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){e7(o,n,i,a,s,"next",e)}function s(e){e7(o,n,i,a,s,"throw",e)}a(void 0)})}}function e8(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var te="settings.workflows.form",tt=function(e){var t=e.lastUpdatedAt,r=e5(),n=r.editorUrls,a=r.setEditorUrlsForBroadcast,s=(0,c.Gc)(),u=s.watch,d=s.setValue,m=(0,f.B2)().paramsPath,p=(0,eG.k6)(),b=(0,e$.F)(),y=b.handleTestEmail,g=b.isSending,_=(0,eJ.a)().doesTemplatesExist,x=t?"".concat((0,eX.ie)(t,{day:"2-digit",month:"short",year:"numeric"})," ").concat((0,o.t)("workflows_v2.action_selector.email.at")," ").concat((0,eX.ie)(t,{hour:"2-digit",minute:"2-digit",hour12:!0})):void 0,j=u("".concat(m,".email_content")),w=u("".concat(m,".visual_email_builder_content")),O=u("".concat(m,".broadcast_id")),S=(0,e4.q)(O?Number(O):null).onUpsert,k=(0,f.ol)(),N=k.doesActionhasServerId,P=k.saveAction,C=(0,f.B2)(),A=C.action,I=C.path,T=(0,e1.l)(I).value,E=(0,e2.n)().getPathToContentEditor,L=!!j||!!w,D=(0,eG.$B)().isExact;(0,l.useEffect)(function(){e9(function(){var e,t,r;return e8(this,function(n){switch(n.label){case 0:if(!(N(A)&&j&&!O))return[3,3];return[4,S()];case 1:return t=null==(e=n.sent())?void 0:e.id,(0,eq.Z)(t,"Broadcast ID is required to start writing email"),r=T,d("".concat(m,".broadcast_id"),t),[4,P({path:I,action:r,skipOpenNext:!0})];case 2:n.sent(),n.label=3;case 3:return[2]}})})()},[]);var M=function(e,t){p.push(E({broadcastId:e,isVisualEmailBuilderContent:t}))},R=function(){es.gk.show(eK.K)},B=function(){es.gk.show(eV.n)};return(0,i.jsxs)("div",{className:"w-full space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",color:"text-very-dark",children:(0,o.t)([te,"email_content"])}),(0,i.jsx)(v.Z.LabelXs,{color:"text-default",children:L&&x?(0,o.t)(["workflows_v2.action_selector.email","last_updated_at"],{timestamp:x}):(0,o.t)([te,"email_content_description"])})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[L&&(0,i.jsx)(h.z,{variant:"secondary-light",type:"button",onClick:y,disabled:g,children:(0,o.t)("workflows_v2.action_selector.email.send_a_test")}),(0,i.jsx)(h.z,{variant:"secondary-light",type:"button",onClick:function(){return e9(function(){var e,t,r;return e8(this,function(n){switch(n.label){case 0:return[4,S()];case 1:return t=null==(e=n.sent())?void 0:e.id,r=!!w,(0,eq.Z)(t,"Broadcast ID is required to start writing email"),d("".concat(m,".broadcast_id"),t),a(t.toString()),L?M(t,r):_?R():B(),[2]}})})()},disabled:g,children:L?(0,o.t)("edit"):(0,o.t)([te,"start_writing"])})]})]}),(0,i.jsx)("div",{className:"bg-secondary max-h-60 overflow-y-auto rounded-lg px-6 py-5",children:(0,i.jsx)("div",{className:"bg-primary h-[25rem] w-full max-w-[24rem] rounded-lg p-6 shadow",children:L&&D?j?(0,i.jsx)(eY.C,{content:j}):(0,i.jsx)(eW.z,{}):(0,i.jsx)(e0.gi,{variant:"email-preview"})})}),(0,i.jsxs)(eQ.L,{paths:n,children:[(0,i.jsx)(eV.B,{id:eV.n}),(0,i.jsx)(eK.U,{id:eK.K}),(0,i.jsx)(eH.b,{id:eH.t})]})]})},tr="settings.workflows.action_messages.send_email",tn=r(999643),ti=r(51732),to=r(863142),ta=r(816866),ts=r(388894);function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tc(){var e,t=(0,tn.U)().isLoading,r=(e=(0,ti.Z)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tl(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1];return t?(0,i.jsx)(y.a,{}):(0,i.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,i.jsx)(ts.h,{}),(0,i.jsx)(to.J,{}),(0,i.jsx)(ta.L,{isOpen:n,onClose:o})]})}var tu={label:(0,o.t)("settings.workflows.form.actions.send_email"),textLabel:(0,o.t)("settings.workflows.form.actions.send_email"),value:"send_email",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-email",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e,t=(0,f.B2)().paramsPath,r=(0,c.Gc)(),n=r.watch,a=r.setValue,s=n("".concat(t,".broadcast_id")),l=(0,ez.t)({id:s,enabled:!!s,onSuccess:function(e){var r,n,i,o;a("".concat(t,".internal_name"),e.internal_name),a("".concat(t,".subject"),null==(r=e.broadcast_content)?void 0:r.subject),a("".concat(t,".preview_text"),null==(n=e.broadcast_content)?void 0:n.preview_text),a("".concat(t,".email_content"),null==(i=e.broadcast_content)?void 0:i.email_content),a("".concat(t,".visual_email_builder_content"),null==(o=e.broadcast_content)?void 0:o.visual_email_builder_content)}});return(0,i.jsxs)("div",{className:"react-form flex flex-col gap-y-7",children:[(0,i.jsx)(d.l.Item,{name:"".concat(t,".internal_name"),label:(0,o.t)(["settings.workflows.form","internal_name"]),hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,isFirstChild:!0,rules:{maxLength:{value:eB.Mb,message:(0,o.t)(["settings.emails.broadcasts","internal_name_too_long"])}},children:(0,i.jsx)(d.l.Input,{})}),(0,i.jsx)(eZ.O,{fieldName:"".concat(t,".subject")}),(0,i.jsx)(eU.W,{fieldName:"".concat(t,".preview_text")}),(0,i.jsx)(eF.X,{id:s,children:(0,i.jsx)(tt,{lastUpdatedAt:null==(e=l.data)?void 0:e.updated_at})})]})},viewComponent:function(e){var t=(e.action||{}).api_params,r=function(){if(t&&"broadcast_id"in t)return Number(t.broadcast_id);(0,eq.Z)(!1,"Broadcast ID is required for send_email action")};return(0,i.jsx)(eF.X,{id:r(),children:(0,i.jsx)(tn.x,{id:r(),children:(0,i.jsx)(tc,{})})})},historyDetailViewComponent:function(e){var t,r,n=e.apiParams.broadcast_id,a=(0,ez.t)({id:Number(n)}),s=a.data;return a.isLoading?(0,i.jsx)(y.a,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([tr,"internal_name"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s?void 0:s.internal_name})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([tr,"subject"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s||null==(t=s.broadcast_content)?void 0:t.subject})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)([tr,"preview_text"])})}),(0,i.jsx)("div",{className:"w-3/4",children:null==s||null==(r=s.broadcast_content)?void 0:r.preview_text})]})]})},icon:"email",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_ONLY},td={label:(0,o.t)("settings.workflows.form.actions.unsubscribe"),value:"unsubscribe",group:(0,o.t)("settings.workflows.form.action_groups.communication"),leftAddon:(0,i.jsx)(s.JO,{type:"16-unsubscribe",size:16,className:"!h-4 !w-4"}),formComponent:null,viewComponent:null,historyDetailViewComponent:function(e){var t=e.body.contact_id;return(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(v.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ew.q,{communityMemberId:t})})]})},icon:"unsubscribe",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY}},863142:function(e,t,r){"use strict";r.d(t,{J:()=>l});var n=r(552676),i=r(739792),o=r(999643),a=r(553973),s="settings.workflows.view";function l(){var e=(0,o.U)().data;if(!e)return null;var t=e.delivered,r=e.opened,l=e.clicked,c=e.recipient_count,u=e.sent||c;return(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsx)("div",{className:"border-hover bg-secondary mt-3 overflow-hidden rounded-lg border",children:(0,n.jsxs)("div",{className:"divide-primary flex items-center justify-around divide-x py-3 text-center",children:[(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"delivered"]),value:t}),(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"opened"]),value:r}),(0,n.jsx)(a.j,{total:u,label:(0,i.t)([s,"clicked"]),value:l})]})})})}},816866:function(e,t,r){"use strict";r.d(t,{L:()=>y});var n=r(552676),i=r(739792),o=r(64115),a=r(999643),s=r(480374),l=r(751169),c=r(434519),u=r(756468),d=r(134870),f=r(124589),m=r(381636),p=r(808778),b="settings.workflows.view",h=function(){var e=(0,a.U)().data;(0,u.Z)(e,"Broadcast data must be present");var t=e.subject,r=e.first_delivery_at,o=void 0===r?null:r,s=e.recipient_count;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-1 gap-y-1",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",color:"text-default",children:(0,i.t)([b,"subject"])}),(0,n.jsx)(m.Z.LabelSm,{color:"text-default",children:void 0===t?"":t})]}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",color:"text-default",as:"div",children:(0,i.t)([b,"first_delivery"])}),(0,n.jsx)(m.Z.LabelSm,{color:"text-default",as:"div",children:o?(0,i.t)([b,"sent_on_date_time"],{datetime:(0,d.w)({dateTime:new Date(o),format:d.f.short_date_at_short_time})}):(0,i.t)("n/a")})]})]}),(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(f.V,{recipient_type:"all_recipients",className:"text-dark flex items-center gap-x-1 decoration-current decoration-dashed underline-offset-2",children:(0,n.jsx)(p.u,{recipientCount:void 0===s?null:s})})})]})};function y(e){var t=e.isOpen,r=e.onClose,u=(0,a.U)().isLoading;return(0,n.jsxs)(c.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{size:"2xl",shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(c.u_.Header,{children:[(0,n.jsx)(c.u_.Title,{children:(0,i.t)("settings.workflows.view.email_report")}),(0,n.jsx)(c.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(c.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(c.u_.Body,{className:"pb-6 pt-4",children:u?(0,n.jsx)(l.a,{}):(0,n.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,n.jsx)(h,{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.o,{}),(0,n.jsx)(o.l,{})]})]})})]})]})}},808778:function(e,t,r){"use strict";r.d(t,{u:()=>l});var n=r(552676),i=r(739792),o=r(663676),a=r(381636),s="settings.workflows.view",l=function(e){var t=e.recipientCount;return null===t?(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-default",children:(0,i.t)([s,"no_recipients"])}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-default",children:(0,o.HA)(t)}),(0,n.jsx)(a.Z.LabelXs,{weight:"semibold",color:"text-very-dark",children:(0,i.t)([s,"recipients"])})]})}},553973:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(552676),i=r(274481),o=r(663676),a=r(381636);function s(e){var t=e.value,r=e.total,s=e.label;return(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-y-1.5",children:[(0,n.jsx)(a.Z.LabelMd,{weight:"bold",color:"text-very-dark",children:(0,i.M)({total:r,value:t})}),(0,n.jsxs)("div",{className:"flex justify-center gap-x-1",children:[(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:s}),(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:t?(0,o.HA)(t):0})]})]})}},388894:function(e,t,r){"use strict";r.d(t,{h:()=>h});var n=r(552676),i=r(51732),o=r(739792),a=r(244444),s=r(39905),l=r(884745),c=r(751169),u=r(434519);function d(e){var t=e.isOpen,r=e.onClose,i=(0,a.u)(),s=i.data,d=i.isLoading;return(0,n.jsxs)(u.u_,{isOpen:t,onClose:r,children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{size:"xl",shouldCloseOnOutsideClick:!0,className:"grid grid-rows-[auto,_1fr]",children:[(0,n.jsxs)(u.u_.Header,{children:[(0,n.jsx)(u.u_.Title,{children:(0,o.t)("settings.workflows.view.view_email")}),(0,n.jsx)(u.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})})]}),(0,n.jsx)(u.u_.Body,{className:"pb-6 pt-4",children:d||!s?(0,n.jsx)(c.a,{}):(0,n.jsx)("div",{className:"border-primary h-full overflow-hidden rounded-xl border",children:(0,n.jsx)(l.M,{})})})]})]})}var f=r(219677);function m(){var e,t=(0,a.u)(),r=t.data,i=t.isLoading,o=null==r||null==(e=r.broadcast_content)?void 0:e.email_content;return i||!o?null:(0,n.jsx)("div",{className:"border-primary pointer-events-none relative aspect-square size-14 cursor-default select-none overflow-hidden rounded-md border",children:(0,n.jsx)("div",{className:"absolute size-[560px] origin-top-left scale-[10%] px-8 py-4",children:(0,n.jsx)(f.C,{content:o})})})}var p=r(763647);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t,r,l=e.hideViewEmailModal,c=(0,a.u)().data,u=(t=(0,i.Z)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],h=u[1];return(0,n.jsxs)("div",{className:"flex justify-between gap-x-2",children:[(0,n.jsx)(p.Z,{inlinePreviewComponent:(0,n.jsx)(m,{}),internalName:null==c?void 0:c.internal_name,subject:null==c||null==(r=c.broadcast_content)?void 0:r.subject}),!(void 0!==l&&l)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.z,{variant:"secondary-light",type:"button",onClick:h,children:(0,o.t)(["settings.workflows.view","view_email"])})}),(0,n.jsx)(d,{isOpen:f,onClose:h})]})]})}},763647:function(e,t,r){"use strict";r.d(t,{Z:()=>s});var n=r(552676),i=r(739792),o=r(381636),a="settings.workflows.view";let s=function(e){var t=e.inlinePreviewComponent,r=e.internalName,s=e.subject;return(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-x-4",children:[t,(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(o.Z.LabelSm,{weight:"semibold",children:r||(0,i.t)([a,"untitled_email"])}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(o.Z.LabelXs,{weight:"medium",children:(0,i.t)([a,"subject"])}),(0,n.jsx)(o.Z.LabelXs,{children:s||(0,i.t)([a,"no_subject_line"])})]})]})]})}},888853:function(e,t,r){"use strict";r.d(t,{n:()=>o});var n=r(903225);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var o=function(){var e=(0,n.$B)(),t=e.path,r=e.params,o="".concat(t,"/send-email/:broadcastId"),a="".concat(o,"/visual-builder");return{getPathToContentEditor:function(e){var t=e.broadcastId;return e.isVisualEmailBuilderContent?(0,n.Gn)(a,i({broadcastId:t},r)):(0,n.Gn)(o,i({broadcastId:t},r))},contentPath:o}}},283235:function(e,t,r){"use strict";r.d(t,{q:()=>d});var n=r(227851),i=r(555471),o=r(257086),a=r(267792),s=r(947532);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=function(e){var t=(0,s.B2)().paramsPath,r=(0,n.Gc)().getValues,d=(0,o.b)(),f=d.data,m=d.mutateAsync,p=Number(null!=e?e:null==f?void 0:f.id),b=(0,a.j)({id:p}).mutateAsync;return{onUpsert:function(){var e,n=(e=r(["".concat(t,".internal_name"),"".concat(t,".subject"),"".concat(t,".preview_text"),"".concat(t,".email_content"),"".concat(t,".visual_email_builder_content.content")]),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,5)||function(e,t){if(e){if("string"==typeof e)return l(e,5);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,5)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],s=n[2],d=n[3],f=n[4],h={internal_name:o,broadcast_type:i.SL.workflow};return p?b({body:u(c({},h),{broadcast_content:{subject:a,preview_text:s,email_content:d,visual_email_builder_content:f}})}):m(u(c({},h),{broadcast_content_attributes:{subject:a,preview_text:s,email_content:d,visual_email_builder_content:f}}))},broadcastId:p}}},293919:function(e,t,r){"use strict";r.d(t,{mD:()=>w,T1:()=>q,s4:()=>ee,_C:()=>O});var n=r(552676),i=r(739792),o=r(584555),a=r(957363),s=r(248996),l=r(439788),c=r(751169),u=r(381636),d=r(947532),f="settings.workflows.form",m=function(){var e=(0,d.B2)().paramsPath,t=(0,s.y)(),r=t.activePaywalls,o=t.isLoading,a=t.isSuccess,m=r.map(function(e){return{value:e.id,label:e.display_name}});return o?(0,n.jsx)(c.a,{center:!0}):a?(0,n.jsx)(l.N,{name:"".concat(e,".paywall_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([f,"select_paywall"])}),options:m,rules:{required:(0,i.t)([f,"errors.required"])},emptyMessage:(0,i.t)([f,"errors.paywalls.not_found"])}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([f,"paywalls.fetch_failed"])})})},p=r(814998),b=r(182691),h=r.n(b),y=r(869300),v=r(958892),g=function(e){var t=e.id,r=(0,y.a)(t),o=r.data;return r.isLoading?(0,n.jsx)(v.C,{isLoading:!0}):!o||h()(o)?(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_paywall")}):(0,n.jsx)(u.Z.LabelSm,{children:(null==o?void 0:o.name)||(null==o?void 0:o.display_name)})},_=function(e){var t=e.body,r=e.apiParams,o=t.community_member_id,a=r.paywall_id;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(g,{id:a})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.q,{communityMemberId:o})})]})]})},x=r(896846),j=function(e){var t=((e.action||{}).api_params||{}).paywall_id,r=(0,y.a)(null!=t?t:0),o=r.data,a=r.isLoading;return t&&(o||a)?(0,n.jsx)(x.P,{children:(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)(["settings.workflows.view","resources.paywall"])}),(0,n.jsx)("div",{children:a?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:(null==o?void 0:o.name)||(null==o?void 0:o.display_name)})})]})}):null},w={label:(0,i.t)("settings.workflows.form.actions.cancel_community_member_paywall_subscription"),value:"cancel_community_member_paywall_subscription",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-remove-paywall",size:16,className:"!h-4 !w-4"}),formComponent:m,viewComponent:j,historyDetailViewComponent:_,isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY},O={label:(0,i.t)("settings.workflows.form.actions.cancel_community_member_paywall_subscription_immediately"),value:"cancel_community_member_paywall_subscription_immediately",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-remove-paywall",size:16,className:"!h-4 !w-4"}),formComponent:m,viewComponent:j,historyDetailViewComponent:_,isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY},S=r(227851),k=r(969288),N=r(767900),P="settings.workflows.form",C=function(){var e=(0,d.B2)().paramsPath;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([P,"notify_member"])}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,n.jsx)(N.l.ToggleSwitch,{name:"".concat(e,".send_notification_subscription_created_by_admin"),variant:"small"}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("span",{children:(0,i.t)([P,"send_notification_subscription_created_by_admin"])})})]})]})},A=r(240507),I=r.n(A),T=r(860221),E="settings.workflows.form",L=function(e){var t=e.paywallPrices,r=(0,d.B2)().paramsPath,o=(0,T.PI)(t).map(function(e){return{value:e.id,label:e.display_name}});return(0,n.jsx)(l.N,{name:"".concat(r,".paywall_price_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([E,"select_paywall_price"])}),options:o,hidePlaceholder:!0,rules:{required:(0,i.t)([E,"errors.required"])},emptyMessage:(0,i.t)([E,"errors.paywalls.not_found"])})};L.propTypes={paywallPrices:I().array.isRequired};var D=r(575159),M="settings.workflows.form",R=function(e){var t=e.disabled,r=e.name,o={pattern:{value:/^[0-9]+$/,message:(0,i.t)("create_paywall_subscription_modal.warning.only_number_are_allowed")},required:(0,i.t)("create_paywall_subscription_modal.warning.only_number_are_allowed"),min:{value:D.dy,message:(0,i.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:D.ut,message:(0,i.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}};return(0,n.jsx)(N.l.Item,{name:r,hideDescription:!0,label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([M,"trial_days"])}),hideBorder:!0,isFirstChild:!0,hiddenField:!0,className:"flex flex-1 flex-col gap-1",errorClassName:"text-red-500 text-xs",rules:o,placeholder:(0,i.t)([M,"trial_days_placeholder"]),children:(0,n.jsx)(N.l.Input,{name:"trial_days",inputMode:"numeric",suffix:(0,i.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:t})})};R.propTypes={disabled:I().bool,name:I().string.isRequired};var B="settings.workflows.form",z=r(131906),F=r(301737),U=function(e){var t=e.paywallId,r=e.priceId,n=(0,z.useQuery)({queryKey:[F.v.paywallPrices.show({paywallId:t,id:r})]});return{paywallPrice:n.data,isLoading:n.isLoading,isSuccess:n.isSuccess}},Z=function(e){var t=e.paywallId,r=e.paywallPriceId,o=U({paywallId:t.toString(),priceId:r.toString()}),a=o.paywallPrice;return o.isLoading?(0,n.jsx)(v.C,{isLoading:!0}):!a||h()(a)||!a.paywall_name||!a.display_name?(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_paywall_price")}):(0,n.jsxs)(u.Z.LabelSm,{children:[a.paywall_name," - ",a.display_name]})},G="settings.workflows.view",q={label:(0,i.t)("settings.workflows.form.actions.subscribe_community_member_to_paywall_trial"),value:"subscribe_community_member_to_paywall_trial",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,d.B2)().paramsPath,t=(0,s.y)(),r=t.isLoading,o=t.isSuccess,a=t.activePaywalls,f=(0,(0,S.Gc)().watch)("".concat(e,".paywall_id")),m=[],p={};return((0,k.Jy)(a).forEach(function(e){m.push({value:e.id.toString(),label:e.name||e.display_name}),p[e.id]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e)}),r)?(0,n.jsx)(c.a,{center:!0}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.N,{name:"".concat(e,".paywall_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([B,"select_paywall"])}),options:m,rules:{required:(0,i.t)([B,"errors.required"])},emptyMessage:(0,i.t)([B,"errors.paywalls.not_found"])}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,n.jsx)(L,{paywallPrices:p[f].stripe_prices_attributes}),(0,n.jsx)(R,{name:"".concat(e,".trial_days"),disabled:r})]}),(0,n.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,n.jsx)(C,{})})]})]}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([B,"errors.paywall_prices.fetch_failed"])})})},viewComponent:function(e){var t,r,o=e.action,a=null==o?void 0:o.api_params,s=null==a?void 0:a.paywall_price_id,l=null==a?void 0:a.paywall_id,c=null==a?void 0:a.trial_days,d=null==a?void 0:a.send_notification_subscription_created_by_admin,f=U({paywallId:l||"",priceId:s||""}),m=f.paywallPrice,p=f.isLoading;if(!m&&!p)return null;return(0,n.jsxs)(x.P,{children:[(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([G,"resources.paywall"])}),(0,n.jsx)("div",{children:p?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:!m||h()(m)?(0,i.t)("settings.workflows.view.deleted_paywall"):m.paywall_name||m.paywall_display_name})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([G,"resources.paywall_price"])}),(0,n.jsx)("div",{children:p?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:!m||h()(m)?(0,i.t)("settings.workflows.view.deleted_paywall_price"):m.display_name})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([G,"trial_days"])}),(0,n.jsx)("div",{children:p?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:null!=c?c:"-"})})]}),(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([G,"send_notification_subscription_created_by_admin"])}),(t=d,r=p,(0,n.jsx)("div",{children:r?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:null!=t&&t?(0,i.t)("yes"):(0,i.t)("no")})}))]})]})},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,o=t.community_member_id,a=t.trial_days,s=null!=r?r:{},l=s.paywall_id,c=s.paywall_price_id;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall_price")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(Z,{paywallId:l,paywallPriceId:c})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.q,{communityMemberId:o})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.trial_days")})}),(0,n.jsx)("div",{className:"w-3/4",children:a})]})]})},isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY},V=r(75936),W="settings.workflows.form",H=function(){var e=(0,d.B2)().paramsPath,t=(0,(0,V.n)({}).useListPaywallCoupons)(),r=t.data,o=t.isLoading,a=t.isSuccess,s=(r||[]).map(function(e){return{value:e.id,label:e.code}});return o?(0,n.jsx)(c.a,{center:!0}):a?(0,n.jsx)(l.N,{name:"".concat(e,".paywall_coupon_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([W,"select_paywall_coupon"])}),options:s,rules:{required:(0,i.t)([W,"errors.required"])},emptyMessage:(0,i.t)([W,"errors.paywall_coupons.not_found"])}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([W,"errors.paywall_coupons.fetch_failed"])})})},Q=r(275271);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var J="settings.workflows.form",$=function(){var e,t=(0,d.B2)().paramsPath,r=(0,s.y)(),o=r.activePaywalls,a=r.isLoading,f=r.isSuccess,m=(0,S.Gc)(),p=m.setValue,b=m.getValues,h="".concat(t,".paywall_id");(0,Q.useEffect)(function(){void 0===b(h)&&p(h,null)},[h,p,b]);var y=[{value:null,label:(0,i.t)([J,"any_paywall"])}].concat(function(e){if(Array.isArray(e))return K(e)}(e=o.map(function(e){return{value:e.id,label:e.display_name}}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return a?(0,n.jsx)(c.a,{center:!0}):f?(0,n.jsx)(l.N,{name:"".concat(t,".paywall_id"),label:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)([J,"select_paywall_optional"])}),tooltipText:(0,i.t)([J,"select_paywall_optional_tooltip"]),options:y,emptyMessage:(0,i.t)([J,"errors.paywalls.not_found"])}):(0,n.jsx)(u.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,i.t)([J,"errors.paywalls.fetch_failed"])})})},X=function(e){var t=e.id,r=(0,(0,V.n)({}).useShowPaywallCoupon)(t),o=r.data;return r.isLoading?(0,n.jsx)(v.C,{isLoading:!0}):!o||h()(o)?(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)("settings.workflows.view.deleted_paywall_coupon")}):(0,n.jsx)(u.Z.LabelSm,{children:o.code})},Y="settings.workflows.view",ee={label:(0,i.t)("settings.workflows.form.actions.add_coupon_to_subscription"),value:"add_coupon_to_subscription",group:(0,i.t)("settings.workflows.form.action_groups.paywall"),leftAddon:(0,n.jsx)(a.JO,{type:"16-paywall",size:16,className:"!h-4 !w-4"}),formComponent:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{}),(0,n.jsx)($,{})]})},viewComponent:function(e){var t=e.action,r=null==t?void 0:t.api_params,o=null==r?void 0:r.paywall_coupon_id,a=null==r?void 0:r.paywall_id,s=(0,(0,V.n)({}).useShowPaywallCoupon)(null!=o?o:0),l=s.data,c=s.isLoading,d=(0,y.a)(null!=a?a:0),f=d.data,m=d.isLoading;return l||c?(0,n.jsxs)(x.P,{children:[(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([Y,"resources.paywall_coupon"])}),(0,n.jsx)("div",{children:c?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:!l||h()(l)?(0,i.t)("settings.workflows.view.deleted_paywall_coupon"):l.code})})]}),a&&(0,n.jsxs)(x.P.Section,{children:[(0,n.jsx)(x.P.Title,{children:(0,i.t)([Y,"resources.paywall"])}),(0,n.jsx)("div",{children:m?(0,n.jsx)(v.C,{isLoading:!0}):(0,n.jsx)(u.Z.LabelSm,{children:!f||h()(f)?(0,i.t)("settings.workflows.view.deleted_paywall"):f.name||f.display_name})})]})]}):null},historyDetailViewComponent:function(e){var t=e.body,r=e.apiParams,o=t.community_member_id,a=null!=r?r:{},s=a.paywall_coupon_id,l=a.paywall_id;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall_coupon")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(X,{id:s})})]}),l&&(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.paywall")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(g,{id:l})})]}),(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.member")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(p.q,{communityMemberId:o})})]})]})},isApplicableToMembersOnly:!0,availablePlanTier:o.PQ.HIGHER_TIER_PLAN_ONLY}},565510:function(e,t,r){"use strict";r.d(t,{p:()=>a});var n=r(552676),i=r(739792),o=r(39905),a=function(e){var t=e.handleTestWebhook,r=e.isDisabled,a=e.isTestingWebhook,s=e.isWebhookTestSuccessful,l=e.isWebhookUrlChanged,c=e.isWebhookTested,u=e.triggerType;return(0,n.jsx)(o.z,{disabled:r,onClick:t,large:!1,variant:"circle",type:"button",children:a?(0,i.t)("settings.workflows.form.testing_webhook"):(!s||l)&&c?(0,i.t)("settings.workflows.form.test_again"):u&&""!==u?(0,i.t)("settings.workflows.form.test_webhook"):(0,i.t)("settings.workflows.form.select_entry_rule")})}},725076:function(e,t,r){"use strict";r.d(t,{j:()=>_});var n=r(552676),i=r(739792),o=r(432050),a=r(381636),s=r(757105),l=r(434519),c=r(275271),u=r(134870),d=r(411944),f=r(257064),m=r(574472),p=function(e){var t=e.testResult,r=e.onClose,o=function(e){try{return JSON.stringify(e,null,2)}catch(e){return console.error("Error parsing JSON:",e),""}},s=(0,c.useMemo)(function(){return{request:o(t.request_body),response:o(t.response_body)}},[t]),p=(0,u.w)({dateTime:new Date(t.date_time),format:"short_date_at_short_time"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsx)(l.u_.Title,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.webhook_test_result")}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:r})})]}),(0,n.jsxs)(l.u_.Body,{children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("div",{className:"border-dark rounded-lg border",children:(0,n.jsxs)(d.O.Group,{children:[(0,n.jsxs)("div",{className:"bg-secondary border-dark flex flex-col gap-3.5 rounded-t-lg border-b px-6 pt-5",children:[(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,n.jsx)(m.x,{result:(null==t?void 0:t.success)?"success":"failed",isBadge:!1}),(0,n.jsx)(a.Z.LabelSm,{color:"text-default",as:"time",children:p})]})}),(0,n.jsxs)(d.O.List,{children:[(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.webhook_url")}),(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.request_body")}),(0,n.jsx)(d.O,{children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.response_body")})]})]}),(0,n.jsxs)(d.O.Panels,{children:[(0,n.jsx)(d.O.Panel,{className:"px-6 py-5",children:t.url}),(0,n.jsx)(d.O.Panel,{className:"p-2",children:(0,n.jsx)(f.X,{code:s.request})}),(0,n.jsx)(d.O.Panel,{className:"p-2",children:(0,n.jsx)(f.X,{code:s.response})})]})]})})}),(0,n.jsx)("div",{className:"mt-5"})]})]})},b=function(e){var t=e.testResult,r=(0,s.dd)();return(0,n.jsxs)(l.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsx)(l.u_.Content,{size:"lg",children:(0,n.jsx)(p,{testResult:t,onClose:r.hide})})]})},h=s.gk.create(function(e){return(0,n.jsx)(b,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))});function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var v={type:"success",title:(0,i.t)("settings.workflows.action_messages.send_to_webhook.test_success"),description:(0,i.t)("settings.workflows.action_messages.send_to_webhook.success_support_text")},g={type:"alert",title:(0,i.t)("settings.workflows.action_messages.send_to_webhook.test_failed"),description:(0,i.t)("settings.workflows.action_messages.send_to_webhook.error_support_text")},_=function(e){var t=e.isWebhookTestSuccessful,r=e.webhookTestResult,l=(0,s.dd)(h),c=t?v:g,u=c.type,d=c.title,f=c.description,m=(0,n.jsxs)("span",{className:"flex gap-x-1",children:[(0,n.jsx)(a.Z.LabelSm,{children:f}),(0,n.jsx)("button",{type:"button",className:"border-light hover:border-darkest border-b border-dashed",onClick:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,l.show({testResult:r})];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)})})()},children:(0,n.jsx)(a.Z.LabelSm,{weight:"medium",children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.show_test_data_output")})})]});return(0,n.jsx)("div",{className:"mb-9",children:(0,n.jsx)(o.b,{type:u,title:d,description:m})})}},203178:function(e,t,r){"use strict";r.d(t,{l:()=>n.l});var n=r(342694)},342694:function(e,t,r){"use strict";r.d(t,{l:()=>_,E:()=>x});var n=r(552676),i=r(739792),o=r(957363),a=r(584555),s=r(227036),l=r(573622),c=r(767900),u=r(381636),d=r(947532),f=function(){var e=(0,d.B2)(),t=e.paramsPath,r=e.isViewOnlyMode;return(0,n.jsxs)("div",{className:"react-form flex flex-col gap-9",children:[(0,n.jsx)(c.l.Item,{name:"".concat(t,".url"),hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,i.t)("settings.workflows.form.webhook_path.name"),labelClassName:"!mb-2 !text-sm",className:"!py-0",placeholder:(0,i.t)("settings.workflows.form.webhook_path.placeholder"),rules:{pattern:{value:l.lu,message:(0,i.t)("settings.workflows.form.webhook_path.error")}},children:(0,n.jsx)(c.l.Input,{})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.optional_description")}),(0,n.jsx)(s._,{placeholder:(0,i.t)("settings.workflows.form.optional_description_placeholder"),name:"".concat(t,".description.body"),showMenuBar:!1,submitOnEnter:!1,className:"!border-primary focus-within:!border-light !mb-0 !px-4 !text-base",editorClassName:"min-h-[5rem]",type:"workflow",disabled:r})]})]})},m=function(e){var t=e.url;return(0,n.jsxs)("div",{className:"md:flex",children:[(0,n.jsx)("div",{className:"w-1/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.action_messages.send_to_webhook.url")})}),(0,n.jsx)("div",{className:"w-3/4",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:t})})]})},p=r(240507),b=r.n(p),h=r(326120),y=r(896846),v="settings.workflows.view",g=function(e){var t=(e.action||{}).api_params||{},r=t.url,o=t.description;return(0,n.jsxs)(y.P,{children:[r&&(0,n.jsxs)(y.P.Section,{children:[(0,n.jsx)(y.P.Title,{children:(0,i.t)([v,"webhook.url"])}),(0,n.jsx)("div",{children:(0,n.jsx)(u.Z.LabelSm,{children:r})})]}),(0,n.jsxs)(y.P.Section,{children:[(0,n.jsx)(y.P.Title,{children:(0,i.t)([v,"webhook.description"])}),o?(0,n.jsx)("div",{className:"text-default text-sm",children:(0,n.jsx)(h.T,{rich_text_body:o,editable:!1})}):(0,n.jsx)(u.Z.LabelSm,{children:(0,i.t)([v,"webhook.empty_description"])})]})]})};g.propTypes={action:b().object,hasSeparator:b().bool};var _={label:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),textLabel:(0,i.t)("settings.workflows.form.action_groups.webhook.send_to_webhook"),value:"send_to_webhook",group:(0,i.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,n.jsx)(o.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:f,viewComponent:g,historyDetailViewComponent:m,availability:["dynamic"],eligiblePlanTiers:a.Db,isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.ENTERPRISE_AND_PLUS_ONLY},x={label:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),textLabel:(0,i.t)("settings.workflows.form.actions.send_to_webhook"),value:"send_to_webhook",group:(0,i.t)("settings.workflows.form.action_groups.webhook"),leftAddon:(0,n.jsx)(o.JO,{type:"16-webhook",size:16,className:"!h-4 !w-4"}),formComponent:f,viewComponent:g,historyDetailViewComponent:m,availability:["dynamic"],eligiblePlanTiers:a.Db,isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.ENTERPRISE_AND_PLUS_ONLY}},685149:function(e,t,r){"use strict";r.d(t,{U:()=>eN});var n=r(782470),i=r(552676),o=r(739792),a=r(584555),s=r(517990),l=r(957363),c=r(227851),u=r(376492),d=r(589013),f=r(439788),m=r(751169),p=r(381636),b=r(947532),h="settings.workflows.form",y=function(){var e=(0,b.B2)().paramsPath,t=(0,c.Gc)().setValue,r=(0,u.S)(),n=r.data,a=r.isLoading,s=r.isError,l=(0,d.O)({selectNewAccessGroup:function(r){return t("".concat(e,".access_group_id"),r.id,{shouldDirty:!0,shouldValidate:!0})}}).openNewAccessGroupModal;if(a)return(0,i.jsx)(m.a,{center:!0});if(s)return(0,i.jsx)(p.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([h,"errors.access_groups.fetch_failed"])})});var y=null==n?void 0:n.map(function(e){return{label:e.name,value:e.id}});return(0,i.jsx)(f.N,{name:"".concat(e,".access_group_id"),label:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)([h,"select_access_group"])}),options:y,rules:{required:(0,o.t)([h,"errors.required"])},emptyMessage:(0,o.t)([h,"errors.access_groups.not_found"]),createLinkLabel:(0,o.t)("settings.access_groups.admin.entry_points.association.actions.create_new_access_group"),onCreateLinkClick:l})},v=r(814998),g=r(337140),_=function(e){var t=e.id,r=(0,g.t)(t),n=r.accessGroup;return r.isLoadingAccessGroup?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:null==n?void 0:n.name})},x=function(e){var t=e.body,r=e.url,n=t.community_member_id,a=Number(new URL(r).pathname.split("/")[5]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.access_group")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(_,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},j=r(958892),w=r(896846),O=function(e){var t=((e.action||{}).api_params||{}).access_group_id,r=(0,g.t)(t),n=r.accessGroup,a=r.isLoadingAccessGroup;return n||a?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","access_group"])}),(0,i.jsx)("div",{children:a?(0,i.jsx)(j.C,{isLoading:a}):(0,i.jsx)(p.Z.LabelSm,{children:null==n?void 0:n.name})})]})}):null},S={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_access_group"),value:"add_community_member_to_access_group",group:(0,o.t)("settings.workflows.form.action_groups.access_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:y,viewComponent:O,historyDetailViewComponent:x,icon:"user",isApplicableToMembersOnly:!0,released:s.l,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},k={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_access_group"),value:"remove_community_member_from_access_group",group:(0,o.t)("settings.workflows.form.action_groups.access_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:y,viewComponent:O,historyDetailViewComponent:x,icon:"user-remove",isApplicableToMembersOnly:!0,released:s.l,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},N=r(237581),P=r(997346),C=r(209905),A=r(784260),I=r(638998),T=r(844123),E=r(736855),L=r(776453),D="settings.workflows.form",M=r(240507),R=r.n(M),B=r(131906),z=r(651714),F=function(e){var t=e.eventId;return(0,B.useQuery)(["event",t],function(){return z.S.fetchEvent({id:t})})},U=function(e){var t=F({eventId:e.id}),r=t.data;return t.isLoading?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:r.name})};U.propTypes={id:R().number.isRequired};var Z=function(e){var t=F({eventId:((e.action||{}).api_params||{}).event_id}),r=t.data,n=t.isLoading;return r||n?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","event"])}),(0,i.jsx)("div",{children:n?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(p.Z.LabelSm,{children:r.name})})]})}):null};Z.propTypes={action:R().object};var G={label:(0,o.t)("settings.workflows.form.actions.rsvp_member_to_event"),value:"rsvp_member_to_event",group:(0,o.t)("settings.workflows.form.action_groups.events"),leftAddon:(0,i.jsx)(l.JO,{type:"16-calendar-join-date",size:16,className:"!h-4 !w-4"}),formComponent:function(){var e=(0,b.B2)().paramsPath,t=(0,L.i)({per_page:300}),r=t.data,n=t.isLoading,a=t.isError,s=(r||{}).records,l=(void 0===s?[]:s).map(function(e){var t=e.recurring?"".concat(e.name," ").concat((0,o.t)([D,"recurring_label"])):e.name,r=e.paid_event?"".concat(e.space_name,"  ").concat(e.start_date,"  ").concat(e.ticket_price):"".concat(e.space_name,"  ").concat(e.start_date);return{label:t,value:e.id,description:r}});return n?(0,i.jsx)(m.a,{center:!0}):a?(0,i.jsx)(p.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([D,"errors.upcoming_events.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".event_id"),label:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)([D,"which_event"])}),options:l,rules:{required:(0,o.t)([D,"errors.required"])},emptyMessage:(0,o.t)([D,"errors.upcoming_events.not_found"])})},viewComponent:Z,historyDetailViewComponent:function(e){var t=e.body,r=t.event_id,n=t.community_member_id;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.event")})}),(0,i.jsx)(U,{id:r})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},icon:"event",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},q=r(839315),V=r(722705),W=r(630713),H="settings.workflows.form",Q=function(){var e=(0,b.B2)().paramsPath,t=(0,W.t)(),r=t.memberTags,n=t.isLoading,a=t.isError,s=(void 0===r?[]:r).map(function(e){return{value:e.id,label:e.name}});return n?(0,i.jsx)(m.a,{center:!0}):a?(0,i.jsx)(p.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([H,"member_tags.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".member_tag_id"),label:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)([H,"select_tag"])}),options:s,rules:{required:(0,o.t)([H,"errors.required"])},emptyMessage:(0,o.t)([H,"errors.member_tags.not_found"])})},K=r(391026),J=r(182691),$=r.n(J),X=function(e){var t=e.memberTagId,r=(0,K.u)({id:t}),n=r.data;return r.isLoading?(0,i.jsx)(j.C,{isLoading:!0}):$()(n)?(0,i.jsx)(p.Z.LabelSm,{children:(0,o.t)("settings.workflows.view.deleted_member_tag")}):(0,i.jsx)(p.Z.LabelSm,{children:n.name})};X.propTypes={memberTagId:R().number.isRequired};var Y=function(e){var t=e.body,r=t.member_tag_id,n=t.community_member_id,a=t.contact_id;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.tag")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(X,{memberTagId:r})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n||a})})]})]})},ee="settings.workflows.view",et=function(e){var t=((e.action||{}).api_params||{}).member_tag_id,r=(0,K.u)({id:t}),n=r.data,a=void 0===n?{}:n,s=r.isLoading;if(!a)return null;var l=$()(a)?(0,o.t)([ee,"deleted_member_tag"]):a.name;return(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)([ee,"member_tag"])}),(0,i.jsx)("div",{children:s?(0,i.jsx)(j.C,{isLoading:!0}):a&&(0,i.jsx)(j.C,{text:l})})]})})};et.propTypes={action:R().object};var er={label:(0,o.t)("settings.workflows.form.actions.add_tag"),value:"add_tag_to_community_member",group:(0,o.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,i.jsx)(l.JO,{type:"16-tag",size:16,className:"!h-4 !w-4"}),formComponent:Q,viewComponent:et,historyDetailViewComponent:Y,icon:"tag",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN},en={label:(0,o.t)("settings.workflows.form.actions.remove_tag"),value:"remove_tag_from_community_member",group:(0,o.t)("settings.workflows.form.action_groups.tags"),leftAddon:(0,i.jsx)(l.JO,{type:"16-remove-tags",size:16,className:"!h-4 !w-4"}),formComponent:Q,viewComponent:et,historyDetailViewComponent:Y,icon:"tag",isApplicableToMembersOnly:!1,availablePlanTier:a.PQ.MH_WITH_LOWER_OR_HIGHER_TIER_PLAN},ei=r(293919),eo=r(654787),ea="settings.workflows.form",es=function(){var e=(0,b.B2)().paramsPath,t=(0,eo.r)(),r=t.data,n=t.isLoading,a=t.isError,s=(r||{}).records,l=(void 0===s?[]:s).map(function(e){return{value:e.id,label:[e.space_group_name,e.name].filter(Boolean).join("  ")}});return n?(0,i.jsx)(m.a,{center:!0}):a?(0,i.jsx)(p.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([ea,"spaces.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".space_id"),label:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)([ea,"select_space"])}),options:l,rules:{required:(0,o.t)([ea,"errors.required"])},emptyMessage:(0,o.t)([ea,"errors.spaces.not_found"])})},el=r(547144),ec=r(93199),eu=function(e){var t=e.id,r=e.options;return(0,B.useQuery)(["space",t],function(){return(0,ec.UT)(el.av.spaces.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))},ed=r(60589),ef=function(e){var t=eu({id:e.id}),r=t.data,n=t.isLoading,a=t.isError;return n?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):a?(0,i.jsx)("div",{className:"post__space",children:(0,i.jsx)("span",{children:(0,o.t)("settings.workflows.history.errors.space.not_found")})}):(0,i.jsxs)("div",{className:"post__space",children:[(0,ed.xt)(r)&&(0,i.jsx)("span",{children:null==r?void 0:r.emoji}),(0,i.jsx)("span",{children:null==r?void 0:r.name})]})},em=function(e){var t=e.body,r=e.url,n=t.executor_member_id,a=new URL(r).pathname.split("/")[5];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.space")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ef,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},ep=r(441342),eb=function(e){var t=((e.action||{}).api_params||{}).space_id,r=(0,ep.T4)({spaceId:t}),n=r.data,a=r.isLoading;return n||a?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","space"])}),(0,i.jsx)("div",{children:a?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(p.Z.LabelSm,{children:n.name})})]})}):null};eb.propTypes={action:R().object};var eh={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_space"),value:"add_community_member_to_space",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-space-directory",size:16,className:"!h-4 !w-4"}),formComponent:es,viewComponent:eb,historyDetailViewComponent:em,icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},ey={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_space"),value:"remove_community_member_from_space",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-space-directory-remove",size:16,className:"!h-4 !w-4"}),formComponent:es,viewComponent:eb,historyDetailViewComponent:em,icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},ev="settings.workflows.form",eg=function(){var e=(0,b.B2)().paramsPath,t=(0,ep.e2)(),r=t.records,n=t.isLoading,a=t.isError,s=r.map(function(e){return{value:e.id,label:e.name}});return n?(0,i.jsx)(m.a,{center:!0}):a?(0,i.jsx)(p.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)([ev,"space_groups.fetch_failed"])})}):(0,i.jsx)(f.N,{name:"".concat(e,".space_group_id"),label:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)([ev,"select_space_group"])}),options:s,rules:{required:(0,o.t)([ev,"errors.required"])},emptyMessage:(0,o.t)([ev,"errors.space_groups.not_found"])})};eg.propTypes={};var e_=function(e){var t=e.id,r=e.options;return(0,B.useQuery)(["space-group",t],function(){return(0,ec.UT)(el.av.spaceGroups.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))},ex=function(e){var t=e_({id:e.id}),r=t.data;return t.isLoading?(0,i.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"}):(0,i.jsx)("span",{children:r.name})};ex.propTypes={id:R().string.isRequired};var ej=function(e){var t=e.body,r=e.url,n=t.executor_member_id,a=new URL(r).pathname.split("/")[5];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.space_group")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(ex,{id:a})})]}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.action_messages.member")})}),(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsx)(v.q,{communityMemberId:n})})]})]})},ew=function(e){var t=((e.action||{}).api_params||{}).space_group_id,r=(0,ep.p7)(t),n=r.data,a=void 0===n?{}:n,s=r.isLoading;return a||s?(0,i.jsx)(w.P,{children:(0,i.jsxs)(w.P.Section,{children:[(0,i.jsx)(w.P.Title,{children:(0,o.t)(["settings.workflows.view","space_group"])}),(0,i.jsx)("div",{children:s?(0,i.jsx)(j.C,{isLoading:!0}):(0,i.jsx)(p.Z.LabelSm,{children:a.name})})]})}):null};ew.propTypes={action:R().object};var eO={label:(0,o.t)("settings.workflows.form.actions.add_community_member_to_space_group"),value:"add_community_member_to_space_group",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder",size:16,className:"!h-4 !w-4"}),formComponent:eg,viewComponent:ew,historyDetailViewComponent:ej,icon:"user",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},eS={label:(0,o.t)("settings.workflows.form.actions.remove_community_member_from_space_group"),value:"remove_community_member_from_space_group",group:(0,o.t)("settings.workflows.form.action_groups.space_and_space_group"),leftAddon:(0,i.jsx)(l.JO,{type:"16-folder-remove",size:16,className:"!h-4 !w-4"}),formComponent:eg,viewComponent:ew,historyDetailViewComponent:ej,icon:"user-remove",isApplicableToMembersOnly:!0,availablePlanTier:a.PQ.HIGHER_TIER_PLAN_ONLY},ek=r(203178),eN=[C.w,T.m,I.c,P.o,N.I,A.l,V.Cz,V.MK,er,en,V.Ah,eh,ey,eO,eS,S,k,ek.l,ei.mD,ei._C,ei.T1,ei.s4,G,V.zW,V.TQ,V.KY,q.I,n.s,V.r1,E.M]},552634:function(e,t,r){"use strict";r.d(t,{U0:()=>i.U,mR:()=>a,LK:()=>n.L});var n=r(17769),i=r(685149),o=i.U.reduce(function(e,t){return e.set(t.value,t.icon),e},new Map),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return o.get(e)||t}},17769:function(e,t,r){"use strict";r.d(t,{f:()=>f,L:()=>p});var n=r(739792),i=r(604118),o=r(920153),a=r(441342),s=function(){var e=(0,a.wh)().currentCommunitySettings;return!!(null==e?void 0:e.paywalls_add_coupon_to_subscription_action_enabled)},l=r(190735),c=r(850362),u=r(685149),d=r(293919),f=function(e){return void 0===e||("function"==typeof e?e():e)},m=new Map(l.r.map(function(e){return[e.value,e.label]})),p=function(){var e=(0,o.Z)(),t=s(),r=(0,c.D)(),a=r.type,l=r.triggerType,p=r.isDynamic,b=e?u.U:u.U.filter(function(e){return f(e.released)});return t||(b=b.filter(function(e){return e.value!==d.s4.value})),{eligibleActions:(b=b.filter(function(e){return!e.availability||e.availability.includes(a)})).map(function(e){if((0,i.E5)(e.value,l))return e;if(p){var t,r,o=m.get(l)||l,a=(0,n.t)("workflows_v2.action_selector.action_restricted_by_trigger",{trigger:o});return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={disabled:!0,disabledReason:a},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}}).filter(Boolean)}}},604118:function(e,t,r){"use strict";r.d(t,{E5:()=>a,RG:()=>i});var n=JSON.parse('{"actions":{"ai_agents_post_comment":{"limited_to_triggers":["post_approved","post_liked","post_published"]},"ai_agents_report_post":{"limited_to_triggers":["post_published"]},"ai_agents_report_comment":{"limited_to_triggers":["post_comment_created"]},"ai_agents_hide_post_from_featured_areas":{"limited_to_triggers":["post_approved","post_liked","post_published"]},"ai_agents_edit_topics":{"limited_to_triggers":["post_published"]},"ai_agents_rename_post_title":{"limited_to_triggers":["post_published"]},"ai_agents_send_dm":{"limited_to_triggers":["community_member_joined_community","event_starts_in_an_hour","event_published","event_ended_for_member","community_member_attended_live_event","community_member_rsvps_to_event","community_member_rsvps_to_recurring_event","community_member_completed_course","community_member_completed_lesson","community_member_completed_section","community_member_passed_quiz","community_member_failed_quiz","community_member_joined_space","community_member_leaves_space","community_member_joined_space_group","community_member_leaves_space_group","community_member_purchases_paywall","community_member_subscribed_to_paywall","community_member_unsubscribed_from_paywall","community_member_started_paywall_trial","community_member_ended_trial_without_subscription","community_member_submitted_quiz","post_published","post_liked","post_flagged","post_approved","post_rejected","post_comment_created","post_comment_flagged","post_comment_approved","post_comment_rejected","received_form_submission","community_member_added_to_access_group","community_member_removed_from_access_group","contact_tagged","contact_untagged","community_member_profile_field_updated","community_member_email_changed","community_member_sent_dm_to_admin","gamification_member_leveled_up","gamification_member_leveled_down"]}}}'),i=function(e){var t;return e in n.actions&&!!(null==(t=n.actions[e])?void 0:t.limited_to_triggers)},o=function(e){var t;return e in n.actions&&(null==(t=n.actions[e])?void 0:t.limited_to_triggers)||[]},a=function(e,t){return!i(e)||!!t&&o(e).includes(t)}},67093:function(e,t,r){"use strict";r.d(t,{t:()=>l});var n=r(552676),i=r(739792),o=r(957363),a=r(664657),s=r(293291),l=function(e){var t=e.communityBotProfileId,r=(0,s.q_)({id:t}),l=r.data;if(r.isLoading)return(0,n.jsx)("span",{className:"bg-tertiary block h-4 w-full animate-pulse rounded"});if(!l)return(0,n.jsx)("span",{className:"text-sm",children:(0,i.t)("settings.workflows.action_messages.ai_agents.missing_agent")});var c=l.name,u=l.avatar_url;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"pl-2",children:(0,n.jsx)("div",{className:"float-left",children:u?(0,n.jsx)(a.W,{size:"6",src:u,name:c}):(0,n.jsx)(o.JO,{type:"24-ai-bot",size:24,className:"!h-6 !w-6"})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:c})]})}},848224:function(e,t,r){"use strict";r.d(t,{k:()=>o});var n=r(932699),i=r(28116),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rules;return(void 0===t?[]:t).filter(function(e){return!(0,i.N)(e)}).map(function(e){return(0,n.omit)(e,["isInitialOpen"])})}},317184:function(e,t,r){"use strict";r.d(t,{Y:()=>c});var n=r(932699),i=r(227851),o=r(759705),a=r(776937),s=r(320784),l=r(848224),c=function(e){var t=(0,(0,i.Gc)().watch)("audience.rules")||{},r=(0,l.k)(t);e&&r.push({key:"name",filter_type:"contains",value:e});var c=!(0,n.isEmpty)(r),u=(0,o._)({filters:r,scope:{status:a.vC.ALL,exclude_empty_name:!1,exclude_empty_profiles:!1},options:{keepPreviousData:!0},isAdminScope:!0}),d=u.totalQueryAudience,f=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(u,["totalQueryAudience"]);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({hasFilters:c,formattedCount:(0,s.V)(d),count:d},f)}},814998:function(e,t,r){"use strict";r.d(t,{q:()=>l});var n=r(552676),i=r(932699),o=r(739792),a=r(664657),s=r(955269),l=function(e){var t=e.communityMemberId,r=e.withDeleted,l=(0,s.y)({ids:[t],withDeleted:void 0===r||r,enabled:!!t}),c=l.data;l.isLoading;var u=(0,i.head)(null==c?void 0:c.records);if(!u)return(0,n.jsx)("span",{className:"text-sm",children:(0,o.t)("deactivated_member")});var d=u.name,f=u.avatar_url;return u.is_deleted?(0,n.jsxs)("span",{className:"break-normal text-sm",children:[(0,o.t)("deactivated_member")," (",d,")"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"pl-2",children:(0,n.jsx)("div",{className:"float-left",children:(0,n.jsx)(a.W,{size:"6",src:f,name:d})})}),(0,n.jsx)("span",{className:"break-normal text-sm",children:d})]})}},958892:function(e,t,r){"use strict";r.d(t,{C:()=>s});var n=r(552676),i=r(619803),o=r.n(i),a=r(381636),s=function(e){var t=e.icon,r=e.text,i=e.isLoading;return(0,n.jsxs)("span",{className:o()("inline-flex h-6 items-center gap-1 rounded-full border px-2",{"bg-tertiary border-tertiary w-20 animate-pulse":i,"border-dark":!i}),children:[t&&(0,n.jsx)("span",{className:"flex",children:t}),r&&(0,n.jsx)(a.Z.LabelXs,{weight:"medium",color:"text-default",children:r})]})}},194281:function(e,t,r){"use strict";r.d(t,{d:()=>u});var n=r(552676),i=r(739792),o=r(39905),a=r(434519),s=r(900795),l=r(381636),c=function(e){if(!e||0===e.length)return"";var t=e.map(function(e){return e.name});return 1===t.length?t[0]:new Intl.ListFormat(i.ZP.locale,{style:"long",type:"conjunction"}).format(t)},u=function(e){var t=e.disabledAgents,r=e.onCancel,u=e.onPublish,d=e.variant;return(0,n.jsxs)(a.u_.Content,{size:"lg",children:[(0,n.jsx)(a.u_.Header,{children:(0,n.jsx)(a.u_.Title,{children:(0,i.t)("settings.workflows.confirm_modal.ai_agent_currently_disabled",{count:t.length})})}),(0,n.jsx)(a.u_.Body,{children:(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)(l.Z.BodySm,{children:(0,n.jsx)(s.w,{content:(0,i.t)("settings.workflows.confirm_modal.ai_agent_disabled_description",{count:t.length,bot_name:c(t)})})})})}),(0,n.jsxs)(a.u_.Footer,{className:"flex w-full items-center justify-end gap-3",children:[(0,n.jsx)(o.z,{variant:"secondary",onClick:r,children:"edit"===(void 0===d?"edit":d)?(0,i.t)("settings.workflows.confirm_modal.edit_workflow"):(0,i.t)("cancel")}),(0,n.jsx)(o.z,{variant:"circle",onClick:u,children:(0,i.t)("settings.workflows.confirm_modal.enable_and_activate")})]})]})}},604523:function(e,t,r){"use strict";r.d(t,{C:()=>j});var n=r(552676),i=r(275271),o=r(131906),a=r(779774),s=r(739792),l=r(251630),c=r(134870),u=r(767900),d=r(434519),f=r(60878),m=r(837412),p=r(227851),b=r(39905),h=r(381636),y=r(187008),v="settings.workflows.one_time_schedule_modal",g=function(){var e=(0,p.Gc)().watch,t=!!e("scheduler.last_run_at"),r=e("scheduler.last_run_at");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.u_.Body,{children:[(0,n.jsx)(h.Z.LabelMd,{weight:"semibold",children:(0,s.t)([v,"date_and_time"])}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(u.l.Item,{name:"scheduler.last_run_at",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:" ",children:(0,n.jsx)(y.q,{name:"scheduler.last_run_at",datePlaceholder:(0,s.t)([v,"date"]),timePlaceholder:(0,s.t)([v,"time"]),minDate:new Date,dataTestId:"last_run_at"})})}),r&&(0,n.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,n.jsx)(h.Z.LabelSm,{weight:"medium",children:(0,s.t)("".concat(v,".summary"),{runAt:(0,c.w)({dateTime:new Date(r),format:"date_time_with_short_timezone"})})})})]}),(0,n.jsx)(d.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(b.z,{variant:"circle",disabled:!t,children:(0,s.t)("".concat(v,".submit"))})})]})};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var t,r,p=e.workflowId,b=e.onCancel,h=e.setIsConfirmContent,y=e.hasRuns,v=e.schedule,_=(0,f.pm)(),j="settings.workflows.one_time_schedule_modal",w=x((0,i.useState)(!1),2),O=w[0],S=w[1],k=x((0,i.useState)({}),2),N=k[0],P=k[1],C=v.id,A=v.isReschedule,I=(0,l.WX)(),T=function(e,t,r){var n=new Date(r.scheduler.last_run_at).toISOString();return C?A?I.reschedule({workflowId:e,id:C,body:{last_run_at:n,schedule_type:"one_time",do_not_skip_tasks:r.do_not_skip_tasks}}):I.updateOneTimeSchedule({workflowId:e,id:C,body:{last_run_at:n,do_not_skip_tasks:r.do_not_skip_tasks}}):I.createOneTimeSchedule({workflowId:e,body:{last_run_at:n}})},E=(0,o.useMutation)(function(e){return T(p,v,e)},{onSuccess:function(){h(!0)},onError:function(e){"message"in e&&_.error(null==e?void 0:e.message)}}).mutate,L=A?"":null==v?void 0:v.last_run_at;return O?(0,n.jsx)(m.R,{onSubmit:function(e){E(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},N,e))},doNotSkipTasks:null!=(r=null==v||null==(t=v.do_not_skip_tasks)?void 0:t.toString())?r:"false",onCancel:b}):(0,n.jsxs)(d.u_.Content,{size:"md",children:[(0,n.jsxs)(d.u_.Header,{children:[(0,n.jsx)(d.u_.Title,{size:"md",children:(0,s.t)([j,"title"])}),(0,n.jsx)(d.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(d.u_.CloseButton,{onClick:b})})]}),(0,n.jsx)(u.l,{defaultValues:{scheduler:{last_run_at:L}},validationSchema:a.Ry().shape({scheduler:a.Ry().shape({last_run_at:a.hT().required().min(new Date,(0,s.t)([j,"past_error"],{currentDateTime:(0,c.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})}),onSubmit:function(e){P(e),y?S(!0):E(e)},children:(0,n.jsx)(g,{})})]})}},837412:function(e,t,r){"use strict";r.d(t,{R:()=>u});var n=r(552676),i=r(932699),o=r(739792),a=r(434519),s=r(39905),l=r(767900),c=r(633378),u=function(e){var t=e.doNotSkipTasks,r=e.onCancel,u=e.onSubmit,d=e.onBack;return(0,n.jsxs)(a.u_.Content,{onClose:r,children:[(0,n.jsxs)(a.u_.Header,{children:[(0,n.jsx)(a.u_.Title,{children:(0,o.t)("settings.workflows.recurring_schedule_modal.rerun_settings")}),(0,n.jsx)(a.u_.CloseButton,{onClick:r}),(0,i.isFunction)(d)&&(0,n.jsx)(a.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(a.u_.BackButton,{onClick:d})})]}),(0,n.jsx)(l.l,{defaultValues:{do_not_skip_tasks:null!=t?t:"false"},onSubmit:u,children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,n.jsx)(c.n,{}),(0,n.jsx)(a.u_.Footer,{children:(0,n.jsx)(s.z,{variant:"circle",full:!0,large:!0,type:"submit",children:(0,o.t)("settings.workflows.rerun_modal.continue")})})]})})]})}},180842:function(e,t,r){"use strict";r.d(t,{L:()=>ea});var n=r(552676),i=r(275271),o=r(704783),a=r(227851),s=r(131906),l=r(756468),c=r(739792),u=r(251630),d=r(624804),f=r(69831),m=r(434519),p=r(60878),b=r(441342),h=function(){var e=(0,b.wh)().currentCommunitySettings;return!!(null==e?void 0:e.modify_schedule_enabled)},y=r(217123),v=r(932699),g=r(134870),_=r(957363),x=r(39905),j=r(381636),w=r(767900);function O(e){var t=e.name,r=e.label,i=e.value,o=(0,a.Gc)().register;return(0,n.jsxs)("label",{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"checkbox",value:i,className:"peer sr-only"},o(t))),(0,n.jsx)("span",{className:"border-disabled peer-checked:border-secondary peer-checked:bg-secondary flex flex-wrap items-center justify-center rounded-md border px-3 py-2 uppercase",children:(0,n.jsx)(j.Z.LabelXxs,{weight:"semibold",children:r})})]})}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r=e.days,o=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1];return((0,i.useEffect)(function(){s(!0)},[]),a)?(0,n.jsx)(w.l.Item,{name:"days_of_week",label:(0,c.t)(["settings.workflows.recurring_schedule_modal","repeats_every"]),hideBorder:!0,hideDescription:!0,labelClassName:"mb-2",children:(0,n.jsx)("div",{className:"flex flex-wrap justify-between gap-y-2",children:r.map(function(e){return(0,n.jsx)(O,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"days_of_week"},e),e.value)})})}):null},N=r(439788),P=r(187008),C=r(619803),A=r.n(C),I=r(489931),T=r.n(I),E=r(179089);function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function D(e){var t=e.minDate,r=e.maxDate,o=e.name,s=e.disabled,l=e.placeholder,c=L(e,["minDate","maxDate","name","disabled","placeholder"]),u=(0,i.useRef)(null),d=(0,i.useRef)((0,v.uniqueId)("date-picker-portal-"));return(0,n.jsx)(a.Qr,{name:o,render:function(e){var i=e.field,o=i.value,a=i.ref,f=L(e.field,["value","ref"]),m=o?new Date(o):null,p=(0,E.l)([a,u]);return(0,n.jsxs)("div",{className:"relative mr-1",children:[(0,n.jsx)(T(),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({selected:m,dateFormat:"MMM d, yyyy",minDate:t,maxDate:r,disabled:s,placeholderText:l,ref:p,portalId:d,popperClassName:"!z-[1080] !w-auto",className:A()({"!bg-secondary !border-primary":s})},f,c)),(0,n.jsx)(_.JO,{type:"cheveron-down",className:"hover:text-darkest absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer",onClick:function(){var e,t;null==(t=u.current)||null==(e=t.input)||e.focus()}})]})}})}var M="settings.workflows.recurring_schedule_modal",R="never",B=[{label:(0,c.t)([M,R]),value:R},{label:(0,c.t)([M,"on"]),value:"on"}],z=function(){var e=new Date;return e.setDate(e.getDate()-1),e};function F(){var e,t=(0,a.Gc)(),r=t.watch,o=t.setValue,s=h(),l=r("first_run_at"),u=r("last_run_at"),d=r("ends_on"),f=r("has_schedule_run_before"),m=(0,i.useMemo)(function(){return l?new Date(l):new Date},[l]);(0,i.useEffect)(function(){d===R&&o("last_run_at",null)},[d,o]);var p=f&&s;return(0,n.jsxs)("div",{className:"flex flex-col",children:[p?(0,n.jsx)(w.l.Item,{name:"next_run_at",label:(0,c.t)([M,"time"]),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(P.q,{name:"next_run_at",timePlaceholder:(0,c.t)([M,"select_time"]),maxDate:u?new Date(u):void 0,classNameDate:"hidden",classNameTime:"ml-[-0.25rem] w-full",minDate:z()})}):(0,n.jsx)(w.l.Item,{name:"first_run_at",label:(0,c.t)([M,"first_run"]),hideDescription:!0,isDisabled:f,hideBorder:!0,children:(0,n.jsx)(P.q,{name:"first_run_at",datePlaceholder:(0,c.t)([M,"select_date"]),timePlaceholder:(0,c.t)([M,"select_time"]),maxDate:u?new Date(u):void 0,disabled:f})}),(0,n.jsxs)("div",{className:"flex gap-x-2",children:[(0,n.jsx)(w.l.Item,{name:"ends_on",label:(0,c.t)("settings.workflows.recurring_schedule_modal.ends"),hideDescription:!0,hideBorder:!0,className:"flex-1",children:(0,n.jsx)(N.N,{name:"ends_on",label:null,options:B})}),(0,n.jsx)(w.l.Item,{name:"last_run_at",emptyLabel:!0,hideDescription:!0,hideBorder:!0,placeholder:(0,c.t)([M,"select_date"]),className:"flex-1",children:(0,n.jsx)(D,{name:"last_run_at",minDate:m,disabled:d===(null==(e=(0,v.head)(B))?void 0:e.value)})})]})]})}var U="settings.workflows.recurring_schedule_modal",Z=function(e){var t=h();return{prefix:e&&t?(0,c.t)("".concat(U,".workflow_already_started")):(0,c.t)("".concat(U,".workflow_will_start_running")),midSection:e&&t?(0,c.t)("".concat(U,".workflow_will_now_run")):(0,c.t)("".concat(U,".once_started_workflow_will_run"))}},G="settings.workflows.recurring_schedule_modal",q=[{value:"monday",label:(0,c.t)([G,"mon"])},{value:"tuesday",label:(0,c.t)([G,"tue"])},{value:"wednesday",label:(0,c.t)([G,"wed"])},{value:"thursday",label:(0,c.t)([G,"thu"])},{value:"friday",label:(0,c.t)([G,"fri"])},{value:"saturday",label:(0,c.t)([G,"sat"])},{value:"sunday",label:(0,c.t)([G,"sun"])}],V={daily:"every_day_at_until",weekly:"every_week_on_until",monthly:"every_month_on_until",yearly:"every_year_on_until"},W={daily:"every_day_at",weekly:"every_week_on",monthly:"every_month_on",yearly:"every_year_on"},H=function(e){var t=e.data,r=e.onBack,i=e.onCancel,o=e.onPublish,a=(null==t?void 0:t.do_not_skip_tasks)=="true"?(0,c.t)("settings.workflows.rerun_modal.all_members"):(0,c.t)("settings.workflows.rerun_modal.only_new_members"),s=t.ends_on,u=t.frequency,d=t.first_run_at,f=t.last_run_at,p=t.days_of_week,b=t.next_run_at,h=t.has_schedule_run_before,w=Z(h),O=w.prefix,S=w.midSection,k=new Date(h&&b?b:d),N=[{message:function(){var e=("on"===s?V:W)[u];(0,l.Z)(e,"Message by frequency should be selected.");var t=null;if("weekly"===u){var r=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),n=p.map(function(e){var t,r=null==(t=q.find(function(t){return t.value===e}))?void 0:t.label;return(0,v.capitalize)(r)});t=r.format(n)}return(0,c.t)(["settings.workflows.recurring_schedule_modal",e],{start_time_at:(0,g.w)({dateTime:new Date(d),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(f),format:"long_date"}),day_of_month:d?(0,y.default)(new Date(d),"do"):null,repeat_days:t,prefix:O,mid_section:S,recurring_time:d?(0,g.w)({dateTime:new Date(d),format:"short_month_and_date"}):null,recurring_hour_minutes:(0,g.w)({dateTime:k,format:"short_time"})})}(),icon:"16-clock"},{message:a,icon:"16-members"}],P=h?(0,c.t)("settings.workflows.confirm_modal.modify_schedule"):(0,c.t)("settings.workflows.confirm_modal.schedule");return(0,n.jsxs)(m.u_.Content,{size:"md",children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"md",children:(0,c.t)("settings.workflows.confirm_modal.schedule_summary")}),(0,n.jsx)(m.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(m.u_.CloseButton,{onClick:i})}),(0,v.isFunction)(r)&&(0,n.jsx)(m.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(m.u_.BackButton,{onClick:r})})]}),(0,n.jsx)(m.u_.Body,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 pt-5",children:[(0,n.jsx)(j.Z.LabelMd,{weight:"semibold",children:(0,c.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,n.jsx)("ul",{className:"flex list-none flex-col gap-y-4",children:N.map(function(e){var t=e.message,r=e.icon;return(0,n.jsxs)("li",{className:"text-default flex items-center gap-x-2",children:[(0,n.jsx)(_.JO,{type:r,size:16,className:"mt-1 !h-4 !w-4 shrink-0 !self-start"}),(0,n.jsx)(j.Z.BodySm,{weight:"font-medium",children:t})]},t)})})]})}),(0,n.jsx)(m.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(x.z,{variant:"circle",onClick:o,children:P})})]})},Q=r(779774);function K(e){var t=e.i18n,r=e.isMessageVisible,i=e.variables,o=(0,a.Gc)().watch,s=o("first_run_at"),l=o("last_run_at"),u=o("next_run_at"),d=o("ends_on"),f=o("has_schedule_run_before"),m=new Date(f?u:s),p=Z(f),b=p.prefix,h=p.midSection;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(F,{}),(null!=r?r:!!s&&!("on"===d&&!l))&&(0,n.jsx)(j.Z.LabelSm,{weight:"medium",children:(0,c.t)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({start_time_at:(0,g.w)({dateTime:new Date(s),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(l),format:"long_date"}),prefix:b,mid_section:h,recurring_hour_minutes:(0,g.w)({dateTime:m,format:"short_time"})},void 0===i?{}:i))})]})}var J=function(e,t){return"on"===(0,(0,a.Gc)().watch)("ends_on")?e:t},$={daily:function(){var e=J("every_day_at_until","every_day_at");return(0,n.jsx)(K,{i18n:["settings.workflows.recurring_schedule_modal",e]})},weekly:function(){var e=(0,a.Gc)().watch,t=e("first_run_at"),r=e("last_run_at"),o=e("next_run_at"),s=e("days_of_week"),l=e("ends_on"),u=e("has_schedule_run_before"),d=new Date(u?o:t),f=Z(u),m=f.prefix,p=f.midSection,b=(0,i.useMemo)(function(){if(!(null==s?void 0:s.length))return"";var e=new Intl.ListFormat(void 0,{style:"long",type:"conjunction"}),t=s.map(function(e){var t,r=null==(t=q.find(function(t){return t.value===e}))?void 0:t.label;return(0,v.capitalize)(r)});return e.format(t)},[s]);return(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(k,{days:q}),(0,n.jsx)(F,{})]}),!!t&&!!s.length&&!("on"===l&&!r)&&(0,n.jsx)(j.Z.LabelSm,{weight:"medium",children:(0,c.t)([G,"on"===l?"every_week_on_until":"every_week_on"],{start_time_at:(0,g.w)({dateTime:new Date(t),format:"date_time_with_short_timezone"}),end_time_at:(0,g.w)({dateTime:new Date(r),format:"long_date"}),repeat_days:b,prefix:m,mid_section:p,recurring_hour_minutes:(0,g.w)({dateTime:d,format:"short_time"})})})]})},monthly:function(){var e=(0,(0,a.Gc)().watch)("first_run_at"),t=J("every_month_on_until","every_month_on");return(0,n.jsx)(K,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{day_of_month:e?(0,y.default)(new Date(e),"do"):null}})},yearly:function(){var e=(0,(0,a.Gc)().watch)("first_run_at"),t=J("every_year_on_until","every_year_on");return(0,n.jsx)(K,{i18n:["settings.workflows.recurring_schedule_modal",t],variables:{recurring_time:e?(0,g.w)({dateTime:new Date(e),format:"short_month_and_date"}):null}})}};function X(){var e=$[(0,(0,a.Gc)().watch)("frequency")];return(0,n.jsx)(e,{})}var Y=[{value:"daily",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_day")},{value:"weekly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_week")},{value:"monthly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_month")},{value:"yearly",label:(0,c.t)("settings.workflows.recurring_schedule_modal.every_year")}];function ee(){var e=(0,a.Gc)().watch,t=e("frequency"),r=e("first_run_at"),o=e("last_run_at"),s=e("days_of_week"),l=e("ends_on"),u=(0,i.useMemo)(function(){return!!t&&("weekly"!==t||!!s.length)&&("on"!==l||!!o)&&!!r},[t,r,o,l,s]);return(0,n.jsxs)("div",{className:"flex flex-col gap-y-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(w.l.Item,{name:"frequency",label:(0,c.t)("settings.workflows.recurring_schedule_modal.frequency"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(N.N,{name:"frequency",label:null,options:Y})}),(0,n.jsx)(X,{})]}),(0,n.jsx)(x.z,{type:"submit",variant:"circle",disabled:!u,children:(0,c.t)("continue")})]})}var et=function(e){var t=e.schedule,r=e.formState,o=e.onSubmit,a=e.onCancel,s=t.isReschedule,l=(0,i.useMemo)(function(){return Q.Ry().shape({first_run_at:Q.Vo(function(){return(null==t?void 0:t.has_run_but_not_completed)?Q.hT().required():Q.hT().required().min(new Date,(0,c.t)(["settings.workflows.one_time_schedule_modal","past_error"],{currentDateTime:(0,g.w)({dateTime:new Date,format:"date_time_with_short_timezone"})}))})})},[null==t?void 0:t.has_run_but_not_completed]);return(0,n.jsxs)(m.u_.Content,{onClose:a,children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{children:(0,c.t)("".concat("settings.workflows.recurring_schedule_modal",".title"))}),(0,n.jsx)(m.u_.CloseButton,{onClick:a})]}),(0,n.jsx)(m.u_.Body,{className:"pb-6",children:(0,n.jsx)(w.l,{defaultValues:s?{frequency:"weekly",days_of_week:[],ends_on:"never"}:r||{frequency:(null==t?void 0:t.frequency)||"weekly",days_of_week:(null==t?void 0:t.days_of_week)||[],ends_on:(null==t?void 0:t.last_run_at)?"on":"never",first_run_at:null==t?void 0:t.first_run_at,last_run_at:null==t?void 0:t.last_run_at,next_run_at:null==t?void 0:t.next_run_at,has_schedule_run_before:null==t?void 0:t.has_run_but_not_completed},onSubmit:o,validationSchema:l,children:(0,n.jsx)(ee,{})})})]})},er=r(837412);function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e){var t,r,b,y=e.workflowId,v=e.onCancel,g=e.schedule,_=e.onPublish,x=e.isLoading,j=(0,p.pm)(),w=(0,s.useQueryClient)(),O=(0,a.Gc)(),S=g.id,k=g.isReschedule,N=eo((0,i.useState)(!1),2),P=N[0],C=N[1],A=eo((0,i.useState)(null),2),I=A[0],T=A[1],E=eo((0,i.useState)(null),2),L=E[0],D=E[1],M=eo((0,d.k)(!1),2),R=M[0],B=M[1],z=h(),F=(0,u.WX)(),U=function(e,t){var r=t.last_run_at?(0,o.default)(new Date(t.last_run_at)).toISOString():null,n=t.next_run_at?new Date(t.next_run_at).toISOString():null,i=new Date(t.first_run_at).toISOString(),a=Intl.DateTimeFormat().resolvedOptions().timeZone,s=t.frequency,l=t.days_of_week,c=t.do_not_skip_tasks;return S?k?F.reschedule({workflowId:e,id:S,body:{last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,schedule_type:"recurring",do_not_skip_tasks:c,tz:a}}):F.updateRecurringSchedule({workflowId:e,id:S,body:ei({last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,do_not_skip_tasks:c,tz:a},z&&{next_run_at:n})}):F.createRecurringSchedule({workflowId:e,body:{last_run_at:r,first_run_at:i,frequency:s,days_of_week:l,do_not_skip_tasks:c,tz:a}})},Z=(0,s.useMutation)(function(e){return U(y,e)},{onSuccess:function(e){B(),O.setValue("schedule",e),w.invalidateQueries(["workflows",y])},onError:function(e){"message"in e&&j.error(null==e?void 0:e.message)}}).mutate,G=function(e){D(e),(0,l.Z)(I,"formData should be defined on rerun submit"),Z(ei({},I,e))};if(x)return(0,n.jsx)(m.u_.Content,{children:(0,n.jsx)(m.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(f.u,{title:(0,c.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,c.t)("settings.workflows.we_are_preparing")})})});if((null==I?void 0:I.has_schedule_run_before)&&z){var q,V,W=g.do_not_skip_tasks?"true":"false";return(0,n.jsx)(H,{onCancel:v,onBack:v,onPublish:function(){G({do_not_skip_tasks:W}),_()},data:(q=ei({},I),V=V={do_not_skip_tasks:W},Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(V)).forEach(function(e){Object.defineProperty(q,e,Object.getOwnPropertyDescriptor(V,e))}),q)})}return R&&L&&I?(0,n.jsx)(H,{onCancel:v,onBack:B,onPublish:_,data:ei({},I,L)}):P&&I?(0,n.jsx)(er.R,{doNotSkipTasks:null!=(b=null!=(r=null==L?void 0:L.do_not_skip_tasks)?r:null==(t=g.do_not_skip_tasks)?void 0:t.toString())?b:"false",onCancel:v,onSubmit:G,onBack:function(){C(!1),D(null)}}):(0,n.jsx)(et,{schedule:g,formState:I,onCancel:v,onSubmit:function(e){T(e),C(!0)}})}},633378:function(e,t,r){"use strict";r.d(t,{n:()=>f});var n=r(552676),i=r(227851),o=r(739792),a=r(637811),s=r(434519),l=r(99595),c=r(381636),u="settings.workflows.rerun_modal.form",d=[{value:"true",label:(0,o.t)([u,"include_all_members.title"]),description:(0,o.t)([u,"include_all_members.description"])},{value:"false",label:(0,o.t)([u,"only_new_members.title"]),description:(0,o.t)([u,"only_new_members.description"])}],f=function(){var e=(0,i.Gc)().register;return(0,n.jsxs)(s.u_.Body,{children:[(0,n.jsx)(c.Z.LabelMd,{weight:"semibold",children:(0,o.t)([u,"title"])}),(0,n.jsx)("div",{className:"flex flex-col pt-5",children:(0,n.jsx)(a.p,{children:d.map(function(t){var r=t.value,i=t.label,o=t.description;return(0,n.jsx)(l.Y,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({id:"rerunbody-radio-".concat(r),label:i,description:o,value:r},e("do_not_skip_tasks")),r)})})})]})}},187008:function(e,t,r){"use strict";r.d(t,{q:()=>s});var n=r(552676),i=r(275271),o=r(932699),a=r(864608);function s(e){var t=e.name,r=e.minDate,s=void 0===r?new Date:r,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["name","minDate"]),c=(0,i.useRef)((0,o.uniqueId)("date-time-picker-portal-")).current;return(0,n.jsx)(a.x,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:t,portalId:c,popperClassName:"!z-[1080] !w-auto",minDate:s},l))}},533617:function(e,t,r){"use strict";r.d(t,{W:()=>l});var n=r(552676),i=r(240507),o=r.n(i),a=r(619803),s=r.n(a),l=function(e){var t=e.children,r=e.className;return(0,n.jsx)("main",{className:s()("bg-primary flex h-full flex-col",r),children:t})};l.propTypes={children:o().node,className:o().string}},83769:function(e,t,r){"use strict";r.d(t,{i:()=>P});var n=r(552676),i=r(275271),o=r(739792),a=r(751169),s=r(381636),l=r(701168),c=r(903225),u=r(547144),d=r(957363),f=r(240507),m=r.n(f),p=function(e){var t=e.shouldTruncate,r=e.children;return(0,n.jsx)("div",{style:void 0===t||t?{display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical",overflow:"hidden"}:{},children:(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:r})})};p.propTypes={shouldTruncate:m().bool,children:m().node};var b=r(619803),h=r.n(b),y=r(392042),v=r.n(y);let g=function(e){var t,r,i=e.children,o=e.onClick,a=e.centerContent,s=v()(o);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:h()("bg-primary border-primary hover:shadow-xs hover:border-secondary flex h-auto w-full max-w-xs flex-col gap-5 rounded-xl border p-5 transition-colors duration-75",{"cursor-pointer":s,"items-center justify-center text-center":void 0!==a&&a})},s?{role:"button",onClick:o}:{}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};var _=function(e){var t=e.onClose,r=(0,c.k6)();return(0,n.jsxs)(g,{onClick:function(){null==t||t(),r.push(u.o0.select_type())},centerContent:!0,children:[(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("div",{className:"text-default bg-secondary flex h-10 min-w-[2.5rem] cursor-pointer items-center justify-center rounded-full",children:(0,n.jsx)(d.JO,{type:"plus-v2",size:16,useWithFillCurrentColor:!0,className:"!h-5 !w-5"})})}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)(p,{children:(0,o.t)("settings.onboarding.tabs.workflows.actions.create_custom")})})]})},x=r(239368),j=r(701790),w=r(788987),O="settings.workflows.table.type",S=function(e){var t=e.selectedTemplateType,r=e.setSelectedTemplateType,i=[{label:(0,o.t)([O,"all"]),value:"all"},{label:(0,o.t)([O,"dynamic"]),value:"dynamic"},{label:(0,o.t)([O,"bulk_action"]),value:"bulk_action"}];return(0,n.jsx)(w.m,{selectedTemplateType:t,setSelectedTemplateType:r,options:i,translationKey:O})};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var N="settings.workflows.templates",P=function(e){var t,r=e.shouldIncludeCreateButton,c=e.onClose,u=e.shouldAutoAdjust,d=(0,j.r)(),f=d.templates,m=d.isLoadingTemplates,p=d.selectedCategory,b=(t=(0,i.useState)("all"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return k(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,i.useMemo)(function(){return f.filter(function(e){return"all"===h||e.template_type===h})},[f,h]);return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[!r&&(0,n.jsx)(s.Z.TitleMd,{children:(0,o.t)([N,"title",p])}),(0,n.jsx)(S,{selectedTemplateType:h,setSelectedTemplateType:y}),(0,n.jsx)(a.a,{show:m}),!m&&(0,n.jsx)(s.Z.LabelXs,{weight:"medium",children:(0,o.t)([N,"template_count"],{count:v.length})}),(0,n.jsxs)("div",{className:(0,l.A)({"grid gap-6 sm:grid-cols-2 lg:grid-cols-3":!u,"flex flex-wrap gap-4":u}),children:[r&&(0,n.jsx)(_,{onClose:c}),v.map(function(e){var t,r;return(0,i.createElement)(x.K,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={key:e.id,isNew:e.is_new,templateKey:e.key,templateType:e.template_type,onClose:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})]})]})}},701790:function(e,t,r){"use strict";r.d(t,{r:()=>p,N:()=>m});var n=r(552676),i=r(275271),o=r(122612),a=r.n(o),s=r(131906),l=r(251630),c=r(920153),u=function(e){var t,r=(0,c.Z)(),n=(0,l.WX)(),i=function(e,t){var r={page:e,per_page:100,v2_2_enabled:!0};return t&&"all"!==t&&(r.category=t),n.templates({params:r})},o=(0,s.useInfiniteQuery)(["workflow-templates-list",e],function(t){var r=t.pageParam;return i(void 0===r?1:r,e)},{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),u=o.data,d=o.isLoading,f=o.fetchNextPage,m=(null==u?void 0:u.pages)||[],p=a()(m.map(function(e){return e.records}));return{templates:r?p:p.filter(function(e){return e.released}),totalCount:(null==(t=m[0])?void 0:t.total_count)||0,isLoading:d,fetchNextPage:f}};function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=(0,i.createContext)({templates:[],totalCount:0,isLoadingTemplates:!1,selectedCategory:"all",selectedTemplateId:void 0,setSelectedCategory:function(){}});f.displayName="WorkflowFormData";var m=function(e){var t,r=e.children,o=e.category,a=(t=(0,i.useState)(o||"all"),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=u(s),m=c.templates,p=c.totalCount,b=c.isLoading;return(0,n.jsx)(f.Provider,{value:{templates:m,totalCount:p,isLoadingTemplates:b,selectedCategory:s,setSelectedCategory:l},children:r})},p=function(){return(0,i.useContext)(f)}},794644:function(e,t,r){"use strict";r.d(t,{N6:()=>f,Tc:()=>m,uj:()=>d});var n=r(275271),i=r(93199),o=r(547144);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var d=function(e){return l(function(){return u(this,function(t){return[2,Promise.all(e.map(function(e){return(0,i.aU)(o.av.communityBot.agents.update({id:e.id}),{community_bot_profile:{enabled:!0}})}))]})})()},f=function(e){return l(function(){var t,r;return u(this,function(n){switch(n.label){case 0:if(0===(t=e.map(function(e){var t;return null==e||null==(t=e.api_params)?void 0:t.community_bot_profile_id}).filter(Boolean)).length)return[2,{disabledAgents:[]}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,i.UT)(o.av.communityBot.agents.activeCheck({ids:t}))];case 2:return[2,{disabledAgents:(null==(r=n.sent())?void 0:r.filter(function(e){return!e.enabled}))||[]}];case 3:return n.sent(),[2,{disabledAgents:[]}];case 4:return[2]}})})()},m=function(e){var t=c((0,n.useState)([]),2),r=t[0],i=t[1],o=c((0,n.useState)(!1),2),a=o[0],s=o[1];return(0,n.useEffect)(function(){e&&e.length>0?l(function(){return u(this,function(t){switch(t.label){case 0:s(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,f(e)];case 2:return i(t.sent().disabledAgents),[3,5];case 3:return t.sent(),i([]),[3,5];case 4:return s(!1),[7];case 5:return[2]}})})():(i([]),s(!1))},[e]),{disabledAgents:r,isLoading:a}}},684870:function(e,t,r){"use strict";r.d(t,{N:()=>a});var n=r(552676),i=r(403425),o=r(176454),a=function(e){var t,r,a=e.isActive,s=e.onToggle,l=e.actions,c=e.steps,u=e.workflowId,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isActive","onToggle","actions","steps","workflowId"]),f=(0,i.x)({isActive:a,onToggle:s,actions:l,steps:c,workflowId:u}),m=f.isEffectivelyActive,p=f.handleToggleChange;return(0,n.jsx)(o.p,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={isWorkflowActive:m,onChange:p},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},904015:function(e,t,r){"use strict";r.d(t,{H:()=>i});var n=r(584555),i=function(e){return e===n.qN.IN_PROGRESS||e===n.qN.ACTIVE}},367367:function(e,t,r){"use strict";r.d(t,{j:()=>a});var n=r(904015),i=r(5917),o=r(850362),a=function(){var e=(0,o.D)(),t=e.id,r=e.isDynamic,a=e.status,s=(0,i.C)({workflowId:r?void 0:t,disableRefetching:!0}),l=s.areAllRunsCompleted,c=s.isLoading;return r?{result:(0,n.H)(a)}:{result:!l,isLoading:c}}},913445:function(e,t,r){"use strict";r.d(t,{q:()=>y,P:()=>v});var n=r(739792),i=r(584555),o=r(552676),a=r(337140),s=r(995900),l=function(e){var t=e.resourceId,r=(0,a.t)(t),i=r.accessGroup,l=r.isLoadingAccessGroup;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.view.resources.access_group"),value:null==i?void 0:i.name,isLoading:l})},c=r(227851),u=r(376492),d=r(589013),f=r(439788),m=r(751169),p=function(){var e=(0,c.Gc)(),t=e.register,r=e.setValue,i=(0,u.S)(),a=i.data,s=i.isLoading,l=(0,d.O)({selectNewAccessGroup:function(e){return r("trigger.resource_id",e.id,{shouldDirty:!0,shouldValidate:!0})}}).openNewAccessGroupModal,p=null==a?void 0:a.map(function(e){return{label:e.name,value:e.id}});return s?(0,o.jsx)(m.a,{center:!0}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,n.t)("settings.workflows.form.choose_access_group"),options:p,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.access_groups.not_found"),createLinkLabel:(0,n.t)("settings.access_groups.admin.entry_points.association.actions.create_new_access_group"),onCreateLinkClick:l})]})},b={label:(0,n.t)("settings.workflows.form.events.community_member_added_to_access_group.title"),value:"community_member_added_to_access_group",group:(0,n.t)("settings.workflows.form.event_groups.access_group"),description:(0,n.t)("settings.workflows.form.events.community_member_added_to_access_group.description"),resource:i.uN.ACCESS_GROUP,formComponent:p,viewComponent:l,icon:"space"},h={label:(0,n.t)("settings.workflows.form.events.community_member_removed_from_access_group.title"),value:"community_member_removed_from_access_group",group:(0,n.t)("settings.workflows.form.event_groups.access_group"),description:(0,n.t)("settings.workflows.form.events.community_member_removed_from_access_group.description"),resource:i.uN.ACCESS_GROUP,formComponent:p,viewComponent:l,icon:"space"},y=b,v=h},218301:function(e,t,r){"use strict";r.d(t,{j:()=>u});var n=r(552676),i=r(131906),o=r(739792),a=r(93199),s=r(547144),l=r(208054),c=r(995900),u=function(e){var t=e.resourceId,r=(0,i.useQuery)([l.Wx,t,{}],function(){return(0,a.UT)(s.av.profile.show({memberPublicId:String(t),params:{}}))}),u=r.data,d=r.isLoading;return(0,n.jsx)(c.i,{label:(0,o.t)("settings.workflows.view.resources.messaging"),value:null==u?void 0:u.name,isLoading:d})}},734260:function(e,t,r){"use strict";r.d(t,{b:()=>d});var n=r(552676),i=r(739792),o=r(759705),a=r(776937),s=r(439788),l=r(751169),c=r(381636),u={perPage:100,order:{created_at:"desc"},scope:{status:a.vC.ACTIVE,exclude_empty_name:!1,exclude_empty_profiles:!1},options:{keepPreviousData:!0},filters:[{id:"1",key:"role",value:"Admin"},{id:"2",key:"member",value:"true"}],isAdminScope:!0},d=function(){var e=(0,o._)(u),t=e.audience;if(e.isLoading)return(0,n.jsx)(l.a,{center:!0});var r=null==t?void 0:t.map(function(e){return{label:e.name,value:e.id}});return(0,n.jsx)(s.N,{name:"trigger.resource_id",label:(0,n.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_admin")}),options:r,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})}},995900:function(e,t,r){"use strict";r.d(t,{i:()=>p});var n=r(552676),i=r(240507),o=r.n(i),a=r(751169),s=r(381636),l=r(958892),c=r(619803),u=r.n(c),d=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:u()("flex flex-col gap-6",t),children:r})};d.propTypes={className:o().string,children:o().node};var f=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:u()("flex flex-col gap-2",t),children:r})};f.propTypes={className:o().string,children:o().node};var m=function(e){var t=e.children;return(0,n.jsx)("div",{children:(0,n.jsx)(s.Z.LabelSm,{weight:"semibold",children:t})})};m.propTypes={children:o().node},d.Section=f,d.Title=m;var p=function(e){var t=e.label,r=e.value,i=e.isLoading,o=e.shouldRepresentAsBadge;return(0,n.jsx)(d,{children:(0,n.jsxs)(d.Section,{children:[(0,n.jsx)(d.Title,{children:t}),(0,n.jsx)("div",{children:void 0!==o&&o?(0,n.jsx)(b,{value:r,isLoading:i}):(0,n.jsx)(h,{value:r,isLoading:i})})]})})},b=function(e){var t=e.value;return e.isLoading?(0,n.jsx)(l.C,{isLoading:!0}):(0,n.jsx)(l.C,{text:t})},h=function(e){var t=e.value;return e.isLoading?(0,n.jsx)(a.a,{}):(0,n.jsx)(s.Z.LabelSm,{children:t})};p.propTypes={label:o().string.isRequired,value:o().string,isLoading:o().bool,shouldRepresentAsBadge:o().bool},b.propTypes={value:o().string.isRequired,isLoading:o().bool},h.propTypes={value:o().string.isRequired,isLoading:o().bool}},677774:function(e,t,r){"use strict";r.d(t,{H:()=>a});var n=r(552676),i=r(739792),o=r(995900),a=function(e){var t=String(e.resourceId);return(0,n.jsx)(o.i,{label:(0,i.t)("settings.workflows.form.events.community_member_joined_community.community_id"),value:t})}},36579:function(e,t,r){"use strict";r.d(t,{E:()=>l});var n=r(552676),i=r(275271),o=r(227851),a=r(441342);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(){var e=(0,o.Gc)(),t=e.register,r=e.getValues,l=e.setValue,c=(0,a.wh)(),u=c.currentCommunity,d=c.isLoading,f=r("trigger.resource_id");return((0,i.useEffect)(function(){var e;d||f||(l("trigger.resource_type","Community"),l("trigger.resource_id",null!=(e=null==u?void 0:u.id)?e:""))},[u,d,l,f]),d)?null:(0,n.jsxs)("div",{className:"hidden",children:[(0,n.jsx)("input",s({type:"hidden"},t("trigger.resource_type"))),(0,n.jsx)("input",s({type:"hidden"},t("trigger.resource_id")))]})}},695241:function(e,t,r){"use strict";r.d(t,{T:()=>l,d:()=>u});var n=r(552676),i=r(739792),o=r(439788),a=r(381636),s="settings.workflows.form",l="all_contacts",c=[{value:"members",label:(0,i.t)([s,"audience_type_options.members"])},{value:"non_members",label:(0,i.t)([s,"audience_type_options.non_members"])},{value:l,label:(0,i.t)([s,"audience_type_options.all_contacts"])}],u=function(){return(0,n.jsx)(o.N,{name:"trigger.contact_type",options:c,initialValue:l,label:(0,n.jsx)(a.Z.LabelSm,{weight:"semibold",children:(0,i.t)([s,"audience_type"])})})}},393828:function(e,t,r){"use strict";r.d(t,{NX:()=>T,UP:()=>A,ES:()=>p,ey:()=>s,dP:()=>g,NB:()=>P});var n=r(739792),i=r(584555),o=r(645768),a=r(309464),s={label:(0,n.t)("settings.workflows.form.events.community_member_completed_course.title"),value:"community_member_completed_course",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_course.description"),resource:i.uN.COURSE,formComponent:o.u,viewComponent:a.A,icon:"course"},l=r(234781),c=r(552676),u=r(869922),d="settings.workflows.form.entity_type.lesson",f=[{value:i.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])},{value:i.uN.LESSON,label:(0,n.t)([d,"specific_lesson.title"]),description:(0,n.t)([d,"specific_lesson.description"])}],m=function(){return(0,c.jsx)(u.X,{entityTypeOptions:f,resourceType:i.S7.COURSE})};m.propTypes={};var p={label:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.title"),value:"community_member_completed_lesson",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)("settings.workflows.form.events.community_member_completed_lesson.description"),resource:i.uN.LESSON,formComponent:m,viewComponent:l.k,icon:"course"},b="settings.workflows.form.entity_type.section",h=[{value:i.uN.COMMUNITY,label:(0,n.t)([b,"community.title"]),description:(0,n.t)([b,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([b,"space_group.title"]),description:(0,n.t)([b,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([b,"space.title"]),description:(0,n.t)([b,"space.description"])},{value:i.uN.SECTION,label:(0,n.t)([b,"specific_section.title"]),description:(0,n.t)([b,"specific_section.description"])}],y=function(){return(0,c.jsx)(u.X,{entityTypeOptions:h,resourceType:i.S7.COURSE})};y.propTypes={};var v="settings.workflows.form",g={label:(0,n.t)([v,"events.community_member_completed_section.title"]),value:"community_member_completed_section",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([v,"events.community_member_completed_section.description"]),resource:i.uN.SECTION,formComponent:y,viewComponent:l.k,icon:"course"},_=r(131906),x=r(547144),j=r(995900),w=function(e){var t=e.resourceId,r=(0,_.useQuery)({queryKey:[x.av.settings.courses.lessons.show({id:t})]}),i=r.data,o=r.isLoading;return(0,c.jsx)(j.i,{label:(0,n.t)("settings.workflows.view.resources.quiz"),value:null==i?void 0:i.name,isLoading:o})},O="settings.workflows.form.entity_type.quiz",S=[{value:i.uN.COMMUNITY,label:(0,n.t)([O,"community.title"]),description:(0,n.t)([O,"community.description"])},{value:i.uN.SPACE_GROUP,label:(0,n.t)([O,"space_group.title"]),description:(0,n.t)([O,"space_group.description"])},{value:i.uN.COURSE,label:(0,n.t)([O,"space.title"]),description:(0,n.t)([O,"space.description"])},{value:i.uN.QUIZ,label:(0,n.t)([O,"specific_quiz.title"]),description:(0,n.t)([O,"specific_quiz.description"])}],k=function(){return(0,c.jsx)(u.X,{entityTypeOptions:S,resourceType:i.S7.COURSE,isQuizSelector:!0})};k.propTypes={};var N="settings.workflows.form",P={label:(0,n.t)([N,"events.community_member_passed_quiz.title"]),value:"community_member_passed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([N,"events.community_member_passed_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0},C="settings.workflows.form",A={label:(0,n.t)([C,"events.community_member_failed_quiz.title"]),value:"community_member_failed_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([C,"events.community_member_failed_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0},I="settings.workflows.form",T={label:(0,n.t)([I,"events.community_member_submitted_quiz.title"]),value:"community_member_submitted_quiz",group:(0,n.t)("settings.workflows.form.event_groups.courses"),description:(0,n.t)([I,"events.community_member_submitted_quiz.description"]),resource:i.uN.QUIZ,formComponent:k,viewComponent:w,icon:"course",released:!0}},234781:function(e,t,r){"use strict";r.d(t,{k:()=>_});var n,i=r(552676),o=r(218301),a=r(584555),s=r(677774),l=r(131906),c=r(739792),u=r(547144),d=r(995900),f=r(337382),m=r(317919),p=r(75936),b=r(301737),h=r(309464),y=r(121272);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(v(n={},a.uN.COMMUNITY,s.H),v(n,a.uN.SPACE_GROUP,y.T),v(n,a.uN.SPACE,h.A),v(n,a.uN.POST_BASIC,function(e){var t=e.resourceId,r=(0,l.useQuery)({queryKey:[b.v.posts.show({id:String(t)})]}),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.post"),value:null==n?void 0:n.name,isLoading:o})}),v(n,a.uN.EVENT,f.B),v(n,a.uN.LESSON,function(e){var t=e.resourceId,r=(0,l.useQuery)({queryKey:[u.av.settings.courses.lessons.show({id:t})]}),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.lesson"),value:null==n?void 0:n.name,isLoading:o})}),v(n,a.uN.SECTION,function(e){var t=e.resourceId,r=(0,l.useQuery)({queryKey:[u.av.settings.courses.sections.show({id:t})]}),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.section"),value:null==n?void 0:n.name,isLoading:o})}),v(n,a.uN.COMMUNITY_MEMBER_ADMIN,o.j),v(n,a.uN.PAYWALL,m.Q),v(n,a.uN.PAYWALL_COUPON,function(e){var t=e.resourceId,r=(0,(0,p.n)({}).useShowPaywallCoupon)(t),n=r.data,o=r.isLoading;return(0,i.jsx)(d.i,{label:(0,c.t)("settings.workflows.view.resources.paywall_coupon"),value:null==n?void 0:n.code,isLoading:o})}),n),_=function(e){var t=e.resourceType,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["resourceType"]),n=g[t]||null;return(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsx)(n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){v(e,t,r[t])})}return e}({resourceType:t},r))})}},869922:function(e,t,r){"use strict";r.d(t,{X:()=>Q});var n,i=r(552676),o=r(739792),a=r(584555),s=r(439788),l=r(381636),c=r(734260),u=r(36579),d=r(227851),f=r(275271),m=r(932699),p=r(66292),b=r.n(p),h=r(131906),y=r(93199),v=r(547144),g=r(60878),_=function(e){var t=e.lessonId,r=(0,g.pm)().error;return(0,h.useQuery)(["workflows","list","lessons",t],function(){return(0,y.UT)(v.av.settings.courses.lessons.show({id:t}))},{onError:function(){return r((0,o.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))},enabled:!!t})},x=function(e){var t=e.name,r=e.onlyQuizzes,n=void 0!==r&&r,i=(0,g.pm)().error;return(0,h.useQuery)(["workflows","list","lessons",t],function(){return(0,y.UT)(n?v.av.settings.courses.quizzes.index({params:{name:t}}):v.av.settings.courses.lessons.index({params:{name:t}}))},{onError:function(){return i((0,o.t)(["settings.workflows.form","errors","lessons","fetch_failed"]))}})};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}}var O=function(e){return{label:e.name,value:e.id,description:"".concat(e.course_name,"  ").concat(e.section_name)}},S=function(e){var t,r,n,i=e.selectedLessonId,o=e.onlyQuizzes,a=(t=(0,f.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||w(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],l=a[1],c=x({name:s,onlyQuizzes:void 0!==o&&o}),u=c.data,d=c.isLoading,p=_({lessonId:i}),h=p.data,y=p.isLoading,v=p.isSuccess,g=(null!=(n=null==u?void 0:u.records)?n:[]).map(O);return h&&!y&&v&&(g=(0,m.uniqBy)(((function(e){if(Array.isArray(e))return j(e)})(r=g)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||w(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([O(h)]),"value")),{isLoading:d||y,lessonOptions:g,handleLessonTitleChange:b()(function(e){return l(e)},500)}},k=function(e){var t=e.sectionId,r=(0,g.pm)().error;return(0,h.useQuery)(["workflows","list","sections",t],function(){return(0,y.UT)(v.av.settings.courses.sections.show({id:t}))},{onError:function(){return r((0,o.t)(["settings.workflows.form","errors","sections","fetch_failed"]))},enabled:!!t})},N=function(e){var t=e.name,r=(0,g.pm)().error;return(0,h.useQuery)(["workflows","list","sections",t],function(){return(0,y.UT)(v.av.settings.courses.sections.index({params:{name:t}}))},{onError:function(){return r((0,o.t)(["settings.workflows.form","errors","sections","fetch_failed"]))}})};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){return{label:e.name,value:e.id,description:e.course_name}},A=function(e){var t,r,n=e.selectedSectionId,i=(t=(0,f.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1],s=N({name:o}),l=s.data,c=s.isLoading,u=k({sectionId:n}),d=u.data,m=u.isLoading,p=u.isSuccess,h=(null!=(r=null==l?void 0:l.records)?r:[]).map(C);return d&&!m&&p&&h.push(C(d)),{isLoading:c||m,sectionOptions:h,handleSectionTitleChange:b()(function(e){return a(e)},500)}},I="settings.workflows.form",T=r(776453),E=r(751169),L=r(456484),D=r(75936),M=r(190597),R=r(301737),B=function(e){var t=(0,h.useQuery)(["post",e],function(){return(0,y.UT)(R.v.posts.show({id:e}))},{enabled:!!e});return{post:t.data,isLoadingPost:t.isLoading,isPostLoaded:t.isSuccess}};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){return{label:e.display_title,value:e.id,description:"".concat(e.space_name,"  ").concat(e.community_member.name)}},U=function(e){var t,r=e.selectedPostId,n=(t=(0,f.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return z(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=(0,M.k)({title:i}),s=a.posts,l=a.isLoadingPosts,c=B(r),u=c.post,d=c.isLoadingPost,m=c.isPostLoaded,p=s.map(F);return u&&!d&&m&&p.push(F(u)),{isLoading:l||d,postOptions:p,handlePostTitleChange:b()(function(e){return o(e)},500)}},Z=r(645768),G=r(641812),q=r(213447),V=function(){var e=(0,d.Gc)(),t=e.watch,r=e.setValue;return{resourceType:t("trigger.resource_type"),handleEntitySelectorChange:function(){r("trigger.resource_id",null)}}};function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=(W(n={},a.uN.COMMUNITY,u.E),W(n,a.uN.SPACE_GROUP,q.D),W(n,a.uN.SPACE,G.r),W(n,a.uN.COURSE_SPACE,Z.u),W(n,a.uN.POST_BASIC,function(){var e,t=(0,d.Gc)(),r=t.formState.touchedFields,n=t.register,a=t.getValues,c=U({selectedPostId:(null==(e=r.trigger)?void 0:e.resource_type)?null:a("trigger.resource_id")}),u=c.isLoading,f=c.postOptions,m=c.handlePostTitleChange;return u?(0,i.jsx)(E.a,{center:!0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,i.jsx)(s.N,{name:"trigger.resource_id",label:(0,i.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)(["settings.workflows.form","choose_post"])}),options:f,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)("settings.workflows.form.errors.posts.not_found"),onSearchChange:m})]})}),W(n,a.uN.EVENT,function(){var e,t=(0,d.Gc)().register,r=(0,T.i)({per_page:300}),n=r.data,a=r.isLoading,c=r.isError,u=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date,i=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,o.t)("settings.workflows.form.recurring_label")):e.name,value:i,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return a?(0,i.jsx)(E.a,{center:!0}):c?(0,i.jsx)(l.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"hidden",children:(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,i.jsx)(s.N,{name:"trigger.resource_id",label:(0,i.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)("settings.workflows.form.which_event")}),options:u,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})}),W(n,a.uN.LESSON,function(e){var t,r=e.isQuizSelector,n=(0,d.Gc)(),a=n.formState.touchedFields,c=n.register,u=n.getValues,f=S({selectedLessonId:(null==(t=a.trigger)?void 0:t.resource_type)?null:u("trigger.resource_id"),onlyQuizzes:r}),m=f.lessonOptions,p=f.handleLessonTitleChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},c("trigger.resource_type"))),(0,i.jsx)(s.N,{name:"trigger.resource_id",label:(0,i.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)(["settings.workflows.form",r?"choose_quiz":"choose_lesson"])}),options:m,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)(r?"settings.workflows.form.errors.quizzes.not_found":"settings.workflows.form.errors.lessons.not_found"),onSearchChange:p})]})}),W(n,a.uN.SECTION,function(){var e,t=(0,d.Gc)(),r=t.formState.touchedFields,n=t.register,a=t.getValues,c=A({selectedSectionId:(null==(e=r.trigger)?void 0:e.resource_type)?null:a("trigger.resource_id")}),u=c.sectionOptions,f=c.handleSectionTitleChange;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},n("trigger.resource_type"))),(0,i.jsx)(s.N,{name:"trigger.resource_id",label:(0,i.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)([I,"choose_section"])}),options:u,rules:{required:(0,o.t)([I,"errors.required"])},emptyMessage:(0,o.t)([I,"errors.sections.not_found"]),onSearchChange:f})]})}),W(n,a.uN.COMMUNITY_MEMBER_ADMIN,c.b),W(n,a.uN.PAYWALL,L.Q),W(n,a.uN.PAYWALL_COUPON,function(){var e=(0,d.Gc)().register,t=(0,(0,D.n)({}).useListPaywallCoupons)(),r=t.data,n=t.isLoading,a=t.isSuccess,c=(r||[]).map(function(e){return{label:e.code,value:e.id}});return n?(0,i.jsx)(E.a,{center:!0}):a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"hidden",children:(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},e("trigger.resource_type")))}),(0,i.jsx)(s.N,{name:"trigger.resource_id",label:(0,o.t)("settings.workflows.form.which_paywall_coupon"),options:c,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)("settings.workflows.form.errors.paywall_coupons.not_found")})]}):(0,i.jsx)(l.Z.LabelXs,{children:(0,i.jsx)("span",{className:"text-v2-danger",children:(0,o.t)("settings.workflows.form.errors.paywall_coupons.fetch_failed")})})}),n),Q=function(e){var t=e.entityTypeOptions,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["entityTypeOptions"]),n=V(),a=n.resourceType,c=n.handleEntitySelectorChange,u=H[a]||null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.N,{name:"trigger.resource_type",options:t,label:(0,i.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)(["settings.workflows.form","choose_entity"])}),onChange:c}),u&&(0,i.jsx)(u,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){W(e,t,r[t])})}return e}({},r))]})}},68167:function(e,t,r){"use strict";r.d(t,{OC:()=>b,Q4:()=>w,BP:()=>h,Zo:()=>p,PJ:()=>N});var n,i=r(739792),o=r(234781),a=r(552676),s=r(584555),l=r(869922),c=r(671943);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d="settings.workflows.form.entity_type.event",f=((function(e){if(Array.isArray(e))return u(e)})(n=c.L)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{value:s.uN.EVENT,label:(0,i.t)([d,"event.title"]),description:(0,i.t)([d,"event.description"])}]),m=function(){return(0,a.jsx)(l.X,{entityTypeOptions:f,resourceType:s.S7.EVENT})};m.propTypes={};var p={label:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_event.title"),value:"community_member_rsvps_to_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_event.description"),formComponent:m,viewComponent:o.k,icon:"event"},b={label:(0,i.t)("settings.workflows.form.events.event_starts_in_an_hour.title"),value:"event_starts_in_an_hour",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.event_starts_in_an_hour.description"),formComponent:m,viewComponent:o.k,icon:"event"},h={label:(0,i.t)("settings.workflows.form.events.event_ended_for_member.title"),value:"event_ended_for_member",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.event_ended_for_member.description"),formComponent:m,viewComponent:o.k,icon:"event",released:!0},y=r(776453),v=r(227851),g=r(439788),_=r(751169),x=r(381636),j=r(337382),w={label:(0,i.t)("settings.workflows.form.events.community_member_attended_live_event.title"),value:"community_member_attended_live_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_attended_live_event.description"),resource:s.uN.EVENT,formComponent:function(){var e,t=(0,v.Gc)().register,r=(0,y.i)({per_page:100,location_type:"live"}),n=r.data,o=r.isLoading,s=r.isError,l=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date,o=e.id;return{label:e.recurring?"".concat(String(t)," ").concat((0,i.t)("settings.workflows.form.recurring_label")):e.name,value:o,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return o?(0,a.jsx)(_.a,{center:!0}):s?(0,a.jsx)(x.Z.LabelXs,{children:(0,a.jsx)("span",{className:"text-v2-danger",children:(0,i.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden",children:(0,a.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,a.jsx)(g.N,{name:"trigger.resource_id",label:(0,a.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_event")}),options:l,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:j.B,icon:"event",released:!0},O=r(131906),S=r(301737),k=r(995900),N={label:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.title"),value:"community_member_rsvps_to_recurring_event",group:(0,i.t)("settings.workflows.form.event_groups.events"),description:(0,i.t)("settings.workflows.form.events.community_member_rsvps_to_recurring_event.description"),resource:s.uN.RECURRING_EVENT_SETTING,formComponent:function(){var e,t=(0,v.Gc)().register,r=(0,y.i)({per_page:100,location_type:"recurring"}),n=r.data,o=r.isLoading,s=r.isError,l=null==n||null==(e=n.records)?void 0:e.map(function(e){var t=e.name,r=e.space_name,n=e.start_date;return{label:t,value:e.recurring_event_setting_id,description:e.paid_event?"".concat(String(r),"  ").concat(String(n),"  ").concat(e.ticket_price):"".concat(String(r),"  ").concat(String(n))}});return o?(0,a.jsx)(_.a,{center:!0}):s?(0,a.jsx)(x.Z.LabelXs,{children:(0,a.jsx)("span",{className:"text-v2-danger",children:(0,i.t)("settings.workflows.form.errors.upcoming_events.fetch_failed")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"hidden",children:(0,a.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},t("trigger.resource_type")))}),(0,a.jsx)(g.N,{name:"trigger.resource_id",label:(0,a.jsx)(x.Z.LabelSm,{weight:"semibold",children:(0,i.t)("settings.workflows.form.which_event")}),options:l,rules:{required:(0,i.t)("settings.workflows.form.errors.required")},emptyMessage:(0,i.t)("settings.workflows.form.errors.upcoming_events.not_found")})]})},viewComponent:function(e){var t=e.resourceId,r=(0,O.useQuery)({queryKey:[S.v.recurringEventSettings.show({id:String(t)})]}),n=r.data,o=r.isLoading;return(0,a.jsx)(k.i,{label:(0,i.t)("settings.workflows.view.resources.event"),value:null==n?void 0:n.name,isLoading:o})},icon:"event"}},671943:function(e,t,r){"use strict";r.d(t,{L:()=>l,d:()=>c});var n=r(552676),i=r(739792),o=r(584555),a=r(869922),s="settings.workflows.form.entity_type.event",l=[{value:o.uN.COMMUNITY,label:(0,i.t)([s,"community.title"]),description:(0,i.t)([s,"community.description"])},{value:o.uN.SPACE_GROUP,label:(0,i.t)([s,"space_group.title"]),description:(0,i.t)([s,"space_group.description"])},{value:o.uN.SPACE,label:(0,i.t)([s,"space.title"]),description:(0,i.t)([s,"space.description"])}],c=function(){return(0,n.jsx)(a.X,{entityTypeOptions:l,resourceType:o.S7.EVENT})};c.propTypes={}},337382:function(e,t,r){"use strict";r.d(t,{B:()=>l});var n=r(552676),i=r(131906),o=r(739792),a=r(301737),s=r(995900),l=function(e){var t=e.resourceId,r=(0,i.useQuery)({queryKey:[a.v.events.show({id:String(t)})]}),l=r.data,c=r.isLoading;return(0,n.jsx)(s.i,{label:(0,o.t)("settings.workflows.view.resources.event"),value:null==l?void 0:l.name,isLoading:c})}},873321:function(e,t,r){"use strict";r.d(t,{E:()=>_,m:()=>g});var n=r(739792),i=r(584555),o=r(552676),a=r(630713),s=r(227851),l=r(439788),c=r(751169),u=r(381636),d=r(695241),f=function(){var e=(0,s.Gc)().register,t=(0,a.t)(),r=t.memberTags;if(t.isLoading)return(0,o.jsx)(c.a,{center:!0});var i=r.map(function(e){return{label:e.name,value:e.id}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},e("trigger.resource_type")))}),(0,o.jsx)(l.N,{name:"trigger.resource_id",label:(0,o.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,n.t)("settings.workflows.form.which_tag")}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.member_tags.not_found")}),(0,o.jsx)(d.d,{})]})};f.propTypes={};var m=r(391026),p=r(182691),b=r.n(p),h=r(995900),y="settings.workflows.view",v=function(e){var t=e.resourceId,r=e.contactType,i=(0,m.u)({id:t}),a=i.data,s=void 0===a?{}:a,l=i.isLoading;if(!s)return null;var c=b()(s)?(0,n.t)([y,"deleted_member_tag"]):s.name;return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,o.jsx)(h.i,{label:(0,n.t)([y,"resources.member_tag"]),value:c,isLoading:l,shouldRepresentAsBadge:!0}),(0,o.jsx)(h.i,{label:(0,n.t)([y,"resources.contact_type"]),value:(0,n.t)(["settings.workflows.form.audience_type_options",r])})]})},g={label:(0,n.t)("settings.workflows.form.events.contact_tagged.title"),value:"contact_tagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_tagged.description"),resource:i.uN.MEMBER_TAG,formComponent:f,viewComponent:v,icon:"tag"},_={label:(0,n.t)("settings.workflows.form.events.contact_untagged.title"),value:"contact_untagged",group:(0,n.t)("settings.workflows.form.event_groups.tags"),description:(0,n.t)("settings.workflows.form.events.contact_untagged.description"),resource:i.uN.MEMBER_TAG,formComponent:f,viewComponent:v,icon:"tag"}},824553:function(e,t,r){"use strict";r.d(t,{k:()=>a});var n=r(739792),i=r(234781),o=r(417795),a={label:(0,n.t)("workflows_v2.events.community_member_coupon_added.title"),value:"community_member_coupon_added",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_coupon_added.description"),formComponent:o.s,viewComponent:i.k,icon:"paywall"}},898779:function(e,t,r){"use strict";r.d(t,{R:()=>a});var n=r(739792),i=r(234781),o=r(417795),a={label:(0,n.t)("workflows_v2.events.community_member_coupon_ended.title"),value:"community_member_coupon_ended",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_coupon_ended.description"),formComponent:o.s,viewComponent:i.k,icon:"paywall"}},13465:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(739792),i=r(234781),o=r(417795),a={label:(0,n.t)("workflows_v2.events.community_member_coupon_removed.title"),value:"community_member_coupon_removed",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_coupon_removed.description"),formComponent:o.s,viewComponent:i.k,icon:"paywall"}},853262:function(e,t,r){"use strict";r.d(t,{z:()=>a});var n=r(739792),i=r(234781),o=r(417795),a={label:(0,n.t)("workflows_v2.events.community_member_coupon_used_at_checkout.title"),value:"community_member_coupon_used_at_checkout",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_coupon_used_at_checkout.description"),formComponent:o.s,viewComponent:i.k,icon:"paywall"}},649333:function(e,t,r){"use strict";r.d(t,{x:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.title"),value:"community_member_ended_trial_without_subscription",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_ended_trial_without_subscription.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},270600:function(e,t,r){"use strict";r.d(t,{E:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_failed_recurring_payment.title"),value:"community_member_failed_recurring_payment",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_failed_recurring_payment.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},548347:function(e,t,r){"use strict";r.d(t,{EY:()=>_.E,NA:()=>u.Z,Oc:()=>o.O,Pk:()=>d.I,R9:()=>a.R,YC:()=>g.x,Yf:()=>c.j,aq:()=>v.j,eD:()=>m.T,iY:()=>h.v,ji:()=>s.u,jp:()=>b.A,kT:()=>i.k,nX:()=>l.H,oi:()=>p.k,wL:()=>f.t,zM:()=>y._,zr:()=>n.z});var n=r(853262),i=r(824553),o=r(13465),a=r(898779),s=r(466564),l=r(796471),c=r(243609),u=r(723634),d=r(720760),f=r(140818),m=r(299385),p=r(15696),b=r(57840),h=r(530622),y=r(891188),v=r(787105),g=r(649333),_=r(270600)},57840:function(e,t,r){"use strict";r.d(t,{A:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_installment_completed.title"),value:"community_member_installment_completed",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_installment_completed.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},466564:function(e,t,r){"use strict";r.d(t,{u:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.title"),value:"community_member_purchases_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_purchases_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},796471:function(e,t,r){"use strict";r.d(t,{H:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.title"),value:"community_member_subscribed_to_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_subscribed_to_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},299385:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_subscription_resumed.title"),value:"community_member_subscription_resumed",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_subscription_resumed.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},720760:function(e,t,r){"use strict";r.d(t,{I:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_subscription_scheduled_to_cancel.title"),value:"community_member_subscription_scheduled_to_cancel",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_subscription_scheduled_to_cancel.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},891188:function(e,t,r){"use strict";r.d(t,{_:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_trial_converted.title"),value:"community_member_trial_converted",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_trial_converted.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},530622:function(e,t,r){"use strict";r.d(t,{v:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_trial_ended_and_not_converted.title"),value:"community_member_trial_ended_and_not_converted",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_trial_ended_and_not_converted.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},15696:function(e,t,r){"use strict";r.d(t,{k:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_trial_resumed.title"),value:"community_member_trial_resumed",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_trial_resumed.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},140818:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_trial_scheduled_to_cancel.title"),value:"community_member_trial_scheduled_to_cancel",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_trial_scheduled_to_cancel.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},243609:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.title"),value:"community_member_unsubscribed_from_paywall",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_unsubscribed_from_paywall.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},723634:function(e,t,r){"use strict";r.d(t,{Z:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("workflows_v2.events.community_member_workflows_subscription_canceled.title"),value:"community_member_workflows_subscription_canceled",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("workflows_v2.events.community_member_workflows_subscription_canceled.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},417795:function(e,t,r){"use strict";r.d(t,{s:()=>f});var n=r(552676),i=r(739792),o=r(584555),a=r(869922),s="settings.workflows.form.entity_type.paywall",l=[{value:o.uN.PAYWALL_COUPON,label:(0,i.t)([s,"paywall_coupon.title"]),description:(0,i.t)([s,"paywall_coupon.description"])}];function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u="settings.workflows.form.entity_type.paywall",d=[{value:o.uN.PAYWALL,label:(0,i.t)([u,"paywall.title"]),description:(0,i.t)([u,"paywall.description"])}].concat(function(e){if(Array.isArray(e))return c(e)}(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=function(){return(0,n.jsx)(a.X,{entityTypeOptions:d})}},317919:function(e,t,r){"use strict";r.d(t,{Q:()=>s});var n=r(552676),i=r(739792),o=r(869300),a=r(995900),s=function(e){var t,r=e.resourceId,s=(0,o.a)(String(r)),l=s.data,c=s.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.paywall"),value:null!=(t=null==l?void 0:l.display_name)?t:"",isLoading:c})}},456484:function(e,t,r){"use strict";r.d(t,{Q:()=>u});var n=r(552676),i=r(227851),o=r(739792),a=r(248996),s=r(439788),l=r(751169),c=r(381636),u=function(){var e=(0,i.Gc)().register,t=(0,a.y)(),r=t.activePaywalls,u=t.isLoading,d=t.isSuccess,f=r.map(function(e){return{label:e.display_name,value:e.id}});return u?(0,n.jsx)(l.a,{center:!0}):d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},e("trigger.resource_type")))}),(0,n.jsx)(s.N,{name:"trigger.resource_id",label:(0,o.t)("settings.workflows.form.which_paywall"),options:f,rules:{required:(0,o.t)("settings.workflows.form.errors.required")},emptyMessage:(0,o.t)("settings.workflows.form.errors.paywalls.not_found")})]}):(0,n.jsx)(c.Z.LabelXs,{children:(0,n.jsx)("span",{className:"text-v2-danger",children:(0,o.t)("settings.workflows.form.errors.paywalls.fetch_failed")})})}},787105:function(e,t,r){"use strict";r.d(t,{j:()=>s});var n=r(739792),i=r(584555),o=r(317919),a=r(456484),s={label:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.title"),value:"community_member_started_paywall_trial",group:(0,n.t)("settings.workflows.form.event_groups.paywalls"),description:(0,n.t)("settings.workflows.form.events.community_member_started_paywall_trial.description"),resource:i.uN.PAYWALL,formComponent:a.Q,viewComponent:o.Q,icon:"paywall"}},435354:function(e,t,r){"use strict";r.d(t,{pC:()=>j,Uu:()=>S,Fw:()=>k,Qw:()=>O,jU:()=>x,dO:()=>_,fT:()=>g,GT:()=>w,sj:()=>N});var n=r(739792),i=r(234781),o=r(552676),a=r(584555),s=r(869922),l="settings.workflows.form.entity_type.comment",c=[{value:a.uN.COMMUNITY,label:(0,n.t)([l,"community.title"]),description:(0,n.t)([l,"community.description"])},{value:a.uN.SPACE_GROUP,label:(0,n.t)([l,"space_group.title"]),description:(0,n.t)([l,"space_group.description"])},{value:a.uN.SPACE,label:(0,n.t)([l,"space.title"]),description:(0,n.t)([l,"space.description"])},{value:a.uN.POST_BASIC,label:(0,n.t)([l,"post.title"]),description:(0,n.t)([l,"post.description"])}],u=function(){return(0,o.jsx)(s.X,{entityTypeOptions:c,resourceType:a.S7.BASIC})},d="settings.workflows.form.entity_type.post",f=[{value:a.uN.COMMUNITY,label:(0,n.t)([d,"community.title"]),description:(0,n.t)([d,"community.description"])},{value:a.uN.SPACE_GROUP,label:(0,n.t)([d,"space_group.title"]),description:(0,n.t)([d,"space_group.description"])},{value:a.uN.SPACE,label:(0,n.t)([d,"space.title"]),description:(0,n.t)([d,"space.description"])}],m=function(){return(0,o.jsx)(s.X,{entityTypeOptions:f,resourceType:a.S7.BASIC})};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}m.propTypes={};var b="settings.workflows.form.entity_type.post",h=((function(e){if(Array.isArray(e))return p(e)})(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(f)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{value:a.uN.POST_BASIC,label:(0,n.t)([b,"specific_post.title"]),description:(0,n.t)([b,"specific_post.description"])}]),y=function(){return(0,o.jsx)(s.X,{entityTypeOptions:h,resourceType:a.S7.BASIC})};y.propTypes={};var v=(0,n.t)("settings.workflows.form.event_groups.moderation"),g={label:(0,n.t)("settings.workflows.form.events.post_liked.title"),value:"post_liked",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_liked.description"),formComponent:y,viewComponent:i.k,icon:"post"},_={label:(0,n.t)("settings.workflows.form.events.post_published.title"),value:"post_published",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_published.description"),formComponent:m,viewComponent:i.k,icon:"post"},x={label:(0,n.t)("settings.workflows.form.events.post_flagged.title"),value:"post_flagged",group:v,description:(0,n.t)("settings.workflows.form.events.post_flagged.description"),formComponent:y,viewComponent:i.k,icon:"post"},j={label:(0,n.t)("settings.workflows.form.events.post_approved.title"),value:"post_approved",group:v,description:(0,n.t)("settings.workflows.form.events.post_approved.description"),formComponent:y,viewComponent:i.k,icon:"post"},w={label:(0,n.t)("settings.workflows.form.events.post_rejected.title"),value:"post_rejected",group:v,description:(0,n.t)("settings.workflows.form.events.post_rejected.description"),formComponent:y,viewComponent:i.k,icon:"post"},O={label:(0,n.t)("settings.workflows.form.events.post_comment_created.title"),value:"post_comment_created",group:(0,n.t)("settings.workflows.form.event_groups.posts_and_comments"),description:(0,n.t)("settings.workflows.form.events.post_comment_created.description"),formComponent:u,viewComponent:i.k,icon:"post"},S={label:(0,n.t)("settings.workflows.form.events.post_comment_flagged.title"),value:"post_comment_flagged",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_flagged.description"),formComponent:u,viewComponent:i.k,icon:"post"},k={label:(0,n.t)("settings.workflows.form.events.post_comment_approved.title"),value:"post_comment_approved",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_approved.description"),formComponent:u,viewComponent:i.k,icon:"post"},N={label:(0,n.t)("settings.workflows.form.events.post_comment_rejected.title"),value:"post_comment_rejected",group:v,description:(0,n.t)("settings.workflows.form.events.post_comment_rejected.description"),formComponent:u,viewComponent:i.k,icon:"post"}},28911:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(739792),i=r(234781),o=r(671943),a={label:(0,n.t)("settings.workflows.form.events.event_published.title"),value:"event_published",group:(0,n.t)("settings.workflows.form.event_groups.events"),description:(0,n.t)("settings.workflows.form.events.event_published.description"),formComponent:o.d,viewComponent:i.k,icon:"event",released:!0}},603922:function(e,t,r){"use strict";r.d(t,{aD:()=>s,D1:()=>l,_:()=>c.G});var n=r(739792),i=r(584555),o=r(309464),a=r(641812),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space.title"),value:"community_member_joined_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.title"),value:"community_member_leaves_space",group:(0,n.t)("settings.workflows.form.event_groups.space"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space.description"),resource:i.uN.SPACE,formComponent:a.r,viewComponent:o.A,icon:"space"},c=r(28911)},645768:function(e,t,r){"use strict";r.d(t,{u:()=>d});var n=r(552676),i=r(227851),o=r(739792),a=r(654787),s=r(617013),l=r(767900),c=r(751169),u="settings.workflows.form",d=function(){var e=(0,i.Gc)().register,t=(0,a.r)(),r=t.data,d=t.isLoading,f=(r||{}).records,m=(void 0===f?[]:f).filter(function(e){return"course"===e.post_type});return d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,n.jsx)(l.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)([u,"choose_course"]),labelClassName:"!mb-2 !text-sm",placeholder:(0,o.t)([u,"search_course"]),className:"!py-0",children:d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsx)(s.M,{spaces:m,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",defaultButtonLabel:(0,o.t)([u,"select_course"]),placeholder:(0,o.t)([u,"search_course"]),name:"space-select"})})]})}},309464:function(e,t,r){"use strict";r.d(t,{A:()=>s});var n=r(552676),i=r(739792),o=r(441342),a=r(995900),s=function(e){var t=e.resourceId,r=(0,o.T4)({spaceId:t}),s=r.data,l=r.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.space"),value:null==s?void 0:s.name,isLoading:l})}},641812:function(e,t,r){"use strict";r.d(t,{r:()=>m});var n=r(552676),i=r(240507),o=r.n(i),a=r(227851),s=r(739792),l=r(654787),c=r(617013),u=r(767900),d=r(751169),f="settings.workflows.form",m=function(e){var t=e.resourceType,r=void 0===t?"":t,i=(0,a.Gc)().register,o=(0,l.r)(),m=o.data,p=o.isLoading,b=(m||{}).records,h=(void 0===b?[]:b).filter(function(e){var t=e.post_type;return!r||t===r});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},i("trigger.resource_type"))),(0,n.jsx)(u.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,s.t)([f,"choose_space"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,s.t)([f,"search_space"]),rules:{required:(0,s.t)("settings.workflows.form.errors.required")},className:"!py-0",children:p?(0,n.jsx)(d.a,{center:!0}):(0,n.jsx)(c.M,{spaces:h,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,s.t)("settings.workflows.form.errors.required")}})})]})};m.propTypes={resourceType:o().string}},123836:function(e,t,r){"use strict";r.d(t,{d:()=>l,_:()=>s});var n=r(739792),i=r(584555),o=r(121272),a=r(213447),s={label:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.title"),value:"community_member_joined_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"},l={label:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.title"),value:"community_member_leaves_space_group",group:(0,n.t)("settings.workflows.form.event_groups.space_group"),description:(0,n.t)("settings.workflows.form.events.community_member_leaves_space_group.description"),resource:i.uN.SPACE_GROUP,formComponent:a.D,viewComponent:o.T,icon:"space"}},121272:function(e,t,r){"use strict";r.d(t,{T:()=>s});var n=r(552676),i=r(739792),o=r(441342),a=r(995900),s=function(e){var t=e.resourceId,r=(0,o.p7)(t),s=r.data,l=r.isLoading;return(0,n.jsx)(a.i,{label:(0,i.t)("settings.workflows.view.resources.space_group"),value:null==s?void 0:s.name,isLoading:l})}},213447:function(e,t,r){"use strict";r.d(t,{D:()=>f});var n=r(552676),i=r(227851),o=r(739792),a=r(615882),s=r(441342),l=r(767900),c=r(751169),u="settings.workflows.form",d=function(){var e=(0,i.Gc)().register,t=(0,s.e2)(),r=t.records,d=t.isLoading;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,n.jsx)(l.l.Item,{name:"trigger.resource_id",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:(0,o.t)([u,"choose_space_group"]),labelClassName:"!mb-2 !text-sm",errorClassName:"text-v2-danger text-xs mt-1",placeholder:(0,o.t)([u,"search_space_group"]),className:"!py-0",children:d?(0,n.jsx)(c.a,{center:!0}):(0,n.jsx)(a.V,{spaceGroups:r,shouldShowEmoji:!0,variant:"form-input",containerClassname:"relative",dropdownClassName:"!top-12",rules:{required:(0,o.t)("settings.workflows.form.errors.required")}})})]})},f=function(){return(0,n.jsx)(s.CM,{children:(0,n.jsx)(d,{})})}},190735:function(e,t,r){"use strict";r.d(t,{r:()=>F});var n=r(739792),i=r(584555),o=r(552676),a=r(538484),s=r(995900),l=r(227851),c=r(695241),u=r(547144),d=r(108684),f=r(439788),m=r(751169),p=r(381636);function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h={label:(0,n.t)("settings.workflows.form.events.received_form_submission.title"),value:"received_form_submission",group:(0,n.t)("settings.workflows.form.event_groups.forms"),description:(0,n.t)("settings.workflows.form.events.received_form_submission.description"),formComponent:function(){var e=(0,l.Gc)().register,t=(0,d.U)({api:u.av.forms.index,key:"forms",useParamsWrapper:!1}),r=t.records,i=void 0===r?[]:r;if(t.isLoading)return(0,o.jsx)(m.a,{center:!0});var a=[];return i&&(a=i.map(function(e){var t=e.id,r=e.name;return{value:t,label:null!=r?r:""}})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",b({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)("input",b({type:"hidden",className:"hidden"},e("trigger.contact_type",{value:c.T}))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","events.received_form_submission.choose"])}),options:a,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.received_form_submission.error")})]})},resource:i.uN.FORM,viewComponent:function(e){var t=e.resourceId,r=(0,a.u)({id:t}),i=r.data,l=r.isLoading;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.form.events.received_form_submission.form"),value:null==i?void 0:i.name,isLoading:l})},icon:"email"},y=r(913445),v=r(218301),g=r(734260),_={label:(0,n.t)("settings.workflows.form.events.community_member_sent_dm_to_admin.title"),value:"community_member_sent_dm_to_admin",group:(0,n.t)("settings.workflows.form.event_groups.messaging"),description:(0,n.t)("settings.workflows.form.events.community_member_sent_dm_to_admin.description"),formComponent:g.b,resource:i.uN.COMMUNITY_MEMBER_ADMIN,viewComponent:v.j,icon:"email"},x=r(677774),j=r(36579),w={label:(0,n.t)("settings.workflows.form.events.community_member_joined_community.title"),value:"community_member_joined_community",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_joined_community.description"),formComponent:j.E,resource:i.uN.COMMUNITY,viewComponent:x.H,icon:"user",hasNoVisibleFormFields:!0},O={label:(0,n.t)("settings.workflows.form.events.community_member_email_changed.title"),value:"community_member_email_changed",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_email_changed.description"),formComponent:j.E,resource:i.uN.COMMUNITY,viewComponent:x.H,icon:"email",hasNoVisibleFormFields:!0},S=r(420176),k=r(237882),N={label:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.title"),value:"community_member_profile_field_updated",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.community_member_profile_field_updated.description"),formComponent:function(){var e=(0,l.Gc)().register,t=(0,k.N)().getOptions,r=t.data;if(t.isLoading)return(0,o.jsx)(m.a,{center:!0});var i=null==r?void 0:r.map(function(e){return{value:e.id,label:e.label}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_profile_field"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.errors.profile_fields.not_found")}),(0,o.jsx)(c.d,{})]})},viewComponent:function(e){var t=e.resourceId,r=e.contactType,i=(0,S.Yw)({fieldId:t}).getOptions,a=i.data,l=i.isLoading;return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.view.resources.profile_field"),value:null==a?void 0:a.label,isLoading:l,shouldRepresentAsBadge:!0}),(0,o.jsx)(s.i,{label:(0,n.t)(["settings.workflows.view","resources.contact_type"]),value:(0,n.t)(["settings.workflows.form.audience_type_options",r])})]})},resource:i.uN.PROFILE_FIELD,icon:"user",released:!0},P=r(393828),C=r(68167),A=r(786976),I=function(){var e=(0,l.Gc)().register,t=(0,A.c8)(),r=t.data;if(t.isLoading||!r)return(0,o.jsx)(m.a,{center:!0});var i=[];return r.levels&&(i=r.levels.map(function(e){var t=e.id,r=e.name;return{value:t,label:null!=r?r:""}})),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden",className:"hidden"},e("trigger.resource_type"))),(0,o.jsx)(f.N,{name:"trigger.resource_id",label:(0,o.jsx)(p.Z.LabelSm,{weight:"semibold",children:(0,n.t)(["settings.workflows.form","choose_level"])}),options:i,rules:{required:(0,n.t)("settings.workflows.form.errors.required")},emptyMessage:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.error")})]})},T=function(e){var t,r,i=e.resourceId,a=(0,A.c8)(),l=a.data,c=a.isLoading,u=null==l||null==(r=l.levels)||null==(t=r.find(function(e){return e.id===i}))?void 0:t.name;return(0,o.jsx)(s.i,{label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.level"),value:u,isLoading:c})},E={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.title"),value:"gamification_member_leveled_down",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_down.description"),formComponent:I,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:T,icon:"email"},L={label:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.title"),value:"gamification_member_leveled_up",group:(0,n.t)("settings.workflows.form.event_groups.member"),description:(0,n.t)("settings.workflows.form.events.gamification_member_leveled_up.description"),formComponent:I,resource:i.uN.GAMIFICATION_LEVEL,viewComponent:T,icon:"email"},D=r(873321),M=r(548347),R=r(435354),B=r(603922),z=r(123836),F=[w,C.Zo,C.PJ,y.q,y.P,B.aD,B.D1,z._,z.d,M.ji,D.m,D.E,C.BP,R.dO,R.Qw,R.jU,R.Uu,R.pC,R.Fw,R.GT,R.sj,R.fT,P.ey,P.ES,P.dP,M.nX,M.Pk,M.wL,M.Yf,M.NA,M.eD,M.oi,M.jp,M.iY,M.zM,M.aq,M.YC,M.zr,M.kT,M.Oc,M.R9,M.EY,C.OC,B._,C.Q4,N,O,L,E,h,P.NB,P.UP,P.NX,_]},369024:function(e,t,r){"use strict";r.d(t,{h:()=>p});var n=r(552676),i=r(903225),o=r(739792),a=r(282895),s=r(229956),l=r(812514),c=r(972171),u=r(547144),d=r(39905),f=r(971462),m=r(565088),p=function(e){var t=e.title,r=e.showAddNewButton,p=e.showBottomBorder,b=e.children,h=(0,i.k6)(),y=(0,l.I)(),v=(0,s.u)(),g=(0,m._)().category;return(0,n.jsx)(f.b,{pageTitle:t,leftContent:"paywalls"===g?(0,n.jsx)(a.G,{title:t}):(0,n.jsx)(c.y,{children:t}),layoutConfigProps:{disableRightSidebar:!0},hasBorder:void 0===p||p,rightContent:(void 0===r||r)&&(0,n.jsx)(d.z,{onClick:function(){h.push(u.o0.new()),y.hide(),v.hide()},variant:"circle",children:(0,o.t)(["settings.workflows","new_workflow"])}),children:b})}},257064:function(e,t,r){"use strict";r.d(t,{X:()=>y});var n=r(552676),i=r(275271),o=r(619803),a=r.n(o),s=r(739792),l=(0,i.forwardRef)(function(e,t){var r=e.isExpanded,i=void 0!==r&&r,o=e.isTruncationEnabled,s=e.children;return(0,n.jsx)("div",{ref:t,className:a()("w-full",{"max-h-56 overflow-hidden":!i}),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},void 0!==o&&o&&!i&&{WebkitMaskImage:"linear-gradient(180deg,#000 80%,transparent)",maskImage:"linear-gradient(180deg,#000 80%,transparent)"}),children:s})});l.displayName="Container";var c=r(22319);function u(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var d=function(){var e;return(e=function(){var e,t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Promise.all([r.e("5622"),r.e("1982")]).then(r.bind(r,403835))];case 1:return e=n.sent().default,[4,r.e("260").then(r.bind(r,895411))];case 2:return t=n.sent().default,e.registerLanguage("json",t),e.configure({languages:["json"]}),e.highlightAll(),[3,4];case 3:return console.error("Error highlighting code",n.sent()),[3,4];case 4:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)})})()},f=function(){var e=(0,c.TC)().isDarkAppearance;(0,i.useEffect)(function(){d()},[e])},m=function(e){var t,r,i=e.children,o=e.className,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return f(),(0,n.jsx)("pre",{className:"bg-tertiary m-0 !rounded-md border-none px-4 py-3",children:(0,n.jsx)("code",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:a()("!bg-transparent !p-0 text-xs leading-4",o)},s),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=function(e){var t=e.containerRef,r=b((0,i.useState)(!1),2),n=r[0],o=r[1],a=b((0,i.useState)(!1),2),s=a[0],l=a[1];return(0,i.useLayoutEffect)(function(){var e=null==t?void 0:t.current;if(e){var r=e.querySelector("pre");if(r){var n=e.clientHeight;r.clientHeight>n&&l(!0)}}},[t]),{isTruncationEnabled:s,isExpanded:n,toggleExpand:function(){o(function(e){return!e})}}},y=function(e){var t=e.code,r=e.className,o=(0,i.useRef)(null),c=h({containerRef:o}),u=c.isTruncationEnabled,d=c.isExpanded,f=c.toggleExpand;return(0,n.jsxs)("div",{className:a()("flex flex-col items-start gap-1",r),children:[(0,n.jsx)(l,{ref:o,isExpanded:d,isTruncationEnabled:u,children:(0,n.jsx)(m,{children:t})}),u&&(0,n.jsx)("div",{className:"px-1",children:(0,n.jsx)("button",{type:"submit",className:"text-default hover:text-dark text-xs transition-colors",onClick:f,children:d?(0,s.t)("show_less"):(0,s.t)("show_more")})})]})}},239368:function(e,t,r){"use strict";r.d(t,{K:()=>w});var n=r(552676),i=r(392042),o=r.n(i),a=r(903225),s=r(739792),l=r(957363),c=r(442042),u=r(381636),d=r(701168),f=r(552382),m=r(918446),p=r(380171),b="settings.workflows.templates.labels.ai_action";function h(){return(0,n.jsx)("div",{className:"flex h-5 items-center gap-1 rounded pe-1 hover:bg-[#AB6DFB]/10",children:(0,n.jsxs)(p.T,{className:"flex",interactive:!1,content:(0,s.t)([b,"description"]),placement:"top",arrow:!1,tooltipTextClassName:"!max-w-[210px]",children:[(0,n.jsx)(l.JO,{type:"10-stardust",size:10,className:"text-[#AB6DFB]"}),(0,n.jsx)(u.Z.LabelXxs,{color:"text-[#AB6DFB]",children:(0,s.t)([b,"label"])})]},(0,s.t)([b,"description"]))})}var y="settings.workflows.templates.labels.email_hub";function v(){return(0,n.jsx)("div",{className:"flex h-5 items-center gap-1 rounded pe-1 hover:bg-[#3B82F6]/10",children:(0,n.jsxs)(p.T,{className:"flex",interactive:!1,content:(0,s.t)([y,"description"]),placement:"top",arrow:!1,tooltipTextClassName:"!max-w-[210px]",children:[(0,n.jsx)(l.JO,{type:"10-diagonal-send",size:10,className:"text-date-blue"}),(0,n.jsx)(u.Z.LabelXxs,{color:"text-date-blue",children:(0,s.t)([y,"label"])})]},(0,s.t)([y,"description"]))})}function g(){return(0,n.jsx)("div",{className:"flex h-[18px] items-center gap-1 rounded bg-red-500/10 px-1 py-px",children:(0,n.jsx)(u.Z.LabelXxs,{color:"text-feedback-error",children:(0,s.t)(["settings.workflows.templates.labels.new","label"])})})}var _=r(184516),x=r(38776),j="workflows.templates";function w(e){var t,r,i=e.id,p=e.templateType,b=e.templateKey,y=e.categories,w=e.isNew,O=e.displayLabels,S=e.onClose,k=(0,m.y)(void 0===y?[]:y),N=k.category,P=k.isEmailHub,C=k.isAiAgent,A=(0,a.k6)(),I=function(){null==S||S(),A.push(f.o.preview({workflowId:i}))},T=o()(I);return(0,n.jsxs)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,d.A)("bg-primary border-primary hover:border-dark dark:hover:border-light flex w-80 cursor-pointer flex-col gap-4 rounded-xl border p-4 transition-shadow hover:shadow-md",{"cursor-pointer":T})},T?{role:"button",onClick:I}:{}),r=r={children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsx)("div",{className:"flex size-8 items-center justify-center rounded-lg bg-black text-white dark:bg-white dark:text-black",children:(0,n.jsx)(l.JO,{type:c.b[b],size:16})}),(void 0===O||O)&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[P&&(0,n.jsx)(v,{}),C&&(0,n.jsx)(h,{}),void 0!==w&&w&&(0,n.jsx)(g,{})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("span",{className:"line-clamp-1 overflow-hidden text-ellipsis",children:(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)([j,b,"title"])})}),(0,n.jsx)("span",{className:"line-clamp-2 overflow-hidden text-ellipsis",children:(0,n.jsx)(u.Z.BodyXs,{children:(0,s.t)([j,b,"description"])})})]})]}),(0,n.jsxs)("div",{className:"mt-auto flex flex-wrap gap-2",children:[(0,n.jsx)(x.X,{templateType:p}),(0,n.jsx)(_.h,{category:N})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},990069:function(e,t,r){"use strict";r.d(t,{o:()=>E});var n=r(131906),i=r(903225),o=r(739792),a=r(251630),s=r(670216),l=r(906082),c=r(912369),u=r(441342),d=r(547144),f=r(396354),m=r(779869),p=r(60878),b=r(584555),h=r(552676),y=r(757105),v=r(963549),g=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)();return(0,h.jsx)(v.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"danger",confirmText:(0,o.t)("settings.workflows.table.actions.deactivate_and_archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_title"),onConfirm:r,disabled:n,children:(0,o.t)("settings.workflows.table.actions.archive_confirm_active_workflow_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")})})},_=y.gk.create(function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,h.jsx)(g,{name:t,onConfirm:r,disabled:n})}),x=r(900795),j=function(e){var t=e.name,r=e.onConfirm,n=e.disabled,i=(0,y.dd)(),a=(0,o.t)("settings.workflows.table.actions.archive_confirm_description",{name:t||(0,o.t)("settings.workflows.table.untitled_workflow")}),s=(0,h.jsx)(x.w,{content:a});return(0,h.jsx)(v.c,{isOpen:i.visible,onClose:i.hide,confirmVariant:"danger",confirmText:(0,o.t)("settings.workflows.table.actions.archive"),title:(0,o.t)("settings.workflows.table.actions.archive_confirm_title"),onConfirm:r,disabled:n,children:s})},w=y.gk.create(function(e){var t=e.name,r=e.onConfirm,n=e.disabled;return(0,h.jsx)(j,{name:t,onConfirm:r,disabled:n})}),O=r(984208),S=function(e){var t=e.onConfirm,r=e.disabled,n="settings.workflows.table.actions.cancel",i=(0,y.dd)();return(0,h.jsx)(O.W,{isOpen:i.visible,onClose:i.hide,actionVariant:"danger",actionText:(0,o.t)("".concat(n,".title")),title:(0,o.t)("".concat(n,".confirm_title")),onAction:t,disabled:r,children:(0,o.t)("".concat(n,".description"))})},k=y.gk.create(function(e){var t=e.onConfirm,r=e.disabled;return(0,h.jsx)(S,{onConfirm:t,disabled:r})}),N=function(e){var t=e.onConfirm,r=e.disabled,n=(0,y.dd)();return(0,h.jsx)(O.W,{isOpen:n.visible,onClose:n.hide,actionVariant:"danger",actionText:(0,o.t)("settings.workflows.table.actions.delete"),title:(0,o.t)("settings.workflows.table.actions.delete_confirm_title"),onAction:t,disabled:r,children:(0,o.t)("settings.workflows.table.actions.delete_confirm_description")})},P=y.gk.create(function(e){var t=e.onConfirm,r=e.disabled;return(0,h.jsx)(N,{onConfirm:t,disabled:r})});function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){C(o,n,i,a,s,"next",e)}function s(e){C(o,n,i,a,s,"throw",e)}a(void 0)})}}function I(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var T="settings.workflows.table.actions",E=function(e){var t=e.workflowId,r=e.type,h=e.status,v=e.name,g=e.refetch,x=(0,i.k6)(),j=(0,p.pm)(),O=j.success,S=j.error,N=(0,n.useQueryClient)(),C=(0,f.t)(),E=(0,a.WX)(),L=(0,y.dd)(P),D=(0,y.dd)(k),M=(0,y.dd)(w),R=(0,y.dd)(_),B=(0,m.w)(),z=(0,u.wh)().currentCommunity,F=(null!=z?z:{}).current_plan_tier,U=h===b.qN.ACTIVE?R:M,Z=(0,n.useMutation)(function(){return E.createRun({workflowId:t})},{onSuccess:function(){O((0,o.t)([T,"run_in_progress"]),{messageComplete:(0,o.t)([T,"run_success"]),onComplete:function(){return x.push({pathname:d.o0.history(),search:"workflow_type=bulk_action"})}})},onError:function(e){(0,s.h)(e)||(0,s.w)(e)?G(e):S(e.message)}}).mutate,G=function(e){var t,r;return B.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,s.h)(e)&&{planTier:(0,l.gq)(F)}),r=r={subheading:e.body.message,source:(0,c.yf)(),isEmailHubRequired:(0,s.w)(e),onSuccess:function(){B.hide(),Z()},successButtonLabel:(0,o.t)("settings.workflows.upgrade_modal.run_this_workflow"),usedForWorkflows:!0,showPlanDetails:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},q=(0,n.useMutation)(function(){return E.deleteWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return L.hide(),O((0,o.t)([T,"deleting_workflow"]),{messageComplete:(0,o.t)([T,"deletion_successful"])}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),V=q.mutate,W=q.isLoading,H=(0,n.useMutation)(function(){return E.inactivate({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return D.hide(),O((0,o.t)([T,"cancel","cancelling_schedule"]),{messageComplete:(0,o.t)([T,"cancel","cancellation_successful"])}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),Q=H.mutate,K=H.isLoading,J=(0,n.useMutation)(function(){return E.archiveWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:return U.hide(),O((0,o.t)([T,"archiving_workflow"]),{messageComplete:(0,o.t)([T,"archive_successful"]),onComplete:function(){N.invalidateQueries({queryKey:["totalArchivedWorkflows"]})}}),[4,null==g?void 0:g()];case 1:return e.sent(),[2]}})})()},onError:function(e){return S(e.message)}}),$=J.mutate,X=J.isLoading,Y=C.page,ee=C.status;return{onDelete:V,onDuplicate:(0,n.useMutation)(function(){return E.duplicateWorkflow({id:t})},{onSuccess:function(){return A(function(){return I(this,function(e){switch(e.label){case 0:if(O((0,o.t)([T,"duplicating_workflow"]),{messageComplete:(0,o.t)([T,"duplication_successful"])}),ee!==b.qN.ARCHIVED&&1===Number(Y))return[3,1];return x.push({pathname:d.o0.index(),search:"workflow_type=".concat(r,"&page=1")}),[3,3];case 1:return[4,null==g?void 0:g()];case 2:e.sent(),e.label=3;case 3:return[2]}})})()},onError:function(e){return S(e.message)}}).mutate,handleDeleteWithConfirmation:function(){L.show({disabled:W,onConfirm:V})},handleArchiveWithConfirmation:function(){U.show({name:v,disabled:X,onConfirm:$})},handleCancelWithConfirmation:function(){D.show({name:v,disabled:K,onConfirm:Q})}}}},288203:function(e,t,r){"use strict";r.d(t,{V:()=>c});var n=r(552676),i=r(739792),o=r(627175),a=r(612581),s=r(39905),l=r(767900),c=function(e){var t,r,c=e.name,u=void 0===c?"member-filter":c,d=(0,a.j)(),f=d.selectedText,m=d.onApply,p=(0,o.r)();return(0,n.jsx)(l.l,{defaultValues:(t={},r=+(f||0),u in t?Object.defineProperty(t,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[u]=r,t),onSubmit:function(e,t){var r=t.reset;m(e[u]),r()},children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 p-4",children:[(0,n.jsx)(l.l.CommunityMemberSelect,{name:u,includeInactive:!0,direction:"down",autoFocus:!0}),(0,n.jsx)(s.z,{variant:p,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})}},574472:function(e,t,r){"use strict";r.d(t,{x:()=>d});var n,i=r(552676),o=r(739792),a=r(584555),s=r(595342),l=r(863234);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=(c(n={},a.Ii.SUCCESS,{text:"success",badge:"success"}),c(n,a.Ii.PARTIAL_SUCCESS,{text:"warning",badge:"warning"}),c(n,a.Ii.FAILED,{text:"danger",badge:"danger"}),c(n,a.Ii.CANCELLED,{text:"danger",badge:"danger"}),c(n,a.Ii.IN_PROGRESS,{text:"default",badge:"info"}),c(n,a.Ii.SKIPPED,{text:"default",badge:"info"}),c(n,a.Ii.DUPLICATE_SKIPPED,{text:"default",badge:"info"}),c(n,a.qN.ACTIVE,{text:"success",badge:"success"}),c(n,a.qN.INACTIVE,{text:"default",badge:"default"}),c(n,a.qN.DRAFT,{text:"default",badge:"default"}),c(n,a.qN.ARCHIVED,{text:"default",badge:"default"}),c(n,a.qN.ALL,{text:"default",badge:"default"}),c(n,a.qN.PUBLISHED,{text:"success",badge:"success"}),n),d=function(e){var t,r,n,d=e.result,f=e.isBadge,m=void 0===f||f,p=d in a.Ii,b=null!=(n=u[d])?n:{text:"default",badge:"default"},h=m?b.badge:b.text,y=m?s.O:l.r;return(0,i.jsx)(y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({variant:h},!p&&{textTransform:"capitalize"}),r=r={children:(0,o.t)(["settings.workflows.table.result",d],{defaultValue:d||""})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},567930:function(e,t,r){"use strict";r.d(t,{PF:()=>c});var n=r(552676),i=r(739792),o=r(757105),a=r(963549),s=function(e){var t=e.onConfirm,r=e.onCancel,s=e.disabled,l=e.title,c=e.body,u=(0,o.dd)();return(0,n.jsx)(a.c,{isOpen:u.visible,onClose:u.hide,confirmVariant:"circle",confirmText:(0,i.t)("settings.workflows.continue_to_edit"),title:l,cancelText:(0,i.t)("settings.workflows.cancel"),onConfirm:t,onCancel:r,disabled:void 0!==s&&s,children:c})},l=o.gk.create(function(e){var t=e.onConfirm,r=e.onCancel,i=e.disabled,o=e.title,a=e.body;return(0,n.jsx)(s,{onConfirm:t,onCancel:r,disabled:void 0!==i&&i,title:o,body:a})}),c=function(){return(0,o.dd)(l)}},215385:function(e,t,r){"use strict";r.d(t,{hp:()=>u});var n=r(552676),i=r(739792),o=r(757105),a=r(984208),s=r(381636),l=function(e){var t=e.onAction,r=e.i18nBase,l=void 0===r?"settings.workflows.edit.incomplete_workflow_modal":r,c=(0,o.dd)();return(0,n.jsx)(a.W,{isOpen:c.visible,onClose:c.hide,actionVariant:"circle",actionText:(0,i.t)([l,"confirm_text"]),onAction:t,titleClassName:"!text-left !px-0",title:(0,i.t)([l,"title"]),children:(0,n.jsx)("div",{children:(0,n.jsx)(s.Z.BodyMd,{color:"text-default",children:(0,i.t)([l,"body"])})})})},c=o.gk.create(function(e){var t=e.onAction,r=e.i18nBase;return(0,n.jsx)(l,{onAction:t,i18nBase:r})}),u=function(){return(0,o.dd)(c)}},5917:function(e,t,r){"use strict";r.d(t,{C:()=>i});var n=r(661676),i=function(e){var t=e.workflowId,r=e.disableRefetching,i=(0,n.RC)({workflowId:t,shouldDisableRefetching:r});return{areAllRunsCompleted:i.areAllRunsCompleted,isLoading:i.isLoading}}},428281:function(e,t,r){"use strict";r.d(t,{f:()=>a});var n=r(552676),i=r(932699),o=r(39905),a=function(e){var t,r,a=e.onClick,s=e.children,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onClick","children"]);return(0,n.jsx)(o.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({large:!1,variant:"circle",type:"button",onClick:function(){(0,i.isFunction)(a)&&a()}},l),r=r={children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},949366:function(e,t,r){"use strict";r.d(t,{g:()=>u});var n=r(552676),i=r(275271),o=r(182691),a=r.n(o),s=r(227851);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e){var t,r,o=e.workflow,u=e.children,d=!a()(null==o?void 0:o.actions),f=(0,i.useMemo)(function(){return d?o.actions:[]},[d,null==o?void 0:o.actions]),m=(null==o?void 0:o.workflow_type)==="bulk_action",p=(null==o?void 0:o.workflow_type)==="scheduled",b=null==o||null==(r=o.audience)||null==(t=r.rules)?void 0:t.rules,h=(0,i.useMemo)(function(){return(m||p)&&b?o.audience:{rules:{rule_type:"custom_filters",rules:[]}}},[b,m,p,o.audience]),y=p?o.schedule:{},v=(0,i.useMemo)(function(){return c(l({},o),{actions:f,audience:h,schedule:y})},[o,f,h,y]),g=(0,s.cI)({mode:"onChange",reValidateMode:"onChange",defaultValues:v});return(0,n.jsx)(s.RV,c(l({},g),{children:u}))}},67933:function(e,t,r){"use strict";r.d(t,{a:()=>h});var n=r(932699),i=r(331695),o=r(782470),a=r(997346),s=r(209905),l=r(638998),c=r(844123),u=r(736855),d=r(839315),f=r(722705),m=r(293919),p=r(203178),b=r(2565),h=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.action_type,h=void 0===i?"":i,x=r.api_params,j=void 0===x?{}:x;return h===f.Cz.value?y(j):h===f.MK.value?v(j):h===f.Ah.value||h===f.TQ.value||h===f.KY.value||h===f.r1.value||h===c.m.value||h===l.c.value||(h===f.zW.value?g(null==j||null==(t=j.message)||null==(e=t.body)?void 0:e.content):h===p.l.value?(0,b.Y)(null==j?void 0:j.url):h===m.T1.value?(0,b.Y)((0,n.omit)(j,"send_notification_subscription_created_by_admin")):h===m.s4.value?(0,n.isNumber)(null==j?void 0:j.paywall_coupon_id):h===d.I.value?(0,b.Y)((0,n.omit)(j,"time_delay")):h===o.s.value?(0,b.Y)(null==j?void 0:j.points):h===s.w.value||h===u.M.value?(0,n.isNumber)(null==j?void 0:j.community_bot_profile_id):h===a.o.value?_(j):"ai_agents_edit_topics"===h?"boolean"==typeof(null==j?void 0:j.ensure_at_least_one):(0,b.Y)(j))},y=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=r||{};return!(!o.internal_name||!o.subject||!o.broadcast_id||o.subject.length>i.gv||(null==(e=o.preview_text)?void 0:e.length)>i.b||(0,n.isEmpty)(o.email_content)&&(0,n.isEmpty)(o.visual_email_builder_content))&&(!(0,n.isEmpty)(null==o||null==(t=o.email_content)?void 0:t.body.content)||!(0,n.isEmpty)(null==o?void 0:o.visual_email_builder_content))},v=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!(0,n.isNumber)(null==r?void 0:r.from)||(0,n.isEmpty)(null==r?void 0:r.rich_text_body))&&g(null==r||null==(t=r.rich_text_body)||null==(e=t.body)?void 0:e.content)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(0,n.isEmpty)(e)&&e.some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t,i=e.content,o=e.text;return"text"===r?!(0,n.isEmpty)(void 0===o?"":o):"paragraph"===r?(void 0===i?[]:i).some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!(0,n.isEmpty)(void 0===t?"":t)}):void 0})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==e?void 0:e.hide_post_from_featured_areas)||(null==e?void 0:e.close_comments)||(null==e?void 0:e.hide_metadata)}},385637:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(932699),i=r(848224),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rules,r=(0,i.k)(void 0===t?{}:t);return!(0,n.isEmpty)({filters:r})}},523527:function(e,t,r){"use strict";r.d(t,{p:()=>i});var n=r(932699),i=function(e){return(0,n.isObject)(e)?Object.values(e).some(function(e){return i(e)}):!!e}},2565:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(932699),i=function(e){return(0,n.isObject)(e)?!(0,n.isEmpty)(e)&&Object.values(e).every(function(e){return i(e)}):!!e}},39396:function(e,t,r){"use strict";r.d(t,{H:()=>eg});var n=r(552676),i=r(275271),o=r(619803),a=r.n(o),s=r(131906),l=r(60878),c=r(850362),u=r(227851),d=r(251630),f=r(404393),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,(0,u.Gc)().watch)("id"),n=(0,d.WX)();return(0,s.useMutation)(function(){return(0,f.Cp)(n.activate({id:r,params:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){console.error(e)}},e))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,u.Gc)().watch)("id"),r=(0,d.WX)();return(0,s.useMutation)(function(){return(0,f.Cp)(r.createRun({workflowId:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){console.error(e)}},e))};function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.D)().isBulkAction,r=(0,l.pm)(),n=m().mutateAsync,i=p().mutateAsync;return(0,s.useMutation)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,n()];case 1:if(e.sent(),!t)return[3,3];return[4,i()];case 2:e.sent(),e.label=3;case 3:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){r.error(e.message)}},e))},y=r(932699),v=r(670216),g=r(906082),_=r(757105),x=r(912369),j=r(441342),w=r(779869),O=r(434519),S=r(584555),k=r(794644),N=r(949366),P=r(739792),C=r(69831),A=r(39905),I=r(957363),T=r(381636),E=r(947532),L=r(722705),D=r(317184),M=r(552634),R=function(){var e=((0,(0,u.Gc)().watch)("actions")||[]).map(function(e){return null==e?void 0:e.action_type}).filter(Boolean).map(function(e){return{title:(0,P.t)(["settings.workflows.view.actions",e,"title"],{defaultValue:(0,P.t)("settings.workflows.form.add_an_action")}),icon:(0,M.mR)(e)}});return(0,n.jsx)(n.Fragment,{children:e.map(function(e,t){var r=e.title,i=e.icon;return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)(I.JO,{type:"24-workflow-".concat(i),size:24,useWithFillCurrentColor:!0,className:"!h-5 !w-5"}),(0,n.jsx)(T.Z.BodySm,{children:r})]},t)})})},B=function(){var e=(0,D.Y)(),t=e.count,r=e.formattedCount,i=(0,P.t)("settings.workflows.confirm_modal.members_match_right_now",{count:t}),o=t>0?"".concat(r," ").concat(i):i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsx)(I.JO,{type:"24-workflow-audience",size:24,className:"!h-5 !w-5"}),(0,n.jsx)(T.Z.BodySm,{children:o})]}),(0,n.jsx)(R,{})]})},z=function(){var e=(0,D.Y)(),t=e.isLoading,r=e.hasFilters,i=(0,E.ol)().formActions.find(function(e){return e.action_type===L.Ah.value}),o=i?(0,P.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_title"):(0,P.t)("settings.workflows.confirm_modal.workflow_summary");return(0,n.jsxs)(O.u_.Body,{children:[(0,n.jsx)(T.Z.LabelMd,{weight:"semibold",children:o}),(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:r&&(0,n.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[t&&(0,n.jsx)("div",{className:"flex flex-row items-center gap-3",children:(0,n.jsx)(I.JO,{type:"loader",size:16,className:"!h-4 !w-4"})}),(0,n.jsx)(B,{})]})})}),i&&(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)(T.Z.LabelSm,{children:(0,P.t)("settings.workflows.confirm_modal.workflow_summary_remove_members_description")})})]})},F=function(){return(0,n.jsx)(O.u_.Body,{children:(0,n.jsx)(T.Z.BodyMd,{children:(0,P.t)("settings.workflows.confirm_modal.are_you_sure_you_want_to_publish_your_workflow")})})},U=r(240507),Z=r.n(U),G=function(e){var t=e.rerunParams,r=(null==t?void 0:t.do_not_skip_tasks)=="true"?(0,P.t)("settings.workflows.rerun_modal.all_members"):(0,P.t)("settings.workflows.rerun_modal.only_new_members");return(0,n.jsxs)(O.u_.Body,{children:[(0,n.jsx)(T.Z.LabelMd,{weight:"semibold",children:(0,P.t)("settings.workflows.confirm_modal.workflow_summary")}),(0,n.jsx)("div",{className:"pt-5",children:(0,n.jsx)("div",{className:"bg-secondary rounded-lg border p-5",children:(0,n.jsxs)("div",{className:"text-default flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"flex flex-row items-start gap-3",children:[(0,n.jsx)("div",{children:(0,n.jsx)(I.JO,{type:"24-workflow-audience",size:24,className:"!h-6 !w-6"})}),(0,n.jsx)(T.Z.BodySm,{children:r})]}),(0,n.jsx)(R,{})]})})})]})};G.propTypes={rerunParams:Z().object};var q=function(e){var t=e.isBulkAction,r=e.isScheduled,i=e.isRerun,o=e.rerunParams;return t&&i?{title:(0,P.t)("settings.workflows.confirm_modal.rerun_summary"),body:(0,n.jsx)(G,{rerunParams:o}),successButtonLabel:(0,P.t)("settings.workflows.upgrade_modal.rerun_this_workflow")}:t?{title:(0,P.t)("settings.workflows.confirm_modal.run_this_workflow"),body:(0,n.jsx)(z,{}),successButtonLabel:(0,P.t)("settings.workflows.upgrade_modal.run_this_workflow")}:r?{title:(0,P.t)("settings.workflows.confirm_modal.schedule_this_workflow"),body:(0,n.jsx)(z,{}),successButtonLabel:(0,P.t)("settings.workflows.upgrade_modal.schedule_this_workflow")}:{title:(0,P.t)("settings.workflows.confirm_modal.publish_your_workflow"),body:(0,n.jsx)(F,{}),successButtonLabel:(0,P.t)("settings.workflows.upgrade_modal.activate_this_workflow")}},V=function(e){var t=e.onCancel,r=e.onPublish,i=e.isLoading,o=e.isRerun,a=e.rerunParams,s=e.onBack,l=(0,c.D)(),u=l.isBulkAction,d=l.isScheduled;if(void 0!==i&&i)return(0,n.jsx)(O.u_.Content,{children:(0,n.jsx)(O.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(C.u,{title:(0,P.t)("settings.workflows.publishing_your_workflow"),subtitle:(0,P.t)("settings.workflows.we_are_preparing")})})});var f=q({isBulkAction:u,isScheduled:d,isRerun:o,rerunParams:a}),m=f.title,p=f.body;return(0,n.jsxs)(O.u_.Content,{size:"md",children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:m}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})}),(0,y.isFunction)(s)&&(0,n.jsx)(O.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(O.u_.BackButton,{onClick:s})})]}),p,(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:u?"danger":"circle",onClick:r,children:u?(0,P.t)("settings.workflows.confirm_modal.confirm_and_run"):d?(0,P.t)("settings.workflows.confirm_modal.schedule"):(0,P.t)("settings.workflows.confirm_modal.publish_and_enable")})})]})},W=r(194281),H=r(604523),Q=r(180842),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,(0,u.Gc)().watch)("id"),n=(0,d.WX)(),i=(0,l.pm)();return(0,s.useMutation)(function(){return(0,f.Cp)(n.createRun({workflowId:r,params:t}),500)},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(e){i.error(e.message)}},e))},J=r(624804),$=r(767900),X=function(e){var t=e.onCancel,r=e.onPublish,i=e.rerunParams,o=e.onBack,a=(0,c.D)(),s=q({isBulkAction:a.isBulkAction,isScheduled:a.isScheduled,isRerun:!0,rerunParams:i}),l=s.title,u=s.body;return(0,n.jsxs)(O.u_.Content,{size:"md",children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:l}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,n.jsx)(O.u_.BackButton,{onClick:o})})]}),u,(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:"danger",onClick:r,children:(0,P.t)("settings.workflows.confirm_modal.confirm_and_run")})})]})},Y=r(633378),ee="settings.workflows.rerun_modal",et=function(e){var t=e.onCancel;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(O.u_.Header,{children:[(0,n.jsx)(O.u_.Title,{size:"md",children:(0,P.t)([ee,"title"])}),(0,n.jsx)(O.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(O.u_.CloseButton,{onClick:t})})]}),(0,n.jsx)(Y.n,{}),(0,n.jsx)(O.u_.Footer,{className:"flex w-full items-center justify-end",children:(0,n.jsx)(A.z,{variant:"circle",type:"submit",children:(0,P.t)([ee,"continue"])})})]})};function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ei=function(e){var t=e.hasRuns,r=e.onPublish,o=e.onCancel,a=e.additionalRerunParams,s=en((0,i.useState)(null),2),l=s[0],c=s[1],u=en((0,J.k)(!1===t),2),d=u[0],f=u[1],m=K({onError:y.noop},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l,a)),p=m.mutateAsync;return m.isLoading?(0,n.jsx)(O.u_.Content,{children:(0,n.jsx)(O.u_.Body,{className:"w-full !px-10 !py-16",children:(0,n.jsx)(C.u,{title:(0,P.t)("settings.workflows.rerunning_your_workflow"),subtitle:(0,P.t)("settings.workflows.we_are_preparing")})})}):d?(0,n.jsx)(X,{rerunParams:l,onBack:f,onCancel:o,onPublish:function(){return r(p)}}):(0,n.jsx)(O.u_.Content,{size:"md",children:(0,n.jsx)($.l,{defaultValues:{do_not_skip_tasks:(null==l?void 0:l.do_not_skip_tasks)||"false"},onSubmit:function(e){c(e),f()},children:(0,n.jsx)(et,{onCancel:o})})})};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ea(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function es(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ea(o,n,i,a,s,"next",e)}function s(e){ea(o,n,i,a,s,"throw",e)}a(void 0)})}}function el(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ec="dismissed",eu="error",ed=function(e){var t,r=e.isRerun,o=void 0!==r&&r,a=(0,_.dd)(),s=(0,x.yf)(),u=(0,c.D)(),d=u.saveWorkflowName,f=u.hasName,m=u.placeholderName,p=u.isBulkAction,b=u.isScheduled,N=u.schedule,P=u.hasRuns,C=u.id,A=u.actions,I=(t=(0,i.useState)(!(o||b)),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=I[0],E=I[1],L=h({onError:y.noop}),D=L.mutateAsync,M=L.isLoading,R=(0,j.wh)().currentCommunity,B=(null!=R?R:{}).current_plan_tier,z=(0,w.w)(),F=(0,l.pm)(),U=q({isBulkAction:p,isRerun:o}).successButtonLabel,Z=(0,k.Tc)(A),G=Z.disabledAgents,K=Z.isLoading,J=function(){a.resolve(ec),a.hide()},$=function(){z.hide(),a.show()},X=function(e){var t,r;return z.show((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,v.h)(e)&&{planTier:(0,g.gq)(B)}),r=r={subheading:e.body.message,isEmailHubRequired:(0,v.w)(e),onSuccess:$,successButtonLabel:U,usedForWorkflows:!0,showPlanDetails:!0,source:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Y=function(e){return es(function(){var t;return el(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,8,9]),!(G.length>0))return[3,2];return[4,(0,k.uj)(G)];case 1:r.sent(),r.label=2;case 2:return[4,e()];case 3:return r.sent(),a.resolve("closed_after_success"),[3,9];case 4:if(t=r.sent(),!((0,v.h)(t)||(0,v.w)(t)))return[3,6];return a.hide(),[4,X(t)];case 5:return r.sent(),[3,7];case 6:F.error(t.message),r.label=7;case 7:return a.resolve(eu),[3,9];case 8:return a.hide(),[7];case 9:return[2]}})})()};return(0,n.jsxs)(O.u_,{isOpen:a.visible,onClose:J,children:[(0,n.jsx)(O.u_.Overlay,{}),T?G.length>0&&!K?(0,n.jsx)(W.d,{disabledAgents:G,onCancel:J,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(m)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})}}):(0,n.jsx)(V,{isLoading:M,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(m)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})},onCancel:J}):b?function(){switch(null==N?void 0:N.schedule_type){case S.By.ONE_TIME:return(0,n.jsx)(H.C,{workflowId:C,setIsConfirmContent:E,onCancel:J,schedule:N,hasRuns:P});case S.By.RECURRING:return(0,n.jsx)(Q.L,{workflowId:C,onCancel:J,schedule:N,isLoading:M,onPublish:function(){return Y(function(){return es(function(){return el(this,function(e){switch(e.label){case 0:if(f)return[3,2];return[4,d(m)];case 1:e.sent(),e.label=2;case 2:return[4,D()];case 3:return e.sent(),[2]}})})()})}});case"run_now":return(0,n.jsx)(ei,{hasRuns:P,onCancel:J,onPublish:Y,additionalRerunParams:{schedule_run_now:!0}})}return null}():o?(0,n.jsx)(ei,{onPublish:Y,onCancel:J}):null]})},ef=function(e){var t=e.isRerun;return _.gk.create(function(e){var r=e.workflow;return(0,n.jsx)(N.g,{workflow:r,children:(0,n.jsx)(ed,{isRerun:t})})})},em=function(e){var t=e.isRerun;return(0,_.dd)(ef({isRerun:t}))},ep=r(903225),eb=r(547144);function eh(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var ey=function(e){var t=e.isRerun,r=(0,ep.k6)(),n=em({isRerun:t}),i=(0,s.useQueryClient)(),o=(0,l.pm)(),a=(0,u.Gc)(),c=a.handleSubmit,d=a.getValues;return{submitWorkflow:c(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=function(){var e,o,a,s,l,c;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return[4,n.show({workflow:d()})];case 1:if((e=u.sent())===ec||e===eu)return[2];if(o=t.id,a=t.workflow_type,s=t.schedule,l=a===S.nQ.BULK_ACTION,c=(null==s?void 0:s.schedule_type)==="run_now",i.removeQueries(["workflows",o]),l||c)return r.push(eb.o0.runs({workflowId:o})),[2];return r.push(eb.o0.view({workflowId:o})),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eh(o,n,i,a,s,"next",e)}function s(e){eh(o,n,i,a,s,"throw",e)}a(void 0)})})()},function(){o.error((0,P.t)("settings.workflows.form.errors.fill_all_required_fields"))})}},ev=(0,i.forwardRef)(function(e,t){var r=e.children,i=e.className,o=ey({isRerun:e.isRerun}).submitWorkflow;return(0,n.jsx)("form",{ref:t,className:a()("flex size-full flex-col",i),onSubmit:o,children:r})});ev.displayName="Form";var eg=function(e){var t=e.workflow,r=e.formRef,i=e.children,o=e.isRerun;return(0,n.jsx)(N.g,{workflow:t,children:(0,n.jsx)(ev,{ref:r,isRerun:o,children:i})})}},132309:function(e,t,r){"use strict";r.d(t,{l:()=>p});var n=r(227851),i=r(739792),o=r(932699),a=r(67933),s=r(385637),l=r(779774),c=l.Ry({community_segment_id:l.Rx().nullable(),rules:l.IX().of(l.Ry({key:l.Z_().required(),filter_type:l.Z_().nullable(),value:l.nK().nullable(),profile_field_type:l.Z_().nullable(),profile_field_id:l.Rx().nullable()})).nullable(),resource_id:l.Rx().required(),resource_type:l.Z_().required(),contact_type:l.Z_().nullable(),trigger_type:l.Z_().required()}),u=r(523527),d=r(2565),f=function(e,t){if(e.startsWith("actions"))return(0,a.a)(t);if(e.startsWith("audience"))return(0,s.$)(t);if(e.startsWith("trigger"))return!!t&&c.isValidSync(t);return(0,d.Y)(t)},m=function(e){var t=(0,n.Gc)(),r=t.getFieldState,i=t.formState,a=t.watch,s=a(e),l=r(e,i).error,c=i.dirtyFields,d=i.touchedFields,m=(0,o.get)(c,e,null),p=(0,u.p)(m),b=(0,o.get)(d,e,null),h=(0,u.p)(b),y=a("community_segment_id"),v=e.startsWith("audience")&&!!y||!!(null==s?void 0:s.id);return{isDirty:p,isTouched:h,hasError:!!l,hasValue:f(e,s),hasId:v,value:s}},p=function(e){var t=(0,n.Gc)().trigger,r=m(e),o=r.isDirty,a=r.isTouched,s=r.hasError,l=r.hasValue,c=r.hasId,u=r.value,d=c&&l&&!o&&!a&&!s,f=s?(0,i.t)("settings.workflows.form.step_incomplete"):d?(0,i.t)("settings.workflows.form.step_complete"):"";return{hasError:s,hasValue:l,isCompleted:d,revalidate:function(){return t(e)},statusMessage:f,wasSaved:c,value:u}}},850362:function(e,t,r){"use strict";r.d(t,{D:()=>u});var n=r(275271),i=r(778139),o=r(227851),a=r(131906),s=r(739792);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var u=function(){var e,t,r=(0,a.useQueryClient)(),u=(0,i.D)(),d=u.mutate,f=u.mutateAsync,m=u.isLoading,p=u.isError,b=(0,o.Gc)(),h=b.watch,y=b.setValue,v=b.formState,g=h("id"),_=h("name"),x=h("schedule"),j=(e=(0,n.useState)(_),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=j[0],O=j[1],S=!!_,k=(0,s.t)("settings.workflows.form.untitled_workflow"),N=h("status"),P=v.defaultValues,C=null==P?void 0:P.workflow_type;return{id:g,hasRuns:(null==P?void 0:P.runs_count)>0,name:_,type:C,placeholderName:k,hasName:S,status:N,saveWorkflowName:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(e===w)return[2];if(""===e.trim())return y("name",w),[2];return[4,f({name:e})];case 1:return t.sent(),r.invalidateQueries({queryKey:["workflows",g]}),O(e),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()},updateWorkflow:d,updateWorkflowAsync:f,isBulkAction:"bulk_action"===C,isDynamic:"dynamic"===C,isScheduled:"scheduled"===C,schedule:x,isSavingWorkflow:m,isWorkflowError:p,triggerType:null==P||null==(t=P.trigger)?void 0:t.trigger_type,actions:null==P?void 0:P.actions}}},391980:function(e,t,r){"use strict";r.d(t,{y:()=>n});var n={title:"md:w-1/3 xl:w-1/4",steps:"hidden xl:table-cell min-w-[11rem]",user:"hidden md:table-cell min-w-[9rem] max-w-[16rem] truncate text-ellipsis",status:"min-w-[9rem]",workflowType:"min-w-[8rem]",scheduleType:"min-w-[8rem]",dateShort:"hidden 2xl:table-cell min-w-[8rem]",dateLong:"hidden 2xl:table-cell min-w-[12rem]",number:"hidden xl:table-cell min-w-[6rem]",toggleInput:"2xl:max-w-auto 2xl:min-w-[6rem]",uuid:"hidden 2xl:table-cell max-w-[12rem]"}},184516:function(e,t,r){"use strict";r.d(t,{h:()=>a});var n=r(552676),i=r(739792),o=r(381636),a=function(e){var t=e.category;return t?(0,n.jsx)("span",{className:"border-primary text-dark inline-flex items-center rounded-full border px-2 py-1",children:(0,n.jsx)(o.Z.LabelXxs,{weight:"medium",textTransform:"capitalize",children:(0,i.t)(["settings.workflows.templates.categories",t])})}):null}},38776:function(e,t,r){"use strict";r.d(t,{X:()=>l});var n=r(552676),i=r(739792),o=r(957363),a=r(381636),s={dynamic:"12-zap",bulk_action:"12-layers",scheduled:"12-layers"},l=function(e){var t=e.templateType;return t?(0,n.jsxs)("span",{className:"bg-tertiary inline-flex items-center gap-1 rounded-full px-2 py-1",children:[(0,n.jsx)(o.JO,{type:s[t],size:12,className:"text-dark !size-[12px]"}),(0,n.jsx)(a.Z.LabelXxs,{weight:"medium",textTransform:"capitalize",children:(0,i.t)(["settings.workflows.templates",t])})]}):null}},758269:function(e,t,r){"use strict";r.d(t,{h:()=>o});var n=r(275271),i=r(227851),o=function(e,t){var r=(0,i.Gc)(),o=r.getValues,a=r.setValue;(0,n.useEffect)(function(){null==o(e)&&a(e,t)},[e,a,o,t])}},565088:function(e,t,r){"use strict";r.d(t,{C:()=>l,_:()=>s});var n=r(552676),i=r(275271),o=r(809163),a=(0,i.createContext)({pageSize:o.L8});a.displayName="WorkflowsData";var s=function(){return(0,i.useContext)(a)},l=function(e){var t=e.children,r=e.pageSize,i=void 0===r?o.L8:r,s=e.category,l=e.onClose,c=e.shouldAutoAdjust;return(0,n.jsx)(a.Provider,{value:{pageSize:i,category:s,onClose:l,shouldAutoAdjust:c},children:t})}},874052:function(e,t,r){"use strict";r.d(t,{z:()=>u});var n=r(932699),i=r(743445),o=r(848224),a=function(e){var t=e.rules,r=e.community_segment_id;return r?i.W.update({id:Number(r),rules:t}):i.W.create({rules:t,visible:!1})};function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e){var t;return(t=function(){var t,r,s,u,d,f;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:if(t=e.community_segment_id,r=e.rules,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["community_segment_id","rules"]),!((u=(0,o.k)(r))&&!(0,n.isEmpty)(u)))return[3,2];return[4,a(c(l({},e),{rules:{rule_type:"custom_filters",rules:u}}))];case 1:return d=m.sent(),[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:u},community_segment_id:null!=(f=d.id)?f:null})];case 2:if(!t)return[3,4];return[4,i.W.delete({id:t})];case 3:return m.sent(),[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:[]},community_segment_id:null})];case 4:return[2,c(l({},s),{rules:{rule_type:"custom_filters",rules:[]},community_segment_id:null})]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()}},918446:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(275271),i=["onboarding","engagement","administrative","paywalls","ai_workflows","moderation"];function o(e){var t=(0,n.useMemo)(function(){var t=!1,r=!1,n=e.filter(function(e){return t||"email_hub"!==e||(t=!0),r||"ai_agent"!==e||(r=!0),r||"ai_workflows"!==e||(r=!0),i.includes(e)});return{category:null==n?void 0:n[0],isEmailHub:t,isAiAgent:r}},[e]);return{category:t.category,isEmailHub:t.isEmailHub,isAiAgent:t.isAiAgent}}},391026:function(e,t,r){"use strict";r.d(t,{u:()=>a});var n=r(131906),i=r(547144),o=r(93199),a=function(e){var t=e.id,r=e.options;return(0,n.useQuery)(["member-tag",t.toString()],function(){return(0,o.UT)(i.av.memberTags.show({id:t}))},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:!!t},void 0===r?{}:r))}},736913:function(e,t,r){"use strict";r.d(t,{$c:()=>d,Cw:()=>u});var n=r(932699),i=r(131906),o=r(743445),a=r(271738);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l="workflow-segments-list",c=function(e){var t=e.workflowId,r=e.segmentIds,i=void 0===r?[]:r;return 0===i.length?[l,t]:[l,t,(0,n.sortBy)(i).join(",")]},u=function(e){var t,r=e.workflowId,n=e.segmentIds,i=void 0===n?[]:n;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,a.Eh.invalidateQueries(c({workflowId:r,segmentIds:i}))];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},d=function(e){var t=e.workflowId,r=e.segmentIds,n=void 0===r?[]:r,a=c({workflowId:t,segmentIds:n});return(0,i.useQuery)(a,function(){return o.W.list({params:{ids:n,per_page:100}})},{enabled:n.length>0,keepPreviousData:!1})}},654787:function(e,t,r){"use strict";r.d(t,{r:()=>s});var n=r(131906),i=r(739792),o=r(251630),a=r(60878),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{per_page:100},t=e.per_page,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["per_page"]),s=(0,a.pm)().error;return(0,n.useQuery)(["workflows","list","spaces"],function(){return o.rb.list({params:{per_page:t}})},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onError:function(){return s((0,i.t)(["settings.workflows.form","errors","spaces","fetch_failed"]))}},r))}},776453:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(131906),i=r(651714),o=function(e){var t=e.per_page,r=e.location_type,o=void 0===r?"":r,a=e.options;return(0,n.useQuery)(["workflows","list","upcomingEvents"],function(){return i.S.fetchUpcomingEvents({params:{per_page:t,location_type:o}})},void 0===a?{}:a)}},66964:function(e,t,r){"use strict";r.d(t,{m:()=>a});var n=r(131906),i=r(222588),o=r(404393),a=function(e){var t=e.workflowId,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["workflowId"]),a=(0,i.W)();return(0,n.useQuery)(["workflows",t],function(){return(0,o.Cp)(a.fetch({id:t,params:{v2_2_enabled:!0}}))},r)}},661676:function(e,t,r){"use strict";r.d(t,{RC:()=>m});var n=r(275271),i=r(122612),o=r.n(i),a=r(559933),s=r.n(a),l=r(131906),c=r(251630),u=r(584555);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var m=function(e){var t,r,i,a,m=(i=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(i,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(i,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(0,c.WX)(),y=e.query,v=void 0===y?"":y,g=e.workflowId,_=void 0===g?"":g,x=e.perPage,j=void 0===x?20:x,w=e.initialPage,O=void 0===w?1:w,S=e.shouldDisableRefetching,k=e.options,N=void 0===k?{refetchInterval:!(void 0!==S&&S)&&!p&&5e3,enabled:!!_}:k,P=["workflows",_,"runs",v,j],C=f({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},N),A=(0,l.useInfiniteQuery)(P,function(e){var t=e.pageParam,r=void 0===t?O:t,n=1;s()(r)&&r>0&&(n=r);var i={page:n,per_page:j};return v&&(i.query=v),h.fetchRuns({workflowId:_,params:i})},C),I=(0,n.useMemo)(function(){var e;return(null==(e=A.data)?void 0:e.pages)||[]},[null==(a=A.data)?void 0:a.pages]),T=(0,n.useMemo)(function(){return o()(I.map(function(e){return e.records}))},[I]);return(0,n.useEffect)(function(){A.isLoading||b(T.every(function(e){return(null==e?void 0:e.status)!==u.bI.IN_PROGRESS}))},[T,A.isLoading]),t=f({},A),r=r={queryKey:P,runs:T,areAllRunsCompleted:p},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}},428613:function(e,t,r){"use strict";r.d(t,{S:()=>o});var n=r(131906),i=r(251630),o=function(){var e=(0,i.WX)();return(0,n.useQuery)({queryKey:["totalWorkflows"],queryFn:function(){return e.list({params:{per_page:1}})}})}},778139:function(e,t,r){"use strict";r.d(t,{D:()=>c,x:()=>l});var n=r(227851),i=r(131906),o=r(222588),a=r(60878);function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.pm)(),r=(0,o.W)();return(0,i.useMutation)(function(e){var t=e.id,n=e.body;return r.update({id:t,body:n})},s({onError:function(e){console.error(e),t.error(e.message)}},e))},c=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.Gc)().watch,o=l(r),a=i("id");return e=s({},o),t=t={mutate:function(e){return o.mutate({id:a,body:e})},mutateAsync:function(e){return o.mutateAsync({id:a,body:e})}},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},541378:function(e,t,r){"use strict";r.d(t,{H:()=>s,p:()=>a});var n=r(227851),i=r(131906),o=r(251630),a=function(e,t,r){var n=r.id,i=r.action_type,o=r.api_params,a=r.position,s=void 0===a?1:a;return!n||n.startsWith("action")?e.createAction({workflowId:t,body:{action_type:i,api_params:o,position:s}}):e.updateAction({workflowId:t,id:n,body:{action_type:i,api_params:o,position:s}})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,(0,n.Gc)().watch)("id"),r=(0,o.WX)();return(0,i.useMutation)(function(e){return a(r,t,e)},e)}},917435:function(e,t,r){"use strict";r.d(t,{I:()=>d});var n=r(275271),i=r(131906),o=r(251630),a=r(60878),s=function(e){var t=e.setIsTestingWebhook,r=e.setIsWebhookTestSuccessful,n=e.setIsWebhookTested,s=e.setTestWebhookResult,l=e.setIsWebhookUrlChanged,c=e.options,u=(0,a.pm)(),d=(0,o.WX)();return(0,i.useMutation)(function(e){return d.testWebhook({body:e})},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({onSuccess:function(e){r(null==e?void 0:e.success),t(!1),n(!0),s(e),l(!1)},onError:function(e){console.error(e),u.error(e.message)}},void 0===c?{}:c))};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(e,t){var r,i=u((0,n.useState)(!1),2),o=i[0],a=i[1],l=u((0,n.useState)(!1),2),d=l[0],f=l[1],m=u((0,n.useState)(!1),2),p=m[0],b=m[1],h=u((0,n.useState)(!1),2),y=h[0],v=h[1],g=u((0,n.useState)(null),2),_=g[0],x=s({setIsTestingWebhook:a,setIsWebhookTestSuccessful:f,setIsWebhookTested:b,setTestWebhookResult:g[1],setIsWebhookUrlChanged:v}).mutate;return(0,n.useEffect)(function(){var t;v(p&&(null==e||null==(t=e.api_params)?void 0:t.url)!==(null==_?void 0:_.url))},[null==e||null==(r=e.api_params)?void 0:r.url]),{isTestingWebhook:o,isWebhookTestSuccessful:d,isWebhookTested:p,isWebhookUrlChanged:y,testWebhookResult:_,handleTestWebhook:function(e){var r;return(r=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,t()];case 1:if(!r.sent())return[2];return a(!0),x(e),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)})})()}}}},567504:function(e,t,r){"use strict";r.d(t,{K:()=>c});var n=r(903225),i=r(547144),o=r(251896),a=r(514156),s=r(565088),l=r(428613),c=function(){var e=(0,n.TH)().pathname,t=(0,a.K)(),r=(0,o.aH)(),c=r.data,u=r.isLoading,d=(0,s._)().category,f=(0,l.S)(),m=f.data,p=(void 0===m?{}:m).total_count,b=f.isLoading,h=u||b,y=e===i.Lo.workflows.all,v=!h&&y&&(0===p||!t&&!(null==c?void 0:c.enabled))&&!d;return{isLoading:h,shouldShowWorkflowsSplashScreen:v,shouldHideWorkflowsNestedNavigation:y&&v}}},315574:function(e,t,r){"use strict";r.d(t,{k:()=>eK});var n=r(552676),i=r(275271),o=r(756468),a=r(251896),s=(0,i.createContext)(null);s.displayName="EmailHubStatusContext";var l=function(){var e=(0,i.useContext)(s);return(0,o.Z)(e,"useEmailHubStatus must be used within an EmailHubStatusProvider"),e},c=function(e){var t=e.children,r=(0,a.aH)();return(0,n.jsx)(s.Provider,{value:r,children:t})},u=r(533617),d=r(789300),f=r.n(d),m=r(739792),p=r(584555),b=r(912369),h=r(701168),y=r(751169),v=r(411944),g=r(565088),_=r(369024),x=r(764981),j=r(711294),w=r(134062),O=r(943544),S=function(e){var t=e.onClick;return(0,n.jsx)(O.Lt.ItemWithLink,{onClick:t,children:(0,m.t)("settings.workflows.table.actions.archive")})},k=function(e){var t=e.onClick;return(0,n.jsx)(O.Lt.ItemWithLink,{hasDanger:!0,onClick:t,children:(0,m.t)("settings.workflows.table.actions.delete")})},N=function(e){var t=e.onClick;return(0,n.jsx)(O.Lt.ItemWithLink,{onClick:t,children:(0,m.t)(["settings.workflows.table.actions","duplicate"])})},P=r(5917),C=r(903225),A=r(547144),I=r(567930),T=function(e){var t=e.workflowId,r=e.isAutomation,i=e.isActive,o=e.isBulkOrScheduled,a=e.isInProgress,s=(0,I.PF)(),l=(0,P.C)({workflowId:t,disableRefetching:!0}).areAllRunsCompleted,c=(0,C.k6)();return(0,n.jsx)(O.Lt.ItemWithLink,{onClick:function(){var e="";if(r&&i&&(e="settings.workflows.edit.continue_edit_automation_confirmation_modal"),o&&(a||!l)&&(e="settings.workflows.edit.continue_edit_running_workflow_confirmation_modal"),!e)return void c.push({pathname:A.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}});s.show({title:(0,m.t)([e,"title"]),body:(0,m.t)([e,"body"]),onConfirm:function(){s.hide(),c.push({pathname:A.o0.edit({workflowId:t}),state:{from:{path:c.location.pathname,query:c.location.search}}})},onCancel:function(){s.hide()}})},children:(0,m.t)(["settings.workflows.table.actions","edit"])})},E=r(932699),L=r(131906),D=r(251630),M=r(39396),R=function(e){var t=e.workflowId,r=e.hideRerunModal,o=(0,i.useRef)(null),a=(0,D.WX)(),s=(0,L.useQuery)(["workflow-detail",t],function(){return a.fetch({id:t})},{onSuccess:function(){(0,E.defer)(function(){o.current&&o.current.dispatchEvent(new Event("submit",{cancelable:!0}))})}}),l=s.data,c=s.isLoading;return((0,i.useEffect)(function(){return function(){r()}},[r]),c)?null:(0,n.jsx)(M.H,{formRef:o,workflow:l,isRerun:!0})},B=function(e){var t=e.showRerunConfirmation;return(0,n.jsx)(O.Lt.ItemWithLink,{onClick:t,children:(0,m.t)("settings.workflows.table.actions.rerun")})},z=function(e){var t=e.workflowId,r=(0,C.k6)();return(0,n.jsx)(O.Lt.ItemWithLink,{onClick:function(){r.push({pathname:A.o0.view({workflowId:t}),state:{from:{path:r.location.pathname,query:r.location.search}}})},children:(0,m.t)(["settings.workflows.table.actions","view"])})},F=r(990069);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t,r=e.workflow,o=e.refetch,a=r.id,s=r.name,l=r.workflow_type,c=r.status,u=r.steps,d=(0,F.o)({workflowId:a,name:s,type:l,status:c,refetch:o}),f=d.onDuplicate,m=d.handleArchiveWithConfirmation,b=d.handleDeleteWithConfirmation,h=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return U(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1];if(c===p.qN.ARCHIVED)return(0,n.jsx)("div",{className:"min-w-[2rem]",children:(0,n.jsx)(w.w.Actions,{children:(0,n.jsx)(N,{onClick:f})})});var g=l===p.nQ.BULK_ACTION||l===p.nQ.SCHEDULED,_=l===p.nQ.BULK_ACTION,x=l===p.nQ.DYNAMIC,j=c===p.qN.ACTIVE,O=c===p.qN.DRAFT,P=c===p.bI.IN_PROGRESS,C=(void 0===u?[]:u).length>0;return(0,n.jsxs)("div",{className:"min-w-[2rem]",children:[(0,n.jsxs)(w.w.Actions,{children:[(0,n.jsx)(z,{workflowId:a}),_&&!P&&C&&!O&&(0,n.jsx)(B,{showRerunConfirmation:function(){v(!0)}}),(0,n.jsx)(T,{workflowId:a,isAutomation:x,isActive:j,isBulkOrScheduled:g,isInProgress:P}),!O&&(0,n.jsx)(S,{onClick:m}),(0,n.jsx)(N,{onClick:f}),O&&(0,n.jsx)(k,{onClick:b})]}),y&&(0,n.jsx)(R,{workflowId:a,hideRerunModal:function(){return v(!1)}})]})},G=r(904501),q=r(41051),V=r(985798),W=r(565439),H=r.n(W),Q=r(26758),K=r(809163),J=r(656317),$=function(e){var t=e.workflowType,r=e.status,n=(0,J.Xt)().queryParams,i=(0,g._)(),o=i.pageSize,a=void 0===o?K.L8:o,s=i.category,l=(0,Q.v)(1,!s),c=l.setPage,u=l.initialPage,d=String(H()(n,"query","")),f=(0,K.mA)({perPage:a,sort:K.zw.LATEST,workflowType:t,status:r,initialPage:u,query:d,options:{keepPreviousData:!1}}),m=H()(null==f?void 0:f.pages[0],"total_count",0),p=null==f?void 0:f.isLoading;return{infiniteQuery:f,totalWorkflows:m,isLoading:p,setPage:c,initialPage:u,defaultPageSize:a}},X="settings.workflows.table",Y=function(e){var t=e.columns,r=e.colgroup,o=$({workflowType:e.workflowType,status:e.status}),a=o.infiniteQuery,s=o.isLoading,l=o.totalWorkflows,c=o.initialPage,u=o.defaultPageSize,d=o.setPage,f=(0,C.k6)(),b=(0,i.useMemo)(function(){var e=a.isLoading,t=a.workflows,r=a.isError;return e||r?null:t.map(function(e){return e.created_by_community_member_id})},[a]);return(0,n.jsx)(x.I,{ids:null!=b?b:void 0,children:(0,n.jsxs)(V.J,{columns:t({refetch:a.refetch}),infiniteQuery:a,pageSize:u,initialPage:c,totalCountPath:"total_count",onChangePage:function(e){d(e)},onClickRow:function(e){var t=e.original||{},r=t.id,n=t.status;if(r){var i={pathname:n===p.qN.DRAFT?A.o0.edit({workflowId:r}):A.o0.view({workflowId:r}),state:{from:{path:f.location.pathname,query:f.location.search}}};f.push(i)}},children:[!s&&(0,n.jsx)(w.w.Headline,{children:(0,n.jsx)(w.w.Headline.Title,{children:(0,m.t)([X,"workflows_count"],{count:l})})}),(0,n.jsxs)(w.w.TableWrapper,{children:[(0,n.jsxs)(w.w.Table,{children:[r&&(0,n.jsx)(n.Fragment,{children:r}),(0,n.jsx)(w.w.Header,{className:"z-10"}),(0,n.jsx)(w.w.Loader,{}),(0,n.jsx)(w.w.NoRecords,{text:(0,m.t)([X,"no_workflows_found"])}),(0,n.jsx)(w.w.Body,{})]}),(0,n.jsx)(w.w.Pagination,{align:"left",direction:"reverse"})]})]})})},ee=r(391980),et="settings.workflows.table",er=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,m.t)([et,"name"]),thClassName:ee.y.title,cellClassName:ee.y.title,cell:function(e){return(0,n.jsx)(q.W,{children:e.getValue()||(0,m.t)([et,"untitled_workflow"])})}},{accessorKey:"workflow_type",header:(0,m.t)([et,"type.title"]),thClassName:ee.y.workflowType,cellClassName:ee.y.workflowType,cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:(0,m.t)([et,"type",e.getValue()||"unknown"])})}},{accessorKey:"steps",header:(0,m.t)([et,"steps"]),thClassName:ee.y.steps,cellClassName:(0,h.A)("!py-0",ee.y.steps),cell:function(e){return(0,n.jsx)(j.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,m.t)([et,"created_by"]),thClassName:ee.y.user,cellClassName:ee.y.user,cell:function(e){return(0,n.jsx)(x.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,m.t)([et,"created_on"]),thClassName:ee.y.dateShort,cellClassName:ee.y.dateShort,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"last_run_at",header:(0,m.t)([et,"last_run"]),thClassName:ee.y.dateLong,cellClassName:ee.y.dateLong,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(Z,{workflow:r.original,refetch:t})}}]},en=function(){var e,t=(0,g._)().category;return(0,n.jsx)(Y,{columns:(e=!!t,function(t){var r=er({refetch:t.refetch});if(!e)return r;var n=["name","workflow_type","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:p.nQ.ALL,status:p.qN.ARCHIVED})},ei=r(748880),eo=r(684870),ea=function(e){var t=e.workflow,r=t.id,i=t.status,o=t.steps,a=i===p.qN.ACTIVE,s=!!(null==o?void 0:o.length),l=i===p.qN.DRAFT,c=(0,ei.q)({workflowId:r,isActive:a}),u=c.isLoading,d=c.onChangeActiveStatus;return(0,n.jsx)(eo.N,{isActive:a,onToggle:d,steps:o,workflowId:r,isDisabled:!s||l,hasNoActions:!s,isDraft:l,isLoading:u})},es="settings.workflows.table",el=function(){var e,t=(0,g._)().category;return(0,n.jsx)(Y,{columns:(e=!!t,function(t){var r=t.refetch,i={name:{accessorKey:"name",header:(0,m.t)([es,"name"]),thClassName:ee.y.title,cellClassName:ee.y.title,cell:function(e){return(0,n.jsx)(q.W,{children:e.getValue()||(0,m.t)([es,"untitled_workflow"])})}},steps:{accessorKey:"steps",header:(0,m.t)([es,"steps"]),thClassName:ee.y.steps,cellClassName:(0,h.A)("!py-0",ee.y.steps),cell:function(e){return(0,n.jsx)(j.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},createdBy:{accessorKey:"created_by_community_member_id",header:(0,m.t)([es,"created_by"]),thClassName:ee.y.user,cellClassName:ee.y.user,cell:function(e){return(0,n.jsx)(x.Xg,{id:e.getValue(),isLastNameHidden:!0})}},createdAt:{accessorKey:"created_at",header:(0,m.t)([es,"created_on"]),thClassName:ee.y.dateShort,cellClassName:ee.y.dateShort,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!1})}},lastRunAt:{accessorKey:"last_run_at",header:(0,m.t)([es,"last_run"]),thClassName:ee.y.dateLong,cellClassName:ee.y.dateLong,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!0})}},tasksCount:{accessorKey:"tasks_count",header:(0,m.t)([es,"total_runs"]),thClassName:ee.y.number,thInnerClassName:"justify-end",cellClassName:(0,h.A)("text-right",ee.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},active:{header:(0,m.t)([es,"active"]),thClassName:ee.y.toggleInput,thInnerClassName:"justify-center",cellClassName:(0,h.A)("!py-4 cursor-default",ee.y.toggleInput),onClick:function(e){return e.event.stopPropagation()},cell:function(e){return(0,n.jsx)(ea,{workflow:e.row.original})}},actions:{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var t=e.row;return(0,n.jsx)(Z,{workflow:t.original,refetch:r})}}};return(e?["name","createdBy","tasksCount","active"]:["name","steps","createdBy","createdAt","lastRunAt","tasksCount","active","actions"]).map(function(e){return i[e]})}),workflowType:p.nQ.DYNAMIC,status:p.qN.ALL})},ec=function(e){var t=e.status;return(0,n.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,n.jsx)("span",{className:"break-normal capitalize",children:(0,m.t)(["settings.workflows.table.status",t],{defaultValue:t||""})})})},eu="settings.workflows.table",ed=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,m.t)([eu,"name"]),thClassName:ee.y.title,cellClassName:ee.y.title,cell:function(e){return(0,n.jsx)(q.W,{children:e.getValue()||(0,m.t)([eu,"untitled_workflow"])})}},{accessorKey:"status",header:(0,m.t)([eu,"status.title"]),thClassName:ee.y.status,cellClassName:ee.y.status,cell:function(e){return(0,n.jsx)(ec,{status:e.getValue()})}},{accessorKey:"steps",header:(0,m.t)([eu,"steps"]),thClassName:ee.y.steps,cellClassName:(0,h.A)("!py-0",ee.y.steps),cell:function(e){return(0,n.jsx)(j.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"created_by_community_member_id",header:(0,m.t)([eu,"created_by"]),thClassName:ee.y.user,cellClassName:ee.y.user,cell:function(e){return(0,n.jsx)(x.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,m.t)([eu,"created_on"]),thClassName:ee.y.dateShort,cellClassName:ee.y.dateShort,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"last_run_at",header:(0,m.t)([eu,"last_run"]),thClassName:ee.y.dateLong,cellClassName:ee.y.dateLong,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,m.t)([eu,"total_runs"]),thClassName:ee.y.number,thInnerClassName:"justify-end",cellClassName:(0,h.A)("text-right",ee.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(Z,{workflow:r.original,refetch:t})}}]},ef=function(){var e,t=(0,g._)().category;return(0,n.jsx)(Y,{columns:(e=!!t,function(t){var r=ed({refetch:t.refetch});if(!e)return r;var n=["name","status","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:p.nQ.BULK_ACTION,status:p.qN.ALL})},em=r(381636),ep=r(83769),eb=r(701790),eh=function(e){var t=e.category,r=e.onClose,i=e.shouldAutoAdjust;return(0,n.jsx)(eb.N,{category:t,children:(0,n.jsxs)("div",{className:"w-fit px-6",children:[(0,n.jsx)(em.Z.TitleSm,{weight:"bold",children:(0,m.t)("settings.workflows.workflows")}),(0,n.jsx)(ep.i,{shouldIncludeCreateButton:!0,onClose:r,shouldAutoAdjust:i})]})})},ey=r(285122),ev=r(957363),eg=r(665739),e_="settings.workflows.table.notices.email_hub_access_ending_soon",ex=function(e){var t=e.accessEndDate;return(0,n.jsx)("div",{className:"bg-primary px-6 pt-5",children:(0,n.jsx)(eg.W,{iconEl:(0,n.jsx)(ev.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(em.Z.LabelSm,{weight:"bold",children:(0,m.t)("".concat(e_,".title"))}),(0,n.jsx)(em.Z.LabelSm,{children:(0,m.t)("".concat(e_,".description"),{accessEndDate:(0,ey.ie)(null!=t?t:"")})})]})})})};function ej(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ew=function(e){var t,r=e.scheduleType,i="settings.workflows.schedule_types",o=(ej(t={},p.By.ONE_TIME,(0,m.t)("".concat(i,".one_time"))),ej(t,p.By.RECURRING,(0,m.t)("".concat(i,".recurring"))),t);return(0,n.jsx)("span",{className:"flex min-h-[1.5rem] items-center gap-2",children:(0,n.jsx)("span",{className:"break-normal",children:o[r]})})},eO=r(380171),eS=r(987132),ek=r(664586),eN=r(422114),eP=r(720129),eC=r(441342),eA=function(){var e,t=l(),r=t.data,n=t.isLoading,i=(0,eC.wh)().currentCommunity;if(!r||!("plan"in r)||n)return{isLoading:n,accessEndDate:null};var o=r.enabled,a=r.trialing,s=r.plan;return o?a?{isLoading:n,accessEndDate:null!=(e=null==i?void 0:i.trial_ends_at)?e:null}:s.cancel_at_period_end&&s.current_period_end?{isLoading:n,accessEndDate:s.current_period_end}:{isLoading:n,accessEndDate:null}:{isLoading:n,accessEndDate:null}},eI=function(){var e=eA(),t=e.isLoading,r=e.accessEndDate;return{isLoading:t,hasAccessToRunOnDate:function(e){return!r||new Date(r)>=new Date(e)},isMarketingHubAccessEndingSoon:function(){if(!r)return!1;var e=new Date,t=(0,eS.default)(r),n=(0,ek.default)(t,7);return(0,eN.default)(e,n)&&(0,eP.default)(e,t)},accessEndDate:r}},eT="settings.workflows.table",eE=function(e){var t=e.date,r=e.steps,i=eI(),o=i.hasAccessToRunOnDate;return i.isLoading?(0,n.jsx)(y.a,{}):r.some(function(e){return"send_email"===e})&&t&&!o(t)?(0,n.jsx)(eO.T,{content:(0,m.t)([eT,"requires_email_hub_tooltip"]),children:(0,m.t)([eT,"requires_email_hub"])}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.u,{date:t,shouldIncludeTime:!0}),t&&(0,n.jsx)(ev.JO,{type:"16-clock",className:"ml-2 pt-1"})]})},eL="settings.workflows.table",eD=function(e){var t=e.refetch;return[{accessorKey:"name",header:(0,m.t)([eL,"name"]),thClassName:ee.y.title,cellClassName:ee.y.title,cell:function(e){return(0,n.jsx)(q.W,{children:e.getValue()||(0,m.t)([eL,"untitled_workflow"])})}},{accessorKey:"steps",header:(0,m.t)([eL,"steps"]),thClassName:ee.y.steps,cellClassName:(0,h.A)("!py-0",ee.y.steps),cell:function(e){return(0,n.jsx)(j.W,{actions:e.getValue(),size:"md",truncationLimit:3,className:"flex-wrap py-4"})}},{accessorKey:"schedule_type",header:(0,m.t)([eL,"schedule_type"]),thClassName:ee.y.scheduleType,cellClassName:ee.y.scheduleType,cell:function(e){return(0,n.jsx)(ew,{scheduleType:e.getValue()})}},{accessorKey:"created_by_community_member_id",header:(0,m.t)([eL,"created_by"]),thClassName:ee.y.user,cellClassName:ee.y.user,cell:function(e){return(0,n.jsx)(x.Xg,{id:e.getValue(),isLastNameHidden:!0})}},{accessorKey:"created_at",header:(0,m.t)([eL,"created_on"]),thClassName:ee.y.dateShort,cellClassName:ee.y.dateShort,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!1})}},{accessorKey:"next_run_at",header:(0,m.t)([eL,"next_run"]),thClassName:ee.y.dateLong,cellClassName:ee.y.dateLong,cell:function(e){return(0,n.jsx)(eE,{date:e.getValue(),steps:e.row.original.steps})}},{accessorKey:"last_run_at",header:(0,m.t)([eL,"last_run"]),thClassName:ee.y.dateLong,cellClassName:ee.y.dateLong,cell:function(e){return(0,n.jsx)(G.u,{date:e.getValue(),shouldIncludeTime:!0})}},{accessorKey:"tasks_count",header:(0,m.t)([eL,"total_runs"]),thClassName:ee.y.number,thInnerClassName:"justify-end",cellClassName:(0,h.A)("text-right",ee.y.number),cell:function(e){return(0,n.jsx)("span",{className:"break-normal",children:e.getValue()||0})}},{accessorKey:"actions",header:"",cellClassName:"cursor-default",onClick:function(e){return e.event.stopPropagation()},cell:function(e){var r=e.row;return(0,n.jsx)(Z,{workflow:r.original,refetch:t})}}]},eM=function(){var e,t=(0,g._)().category;return(0,n.jsx)(Y,{columns:(e=!!t,function(t){var r=eD({refetch:t.refetch});if(!e)return r;var n=["name","schedule_type","created_by_community_member_id"];return r.filter(function(e){return n.includes(e.accessorKey)})}),workflowType:p.nQ.SCHEDULED,status:p.qN.ALL})},eR=r(72040),eB=r(663676),ez=r(900795),eF=function(){var e=(0,eR.y)(),t=e.shouldShowEmailNotices,r=e.isSendingMarketingEmailsAllowed,i=e.marketingHubData;if(!t||!i||r)return null;var o=i.trialing?"settings.workflows.table.notices.trialing_limit_exhausted":"settings.workflows.table.notices.email_hub_limit_exceeded";return(0,n.jsx)("div",{className:"bg-primary px-6 pt-6",children:(0,n.jsx)(eg.W,{iconEl:(0,n.jsx)(ev.JO,{type:"20-info",size:20,className:"mt-0.5 !self-start"}),children:(0,n.jsx)(ez.w,{sanitizeProps:{ADD_ATTR:["target"]},content:(0,m.t)("".concat(o),{limit:(0,eB.HA)(i.limits.marketing_email_limit)})})})})},eU=r(396354),eZ=r(514156),eG=r(428613);function eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eq(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eH=function(){var e,t=(0,eZ.K)(),r=(0,eU.t)(),n=(0,C.k6)(),o=eW((0,i.useState)(),2),a=o[0],s=o[1],l=eW((0,i.useState)(0),2),c=l[0],u=l[1],d=(0,eG.S)(),f=d.data,b=void 0===f?{meta:{}}:f,h=b.total_count,y=b.meta,v=void 0===y?{}:y,g=v.counts_by_workflow_type,_=void 0===g?{}:g,x=_.dynamic,j=_.bulk_action,w=_.scheduled,O=_.archived,S=v.has_active_marketing_hub_workflows,k=d.isLoading,N=(eV(e={},p.I3.DYNAMIC,x),eV(e,p.I3.BULK_ACTION,j),eV(e,p.I3.SCHEDULED,w),eV(e,p.I3.ARCHIVED,O),e),P=(0,i.useMemo)(function(){var e;return eV(e={},p.I3.DYNAMIC,(0,m.t)("settings.workflows.table.type.automations")),eV(e,p.I3.BULK_ACTION,(0,m.t)("settings.workflows.table.type.bulk_actions")),eV(e,p.I3.SCHEDULED,(0,m.t)("settings.workflows.table.type.scheduled")),eV(e,p.I3.ARCHIVED,(0,m.t)("settings.workflows.table.type.archived")),e},[]),I=r.status,T=r.workflow_type;return(0,i.useEffect)(function(){if(!k){var e=O>0,t=I===p.qN.ARCHIVED&&e?p.I3.ARCHIVED:T||p.I3.DYNAMIC,r=p.$m.findIndex(function(e){return e===t});s(e),u(r)}},[k,a,I,T,O,P]),{isWorkflowExecutionEnabled:t,hasArchivedWorkflows:a,isLoading:k,totalWorkflows:h,hasActiveMarketingHubWorkflows:S,tabsCountersMap:N,selectedTabIndex:c,handleTabChange:function(e){u(e);var t=e===p.$m.length-1,r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eV(e,t,r[t])})}return e}({},t&&eV({},"status",p.qN.ARCHIVED),!t&&eV({},"workflow_type",p.$m[e]));n.push({search:(0,A.WB)(r)})},tabNames:p.$m,tabLabels:P}},eQ=function(){var e=eH(),t=e.isLoading,r=e.totalWorkflows,i=e.hasArchivedWorkflows,o=e.isWorkflowExecutionEnabled,s=e.tabsCountersMap,l=e.selectedTabIndex,c=e.handleTabChange,u=e.tabNames,d=e.tabLabels,x=e.hasActiveMarketingHubWorkflows,j=(0,g._)(),w=j.category,O=j.onClose,S=j.shouldAutoAdjust;(0,b.ko)();var k=eI(),N=k.isLoading,P=k.isMarketingHubAccessEndingSoon,C=k.accessEndDate,A=(0,a.aH)(),I=A.isLoading,T=A.data;return t||N||I||f()(l)?(0,n.jsx)(y.a,{}):t||0!==r&&(o||(null==T?void 0:T.enabled))||!w?(0,n.jsx)("div",{className:"bg-primary h-full",children:(0,n.jsxs)(v.O.Group,{selectedIndex:l,onChange:c,className:"!h-auto overflow-visible",children:[(0,n.jsxs)(_.h,{showBottomBorder:!1,title:(0,m.t)("settings.workflows.workflows"),children:[(0,n.jsx)(v.O.ListWrapper,{children:(0,n.jsx)(v.O.List,{children:u.map(function(e){return(0,n.jsxs)(v.O,{className:(0,h.A)({hidden:e===p.I3.ARCHIVED&&!i}),children:[d[e],(0,n.jsx)(v.O.Counter,{children:s[e]})]},e)})})}),x&&P()&&(0,n.jsx)(ex,{accessEndDate:C})]}),(0,n.jsx)(eF,{}),(0,n.jsxs)(v.O.Panels,{children:[(0,n.jsx)(v.O.Panel,{children:(0,n.jsx)(el,{})}),(0,n.jsx)(v.O.Panel,{children:(0,n.jsx)(ef,{})}),(0,n.jsx)(v.O.Panel,{children:(0,n.jsx)(eM,{})}),i&&(0,n.jsx)(v.O.Panel,{children:(0,n.jsx)(en,{})})]})]})}):(0,n.jsx)(eh,{category:w,onClose:O,shouldAutoAdjust:S})},eK=function(e){var t,r;return(0,n.jsx)(g.C,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:(0,n.jsx)(c,{children:(0,n.jsx)(u.W,{children:(0,n.jsx)(eQ,{})})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},151775:function(e,t,r){"use strict";r.d(t,{L:()=>s,W:()=>l});var n=r(131906),i=r(93199),o=r(547144);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=["site","pages"],l=function(e){var t=e.id,r=e.enabled;return(0,n.useQuery)({queryKey:((function(e){if(Array.isArray(e))return a(e)})(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]),queryFn:function(){var e;return t?(e=t,(0,i.UT)(o.av.site.pages.show(e))):null},enabled:(void 0===r||r)&&!!t})}},739804:function(e,t,r){"use strict";r.d(t,{x:()=>v});var n=r(552676),i=r(392042),o=r.n(i),a=r(131906),s=r(739792),l=r(251630),c=r(38086),u=r(441342),d=r(340404),f=r(304403),m=r(495727),p=r(574398),b=r(60878),h=r(381636);function y(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var v=function(e){var t=e.show,r=e.spaceGroupId,i=e.onClose,v=e.onSuccess,g=(0,b.pm)(),_=g.error,x=g.success,j=(0,d.C)().goToCommunityRootPath,w=(0,u.nT)(),O=w.records,S=w.actions.refresh,k=(0,u.e2)().actions.refresh,N=(0,a.useMutation)(function(){return l.iD.destroy(r)},{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return x((0,s.t)("space_groups.form.delete.success")),[4,Promise.all([S(),k()])];case 1:return e.sent(),j(),o()(i)&&i(),o()(v)&&v(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){y(o,n,i,a,s,"next",e)}function s(e){y(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){_((0,s.t)("space_groups.form.delete.failed"))}}),P=N.mutate,C=N.isLoading,A=O.filter(function(e){return e.space_group_id===r}),I=A.length,T=[(0,s.t)("space_groups.delete.description")];I>0&&T.push((0,s.t)("space_groups.delete.this_includes"));var E=T.join(" ");return(0,n.jsx)(m.V,{title:(0,s.t)("space_groups.delete.title"),confirmUserPrompt:(0,s.t)("space_groups.delete.confirm_prompt"),isOpen:t,onClose:i,onCancel:i,onConfirm:P,confirmVariant:"danger",isDisabled:C,confirmText:C?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-5",children:[(0,n.jsx)(h.Z.BodyMd,{children:E}),I>0&&(0,n.jsx)(p.g,{title:(0,s.t)("space_groups.delete.spaces_count",{count:A.length}),defaultExpanded:A.length<=5,children:(0,n.jsx)(p.g.BulletedList,{items:A.map(function(e){return e.name})})}),(0,n.jsx)(c.K,{contentSpecType:f.ry.SpaceGroup,contentSpecId:r})]})})}},318826:function(e,t,r){"use strict";r.d(t,{a:()=>p});var n=r(552676),i=r(739792),o=r(256338),a=r(441342),s=r(380171),l=r(524330),c=r(767900),u=r(381636);function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var m={translationRoot:"space_groups.form.create",hiddenField:!0,hideDescription:!0,className:"flex flex-row-reverse justify-end m-0",labelClassName:"ml-4 mb-0",labelWrapperClassName:"flex items-center",shouldToggleValueOnLabelClick:!0},p=function(){var e=(0,a.wh)().currentCommunitySettings;return(0,n.jsxs)("div",{className:"mt-8 space-y-5",children:[(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,i.t)("space_groups.form.create.permissions")}),(0,n.jsx)(c.l.Item,f(d({},m),{name:"hide_members_count",tooltipText:(0,i.t)("space_groups.form.create.hide_members_count_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},m),{name:"is_hidden_from_non_members",tooltipText:(0,i.t)("space_groups.form.create.is_hidden_from_non_members_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},m),{name:"hide_non_member_spaces_from_sidebar",tooltipText:(0,i.t)("space_groups.form.create.hide_non_member_spaces_from_sidebar_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},m),{name:"allow_members_to_create_spaces",tooltipText:(0,i.t)("space_groups.form.create.allow_members_to_create_spaces_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,o.Wk)(e)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex gap-1 pt-4",children:[(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,i.t)("settings.access_groups.admin.legacy_access.title")}),(0,n.jsx)("div",{children:(0,n.jsx)(s.T,{role:"tooltip",content:(0,i.t)("settings.access_groups.admin.legacy_access.legacy_tooltip"),interactive:!1,children:(0,n.jsx)(l.g,{square:!0,label:(0,i.t)("settings.access_groups.admin.legacy_access.legacy_badge")})})})]}),(0,n.jsx)(c.l.Item,f(d({},m),{name:"automatically_add_members_to_new_spaces",tooltipText:(0,i.t)("space_groups.form.create.automatically_add_members_to_new_spaces_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})})),(0,n.jsx)(c.l.Item,f(d({},m),{name:"add_members_to_space_group_on_space_join",tooltipText:(0,i.t)("space_groups.form.create.add_members_to_space_group_on_space_join_tooltip"),children:(0,n.jsx)(c.l.ToggleSwitch,{variant:"small"})}))]})]})}},325885:function(e,t,r){"use strict";r.d(t,{K:()=>p});var n=r(552676),i=r(275271),o=r(227851),a=r(766560),s=r.n(a),l=r(739792),c=r(767900);function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var f={replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0},m={translationRoot:"space_groups.form.create",hideBorder:!0,hideDescription:!0,fullWidth:!1},p=function(){var e=(0,o.Gc)(),t=e.watch,r=e.setValue,a=e.formState,p=t("name"),b=!!a.dirtyFields.name,h=!!a.dirtyFields.slug;return(0,i.useEffect)(function(){p&&!h&&b&&r("slug",s()(p,f))},[r,p,h,b]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(c.l.Item,d(u({},m),{isFirstChild:!0,name:"name",rules:{required:(0,l.t)("space_groups.form.create.name_is_required"),maxLength:255},variant:"extra-bottom-margin",children:(0,n.jsx)(c.l.Input,{})}))}),(0,n.jsx)(c.l.Item,d(u({},m),{name:"slug",rules:{maxLength:255},variant:"extra-bottom-margin",transformValue:function(e){return s()(e,f)},tooltipText:(0,l.t)("space_groups.form.create.slug_tooltip",{host:window.location.origin}),children:(0,n.jsx)(c.l.Input,{})}))]})}},88454:function(e,t,r){"use strict";r.r(t),r.d(t,{SpaceGroups:()=>eu,default:()=>ed,spacesWithDetailsQueryKey:()=>ec});var n=r(552676),i=r(131906),o=r(903225),a=r(548150),s=r(739792),l=r(359043),c=r(380171),u=r(39905),d=r(751169),f=r(210689),m=r(922976),p=r(943544),b=r(739804),h=r(51732),y=r(755929),v=r(486372),g=r(523628),_=r(442959);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t,r=e.spaceGroup,n=(0,_.wh)({spaceGroup:r}),i=(t=(0,h.Z)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return{canManage:n,shouldShowDeleteModal:o,spaceModal:(0,v.G)(),editSpaceGroupModal:(0,g.a)(),addSpaceGroupMemberModal:(0,y.L)(),toggleDeleteModal:a}},w=function(e){var t=e.spaceGroup,r=j({spaceGroup:t}),i=r.canManage,o=r.shouldShowDeleteModal,a=r.spaceModal,l=r.editSpaceGroupModal,c=r.addSpaceGroupMemberModal,u=r.toggleDeleteModal;return i&&t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.x,{spaceGroupId:t.id,show:o,onClose:u}),(0,n.jsxs)(m.S,{label:(0,s.t)("space_group_settings"),children:[(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return l.show({spaceGroup:t})},children:(0,s.t)("space_groups.edit_space_group")}),(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return a.show({spaceGroupId:t.id})},children:(0,s.t)("add_space")}),(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return c.show({spaceGroupId:t.id})},children:(0,s.t)("space_groups.add_members")}),(0,n.jsx)(p.Lt.Separator,{}),(0,n.jsx)(p.Lt.ItemWithLink,{hasDanger:!0,onClick:u,children:(0,s.t)("space_groups.delete_space_group")})]})]}):null},O=function(e){var t=e.spaceGroup;return{spaceModal:(0,v.G)(),canManage:(0,_.wh)({spaceGroup:t})}},S=function(e){var t=e.spaceGroup,r=(0,o.k6)(),i={space_groups:t.slug},a=(0,l.g)(i),m=a.members,p=a.isLoading,b=a.canSeeMembersDirectory,h=O({spaceGroup:t}),y=h.spaceModal,v=h.canManage,g=null==t?void 0:t.hide_members_count;return(0,n.jsxs)("div",{className:"hidden items-center gap-5 lg:flex",children:[!g&&(0,n.jsx)(n.Fragment,{children:p?(0,n.jsx)(d.a,{}):(0,n.jsx)(c.T,{content:(0,s.t)("see_all_members"),disabled:!b,children:(0,n.jsx)("button",{type:"button",disabled:!b,onClick:function(){b&&r.push("/members?filter[space_groups]=".concat(t.slug))},children:(0,n.jsx)(f.n,{members:m||[],amountToShow:3,totalCount:t.active_members_count})})})}),v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.z,{type:"button",large:!0,onClick:function(){return y.show({spaceGroupId:t.id})},children:(0,s.t)("add_space")}),(0,n.jsx)(w,{spaceGroup:t})]})]})},k=r(275271),N=r(441342),P=function(){var e=(0,o.TH)(),t=(0,o.k6)(),r=(0,o.UO)().spaceGroupSlug,n=(0,N.e2)().helpers,i=n.findBy,a=n.isDataLoaded,s=(0,g.a)(),l=null!==/^\/s\/[^/]+\/edit$/.exec(e.pathname),c=(0,k.useRef)(!1),u=(0,k.useRef)(!1);(0,k.useEffect)(function(){if(!l){c.current=!1;return}if(l&&a()&&r&&!c.current){c.current=!0;var e=i({slug:r});e&&s.show({spaceGroup:e})}},[e.pathname,l,a,r,i,s]),(0,k.useEffect)(function(){u.current&&!s.visible&&l&&r&&(c.current=!1,t.replace("/s/".concat(r))),u.current=s.visible},[s.visible,l,r,t])},C=r(93199),A=r(547144),I=r(778152),T=r(864529),E=r(720624),L=r(972171),D=r(957363),M=function(e){var t=e.spaceGroup,r=e.hasDropdown,i=j({spaceGroup:t}),o=i.canManage,a=i.shouldShowDeleteModal,l=i.spaceModal,c=i.editSpaceGroupModal,u=i.addSpaceGroupMemberModal,d=i.toggleDeleteModal;return o&&(void 0===r||r)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.x,{spaceGroupId:t.id,show:a,onClose:d}),(0,n.jsxs)(p.Lt,{direction:"bottom-start",button:(0,n.jsxs)(p.Lt.MenuButton,{children:[(0,n.jsx)(L.y,{truncate:!0,children:t.name}),(0,n.jsx)(D.JO,{size:16,type:"caret-down-bold",className:"text-dark transition-all duration-100 group-hover:mt-1"})]}),children:[(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return c.show({spaceGroup:t})},children:(0,s.t)("space_groups.edit_space_group")}),(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return l.show({spaceGroupId:t.id})},children:(0,s.t)("add_space")}),(0,n.jsx)(p.Lt.ItemWithLink,{onClick:function(){return u.show({spaceGroupId:t.id})},children:(0,s.t)("space_groups.add_members")}),(0,n.jsx)(p.Lt.Separator,{}),(0,n.jsx)(p.Lt.ItemWithLink,{hasDanger:!0,onClick:d,children:(0,s.t)("space_groups.delete_space_group")})]})]}):(0,n.jsx)(L.y,{truncate:!0,children:t.name})},R=r(99594),B=r.n(R),z=r(261193),F=r(78456),U=r(60589),Z=r(396354),G=r(900555),q=r(932699),V=r(918594),W=r(22319),H=r(151433),Q=r(117679),K=r(663676),J=r(280219),$=r(619803),X=r.n($),Y=r(534085),ee=function(e){var t,r=e.isSpaceMember,i=e.spaceAccessViaPaywall,o=e.shouldShowDeletePopup,a=e.toggleDeletePopup,l=e.space,c=e.joinSpace,d=e.isViewOnlyMasquerading,f=e.isPrivate,m=e.isAdmin;return r&&(null==(t=l.policies)?void 0:t.can_leave_space)?(0,n.jsxs)("div",{className:"space-card__actions",children:[(0,n.jsx)(Y.k,{show:o,onClose:a,space:l}),(0,n.jsx)(u.z,{type:"button",variant:"secondary",onClick:d?q.noop:a,children:(0,s.t)("leave_this_space")})]}):(i||f)&&!m?null:(0,n.jsx)("div",{className:"space-card__actions",children:(0,n.jsx)(u.z,{variant:"primary",onClick:d?q.noop:c,className:X()({"cursor-not-allowed":d}),children:(0,s.t)("join_space")})})},et=function(e){var t=e.isPrivate,r=e.lockedButtonLabel,i=e.lockedButtonURL,o=e.joinSpace,a=t&&r&&i;return t?a?(0,n.jsx)(u.z,{type:"button",variant:"secondary",onClick:function(){window.location.assign(i)},children:r}):null:(0,n.jsx)(u.z,{type:"button",variant:"primary",onClick:o,children:(0,s.t)("join_space")})};function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var en=function(e){var t,r=e.currentUser,i=e.isSpaceMember,o=e.isPrivate,a=e.isAdmin,s=e.lockedButtonLabel,l=e.lockedButtonURL,c=e.joinSpace,u=e.spaceAccessViaPaywall,d=e.space,f=e.isViewOnlyMasquerading,m=(t=(0,h.Z)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return er(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1];return r?(0,n.jsx)(ee,{space:d,isSpaceMember:i,spaceAccessViaPaywall:u,shouldShowDeletePopup:p,toggleDeletePopup:b,joinSpace:c,isViewOnlyMasquerading:f,isPrivate:o,isAdmin:a}):(0,n.jsx)(et,{isPrivate:o,lockedButtonLabel:s,lockedButtonURL:l,joinSpace:c})};function ei(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var eo=function(e){var t=e.space,r=(0,i.useQueryClient)(),o=(0,W.TC)().currentAppearance,a=(0,N.wh)(),l=a.currentCommunityMember,c=a.currentUser,u=a.isViewOnlyMasquerading,f=(0,N.e2)().actions.refresh,m=(0,N.nT)().actions.refresh,p=(0,F.vb)(l),b=(0,Q.I)({spaceId:null==t?void 0:t.id,enabled:!(null==t?void 0:t.hide_members_count)}),h=b.count,y=b.isLoading,v=b.refetch;if(!t||(0,q.isEmpty)(t))return null;var g=t.id,_=t.emoji,x=t.custom_emoji_url,j=t.custom_emoji_dark_url,w=t.name,O=t.hide_members_count,S=t.slug,k=t.is_space_member,P=t.is_private,I=t.locked_button_url,T=t.locked_button_label,E=t.show_lock_icon_for_non_members,L=function(){f(),m(),v(),r.invalidateQueries(ec(t.space_group_id))},M=(0,H.$)({shouldShowLockIconForNonMembers:E&&!k,isPrivate:P,isAdmin:p}),R=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:if(!l)return window.location.assign((0,A.j)()),[2];return[4,(0,C.t5)(A.av.spaceMembers.joinSpace({spaceId:g}),{method:"POST"})];case 1:return e.sent(),L(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ei(o,n,i,a,s,"next",e)}function s(e){ei(o,n,i,a,s,"throw",e)}a(void 0)})})()};return(0,n.jsx)("div",{className:"space-card !rounded-2xl",children:(0,n.jsxs)("div",{className:"space-card__inside flex h-full flex-col justify-between",children:[(0,n.jsxs)(V.rU,{to:A.RZ.show({spaceSlug:S}),className:"space-card__name",children:[(0,n.jsx)("div",{className:"space-card__icon",children:(0,n.jsx)(J.S,{className:"title-emoji mx-auto !h-10 !max-h-10 !w-10",emoji:_,appearance:o,customEmojiUrl:x,customEmojiDarkUrl:j,shouldUseLockIcon:M,lockIcon:(0,n.jsx)(D.JO,{type:"lock"})})}),(0,n.jsx)("div",{className:"space-card__title truncate",children:(0,n.jsx)("span",{className:"title-name",children:w})})]}),!O&&(y?(0,n.jsx)(d.a,{}):(0,n.jsxs)("div",{className:"space-card__members",children:[(0,K.HA)(h)," ",1===h?(0,s.t)("member"):(0,s.t)("members")]})),(0,n.jsx)(en,{currentUser:c,isSpaceMember:!!k,isPrivate:!!P,isAdmin:p,lockedButtonLabel:null!=T?T:"",lockedButtonURL:null!=I?I:"",joinSpace:function(){R()},spaceAccessViaPaywall:(0,U.D)(t),space:t,isViewOnlyMasquerading:u})]})})},ea=function(e){var t=e.spaceGroup,r=(0,v.G)(),i=(0,N.wh)(),o=i.isLoading,a=i.currentCommunityMember,l=(0,z.D)(),c=(0,Z.t)(),u=c.sort,f=c.search,m=t.spaces||[],p=(0,F.vb)(a);return(f&&"string"==typeof f&&(m=B().go(f,m,{keys:["name"]}).map(function(e){return e.obj})),u&&"string"==typeof u&&(m=(0,U.E2)({spaces:m,sort:u})),o||l)?(0,n.jsx)(d.a,{}):0===m.length?p?(0,n.jsx)(G.u,{header:(0,s.t)("space_groups.empty_group.title"),description:(0,s.t)("space_groups.empty_group.description"),primaryLabel:(0,s.t)("space_groups.empty_group.cta"),onPrimaryClick:function(){return r.show({spaceGroupId:t.id})}}):(0,n.jsx)(G.u,{header:(0,s.t)("space_groups.empty_group.title"),description:(0,s.t)("space_groups.empty_group.description")}):(0,n.jsx)("div",{className:"react-page-space-show",children:(0,n.jsx)("div",{className:"space-group__spaces",children:m.map(function(e){return(0,n.jsx)(eo,{space:e},e.id)})})})},es=function(e){var t=e.spaceGroup,r=(0,y.L)();return(0,k.useEffect)(function(){r.show({spaceGroupId:(null==t?void 0:t.id)||0})},[]),(0,n.jsx)(ea,{spaceGroup:t})},el=function(e){var t=e.spaceGroup;return(0,n.jsxs)(o.rs,{children:[(0,n.jsx)(o.AW,{path:"/s/:spaceSlug/invite",render:function(){return(0,n.jsx)(es,{spaceGroup:t})}}),(0,n.jsx)(o.AW,{exact:!0,path:"/s/:spaceGroupSlug",component:function(){return(0,n.jsx)(ea,{spaceGroup:t})}})]})},ec=function(e){return["spaces-with-details",e]},eu=function(){var e=(0,o.UO)().spaceGroupSlug;P();var t=(0,N.e2)().helpers,r=t.isDataLoading,s=t.isDataRefreshing,l=t.findBy,c=(0,N.nT)(),u=c.records,d=c.helpers.isDataLoading,f=l({slug:e}),m=null==f?void 0:f.id,p=(0,N.p7)(m).data,b=(0,i.useQuery)({queryKey:ec(null==f?void 0:f.id),queryFn:function(){return(0,C.UT)(A.av.spaces.index({params:{space_group_id:null==f?void 0:f.id,include_details:!0}}))},enabled:!!(null==f?void 0:f.id)}),h=b.data,y=b.isLoading,v=(null==h?void 0:h.records)||[];if(s()||r()||d()||y)return(0,n.jsx)(E.m,{});var g=(0,_.iQ)({spaceGroup:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},f,p),spaces:u,spacesWithDetails:v});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.S,{title:g.name,bodyClassNames:"view-space view-space-group view-space-group--".concat(g.id)}),(0,n.jsx)(T.F.Breadcrumb,{}),(0,n.jsx)(a.Z,{leftContent:(0,n.jsx)(M,{spaceGroup:g,hasDropdown:!1}),rightContent:(0,n.jsx)(S,{spaceGroup:g})}),(0,n.jsx)(T.F.Content,{children:(0,n.jsx)(el,{spaceGroup:g})})]})};let ed=eu},825606:function(e,t,r){"use strict";r.d(t,{X:()=>u});var n=r(552676),i=r(779774),o=r(739792),a=r(85388),s=r(405521),l=r(767900);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=function(e){var t=e.space,r=e.isEdit,u=e.bookmark,d=e.renderFooter,f=e.isFolder,m=void 0!==f&&f,p=e.folderId,b=e.onAfterCreateOrUpdate,h=(0,s.k)(),y=i.Ry().shape(c({name:i.Z_().required(o.ZP.t("spaces.bookmarks.form.errors.name_required"))},!m&&{url:i.Z_().url(o.ZP.t("spaces.bookmarks.form.errors.url_format")).required(o.ZP.t("spaces.bookmarks.form.errors.url_required"))})),v=(0,a.S)({space:t,bookmark:u,onAfterCreateOrUpdate:b}),g=v.createBookmark,_=v.isCreatingBookmark,x=v.updateBookmark,j=v.isUpdatingBookmark;return(0,n.jsxs)(l.l,{id:"bookmark-form",onSubmit:function(e){return r?x(e):g(e)},validationSchema:y,autoComplete:"off",defaultValues:r?c({},u):c({display_type:m?"folder":"link",space_id:t.id,name:""},!m&&{url:"",emoji:"",folder_id:p},!m&&p&&{folder_id:p}),children:[(0,n.jsx)(l.l.Item,{name:"name",variant:"extra-bottom-margin",label:(0,o.t)("spaces.bookmarks.form.name"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(l.l.Input,{ref:h,prefix:!m&&(0,n.jsx)(l.l.EmojiPickerV3Wrapper,{record:u})})}),!m&&(0,n.jsx)(l.l.Item,{variant:"extra-bottom-margin",name:"url",label:(0,o.t)("spaces.bookmarks.form.url"),hideDescription:!0,hideBorder:!0,children:(0,n.jsx)(l.l.Input,{})}),null==d?void 0:d({isSubmitting:_||j})]})}},85388:function(e,t,r){"use strict";r.d(t,{S:()=>l});var n=r(131906),i=r(714866),o=r(93199),a=r(547144);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l=function(e){var t=e.space,r=e.bookmark,l=e.onAfterCreateOrUpdate,c=(0,i.z)(),u=(0,n.useQuery)({queryKey:[a.av.spaces.bookmarks.index({spaceId:null==t?void 0:t.id,params:{per_page:40}})],enabled:!!(null==t?void 0:t.id),refetchOnWindowFocus:!1}),d=u.data,f=u.isLoading,m=u.refetch,p=(null==d?void 0:d.records)||[],b=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return null==l||l(),[4,m()];case 1:return e.sent(),[4,c.hide()];case 2:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},h=(0,n.useMutation)(function(e){return(0,o.Cu)(a.av.spaces.bookmarks.create({spaceId:null==t?void 0:t.id}),{bookmark:e})},{onSuccess:b}),y=h.mutate,v=h.isLoading,g=(0,n.useMutation)(function(e){return(0,o.aU)(a.av.spaces.bookmarks.update({spaceId:null==t?void 0:t.id,id:null==r?void 0:r.id}),{bookmark:e})},{onSuccess:b}),_=g.mutate,x=g.isLoading,j=(0,n.useMutation)(function(e){var r=e.bookmarks_order;return(0,o.aU)(a.av.spaces.update({id:null==t?void 0:t.id}),{space:{bookmarks_order:r}})}).mutate,w=(0,n.useMutation)(function(){return(0,o.pC)(a.av.spaces.bookmarks.destroy({spaceId:null==t?void 0:t.id,id:null==r?void 0:r.id}))},{onSuccess:m}),O=w.mutate,S=w.isLoading,k=!!(null==p?void 0:p.length);return{records:p,isLoading:f,createBookmark:y,isCreatingBookmark:v,updateBookmark:_,isUpdatingBookmark:x,updateBookmarksOrder:j,deleteBookmark:O,isDeleting:S,shouldShowBookmarks:!!(t&&k)}}},175850:function(e,t,r){"use strict";r.d(t,{$:()=>o});var n=r(552676),i=r(739792),o=function(){return(0,n.jsx)("div",{className:"text-dark px-8 font-medium",children:(0,i.t)("chat_space.error_message")})}},737774:function(e,t,r){"use strict";r.d(t,{T:()=>k});var n=r(552676),i=r(275271),o=r(739792),a=r(441342),s=r(957363),l=r(39905),c=r(751169),u=r(381636),d=r(656450),f=r(285544),m=r(963549),p=r(44820),b=r(434519),h=r(60878),y=r(170973),v=r(767900),g="edit-course-type-form",_=function(e){var t=e.defaultValues,r=e.onSubmit;return(0,n.jsx)(v.l,{id:g,onSubmit:r,defaultValues:t,validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,n.jsx)(y.q,{hideLabel:!0})})};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var t,r=e.space,s=e.isOpen,c=e.onClose,u=(null==(t=r.course_setting)?void 0:t.course_type)||d.t,y={course_setting:{course_type:u}},v=w((0,i.useState)(!1),2),x=v[0],O=v[1],S=w((0,i.useState)(!1),2),k=S[0],N=S[1],P=w((0,i.useState)(!0),2),C=P[0],A=P[1],I=w((0,i.useState)(y),2),T=I[0],E=I[1],L=(0,h.pm)(),D=L.error,M=L.success,R=function(){c(),setTimeout(function(){O(!1),A(!0),N(!1)},100)},B=(0,a.T4)({spaceId:r.id}).refetch,z=(0,f.$)({space:r,options:{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,B()];case 1:return e.sent(),M((0,o.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),R(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){D((0,o.t)("spaces.form.create.course_types.save_error")),O(!1)}}}).mutate,F=T.course_setting.course_type,U=(0,o.t)("spaces.form.create.course_types.".concat(F,"_confirmation"));return(0,n.jsxs)(b.u_,{isOpen:s,onClose:c,contentPortalId:"course-type-picker-portal",children:[(0,n.jsx)(b.u_.Overlay,{}),(0,n.jsxs)(b.u_.Content,{size:"md",children:[(0,n.jsxs)(b.u_.Header,{children:[(0,n.jsx)(b.u_.Title,{size:"sm",children:(0,o.t)("spaces.form.create.course_types.label")}),(0,n.jsx)(b.u_.HeaderActions,{children:(0,n.jsx)(b.u_.CloseButton,{onClick:c})})]}),(0,n.jsxs)(b.u_.Body,{className:"px-2",children:[C&&(0,n.jsx)(_,{defaultValues:y,onSubmit:function(e){u===e.course_setting.course_type?(M((0,o.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),R()):(E(e),N(!0),A(!1))}}),(0,n.jsx)(m.c,{title:(0,o.t)("spaces.form.create.course_types.are_you_sure"),confirmText:(0,o.t)("save"),cancelText:(0,o.t)("cancel"),confirmVariant:"circle",disabled:x,isOpen:k,onCancel:function(){A(!0),N(!1)},onClose:function(){A(!0),N(!1)},onConfirm:function(){O(!0),z(T)},children:(0,n.jsx)("p",{children:U})})]}),(0,n.jsxs)(b.u_.Footer,{className:"flex justify-end",children:[!x&&(0,n.jsx)(l.z,{type:"button",variant:"secondary",className:"mr-2",onClick:c,children:(0,o.t)("cancel")}),(0,n.jsx)(p._,{type:"submit",variant:"circle",form:g,submitting:x,children:(0,o.t)("save")})]})]})]})};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r,f=e.space,m=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1],h=(0,a.T4)({spaceId:null==f?void 0:f.id}),y=h.data,v=h.isLoading,g=(0,a.wh)().isViewOnlyMasquerading;if(v)return(0,n.jsx)(c.a,{});if(!y)return null;var _=(null==(r=y.course_setting)?void 0:r.course_type)||d.t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{space:y,isOpen:p,onClose:function(){b(!1)}}),(0,n.jsxs)(u.Z.BodySm,{weight:"font-medium",children:[(0,n.jsx)(s.JO,{type:"16-book",size:16,className:"align-text-bottom"})," ",(0,o.t)("spaces.form.create.course_types.label"),":"," ",(0,n.jsx)(l.z,{variant:"plain",className:"hover:bg-tertiary !text-dark !px-1 !py-0.5 !font-semibold underline decoration-dashed decoration-1 underline-offset-2",onClick:function(){return b(!0)},disabled:g,children:(0,o.t)("spaces.form.create.course_types.".concat(_))})]})]})}},117075:function(e,t,r){"use strict";r.d(t,{a:()=>en});var n=r(552676),i=r(240507),o=r.n(i),a=r(594337),s=r(547144),l=r(619803),c=r.n(l),u=function(e){var t,r,i=e.href,o=e.children,a=e.className,s=e.rel,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["href","children","className","rel"]);return(0,n.jsx)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={href:i,rel:void 0===s?"noopener noreferrer":s,className:c()("focus-visible:!outline-secondary bg-brand text-brand-button inline-block rounded-md px-[18px] py-[6px] text-sm font-bold leading-5 transition-colors duration-150 hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",a),children:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},d=function(e){var t=e.heading,r=void 0===t?"":t,i=e.description,o=void 0===i?"":i,l=e.button_label,c=void 0===l?"":l,d=e.button_link,f=e.background_image,m=void 0===f?"":f,p=e.overlay_color,b=e.heading_color,h=e.text_color,y=e.button_background_color,v=e.button_text_color,g=(0,a.Vi)(void 0===p?"#191B1F":p).alpha(.75).toRgbString(),_="";if(m)try{_=new URL(m).href}catch(e){_=(0,s.C9)({signed_id:m})}return(0,n.jsx)("div",{className:"flex w-full flex-col items-center bg-cover bg-center py-14 bg-blend-multiply",style:{backgroundImage:'url("'.concat(_,'")'),backgroundColor:g},children:(0,n.jsxs)("div",{className:"max-w-3xl px-5 text-center",children:[!!r&&(0,n.jsx)("h2",{className:"mb-3 text-4xl font-bold leading-10",style:{color:void 0===b?"#FFFFFF":b},children:r}),!!o&&(0,n.jsx)("p",{className:"mb-5 text-base leading-6 tracking-tighter",style:{color:void 0===h?"#FFFFFF":h},children:o}),!!c&&(0,n.jsx)(u,{href:void 0===d?"":d,style:{backgroundColor:void 0===y?"#2B2E33":y,color:void 0===v?"#FFFFFF":v},children:c})]})})};d.propTypes={heading:o().string,description:o().string,button_label:o().string,button_link:o().string,background_image:o().string,overlay_color:o().string,heading_color:o().string,text_color:o().string,button_background_color:o().string,button_text_color:o().string};var f=function(e){return(0,n.jsx)(d,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))};f.propTypes={};var m=r(275271),p=r(932699),b=r(322825);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r=e.description_tiptap,i=void 0===r?{}:r,o=e.sgids_to_object_map,a=e.inline_attachments,s=(t=(0,m.useState)((0,p.uniqueId)("description_block_")),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],c=s[1];return(0,m.useEffect)(function(){c((0,p.uniqueId)("description_block_"))},[i]),(0,n.jsx)("div",{className:"bg-primary flex w-full flex-col items-center",children:(0,n.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,n.jsx)(b.Rs,{readOnly:!0,value:i,sgidToObjectMap:void 0===o?{}:o,inlineAttachments:void 0===a?[]:a,editorClassName:"break-words",disabledExtensions:["mention","poll","ai_copilot"]})})},l)};y.propTypes={description_tiptap:o().object,sgids_to_object_map:o().object,inline_attachments:o().array};var v=r(589252),g=r(739792),_=r(396354),x=r(381636),j=(r(42352),r(957363)),w=r(247075);o().object.isRequired;var O=function(e){var t=e.locked_page_heading,r=e.locked_page_description,i=e.locked_button_url,o=void 0===i?"":i,a=e.locked_button_label,s=void 0===a?"":a,l=!!(0,_.t)().invited,c=!!(s&&o),u=(void 0===r?{}:r).rendered_html_with_layout,d=void 0===u?"":u,f=!!d;return(0,n.jsx)("div",{className:"flex size-full justify-center p-0 md:h-auto md:p-6","data-testid":"locked-space",children:(0,n.jsxs)("div",{className:"border-primary bg-primary size-full max-w-5xl rounded-none border-0 px-10 py-20 text-center md:h-auto md:rounded-lg md:border",children:[(0,n.jsx)(j.JO,{type:"lock",className:"mb-5 !w-14"}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z.TitleSm,{weight:"semibold",children:(0,g.t)("please_check_your_email")}),(0,n.jsx)(x.Z.BodyMd,{children:(0,g.t)("please_check_your_email_description")})]}),!l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(x.Z.TitleSm,{weight:"semibold",children:(void 0===t?"":t)||(0,g.t)("this_space_is_private")})}),(0,n.jsxs)("div",{className:"mb-4",children:[f&&(0,n.jsx)("div",{className:"text-dark flex justify-center",children:(0,n.jsx)(v.Z,{html:d})}),!f&&(0,n.jsx)(x.Z.BodyMd,{children:(0,g.t)("this_space_is_private_description")})]}),c&&(0,n.jsx)(w.Q,{variant:"brand",href:o,children:s})]})]})})};O.propTypes={locked_page_heading:o().string,locked_page_description:o().shape({plain_text:o().string,trix_html:o().string,rendered_html_with_layout:o().string}),locked_button_url:o().string,locked_button_label:o().string,className:o().string};var S=function(e){var t=e.locked_page_heading,r=e.locked_page_description,i=e.locked_button_url,o=e.locked_button_label;return(0,n.jsx)("div",{className:"bg-secondary text-dark h-full",children:(0,n.jsx)(O,{locked_page_heading:void 0===t?"":t,locked_page_description:void 0===r?{}:r,locked_button_url:void 0===i?"":i,locked_button_label:void 0===o?"":o})})};S.propTypes={locked_page_heading:o().string,locked_page_description:o().shape({plain_text:o().string,trix_html:o().string,rendered_html_with_layout:o().string}),locked_button_url:o().string,locked_button_label:o().string};var k=r(94178),N=function(e){var t=e.isEnrolled,r=e.sections;return(0,n.jsx)("div",{className:"bg-primary flex w-full flex-col items-center py-10",children:(0,n.jsx)("div",{className:"w-full max-w-[960px] px-6",children:(0,n.jsx)(k.V,{isEnrolled:void 0!==t&&t,sections:void 0===r?[]:r})})})};N.propTypes={isEnrolled:o().bool,sections:o().array};var P=r(582331),C=r(651943),A=r(846051),I=r(39905),T=Object.assign(function(){return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{children:(0,g.t)("paywalls.lock_screen.preview.empty_block.price")}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:"USD"})]}),(0,n.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,n.jsx)(x.Z.LabelXs,{children:(0,g.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:"$0"})})})]})},{validateToRender:function(e){return!(null==e?void 0:e.id)}}),E=r(860221),L=r(102056),D="paywalls.lock_screen.preview.price.installment_payment",M="paywalls.lock_screen.preview.price.free_trial",R="paywalls.lock_screen.preview.price.once_payment",B={trial_then_upfront_then_value:{free_trial_label:M,once_payment:R,installment_payment:D},upfront_then_trial_then_value:{once_payment:R,free_trial_label:"paywalls.lock_screen.preview.price.trial",installment_payment:D},trial_then_value:{free_trial_label:M,installment_payment:D},upfront_then_value:{once_payment:"paywalls.lock_screen.preview.price.today_payment",installment_payment:D},value:{installment_payment:D}},z=Object.assign(function(e){var t=e.price,r=e.currency,i=B[null==t?void 0:t.scenario]||B.value,o=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:o||(null==t?void 0:t.amount_formatted)}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:Object.keys(i).length>0&&(0,n.jsx)(x.Z.LabelXs,{color:"text-default",children:(0,p.compact)(Object.keys(i).map(function(e){return i[e]})).map(function(e){return(0,g.t)(e,{once_payment_amount:(0,L.I)(r,null==t?void 0:t.upfront_payment_amount),installment_count:null==t?void 0:t.installments_count,installment_amount:(0,L.I)(r,null==t?void 0:t.installment_amount),interval_qualifier:(0,g.t)(["settings.paywall_prices.price_types","as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null==t?void 0:t.trial_days})}).join((0,g.t)("paywalls.lock_screen.preview.price.separator"))})})]})},{validateToRender:function(e){return(0,E.t3)(e)}}),F=Object.assign(function(e){var t=e.price,r=e.currency,i=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0});return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:i}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",children:r.code.toUpperCase()})]}),(0,n.jsx)("div",{className:"invisible flex flex-col gap-y-2",children:(0,n.jsx)(x.Z.LabelXs,{children:(0,g.t)("paywalls.lock_screen.preview.price.today_payment",{once_payment_amount:i})})})]})},{validateToRender:function(e){return(0,E.ZN)(e)}}),U="paywalls.lock_screen.preview.price.recurring_payment",Z="settings.paywall_prices.price_types",G="paywalls.lock_screen.preview.price.free_trial",q="paywalls.lock_screen.preview.price.today_payment",V={web:{trial_then_upfront_then_value:{free_trial_label:G,once_payment:"paywalls.lock_screen.preview.price.once_payment",recurring_payment:U},upfront_then_trial_then_value:{once_payment:q,free_trial_label:"paywalls.lock_screen.preview.price.trial",recurring_payment:U},trial_then_value:{free_trial_label:G,recurring_payment:U},upfront_then_value:{once_payment:q,recurring_payment:U},value:{}},mobile:{trial_then_upfront_then_value:{free_trial_label:G},trial_then_value:{free_trial_label:G},value:{}}},W=[T,F,Object.assign(function(e){var t=e.price,r=e.currency,i=(0,P.B)().previewMode,o=(0,C.h)(i)?"web":"mobile",a=V[o][null==t?void 0:t.scenario]||V[o].value,s=(0,L.I)(r,null==t?void 0:t.amount,{includeCurrencyCode:!1,includeCurrencySymbol:!0}),l=0===Object.keys(a).length;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(x.Z.TitleXl,{size:"text-4xl",children:s}),(0,n.jsx)(x.Z.LabelSm,{color:"text-default",textTransform:"lowercase",children:"/ ".concat((0,g.t)([Z,"when_advertising",t.interval,t.interval_count]))})]}),(0,n.jsx)("div",{className:c()("flex flex-col gap-y-2",{invisible:l}),children:(0,n.jsx)(x.Z.LabelXs,{color:"text-default",children:(0,p.compact)(Object.keys(a).map(function(e){return a[e]})).map(function(e){return(0,g.t)(e,{once_payment_amount:(0,L.I)(r,null==t?void 0:t.upfront_payment_amount),recurring_payment_amount:(0,L.I)(r,null==t?void 0:t.amount),interval_qualifier:(0,g.t)([Z,"as_adverb",t.interval,t.interval_count]).toLowerCase(),count:null==t?void 0:t.trial_days})}).join((0,g.t)("paywalls.lock_screen.preview.price.separator"))||"."})})]})},{validateToRender:function(e){return(0,E.QT)(e)}}),z],H=function(e){var t=e.price,r=e.currency,i=W.find(function(e){return e.validateToRender(t)});return i?(0,n.jsx)(i,{price:t,currency:r}):null},Q=r(227851),K=function(){var e=(0,Q.Gc)(),t=[];if(e){var r,n,i=e.formState.errors,o=null==i||null==(r=i.lock_screen_blocks)?void 0:r.find(function(e){var t;return null==e||null==(t=e.data)?void 0:t.paywalls});(0,p.compact)((null==o||null==(n=o.data)?void 0:n.paywalls)||[]).forEach(function(e){var r,n,i,o,a;(null==e||null==(n=e.id)||null==(r=n.ref)?void 0:r.name)&&(t[parseInt(e.id.ref.name.match(/paywalls.(\d).id+/)[1])]=!0),(null==e||null==(a=e.web_paywall_price)||null==(o=a.id)||null==(i=o.ref)?void 0:i.name)&&(t[parseInt(e.web_paywall_price.id.ref.name.match(/paywalls.(\d).web_paywall_price+/)[1])]=!0)})}return{paywallWithErrorsByIndex:t,isEditing:!!e,isPreviewing:!e}},J=Object.assign(function(e){var t=e.children,r=e.desktopPreviewMode,i=m.Children.count(t);return(0,n.jsx)("div",{className:c()("grid w-full max-w-[960px] grid-cols-1 gap-y-4 px-6 md:mx-4",{"md:w-1/3 md:w-[332px]":1===i&&r,"md:w-[680px] md:grid-cols-2 md:gap-x-4":2===i&&r,"md:w-[960px] md:grid-cols-3 md:gap-x-4":i>2&&r}),children:t})},{Body:function(e){var t=e.children,r=e.isHighlighted,i=e.isError,o=e.isEmpty,a=e.hasFavorites;return(0,n.jsxs)("div",{className:c()("flex flex-col",{"opacity-40":o}),children:[a&&(0,n.jsx)("div",{className:c()("bg-brand flex flex-col items-center py-1",{"rounded-t-lg border-x border-t":r,"hidden md:invisible md:flex":!r,"border-feedback-error":i,"border-primary":!i}),children:(0,n.jsx)(x.Z.LabelXs,{weight:"bold",color:"text-brand-button",textTransform:"uppercase",children:(0,g.t)("paywalls.lock_screen.preview.featured")})}),(0,n.jsx)("div",{className:c()("bg-primary flex h-full flex-col gap-y-4 border p-5",{"rounded-b-lg":r,"rounded-lg":!r,"border-feedback-error":i,"border-primary":!i}),children:t})]})},Content:function(e){var t=e.paywall,r=e.description,i=K().isEditing,o=t.web_paywall_price,a=i?t.display_name||(0,g.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,s=function(e){var t=new URL("".concat((0,A.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",o.id),window.open(t,"_blank")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:c()("flex flex-col gap-y-5 pb-5",{"border-primary border-b":!!r}),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:a}),(0,n.jsx)(H,{price:o,currency:t.currency})]}),(0,n.jsx)("div",{children:(0,n.jsx)(I.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return s(t)},children:(0,g.t)("join")})})]}),r&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,n.jsx)(x.Z.BodySm,{color:c()({"text-lightest":i&&!t.description}),children:(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:r})})})]})},MobileContent:function(e){var t=e.paywall,r=e.description,i=K().isEditing,o=t.mobile_paywall_price,a=i?t.display_name||(0,g.t)("paywalls.lock_screen.preview.empty_block.name"):t.display_name,s=function(e){var t=new URL("".concat((0,A.Sr)()).concat(e.checkout_path));t.searchParams.set("price_id",o.id),window.open(t,"_blank")};return(0,n.jsxs)("div",{className:c()("flex flex-col gap-y-5"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:a}),(0,n.jsx)(H,{price:o,currency:t.currency})]}),r&&(0,n.jsx)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:(0,n.jsx)(x.Z.BodySm,{color:c()({"text-lightest":i&&!t.description}),children:(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:r})})}),(0,n.jsx)("div",{children:(0,n.jsx)(I.z,{className:"h-[2.15rem] w-36",variant:"primary",type:"button",onClick:function(){return s(t)},children:(0,g.t)("join")})})]})},ContentResolver:function(e){var t=(0,P.B)().previewMode,r=(0,C.h)(t)?J.Content:J.MobileContent;return(0,n.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))}}),$=function(e){var t=e.desktopPreviewMode;return(0,n.jsx)(J,{desktopPreviewMode:t,children:(0,n.jsxs)(J.Body,{isHighlighted:!1,isError:!1,isEmpty:!0,children:[(0,n.jsxs)("div",{className:"border-primary flex flex-col gap-y-2 border-b pb-4",children:[(0,n.jsx)(x.Z.LabelLg,{truncate:!0,children:(0,g.t)("paywalls.lock_screen.preview.empty_block.name")}),(0,n.jsx)(H,{price:null,currency:null})]}),(0,n.jsxs)("div",{className:"flex h-full flex-col justify-between gap-y-4",children:[(0,n.jsx)(x.Z.BodySm,{color:"text-lightest",children:(0,g.t)("paywalls.lock_screen.preview.empty_block.description")}),(0,n.jsx)(I.z,{variant:"primary",type:"button",children:(0,g.t)("join")})]})]})})},X=function(){var e=(0,g.t)("terms_of_service"),t=(0,g.t)("privacy_policy"),r=(0,g.t)("separator_dot");return(0,n.jsx)(x.Z.LabelSm,{weight:"medium",children:[e,r,t].join(" ")})},Y=r(969288),ee=function(e){var t;return e.id&&(null==e||null==(t=e.web_paywall_price)?void 0:t.id)},et=function(e){var t;return e.id&&(null==e||null==(t=e.mobile_paywall_price)?void 0:t.id)},er={banner:d,description:y,call_to_action:f,lessons:N,legacy_lock_screen:S,paywalls:function(e){var t=e.paywalls,r=K(),i=r.paywallWithErrorsByIndex,o=r.isEditing,a=(0,P.B)().previewMode,s=(0,C.h)(a)?ee:et,l=t.some(function(e){return(0,Y.zh)(e)&&s(e)});if(!l&&!o)return null;if(!l&&o)return(0,n.jsx)("div",{className:c()("bg-primary flex w-full flex-col items-center"),children:(0,n.jsx)($,{desktopPreviewMode:(0,C.h)(a)})});var u=t.some(function(e){return e.paywall_highlighted});return(0,n.jsxs)("div",{className:c()("bg-primary flex w-full flex-col items-center gap-y-3"),children:[(0,n.jsx)(J,{desktopPreviewMode:(0,C.h)(a),children:t.filter(function(e){return s(e)||o}).map(function(e,t){return(0,n.jsx)(J.Body,{isHighlighted:e.paywall_highlighted,isError:!!i[t],isEmpty:!s(e),hasFavorites:u,children:(0,n.jsx)(J.ContentResolver,{paywall:e,description:o&&(0,C.h)(a)?e.description||(0,g.t)("paywalls.lock_screen.preview.empty_block.description"):e.description})},e.id)})}),(0,C.h)(a)?null:(0,n.jsx)(X,{})]})}},en=function(e){var t=e.block,r=void 0===t?{}:t,i=r.type,o=r.data,a=er[i];return(0,n.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o))};en.propTypes={block:o().shape({type:o().string,id:o().string,hidden:o().bool,data:o().object})}},680311:function(e,t,r){"use strict";r.d(t,{Z:()=>d});var n=r(552676),i=r(739792),o=r(864529),a=r(878931),s=r(750594),l=r(117075),c=r(586470),u=r(651943),d=function(e){var t=e.blocks,r=void 0===t?[]:t,d=e.previewMode,f=void 0===d?c.oF.DESKTOP:d;return Array.isArray(r)&&r.some(function(e){return!(null==e?void 0:e.hidden)})?(0,n.jsx)("div",{className:"bg-primary text-dark flex h-full flex-col gap-y-10",children:r.filter(function(e){return!e.hidden}).map(function(e){return(0,n.jsx)("div",{className:"pointer-events-none select-none",children:(0,n.jsx)(l.a,{block:e})},e.id)})}):(0,u.h)(f)?(0,n.jsx)(o.F.Body,{hasPaddingTopMobile:!1,children:(0,n.jsx)(a.R,{})}):(0,n.jsx)(s._.Page,{title:(0,i.t)(["spaces_directory","card","private"]),subtitle:(0,i.t)(["this_space_is_private_description"])})}},59849:function(e,t,r){"use strict";r.d(t,{i4:()=>f,oF:()=>c,sE:()=>d});var n=r(552676),i=r(275271),o=r(227851);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=Object.freeze({DESKTOP:"desktop",MOBILE:"mobile"}),u=(0,i.createContext)(null);u.displayName="FormBlocksContext";var d=function(){var e=(0,i.useContext)(u);if(!e)throw Error("useFormBlocks must be used within a FormBlocksProvider");return e},f=function(e){var t=e.children,r=e.name,a=void 0===r?"blocks":r,d=l((0,i.useState)(null),2),f=d[0],m=d[1],p=(0,o.Gc)().watch,b=(0,o.Dq)({name:a}),h=b.fields,y=b.update,v=b.replace,g=l((0,i.useState)(c.DESKTOP),2),_=g[0],x=g[1],j=p(a),w=h.map(function(e,t){return s({},e,j[t])}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return -1;var t=w.find(function(t){return t.id===e});return t?w.indexOf(t):-1};return(0,n.jsx)(u.Provider,{value:{blocks:w,isEditingBlock:!!f,blockBeingEdited:f,getBlockIndex:O,removeBlockBeingEdited:function(){x("desktop"),m(null)},setBlockBeingEdited:m,toggleBlockHidden:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(r){var n=w.find(function(e){return e.id===r});if(n){var i=w.indexOf(n);-1!==i&&y(i,(e=s({},n),t=t={hidden:!n.hidden},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))}}},getBlockDataPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=O(e);return -1===t?"":"".concat(a,".").concat(t,".data")},replaceBlocks:function(e){return v(e)},previewMode:_,setPreviewMode:x},children:t})}},582331:function(e,t,r){"use strict";r.d(t,{B:()=>f,_:()=>m});var n=r(552676),i=r(275271),o=r(932699),a=r(355158),s=r(824869),l=r(59849),c=r(651943);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,i.createContext)({previewMode:"desktop",setPreviewMode:o.noop,isPreviewWindowOpen:!1,setPreviewWindowOpen:o.noop,isInAppEnabled:!1,isCommunityOnPlus:!1,shouldShowBrandedAppBanner:!0});d.displayName="PaywallBlockContext";var f=function(){return(0,i.useContext)(d)},m=function(e){var t,r=e.children,o=(0,s.E)().isCommunityOnPlus,f=(0,l.sE)(),m=f.previewMode,p=f.setPreviewMode,b=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=b[0],y=b[1],v=(0,a.g)(),g=(0,i.useMemo)(function(){return(0,c.g)(m)&&o&&!v||(0,c.g)(m)&&!o},[c.g,m,o,v]);return(0,n.jsx)(d.Provider,{value:{previewMode:m,setPreviewMode:p,isPreviewWindowOpen:h,setPreviewWindowOpen:y,isInAppEnabled:v,isCommunityOnPlus:o,shouldShowBrandedAppBanner:g},children:r})}},651943:function(e,t,r){"use strict";r.d(t,{g:()=>o,h:()=>i});var n=r(59849),i=function(e){return e===n.oF.DESKTOP},o=function(e){return e===n.oF.MOBILE}},586470:function(e,t,r){"use strict";r.d(t,{Tw:()=>u,oF:()=>n.oF,sE:()=>n.sE});var n=r(59849),i=r(552676),o=r(240507),a=r.n(o),s=r(227851),l=r(559446),c=r(582331),u=function(e){var t,r,o=e.children,a=e.space,u=(0,l.z)(void 0===a?{}:a),d=(0,s.cI)({defaultValues:{lock_screen_blocks:u}});return(0,i.jsx)(s.RV,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={children:(0,i.jsx)(n.i4,{name:"lock_screen_blocks",children:(0,i.jsx)(c._,{children:o})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};u.propTypes={children:a().node,space:a().object}},559446:function(e,t,r){"use strict";r.d(t,{z:()=>P,U:()=>N});var n,i,o=r(275271),a=r(932699),s=r(739792),l={type:"banner",hidden:!1,data:{heading:(0,s.t)("courses.lockscreen.default.banner_heading"),description:(0,s.t)("courses.lockscreen.default.banner_description"),button_label:(0,s.t)("courses.lockscreen.default.buy_now"),button_link:"",background_image:"",overlay_color:"#191B1F",heading_color:"#FFFFFF",text_color:"#FFFFFF",button_background_color:"#2B2E33",button_text_color:"#FFFFFF"}},c={type:"description",hidden:!1,data:{description_tiptap:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:(0,s.t)("courses.lockscreen.default.description")}]}]},sgids_to_object_map:{},inline_attachments:[]}},u={type:"lessons",hidden:!0,data:{sections:[]}},d={type:"call_to_action",hidden:!1,data:(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l.data),i=i={overlay_color:"#2C3341",heading:(0,s.t)("courses.lockscreen.default.call_to_action_heading"),description:(0,s.t)("courses.lockscreen.default.call_to_action_description")},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}),n)},f={type:"paywalls",hidden:!1,data:{paywalls:[]}},m=[l,c,u,f,d];function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function y(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(){var e=["banner","description","paywalls","call_to_action"];return{event:y(e).concat(["legacy_lock_screen"]),basic:y(e).concat(["legacy_lock_screen"]),chat:y(e).concat(["legacy_lock_screen"]),course:y(e).concat(["lessons"])}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.post_type,i=e[void 0===n?"basic":n]||e.basic;return t.filter(function(e){return i.includes(e.type)})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.post_type,o=y(r);return(e[void 0===i?"basic":i]||e.basic).forEach(function(e,r){"legacy_lock_screen"!==e&&(o.some(function(t){return t.type===e})||(o=y(o.slice(0,r)).concat([t[e]],y(o.slice(r)))))}),o},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return e.some(function(e){return e.type===t.type})||e.push(t),e},[])},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=y(e),n=t.locked_page_heading,i=void 0===n?"":n,o=t.locked_page_description,a=void 0===o?{}:o,s=t.locked_button_label,l=void 0===s?"":s,c=t.locked_button_url,u=void 0===c?"":c,d=t.post_type,f=a.rendered_html_with_layout;return(i||l||u||(void 0===f?"":f))&&"course"!==(void 0===d?"basic":d)?r.some(function(e){return"legacy_lock_screen"===e.type})?r.map(function(e){return"legacy_lock_screen"===e.type?h(b({},e),{data:{locked_page_heading:i,locked_page_description:a,locked_button_url:u,locked_button_label:l}}):e}):(r.unshift({type:"legacy_lock_screen",hidden:!1,data:{locked_page_heading:i,locked_page_description:a,locked_button_url:u,locked_button_label:l}}),r.map(function(e){return"legacy_lock_screen"===e.type?e:h(b({},e),{hidden:!0})})):r},w=function(e){return e.map(function(e){return h(b({},e),{id:(0,a.uniqueId)("block_")})})},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.course_sections,n=void 0===r?[]:r,i=Array.isArray(n)?n:[];return e.map(function(e){return"lessons"!==e.type?e:h(b({},e),{data:h(b({},e.data),{sections:i})})})},S=function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:[];return O(w(j(x(g(v(),o,r)),r)),r)},k=function(e){var t=e.space,r=void 0===t?{}:t,n=r.lock_screen_blocks,i=void 0===n?[]:n,o=Array.isArray(i)&&i.length>0?i:m,a=v(),s=g(a,o,r);return O(w(j(x(_(a,{banner:l,description:c,call_to_action:d,lessons:u,paywalls:f},s,r)),r)),r)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMemo)(function(){return S({space:e})},[e])},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMemo)(function(){return k({space:e})},[e])}},360060:function(e,t,r){"use strict";r.d(t,{v:()=>a});var n=r(552676),i=r(739792),o=r(957363),a=function(e){var t=e.isEnrolled,r=e.isDripped,a=e.isCompleted,s="lock",l="lesson_locked";return t&&r&&(s=a?"16-checked-green":"16-unchecked",l=a?"lesson_completed":"lesson_incomplete"),(0,n.jsx)(o.JO,{className:"text-default flex-none",size:16,type:s,"aria-label":(0,i.t)(["courses.lessons",l])})}},94178:function(e,t,r){"use strict";r.d(t,{V:()=>P});var n=r(552676),i=r(240507),o=r.n(i),a=r(739792),s=r(324512);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.reduce(function(e,t){var r,n=(r=t.split(":").reverse(),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(r,3)||function(e,t){if(e){if("string"==typeof e)return l(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(r,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1],a=n[2];return e+(parseInt(i)+60*parseInt(o)+3600*parseInt(null!=a?a:0))},0);return{hours:Math.floor(t/3600),minutes:Math.floor(t%3600/60),seconds:t%60}},u=function(e){var t=e.hours,r=e.minutes;return t>0?(0,a.t)("courses.summary.content.hr_min_duration",{hours:t,minutes:r}):(0,a.t)("courses.summary.content.min_duration",{minutes:r})},d=r(39905),f=r(381636),m=r(619803),p=r.n(m),b=r(957363),h=r(903225),y=r(918594),v=r(360060),g=r(65119),_=r(547144),x=r(380171),j=function(e){var t,r=e.lesson,i=void 0===r?{}:r,o=e.isEnrolled,a=e.section,l=(0,h.UO)(),c=null==l?void 0:l.spaceSlug,u=(0,s.d)(),d=u.lessonLabel,m=u.sectionLabel;return(0,n.jsx)(y.OL,{onClick:function(e){o||e.preventDefault()},to:_.H4.showLesson({spaceSlug:c,lessonId:i.id,sectionId:a.id}),className:p()("flex w-full items-center space-x-2 p-4",o?"cursor-pointer":"cursor-default"),children:(0,n.jsxs)(x.T,{content:(0,g.t)({drippedAt:a.dripped_at,dripDelay:a.drip_delay,needsToCompletePreviousLesson:i.needs_to_complete_previous_lesson,lessonLabel:d,sectionLabel:m}),placement:"bottom-start",disabled:i.is_dripped,arrow:!1,className:"flex w-full items-center",dataTestId:"lesson-content-tittle",children:[(0,n.jsx)(v.v,{isDripped:i.is_dripped,isEnrolled:o,isCompleted:i.completed}),(0,n.jsx)("div",{className:"ml-3 flex-1",children:(0,n.jsx)(f.Z.BodySm,{children:i.name})}),(null==(t=i.featured_media)?void 0:t.duration)&&(0,n.jsx)(f.Z.BodySm,{children:i.featured_media.duration})]})},i.id)};j.propTypes={lesson:o().object,isEnrolled:o().bool,section:o().object};var w=function(e){var t=e.section,r=void 0===t?{}:t,i=e.isEnrolled,o=e.hasBorder,l=e.open,d=e.onToggle,m=(0,s.d)().lessonLabel,h=c(r.lessons.map(function(e){var t;return null==(t=e.featured_media)?void 0:t.duration}).filter(Boolean)),y=(0!==h.hours||0!==h.minutes)&&" ".concat((0,a.t)("separator_dot")," ").concat(u(h)),v=r.lessons.length;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{type:"button",onClick:d,className:p()("bg-secondary flex w-full justify-between p-4 text-left",{"border-primary border-b":l||void 0!==o&&o}),children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(b.JO,{type:l?"16-chevron-down":"16-chevron-right",className:"mr-2",size:16}),(0,n.jsx)(f.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:r.name})]}),(0,n.jsxs)(f.Z.LabelSm,{children:[(0,a.t)("courses.labels.".concat(m),{count:v}),y]})]}),l&&(0,n.jsx)("div",{className:"divide-primary divide-y",children:r.lessons.map(function(e){return(0,n.jsx)(j,{lesson:e,isEnrolled:i,section:r},e.id)})})]},r.id)};w.propTypes={section:o().object,isMember:o().bool,hasBorder:o().bool,areSectionsOpened:o().bool};var O=r(275271);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){var t,r=e.sections,n=(t=(0,O.useState)(Object.fromEntries(r.map(function(e){return[e.id,!0]}))),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],o=n[1];return{hasExpandedSections:function(){return Object.values(i).some(Boolean)},isSectionExpanded:function(e){return i[e.id]},toggleSectionExpanded:function(e){o(function(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){k(e,t,r[t])})}return e}({},t),n=null!=(n=k({},e.id,!t[e.id]))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r})},expandAllSections:function(){o(Object.fromEntries(r.map(function(e){return[e.id,!0]})))},collapseAllSections:function(){o(Object.fromEntries(r.map(function(e){return[e.id,!1]})))}}},P=function(e){var t=e.isEnrolled,r=void 0!==t&&t,i=e.sections,o=void 0===i?[]:i,l=(0,s.d)(),m=l.lessonLabel,p=l.sectionLabel,b=N({sections:o}),h=b.hasExpandedSections,y=b.isSectionExpanded,v=b.toggleSectionExpanded,g=b.expandAllSections,_=b.collapseAllSections;if((null==o?void 0:o.length)===0)return null;var x=o.length,j=o.reduce(function(e,t){return e+t.lessons.length},0),O=c(o.map(function(e){return e.lessons}).flat().map(function(e){var t;return null==(t=e.featured_media)?void 0:t.duration}).filter(Boolean)),S=(0!==O.hours||0!==O.minutes)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("separator_dot")}),(0,n.jsx)(f.Z.LabelSm,{children:u(O)})]});return(0,n.jsxs)("div",{className:"flex w-full flex-col","data-testid":"summary-course-content",children:[(0,n.jsx)(f.Z.TitleSm,{as:"h2",weight:"semibold",color:"text-darkest",children:(0,a.t)("courses.summary.content.title")}),(0,n.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,n.jsxs)("div",{className:"text-dark flex items-center space-x-1",children:[(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("courses.labels.".concat(p),{count:x})}),(0,n.jsx)("span",{children:(0,a.t)("separator_dot")}),(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)("courses.labels.".concat(m),{count:j})}),S]}),(0,n.jsx)(d.z,{className:"!p-0",variant:"plain",onClick:function(){h()?_():g()},children:(0,n.jsx)(f.Z.LabelSm,{children:(0,a.t)(["courses.summary.content",h()?"collapse":"expand"],{all_sections:(0,a.t)(["courses.summary.content.all_sections",p])})})})]}),(0,n.jsx)("div",{className:"border-primary overflow-hidden rounded-md border",children:o.map(function(e,t){var i=t===x-1;return(0,n.jsx)(w,{section:e,isEnrolled:r,hasBorder:!i,open:y(e),onToggle:function(){return v(e)},lessonLabel:m},e.id)})})]})};P.propTypes={isEnrolled:o().bool,sections:o().arrayOf(o().object)}},285544:function(e,t,r){"use strict";r.d(t,{$:()=>a});var n=r(131906),i=r(93199),o=r(547144),a=function(e){var t=e.space,r=e.options,a=o.av.courses.settings({courseId:t.id});return(0,n.useMutation)(function(e){return(0,i.aU)(a,e)},void 0===r?{}:r)};r(60589)},336062:function(e,t,r){"use strict";r.d(t,{l:()=>K});var n=r(552676),i=r(275271),o=r(240507),a=r.n(o),s=r(619803),l=r.n(s),c=r(932699),u=r(739792),d=r(441342),f=r(598222),m=r(22270),p=r(767900),b=r(60878),h=r(227851),y=r(448144),v=r(310074),g=r(615882),_=r(117617),x=r(731954),j=function(){var e=(0,d.e2)().records,t=(0,_.Be)(),r=[{label:(0,u.t)("spaces.form.create.space_type_basic_post_label"),name:"basic",description:(0,u.t)("spaces.form.create.space_type_basic_post_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},multi:!1},{label:(0,u.t)("spaces.form.create.space_type_event_post_label"),name:"event",description:(0,u.t)("spaces.form.create.space_type_event_post_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},multi:!1}],i=[{label:(0,u.t)("spaces.form.create.visibility_open_label"),name:"open",description:(0,u.t)("spaces.form.create.visibility_open_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},alertTitle:(0,u.t)("spaces.form.create.visibility_open_alert_title"),multi:!1},{label:(0,u.t)("spaces.form.create.visibility_private_label"),name:"private",description:(0,u.t)("spaces.form.create.visibility_private_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},alertTitle:(0,u.t)("spaces.form.create.visibility_private_alert_title"),multi:!1},{label:(0,u.t)("spaces.form.create.visibility_secret_label"),name:"secret",description:(0,u.t)("spaces.form.create.visibility_secret_description"),icon:{default:"space-members-only",selected:"space-members-only-active",viewBox:"0 0 80 80"},multi:!1}];return(0,n.jsxs)("div",{className:"new-space-form__step new-space-form__basic-info",children:[(0,n.jsxs)("div",{className:"new-space-form__space-group",children:[(0,n.jsxs)("h2",{className:"heading-h2",children:[1===e.length&&(0,u.t)("spaces.form.create.space_type_step_title_no_spaces"),e.length>1&&(0,u.t)("spaces.form.create.space_type_step_title")]}),e.length>1&&(0,n.jsx)(g.V,{variant:"large",name:"space_group_id",spaceGroups:e})]}),(0,n.jsxs)("div",{className:"new-space-form__name",children:[(0,n.jsx)(p.l.Item,{name:"emoji",hideBorder:!0,hideDescription:!0,label:(0,u.t)("spaces.form.create.icon"),children:(0,n.jsx)(p.l.EmojiPicker,{name:"emoji",placement:"bottom-start",emojiSize:23,defaultEmoji:"hash_prefix"})}),(0,n.jsx)(p.l.Item,{name:"name",hideBorder:!0,hideDescription:!0,translationRoot:"spaces.form",rules:{required:"Name is required!",maxLength:255},placeholder:(0,u.t)("spaces.form.create.name_your_space"),fullWidth:!0,children:(0,n.jsx)(p.l.Input,{label:(0,u.t)("spaces.form.create.space_name"),className:"form-control form-control--lg",autoFocus:!0})})]}),(0,n.jsxs)("div",{className:"new-space-form__type",children:[(0,n.jsx)("h3",{className:"heading-h3",children:(0,u.t)("spaces.form.create.space_type_label")}),(0,n.jsx)(x.X,{id:"post_type",name:"post_type",variant:"box",direction:t?"horizontal":"vertical",list:r})]}),(0,n.jsxs)("div",{className:"new-space-form__visibility",children:[(0,n.jsx)("label",{children:(0,u.t)("spaces.form.create.visibility_step_title")}),(0,n.jsx)(x.X,{id:"visibility",name:"visibility",variant:"box",direction:t?"horizontal":"vertical",list:i})]})]})};j.propTypes={spaceGroupId:a().number};var w=r(405521),O=r(805116),S=function(){var e=(0,w.k)(),t="spaces.form.create";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"heading-h2",children:I18n.t("".concat(t,".private_space_lock_screen_step_title"))}),(0,n.jsxs)("div",{className:"new-space-form__locked-screen",children:[(0,n.jsx)(p.l.Item,{name:"locked_page_heading",rules:{},hideBorder:!0,hideDescription:!0,translationRoot:t,fullWidth:!0,children:(0,n.jsx)(p.l.Input,{autoFocus:!0})}),(0,n.jsxs)("div",{className:"form-group form-group--column no-border trix-v2",children:[(0,n.jsx)("label",{children:I18n.t("spaces.form.create.locked_page_description")}),(0,n.jsx)(O.O,{ref:e,id:"locked_page_description",name:"locked_page_description",placeholder:I18n.t("".concat(t,".locked_page_content_placeholder")),preventAccidentalLeave:!1,tabIndex:0,className:"w-full"})]}),(0,n.jsx)(p.l.Item,{name:"locked_button_label",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(p.l.Input,{})}),(0,n.jsx)(p.l.Item,{name:"locked_button_url",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,n.jsx)(p.l.Input,{})})]})]})};S.propTypes={isPrivateSpaceWithLockedScreen:a().func};var k=function(){var e=(0,_.a7)(),t=[{label:(0,u.t)("spaces.notification_email_label"),description:(0,u.t)("spaces.notification_email_description"),name:"default_notification_setting",icon:{default:"notifications-email",selected:"notifications-email-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,u.t)("spaces.notification_in_app_label"),description:(0,u.t)("spaces.notification_in_app_description"),name:"default_in_app_notification_setting",icon:{default:"notifications-app",selected:"notifications-app-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,u.t)("spaces.notification_mobile_label"),description:(0,u.t)("spaces.notification_mobile_description"),name:"default_mobile_notification_setting",icon:{default:"notifications-mobile",selected:"notifications-mobile-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,u.t)("spaces.no_notification_label"),description:(0,u.t)("spaces.no_notification_description"),name:"none",icon:{default:"notifications-none",selected:"notifications-none-active",viewBox:"0 0 88 88"},multi:!1}];return(0,n.jsxs)("div",{className:"new-space-form__notification",children:[(0,n.jsx)("h2",{className:"heading-h2 heading-max-width",children:I18n.t("spaces.form.create.notification_step_title")}),(0,n.jsx)("div",{className:"new-space-form__notification-options",children:(0,n.jsx)(x.X,{id:"notification_preferences",name:"notification_preferences",variant:"box",direction:e?"horizontal":"vertical",list:t,multi:!0})})]})},N=function(e){var t=e.currentSpaceGroupId,r=e.isPrivateSpaceWithLockedScreen,o=(0,h.Gc)().watch,a=(0,i.useContext)(y.l).steps,s=o("name"),l=o("visibility"),c=o("notification_preferences");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.h,{sequence:a.basicInformation.sequence,title:a.basicInformation.title,status:a.basicInformation.status,displayNext:!0,isNextStepDisabled:!s||!l,children:(0,n.jsx)(j,{spaceGroupId:t})}),(0,n.jsx)(v.h,{sequence:a.notificationPreferences.sequence,title:a.notificationPreferences.title,status:a.notificationPreferences.status,displaySubmit:!0,isNextStepDisabled:!c,children:(0,n.jsx)(k,{})}),(0,n.jsx)(v.h,{sequence:a.lockScreen.sequence,title:a.lockScreen.title,status:a.lockScreen.status,displayNext:!0,displaySkip:!0,children:(0,n.jsx)(S,{isPrivateSpaceWithLockedScreen:r})})]})};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}N.propTypes={currentSpaceGroupId:a().number,isPrivateSpaceWithLockedScreen:a().func};var T=function(e){var t,r=e.currentSpaceGroupId,o=e.onModalClose,a=(0,h.Gc)(),s=a.watch,l=a.trigger,c=s("visibility"),d={basicInformation:{sequence:1,title:(0,u.t)("name_and_type"),status:"active"},lockScreen:{sequence:2,title:(0,u.t)("lock_screen"),status:"upcoming"},notificationPreferences:{sequence:3,title:(0,u.t)("notification"),status:"upcoming"}},f=(t=(0,i.useState)(d),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1],b=function(){return null==c?void 0:c.includes("private")};return m?(0,n.jsx)(y.O,{steps:m,onNextClick:function(e){var t;return(t=function(){var t;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:switch(e){case m.basicInformation.sequence:return[3,1];case m.lockScreen.sequence:return[3,3]}return[3,5];case 1:return[4,l("name")];case 2:return r.sent()&&(t=I(A({},m),{basicInformation:I(A({},m.basicInformation),{status:"completed"})}),p(t=!0===b()?I(A({},t),{lockScreen:I(A({},m.lockScreen),{status:"active"})}):I(A({},t),{lockScreen:I(A({},m.lockScreen),{status:"inactive"}),notificationPreferences:I(A({},m.notificationPreferences),{status:"active"})}))),[3,5];case 3:return[4,l("locked_page_heading")];case 4:return r.sent()&&p(I(A({},m),{lockScreen:I(A({},m.lockScreen),{status:"completed"}),notificationPreferences:I(A({},m.notificationPreferences),{status:"active"})})),[3,5];case 5:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){C(o,n,i,a,s,"next",e)}function s(e){C(o,n,i,a,s,"throw",e)}a(void 0)})})()},onPreviousClick:function(e){switch(e){case m.lockScreen.sequence:p(I(A({},m),{lockScreen:I(A({},m.lockScreen),{status:"upcoming"}),basicInformation:I(A({},m.basicInformation),{status:"active"})}));break;case m.notificationPreferences.sequence:var t=I(A({},m),{notificationPreferences:I(A({},m.notificationPreferences),{status:"upcoming"})});p(t=!0===b()?I(A({},t),{lockScreen:I(A({},m.lockScreen),{status:"active"})}):I(A({},t),{lockScreen:I(A({},m.lockScreen),{status:"upcoming"}),basicInformation:I(A({},m.basicInformation),{status:"active"})}))}},onClose:o,stepPanelContainer:(0,n.jsx)(N,{currentSpaceGroupId:r,isPrivateSpaceWithLockedScreen:b})}):null};T.propTypes={currentSpaceGroupId:a().number,onModalClose:a().func};var E=r(39905),L=r(26950),D=function(e){var t=e.show,r=e.onModalClose,i=e.spaceRootUrl;return(0,n.jsxs)(L.u,{show:t,onClose:r,showIcon:!1,children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:I18n.t("spaces.form.create.success_message")}),(0,n.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/invite")},variant:"secondary",children:I18n.t("spaces.invite_members")}),(0,n.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/new")},variant:"secondary",children:I18n.t("spaces.create_post")}),(0,n.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(i,"/settings")},variant:"secondary",children:I18n.t("spaces.customize")})]})};function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}D.propTypes={show:a().bool,onModalClose:a().func,spaceRootUrl:a().string};var z=function(e){var t=e.space_group_id,r=e.onModalClose,o=(0,m.m)().createSpace,a=(0,d.c6)(),s=(0,d.e2)(),l=a.helpers.isDataLoaded()&&s.helpers.isDataLoaded(),c=B((0,i.useState)(!1),1)[0],u=B((0,i.useState)(""),1)[0],h=(0,b.pm)(),y=function(e){var t={};return Object.entries(e).forEach(function(e){var r=B(e,2),n=r[0],i=r[1];["visibility","post_type"].includes(n)?t[n]=i[0]:"notification_preferences"===n?["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].forEach(function(e){i.includes("none")?t[e]="never":t[e]=i.includes(e)?"all":"never"}):t[n]=i}),t};return(0,n.jsx)(f.u.Root,{show:l,as:i.Fragment,children:(0,n.jsxs)("div",{className:"new-space-form",children:[(0,n.jsx)(p.l,{onSubmit:function(e){var t;return(t=function(){var t,r,n,i,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,o(y(e))];case 1:return(t=s.sent())&&t.root_url&&(window.location=t.root_url),[3,3];case 2:return console.error(r=s.sent()),n=r.firstErrorDetail,i=r.errorDetails,a=n||i,h.error(a),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){R(o,n,i,a,s,"next",e)}function s(e){R(o,n,i,a,s,"throw",e)}a(void 0)})})()},defaultValues:{space_group_id:t,emoji:"#"},children:(0,n.jsx)(T,{currentSpaceGroupId:t,onModalClose:function(){r.redirect_to?window.location=r.redirect_to:r()}})}),(0,n.jsx)(D,{show:c,onModalClose:function(){window.location="/"},spaceRootUrl:u})]})})};z.propTypes={space_group_id:a().number,onModalClose:a().func};var F=function(e){return(0,n.jsx)(d.Br,{children:(0,n.jsx)(d.CM,{children:(0,n.jsx)(z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})},U=r(728120),Z=r(770434),G=r(428892),q=r(957363),V=function(e){var t=e.onClick;return(0,n.jsx)("a",{href:"#create-space",className:"block-header__action action--add-space","data-testid":"create-space",onClick:t,children:(0,n.jsx)(q.JO,{type:"circle-add"})})};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Q(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var K=function(e){var t,r=e.spaceGroupId,o=e.type,a=e.size,s=void 0===a?"md":a,d=e.useDrawerFlow,f=e.children,m=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["spaceGroupId","type","size","useDrawerFlow","children"]),p=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=p[0],h=p[1],y=(0,_.a7)(),v=function(){h(!1)},g=function(e){e.preventDefault(),h(!0)};return(0,n.jsxs)(n.Fragment,{children:[!o&&(0,n.jsx)("a",Q(H({href:"#create-space",onClick:g},m),{children:f})),"icon"===o&&(y?(0,n.jsx)(Z.Y,{content:(0,u.t)("create_a_space"),delay:0,arrow:!0,size:"regular",animation:"fade",children:(0,n.jsx)(V,{onClick:g})}):(0,n.jsx)(V,{onClick:g})),"link"===o&&(0,n.jsx)("button",Q(H({type:"submit",className:l()({"create-space-btn--md":"md"===s,"create-space-btn--lg":"lg"===s}),onClick:g},m),{children:(0,u.t)("create_a_space")})),d?(0,n.jsx)(G.d,{hideHeader:!0,open:b,noWrapperPadding:!0,children:(0,n.jsx)(U._,{open:b,onClose:v,currentSpaceGroupId:r})}):(0,n.jsx)(L.u,{variant:"fullscreen",title:(0,u.t)("create_a_space"),show:b,onClose:c.noop,hideCloseButton:!0,hideTitle:!0,children:(0,n.jsx)(F,{space_group_id:r,onModalClose:v})})]})};K.propTypes={spaceGroupId:a().number.isRequired,type:a().oneOf(["link","icon"]),size:a().oneOf(["md","lg"]),useDrawerFlow:a().bool,children:a().node}},744191:function(e,t,r){"use strict";r.d(t,{F:()=>i});var n=r(494236),i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shouldFilterRestrictedPages,i=(0,n.i)({initialPage:1,perPage:1e3,query:"",status:"published"}),o=i.data,a=i.isLoading,s=i.error,l=null!=(e=null==o?void 0:o.pages.flatMap(function(e){return e.records}))?e:[];return{pages:void 0!==r&&r?l.filter(function(e){var t,r;return!(null==(t=e.setting)?void 0:t.password_protection_enabled)&&(null==(r=e.setting)?void 0:r.access_type)==="open_access"}):l,isLoading:a,error:s}}},899145:function(e,t,r){"use strict";r.d(t,{$o:()=>l,Hr:()=>a});var n=r(932699);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a=function(e){var t=e.visible_tabs;return Object.keys(t).filter(function(e){return t[e]})},s=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t},l=function(e){var t,r=e.show_right_sidebar,a=e.allow_members_to_create_posts,l=e.allow_members_to_add_others,c=e.allow_post_title,u=e.allow_cover_images,d=e.show_to_logged_out_visitors,f=e.meta_tag_attributes,m=e.notification_type,p=e.visible_tabs,b=e.show_sorting;return o(i(o(i({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","show_right_sidebar","allow_members_to_create_posts","allow_members_to_add_others","allow_post_title","allow_cover_images","show_to_logged_out_visitors","customize_lock_screen","policies","is_space_owner","is_space_member","meta_tag_attributes","show_sorting","moderator_ids"])),{hide_right_sidebar:!r,is_post_disabled:!a,prevent_members_from_adding_others:!l,hide_post_settings:!c,disable_member_post_covers:!u,is_hidden:!d,hide_sorting:!b,visible_tabs:s(p)}),{default_notification_setting:(t="chat"===e.post_type?m.includes("all")?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:m.includes("mentions")?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:m).includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:t.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:t.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:t.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:t.includes("default_mention_in_app_notification_setting")?"all":"never"}),{meta_tag_attributes:i({},(0,n.omit)(f,"opengraph_image_id"))})}},94612:function(e,t,r){"use strict";r.d(t,{r:()=>D});var n=r(552676),i=r(240507),o=r.n(i),a=r(25593),s=r(739792),l=r(720624),c=r(256060),u=r(381636),d=r(957363),f=function(e){var t=e.onAdd;return(0,n.jsxs)("button",{type:"button",className:"hover:bg-secondary flex h-12 w-full flex-row items-center rounded-lg",onClick:t,children:[(0,n.jsx)("div",{className:"bg-secondary ml-4 mr-3 inline-flex size-8 items-center justify-center rounded-md text-gray-600",children:(0,n.jsx)(d.JO,{type:"16-account",size:16})}),(0,n.jsx)(u.Z.LabelSm,{weight:"semibold",children:(0,s.t)("spaces.form.edit.members.add_members")})]})},m=r(117617),p=r(441342),b=r(78456),h=r(943544),y=function(e){var t=e.member,r=e.cellVariant,i=e.onEdit,o=e.onRemove,a=e.tableVariant,l=t.id,u=(0,p.wh)().currentCommunityMember,f=(0,b.vb)(u);return(0,n.jsx)(c.pj,{variant:r,className:"w-12 pr-4 text-right",children:(0,n.jsxs)(h.Lt,{direction:"bottom-end",button:(0,n.jsx)(h.Lt.MenuButton,{className:"invisible group-hover:visible",children:(0,n.jsx)(d.JO,{type:"20-menu-dots-horizontal",size:20,className:"text-dark"})}),children:[f&&(0,n.jsx)(h.Lt.Item,{children:(0,n.jsx)(h.Lt.ItemLink,{type:"button",onClick:function(){return i(t)},children:(0,s.t)("spaces.form.edit.members.edit_member")})}),(0,n.jsx)(h.Lt.Item,{onClick:function(){return o(l)},children:(0,n.jsx)(h.Lt.ItemLink,{type:"button",children:"space-group-members"==a?(0,s.t)("space_groups.form.edit.members.remove_from_space_group"):(0,s.t)("spaces.form.edit.members.remove_from_space")})})]})})},v=r(134870),g=function(e){var t,r=e.member,i=e.cellVariant;if(e.hideColumn)return null;var o=(null==r||null==(t=r.currentSpaceMember)?void 0:t.created_at)?(0,v.w)({dateTime:new Date(r.currentSpaceMember.created_at),format:"long_date"}):"";return(0,n.jsx)(c.pj,{variant:i,className:"",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:o})})},_=function(e){var t=e.member,r=e.cellVariant;if(e.hideColumn)return null;var i=(null==t?void 0:t.lastActive)?(0,v.w)({dateTime:new Date(t.lastActive),format:"long_date"}):"";return(0,n.jsx)(c.pj,{variant:r,className:"",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:i})})},x=r(664657),j=r(60589),w=r(451980),O=r(524330),S=function(e){var t=e.member,r=t.id,i=t.name,o=t.email,a=t.avatarUrl,l=t.role,d=t.publicUid,f=e.cellVariant,m=(0,p.L2)();return(0,n.jsx)(c.pj,{variant:f,className:"w-80",children:(0,n.jsxs)("div",{className:"inline-flex items-center",children:[(0,n.jsx)(w.C,{communityMemberId:r,name:i,publicUid:d,avatarURL:a,children:(0,n.jsx)(x.W,{name:i,src:a,size:"10"})}),(0,n.jsxs)("div",{className:"w-60 pl-3",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(u.Z.LabelSm,{truncate:!0,weight:"semibold",color:"text-selector-active",children:i}),(0,j.H)(null==m?void 0:m.data)&&(0,b.RN)(l)&&(0,n.jsx)(O.g,{label:(0,s.t)("spaces.form.edit.members.waitlist"),square:!0})]}),(0,n.jsx)("div",{className:"w-60 truncate",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-default",children:o})})]})]})})},k=r(678793),N=function(e){var t=e.cellVariant,r=e.member,i=e.onRoleChange,o=r.role,a=r.id;return(0,n.jsx)(c.pj,{variant:t,className:"w-32",children:(0,n.jsx)(k.D,{id:a,role:o,onRoleChange:i})})},P=function(e){var t,r,i,o=e.member,a=e.cellVariant,s=e.hideColumn,l=null==o||null==(t=o.currentSpaceMember)?void 0:t.community_member_paywall_content_granted;if(s)return null;var f=(null==l||null==(r=l.paywall)?void 0:r.name)||(null==l||null==(i=l.paywall)?void 0:i.display_name),m=!!f,p=(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(d.JO,{type:"20-payments",className:"text-selector-active !w-4",size:20}),(0,n.jsx)("div",{className:"w-36 truncate",children:(0,n.jsx)(u.Z.LabelSm,{color:"text-selector-active",children:f})})]});return(0,n.jsx)(c.pj,{variant:a,className:"",children:m?p:"-"})},C=function(e){var t=e.member,r=e.onRemove,i=e.onEdit,o=e.onRoleChange,a=e.cellVariant,s=void 0===a?"no-padding":a,l=e.tableVariant,u=e.columns,d=(0,m.kK)();return(0,n.jsxs)(c.SC,{className:"border-primary hover:bg-secondary group h-14 border-b",children:[(0,n.jsx)(S,{member:t,cellVariant:s}),(0,n.jsx)(N,{member:t,cellVariant:s,onRoleChange:o}),(0,n.jsx)(g,{member:t,cellVariant:s,hideColumn:!u.joinedAt||d}),(0,n.jsx)(P,{member:t,cellVariant:s,hideColumn:!u.paywall}),(0,n.jsx)(_,{member:t,cellVariant:s,hideColumn:!u.lastActive||d}),(0,n.jsx)(y,{member:t,cellVariant:s,onEdit:i,onRemove:r,tableVariant:l})]})},A=function(e){var t=e.columnsToRender,r=e.shouldShowHeader;return void 0!==r&&r?(0,n.jsx)(c.FE,{children:Object.keys(t).map(function(e){var r,i=t[e];return i&&(0,n.jsx)(c.dc,{className:"!px-0 ".concat(null!=(r=i.className)?r:""),children:(0,n.jsx)(u.Z.LabelXs,{leading:"leading-tight",color:"text-default",weight:"semibold",children:i.title.toUpperCase()})},i.key)})}):null},I=r(39905),T=function(e){var t=e.onAddMember;return(0,n.jsxs)("div",{className:"flex min-h-[600px] flex-col items-center pt-44",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(u.Z.TitleSm,{weight:"semibold",children:(0,s.t)("spaces.form.edit.members.no_members")})}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(u.Z.BodySm,{children:(0,s.t)("spaces.form.edit.members.there_are_no_members")})}),(0,n.jsx)(I.z,{type:"button",variant:"secondary",large:!0,onClick:t,children:(0,s.t)("spaces.form.edit.members.add_members")})]})},E=r(275271),L=function(e){var t=e.dataLength,r=e.searchTerm,n=e.members,i=e.shouldHideAddMemberButton,o=0===n.length&&!r,a=0===n.length&&r,l=(0,m.kK)(),c=n[0];return{isSpaceMembersEmpty:0===t,isResultEmpty:o,isResultEmptyWithSearch:a,shouldShowAddMember:!r&&!i,columnsToRender:(0,E.useMemo)(function(){var e=null==c?void 0:c.currentSpaceMember,t=(null==c?void 0:c.currentSpaceMember)&&!l,r=(null==c?void 0:c.lastActive)&&!l;return{member:{title:(0,s.t)("spaces.form.edit.members.columns.name"),key:"name",className:"w-80"},memberRole:{title:(0,s.t)("spaces.form.edit.members.columns.role"),key:"memberRole"},joinedAt:t?{title:(0,s.t)("spaces.form.edit.members.columns.joined"),key:"joinedAt"}:null,paywall:e?{title:(0,s.t)("spaces.form.edit.members.columns.paywall"),key:"paywall"}:null,lastActive:r?{title:(0,s.t)("spaces.form.edit.members.columns.last_active"),key:"lastActive"}:null,dropdown:{title:"",key:"dropdown",className:"w-12"}}},[c,l])}},D=function(e){var t,r,i=e.dataLength,o=e.members,d=e.onAdd,m=e.onEdit,p=e.onRemove,b=e.onRoleChange,h=e.searchTerm,y=void 0===h?"":h,v=e.shouldHideAddMemberButton,g=e.shouldShowHeader,_=e.cellVariant,x=void 0===_?"no-border":_,j=e.variant,w=void 0===j?"space-members":j,O=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["dataLength","members","onAdd","onEdit","onRemove","onRoleChange","searchTerm","shouldHideAddMemberButton","shouldShowHeader","cellVariant","variant"]),S=L({dataLength:i,members:o,searchTerm:y,shouldHideAddMemberButton:void 0!==v&&v}),k=S.isSpaceMembersEmpty,N=S.isResultEmpty,P=S.isResultEmptyWithSearch,I=S.shouldShowAddMember,E=S.columnsToRender;return k||N?(0,n.jsx)(T,{onAddMember:d}):P?(0,n.jsx)(u.Z.BodyMd,{children:(0,s.t)("spaces.form.edit.members.no_members_found_for_term",{member_search_term:y})}):(0,n.jsxs)(a.Z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({loader:(0,n.jsx)(l.m,{}),dataLength:i,style:{overflow:"initial"},scrollThreshold:.5},O),r=r={children:[I&&(0,n.jsx)(f,{onAdd:d}),(0,n.jsxs)(c.iA,{variant:"no-border",className:"w-full min-w-[600px]",tableClassName:"w-full table-fixed",children:[(0,n.jsx)(A,{columnsToRender:E,shouldShowHeader:void 0!==g&&g}),(0,n.jsx)(c.RM,{variant:"no-divider",children:o.map(function(e){return(0,n.jsx)(C,{cellVariant:x,member:e,onEdit:m,onRemove:p,onRoleChange:b,columns:E,tableVariant:w},e.id)})})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))};D.propTypes={dataLength:o().number.isRequired,members:o().arrayOf(o().shape({id:o().number,avatarUrl:o().string,name:o().string,email:o().string,role:o().string})).isRequired,onAdd:o().func,onEdit:o().func,onRemove:o().func,onRoleChange:o().func,searchTerm:o().string,shouldHideAddMemberButton:o().bool,variant:o().oneOf(["space-members","space-group-members"])}},824626:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(552676),i=function(){return(0,n.jsx)("div",{className:"border-primary my-1 border-t"})}},203743:function(e,t,r){"use strict";r.d(t,{X:()=>R});var n=r(552676),i=r(932699),o=r(739792),a=r(757105),s=r(117617),l=r(434519),c=r(441342),u=r(78456),d=r(60589),f=r(118340),m=r(571773),p=r(957363),b=r(381636),h=r(607142),y=r(971442),v=r(795004),g=r(944428),_=r(751169),x=function(e){var t=e.space,r=(0,g.u)(t.chat_room_uuid),s=r.chatParticipants,c=r.isLoading,u=r.refetchChatParticipants,d=r.hasNextPage,f=r.fetchNextPage,m=r.totalCount,p=(0,a.dd)(),h=t.chat_room_description;return(0,n.jsxs)(l.u_,{isOpen:p.visible,onClose:p.visible?p.hide:i.noop,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsxs)(l.u_.Header,{children:[(0,n.jsxs)(l.u_.Title,{size:"sm",children:[(0,o.t)("chat_space.details")," (",!c&&m,")"]}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:p.visible?p.hide:i.noop})})]}),(0,n.jsxs)(l.u_.Body,{className:"flex flex-col gap-4 !px-5 !py-2",children:[h&&(0,n.jsx)(b.Z.BodySm,{children:h}),c?(0,n.jsx)(_.a,{center:!0}):(0,n.jsx)(v.V,{spaceMembers:s,hasMoreSpaceMembers:d,space:t,refetchSpaceMembers:u,fetchNextPage:f})]})]})]})},j=a.gk.create(function(e){var t=e.space;return(0,n.jsx)(x,{space:t})}),w=r(824626),O=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.isAdmin,s=(0,d.Y_)(t),l=(0,d.J$)(t),c=(0,a.dd)(j),u=(0,f.$)({space:t}).mutateChatTranscript,v=(0,m.n)();return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return c.show({space:t})},children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(p.JO,{type:"16-info",size:16,className:"text-default"}),(0,n.jsx)(b.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,o.t)("chat_space.details")})]}),(0,n.jsx)(p.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}),(0,n.jsx)(w.Z,{})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.j,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(w.Z,{})]}),(0,n.jsx)(h.B,{space:t,isAdmin:i,onChatExport:s?function(){v.show({onConfirm:function(e){return u(e)}})}:void 0})]})},S=function(e){var t=e.space,r=e.isAdmin,i=e.setIsAddMemberOpen,o=(0,d.Y_)(t);return(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.j,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(w.Z,{})]}),(0,n.jsx)(h.B,{space:t,isAdmin:r})]})},k=r(63510),N=r(123122),P=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage,o=e.isAdmin,a=(0,d.Y_)(t),s=(0,d.J$)(t);return(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)(k.v,{space:t})}),(0,n.jsx)(w.Z,{}),a&&(0,n.jsx)(y.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:i}),!o&&s&&(0,d.P8)(t)&&(0,n.jsx)(N.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(w.Z,{}),(0,n.jsx)(h.B,{space:t,isAdmin:o})]})},C=r(621326),A=function(e){var t=e.space,r=e.isAdmin,i=e.setIsAddMemberOpen,o=(0,d.J$)(t);return(0,n.jsxs)(n.Fragment,{children:[o&&(0,d.JW)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.t,{space:t}),(0,n.jsx)(w.Z,{})]}),(0,d.Y_)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.j,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(w.Z,{})]}),!r&&o&&(0,d.P8)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.B,{space:t,onInviteMember:function(){return i(!0)}}),(0,n.jsx)(w.Z,{})]}),(0,n.jsx)(h.B,{space:t,isAdmin:r})]})},I=r(883486),T=r(386973),E=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage,o=e.isAdmin,a=(0,d.JW)(t),s=(0,d.Y_)(t),l=(0,d.J$)(t);return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(I.m,{space:t}),(0,n.jsx)(w.Z,{}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.J,{space:t}),(0,n.jsx)(w.Z,{})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:i}),(0,n.jsx)(w.Z,{})]}),!o&&l&&(0,d.P8)(t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,n.jsx)(w.Z,{})]}),(0,n.jsx)(h.B,{space:t,isAdmin:o})]})},L=function(e){var t=e.space,r=e.onClickAddCoverImage,i=e.setIsAddMemberOpen,o=(0,c.wh)().currentCommunityMember,a=(0,u.vb)(o);return t?(0,d.H3)(t)||(0,d.Ds)(t)?(0,n.jsx)(E,{space:t,setIsAddMemberOpen:i,onClickAddCoverImage:r,isAdmin:a}):(0,d.Ug)(t)?(0,n.jsx)(O,{space:t,setIsAddMemberOpen:i,isAdmin:a}):(0,d.V5)(t)?(0,n.jsx)(P,{space:t,setIsAddMemberOpen:i,onClickAddCoverImage:r,isAdmin:a}):(0,d.qy)(t)?(0,n.jsx)(A,{space:t,setIsAddMemberOpen:i,isAdmin:a}):(0,d.EG)(t)?(0,n.jsx)(S,{space:t,isAdmin:a,setIsAddMemberOpen:i}):null:null},D=function(e){var t=e.space,r=e.setIsAddMemberOpen,c=e.onClickAddCoverImage,u=(0,a.dd)();return!(0,s.kK)()&&u.visible&&u.hide(),(0,n.jsxs)(l.u_,{isOpen:u.visible,onClose:u.visible?u.hide:i.noop,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{size:"lg",children:[(0,n.jsxs)(l.u_.Header,{className:"!px-5 !py-4",children:[(0,n.jsx)(l.u_.Title,{size:"sm",children:(0,o.t)("space_settings")}),(0,n.jsx)(l.u_.HeaderActions,{children:(0,n.jsx)(l.u_.CloseButton,{onClick:u.visible?u.hide:i.noop})})]}),(0,n.jsx)(l.u_.Body,{className:"!px-0 !py-1",children:(0,n.jsx)(L,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:c})})]})]})},M=a.gk.create(function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.onClickAddCoverImage;return(0,n.jsx)(D,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:i})}),R=function(){return(0,a.dd)(M)}},420246:function(e,t,r){"use strict";r.d(t,{$:()=>b});var n=r(552676),i=r(903225),o=r(739792),a=r(359043),s=r(229956),l=r(117679),c=r(60589),u=r(380171),d=r(943544),f=r(210689),m=r(840905),p=r(964024),b=function(e){var t=e.space,r=(0,i.k6)(),b=(0,a.g)({spaces:t.slug}),h=b.members,y=b.isLoading,v=b.canSeeMembersDirectory,g=(0,s.u)().show,_=(0,p.m)(t),x=(0,l.I)({spaceId:t.id,enabled:!_}),j=x.count,w=x.isLoading;return _?null:w||y?(0,n.jsx)(m.gi,{variant:"members-avatar-row"}):(0,n.jsx)(u.T,{content:(0,o.t)("see_all_members"),disabled:!v,children:(0,n.jsxs)("button",{type:"button",disabled:!v,onClick:function(){if((0,c.Y_)(t))return g({spaceId:t.id,initialSection:(0,o.t)("customize_space.members")});v&&r.push("/members?filter[spaces]=".concat(t.slug))},className:"focus-visible:outline-secondary rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:[(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)(d.Lt.Header,{children:(0,o.t)("members")})}),(0,n.jsx)(f.n,{members:h,amountToShow:3,totalCount:j})]})})}},964024:function(e,t,r){"use strict";r.d(t,{m:()=>o});var n=r(441342),i=r(359043),o=function(e){var t=(0,i.g)({spaces:e.slug}).canSeeMembersAvatarRow,r=(0,n.T4)({spaceId:e.id}),o=r.data;return r.isLoading||!!(null==o?void 0:o.hide_members_count)||!t}},63510:function(e,t,r){"use strict";r.d(t,{v:()=>s});var n=r(552676),i=r(240507),o=r.n(i),a=r(420246),s=function(e){var t=e.space;return(0,n.jsx)(a.$,{space:t})};s.propTypes={space:o().object.isRequired}},861441:function(e,t,r){"use strict";r.d(t,{c:()=>a});var n=r(154763),i=r(60589),o=r(441342),a=function(e){var t=e.space,r=(0,o.wh)().currentCommunity,a=r.ios_app_enabled||r.has_branded_app,s=!(0,i.Ug)(t)||a,l=(0,n.N)({space:t});return{updateSpaceMemberNotificationPreferences:l.updateSpaceMemberNotificationPreferences,updateChatSpaceMemberNotificationPreferences:l.updateChatSpaceMemberNotificationPreferences,notificationState:l.notificationState,shouldShowNotificationsSection:!(0,i.qy)(t)&&(0,i.J$)(t)&&s}}},883486:function(e,t,r){"use strict";r.d(t,{m:()=>s});var n=r(552676),i=r(240507),o=r.n(i),a=r(420246),s=function(e){var t=e.space;return(0,n.jsx)(a.$,{space:t})};s.propTypes={space:o().object.isRequired}},49710:function(e,t,r){"use strict";r.d(t,{X:()=>v,p:()=>g});var n=r(552676),i=r(943544),o=r(903225),a=r(918594),s=r(530133),l=r(398321),c=r(203743),u=r(275271),d=r(639165),f=r.n(d),m=r(739792),p=r(547144),b=r(396354),h=["latest","new_activity","oldest","popular","likes","alphabetical"],y=function(e){var t=e.defaultSort,r=void 0===t?"latest":t,n=e.include,i=void 0===n?h:n,o=e.exclude,a=void 0===o?[]:o,s=h.includes(r)?r:i[0],l=(0,b.t)(),c=l.sort,d=void 0===c?s:c,y=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(l,["sort"]),v=(0,u.useMemo)(function(){var e=f()(i,a);return r=null!=r?r:e[0],e.map(function(e){var t,r;return{value:e,label:(0,m.t)("sorting_options.".concat(e)),pathTo:"?".concat((0,p.UK)((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},y),r=r={sort:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)))}})},[r,i,a,y,d]);return{sort:d,sortingOptions:v}},v=function(e){var t=e.defaultSort,r=e.include,o=e.exclude,a=e.shouldOpenToLeft,s=e.onChange,l=e.button,c=y({defaultSort:t,exclude:o,include:r}),u=c.sort,d=c.sortingOptions,f=u?String(u):void 0;return(0,n.jsx)(i.Lt,{direction:void 0!==a&&a?"bottom-start":"bottom-end",options:d,activeOptionValue:f,onChange:s,button:l})},g=function(e){var t=e.defaultSort,r=y({defaultSort:t,include:e.include,exclude:e.exclude}).sortingOptions,i=(0,s.v)().isMobileWebNewSpaceCustomizationUIEnabled,u=(0,c.X)(),d=new URLSearchParams((0,o.TH)().search).get("sort")||t;return i?(0,n.jsx)("div",{children:r.map(function(e){var t=e.value,r=e.label,i=e.pathTo;return(0,n.jsx)(a.OL,{className:"text-light block px-5 py-2 text-sm font-medium",to:i,onClick:u.hide,isActive:function(){return d===t},activeClassName:"!text-dark",children:r},t)})}):(0,n.jsx)(n.Fragment,{children:r.map(function(e){var t=e.value,r=e.label,i=e.pathTo;return(0,n.jsx)(l.F,{forceClose:!0,to:i,children:r},t)})})}},972171:function(e,t,r){"use strict";r.d(t,{y:()=>o});var n=r(552676),i=r(381636),o=function(e){var t=e.children,r=e.truncate;return(0,n.jsx)(i.Z.TitleSm,{as:"h1","data-testid":"space-title-name",weight:"semibold",truncate:void 0!==r&&r,children:t})}},794902:function(e,t,r){"use strict";r.d(t,{M:()=>h});var n=r(552676),i=r(619803),o=r.n(i),a=r(22319),s=r(441342),l=r(78456),c=r(280219),u=r(957363),d=r(151433),f=function(e){var t=e.space,r=e.className,i=(0,a.TC)().currentAppearance,f=(0,s.wh)().currentCommunityMember,m=(0,l.vb)(f),p=(0,d.$)({shouldShowLockIconForNonMembers:t.show_lock_icon_for_non_members&&!t.is_space_member,isPrivate:t.is_private,isAdmin:m});return(0,n.jsx)(c.S,{className:o()("title-emoji w-5",r),emoji:t.emoji,appearance:i,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url,shouldUseLockIcon:p,lockIcon:(0,n.jsx)(u.JO,{type:"lock",className:"text-dark"}),dataTestId:"title-emoji"})},m=r(381636),p=r(117679),b=r(972171),h=function(e){var t=e.space,r=e.shouldShowMembersCount,i=void 0!==r&&r,o=(0,p.I)({spaceId:t.id,enabled:i}),a=o.count,s=o.isLoading;return(0,n.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,n.jsx)(f,{className:"justify-center text-sm",space:t}),(0,n.jsxs)("div",{className:"flex truncate",children:[(0,n.jsx)(b.y,{truncate:!0,children:t.name}),i&&(0,n.jsx)("div",{className:"ml-1",children:(0,n.jsx)(m.Z.BodyLg,{weight:"semibold",tracking:"tracking-normal",children:!s&&"(".concat(a,")")})})]})]})}},123122:function(e,t,r){"use strict";r.d(t,{B:()=>m});var n=r(552676),i=r(932699),o=r(739792),a=r(441342),s=r(60589),l=r(530133),c=r(957363),u=r(943544),d=r(381636),f=r(581704),m=function(e){var t=e.space,r=e.onInviteMember,m=(0,a.wh)().isViewOnlyMasquerading,p=(0,l.v)().isMobileWebNewSpaceCustomizationUIEnabled,b=(0,s.H)(t)?(0,o.t)("customize_space.add_waitlist"):(0,o.t)("space_header.invite_member"),h=f.S.inviteMemberIcon;return p?(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:r,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(c.JO,{type:h,size:20,className:"text-default"}),(0,n.jsx)(d.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,o.t)("space_header.invite_member")})]}),(0,n.jsx)(c.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}):(0,n.jsx)(u.Lt.IconWithBadgeList,{options:[{value:(0,o.t)("space_header.invite_member"),label:b,onClick:m?i.noop:r,icon:h,iconSize:20}]})}},607142:function(e,t,r){"use strict";r.d(t,{B:()=>k});var n=r(552676),i=r(739792),o=r(871408),a=r(534085),s=r(824184),l=r(441342),c=function(){var e=(0,s.U)();return{space:(0,l.nT)().helpers.findBy({slug:e})}},u=r(757105),d=function(){var e=c().space,t=(0,u.dd)();return(0,n.jsx)(l.mE,{spaceId:null==e?void 0:e.id,children:(0,n.jsx)(a.k,{show:t.visible,space:e,onClose:t.hide})})},f=u.gk.create(function(){return(0,n.jsx)(d,{})}),m=function(){return(0,u.dd)(f)},p=r(60589),b=r(530133),h=r(957363),y=r(943544),v=r(381636),g=r(861441),_=r(932699),x=function(e){var t=e.onChatExport,r=(0,l.wh)().isViewOnlyMasquerading,o=(0,b.v)().isMobileWebNewSpaceCustomizationUIEnabled,a=(0,i.t)("space_header.chat_export");return o?(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:t,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(h.JO,{type:"20-download",size:20,className:"text-default"}),(0,n.jsx)(v.Z.LabelSm,{color:"text-light",weight:"medium",children:a})]}),(0,n.jsx)(h.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}):(0,n.jsx)(y.Lt.IconWithBadgeList,{options:[{value:a,label:a,onClick:r?_.noop:t,icon:"20-download",iconSize:20}]})},j=r(581704),w=function(){var e=(0,o.Y)(),t=c().space,r=j.S.deleteSpaceIcon;return(0,n.jsx)(y.Lt.ItemWithLink,{onClick:function(){return e.show({space:t,onSuccess:function(){window.location.href="/"}})},children:(0,n.jsxs)(y.Lt.IconContainer,{children:[(0,n.jsx)("span",{className:"size-5",children:(0,n.jsx)(h.JO,{type:r,className:"text-v2-danger",size:20})}),(0,n.jsx)(v.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("space_header.delete_space")})]})},(0,i.t)("space_header.delete_space"))},O=r(123122),S=function(){var e=m(),t=(0,l.wh)().isViewOnlyMasquerading,r=j.S.leaveSpaceIcon;return(0,n.jsx)(y.Lt.ItemWithLink,{onClick:t?_.noop:e.show,children:(0,n.jsxs)(y.Lt.IconContainer,{children:[(0,n.jsx)("span",{className:"size-5",children:(0,n.jsx)(h.JO,{type:r,className:"text-v2-danger",size:20})}),(0,n.jsx)(v.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,i.t)("space_header.leave_space")})]})},(0,i.t)("space_header.leave_space"))},k=function(e){var t,r=e.space,a=e.isAdmin,s=e.onChatExport,l=e.onInviteMember,c=(0,b.v)().isMobileWebNewSpaceCustomizationUIEnabled,u=(0,o.Y)(),d=m(),f=j.S.leaveSpaceIcon,_=j.S.deleteSpaceIcon,k=(0,p.EG)(r),N=(0,p.P8)(r)&&!!l,P=a&&!!s,C=!!(null==(t=r.policies)?void 0:t.can_leave_space),A=(0,g.c)({space:r}).shouldShowNotificationsSection,I=a||N||P||A&&!k;return c?(0,n.jsxs)(n.Fragment,{children:[P&&(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:s,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(h.JO,{type:"20-download",size:20,className:"text-default"}),(0,n.jsx)(v.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,i.t)("space_header.chat_export")})]}),(0,n.jsx)(h.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}),C&&(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return d.show()},children:[(0,n.jsx)(h.JO,{type:f,className:"text-v2-danger",size:20}),(0,n.jsx)(v.Z.LabelSm,{color:"text-v2-danger",children:(0,i.t)("space_header.leave_space")})]}),a&&(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return u.show({space:r,onSuccess:function(){window.location.href="/"}})},children:[(0,n.jsx)(h.JO,{type:_,className:"text-v2-danger",size:20}),(0,n.jsx)(v.Z.LabelSm,{color:"text-v2-danger",children:(0,i.t)("space_header.delete_space")})]})]}):(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsx)(y.Lt.Separator,{}),P&&(0,n.jsx)(x,{onChatExport:s}),N&&(0,n.jsx)(O.B,{space:r,onInviteMember:l}),C&&(0,n.jsx)(S,{}),a&&(0,n.jsx)(w,{})]})}},971442:function(e,t,r){"use strict";r.d(t,{j:()=>W});var n=r(552676),i=r(739792),o=r(229956),a=r(757105),s=r(275271),l=r(497202),c=r(825606),u=r(379522),d=r(39905),f=r(434519),m=r(44820),p=function(e){var t=e.isSubmitting,r=e.onClickCancel;return(0,n.jsxs)(f.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,n.jsx)(d.z,{type:"button",variant:"secondary",large:!0,onClick:void 0===r?function(){}:r,children:(0,i.t)("back")}),(0,n.jsx)(m._,{type:"submit",form:"bookmark-form",variant:"circle",large:!0,submitting:void 0!==t&&t,children:(0,i.t)("save")})]})};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=[{label:(0,i.t)("add_a_link"),value:"link",icon:"16-link",iconSize:16},{label:(0,i.t)("add_a_folder"),value:"folder",icon:"16-folder",iconSize:16}],v=function(e){var t=e.space,r=(0,l.dd)(),o=h((0,s.useState)("link"),2),a=o[0],m=o[1],b=h((0,s.useState)(!1),2),v=b[0],g=b[1];return(0,s.useEffect)(function(){r.visible||(m("link"),g(!1))},[r.visible]),(0,n.jsxs)(f.u_,{isOpen:r.visible,onClose:r.hide,children:[(0,n.jsx)(f.u_.Overlay,{}),(0,n.jsxs)(f.u_.Content,{children:[(0,n.jsxs)(f.u_.Header,{children:[(0,n.jsx)(f.u_.Title,{size:"md",children:(0,i.t)("add_space_links")}),(0,n.jsx)(f.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(f.u_.CloseButton,{onClick:r.hide})})]}),(0,n.jsx)(f.u_.Body,{children:v?(0,n.jsx)(c.X,{space:t,isEdit:!1,isFolder:"folder"===a,renderFooter:function(e){var t=e.isSubmitting;return(0,n.jsx)(p,{isSubmitting:t,onClickCancel:function(){return g(!1)}})},onAfterCreateOrUpdate:r.hide},a):(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(u.S,{name:"spaceLinkType",defaultChecked:a,options:y,size:"sm",onChange:function(e){m(e)},hasRadioCheckmarks:!0}),(0,n.jsxs)(f.u_.Footer,{className:"flex justify-end gap-2 !px-0",children:[(0,n.jsx)(d.z,{type:"button",variant:"secondary",large:!0,onClick:r.hide,children:(0,i.t)("cancel")}),(0,n.jsx)(d.z,{type:"button",variant:"circle",large:!0,onClick:function(){return g(!0)},children:(0,i.t)("next")})]})]})})]})]})},g=a.gk.create(function(e){var t=e.space;return(0,n.jsx)(v,{space:t})}),_=r(441342),x=r(530133),j=r(957363),w=r(943544),O=r(381636),S=r(824626),k=r(392042),N=r.n(k),P=r(78456),C=r(60589),A=r(117617),I=function(e){var t=e.space,r=null!=t?t:{},n=r.cover_image_url,o=r.cover_image_visible;return n||o?(0,i.t)("update_cover"):(0,i.t)("add_cover")},T=r(117679),E=r(663676),L=function(e){var t=e.space,r=(0,T.I)({spaceId:null==t?void 0:t.id}),n=r.count;return{customizeMembersBadge:""+(r.isLoading?"":(0,E.HA)(n))}},D=r(581704),M=(0,i.t)("customize_space.customize"),R=(0,i.t)("customize_space.options"),B=(0,i.t)("customize_space.paywalls.title"),z=(0,i.t)("customize_space.members"),F=(0,i.t)("customize_space.lessons"),U=(0,i.t)("customize_space.lock_screen"),Z=(0,i.t)("customize_space.set_welcome_banner"),G=(0,i.t)("customize_space.workflows"),q=(0,i.t)("add_space_links"),V=function(e){var t=e.space,r=e.onAddCoverClick,n=e.onInviteMemberClick,o=e.openCustomizeModal,a=e.openAddSpaceLinksModal,s=(0,_.wh)(),l=s.currentCommunitySettings,c=s.currentCommunityMember,u=!!(null==l?void 0:l.space_description_enabled),d=!!(null==l?void 0:l.upgrade_flows_for_workflows_spaces_enabled),f=(0,C.EG)(t),m=N()(r),p=N()(n),b=(0,C.V5)(t),h=(0,A.a7)(),y=I({space:t}),v=L({space:t}).customizeMembersBadge,g=D.S.coverImageIcon,x=D.S.customizeLessonsIcon,j=D.S.welcomeBannerIcon,w=D.S.customizeIcon,O=D.S.creditCardIcon,S=D.S.customizeLockScreenIcon,k=D.S.customizeMembersIcon,T=D.S.inviteMemberIcon,E=D.S.customizeOptionsIcon,V=D.S.addSpaceLinksIcon,W=[];if(m&&W.push({value:(0,i.t)("add_cover_image"),label:y,onClick:r,icon:g,iconSize:20}),(0,C.Ds)(t)||(0,C.qy)(t)||W.push({value:q,label:q,onClick:function(){return a()},icon:V,iconSize:20}),f&&W.push({value:F,label:F,onClick:function(){return o({initialSection:F})},icon:x,iconSize:20}),u&&b&&W.push({value:M,label:Z,onClick:function(){return o({initialSection:M,scrollToId:"space-welcome-banner"})},icon:j,iconSize:20}),(0,P.vb)(c)&&W.push({value:B,label:B,onClick:function(){return o({initialSection:B})},icon:O,iconSize:20}),W.push({value:M,label:M,onClick:function(){return o({initialSection:M})},icon:w,iconSize:20},{value:U,label:U,onClick:function(){return o({initialSection:U})},icon:S,iconSize:20},{value:z,label:z,badge:v,onClick:function(){return o({initialSection:z})},icon:k,iconSize:20}),p&&!h){var H=(0,C.H)(t)?(0,i.t)("customize_space.add_waitlist"):(0,i.t)("space_header.invite_member");W.push({value:(0,i.t)("space_header.invite_member"),label:H,onClick:n,icon:T,iconSize:20})}return W.push({value:R,label:R,onClick:function(){return o({initialSection:R})},icon:E,iconSize:20}),d&&W.push({value:G,label:G,onClick:function(){return o({initialSection:G})},icon:"lightning"}),W},W=function(e){var t=e.space,r=e.onInviteMember,s=e.onAddCoverImage,l=t.id,c=(0,o.u)().show,u=(0,_.L2)().refetch,d=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,f=(0,a.dd)(g),m=function(e){c({spaceId:l,refetch:function(){u()},initialSection:e.initialSection,scrollToId:e.scrollToId})},p=[{value:(0,i.t)("customize_space.access"),label:(0,i.t)("customize_space.access"),icon:"20-locker-open-v3",iconSize:20,badge:(0,i.t)("spaces.form.create.visibility_types.".concat(t.visibility)),badgeVariant:"plain",onClick:function(){return m({initialSection:(0,i.t)("customize_space.customize")})}}],b=V({space:t,onInviteMemberClick:r,onAddCoverClick:s,openCustomizeModal:m,openAddSpaceLinksModal:function(){f.show({space:t})}});return d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return m({initialSection:(0,i.t)("customize_space.customize")})},children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(j.JO,{type:"16-lock-unlocked",size:16,className:"text-default"}),(0,n.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,i.t)("customize_space.access")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(O.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,i.t)("spaces.form.create.visibility_types.".concat(t.visibility))}),(0,n.jsx)(j.JO,{type:"16-chevron-right",size:16,className:"text-default"})]})]}),(0,n.jsx)(S.Z,{}),b.map(function(e){return(0,n.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:e.onClick,children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[e.icon&&(0,n.jsx)(j.JO,{type:e.icon,size:20,className:"text-default"}),(0,n.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:e.label})]}),(0,n.jsx)(j.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.value)})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Lt.IconWithBadgeList,{options:p}),(0,n.jsx)(w.Lt.Separator,{}),(0,n.jsx)(w.Lt.Header,{children:(0,i.t)("space")}),(0,n.jsx)(w.Lt.IconWithBadgeList,{options:b})]})}},621326:function(e,t,r){"use strict";r.d(t,{t:()=>c});var n=r(552676),i=r(240507),o=r.n(i),a=r(739792),s=r(49710),l=r(943544),c=function(e){var t=e.space;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Lt.Header,{children:(0,a.t)("space_header.sort_order")}),(0,n.jsx)(s.p,{defaultSort:t.default_member_sort||"latest",showDescription:!1,include:["latest","oldest","alphabetical"]})]})};c.propTypes={space:o().object.isRequired}},386973:function(e,t,r){"use strict";r.d(t,{J:()=>c});var n=r(552676),i=r(240507),o=r.n(i),a=r(739792),s=r(49710),l=r(943544),c=function(e){var t=e.space;return(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Lt.Header,{children:(0,a.t)("space_header.sort_order")}),(0,n.jsx)(s.p,{defaultSort:(null==t?void 0:t.default_sort)||"latest",showDescription:!1})]})};c.propTypes={space:o().object.isRequired}},581704:function(e,t,r){"use strict";r.d(t,{S:()=>n});var n={coverImageIcon:"20-image-v3",customizeLessonsIcon:"20-doc-v3",welcomeBannerIcon:"20-welcome-banner-v3",customizeIcon:"20-customize-v3",creditCardIcon:"20-card-v3",customizeLockScreenIcon:"20-locker-closed-v3",customizeMembersIcon:"20-users-v3",inviteMemberIcon:"20-user-plus-v3",customizeOptionsIcon:"20-info-v3",leaveSpaceIcon:"20-sign-out-v3",deleteSpaceIcon:"20-bin-v3",addSpaceLinksIcon:"20-book-v3"}},154763:function(e,t,r){"use strict";r.d(t,{N:()=>p});var n=r(275271),i=r(131906),o=r(93199),a=r(547144);function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var l="space-members",c=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(function(e){var t=e.spaceMember,r=e.updates;return(0,o.aU)(a.av.spaceMembers.update({spaceId:t.space_id,memberId:t.community_member_id}),{space_member:r})},{onMutate:function(t){var r,n=t.spaceMember;return(r=function(){var t,r;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=[l,n.community_member_id],[4,e.cancelQueries({queryKey:t})];case 1:return i.sent(),r=e.getQueryData(t),e.setQueryData(t,n),[2,{previousData:r,spaceMember:n}]}})},function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},onSuccess:function(t){e.setQueryData([l,t.community_member_id],t)}})},u=function(e){var t=e.spaceId,r=e.memberId;return(0,i.useQuery)({queryKey:[l,r],queryFn:function(){return(0,o.UT)(a.av.spaceMembers.show({spaceId:t,memberId:r}))}})},d=r(441342);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m="never",p=function(e){var t,r=e.space,i=c().mutate,o=(t=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],l=(0,d.wh)().currentCommunityMember,p=u({spaceId:r.id,memberId:null==l?void 0:l.id}),b=p.data,h=p.isLoading,y=(0,n.useCallback)(function(e){return"all"===e},[]);(0,n.useEffect)(function(){b&&s({notification_type:y(null==b?void 0:b.notification_type),in_app_notification_setting:y(null==b?void 0:b.in_app_notification_setting),mobile_notification_setting:y(null==b?void 0:b.mobile_notification_setting),all:null==b?void 0:b.all_notifications_enabled,mentions:null==b?void 0:b.mention_notifications_enabled,never:null==b?void 0:b.notifications_off})},[b,h,y]);var v=(0,n.useCallback)(function(e){var t,r,n=e.fieldKey;return i({spaceMember:b,updates:(t={},r=e.shouldEnable?"all":m,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)})},[b,h]),g=(0,n.useCallback)(function(e){return i({spaceMember:b,updates:_(e.fieldKey)})},[b,i]),_=function(e){return"all"==e?{mobile_notification_setting:"all",mention_mobile_notification_setting:"all",mention_in_app_notification_setting:"all"}:"mentions"==e?{mobile_notification_setting:m,mention_mobile_notification_setting:"all",mention_in_app_notification_setting:"all"}:"never"==e?{mobile_notification_setting:m,mention_mobile_notification_setting:m,mention_in_app_notification_setting:m}:void 0};return{updateSpaceMemberNotificationPreferences:v,updateChatSpaceMemberNotificationPreferences:g,isNotificationTypeEnabled:y,notificationState:a,isLoading:h}}},534085:function(e,t,r){"use strict";r.d(t,{k:()=>v});var n=r(552676),i=r(131906),o=r(739792),a=r(88454),s=r(93199),l=r(547144),c=r(499385),u=r(900795),d=r(441342),f=r(60589),m=r(340404),p=r(495727),b=r(60878);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var y="spaces.leave",v=function(e){var t=e.show,r=e.onClose,v=e.space,g=(0,i.useQueryClient)(),_=(0,m.C)().goToCommunityRootPath,x=(0,d.wh)().currentCommunityMember,j=(0,d.e2)().actions.refresh,w=(0,d.nT)().actions.refresh,O=(0,d.T4)({spaceId:null==v?void 0:v.id}),S=O.space,k=O.refetch,N=(0,b.pm)(),P=N.error,C=N.success,A=(0,c.m)(null==S?void 0:S.chat_room_uuid).refetchChatRoom,I=function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return j(),[4,w()];case 1:if(e.sent(),(0,f.$n)(v))return[3,3];return[4,k()];case 2:e.sent(),e.label=3;case 3:return(0,f.Ug)(v)&&A(),g.invalidateQueries((0,a.spacesWithDetailsQueryKey)(null==v?void 0:v.space_group_id)),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})})()},T=(0,i.useMutation)(function(){return(0,s.pC)(l.av.spaceMembers.leaveSpace({spaceId:null==v?void 0:v.id,memberId:null==x?void 0:x.id}))},{onSuccess:function(){C((0,o.t)("leave_space_success",{name:null==v?void 0:v.name}),{duration:"short",shouldUseProgress:!1}),I(),r(),(0,f.$n)(v)&&_()},onError:function(){P((0,o.t)("leave_space_error"))}}),E=T.mutate,L=T.isLoading;return(0,n.jsxs)(p.V,{title:(0,o.t)([y,"title"]),confirmUserPrompt:(0,o.t)([y,"confirm_prompt"]),isOpen:t,onClose:r,onCancel:r,onConfirm:E,confirmVariant:"danger",isDisabled:L,confirmText:L?(0,o.t)("leaving"):(0,o.t)("confirm"),children:[(0,n.jsx)(u.w,{content:(0,o.t)([y,"description"],{space_name:(null==v?void 0:v.name)||""})})," ",!(0,f.Y_)(v)&&((0,f.$n)(v)||(0,f.WB)(v))&&(0,o.t)([y,"private_space"])]})}},878931:function(e,t,r){"use strict";r.d(t,{R:()=>d});var n=r(552676),i=r(240507),o=r.n(i),a=r(739792),s=r(381636),l=r(957363),c=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,a.t)("please_check_your_email")}),(0,n.jsx)(s.Z.BodyMd,{children:(0,a.t)("please_check_your_email_description")})]})},u=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,a.t)("this_space_is_private")})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(s.Z.BodyMd,{children:(0,a.t)("this_space_is_private_description")})})]})},d=function(e){var t=e.isInvited;return(0,n.jsxs)("div",{className:"border-primary bg-primary h-full rounded-none border-0 px-10 py-20 text-center sm:h-auto sm:rounded-lg sm:border","data-testid":"locked-space",children:[(0,n.jsx)(l.JO,{type:"lock",className:"mb-5 !w-14"}),t?(0,n.jsx)(c,{}):(0,n.jsx)(u,{})]})};d.propTypes={isInvited:o().bool}},400752:function(e,t,r){"use strict";r.d(t,{d:()=>l});var n=r(552676),i=r(240507),o=r.n(i),a=r(619803),s=r.n(a),l=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:s()("react-page-space-show size-full",r),children:t})};l.propTypes={children:o().node,className:o().string}},658937:function(e,t,r){"use strict";r.d(t,{K:()=>tr});var n=r(552676),i=r(275271),o=r(703843),a=r(261193),s=r(441342),l=r(93199),c=r(442959),u=r(60589),d=r(226801),f=r(603158),m=r(117617),p=r(619803),b=r.n(p),h=r(739792),y=r(957363),v=function(e){return e.type.toLowerCase().includes("touch")},g=r(932699),_=r(355388),x=r(78456),j=r(757105),w=r(131906),O=r(779774),S=r(434519),k=r(547144),N=r(39905),P=r(767900),C=O.Ry().shape({name:O.Z_().required(h.ZP.t("link_name_required")),url:O.Vo(function(e){return e.startsWith("mailto:")?O.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,h.ZP.t("link_url_invalid")).required(h.ZP.t("link_url_required")):O.Z_().url(h.ZP.t("link_url_invalid")).required(h.ZP.t("link_url_required"))})}),A=function(e){var t=e.isEdit,r=e.link,i=(0,s.wh)().refetch,o=E(),a=function(){i(),o.hide()},c=(0,w.useMutation)(function(e){return(0,l.Cu)(k.av.communities.communityLinks.create(),e)},{onSuccess:a}),u=c.mutate,d=c.isLoading,f=(0,w.useMutation)(function(e){return(0,l.aU)(k.av.communities.communityLinks.update({communityLinkId:r.id}),e)},{onSuccess:a}),m=f.mutate,p=f.isLoading;return(0,n.jsxs)(P.l,{onSubmit:function(e){t?m(e):u(e)},validationSchema:C,defaultValues:t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r):{name:"",url:""},children:[(0,n.jsxs)(S.u_.Body,{children:[(0,n.jsx)(P.l.Item,{name:"name",variant:"extra-bottom-margin",label:h.ZP.t("link_name"),description:h.ZP.t("link_name_description"),hideBorder:!0,children:(0,n.jsx)(P.l.Input,{})}),(0,n.jsx)(P.l.Item,{variant:"extra-bottom-margin",name:"url",label:h.ZP.t("link_url"),description:h.ZP.t("link_url_description"),hideBorder:!0,children:(0,n.jsx)(P.l.Input,{})})]}),(0,n.jsx)(S.u_.Footer,{children:t?(0,n.jsx)(N.z,{full:!0,disabled:p,type:"submit",variant:"primary",children:p?h.ZP.t("link_updating"):h.ZP.t("link_update")}):(0,n.jsx)(N.z,{full:!0,disabled:d,type:"submit",variant:"primary",children:d?h.ZP.t("link_creating"):h.ZP.t("link_create")})})]})},I=function(e){var t=e.isEdit,r=e.link,i=(0,j.dd)();return(0,n.jsxs)(S.u_,{title:(0,h.t)("add_link"),isOpen:i.visible,onClose:i.hide,children:[(0,n.jsx)(S.u_.Overlay,{}),(0,n.jsxs)(S.u_.Content,{children:[(0,n.jsxs)(S.u_.Header,{children:[(0,n.jsx)(S.u_.Title,{className:"text-center",size:"md",children:(0,h.t)("add_link")}),(0,n.jsx)(S.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(S.u_.CloseButton,{onClick:i.hide})})]}),(0,n.jsx)(A,{isEdit:void 0!==t&&t,link:r})]})]})},T=j.gk.create(function(e){var t=e.isEdit,r=e.link;return(0,n.jsx)(I,{isEdit:t,link:r})}),E=function(){return(0,j.dd)(T)},L=r(260622),D=function(){var e=E();return(0,n.jsx)(L.T,{children:(0,n.jsxs)("button",{type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-xs-plus h-8.5 flex w-full items-center rounded-lg px-4 font-medium transition-colors duration-200",onClick:function(){return e.show()},children:[(0,n.jsx)(y.JO,{type:"16-add-new",size:16}),(0,n.jsx)("span",{className:"ml-2",children:(0,h.t)("add_link")})]})})},M=r(943544),R=r(624804),B=r(963549),z=function(e){var t=e.isOpen,r=e.onClose,i=e.link,o=(0,s.wh)().refetch,a=(0,w.useMutation)(function(e){return(0,l.pC)(k.av.communities.communityLinks.delete({communityLinkId:i.id}),e)},{onSuccess:function(){o(),r()}}),c=a.mutate,u=a.isLoading;return(0,n.jsx)(B.c,{isOpen:t,title:(0,h.t)("delete_link"),onClose:r,onCancel:r,onConfirm:function(){return c(void 0)},cancelText:(0,h.t)("cancel"),confirmText:u?(0,h.t)("deleting"):(0,h.t)("delete"),disabled:u,confirmVariant:"danger",children:(0,h.t)("delete_link_confirmation",{name:i.name})})};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=(0,_.W8)(function(e){var t=e.link,r=e.isAdmin,i=U((0,R.k)(!1),2),o=i[0],a=i[1],s=U((0,R.k)(!1),2),l=s[0],c=s[1],u=(0,m.en)(),d=E();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",draggable:"false",title:t.name,className:"text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar active:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover text-xs-plus h-8.5 group !m-0 flex w-full items-center gap-2 rounded-lg px-4 font-medium transition-colors duration-200",children:[(0,n.jsx)("span",{className:"flex !h-5 !w-5 items-center justify-center",children:(0,n.jsx)(y.JO,{type:"16-external-link",className:"!h-4 !w-4",size:16})}),(0,n.jsx)("h4",{className:"text-xs-plus flex-1 truncate font-medium text-current",children:t.name}),(0,n.jsx)("button",{type:"button",className:b()("flex gap-0.5",{"hidden group-hover:flex":u&&l}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":(0,h.t)("community_sidebar.view_sidebar_link_options"),children:r&&(0,n.jsxs)(M.Lt,{buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 transition-colors",button:(0,n.jsx)(y.JO,{type:"16-menu-dots-horizontal",size:16}),onToggle:c,appendTo:document.body,children:[(0,n.jsx)(M.Lt.ItemWithLink,{onClick:function(){d.show({isEdit:!0,link:t})},children:(0,h.t)("edit")}),(0,n.jsx)(M.Lt.ItemWithLink,{onClick:a,children:(0,h.t)("delete")})]})})]},t.url),(0,n.jsx)(z,{link:t,isOpen:o,onClose:a})]})}),G=(0,_.JN)(function(e){var t=e.links,r=(0,s.wh)().currentCommunityMember,i=(0,x.vb)(r),o=(0,m.a7)(),a=!i||!o;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[t.map(function(e,t){return(0,n.jsx)(Z,{index:t,disabled:a,isAdmin:i,link:e},(0,g.uniqueId)(String(t)))}),i&&(0,n.jsx)(D,{})]})});function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||W(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}var H=function(){var e=(0,s.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,n=V((0,R.k)(!0),2),o=n[0],a=n[1],c=V((0,i.useState)((null==t?void 0:t.links)||[]),2),u=c[0],d=c[1],f=(0,x.vb)(r),m=(0,w.useMutation)(function(e){var t=e.links_order_array;return(0,l.aU)(k.av.communities.communityLinks.reorder(),{links_order_array:t})}).mutate;(0,i.useEffect)(function(){var e=(null==t?void 0:t.links)||[];if((null==e?void 0:e.length)!==u.length)return void d((null==t?void 0:t.links)||[]);(e.some(function(e){return e.name!==u.find(function(t){return t.id===e.id}).name})||e.some(function(e){return e.url!==u.find(function(t){return t.id===e.id}).url}))&&d((null==t?void 0:t.links)||[])},[null==t?void 0:t.links,u]);var p=(null==t?void 0:t.links)||[];return{canSeeLinks:f||p.length>0,shouldShowLinks:o,toggleLinks:a,orderedList:u,onSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=function(e){if(Array.isArray(e))return q(e)}(t=(0,_.Rp)(u,r,n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||W(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i.map(function(e){return e.id.toString()});d(i),m({links_order_array:o})}}},Q=function(){var e=H(),t=e.canSeeLinks,r=e.shouldShowLinks,i=e.toggleLinks,o=e.orderedList,a=e.onSortEnd,s=(0,m.en)();return t?(0,n.jsxs)("div",{id:"links-section",className:"mb-8 mt-6 flex flex-col gap-1 px-3 lg:px-6",children:[(0,n.jsxs)("button",{type:"button",className:"text-c-sidebar hover:bg-c-sidebar-hover focus-visible:bg-c-sidebar-hover group flex w-full items-center space-x-px rounded-lg px-4 py-1.5 text-sm font-semibold transition-colors duration-200",onClick:i,children:[(0,n.jsx)("span",{children:(0,h.t)("links")}),(0,n.jsx)("div",{className:b()("flex rounded py-0.5 transition-transform",{"hidden group-hover:flex":s,"rotate-0":!r,"rotate-90":r}),"aria-label":r?(0,h.t)("community_sidebar.expand_group",{group_name:"links"}):(0,h.t)("community_sidebar.collapse_group",{group_name:"links"}),children:(0,n.jsx)(y.JO,{type:"cheveron-right",size:16})})]}),r&&(0,n.jsx)(G,{links:o,distance:5,lockAxis:"y",onSortEnd:a,shouldCancelStart:function(e){return v(e)}})]}):null},K=r(486372),J=r(523628),$=r(879414),X=function(e){var t,r,i=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsx)("button",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex cursor-pointer items-center justify-start rounded-md px-2 py-1.5 text-sm"},o),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},Y=function(e){var t,r;return(0,n.jsxs)(X,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:[(0,n.jsx)(y.JO,{size:16,type:"16-add-new"}),(0,n.jsx)("span",{"data-testid":"add-space",className:"mx-2",children:(0,h.t)("add_space")})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ee=function(e){var t=e.spaceGroupId,r=(0,K.G)();return(0,n.jsx)(Y,{onClick:function(){r.show({spaceGroupId:t})}})},et=r(903225);function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var en=function(e){var t,r,i=er({},function(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}(e));return(0,n.jsxs)(X,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),r=r={children:[(0,n.jsx)(y.JO,{size:16,type:"16-add-new"}),(0,n.jsx)("span",{className:"mx-2",children:(0,h.t)("join_a_space")})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},ei=function(e){var t=e.spaceGroupSlug,r=(0,et.k6)();return(0,n.jsx)(en,{onClick:function(){r.push("/s/".concat(t))}})},eo=function(e){var t=e.spaceGroup;return(0,c.yG)({spaceGroup:t})?(0,n.jsx)(ee,{spaceGroupId:t.id}):t.hide_non_member_spaces_from_sidebar?(0,n.jsx)(ei,{spaceGroupSlug:t.slug}):null},ea=r(218059),es=r(760155),el=(0,_.W8)(function(e){var t=e.space,r=(0,u.fO)()(t),i=(0,ea.h4)().spaces.find(function(e){return e.id===t.id});return(0,n.jsx)(es.z,{space:t,buttonLink:r,spaceNotificationDetail:i})}),ec=r(245238),eu=(0,_.JN)(function(e){var t=e.spaceGroup,r=e.listId,i=(0,s.wh)().currentCommunityMember,o=t.spaces,a=o.length>0,l=(0,m.a7)(),c=!(0,x.vb)(i)||!l;return(0,n.jsx)(ec.I,{id:r,children:a?o.map(function(e,t){return(0,n.jsx)(el,{index:t,space:e,disabled:c},e.id)}):(0,n.jsx)(eo,{spaceGroup:t})})});eu.displayName="SpaceList";var ed=r(373029);function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var em=(0,_.W8)(function(e){var t,r=e.spaceGroup,i=e.onSpaceSortEnd,o=e.position,a=e.spaceGroupDragProperties,u=(0,s.wh)().currentCommunityMember,d=(t=(0,R.k)(r.collapsed),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ef(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ef(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1],p=(0,J.a)(),b=(0,K.G)(),h=(0,$.I)().toggleSpaceGroupDrawer,y=(0,w.useMutation)(function(){return(0,l.Cu)(k.Ts.toggleVisibility({spaceGroupId:String(r.id)}))}).mutate,g=(0,x.vb)(u),_=(0,c.wh)({spaceGroup:r}),j=r.slug,O="".concat(r.slug,"-list");return(0,n.jsx)(ed.I,{id:j,listId:O,position:o,isCollapsed:o===(null==a?void 0:a.index)&&null!=a&&!!a.isDragging||f,isDragging:null==a?void 0:a.isDragging,canManage:_,onCollapseToggle:function(){m(),y()},spaceGroup:r,onEditSpaceGroupClick:function(){return p.show({spaceGroup:r,tab:"Details"})},onCreateSpaceClick:function(){return b.show({spaceGroupId:r.id})},onCreateSpaceGroupClick:h,isAdmin:g,onAddMembersClick:function(){return p.show({spaceGroup:r,tab:"Members"})},children:(0,n.jsx)(eu,{listId:O,distance:10,lockAxis:"y",shouldCancelStart:function(e){return v(e)},onSortEnd:function(e){return i({oldIndex:e.oldIndex,newIndex:e.newIndex,spaceGroup:r})},spaceGroup:r})})}),ep=r(662670),eb=(0,_.JN)(function(e){var t=e.spaceGroupWithSpaces,r=e.onSpaceSortEnd,i=e.spaceGroupDragProperties,o=(0,s.wh)().currentCommunityMember,a=(0,x.vb)(o),l=(0,m.a7)(),c=!a||!l;return(0,n.jsx)(ep.E,{children:t.map(function(e,t){return(0,n.jsx)(em,{index:t,disabled:c,position:t,spaceGroup:e,spaceGroupDragProperties:i,onSpaceSortEnd:r},e.id)})})}),eh=r(261457),ey=r(979369),ev=r(925032),eg=r(786976),e_=r(549882),ex=r(764208),ej=r(598694),ew=r(532701),eO=r(412845),eS=r(158361),ek=r(776017),eN=r(186463),eP=r(119323),eC=r(859178),eA=r(498977),eI=function(e){var t=e.badgeText,r=e.dataTestId,i=e.iconName,o=e.isActive,a=e.label,s=e.onClick,l=e.rightSideContent,c=e.isGray,u=e.shouldBold,d=void 0!==u&&u,f=e.ariaLabel,m=(0,eC.i)().getActiveInactiveClasses,p=!(0,g.isUndefined)(t)&&Number(t)>0&&!l;return(0,n.jsxs)("button",{type:"button","data-testid":r,onClick:s,className:b()("my-px flex w-full items-center px-2 py-1.5 text-sm",m(void 0!==o&&o)),"aria-labelledby":a,children:[(0,n.jsx)(y.JO,{type:i,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1 text-left",children:(0,n.jsx)("h3",{className:b()("max-w-full truncate text-sm text-current",{"font-normal":!d,"font-bold":d}),children:a})}),p&&(0,n.jsx)(eA.l,{ariaLabel:f,isGray:void 0!==c&&c,children:t}),!t&&l&&l]})},eT=function(e){var t=e.allDMsBadgeText,r=e.disabled,i=e.isMessagingEnabled,o=e.notificationBadgeText,a=e.onNotificationClick,s=e.resetNewNotificationsCount,l=e.shouldShowChatThreadsTab,c=e.unreadThreadsCount,u=e.connectBadgeText,d=(0,et.k6)(),f=d.location.pathname,p=(0,m.Fs)(),b=(0,m.j)(),y=(0,m.HE)(),v=(0,eP.y)(),_=f.includes((0,k.yg)()),x=f.includes((0,k.Ng)()),j=f.includes((0,k.Rj)()),w=f.includes((0,k.Dl)()),O=f.includes((0,k.AM)());return(0,n.jsxs)(n.Fragment,{children:[!b&&(y?(0,n.jsx)(eI,{dataTestId:"notifications-menu",label:(0,h.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:o,ariaLabel:(0,h.t)("community_sidebar.unread_notifications",{count:Number(o)}),onClick:function(){null==s||s(),d.push((0,k.aK)())},isActive:j}):(0,n.jsx)(eN.i9,{button:(0,n.jsx)(eI,{dataTestId:"notifications-menu",label:(0,h.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:o,ariaLabel:(0,h.t)("community_sidebar.unread_notifications",{count:Number(o)}),onClick:function(){p&&(0,g.isFunction)(a)&&!r&&a()},isActive:j}),onOpen:s,disabled:r||!(0,g.isFunction)(a),children:(0,n.jsx)("div",{className:"flex size-full flex-col","data-testid":"notifications-drawer",children:(0,n.jsx)(eS.u,{})})})),i&&!b&&(0,n.jsx)(eI,{dataTestId:"chat-menu",label:(0,h.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:t,ariaLabel:(0,h.t)("community_sidebar.unread_messages",{count:Number(t)}),onClick:function(){return d.push((0,k.co)({url:(0,k.yg)()}))},isActive:_}),l&&!b&&(0,n.jsx)(eI,{dataTestId:"chat-threads-menu",label:(0,h.t)("chat_threads"),iconName:"16-chat-threads",onClick:function(){return d.push((0,k.Ng)())},isActive:x,badgeText:String(c),ariaLabel:(0,h.t)("community_sidebar.unread_messages",{count:Number(c)})}),v&&!b&&(0,n.jsx)(eI,{dataTestId:"connections-menu",label:(0,h.t)("header_v3.connect.title"),iconName:"20-connections",onClick:function(){return d.push((0,k.Dl)())},isActive:w,badgeText:u,ariaLabel:(0,h.t)("community_sidebar.new_connections",{count:Number(u)})}),p&&(0,n.jsx)(eN.i9,{button:(0,n.jsx)(eI,{dataTestId:"bookmarks-menu",label:(0,h.t)("header_v3.bookmarks"),iconName:"16-bookmark",onClick:function(){return d.push((0,k.AM)())},isActive:O}),disabled:r,children:(0,n.jsx)(ek.BookmarksList,{})})]})},eE=function(e){var t=e.dataTestId,r=e.disabled,i=void 0!==r&&r,o=e.iconName,a=e.label,s=e.linkTo,l=e.show;return void 0===l||l?(0,n.jsxs)("a",{"data-testid":t,href:s,className:"text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex w-full cursor-pointer items-center rounded-md bg-transparent px-2 py-1.5 text-sm",onClick:function(e){i&&e.preventDefault()},title:a,children:[(0,n.jsx)(y.JO,{type:o,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1",children:(0,n.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:a})})]}):null},eL=r(918594),eD=function(e){var t=e.badgeText,r=e.isGrayBadge,i=e.show,o=e.dataTestId,a=e.iconName,l=e.label,c=e.linkTo,u=e.disabled,d=void 0!==u&&u,f=e.isActive,m=void 0!==f&&f,p=(0,eC.i)().getActiveInactiveClasses,h=(0,s.wh)(),v=h.currentCommunity,g=h.currentCommunityMember;return void 0===i||i?(0,n.jsxs)(eL.OL,{"data-testid":o,to:c,className:function(e){return b()("my-px flex w-full cursor-pointer items-center px-2 py-1.5 text-sm",p(e||m))},onClick:function(e){if(d)return void e.preventDefault();!g&&(null==v?void 0:v.is_private)&&(e.preventDefault(),window.location.assign(c))},title:l,children:[(0,n.jsx)(y.JO,{type:a,size:16,"aria-hidden":!0}),(0,n.jsx)("div",{className:"ml-2 flex-1",children:(0,n.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:l})}),t&&(0,n.jsx)(eA.l,{isGray:void 0!==r&&r,children:t})]}):null},eM=function(e){var t=e.link,r=e.disabled,i=e.isHomePageEnabled,o=e.shouldShowActiveHomeLink,a=e.shouldShowMemberDirectory,s=e.shouldShowAllEventsPage,l=e.shouldShowCoursesDirectory,c=e.shouldShowLeaderboard;return"home"===t.kind?(0,n.jsx)(eD,{label:(0,h.t)("feed"),linkTo:"/feed",iconName:"home-v2",disabled:r,isActive:o,show:i}):"members"===t.kind?(0,n.jsx)(eD,{label:t.label||(0,h.t)("members_directory.menu.title"),linkTo:(0,e_.UI)(),iconName:"members-v2",disabled:r,show:a}):"events"===t.kind?(0,n.jsx)(eD,{label:t.label||(0,h.t)("events.title"),linkTo:"/events",iconName:"16-calendar",disabled:r,show:s}):"courses"===t.kind?(0,n.jsx)(eD,{label:t.label||(0,h.t)("courses.directory.title"),linkTo:"/courses",iconName:"16-book",disabled:r,isGrayBadge:!0,show:l}):"leaderboard"===t.kind?(0,n.jsx)(eD,{label:t.label||(0,h.t)("leaderboard.title"),linkTo:"/leaderboard?period=7_days",iconName:"16-analytics",disabled:r,isGrayBadge:!0,show:c}):"custom"===t.kind?(0,n.jsx)(eE,{disabled:r,iconName:"16-site-link",label:t.label,linkTo:t.linkTo,show:!t.isDisabled}):null},eR=function(e){var t=e.allDMsBadgeText,r=e.disabled,i=void 0!==r&&r,o=e.hasCurrentCommunityMember,a=e.isHomePageEnabled,l=void 0!==a&&a,c=e.isMessagingEnabled,u=e.isOnboardingActive,d=e.notificationBadgeText,f=e.onGettingStartedClick,p=e.onGettingStartedClose,b=e.onNotificationClick,v=e.onSearchClick,_=e.resetNewNotificationsCount,x=e.shouldShowActiveHomeLink,j=void 0!==x&&x,w=e.shouldShowAllEventsPage,O=void 0!==w&&w,S=e.shouldShowChatThreadsTab,k=e.shouldShowCoursesDirectory,N=void 0!==k&&k,P=e.shouldShowLeaderboard,C=void 0!==P&&P,A=e.shouldShowMemberDirectory,I=void 0!==A&&A,T=e.shouldShowOnboarding,E=e.unreadThreadsCount,L=e.links,D=e.connectBadgeText,M=(0,m.j)(),R=(0,s.wh)(),B=R.currentCommunity,z=!!(!R.currentCommunityMember&&(null==B?void 0:B.is_private));return(0,n.jsxs)("div",{className:"mt-2.5 px-3",children:[!M&&!z&&(0,n.jsx)(eI,{label:(0,h.t)("search_item"),onClick:function(){return(0,g.isFunction)(v)&&v()},iconName:"16-search"}),void 0!==T&&T&&(0,n.jsx)(eI,{label:(0,h.t)("getting_started"),iconName:"lightning",isActive:void 0!==u&&u,onClick:function(){(0,g.isFunction)(f)&&!i&&f()},rightSideContent:(0,n.jsx)("button",{type:"button",className:"flex size-5 rounded py-0.5 transition-colors hover:bg-black/10 focus:bg-black/10",onClick:function(){(0,g.isFunction)(p)&&!i&&p()},"aria-label":(0,h.t)("close"),children:(0,n.jsx)(y.JO,{type:"16-close",size:16})})}),void 0!==o&&o&&(0,n.jsx)(eT,{notificationBadgeText:void 0===d?"":d,onNotificationClick:b,disabled:i,resetNewNotificationsCount:_,allDMsBadgeText:void 0===t?"":t,isMessagingEnabled:void 0!==c&&c,unreadThreadsCount:E,shouldShowChatThreadsTab:void 0!==S&&S,connectBadgeText:void 0===D?"":D}),L.map(function(e){return(0,n.jsx)(eM,{link:e,disabled:i,isHomePageEnabled:l,shouldShowActiveHomeLink:j,shouldShowMemberDirectory:I,shouldShowAllEventsPage:O,shouldShowCoursesDirectory:N,shouldShowLeaderboard:C},e.linkTo)})]})},eB=r(44994),ez=r(231258),eF=function(){var e,t,r=(0,et.k6)(),i=(0,eO.d)(),o=i.links,a=i.adminVisiblePlatformLinks,s=i.memberVisiblePlatformLinks,l=(0,$.I)(),c=l.shouldShowOnboarding,u=l.isOnboardingActive,d=l.hideOnboardingConfirmationModal,f=l.currentCommunity,m=l.currentCommunitySettings,p=l.currentCommunityMember,b=l.showSpotlightSearch,h=l.shouldShowAllEventsPage,y=(0,eB.R)(),v=y.newNotificationCount,g=y.toggleNotificationDrawer,_=y.resetNewNotificationsCount,j=(0,ex.r)().unreadThreadsCount,w=(0,ej.K)().unreadChatCount,O=(0,eg.c8)().data,S=(0,x.vb)(p),k=(0,ew.gq)().shouldShowMessagingRoutes,N=(null==p||null==(e=p.policies)?void 0:e.can_access_threads_tab)||j>0,P=S?a:s,C=function(e){return P.some(function(t){return t.kind===e})},A=(0,x.VP)(p,m)&&C("members"),I=(null==f||null==(t=f.policies)?void 0:t.can_view_courses_directory)&&C("courses"),T=h&&C("events"),E=((null==O?void 0:O.enabled)||S)&&C("leaderboard"),L=(0,ez.P)().count;return(0,n.jsx)(eR,{allDMsBadgeText:String(w),hasCurrentCommunityMember:!!p,isHomePageEnabled:null==f?void 0:f.home_page_enabled,isMessagingEnabled:k,isOnboardingActive:u,notificationBadgeText:String(v),onGettingStartedClick:function(){return r.push(e_.Fy.onboarding())},onGettingStartedClose:d.show,onNotificationClick:function(){g(),_()},onSearchClick:b,shouldShowMemberDirectory:A,shouldShowOnboarding:c,shouldShowCoursesDirectory:I,shouldShowChatThreadsTab:N,resetNewNotificationsCount:_,unreadThreadsCount:j,shouldShowAllEventsPage:T,shouldShowLeaderboard:E,links:o,connectBadgeText:String(L)})},eU=r(630940),eZ=r(783873),eG=function(e){var t=e.variant,r=e.small,i=(0,s.wh)(),o=i.currentCommunityMember,a=i.isLoading,l=(0,eZ.t)();return a||!(0,x.vb)(o)?null:(0,n.jsx)(N.z,{variant:void 0===t?"primary":t,onClick:function(){l.show()},small:void 0===r||r,children:(0,n.jsx)("span",{children:(0,h.t)("live_streams.now_live.go_live")})})},eq=r(659361),eV=r(96533),eW=function(e){var t=e.headline,r=e.name;return(0,n.jsxs)("div",{className:"flex max-w-[128px] flex-col text-left",children:[(0,n.jsx)("span",{className:"text-c-sidebar truncate text-sm font-medium",children:void 0===r?"":r}),(0,n.jsx)("span",{className:"text-c-sidebar truncate text-sm font-normal",children:void 0===t?"":t})]})},eH=r(664657),eQ={strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,8]}}]},eK=function(e){var t=e.imageUrl,r=e.name,i=void 0===r?"":r,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=void 0===s?"":s,c=e.headline,u=e.showMemberBilling,d=e.canAccessAuthenticationPage,f=e.canShowPaywallsAffiliate,m=(0,et.TH)(),p=(0,eV.r)().show,b=[];return b.push({value:(0,h.t)("view_profile"),label:(0,h.t)("view_profile"),onClick:function(){return p({memberPublicId:l})},icon:"16-account",dataTestId:"profile-link"},{value:(0,h.t)("edit_profile"),label:(0,h.t)("edit_profile"),onClick:function(){return(0,g.isFunction)(o)&&o()},icon:"16-edit",dataTestId:"edit-profile-link"},{value:(0,h.t)("notification"),label:(0,h.t)("notification"),pathTo:k.du.notifications(m),icon:"sidebar-bell",dataTestId:"notification-link"}),void 0!==d&&d&&b.push({value:(0,h.t)("authentication"),label:(0,h.t)("authentication"),pathTo:k.du.authentication(m),icon:"16-lock-unlocked",dataTestId:"authentication-link"}),void 0!==u&&u&&b.push({value:(0,h.t)("billing"),label:(0,h.t)("billing"),pathTo:k.du.billing(m),icon:"credit-card",dataTestId:"member-billing-link"}),void 0!==f&&f&&b.push({value:(0,h.t)("member_profile_modal.affiliate_dashboard.title"),label:(0,h.t)("member_profile_modal.affiliate_dashboard.title"),pathTo:k.du.affiliate(m),icon:"16-paywalls-affiliates",dataTestId:"member-affiliate-link"}),b.push({value:"separator"},{value:(0,h.t)("sign_out"),label:(0,h.t)("sign_out"),onClick:function(){return(0,g.isFunction)(a)&&a()},icon:"16-sign-out"}),(0,n.jsx)(M.Lt,{size:"full",direction:"top-start",dataTestId:"user-profile-dropdown",className:"inline-flex",buttonWrapperClassName:"inline-flex",button:(0,n.jsxs)("div",{className:"flex items-center gap-[14px]","data-testid":"user-profile-button",children:[(0,n.jsx)(eH.W,{name:i,src:void 0===t?"":t,size:"10"}),(0,n.jsx)(eW,{headline:void 0===c?"":c,name:i})]}),popperOptions:eQ,children:(0,n.jsxs)("div",{"data-testid":"user-profile-menu",children:[(0,n.jsx)(M.Lt.Header,{children:(0,h.t)("sidebar_account")}),(0,n.jsx)(M.Lt.IconWithBadgeList,{options:b})]})})},eJ=function(e){var t=e.headline,r=e.imageUrl,i=e.name,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=e.showMemberBilling,c=e.canAccessAuthenticationPage,u=e.canShowPaywallsAffiliate;return(0,n.jsx)(eK,{imageUrl:void 0===r?"":r,headline:void 0===t?"":t,name:void 0===i?"":i,onEditProfileClick:o,onSignOutClick:a,publicUid:void 0===s?"":s,showMemberBilling:void 0!==l&&l,canAccessAuthenticationPage:void 0!==c&&c,canShowPaywallsAffiliate:void 0!==u&&u})},e$=r(735904),eX=function(e){var t=e.children,r=e.className,i=(0,e$.RE)();return(0,n.jsx)("div",{className:b()("border-c-sidebar bg-c-sidebar bottom-0 w-[inherit] border-t px-4 py-3",r),"data-testid":"profile-section",style:i,children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:t})})},eY=function(e){var t=e.headline,r=e.imageUrl,i=e.name,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,l=e.showMemberBilling,c=e.canAccessAuthenticationPage,u=e.canShowPaywallsAffiliate,d=e.children,f=e.className;return(0,n.jsxs)(eX,{className:f,children:[(0,n.jsx)(eJ,{headline:void 0===t?"":t,imageUrl:void 0===r?"":r,name:void 0===i?"":i,onEditProfileClick:o,onSignOutClick:a,publicUid:void 0===s?"":s,showMemberBilling:void 0!==l&&l,canAccessAuthenticationPage:void 0!==c&&c,canShowPaywallsAffiliate:void 0!==u&&u}),d]})},e0=function(){var e=(0,et.k6)(),t=(0,et.TH)(),r=(0,s.wh)().currentCommunityMember,i=null==r?void 0:r.policies,o=(0,eq.W)().room;return r?(0,n.jsx)(eY,{headline:r.headline,imageUrl:r.avatar_url,name:r.name,onEditProfileClick:function(){return e.push(k.du.profile(t))},onSignOutClick:function(){window.location.href=(0,k.jE)()},publicUid:null==r?void 0:r.public_uid,showMemberBilling:null==i?void 0:i.can_access_billing,canAccessAuthenticationPage:null==i?void 0:i.can_access_authentication_page,canShowPaywallsAffiliate:null==i?void 0:i.can_show_paywalls_affiliate,children:!o&&(0,n.jsx)("div",{className:"ml-5",children:(0,n.jsx)(eG,{})})}):null},e1=r(221381),e2=r(973928),e3=r(299714),e6=function(e){var t=e.onSortEnd,r=e.spaceGroupWithSpaces,o=e.onSpaceSortEnd,a=e.updateBeforeSortStart,l=e.spaceGroupDragProperties,c=(0,s.wh)(),u=c.currentCommunity,f=c.currentCommunityMember,p=(0,m.j)(),b=(0,m.ac)("(max-width: 1023px)"),h=(0,d.L)().refetchSpaceNotifications;(0,i.useEffect)(function(){f&&h()},[f,h]);var y=f||!(null==u?void 0:u.is_private);return(0,n.jsxs)(e3.F,{children:[!p&&(0,n.jsx)(ev.J,{}),(0,n.jsxs)(ey.S,{children:[b&&(0,n.jsx)(eF,{}),p&&(0,n.jsx)(eU.C,{}),y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eb,{distance:25,lockAxis:"y",onSortEnd:t,spaceGroupWithSpaces:r,onSpaceSortEnd:o,updateBeforeSortStart:a,spaceGroupDragProperties:l,shouldCancelStart:function(e){return v(e)},helperClass:"!pointer-events-auto"}),(0,n.jsx)(Q,{})]})]}),y&&(0,n.jsxs)(e1.G,{children:[(0,n.jsx)(e2.g,{}),!p&&(0,n.jsx)(e0,{}),(0,n.jsx)(eh.Q,{})]})]})};function e5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e4(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function e7(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){e4(o,n,i,a,s,"next",e)}function s(e){e4(o,n,i,a,s,"throw",e)}a(void 0)})}}function e9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function e8(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e5(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tr=function(){var e=te((0,i.useState)({index:null,isDragging:!1}),2),t=e[0],r=e[1],m=(0,s.e2)(),p=m.helpers.isDataLoading,b=m.records,h=m.actions.refresh,y=(0,s.nT)(),v=y.helpers,g=v.isDataLoading,_=v.spaceVisibleOnSidebar,x=y.actions.refresh,j=(0,s.wh)(),w=j.currentCommunityMember,O=j.isLoading,S=te((0,i.useState)([]),2),k=S[0],N=S[1],P=_(),C=g()||p()||O,A=(0,d.L)().refetchSpaceNotifications;(0,i.useEffect)(function(){w&&A()},[w,A]),(0,i.useEffect)(function(){C||N(b.map(function(e){var t=P.filter(function(t){return t.space_group_id===e.id&&(0,u.l7)({space:t,spaceGroup:e})});return e8(e9({},e),{collapsed:(0,c.zb)({currentCommunityMember:w,spaceGroupId:e.id}),spaces:t})}).filter(function(e){return e.spaces.length>0||e.hide_non_member_spaces_from_sidebar||(0,c.yG)({spaceGroup:e})}))},[C,P,b,w]);var I=function(e){var t=e.spaceGroupId,r=e.orderedSpaceIds;return e7(function(){return tt(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,(0,l.t5)("/space_groups/".concat(t,"/reorder_spaces"),{method:"POST",body:JSON.stringify({order_array:r})})];case 1:return e.sent(),[4,x()];case 2:return e.sent(),[3,4];case 3:return console.error("Error while reordering space: ",e.sent()),[3,4];case 4:return[2]}})})()},T=(0,a.D)();return C||T?(0,n.jsx)(f.H,{}):(0,n.jsx)(e6,{onSortEnd:function(e){var t,n=e.oldIndex,i=e.newIndex,a=(0,o.q)(k,n,i);N(a),t=a.map(function(e){return e.id.toString()}),e7(function(){return tt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,l.t5)("/space_groups/reorder",{method:"POST",body:JSON.stringify({order_array:t})})];case 1:return e.sent(),r({index:null,isDragging:!1}),h(),[3,3];case 2:return console.error("Error while reordering space groups: ",e.sent()),[3,3];case 3:return[2]}})})()},spaceGroupWithSpaces:k,onSpaceSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=e.spaceGroup,a=k.map(function(e){if(e.id==i.id){var t=(0,o.q)(i.spaces,r,n);return e8(e9({},e),{spaces:t})}return e});N(a);var s=null==(t=a.find(function(e){return e.id===i.id}))?void 0:t.spaces.map(function(e){return e.id});I({spaceGroupId:i.id,orderedSpaceIds:s})},spaceGroupDragProperties:t,updateBeforeSortStart:function(e){r(function(t){return e8(e9({},t),{index:e.index,isDragging:!0})})}})}},662670:function(e,t,r){"use strict";r.d(t,{E:()=>i});var n=r(552676),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-c-sidebar mt-4 flex flex-col gap-y-6 px-3 lg:mt-6 lg:px-6",children:t})}},373029:function(e,t,r){"use strict";r.d(t,{I:()=>S});var n=r(552676),i=r(275271),o=r(619803),a=r.n(o),s=r(442959),l=r(547144),c=r(117617),u=r(739792),d=r(260622),f=r(957363),m=r(943544),p=function(e){var t=e.position,r=e.isAdmin,i=e.canCreateSpaces,o=e.onCreateSpace,a=e.onCreateSpaceGroup,s=e.onToggle;return r||i?(0,n.jsx)(d.T,{children:(0,n.jsxs)(m.Lt,{className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,u.t)("community_sidebar.add_space_or_space_group"),button:(0,n.jsx)(f.JO,{type:"16-add-new",size:16,"aria-hidden":"true",useWithFillCurrentColor:!0}),onToggle:s,appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-add-wrapper",children:[i&&(0,n.jsx)(m.Lt.ItemWithLink,{onClick:o,children:(0,u.t)("add_space")}),r&&(0,n.jsx)(m.Lt.ItemWithLink,{onClick:function(){a(t)},children:(0,u.t)("add_space_group")})]})}):null},b=function(e){var t=e.isActive,r=e.isCollapsed,i=void 0!==r&&r,o=(0,c.en)();return(0,n.jsx)("div",{className:a()("ml-1 mr-auto flex size-5 rounded py-0.5 transition-transform",{"hidden group-hover:flex":o,"hover:bg-c-sidebar-hover":!(void 0!==t&&t),"rotate-0":i,"rotate-90":!i}),"aria-label":i?(0,u.t)("community_sidebar.expand_group",{group_name:"space"}):(0,u.t)("community_sidebar.collapse_group",{group_name:"space"}),children:(0,n.jsx)(f.JO,{type:"cheveron-right",size:16,"aria-hidden":!0})})};function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){var t,r=e.isDropdownOpen,i=e.canManage,o=e.children,s=(0,c.en)();return(0,n.jsx)("div",{className:a()("flex w-full space-x-px",(h(t={},i?"group-hover:max-w-[calc(100%-56px)]":"group-hover:max-w-[calc(100%-32px)]",!r),h(t,i?"max-w-[calc(100%-56px)]":"max-w-[calc(100%-32px)]",r||!s),t)),children:o})},v=function(e){var t=e.isDropdownOpen,r=e.spaceGroup,i=e.isCollapsed,o=e.canManage;return(0,n.jsxs)(y,{isDropdownOpen:t,canManage:o,children:[(0,n.jsx)("h3",{className:"truncate text-sm font-semibold leading-5 text-current","data-id":r.id,"data-testid":"spaces-left-sidebar",title:r.name,children:r.name}),(0,n.jsx)(b,{isCollapsed:i})]})},g=r(932699),_=r(441342),x=function(e){var t,r,i=e.onAddMembersClick,o=e.onEditSpaceGroupClick,a=e.seeMembersLink,s=e.seeSpacesLink,l=e.onToggle,c=e.canManage,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onAddMembersClick","onEditSpaceGroupClick","seeMembersLink","seeSpacesLink","onToggle","canManage"]),p=(0,_.wh)().isViewOnlyMasquerading;return(0,n.jsxs)(m.Lt,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,u.t)("space_groups.view_space_group_options"),button:(0,n.jsx)(f.JO,{type:"16-menu-dots-horizontal",size:16,useWithFillCurrentColor:!0}),onToggle:l,popperOptions:{modifiers:[{name:"offset",options:{offset:[4,0]}}]},appendTo:document.body,direction:"bottom-start","data-testid":"spacegroup-options-wrapper",buttonDataTestId:"spacegroup-options-button"},d),r=r={children:[(0,n.jsx)(m.Lt.ItemWithLink,{to:s,role:"menuitem",children:(0,u.t)("space_groups.see_spaces")}),void 0!==c&&c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Lt.ItemWithLink,{to:a,role:"menuitem",children:(0,u.t)("space_groups.see_members")}),!p&&(0,n.jsx)(m.Lt.ItemWithLink,{onClick:function(){return(0,g.isFunction)(i)&&i()},role:"menuitem",children:(0,u.t)("space_groups.add_members")}),!p&&(0,n.jsx)(m.Lt.ItemWithLink,{role:"menuitem",onClick:function(){return(0,g.isFunction)(o)&&o()},children:(0,u.t)("space_groups.edit_space_group")})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},j=r(78456),w=function(e){var t=e.listId,r=e.isCollapsed,i=e.children,o=e.onCollapseToggle,s=e.isDragging,l=(0,_.wh)().currentCommunityMember;return(0,n.jsx)("button",{type:"button",className:a()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus-visible:text-c-sidebar focus-visible:bg-c-sidebar-hover focus-visible:outline-secondary mb-1 flex w-full select-none items-center justify-between rounded-lg px-4 py-1.5 text-sm font-semibold transition-colors duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",{"cursor-grab":!s&&(0,j.vb)(l),"cursor-grabbing":s}),"data-testid":"space-group",onClick:o,"aria-expanded":!(void 0!==r&&r),"aria-controls":void 0===t?"":t,children:i})};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t,r=e.canManage,o=void 0!==r&&r,u=e.children,d=e.id,f=e.isAdmin,m=void 0!==f&&f,b=e.isCollapsed,h=void 0!==b&&b,y=e.isDragging,g=e.listId,_=e.onAddMembersClick,j=e.onCollapseToggle,S=e.onCreateSpaceClick,k=e.onCreateSpaceGroupClick,N=e.onEditSpaceGroupClick,P=e.position,C=e.shouldDisplayOptions,A=e.spaceGroup,I=(0,c.en)(),T=(t=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=T[0],L=T[1];return(0,n.jsxs)("div",{draggable:"false",id:d,className:"group relative",children:[(0,n.jsx)(w,{onCollapseToggle:void 0===j?function(){}:j,isDragging:void 0!==y&&y,isCollapsed:h,listId:g,children:(0,n.jsx)(v,{isDropdownOpen:E,canManage:o,spaceGroup:A,isCollapsed:h})}),(void 0===C||C)&&(0,n.jsxs)("div",{className:a()("text-c-sidebar absolute right-[1rem] top-[0.375rem] ml-1 flex gap-1",{"invisible group-focus-within:visible group-hover:visible":I&&!E}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"data-testid":"space-group-actions",children:[(0,n.jsx)(x,{onAddMembersClick:void 0===_?function(){}:_,onEditSpaceGroupClick:void 0===N?function(){}:N,seeMembersLink:l.Ts.members({spaceGroupSlug:A.slug}),seeSpacesLink:l.Ts.show({spaceGroupSlug:A.slug}),onToggle:L,canManage:o}),((0,s.yG)({spaceGroup:A})||m)&&(0,n.jsx)(p,{position:P,isAdmin:m,onCreateSpace:void 0===S?function(){}:S,onCreateSpaceGroup:void 0===k?function(){}:k,canCreateSpaces:(0,s.yG)({spaceGroup:A}),onToggle:L})]}),!h&&u]})}},245238:function(e,t,r){"use strict";r.d(t,{I:()=>i});var n=r(552676),i=function(e){var t,r,i=e.children,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]);return(0,n.jsx)("div",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"flex flex-col gap-y-1"},o),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},760155:function(e,t,r){"use strict";r.d(t,{z:()=>v});var n=r(552676),i=r(619803),o=r.n(i),a=r(903225),s=r(918594),l=r(22319),c=r(498977),u=r(151433),d=r(957363),f=r(441342),m=r(282859),p=r(78456),b=r(226801),h=r(280219),y=r(859178),v=function(e){var t,r=e.space,i=e.buttonLink,v=e.spaceNotificationDetail,g=void 0===v?{unread_content_count:0,unread_notifications_count:0}:v,_=(0,y.i)(),x=_.getActiveInactiveClasses,j=_.getUnreadClasses,w=(0,f.wh)().currentCommunityMember,O=(0,p.vb)(w),S=(0,l.TC)().currentAppearance,k=(0,a.TH)().state,N=(null!=k?k:{}).prevLocation,P=!!N&&!(null==N||null==(t=N.pathname)?void 0:t.startsWith("/c")),C=null!=g?g:{},A=C.unread_content_count,I=C.unread_notifications_count,T=void 0===I?0:I,E=A>0,L=T>0,D=(0,u.$)({shouldShowLockIconForNonMembers:r.show_lock_icon_for_non_members&&!r.is_space_member,isPrivate:r.is_private,isAdmin:O}),M=(0,b.d)([r.id]).resetUnreadCount;return(0,n.jsx)("div",{draggable:"false",children:(0,n.jsxs)(s.OL,{className:function(e){return o()("focus-visible:outline-secondary h-8.5 group flex items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-75 focus-visible:rounded-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",x(e,P),j(E))},draggable:"false","data-id":r.id,to:(void 0===i?"/":i)||{},onClick:function(e){(0,m.n2)(e)&&M()},children:[(0,n.jsx)("span",{className:"flex",children:(0,n.jsx)(h.S,{className:"flex !h-5 !max-h-5 !w-5 max-w-none items-center leading-none",emojiClassName:"text-sm justify-center",emoji:r.emoji,appearance:S,customEmojiUrl:r.custom_emoji_url,customEmojiDarkUrl:r.custom_emoji_dark_url,shouldUseLockIcon:D,lockIcon:(0,n.jsx)(d.JO,{size:16,type:"lock-v2"})})}),(0,n.jsx)("span",{className:"truncate",children:(0,n.jsx)("h4",{className:o()("text-xs-plus truncate",{"font-medium":!E,"font-semibold":E}),"data-testid":"space-name",children:r.name})}),(E||L)&&(0,n.jsx)(c.l,{isGray:!L,children:T>0?T:A>99?"99+":A})]})})}},859178:function(e,t,r){"use strict";r.d(t,{i:()=>o});var n=r(198250),i=r(22319),o=function(){var e=(0,n.q1)(),t=(0,i.TC)().currentTheme,r=e&&"custom"===t;return{getActiveInactiveClasses:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t||e&&!t?r?"bg-c-active-item-color rounded-md text-c-active-item-text-color focus:text-c-active-item-text-color hover:text-c-active-item-text-color cursor-default":"bg-brand rounded-md text-brand-button focus:text-brand-button hover:text-brand-button cursor-default":"bg-transparent text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar cursor-pointer hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover rounded-md"},getUnreadClasses:function(e){return e?"rounded-md font-semibold":""}}}},261457:function(e,t,r){"use strict";r.d(t,{Q:()=>f});var n=r(552676),i=r(441342),o=r(117617),a=r(313542),s=r(973928),l=r(46654),c=r(338583),u=r(735904),d=function(e){var t=e.communitySlug,r=(0,u.RE)();return(0,n.jsx)(c.t,{className:"bg-c-sidebar justify-center !p-0",communitySlug:t,styles:r})},f=function(e){var t=e.isPreviewMode,r=(0,u.RE)(),c=(0,l.F)(),f=(0,a.K)().shouldShowBranding,m=(0,o.BT)(),p=(0,i.wh)().currentCommunity,b=(null!=p?p:{}).slug;return c||f?(0,n.jsxs)("div",{style:r,className:"border-c-sidebar bg-c-sidebar flex w-full flex-col gap-2 border-t px-6 pb-3.5 pt-4",children:[!m&&(0,n.jsx)(s.G,{isPreviewMode:void 0!==t&&t}),f&&(0,n.jsx)(d,{communitySlug:null!=b?b:""})]}):null}},979369:function(e,t,r){"use strict";r.d(t,{S:()=>b});var n=r(552676),i=r(619803),o=r.n(i),a=r(818699),s=r(696969),l=r(252484),c=r(800504),u=r(117617),d=r(313542),f=r(46654),m=function(){var e=(0,f.F)(),t=(0,d.K)().shouldShowBranding;return{goLiveButtonHeight:39,poweredByHeight:16,extraContainerSpacing:(t||e?31:0)+(t&&e?8:0)}},p=function(){var e=(0,u.j)(),t=(0,s.k)().shouldShowTrialBanner,r=(0,l.Wk)().room,n=(0,d.K)().shouldShowBranding,i=(0,f.F)(),o=(0,c.f)(),a=m(),p=a.goLiveButtonHeight,b=a.poweredByHeight;return{paddingBottom:[48*!!o,63*!!e,63*!e,e&&t?48:0,e&&i?p:0,168*!!r,65*!e,n?b:0,a.extraContainerSpacing].reduce(function(e,t){return e+t},0)}},b=function(e){var t=e.children,r=p();return(0,n.jsx)("div",{className:o()("h-full"),style:r,children:(0,n.jsx)(a.E,{className:"h-full",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:t})})}},641009:function(e,t,r){"use strict";r.d(t,{v:()=>c});var n=r(552676),i=r(932699),o=r(619803),a=r.n(o),s=r(739792),l=function(e){var t=e.name,r=e.src,i=e.className;return(0,n.jsx)("img",{loading:"eager",id:"community-logo",alt:(0,s.t)("community_logo_alt",{community_name:t}),className:a()("max-h-9 max-w-[14.375rem]",i),src:r})},c=function(e){var t,r,o=e.communityName,a=e.logoType,s=e.logoUrl,c=e.as,u=void 0===c?"button":c,d=e.onLogoClick;return(0,n.jsx)(u,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:"w-full min-w-0",id:"community-logo-wrapper",onClick:function(){return(0,i.isFunction)(d)&&d()}},"button"===u&&{buttonProps:{type:"button"}}),r=r={children:"logo"===a&&s?(0,n.jsx)(l,{name:o,src:s}):(0,n.jsxs)("div",{className:"text-c-header flex items-center gap-2",children:[s&&(0,n.jsx)("div",{children:(0,n.jsx)(l,{name:o,src:s})}),(0,n.jsx)("div",{className:"w-full min-w-0",children:(0,n.jsx)("h1",{"data-testid":"title-name",className:"text-c-header truncate text-left text-xl font-semibold normal-case leading-7 tracking-normal",children:o})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},26570:function(e,t,r){"use strict";r.d(t,{e:()=>X});var n=r(552676),i=r(932699),o=r(739792),a=r(735904),s=r(701168),l=r(381636),c=function(e){var t,r=e.logoUrl,i=e.iconUrl,o=e.bgColor,c=e.name,u=void 0===c?"":c,d=e.rootUrl,f=e.isActive,m=e.notificationCount,p=void 0===m?0:m,b=(0,a.Gf)().backgroundColor,h=!!r,y=!!i;return(0,n.jsx)("a",{href:d,children:(0,n.jsxs)("div",{className:(0,s.A)("relative flex items-center justify-center p-3",{"bg-tertiary rounded":void 0!==f&&f}),children:[(0,n.jsxs)("div",{className:"flex w-full items-center gap-6",children:[(0,n.jsx)("div",{className:"text-badge flex size-[40px] min-w-[40px] cursor-pointer items-center justify-center rounded uppercase",style:h||y?{}:{backgroundColor:o},children:(t=u.charAt(0),h?(0,n.jsx)("img",{loading:"lazy",src:r,alt:""}):y?(0,n.jsx)("img",{loading:"lazy",src:i,style:{width:"40",height:"40"},alt:""}):t)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:u})}),(0,n.jsx)(l.Z.LabelSm,{color:"text-light",children:d})]})]}),p>0&&(0,n.jsx)("span",{className:"text-badge flex h-[20px] min-w-[20px] items-center justify-center rounded-full bg-red-500 font-bold",style:{borderColor:b},children:(0,n.jsx)(l.Z.LabelSm,{color:"#fff",children:p})})]})})},u=r(606216),d=function(e){var t=e.onClickDone,r=(0,u.U)().communities;return(0,n.jsxs)("div",{className:"relative flex size-full flex-col gap-1 py-1.5",children:[(0,n.jsxs)("div",{className:"mb-3.5 flex w-full cursor-pointer items-center justify-end px-3",children:[(0,n.jsx)("div",{className:"w-full flex-1",children:(0,n.jsx)(l.Z.LabelLg,{weight:"semibold",children:(0,o.t)("mobile_community_switcher.my_communities")})}),(0,n.jsx)("button",{type:"submit",onClick:t,children:(0,n.jsx)(l.Z.LabelSm,{weight:"semibold",children:(0,o.t)("mobile_community_switcher.done")})})]}),r.map(function(e){return(0,n.jsx)(c,{isActive:e.is_current_community,rootUrl:e.root_url,logoUrl:e.logo_attachment_url||"",iconUrl:e.icon_attachment_url||"",bgColor:e.brand_color,name:e.name},e.id)})]})},f=r(757105),m=r(434519),p=function(){var e=(0,f.dd)();return(0,n.jsxs)(m.u_,{isOpen:e.visible,onClose:e.hide,contentPortalId:"mobile-community-switcher-modal",title:(0,o.t)("community_switcher_title"),children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsx)(m.u_.Content,{size:"xl",children:(0,n.jsx)(m.u_.Body,{className:"!px-3",children:(0,n.jsx)(d,{onClickDone:e.hide})})})]})},b=f.gk.create(function(){return(0,n.jsx)(p,{})}),h=r(117617),y=r(22319),v=r(582684),g=r(619803),_=r.n(g),x=r(957363),j=r(943544),w=function(e){var t=e.children,r=e.hasFullWidth,i=e.dropDownOptions;return(0,n.jsx)(j.Lt,{direction:"bottom-start",transitionWrapperClassName:"mt-1 lg:-mt-2 !w-[16.25rem] !left-[1.65rem] lg:!-left-2.5",menuWrapperClassName:"!px-0 !mt-0",size:"full",popperOptions:{strategy:"absolute"},className:_()("h-full",{"w-full":void 0===r||r}),buttonWrapperClassName:"flex w-full h-full px-4 py-3",buttonClassName:"w-full focus-visible:outline-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 rounded-md group",menuItemsClassName:"overflow-y-auto max-h-[calc(100vh-4rem)]",button:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[t,(0,n.jsx)("div",{className:"group-hover:bg-c-header-active text-c-header group-hover:text-c-header-active ml-1.5 flex size-5 flex-col items-center justify-center rounded-full transition-colors duration-150",children:(0,n.jsx)(x.JO,{size:12,type:"12-chevron-down",className:"!transition-none"})})]}),buttonDataTestId:"community-menu",children:(0,n.jsx)("div",{"data-testid":"community-dropdown-menu",children:(0,n.jsx)(j.Lt.IconWithBadgeList,{options:void 0===i?[]:i})})})},O=r(641009),S=r(78456),k=r(547144),N=r(441342),P=function(){var e=(0,N.wh)().currentCommunityMember,t=!!((0,S.vb)(e)||(0,S.I$)(e)),r=(0,o.t)("settings_nav_v3.content.label");return{isVisible:t,link:k.qk.files.index(),icon:"20-doc-v3",iconSize:20,title:r}},C=r(824869),A=r(276012),I=r(903225),T=r(480610),E=r(706439),L=r(981097),D=r(631220),M={value:"separator"};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(e){var t=e.memberCount,r=e.showCustomizeTheme,n=e.toggleTheme,i=e.viewAs,a=e.content,s=e.isCommunityOnPlus,l=e.isWorkflowsEnabled,c=e.isAffiliatesEnabled,u=e.isBannerVisible,d=e.shortcutsModalButton,f=e.hasAIAgentsAccess,m=e.isAdminDashboardEnabled,p="16-20-mobile",b=(0,D.z)().isOverviewTabEnabled,h=(0,E.s)(),y=(0,T.z)().brandedAppsBuilder,v=(0,I.TH)().pathname,g=[];void 0!==m&&m&&g.push({value:(0,o.t)("sidebar_admin_dashboard"),label:(0,o.t)("sidebar_admin_dashboard"),pathTo:L.L.admin_dashboard.index,icon:"sw-home",iconSize:20});var _={value:"members",label:(0,o.t)("section_audience"),pathTo:k.Gp.index(),icon:"20-users-v3",iconSize:20};return t&&(_.badge=String(t)),g.push(_),g.push.apply(g,B(a)),g.push({value:(0,o.t)("sidebar_email"),label:(0,o.t)("sidebar_email"),pathTo:L.L.email.overview,icon:"16-send",iconSize:20}),l&&g.push({value:(0,o.t)("sidebar_workflows"),label:(0,o.t)("sidebar_workflows"),pathTo:"/settings/workflows",icon:"20-flash-v3",iconSize:20}),g.push({value:(0,o.t)("analytics.analytics"),label:(0,o.t)("analytics.analytics"),pathTo:"/settings/analytics",icon:"20-analytics-v3",iconSize:20}),g.push({value:(0,o.t)("sidebar_ai_agents"),label:(0,o.t)("sidebar_ai_agents"),pathTo:"/settings/ai-agents/agents",icon:"20-community-bot",iconSize:20}),(void 0===f||f)&&g.push({value:(0,o.t)("sidebar_ai_inbox"),label:(0,o.t)("sidebar_ai_inbox"),pathTo:"/settings/ai-inbox",icon:"20-community-inbox",iconSize:20}),g.push({value:(0,o.t)("sidebar_paywalls"),label:(0,o.t)("sidebar_paywalls"),pathTo:"/settings/paywalls",icon:"20-currency-v3",iconSize:20}),c&&g.push({value:(0,o.t)("sidebar_paywalls_affiliates"),label:(0,o.t)("sidebar_paywalls_affiliates"),pathTo:"/settings/affiliates_settings",icon:"20-affiliates-v3",iconSize:20}),g.push(function(){if(!s)return{value:(0,o.t)("pricing_plans.title"),label:(0,o.t)("settings.billing.plans.title"),pathTo:(0,k.xn)(),icon:"20-card-v3",iconSize:20};var e,t,r={value:(0,o.t)("pricing_plans.title"),label:(0,o.t)("settings_nav_v3.branded_apps_dashboard.title"),icon:p,iconSize:20},n=y.isEnabled?"/settings/plus":"/settings/plus/lite";return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r),t=t={pathTo:n},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}()),s||g.push({value:(0,o.t)("settings_nav_v3.settings.branded_app"),label:(0,o.t)("settings_nav_v3.settings.branded_app"),pathTo:"/settings/plus",icon:p,iconSize:20}),g.push({label:(0,o.t)("settings_nav_v3.site.label"),value:(0,o.t)("settings_nav_v3.site.label"),icon:"20-display",pathTo:L.L.site.index,iconSize:20}),g.push({label:(0,o.t)("settings_nav_v3.developers.title"),value:(0,o.t)("settings_nav_v3.developers.title"),icon:"20-code-tag",pathTo:b?L.L.developers.overview:L.L.developers.api,iconSize:20}),g.push({value:(0,o.t)("sidebar_settings"),label:(0,o.t)("sidebar_settings"),pathTo:"/settings",icon:"20-settings-v3",iconSize:20}),g.push(M),h&&g.push({value:(0,o.t)("settings_nav_v3.site_builder.label"),label:(0,o.t)("settings_nav_v3.site_builder.label"),pathTo:L.L.content.pages,icon:"20-display",iconSize:20}),r&&g.push({value:(0,o.t)("customize_theme.title"),label:(0,o.t)("customize_theme.title"),pathTo:"/settings/theme",icon:"20-color-palette-v3",iconSize:20}),g.push.apply(g,B(n)),d&&g.push(d),g.push(M),u||g.push(i),g.push({value:(0,o.t)("sidebar_invite_member"),label:(0,o.t)("sidebar_invite_member"),pathTo:"".concat(L.L.members.invite,"?from=").concat(v),icon:"20-user-plus-v3",iconSize:20}),g},F=function(e){var t=e.isVisible,r=e.link,n=e.icon,i=e.iconSize,o=e.title;return t?[{value:o,label:o,pathTo:r,icon:n,iconSize:i}]:[]};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var t=e.moderation,r=e.showToggleTheme,n=e.toggleTheme,i=e.content,o=e.shortcutsModalButton;return Z(i).concat([t],Z(r?[M]:[]),Z(n),Z(o?[o]:[]))},q=function(e){var t={value:(0,o.t)("sidebar_moderation"),label:(0,o.t)("sidebar_moderation"),pathTo:"/settings/moderation",icon:"20-shield-v3",iconSize:20};return e&&(t.badge=String(e)),t},V=r(363729),W=function(){var e=(0,V.v)();return{value:(0,o.t)("header_v3.keyboard_shortcuts"),label:(0,o.t)("header_v3.keyboard_shortcuts"),onClick:function(){e.show()},icon:"20-keyboard-shortcuts",iconSize:20}},H=function(e){var t=e.showToggleTheme,r=e.currentAppearance,n=e.toggleAppearance,a=void 0===n?i.noop:n;return t?[{value:r,label:r===y.OR.LIGHT?(0,o.t)("sidebar_switch_to_dark_mode"):(0,o.t)("sidebar_switch_to_light_mode"),onClick:a,icon:(y.OR.LIGHT,"20-moon-v3"),iconSize:20}]:[]},Q=function(e){var t=e.showBanner;return{icon:"20-open-eye-v3",iconSize:20,label:(0,o.t)("view_as"),onClick:function(){setTimeout(function(){t()},0)},value:"viewAs"}};function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $=function(e){var t=e.isAdmin,r=e.isModerator,n=e.memberCount,i=e.moderationCount,o=e.showToggleTheme,a=e.showCustomizeTheme,s=e.isWorkflowsEnabled,l=(0,y.TC)(),c=l.currentAppearance,u=l.toggleAppearance,d=W(),f=H({currentAppearance:c,toggleAppearance:u,showToggleTheme:o}),m=(0,A.Vu)(),p=m.isBannerVisible,b=Q({showBanner:m.showBanner}),h=q(i),v=F(P()),g=(0,C.E)().isCommunityOnPlus,_=(0,N.wh)(),x=_.currentCommunity,j=_.currentCommunitySettings,w=z({memberCount:n,showCustomizeTheme:a,toggleTheme:f,viewAs:b,content:v,isCommunityOnPlus:g,isWorkflowsEnabled:s,isAffiliatesEnabled:!!(null==x?void 0:x.affiliates_feature_flag_enabled),isBannerVisible:p,shortcutsModalButton:d,hasAIAgentsAccess:!!(null==x?void 0:x.ai_agents_feature_flag_enabled),isAdminDashboardEnabled:!!(null==j?void 0:j.growth_admin_dashboard_enabled)});return t?w:r?G({moderation:h,showToggleTheme:o,toggleTheme:f,content:v,shortcutsModalButton:d}):J(d?[d]:[]).concat(J(f))},X=function(e){var t=e.communityName,r=void 0===t?"":t,o=e.isAdmin,a=e.isModerator,s=e.logoType,l=void 0===s?"icon":s,c=e.logoUrl,u=e.onLogoClick,d=e.showToggleTheme,m=e.showCustomizeTheme,p=e.memberCount,g=e.moderationCount,_=(0,h.ac)("(max-width: 1023px)"),x=(0,f.dd)(b),j=(0,y.wC)().display_community_switcher,S=$({isAdmin:void 0!==o&&o,isModerator:void 0!==a&&a,memberCount:p,moderationCount:g,showToggleTheme:void 0!==d&&d,showCustomizeTheme:void 0!==m&&m,isWorkflowsEnabled:(0,v.I)()}),k=_&&j;return k?(0,n.jsxs)("div",{className:"flex w-full items-center px-4",id:"community-logo-mobile-community-switcher",children:[(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,onLogoClick:function(){x.show()}}),(0,n.jsx)(w,{hasFullWidth:!1,dropDownOptions:S})]}):(0,i.isEmpty)(S)?(0,n.jsx)("div",{className:"px-4",id:"community-logo-no-dropdown",children:(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,onLogoClick:function(){if(k)return x.show();u&&u()}})}):(0,n.jsx)(w,{dropDownOptions:S,children:(0,n.jsx)(O.v,{communityName:r,logoType:l,logoUrl:c,as:"div"})})}},559649:function(e,t,r){"use strict";r.d(t,{F:()=>l});var n=r(552676),i=r(619803),o=r.n(i),a=r(260622),s=r(735904),l=function(e){var t=e.hasPadding,r=e.isSticky,i=e.children,l=e.className,c=(0,s.RE)();return(0,n.jsx)(a.T,{children:(0,n.jsx)("div",{className:o()(l,"top-0 z-30 flex h-16 min-h-[4rem] items-center justify-between gap-2",{"px-4":void 0===t||t,sticky:void 0===r||r}),"data-testid":"top_section_container",style:c,children:i})})}},925032:function(e,t,r){"use strict";r.d(t,{J:()=>m});var n=r(552676),i=r(29378),o=r(441342),a=r(78456),s=r(198250),l=r(340404),c=r(117617),u=r(22319),d=r(26570),f=r(559649),m=function(){var e=(0,o.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,m=e.currentCommunitySettings,p=(0,l.C)().goToCommunityRootPath,b=(0,u.TC)(),h=b.currentAppearance,y=b.isDarkAppearance,v=(0,s.q1)(),g=(0,a.vb)(r),_=(0,a.I$)(r),x=(0,i._v)(t,y),j=x.url,w=x.type,O=!!(null==m?void 0:m.dark_mode_enabled),S=(0,c.ef)(),k=(0,s.PN)(),N=null!=t?t:{},P=N.member_count,C=N.moderation_count,A=N.dark_icon_url,I=N.dark_logo_url,T=j;return h===u.OR.DARK&&k&&("logo"===w&&I?T=I:"icon"===w&&A&&(T=A)),(0,n.jsx)(f.F,{hasPadding:!1,children:(0,n.jsx)(d.e,{communityName:null==t?void 0:t.name,isAdmin:g,isModerator:_,logoType:w,logoUrl:T,showToggleTheme:O,showCustomizeTheme:v&&!S,onLogoClick:p,memberCount:P,moderationCount:C})})}},498977:function(e,t,r){"use strict";r.d(t,{l:()=>a});var n=r(552676),i=r(619803),o=r.n(i),a=function(e){var t=e.children,r=e.isGray,i=void 0!==r&&r,a=e.ariaLabel;return(0,n.jsx)("div",{className:o()("ml-auto min-w-[1.75rem] rounded px-1.5 py-1 text-center text-[11px] font-semibold leading-[11px]",{"bg-c-sidebar-badge text-c-sidebar-badge-text":!i,"border-primary bg-primary group-hover:bg-primary text-dark my-[-1px] border":i}),"data-testid":"unread-count","aria-label":a,children:t})}},44994:function(e,t,r){"use strict";r.d(t,{R:()=>g});var n=r(275271),i=r(932699),o=r(552676),a=r(739792),s=r(757105),l=r(428892),c=r(547144),u=r(139964),d=r(884579),f=r(484057),m=r(983485),p=r(534860),b=r(158361),h=function(e){var t=e.containerElement,r=e.communityMemberId,i=e.newNotificationCount,h=(0,s.dd)(),y=(0,f.f)(p.dL),v=y.newNotificationCount,g=y.setNewNotificationCount,_=y.onNotificationEventReceive,x=y.resizeNotificationWindow,j=(0,u.j)(),w=j.prependTitle,O=j.resetTitleToOriginal;return(0,n.useEffect)(function(){g(i)},[i]),(0,d.I)(r,_),(0,m.w)(x),(0,n.useEffect)(function(){v?document.title=w("(".concat(v,") ")):document.title=O()},[v]),(0,o.jsx)(l.d,{maskClosable:!0,hideHeader:!0,noWrapperPadding:!0,open:h.visible,onClose:h.hide,children:(0,o.jsxs)("div",{className:"notifications__wrapper--drawer",id:t+"NotificationWrapperOuter","data-testid":"notifications-drawer",children:[(0,o.jsx)(b.u,{handleClose:h.hide},"notification-".concat(h.visible)),(0,o.jsx)("div",{className:"notifications__footer",children:(0,o.jsx)("span",{children:(0,o.jsx)("a",{href:(0,c.Rj)(),children:(0,o.jsx)("div",{children:(0,a.t)("view_all_notifications")})})})})]})})},y=s.gk.create(function(e){var t=e.containerElement,r=e.communityMemberId,n=e.newNotificationCount;return(0,o.jsx)(h,{containerElement:t,communityMemberId:r,newNotificationCount:n})}),v=r(441342),g=function(){var e=(0,v.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,o=(0,f.f)(),a=o.newNotificationCount,l=o.fetchNewNotificationsCount,c=o.resetNewNotificationsCount,u=o.onNotificationEventReceive;(0,d.I)(null==r?void 0:r.id,u),(0,n.useEffect)(function(){r&&l(null==t?void 0:t.id)},[null==t?void 0:t.id,r]);var m=(0,s.dd)(y),p=(0,n.useCallback)(function(){if(!(0,i.isEmpty)(r)&&!(0,i.isEmpty)(t)){var e;m.show({communityMemberId:null!=(e=null==r?void 0:r.id)?e:0,newNotificationCount:a})}},[r,t,m]);return{newNotificationCount:a,toggleNotificationDrawer:p,resetNewNotificationsCount:c}}},879414:function(e,t,r){"use strict";r.d(t,{I:()=>d});var n=r(903225),i=r(331136),o=r(880646),a=r(78456),s=r(782610),l=r(242045),c=r(441342),u=r(549882),d=function(){var e=(0,s.u)().isChecklistAvailable,t=(0,c.wh)(),r=t.currentCommunity,d=t.currentCommunityMember,f=t.currentCommunitySettings,m=(0,l.m)(),p=!!(0,n.$B)(u.Fy.onboarding()),b=(0,i.S)(),h=!!(0,a.vb)(d),y=(0,o.D)(),v=!!(h||(null==f?void 0:f.public_events_page));return{shouldShowOnboarding:e,isOnboardingActive:p,hideOnboardingConfirmationModal:b,currentCommunity:r,currentCommunitySettings:f,currentCommunityMember:d,isAdmin:h,spotlightSearch:y,toggleSpaceGroupDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;m.show({position:e})},showSpotlightSearch:function(){y.show()},shouldShowAllEventsPage:v}}},630940:function(e,t,r){"use strict";r.d(t,{C:()=>h});var n=r(552676),i=r(739792),o=r(441342),a=r(549882),s=r(701168),l=r(903225),c=r(918594),u=r(859178),d=r(957363),f=function(e){var t=e.text,r=e.linkTo,i=e.icon,o=e.isActive,f=e.isDisabled,m=void 0!==f&&f,p=e.onClose,b=e.className,h=(0,u.i)().getActiveInactiveClasses,y=(0,l.TH)(),v=(0,l.$B)({path:r,exact:!0}),g=y.state,_=(null!=g?g:{}).prevLocation,x=h(!!v||void 0!==o&&o,!!_&&!_.pathname.startsWith("/c"),r.includes(a.Fy.feed()));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.OL,{to:r,title:t,className:(0,s.A)("h-8.5 flex w-full items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-200",x,b),onClick:function(e){m&&e.preventDefault()},"aria-disabled":m,children:[(0,n.jsx)(d.JO,{type:i,size:20}),(0,n.jsx)("h4",{className:"text-xs-plus max-w-full truncate font-medium text-current",children:t})]}),p&&(0,n.jsx)("button",{className:(0,s.A)("focus-visible:outline-secondary absolute right-2 top-1/2 flex size-5 -translate-y-1/2 rounded focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",x),type:"button",onClick:p,children:(0,n.jsx)(d.JO,{type:"16-close",size:16})})]})},m=r(331136),p=r(782610);function b(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var h=function(e){var t=e.isDisabled,r=void 0!==t&&t,s=e.isFeedLinkActive,l={shouldShowOnboarding:(0,p.u)().isChecklistAvailable,hideOnboardingModal:(0,m.S)()},c=l.shouldShowOnboarding,u=l.hideOnboardingModal,d=(0,o.wh)().currentCommunity,h=(null!=d?d:{}).home_page_enabled;return c||h?(0,n.jsx)("nav",{"aria-label":(0,i.t)("secondary_navigation_bar"),children:(0,n.jsxs)("ul",{className:"bg-c-sidebar mt-4 flex list-none flex-col gap-y-1 px-3 lg:mt-6 lg:px-6",children:[c&&(0,n.jsx)("li",{className:"relative",children:(0,n.jsx)(f,{text:(0,i.t)("getting_started"),linkTo:a.Fy.onboarding(),icon:"20-todo-list-v3",isDisabled:r,onClose:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,u.show()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)})})()}})}),h&&(0,n.jsx)("li",{className:"relative",children:(0,n.jsx)(f,{text:(0,i.t)("feed"),linkTo:a.Fy.feed(),icon:"20-feed-v3",isDisabled:r,isActive:void 0!==s&&s})})]})}):null}},221381:function(e,t,r){"use strict";r.d(t,{G:()=>a});var n=r(552676),i=r(619803),o=r.n(i),a=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:o()("fixed bottom-0 flex w-[inherit] flex-col items-center bg-transparent sm:max-w-[21.25rem] md:max-w-[18.5rem]",r),children:t})}},973928:function(e,t,r){"use strict";r.d(t,{g:()=>_,G:()=>b});var n=r(552676),i=r(619803),o=r.n(i),a=r(739792),s=r(252484),l=r(783873),c=r(441342),u=r(78456),d=r(957363),f=r(39905),m=r(735904),p=r(46654),b=function(e){var t=e.isPreviewMode,r=e.inSettings,i=void 0!==r&&r,b=(0,s.IO)(),h=b.isLoading,y=b.isMonthlyHourLimitReached,v=b.isStorageLimitReached,g=(0,l.t)(),_=(0,m.RE)(),x=(0,p.F)(),j=(0,c.wh)(),w=j.currentCommunityMember,O=j.isViewOnlyMasquerading,S=!(0,u.vb)(w)&&(h||y||v);return x?(0,n.jsx)("div",{className:o()("flex w-full items-center justify-between",{"pl-4 pr-0":i,"bg-c-sidebar":!i,"cursor-not-allowed":O}),style:_,children:(0,n.jsx)(f.z,{full:!0,onClick:function(){g.show()},variant:"secondary-light",disabled:S,className:o()("!border-dark hover:bg-secondary px-4 py-[8.5px] font-medium transition-colors duration-150 ease-in-out",{"pointer-events-none":void 0!==t&&t||O}),children:(0,n.jsxs)("div",{className:"text-selector-active flex items-center justify-center",children:[(0,n.jsx)(d.JO,{type:"16-go-live",size:16,className:"text-default mr-2"}),(0,a.t)("sidebar_footer_v3.go_live")]})})}):null},h=r(664657),y=r(171458),v=r(437588),g=r(381636),_=function(){var e,t,r,i=(0,s.Wk)(),o=i.room,l=i.canManage,c=i.handleNavigateToRoom,u=i.handleEndStream,m=(0,y.tv)({title:(0,a.t)("live_streams.".concat((0,v.vX)(o),"_ended.confirm")),onConfirm:u}),p=m.confirmModal,b=m.onConfirmButtonClick;return o?(0,n.jsxs)("div",{className:"bg-sidebar-footer-live-indicator mb-1 w-full max-w-[256px] rounded-xl p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(h.W,{size:"6",src:null==o||null==(e=o.creator)?void 0:e.avatar_url,name:null==o||null==(t=o.creator)?void 0:t.name}),(0,n.jsx)(g.Z.BodySm,{color:"text-white max-w-[15ch]",truncate:!0,children:null==o||null==(r=o.creator)?void 0:r.name}),(0,n.jsx)(d.JO,{type:"24-live-waveform",size:24})]}),(0,n.jsx)("div",{className:"bg-c-sidebar-badge flex items-center justify-center rounded-[4px] px-2 py-1",children:(0,n.jsx)("span",{className:"text-xxs font-bold uppercase leading-3 text-white",children:(0,a.t)("sidebar_footer_v3.live")})})]}),(0,n.jsx)(g.Z.BodyMd,{color:"text-white line-clamp-2",weight:"font-semibold",children:null==o?void 0:o.name}),(0,n.jsx)(f.z,{full:!0,className:"!bg-circle mt-4",onClick:c,children:(0,a.t)("sidebar_footer_v3.join")}),l&&(0,n.jsxs)(g.Z.BodyXs,{color:"text-white mt-2",children:[(0,a.t)("live_streams.room.cant_join"),(0,n.jsx)("button",{type:"button",className:"ml-1 cursor-pointer text-xs font-semibold text-white",onClick:b,children:(0,a.t)("live_streams.room.".concat((0,v.vX)(o),".end"))})]}),p]}):null}},46654:function(e,t,r){"use strict";r.d(t,{F:()=>a});var n=r(252484),i=r(441342),o=r(78456),a=function(){var e=(0,i.wh)(),t=e.isLoading,r=e.currentCommunityMember,a=(0,n.Wk)().room;return!t&&(0,o.U8)(r)&&!a}},299714:function(e,t,r){"use strict";r.d(t,{F:()=>i});var n=r(552676),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-c-sidebar w-sidebar-v3 fixed flex h-full max-h-full flex-col",children:t})}},735904:function(e,t,r){"use strict";r.d(t,{Gf:()=>l,RE:()=>c});var n=r(594337),i=r(48266),o=r(22319),a=function(){var e=(0,o.TC)(),t=e.customColors,r=e.isCustomTheme,i=e.currentTheme,a=e.currentAppearance,s=(null==(c=t[a])?void 0:c.sidebar_background_color)||"#fff",l="#fff";if("custom"!==i){var c,u,d,f=null===o.v||void 0===o.v||null==(d=o.v[i])||null==(u=d[a])?void 0:u["--color-community-sidebar-background"];f&&(l=f)}return r?(0,n.Vi)(s):(0,n.Vi)(l)},s=function(){var e=a();return e.isDark()?e.lighten(.1).toHex():e.darken(.1).toHex()},l=function(){var e=a().toHex();return(0,i.W)()?{backgroundColor:e}:{}},c=function(){var e=s();return(0,i.W)()?{borderColor:e}:{}}},510060:function(e,t,r){"use strict";r.d(t,{Bb:()=>s,lV:()=>a,zo:()=>l});var n=r(739792),i=r(441342),o="space_access_management",a=function(e){var t,r,i,a;return{id:e.id,name:e.name,icon:(t=e.visibility,(r=e.is_private)&&"private"===t?"16-lock":r&&"secret"===t?"16-eye-closed":"16-members-bis"),tooltipText:(i=e.visibility,(a=e.is_private)&&"private"===i?(0,n.t)([o,"tooltip_icon.private"]):a&&"secret"===i?(0,n.t)([o,"tooltip_icon.secret"]):(0,n.t)([o,"tooltip_icon.open"]))}},s=function(e){return{id:e.id,name:e.name,spaces:[]}},l=function(e){var t=e.serializeSpaceGroup,r=e.serializeSpace,n=(0,i.nT)(),o=n.records,a=n.isLoading,s=(0,i.e2)(),l=s.records,c=s.isLoading,u=[],d={},f={};return l.forEach(function(e){var r=t(e);u.push(r),d[e.id]=r}),o.forEach(function(e){var t,n=r(e);null==(t=d[e.space_group_id])||t.spaces.push(n),f[n.id]=n}),{options:u,spaceGroupIndex:d,spaceIndex:f,spaceRecords:o,spaceGroupRecords:l,isLoading:a||c}}},222294:function(e,t,r){"use strict";r.d(t,{i:()=>G});var n=r(552676),i=r(275271),o=r(739792),a=r(876987);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(619803),c=r.n(l),u=r(227851),d="space_access_management",f=function(e){e()};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=(0,i.createContext)(null);p.displayName="SpaceAccessManagementContext";var b=function(e){var t,r=e.options,o=e.children,a=e.parentFieldName,s=void 0===a?"space_group_ids":a,l=e.childFieldName,c=void 0===l?"space_ids":l,d=e.notRemovableParentItemTooltip,f=e.notRemovableParentIds,b=e.notRemovableChildItemTooltip,h=e.notRemovableChildIds,y=(0,u.Gc)(),v=y.watch,g=y.setValue,_={spaceGroups:(0,u.Dq)({name:s,shouldUnregister:!1}),spaces:(0,u.Dq)({name:c,shouldUnregister:!1})},x=(t=(0,i.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=x[0],w=x[1],O=v(s),S=v(c),k=function(e){return -1!==e.trim().toLowerCase().search(j.trim().toLowerCase())},N=function(e){return!h||-1===h.indexOf(e)};return(0,n.jsx)(p.Provider,{value:{options:r,parentFieldName:s,childFieldName:c,fieldArrayFields:_,spaceGroupsSelected:O,spacesSelected:S,addSpaceGroups:function(e){_.spaceGroups.append(e)},addSpaces:function(e){_.spaces.append(e)},removeSpaceGroup:function(e){var t=O.findIndex(function(t){return t===e});-1!==t&&_.spaceGroups.remove(t)},removeSpaces:function(e){var t=e.filter(N);g(c,S.filter(function(e){return!t.includes(e)}),{shouldDirty:!0})},isSpaceGroupSelected:function(e){return O.includes(e)},isSpaceSelected:function(e){return S.includes(e)},searchText:j,setSearchText:w,getIsFromSearch:k,getHasAnySearchResults:function(){return r.some(function(e){return k(e.name)||e.spaces.some(function(e){return k(e.name)})})},hasSpaceGroupUnselectedSpaces:function(e){return e.spaces.some(function(e){return!S.includes(e.id)})},notRemovableParentItemTooltip:d,notRemovableParentIds:f,notRemovableChildItemTooltip:b,notRemovableChildIds:h,isSpaceGroupRemovable:function(e){return!f||-1===f.indexOf(e)},isSpaceRemovable:N,areAllSpacesAndSpaceGroupsRemovable:function(){return!f&&!h||(null==f?void 0:f.length)===0&&(null==h?void 0:h.length)===0}},children:o})},h=function(){var e=(0,i.useContext)(p);if(!e)throw Error("useSpaceManagementContext must be used within a SpaceManagementContextProvider");return e},y=r(381636),v=function(){return(0,n.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 px-6 py-12 text-center",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"semibold",color:"text-selector-active",children:(0,o.t)([d,"empty_result.title"])}),(0,n.jsx)(y.Z.LabelSm,{color:"text-selector-active",children:(0,o.t)([d,"empty_result.subtitle"])})]})},g=function(e){var t=e.children,r=e.isDisabled,i=void 0!==r&&r,o=e.onClick,a=e.className;return(0,n.jsx)("li",{className:c()("group",void 0===a?"":a),children:(0,n.jsx)("button",{type:"button",className:c()("flex w-full list-none items-center justify-between rounded-md p-2 text-sm transition-colors md:px-4",{"hover:bg-tertiary group-focus-within:bg-tertiary cursor-pointer":!i&&!!o,"cursor-default opacity-50":i}),onClick:function(){i||null==o||o()},children:t})})},_=r(39905),x=function(e){var t=e.actionText,r=void 0===t?(0,o.t)("add"):t,i=e.isDisabled;return(0,n.jsx)(_.z,{type:"button",small:!0,variant:"text",className:c()("hidden opacity-0 transition-opacity",{"focus:opacity-100 group-hover:opacity-100 md:block":!(void 0!==i&&i)}),children:r})},j=r(957363),w=r(380171),O=function(e){var t=e.children;return(0,n.jsx)("span",{className:"flex items-center gap-2 text-left","data-testid":"space-list-title",children:t})},S=function(e){var t=e.icon,r=void 0===t?void 0:t,i=e.tooltipText,o=void 0===i?void 0:i,a=e.children;return(0,n.jsxs)(O,{children:[(0,n.jsxs)("span",{className:"flex size-4",children:[r&&o&&(0,n.jsx)(w.T,{className:"flex",placement:"top",delay:300,content:o,interactive:!1,children:(0,n.jsx)(j.JO,{type:r,size:16,className:"text-default"})}),r&&!o&&(0,n.jsx)(j.JO,{type:r,size:16,className:"text-default"})]}),a]})},k=function(e){var t=e.isRemovable,r=e.isNotRemovableTooltip,i=e.children;return t?(0,n.jsx)(n.Fragment,{children:i}):(0,n.jsx)(w.T,{className:"flex",placement:"top",delay:300,content:r,interactive:!1,children:i})},N=function(e){var t=e.space,r=e.spaceGroupId,n=e.onAddChild,i=void 0===n?function(e){e()}:n,o=e.onRemoveChild,a=void 0===o?function(e){e()}:o,s=t.id,l=t.name,c=h(),u=c.isSpaceSelected,d=c.addSpaces,f=c.getIsFromSearch,m=c.removeSpaceGroup,p=c.removeSpaces,b=c.notRemovableChildItemTooltip,y=c.isSpaceRemovable,v=u(s),g=function(){d(s)},_=f(l),x=y(s),j=function(){m(r),p([s])};return{isChecked:v,isSpaceFound:_,onAddClick:function(){i(g,t)},isRemovable:x,isNotRemovableTooltip:b,onRemoveClick:function(){a(j,t)}}},P=function(e){var t=e.spaceGroupId,r=e.onRemoveChild,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["spaceGroupId","onRemoveChild"]),a=i.name,s=i.icon,l=i.tooltipText,u=N({space:i,spaceGroupId:t,onRemoveChild:void 0===r?function(e){e()}:r}),f=u.isChecked,m=u.isSpaceFound,p=u.isRemovable,b=u.isNotRemovableTooltip,h=u.onRemoveClick;return(0,n.jsxs)(g,{className:c()({hidden:!f||!m}),isDisabled:!f||!p,onClick:f&&p?h:void 0,children:[(0,n.jsx)(k,{isRemovable:p,isNotRemovableTooltip:b,children:(0,n.jsx)(S,{icon:s,tooltipText:l,children:(0,n.jsx)(y.Z.LabelSm,{children:a})})}),f&&p&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"remove"])})]})},C=function(e){var t=e.spaceGroup,r=e.onAddParent,n=void 0===r?function(e){e()}:r,i=e.onRemoveParent,o=void 0===i?function(e){e()}:i,a=t.id,s=t.name,l=t.spaces,c=h(),u=c.isSpaceGroupSelected,d=c.isSpaceSelected,f=c.addSpaceGroups,m=c.addSpaces,p=c.getIsFromSearch,b=c.removeSpaceGroup,y=c.removeSpaces,v=c.notRemovableParentItemTooltip,g=c.isSpaceGroupRemovable,_=c.isSpaceRemovable,x=p(s)||l.some(function(e){return p(e.name)}),j=l.map(function(e){return e.id}),w=function(){f(a),m(j.filter(function(e){return!d(e)}))},O=(l||[]).filter(function(e){return d(e.id)}),S=u(a),k=S&&O.length===l.length,N=O.filter(function(e){return _(e.id)}),P=S&&N.length===l.length,C=function(){b(a),y(j)};return{isChecked:S,isFromSearch:x,isAllSpacesSelected:k,areAllSpacesSelectedAndRemovable:P,spacesAlreadySelected:O,selectedAndRemovableSpaces:N,onAddClick:function(){return n(w,t)},isRemovable:g(a),isNotRemovableTooltip:v,onRemoveClick:function(){o(C,t)}}},A=function(e){var t=e.onRemoveParent,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["onRemoveParent"]),i=r.name,a=C({spaceGroup:r,onRemoveParent:void 0===t?function(e){e()}:t}),s=a.isChecked,l=a.isFromSearch,u=a.areAllSpacesSelectedAndRemovable,f=a.spacesAlreadySelected,m=a.selectedAndRemovableSpaces,p=a.isRemovable,b=a.isNotRemovableTooltip,h=a.onRemoveClick,v=!s&&0===f.length||!l,_=s&&u?(0,o.t)("space_access_management.list.spaces_counter.all_spaces"):(0,o.t)("space_access_management.list.spaces_counter",{count:m.length});return(0,n.jsxs)(g,{className:c()({hidden:v}),isDisabled:!s||!p,onClick:s&&p?h:void 0,children:[(0,n.jsx)(k,{isRemovable:p,isNotRemovableTooltip:b,children:(0,n.jsx)(O,{children:(0,n.jsxs)(y.Z.LabelSm,{weight:"semibold",children:[i,(0,n.jsx)("span",{className:"font-normal",children:_})]})})}),s&&p&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"remove"])})]})};function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var E=r(117617),L=function(e){var t=e.spaceGroupId,r=e.space,i=e.onAddChild,o=e.onRemoveChild,s=r.name,l=r.icon,u=r.tooltipText,d=N({space:r,spaceGroupId:t,onAddChild:void 0===i?function(e){e()}:i,onRemoveChild:void 0===o?function(e){e()}:o}),f=d.onRemoveClick,m=d.onAddClick,p=d.isChecked,b=d.isSpaceFound,h=d.isRemovable,v=d.isNotRemovableTooltip,_=p?h?f:void 0:m,x=p&&!h;return(0,n.jsxs)(g,{className:c()({hidden:!b}),isDisabled:x,onClick:_,children:[(0,n.jsx)(k,{isRemovable:h,isNotRemovableTooltip:v,children:(0,n.jsx)(S,{icon:l,tooltipText:u,children:(0,n.jsx)(y.Z.LabelSm,{children:s})})}),(0,n.jsx)(a.r,{as:"span",checked:p})]})},D=function(e){var t=e.isToggleEnabled,r=void 0===t||t,i=e.spaceGroup,o=e.onAddParent,s=e.onRemoveParent,l=i.name,u=C({spaceGroup:i,onAddParent:void 0===o?function(e){e()}:o,onRemoveParent:void 0===s?function(e){e()}:s}),d=u.isChecked,f=u.onAddClick,m=u.onRemoveClick,p=u.isFromSearch,b=u.isRemovable,h=u.isNotRemovableTooltip,v=d?b?m:void 0:f,_=r||d&&!b;return(0,n.jsxs)(g,{className:c()({hidden:!p}),isDisabled:_,onClick:v,children:[(0,n.jsx)(k,{isRemovable:b,isNotRemovableTooltip:h,children:(0,n.jsx)(O,{children:(0,n.jsx)(y.Z.LabelSm,{weight:"semibold",children:l})})}),r&&(0,n.jsx)(a.r,{as:"span",checked:d})]})},M=r(437435),R=function(e){var t=e.topicsCountEnabled,r=e.onAddChild,i=e.spaceGroupId,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["topicsCountEnabled","onAddChild","spaceGroupId"]),s=a.name,l=a.icon,u=a.topicsCount,f=a.tooltipText,m=N({onAddChild:void 0===r?function(e){e()}:r,space:a,spaceGroupId:i}),p=m.isChecked,b=m.isSpaceFound,h=m.onAddClick;return(0,n.jsx)(n.Fragment,{children:void 0!==t&&t&&u&&u>=M.t?(0,n.jsx)(w.T,{content:(0,o.t)("settings.topics.space_management.topics_limit_reached"),interactive:!1,children:(0,n.jsx)(g,{isDisabled:!0,className:c()({hidden:p||!b}),children:(0,n.jsx)(S,{icon:l,tooltipText:f,children:(0,n.jsx)(y.Z.LabelSm,{children:s})})})}):(0,n.jsxs)(g,{isDisabled:p,onClick:h,className:c()({hidden:p||!b}),children:[(0,n.jsx)(S,{icon:l,tooltipText:f,children:(0,n.jsx)(y.Z.LabelSm,{children:s})}),!p&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"add"])})]})})},B=function(e){var t=e.isButtonEnabled,r=void 0===t||t,i=e.onAddParent,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["isButtonEnabled","onAddParent"]),s=a.name,l=C({spaceGroup:a,onAddParent:void 0===i?function(e){e()}:i}),u=l.isChecked,f=l.onAddClick,m=l.isFromSearch,p=l.isAllSpacesSelected;return(0,n.jsxs)(g,{isDisabled:u||!r,onClick:f,className:c()({hidden:u&&p||!m}),children:[(0,n.jsx)(O,{children:(0,n.jsx)(y.Z.LabelSm,{weight:"semibold",children:s})}),!u&&r&&(0,n.jsx)(x,{actionText:(0,o.t)([d,"add"])})]})};function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var F="space_access_management",U=function(e){var t=e.title,r=void 0===t?(0,o.t)([F,"no_access"]):t,i=e.actionText,a=void 0===i?(0,o.t)([F,"add_all"]):i,s=e.shouldShowButton,l=e.onClick;return(0,n.jsxs)("div",{className:"flex w-full items-center justify-between px-6 py-5",children:[(0,n.jsx)(y.Z.LabelXxs,{weight:"semibold",color:"text-light",children:r}),(void 0===s||s)&&(0,n.jsx)(_.z,{type:"button",variant:"text",small:!0,onClick:function(){null==l||l()},className:"ring-secondary focus:ring-1",children:a})]})},Z=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("md:bg-primary md:divide-primary h-[60vh] md:divide-y",r),children:t})},G=Object.assign(function(e){var t,r,i=e.children,o=e.className,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children","className"]);return(0,n.jsx)(b,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={children:(0,n.jsx)(Z,{className:c()("border-primary flex flex-col overflow-hidden md:rounded-lg md:border",o),children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{Header:function(e){var t=e.children;return(0,n.jsx)("div",{className:"focus-within:ring-secondary bg-primary border-primary mb-4 flex justify-between rounded-lg border px-3 py-2 focus-within:ring-1 focus-within:ring-inset md:mb-0 md:rounded-none md:rounded-t-lg md:border-0 md:px-6 md:py-3.5",children:t})},SearchBar:function(){var e=h(),t=e.setSearchText,r=e.searchText;return(0,n.jsxs)("div",{className:"text-default flex w-full items-center gap-3",children:[(0,n.jsx)("span",{className:"flex size-4",children:(0,n.jsx)(j.JO,{type:"16-search",size:16,className:"text-default"})}),(0,n.jsx)("input",{className:"md:bg-primary placeholder:text-light w-full border-0 bg-inherit p-0 text-sm leading-none outline-none placeholder:opacity-100 focus:ring-0",type:"text",placeholder:(0,o.t)([d,"search"]),onChange:function(e){t(e.target.value)},value:r,autoFocus:!0}),r.length>0&&(0,n.jsx)("span",{className:"flex size-4",children:(0,n.jsx)(j.JO,{type:"16-close",size:16,className:"text-default cursor-pointer",onClick:function(){t("")}})})]})},AllAccessToggle:function(){var e,t="all_access_enabled",r=(e=(0,i.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=r[0],c=r[1],u=function(){c(function(e){return!e})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:l,onChange:u,className:"hidden"}),(0,n.jsxs)("label",{className:"m-0 flex cursor-pointer select-none items-center gap-3",htmlFor:"checkbox-".concat(t),children:[(0,n.jsx)("span",{className:"text-default text-sm tracking-tighter",children:(0,o.t)(["space_access_management","all_access"])}),(0,n.jsx)(a.r,{as:"span",checked:l,onChange:u})]})]})},Body:function(e){var t=e.children,r=e.className;return(0,h().getHasAnySearchResults)()?(0,n.jsx)("div",{className:c()("flex w-full flex-auto flex-col overflow-hidden",r),children:t}):(0,n.jsx)(v,{})},ListHeader:function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("divide-primary border-primary bg-primary sticky top-0 z-10 hidden divide-x md:flex md:border-b",r),children:t})},ListHeaderColumn:U,ListHeaderColumnNoAccess:function(e){var t=e.title,r=void 0===t?(0,o.t)([d,"no_access"]):t,i=e.shouldShowAddAllButton,a=e.onAddAll,s=h(),l=s.options,c=s.parentFieldName,m=s.childFieldName,p=(0,u.Gc)().setValue,b=[],y=[];l.forEach(function(e){b.push(e.id),e.spaces.forEach(function(e){y.push(e.id)})});var v=function(){p(c,b),p(m,y)};return(0,n.jsx)(U,{title:r,actionText:(0,o.t)([d,"add_all"]),onClick:function(){(a||f)(v)},shouldShowButton:void 0===i||i})},ListHeaderColumnAccessGranted:function(e){var t=e.title,r=void 0===t?(0,o.t)([d,"access"]):t,i=e.onRemoveAll,a=void 0===i?function(e){e()}:i,s=h(),l=s.parentFieldName,c=s.childFieldName,m=s.areAllSpacesAndSpaceGroupsRemovable,p=(0,u.Gc)().setValue,b=function(){p(l,[]),p(c,[])},y=m();return(0,n.jsx)(U,{title:r,actionText:(0,o.t)([d,"remove_all"]),shouldShowButton:y,onClick:y?function(){(a||f)(b)}:void 0})},List:function(e){var t=e.children,r=e.className,i=e.dataTestId;return(0,n.jsx)("ul",{className:c()("list-none py-2 md:p-2",r),"data-testid":i,children:t})},ListContainer:function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:c()("md:divide-primary md:grid md:flex-auto md:grid-cols-2 md:divide-x",r),children:t})},ListNoAccess:function(e){var t=e.shouldShowAddParentButton,r=void 0===t||t,i=e.shouldShowEmptySpaceGroups,o=e.onAddParent,a=e.onAddChild,s=e.className,l=h(),u=l.options,d=l.hasSpaceGroupUnselectedSpaces;return(0,n.jsx)(G.List,{className:c()("hidden md:block",s),dataTestId:"list-space-access-denied",children:u.map(function(e){return d(e)||i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B,z({onAddParent:null!=o?o:f,isButtonEnabled:r},e),"list-no-access-".concat(e.id)),e.spaces.map(function(t){return(0,n.jsx)(R,z({onAddChild:null!=a?a:f,spaceGroupId:e.id,topicsCountEnabled:!0},t),"list-no-access-".concat(e.id,"-").concat(t.id))})]}):null})})},ListAccessGranted:function(e){var t=e.onRemoveParent,r=e.onRemoveChild,i=e.className,o=h().options;return(0,n.jsx)(G.List,{className:c()("hidden md:block",i),dataTestId:"list-space-access-granted",children:o.map(function(e){var i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,T(I({},e),{onRemoveParent:t||f}),"list-access-granted_".concat(e.id)),null==(i=e.spaces)?void 0:i.map(function(t){return(0,n.jsx)(P,T(I({},t),{spaceGroupId:e.id,onRemoveChild:r||f}),"list-access-granted_".concat(e.id,"-").concat(t.id))})]})})})},ListMobile:function(e){var t=e.shouldShowAddParentToggle,r=void 0===t||t,o=e.onAddParent,a=e.onAddChild,s=e.onRemoveParent,l=e.onRemoveChild,c=h().options;return(0,E.Be)()?null:(0,n.jsx)(G.List,{className:"md:hidden",children:c.map(function(e){return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(D,{isToggleEnabled:r,spaceGroup:e,onAddParent:o,onRemoveParent:s},"list-mobile-".concat(e.id)),e.spaces.map(function(t){return(0,n.jsx)(L,{spaceGroupId:e.id,space:t,onAddChild:a,onRemoveChild:l},"list-mobile-".concat(e.id,"-").concat(t.id))})]},e.id)})})},EmptyResult:v})},546410:function(e,t,r){"use strict";r.d(t,{z1:()=>a,_$:()=>x,B_:()=>g});var n=r(131906),i=r(93199),o=r(547144),a=function(e){var t=e.space,r=e.options,a=o.av.spaces.update({id:(void 0===t?{}:t).id});return(0,n.useMutation)(function(e){return(0,i.aU)(a,{space:e})},void 0===r?{}:r)},s=r(932699),l=r(739792),c=r(499385),u=r(441342),d=r(60589),f=r(861853),m=r(72220),p=r(944428),b=r(60878);function h(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)})}}function v(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){var t=e.space,r=e.setOpenNotificationsDropdown,a=void 0===r?function(){}:r,h=e.path,g=t.name,_=t.id,x=(0,n.useQueryClient)(),j=(0,u.wh)(),w=j.currentUser,O=j.currentCommunityMember,S=(0,u.T4)({spaceId:_}).refetch,k=(0,m.a)(f.yf).updateChatRoom,N=(0,u.e2)().actions.refresh,P=(0,u.nT)().actions.refresh,C=(0,c.m)(t.chat_room_uuid).refetchChatRoom,A=(0,p.u)(t.chat_room_uuid).refetchChatParticipants,I=(0,b.pm)(),T=I.success,E=I.error,L=(0,n.useMutation)(function(){return(0,i.Cu)(h||o.av.spaceMembers.joinSpace({spaceId:_}))},{onSuccess:function(){return y(function(){var e;return v(this,function(r){switch(r.label){case 0:return[4,S()];case 1:if(r.sent(),N(),P(),x.invalidateQueries(["spaces"]),!(0,d.Ug)(t))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,C()];case 3:return(e=(r.sent().data||{chat_room:null}).chat_room)&&k(e),[3,5];case 4:return console.error("Error refetching chat room",r.sent()),[3,5];case 5:A(),r.label=6;case 6:return T((0,l.t)("joined_space",{space_name:t.name})),(null==O?void 0:O.profile_confirmed_at)?(0,s.isFunction)(a)&&a(!0):window.location.href=(0,o.lk)({params:{return_to:window.location.href,new_state:!0}}),[2]}})})()},onError:function(e){E(e.message||(0,l.t)("join_space_failed",{space_name:g}))}});return{joinSpace:function(){return y(function(){return v(this,function(e){return w?[2,L.mutateAsync()]:(window.location.href=(0,o.j)(),[2])})})()},isSubmitting:L.isLoading}},_=r(438434),x=function(){return(0,_.p)()}},49845:function(e,t,r){"use strict";r.d(t,{i:()=>i});var n=r(552676),i=function(){return(0,n.jsx)("div",{className:"border-primary h-px border-b"})}},524094:function(e,t,r){"use strict";r.d(t,{y4:()=>k,AO:()=>w,cy:()=>S,NA:()=>O});var n=r(275271),i=r(131906),o=r(739792),a=r(251630),s=r(93199),l=r(437588),c=r(547144),u=r(60878);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=function(e){var t=(0,u.pm)(),r=t.error,d=t.success,p=m((0,n.useState)(null),2),b=p[0],h=p[1],y=m((0,n.useState)(null),2),v=y[0],g=y[1],_=(0,i.useQuery)({queryKey:[c.av.liveStreams.show({id:e})],refetchInterval:!b&&1e4,refetchIntervalInBackground:!b}),x=_.data,j=_.isLoading,w=_.isError,O=_.error,S=_.refetch,k=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(_,["data","isLoading","isError","error","refetch"]),N=m((0,n.useState)(!1),2),P=N[0],C=N[1],A=(0,i.useMutation)(function(e){return a.Qk.join({id:null==x?void 0:x.id,role:e,forReactQuery:!0})},{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(!(0,l.MA)(x))return[3,2];return[4,S()];case 1:t.sent(),t.label=2;case 2:return h(e),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(e){r(e.firstErrorDetail?"".concat((0,o.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,o.t)("live_streams.room.join_error"),"."))}}),I=(0,i.useMutation)(function(e){return a.Qk.leave({id:null==x?void 0:x.id,participantId:null==b?void 0:b.id,reason:e})},{onSuccess:function(e){return h(e)},onError:function(e){(0,s.eE)(e)?h(null):r((0,o.t)("live_streams.room.leave_error"))}}),T=(0,i.useMutation)(function(){return a.Qk.goLive({id:null==x?void 0:x.id,forReactQuery:!0})},{onSuccess:function(){return S()},onError:function(){return r((0,o.t)("live_streams.room.go_live_error"))}}),E={onSuccess:function(){d((0,o.t)("live_streams.room.".concat((0,l.vX)(x),".end_success"))),C(!0),S()},onError:function(){return r((0,o.t)("live_streams.room.".concat((0,l.vX)(x),".end_error")))}},L=(0,i.useMutation)(function(){return a.Qk.endStream({id:null==x?void 0:x.id})},E),D=(0,i.useMutation)(function(){return a.Qk.endStreamDelayed({id:null==x?void 0:x.id})},E),M=(0,i.useMutation)(function(e){return a.Qk.update({id:null==x?void 0:x.id,formData:e})},{onSuccess:function(){S(),d((0,o.t)("live_streams.room.".concat((0,l.vX)(x),".update_success")),{duration:"short",shouldUseProgress:!1})},onError:function(){return r((0,o.t)("live_streams.room.".concat((0,l.vX)(x),".update_error")))}}),R=(0,i.useMutation)(function(e){return a.Qk.update({id:null==x?void 0:x.id,formData:e})},{onSuccess:function(){return S()}});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({room:x,isLoading:j,isError:w,apiError:O,joinAsHost:(0,n.useCallback)(function(){return A.mutate(l.VM.HOST)},[A]),joinAsParticipant:(0,n.useCallback)(function(){return A.mutate(l.VM.HLS_SPECTATOR)},[A]),isJoining:A.isLoading,currentParticipant:b,updateRoom:M.mutate,updateRoomAsync:M.mutateAsync,updateRoomSilentlyAsync:R.mutateAsync,goLive:T.mutate,goLiveAsync:T.mutateAsync,leave:I.mutate,leaveAsync:I.mutateAsync,endStream:L.mutate,endStreamDelayed:D.mutate,endStreamDelayedAsync:D.mutateAsync,onEndStream:function(e){d(e||""),C(!0),S()},isLeaving:I.isLoading,refetchRoom:S,isStreamEnded:(0,l.UT)(x)||P,viewTypeOverride:v,setViewTypeOverride:g},k)},b=r(552676),h=r(932699),y=r(903225),v=function(e,t,r){var o={status:l.wA.ACTIVE,per_page:2e3};(null==r?void 0:r.recording_key)&&(o.recording_key=r.recording_key);var a=(0,i.useQuery)(["participants",null==e?void 0:e.id,null==t?void 0:t.id,null==r?void 0:r.recording_key],function(){return e?(0,s.UT)(c.av.liveStreams.participants({roomId:e.id,params:o})):Promise.resolve({records:[],count:0})},{enabled:!!(null==e?void 0:e.id)&&(!!t||!!r)}),u=a.data,d=a.isLoading,f=a.refetch,m=null==u?void 0:u.records;return{participants:(0,n.useMemo)(function(){return(null==m?void 0:m.reduce(function(e,t){return e[t.id]=t,e},{}))||{}},[m]),isLoadingParticipants:d,refetchParticipants:f,roles:{host:(null==e?void 0:e.creator.id)?[e.creator.id]:null,moderator:(null==m?void 0:m.filter(function(e){return"moderator"===e.role}).map(function(e){return e.community_member_id}))||null}}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e){var t,r,s=(0,u.pm)().error,l=_((0,n.useState)(null),2),c=l[0],d=l[1],f=_((0,n.useState)(null),2),m=f[0],p=f[1],b=(0,i.useMutation)(function(t){return p(t),a.Qk.createRecorder({id:null==e?void 0:e.id,recording_key:t})},{onSuccess:function(e){return d(e)},onError:function(e){s(e.firstErrorDetail?"".concat((0,o.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,o.t)("live_streams.room.join_error"),"."))}});return{createRecorder:b.mutate,isCreatingRecorder:b.isLoading,recorder:c&&(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),r=r={recording_key:m},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)}},j=(0,n.createContext)({status:{isLoadingRoom:!1,isLoadingParticipants:!1,isRoomError:!1,apiError:null,isJoining:!1,isCreatingRecorder:!1,isLeaving:!1,isStreamEnded:!1},data:{room:void 0,recorder:null,participants:{},roles:{host:[],moderator:[]},canHost:!1,currentParticipant:null,viewTypeOverride:null,isConferenceRoom:!1},actions:{joinAsHost:h.noop,joinAsParticipant:h.noop,createRecorder:null,updateRoom:h.noop,updateRoomAsync:function(){return Promise.resolve()},updateRoomSilentlyAsync:function(){return Promise.resolve()},goLive:h.noop,goLiveAsync:function(){return Promise.resolve()},leave:h.noop,leaveAsync:function(){return Promise.resolve()},endStream:h.noop,endStreamDelayed:h.noop,endStreamDelayedAsync:function(){return Promise.resolve()},onEndStream:h.noop,refetchRoom:h.noop,refetchParticipants:h.noop,setViewTypeOverride:h.noop}});j.displayName="LiveStreamContext";var w=function(e){var t=e.children,r=p((0,y.UO)().roomSlug),n=r.room,i=r.isLoading,o=r.isError,a=r.apiError,s=r.joinAsHost,c=r.joinAsParticipant,u=r.isJoining,d=r.currentParticipant,f=r.updateRoom,m=r.updateRoomAsync,g=r.updateRoomSilentlyAsync,_=r.goLive,w=r.goLiveAsync,O=r.leave,S=r.leaveAsync,k=r.endStream,N=r.endStreamDelayed,P=r.endStreamDelayedAsync,C=r.onEndStream,A=r.isLeaving,I=r.refetchRoom,T=r.isStreamEnded,E=r.viewTypeOverride,L=r.setViewTypeOverride,D=x(n),M=D.recorder,R=D.createRecorder,B=D.isCreatingRecorder,z=v(n,d,M),F=z.participants,U=z.isLoadingParticipants,Z=z.refetchParticipants,G={status:{isLoadingRoom:i,isLoadingParticipants:U,isRoomError:o,apiError:a,isJoining:u,isCreatingRecorder:B,isLeaving:A,isStreamEnded:T},data:{room:n,recorder:M,participants:F,roles:z.roles,canHost:!!n&&n.can_host,currentParticipant:d,viewTypeOverride:E,isConferenceRoom:(0,l.$e)(n)},actions:{joinAsHost:s,joinAsParticipant:c,createRecorder:R,updateRoom:f,updateRoomAsync:m,updateRoomSilentlyAsync:g,goLive:_,goLiveAsync:w,leave:O,leaveAsync:S,endStream:k,endStreamDelayed:N,endStreamDelayedAsync:P,onEndStream:C,refetchRoom:I,refetchParticipants:Z,setViewTypeOverride:L}};return(0,b.jsx)(j.Provider,{value:G,children:(0,h.isFunction)(t)?t(G):t})},O=function(){return(0,n.useContext)(j)},S=function(){return O().data},k=function(){return O().actions}},451019:function(e,t,r){"use strict";r.d(t,{HY:()=>s,O6:()=>l,WD:()=>c,gV:()=>d,nb:()=>u,uX:()=>a});var n=Object.freeze({BULK_IMPORT_COMMUNITY_MEMBER:"AsyncTasks::BulkCommunityMemberImportTask",EXPORT_CSV_COMMUNITY_MEMBER_CHARGE:"AsyncTasks::ExportCsv::Paywalls::CommunityMemberCharge",EXPORT_CSV_COMMUNITY_MEMBER_SUBSCRIPTION:"AsyncTasks::ExportCsv::Paywalls::CommunityMemberSubscription",ACCESS_GROUP_MANAGE_MEMBERS:"AsyncTasks::AccessGroups::ManageMembersTask",PAYWALL_MEMBERS_MIGRATION:"AsyncTasks::AccessGroups::PaywallMembersMigrationTask"}),i=Object.freeze({PENDING:"pending",PROCESSING:"processing",COMPLETED:"completed",PARTIAL_SUCCESS:"partial_success",FAILED:"failed"}),o=Object.freeze({FINISHED:"asyncTaskFinished",UPDATED:"asyncTaskUpdated"}),a="AsyncTaskChannel",s=function(e){return e===o.FINISHED},l=function(e){return e===o.UPDATED},c=function(e){return e===i.FAILED},u=function(e){return e===n.ACCESS_GROUP_MANAGE_MEMBERS},d=function(e){return e===n.PAYWALL_MEMBERS_MIGRATION}},65119:function(e,t,r){"use strict";r.d(t,{B$:()=>a,Cc:()=>m,Hv:()=>p,MS:()=>l,O4:()=>d,XG:()=>c,nl:()=>f,t:()=>u,vv:()=>s});var n=r(739792),i=r(656450),o=r(134870),a=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.self_paced},s=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.structured},l=function(e){var t;return(null==e?void 0:e.post_type)==="course"&&(null==e||null==(t=e.course_setting)?void 0:t.course_type)===i.d.scheduled},c=function(e){return l(e)||s(e)},u=function(e){var t=e.drippedAt,r=e.dripDelay,i=e.needsToCompletePreviousLesson,o=e.lessonLabel,a=e.sectionLabel;if(i)return(0,n.t)("courses.edit.lesson.unlock_by_completing",{this_lesson:(0,n.t)(["courses.edit.lesson.unlock_by_completing_variables","this_lesson",o]),all_previous_lessons:(0,n.t)(["courses.edit.lesson.unlock_by_completing_variables","all_previous_lessons",o])});if(t){var s=d(t);return"".concat((0,n.t)("courses.edit.lesson.available_on_tooltip")," ").concat(s)}var l=f(r),c=p(m(r),l);return(0,n.t)("courses.edit.lesson.available_after_drip_delay",{drip_delay:c,the_lesson:(0,n.t)(["courses.edit.lesson.available_after_drip_delay_variables","the_lesson",o]),in_this_section:(0,n.t)(["courses.edit.lesson.available_after_drip_delay_variables","in_this_section",a])})},d=function(e){return(0,o.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},f=function(e){return e%7!=0||0===e?"days":"weeks"},m=function(e){return e%7==0?e/7:e},p=function(e,t){return 0===e?(0,n.t)("courses.edit.sections.drip_schedule.form.immediately"):"".concat(e," ").concat(b(e,t))},b=function(e,t){return(0,n.t)("courses.edit.sections.drip_schedule.form.".concat(t),{count:e})}},788004:function(e,t,r){"use strict";r.d(t,{U:()=>i});var n=r(547144),i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r?{post_login_redirect:window.location.href}:{post_login_redirect:window.location.href,signup:!0};return e?t:n.$T.signIn({params:i})}},238649:function(e,t,r){"use strict";r.d(t,{o:()=>n});var n=function(e){return e>99?"99+":e}},914899:function(e,t,r){"use strict";r.d(t,{$1:()=>a,Q_:()=>i,_k:()=>l,yK:()=>s});var n=r(743032),i=Object.freeze({RESTRICTED:"restricted",PENDING:"pending",REJECTED:"rejected",ENABLED:"enabled"}),o=Object.freeze({STRIPE_US:"CommunityPaymentProcessors::StripeUnitedStates",STRIPE_BR:"CommunityPaymentProcessors::StripeBrazil",REVENUE_CAT:"CommunityPaymentProcessors::RevenueCat"}),a=function(e){return[function(){return e?void 0:n.J6.NOT_EXIST},function(){return(null==e?void 0:e.status)===i.RESTRICTED?n.J6.RESTRICTED:void 0},function(){return(null==e?void 0:e.is_restricted_for_application_fees)?n.J6.RESTRICTED_FOR_APPLICATION_FEES:void 0},function(){return(null==e?void 0:e.status)===i.PENDING?n.J6.PENDING:void 0},function(){return(null==e?void 0:e.status)===i.REJECTED?n.J6.REJECTED:void 0}]},s=function(e){var t;return null!=(t=null==e?void 0:e.includes(o.REVENUE_CAT))&&t},l=function(e){return e===n.J6.ENABLED}},549882:function(e,t,r){"use strict";r.d(t,{Fy:()=>n,UI:()=>i,Ui:()=>s,a8:()=>l,xn:()=>o,zA:()=>a}),r(547144);var n={onboarding:function(){return"/getting-started"},templates:function(e){return"/communities/".concat(e,"/templates")},questions:function(e){return"/communities/".concat(e,"/questions")},questionsWithVariant:function(e,t){return"".concat(n.questions(e),"?variant=").concat(t)},feed:function(){return"/feed"},adminRecap2025:function(){return"/settings/recap-2025"},recap2025ForMembersAndNonMembers:function(){return"/2025"}},i=function(){return"/members"},o=function(e){return n.questionsWithVariant(e,"goals")},a=function(e){return e.endsWith("/templates")},s=function(e,t){return e.endsWith("/questions")&&t.includes("variant=goals")},l=function(e){return n.questions(e)}},442959:function(e,t,r){"use strict";r.d(t,{TO:()=>c,iQ:()=>l,wh:()=>a,yG:()=>s,zb:()=>o});var n=r(932699);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var o=function(e){var t,r=e.spaceGroupId,n=e.currentCommunityMember;return null==n||null==(t=n.hidden_space_group_ids)?void 0:t.includes(r)},a=function(e){var t,r=e.spaceGroup;return null==r||null==(t=r.policies)?void 0:t.can_manage_space_group},s=function(e){var t;return null==(t=e.spaceGroup.policies)?void 0:t.can_create_space},l=function(e){var t,r,o=e.spaceGroup,a=e.spaces,s=e.spacesWithDetails,l=void 0===s?[]:s,c=a.filter(function(e){return e.space_group_id==o.id}).map(function(e){return i({},e,(0,n.find)(l,{id:e.id})||{})});return t=i({},o),r=r={spaces:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},c=function(e){return"paywall"===e}},822301:function(e,t,r){"use strict";r.d(t,{X:()=>n});var n={edit:function(e){var t=e.accessGroupId;return"/settings/access_groups/".concat(t)}}},603852:function(e,t,r){"use strict";r.d(t,{O:()=>a});var n=r(776025),i=r(449673),o=r(89864),a=function(e){var t=e.type,r=e.slug,a=e.space_slug,s=e.section_id,l=e.lesson_id,c=e.params,u=void 0===c?{}:c;return t.toLowerCase()===n.cM.SPACE?(0,i.a)("/c/".concat(r),u):"lesson"===t.toLowerCase()?(0,i.a)("/c/".concat(a,"/sections/").concat(s,"/lessons/").concat(l),u):(0,o.L)({spaceSlug:a,slug:r,params:u})}},989504:function(e,t,r){"use strict";r.d(t,{J:()=>n});var n=function(e){switch(e){case"alphabetical":return{name:"asc"};case"oldest":return{created_at:"asc"};case"latest":default:return{created_at:"desc"};case"role":return{role:"asc"}}}},856812:function(e,t,r){"use strict";r.d(t,{Y:()=>i});var n=r(125578),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";if(window&&window.open&&(0,n._)(e)){e.match(/^https?:\/\//i)||(e="http://".concat(e));var r=window.open(e,t);r&&r.focus()}}},255717:function(e,t,r){"use strict";r.d(t,{K:()=>f,w:()=>u});var n=r(932699),i=r(131906),o=r(93199),a=r(547144),s=r(441342);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c=["community-setting","show"],u=function(){return(0,i.useQuery)(c,function(){var e=a.av.communities.communitySettings.index();return(0,o.UT)(e)})},d=function(e){var t=e.data,r=e.updates,n=a.av.communities.communitySettings.update({communitySettingId:t.community_settings.id});return(0,o.gN)(n,{community_setting:r})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMutate,r=void 0===t?n.noop:t,o=e.onSuccess,a=void 0===o?n.noop:o,u=e.onError,f=void 0===u?n.noop:u,m=e.onSettled,p=void 0===m?n.noop:m,b=(0,s.wh)().refetch,h=(0,i.useQueryClient)();return(0,i.useMutation)(d,{onMutate:function(e){var t=e.data,n=h.getQueryData(c);return h.setQueryData(c,t),r&&r(),{previousData:n,data:t}},onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,b()];case 1:return t.sent(),h.setQueryData(c,e),a&&a(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:f,onSettled:p})}},935975:function(e,t,r){"use strict";r.d(t,{L:()=>l,M:()=>c});var n=r(275271),i=r(131906),o=r(203176);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var l=10,c=function(){var e,t,r,c,u,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=d.query,m=void 0===f?"":f,p=d.filters,b=void 0===p?{}:p,h=d.perPage,y=void 0===h?l:h,v=d.initialPage,g=void 0===v?1:v,_=d.options,x=(0,o.L)().listAccessGroups,j=["access_groups_list",m,b,y],w=a({getNextPageParam:function(e){return e.has_next_page?parseInt(e.page)+1:void 0},getPreviousPageParam:function(e){return e.page>1?parseInt(e.page)-1:void 0},keepPreviousData:!0},void 0===_?{}:_),O=(0,i.useInfiniteQuery)(j,function(e){var t=e.pageParam,r=void 0===t?g:t;return x({params:s(a({page:Number(r)>0?Number(r):1},b),{per_page:y,query:m})})},w),S=(0,n.useMemo)(function(){var e;return(null==(e=O.data)?void 0:e.pages)||[]},[null==(e=O.data)?void 0:e.pages]),k=(null==(r=S[0])||null==(t=r.meta)?void 0:t.total_count)||0,N=(null==(c=S[0])?void 0:c.count)||0,P=(null==(u=S[0])?void 0:u.per_page)||y;return s(a({},O),{queryKey:j,totalAccessGroups:k,totalQueryAccessGroups:N,pageSize:P,pages:S})}},517990:function(e,t,r){"use strict";r.d(t,{l:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!((null==e?void 0:e.access_groups_enabled)&&(null==e?void 0:e.access_groups_workflows_enabled))}},46731:function(e,t,r){"use strict";r.d(t,{$:()=>a,d:()=>s});var n=r(131906),i=r(93199),o=r(547144),a="access-group-sources-by-record",s=function(e){var t=e.recordType,r=e.recordId,s=(0,n.useQuery)([a,t,r],function(){return(0,i.UT)(o.av.admin.accessGroupSources.index({record_type:t,record_id:r}))});return{accessGroupSources:s.data,isLoadingAccessGroupSources:s.isLoading}}},337140:function(e,t,r){"use strict";r.d(t,{t:()=>s});var n=r(131906),i=r(203176);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=["access_groups","show"],s=function(e){var t=(0,i.L)().showAccessGroup,r=((function(e){if(Array.isArray(e))return o(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]),s=(0,n.useQuery)(r,function(){return t(e)});return{queryKey:r,accessGroup:s.data,isLoadingAccessGroup:s.isLoading}}},956368:function(e,t,r){"use strict";r.d(t,{b:()=>u});var n,i=r(131906),o=r(93199),a=r(698173),s=r(304403);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(l(n={},s.ry.Space,a.a.accessRegistry.spaces),l(n,s.ry.SpaceGroup,a.a.accessRegistry.spaceGroups),l(n,s.ry.AccessGroup,a.a.accessRegistry.accessGroups),n),u=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=c[e];return(0,i.useQuery)(["access_registry_content_spec",e,t],function(){return(0,o.UT)(n.show(t))},{enabled:r})}},579664:function(e,t,r){"use strict";r.d(t,{Qb:()=>l,Sh:()=>u,iO:()=>c});var n=r(932699),i=r(131906),o=r(93199),a=r(547144),s=["reusableBlocks"],l=function(e){var t=e.onSuccess,r=void 0===t?n.noop:t,l=e.onError,c=void 0===l?n.noop:l,u=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:function(e){return(0,o.Cu)(a.av.settings.sites.reusableBlocks.create(),e)},onSuccess:function(){u.invalidateQueries(s),r()},onError:c})},c=function(){return(0,i.useQuery)({queryKey:s,queryFn:function(){return(0,o.UT)(a.av.settings.sites.reusableBlocks.index())},staleTime:3e5})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=void 0===t?n.noop:t,l=e.onError,c=void 0===l?n.noop:l,u=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:function(e){return(0,o.pC)(a.av.settings.sites.reusableBlocks.destroy({id:e}))},onSuccess:function(){u.invalidateQueries(s),r()},onError:c})}},62695:function(e,t,r){"use strict";r.d(t,{Z:()=>c});var n=r(131906),i=r(739792),o=r(60878),a=r(93199),s=r(547144),l=r(764208),c=function(){var e=(0,o.pm)(),t=(0,l.r)().resetNewBadgeIds,r=(0,n.useMutation)(function(){return(0,a.gN)(s.av.chatThreads.markAllAsRead())},{onSuccess:function(){t(),e.success((0,i.t)("header_v3.chat_threads_marked_as_read"))}});return{markAllChatThreadsAsRead:r.mutateAsync,isLoading:r.isLoading}}},598694:function(e,t,r){"use strict";r.d(t,{K:()=>j});var n=r(275271),i=r(131906),o=r(93199),a=r(547144),s=r(739792),l=r(403697),c=r(861853),u=r(372202),d=r(502504),f=r(251630);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||y(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}var v=function(e){var t=e.communityId,r=(0,c.CD)().setUnreadChatRoomUuids,m=(0,d.t)().sendNotificationToDesktopApp,y=(0,u.i)({communityId:t}),v=b((0,n.useState)([]),2),g=v[0],_=v[1],x=b((0,n.useState)(null),2),j=x[0],w=x[1],O=(0,n.useRef)(y),S=(0,n.useRef)(g),k=(0,i.useMutation)(function(){return f.MS.getChatRoomCurrentParticipant(j)},{mutationKey:["chatroom","participant",j]}),N=function(e,t,r){var n;return(n=function(){var n,i,o,a,c,u,d,f,p,b,y,v;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:if(!(i=t.json_message)||(o=i.chat_room_uuid,a=i.chat_room_kind,c=i.sender,u=i.embedded,d=null==(n=window.location.pathname)?void 0:n.split("messages/")[1],f=c.community_member_id,p=d===o,b=a===l.g8,f!==r&&m({title:"".concat(i.sender.name," ").concat((0,s.t)("desktop_app.notifications.new_message_text")),body:i.body,metadata:i,type:"message"}),u||p))return[2];if(w(o),b)return[3,2];return[4,k.mutateAsync()];case 1:y=null==(v=g.sent())?void 0:v.chat_room_participant,g.label=2;case 2:if(f===Number(r)||(null==y?void 0:y.muted))return[2];return(null==e?void 0:e.find(function(e){return e===o}))||(_(h(S.current).concat([o])),setTimeout(function(){return P()},2e3)),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)})})()},P=function(){r(Number(t),h(new Set(h(O.current).concat(h(S.current))))),_([])},C=function(e,n){var i,o=n.chat_room_uuid;if(o){var a=null==e?void 0:e.filter(function(e){return e!==o});_(null==S||null==(i=S.current)?void 0:i.filter(function(e){return e!==o})),r(Number(t),a)}},A=function(e,n){var i=n.chat_room_uuids;if(i){var o=e.filter(function(e){return!i.includes(e)});r(Number(t),o)}};return O.current=y,S.current=g,{unreadChatRoomUuids:y,onEventReceive:function(e,t,r){switch(t.event){case"newMessage":N(e,t,r);break;case"chatRoomRead":C(e,t);break;case"chatMarkAllAsRead":A(e,t)}},fetchUnreadChatRoomUuids:function(e){(0,o.UT)(a.av.chatRooms.unreadChatRooms({params:{community_id:e}})).then(function(t){t.chat_room_uuids&&r(Number(e),t.chat_room_uuids)}).catch(function(e){console.error(e)})},unreadChatRoomUuidsRef:O,newUnreadChatRoomBatch:g,newUnreadChatRoomBatchRef:S,setUnreadChatRoomUuids:r}},g=r(263271),_=r(441342),x=r(532701),j=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).community,t=(0,_.wh)(),r=t.currentCommunity,s=t.currentCommunityMember,l=(0,x.gq)().showMessagesTab,c=e?e.community_member_id:null==s?void 0:s.id,u=e?e.id:null==r?void 0:r.id,d=v({communityId:u}),f=d.unreadChatRoomUuids,m=d.onEventReceive,p=d.setUnreadChatRoomUuids,b=d.unreadChatRoomUuidsRef,h=d.newUnreadChatRoomBatch,y=d.newUnreadChatRoomBatchRef;return(0,i.useQuery)(["UNREAD_CHAT_ROOMS_COUNT",u,c],function(){return(0,o.UT)(a.av.chatRooms.unreadChatRooms({params:{community_id:u}}))},{enabled:!!(u&&c&&l),onSuccess:function(e){e.chat_room_uuids&&p(u,e.chat_room_uuids)}}),(0,g.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){m(b.current,e,c)},community_member_id:c,canCreateConnection:!!(u&&c)}),(0,n.useEffect)(function(){b.current=f},[f]),(0,n.useEffect)(function(){y.current=h},[h]),{unreadChatCount:f.length,unreadChatRoomUuids:f}}},115794:function(e,t,r){"use strict";r.d(t,{j:()=>f});var n=r(275271),i=r(131906),o=r(739792),a=r(60878),s=r(441342),l=r(93199),c=r(547144),u=r(861853),d=r(372202),f=function(){var e=(0,s.wh)(),t=e.currentCommunitySettings,r=e.currentCommunity,f=(0,a.pm)(),m=(t||{}).cached_unread_chat_room_ids_enabled,p=Number(null==r?void 0:r.id),b=(0,u.CD)().setUnreadChatRoomUuids,h=(0,d.i)({communityId:p}),y=(0,n.useMemo)(function(){var e={};return m?e.only_unread=!0:e.uuids=h,e},[m,h]),v=(0,i.useMutation)(function(){return(0,l.gN)(c.av.chatRooms.markAllAsRead({params:y}))},{onSuccess:function(){b(p,[]),f.success((0,o.t)("header_v3.chats_marked_as_read"))}});return{markAllChatRoomAsRead:v.mutateAsync,isLoading:v.isLoading}}},372202:function(e,t,r){"use strict";r.d(t,{i:()=>a});var n=r(932699),i=r(441342),o=r(861853),a=function(e){var t=e.communityId,r=(0,i.wh)().currentCommunity,a=t||(null==r?void 0:r.id),s=(0,o.CD)().unreadChatRoomUuids;return(0,n.isNull)(a)?[]:s[a]||[]}},606216:function(e,t,r){"use strict";r.d(t,{U:()=>f});var n=r(131906),i=r(739792),o=r(93199),a=r(547144),s=r(60878);function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var c=function(){return(0,o.UT)((0,a.Nu)())},u=function(e){var t=e.map(function(e){return e.id});return(0,o.aU)((0,a.pW)(),{community_order:t})},d=["COMMUNITY_SWITCHER"],f=function(){var e=(0,n.useQuery)(d,c),t=e.data,r=e.isLoading,o=e.refetch,a=(0,s.pm)(),f=(0,n.useMutation)(u,{onSuccess:function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)})})()},onError:function(){a.error((0,i.t)("community_switcher_reorder.reorder_error"))}}),m=f.mutate,p=f.isLoading,b=(null==t?void 0:t.token)||"";return{communities:(null==t?void 0:t.communities)||[],token:b,isLoadingCommunities:r,isReorderingCommunities:p,refetchCommunities:o,onSortCommunities:m}}},631220:function(e,t,r){"use strict";r.d(t,{z:()=>a});var n=r(275271),i=r(441342),o={isApiFeatureEnabled:!1,isAdminApiFeatureEnabled:!1,isDataApiFeatureEnabled:!1,isHeadlessApiFeatureEnabled:!1,isOverviewTabEnabled:!1},a=function(){var e=(0,i.wh)(),t=e.currentCommunity,r=e.isLoading;return(0,n.useMemo)(function(){if(r||!t)return o;var e=t.api_access_feature_flag_enabled,n=t.admin_api_feature_flag_enabled,i=t.headless_api_feature_flag_enabled;return{isApiFeatureEnabled:e,isAdminApiFeatureEnabled:n,isDataApiFeatureEnabled:t.data_api_feature_flag_enabled,isHeadlessApiFeatureEnabled:i,isOverviewTabEnabled:n||i}},[t,r])}},816040:function(e,t,r){"use strict";r.d(t,{K:()=>c});var n=r(275271),i=r(131906),o=r(739792),a=r(251630),s=r(60878);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r=e.event,c=(t=(0,n.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,s.pm)().error,m=function(e){return f((null==e?void 0:e.message)?null==e?void 0:e.message:(0,o.t)("something_went_wrong"))},p=(0,i.useMutation)(function(){return a.S1.fetchRecurring({event:r})},{onSuccess:function(e){return d(e)},onError:m}),b=p.mutate;return{isLoading:p.isLoading,events:u,fetchEvents:b,onRecurringRsvpSubmit:(0,i.useMutation)(function(e){return a.S1.recurringRsvp({event:r,params:e})},{onError:m}).mutateAsync,onRecurringUnRsvpSubmit:(0,i.useMutation)(function(e){return a.S1.recurringUnRsvp({event:r,params:e})},{onError:m}).mutateAsync}}},359043:function(e,t,r){"use strict";r.d(t,{g:()=>c});var n=r(275271),i=r(78456),o=r(441342),a=r(255717),s=r(761740),l=r(776937).aP["0"],c=function(e){var t=(0,o.wh)(),r=t.currentCommunityMember,c=t.currentUser,u=(0,a.w)(),d=u.data,f=u.isLoading,m=null==d?void 0:d.community_settings,p=(0,s.T)({defaultSort:l,scopeResults:e,per_page:3}),b=p.members,h=p.isLoading;return{members:b,isLoading:(0,n.useMemo)(function(){return f||h},[f,h]),canSeeMembersDirectory:(0,n.useMemo)(function(){var e=null==m?void 0:m.public_member_directory,t=(0,i.vb)(r);return e||t},[m,r,c]),canSeeMembersAvatarRow:(0,n.useMemo)(function(){return c},[c])}}},157670:function(e,t,r){"use strict";r.d(t,{p:()=>u});var n=r(392042),i=r.n(n),o=r(131906),a=r(739792),s=r(93199),l=r(441342),c=r(60878),u=function(e,t){var r=(0,l.wh)().currentCommunityMember,n=(0,c.pm)(),u=n.success,d=n.error;return{downloadMembersCSV:(0,o.useMutation)(function(e){var t=e.downloadURL;return(0,s.UT)(t)},{onSuccess:function(){u((0,a.t)("export_member_csv.message",{email:r.email})),i()(e)&&e()},onError:function(){d((0,a.t)("export_member_csv.error_message")),i()(t)&&t()}}).mutate}}},484057:function(e,t,r){"use strict";r.d(t,{f:()=>d});var n=r(275271),i=r(93199),o=r(547144);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||u(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=l((0,n.useState)([]),2),r=t[0],a=t[1],u=l((0,n.useState)(0),2),d=u[0],f=u[1],m=l((0,n.useState)(!1),2),p=m[0],b=m[1],h=l((0,n.useState)(!1),2),y=h[0],v=h[1],g=function(t,r){return(0,i.UT)("internal_api/notifications?page=".concat(t,"&per_page=").concat(e,"&notification_group=").concat(r)).then(function(e){1===t?a(c(e.records)):a(function(t){return c(t).concat(c(e.records))}),v(!0),b(e.has_next_page)})};return{dataLoaded:y,setDataLoaded:v,notifications:r,newNotificationCount:d,setNewNotificationCount:f,hasNextPage:p,setHasNextPage:b,fetchNotifications:g,fetchFirstPage:function(e){var t;return(t=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,g(1,e)];case 1:return t.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)})})()},resetNewNotificationsCount:function(){d&&(0,i.Cu)(o.BT.resetNotificationCount()).then(function(e){f(e.new_notifications_count)}).catch(function(e){console.error(e)})},markAsRead:function(e){e.read_at||(0,i.gN)(o.BT.markAsRead({id:e.id})).then(function(t){a(r.map(function(r){return r.id===e.id?t.record:r}))}).catch(function(e){console.error(e)})},markAllAsRead:function(){(0,i.Cu)(o.BT.markAllAsRead()).then(function(){var e=new Date().toString();a(r.map(function(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={read_at:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}))}).catch(function(e){console.error(e)})},archiveNotification:function(e){(0,i.gN)("internal_api/notifications/".concat(e.id,"/archive")).then(function(){a(r.filter(function(t){return t.id!==e.id}))}).catch(function(e){console.error(e)})},fetchNewNotificationsCount:function(e){return(0,i.UT)((0,o.Rp)()+"?community_id=".concat(e)).then(function(e){f(e.new_notifications_count),e.new_notifications_count&&v(!1)})},resizeNotificationWindow:(0,n.useCallback)(function(){var e=document.getElementById("bottomBarNotificationWrapperOuter"),t=document.getElementById("bottomBarNotificationWrapperInner");if(e){var r=window.innerHeight-56;e.style.height=r+"px"}if(t){var n=window.innerHeight-215;t.style.height=n+"px"}},[]),onNotificationEventReceive:function(e){switch(e.event){case"resetNewNotificationCount":case"updateNewNotificationCount":f(e.new_notifications_count);break;case"newNotification":f(d+1)}},unfollowNotification:function(e){(0,i.pC)("internal_api/posts/".concat(e.post_id,"/post_followers/").concat(e.post_follower_id)).then(function(t){a(r.map(function(r){return r.id===e.id&&t.success&&(r.post_follower_id=null),r}))}).catch(function(e){console.error(e)})},followNotification:function(e){(0,i.Cu)("internal_api/posts/".concat(e.post_id,"/post_followers")).then(function(t){a(r.map(function(r){return r.id===e.id&&t.success&&(r.post_follower_id=t.post_follower_id),r}))}).catch(function(e){console.error(e)})}}}},722273:function(e,t,r){"use strict";r.d(t,{_o:()=>a,pI:()=>s});var n=r(131906),i=r(503471),o=r(836047),a="paywall-coupons-list",s=function(e){var t=e.paywallId,r=e.couponStatuses,s=void 0===r?Object.values(o.U):r,l=e.skipDateValidations,c=void 0===l||l,u=e.queryParams,d=e.enabled,f=void 0!==d&&d||!!t;return{paywallCouponsListQuery:(0,n.useQuery)([a,t,{couponStatuses:s,skipDateValidations:c}],i.p.index({paywallId:t,skipDateValidations:c,couponStatuses:s}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:f},void 0===u?{}:u))}}},619043:function(e,t,r){"use strict";r.d(t,{O:()=>s,o:()=>o});var n=r(131906),i=r(847373),o="paywalls-list",a=[],s=function(e){var t,r=e.communityMemberId,s=e.status,l=void 0===s?a:s,c=e.queryParams,u=e.spaceIds,d=void 0===u?[]:u;return{paywallsListQuery:(0,n.useQuery)([o,r,{status:l,spaceIds:d}],i.i.index({community_member_id:null!=(t=null==r?void 0:r.toString())?t:"",status:l.join(","),space_ids:d.filter(function(e){return null!=e}).map(function(e){return String(e)}).join(",")}),void 0===c?{}:c)}}},416461:function(e,t,r){"use strict";r.d(t,{u:()=>s});var n=r(131906),i=r(93199),o=r(547144);function a(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}var s=function(e){return(0,n.useMutation)(function(){var e;return(e=function(){return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){return[2,(0,i.pC)(o.av.planTrials.destroy())]})},function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)})})()},e)}},631405:function(e,t,r){"use strict";r.d(t,{j0:()=>c});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(506097);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var c=function(){var e,t,r,i,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=u.perPage,f=void 0===d?10:d,m=u.initialPage,p=void 0===m?1:m,b=u.options,h=u.scope,y=["recommendations",void 0===h?"default":h,f,p],v=l({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===b?{}:b),g=(0,a.useInfiniteQuery)(y,function(e){var t=e.pageParam,r=void 0===t?p:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,per_page:f};return s.v.getRecommendations(i)},v),_=(0,n.useMemo)(function(){var e;return(null==(e=g.data)?void 0:e.pages)||[]},[null==(r=g.data)?void 0:r.pages]),x=(null==(i=_[0])?void 0:i.count)||0,j=(null==(c=_[0])?void 0:c.per_page)||f,w=(0,n.useMemo)(function(){return o()(_.map(function(e){return e.records}))},[_]);return e=l({},g),t=t={queryKey:y,recommendations:w,pageSize:j,pages:_,count:x},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},535410:function(e,t,r){"use strict";r.d(t,{K:()=>c});var n=r(131906),i=r(903225),o=r(739792),a=r(452187),s=r(547144),l=r(60878),c=function(){var e=(0,l.pm)(),t=e.success,r=e.error,c=(0,i.k6)(),u=(0,n.useMutation)(function(e){return a.b.renew(e)},{onSuccess:function(){c.push((0,s.f$)()),t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.renew_error"))}}),d=u.mutate,f=u.isLoading,m=(0,n.useMutation)(function(e){return a.b.update(Number(e),0,null)},{onSuccess:function(){c.push((0,s.f$)()),t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.update_subscription_error"))}}),p=m.mutate,b=m.isLoading,h=(0,n.useMutation)(function(){return a.b.reactivateEmailHubSubscription()},{onSuccess:function(){t((0,o.t)("pricing_plans.subscription_updated"))},onError:function(){r((0,o.t)("pricing_plans.errors.update_subscription_error"))}});return{renewSubscription:d,isRenewLoading:f,updateSubscription:p,isUpdatingSubscription:b,reactivateEmailHubSubscription:h.mutate,isReactivatingEmailHubSubscription:h.isLoading}}},116235:function(e,t,r){"use strict";r.d(t,{A:()=>_});var n=r(275271),i=r(131906),o=r(615679),a=r(251630),s=r(552676),l=r(757105),c=r(434519),u=r(194281),d="dismissed",f="closed_after_success",m=function(e){var t=e.disabledAgents,r=e.variant,n=(0,l.dd)();return(0,s.jsxs)(c.u_,{isOpen:n.visible,onClose:function(){n.resolve(d),n.hide()},children:[(0,s.jsx)(c.u_.Overlay,{}),(0,s.jsx)(u.d,{variant:void 0===r?"edit":r,disabledAgents:t,onPublish:function(){n.resolve(f),n.hide()},onCancel:function(){n.resolve(d),n.hide()}})]})},p=l.gk.create(function(e){var t=e.disabledAgents,r=e.variant;return(0,s.jsx)(m,{disabledAgents:t,variant:r})}),b=function(){var e=(0,l.dd)(p);return{modal:e,isDisabledAgentsModalVisible:e.visible}},h=r(794644),y=r(623766),v=function(e,t,r){t&&(r.current=t),e.show().then(function(){r.current=null})},g=function(e,t,r){(0,h.N6)(t).then(function(t){var n=t.disabledAgents;n.length>0?e.show({disabledAgents:n,variant:"cancel"}).then(function(e){e===f&&(0,h.uj)(n).then(function(){r()})}):r()})},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.actions,r=e.steps,s=e.workflowId,l=(0,o.d)(),c=b().modal,u=(0,y.E)(),d=(0,a.WX)(),f=(0,i.useQuery)({queryKey:["workflow",s],queryFn:function(){return d.fetch({id:null!=s?s:""})},enabled:!t&&!!s}).data,m=(0,n.useMemo)(function(){var e;return null!=(e=null!=t?t:null==f?void 0:f.actions)?e:[]},[t,f]),p=(null==m?void 0:m.length)?m.some(function(e){var t;return null==(t=e.action_type)?void 0:t.startsWith("ai_")}):null!=r&&!!r.length&&r.some(function(e){return null==e?void 0:e.startsWith("ai_")}),h=(0,n.useRef)(null),_=u&&p,x=l.visible&&!!s&&h.current===s,j=(0,n.useCallback)(function(e){if(_)return void v(l,s,h);g(c,m,e)},[_,l,s,c,m]);return{shouldBlockActivation:_,handleActivationAttempt:j,showModal:(0,n.useCallback)(function(){return l.show()},[l]),isModalVisible:x}}},809163:function(e,t,r){"use strict";r.d(t,{L8:()=>u,mA:()=>d,zw:()=>c});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(222588);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var c={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest"},u=20,d=function(){var e,t,r,i,d,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=f.query,p=void 0===m?"":m,b=f.sort,h=void 0===b?c.ALPHABETICAL:b,y=f.filters,v=void 0===y?{}:y,g=f.perPage,_=void 0===g?u:g,x=f.status,j=f.workflowType,w=f.initialPage,O=void 0===w?1:w,S=f.options,k=(0,s.W)(),N=["all-workflows",p,h,v,_,x,j,O],P=l({getNextPageParam:function(e){return e.has_next_page&&e.page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page&&e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===S?{}:S),C=(0,a.useInfiniteQuery)(N,function(e){var t=e.pageParam,r=void 0===t?O:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,sort:h,filters:v,status:x,workflow_type:j,per_page:_};return p&&(i.query=p),k.list({params:i})},P),A=(0,n.useMemo)(function(){var e;return(null==(e=C.data)?void 0:e.pages)||[]},[null==(r=C.data)?void 0:r.pages]),I=(null==(i=A[0])?void 0:i.total_count)||0,T=(null==(d=A[0])?void 0:d.per_page)||_,E=(0,n.useMemo)(function(){return o()(A.map(function(e){return e.records}))},[A]);return e=l({},C),t=t={queryKey:N,totalWorkflows:I,workflows:E,pageSize:T,pages:A},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},759705:function(e,t,r){"use strict";r.d(t,{L:()=>d,_:()=>f});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(93199),l=r(547144);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var d=30,f=function(){var e,t,r,i,f,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=m.query,b=void 0===p?"":p,h=m.order,y=m.filters,v=void 0===y?[]:y,g=m.perPage,_=void 0===g?d:g,x=m.initialPage,j=void 0===x?1:x,w=m.options,O=m.scope,S=void 0===O?{}:O,k=m.isAdminScope,N=void 0!==k&&k,P=["audience",b,h,v,_,S,N],C=(0,a.useInfiniteQuery)(P,function(e){var t=e.pageParam,r=void 0===t?j:t,n=1;"number"==typeof r&&r>0&&(n=r);var i=c({page:n,filters:v.map(function(e){return"near_me"===e.key?u(c({},e),{key:"geo_location"}):e}),per_page:_},S);b&&(i.query=b),h&&(i.order=h);var o=N?l.av.admin.search.contacts.index:l.av.search.contacts.index;return(0,s.UT)(o({params:i}))},c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===w?{}:w)),A=(0,n.useMemo)(function(){var e;return(null==(e=C.data)?void 0:e.pages)||[]},[null==(e=C.data)?void 0:e.pages]),I=(null==(r=A[0])||null==(t=r.meta)?void 0:t.total_count)||0,T=(null==(i=A[0])?void 0:i.count)||0,E=(null==(f=A[0])?void 0:f.per_page)||_,L=(0,n.useMemo)(function(){return o()(A.map(function(e){return e.records}))},[A]);return u(c({},C),{queryKey:P,totalAudience:I,totalQueryAudience:T,audience:L,pageSize:E,pages:A})}},386932:function(e,t,r){"use strict";r.d(t,{e:()=>s});var n=r(131906),i=r(93199),o=r(547144),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.UT)(o.av.AccountSubscriptions.getBillingCycles(e.limit,e.products))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.limit,i=void 0===r?12:r,o=e.products,s=void 0===o?["ai_actions"]:o,l=(0,n.useQuery)(["billing-cycles",i,s],function(){return a({limit:i,products:s})},{enabled:void 0!==t&&t,staleTime:3e5,cacheTime:6e5}),c=l.data,u=l.isLoading,d=l.error,f=l.refetch;return{billingCycles:(null==c?void 0:c.billing_cycles)||[],isLoading:u,error:d,refetch:f,hasData:!!c}}},480610:function(e,t,r){"use strict";r.d(t,{z:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)(),t=e.currentCommunitySettings,r=e.currentCommunity,i=!!(null==r?void 0:r.custom_app_builder_feature_flag_enabled),o=!!(null==r?void 0:r.branded_app_feature_flag_enabled);return{brandedAppsBuilder:{isEnabled:i,isDesignConfigEnabled:!!(null==t?void 0:t.plus_design_config_enabled),isOrphanLinkConfigEnabled:!!(null==t?void 0:t.plus_orphan_link_config_enabled),isWelcomePagesHomeTabsEnabled:!!(null==t?void 0:t.welcome_page_home_tabs_enabled),isPreviewInsideBuilderEnabled:!!(null==t?void 0:t.branded_mobile_app_builder_preview_enabled)},brandedApp:{isEnabled:o}}}},272020:function(e,t,r){"use strict";r.d(t,{F:()=>o});var n=r(131906),i=r(224014),o=function(){var e=(0,n.useQueryClient)(),t=["checklists","show"],r=(0,n.useQuery)({queryKey:t,queryFn:i.l.show}),o=r.data,a=r.isLoading,s=r.error,l=(0,n.useMutation)({mutationFn:i.l.update,onSuccess:function(r){e.setQueryData(t,r)}}),c=(0,n.useMutation)({mutationFn:i.l.broadcast}),u=(0,n.useMutation)({mutationFn:i.l.defaultAccessGroup});return{checklist:o,isChecklistLoading:a,errorFetchingChecklist:s,fetchDefaultAccessGroup:u.mutate,isFetchingDefaultAccessGroup:u.isLoading,fetchDefaultAccessGroupError:u.error,updateChecklist:l.mutate,isUpdatingChecklist:l.isLoading,updateChecklistError:l.error,fetchBroadcast:c.mutate,isFetchingBroadcast:c.isLoading,fetchBroadcastError:c.error}}},782610:function(e,t,r){"use strict";r.d(t,{u:()=>a});var n=r(275271),i=r(441342),o=r(78456),a=function(){var e=(0,i.wh)(),t=e.onboardingFlags,r=e.currentCommunityMember;return{isChecklistAvailable:(0,n.useMemo)(function(){return!!r&&!!(0,o.vb)(r)&&!(null==t?void 0:t.getting_started_checklist_hidden)},[t,r])}}},297040:function(e,t,r){"use strict";r.d(t,{D:()=>i});var n=r(441342),i=function(e){var t=(0,n.wh)().circuitBreakers;return!!(null==t?void 0:t[e])}},392339:function(e,t,r){"use strict";r.d(t,{$:()=>a});var n=r(131906),i=r(93199),o=r(547144),a=function(e){var t,r=e.memberId;return{communityMemberQuery:(0,n.useQuery)(["community-member-show",r],(t=r,function(){return(0,i.UT)(o.av.communityMember.show({memberId:t}))}),{enabled:!!r})}}},278940:function(e,t,r){"use strict";r.d(t,{fd:()=>d,zw:()=>u});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(93199),l=r(547144);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest",ROLE:"role"},d=function(){var e,t,r,i,d,f,m,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=p.query,h=void 0===b?"":b,y=p.sort,v=void 0===y?u.ALPHABETICAL:y,g=p.order,_=p.filters,x=void 0===_?{}:_,j=p.perPage,w=void 0===j?30:j,O=p.initialPage,S=void 0===O?1:O,k=p.options,N=p.adminScope,P=void 0!==N&&N,C=["community-members",h,v,g,x,w],A=c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===k?{}:k),I=(0,a.useInfiniteQuery)(C,function(e){var t=e.pageParam,r=void 0===t?S:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,sort:v,filters:x,per_page:w};h&&(i.query=h),g&&(i.order=g);var o=P?l.av.admin.search.communityMembers.index:l.av.search.communityMembers.index;return(0,s.UT)(o({params:i}))},A),T=(0,n.useMemo)(function(){var e;return(null==(e=I.data)?void 0:e.pages)||[]},[null==(r=I.data)?void 0:r.pages]),E=(null==(d=T[0])||null==(i=d.meta)?void 0:i.total_count)||0,L=(null==(f=T[0])?void 0:f.count)||0,D=(null==(m=T[0])?void 0:m.per_page)||w,M=(0,n.useMemo)(function(){return o()(T.map(function(e){return e.records}))},[T]);return e=c({},I),t=t={queryKey:C,totalMembers:E,totalQueryMembers:L,members:M,pageSize:D,pages:T},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},133975:function(e,t,r){"use strict";r.d(t,{b7:()=>u,fd:()=>d});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(93199),l=r(547144);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var u=function(){return window.innerHeight>=2160?120:window.innerHeight>=1440?70:window.innerHeight>=1080?50:window.innerHeight>=925?30:15},d=function(){var e,t,r,i,d,f,m,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=p.query,h=void 0===b?"":b,y=p.sort,v=void 0===y?"alphabetical":y,g=p.order,_=p.filters,x=void 0===_?{}:_,j=p.perPage,w=void 0===j?u():j,O=p.initialPage,S=void 0===O?1:O,k=p.options,N=p.scope,P=void 0===N?{}:N,C=p.isAdminScope,A=void 0!==C&&C,I=["community-members",h,v,g,x,w],T=c({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===k?{}:k),E=(0,a.useInfiniteQuery)(I,function(e){var t=e.pageParam,r=void 0===t?S:t,n=1;"number"==typeof r&&r>0&&(n=r);var i=c({page:n,sort:v,filters:x,per_page:w},P);h&&(i.query=h),g&&(i.order=g);var o=A?l.av.admin.search.communityMembers.indexV2:l.av.search.communityMembers.indexV2;return(0,s.UT)(o({params:i}))},T),L=(0,n.useMemo)(function(){var e;return(null==(e=E.data)?void 0:e.pages)||[]},[null==(r=E.data)?void 0:r.pages]),D=(null==(d=L[0])||null==(i=d.meta)?void 0:i.total_count)||0,M=(null==(f=L[0])?void 0:f.count)||0,R=(null==(m=L[0])?void 0:m.per_page)||w,B=(0,n.useMemo)(function(){return o()(L.map(function(e){return e.records}))},[L]);return e=c({},E),t=t={queryKey:I,totalMembers:D,totalQueryMembers:M,members:B,pageSize:R,pages:L},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},810116:function(e,t,r){"use strict";r.d(t,{A:()=>u});var n=r(131906),i=r(903225),o=r(739792),a=r(251630),s=r(966570),l=r(60878),c=r(552382),u=function(e){var t=e.templateKey,r=e.isAutomationWorkflow,u=void 0!==r&&r,d=(0,l.pm)().error,f=(0,i.k6)(),m=(0,s.g0)(),p=(0,a.WX)(),b=(0,n.useMutation)(function(){return p.createFromTemplateKey({templateKey:t})},{onSuccess:function(e){var t=e.id;f.push(c.o.edit({workflowId:t})),m(u?"trigger":"audience")},onError:function(){d((0,o.t)(["settings.workflows.template_summary","there_was_an_error_creating_your_workflow"]))}});return{createFromTemplate:b.mutate,isLoading:b.isLoading}}},266706:function(e,t,r){"use strict";r.d(t,{O:()=>s});var n=r(131906),i=r(93199),o=r(547144);function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=function(e){var t=(0,n.useQuery)(a({queryKey:["current-contact"],queryFn:function(){return(0,i.UT)(o.av.currentContact.show())}},e)),r=t.data,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,["data"]),l=(null==r?void 0:r.type)==="CommunityMember";return a({currentContact:r,isCommunityMember:l},s)}},762892:function(e,t,r){"use strict";r.d(t,{f:()=>o});var n=r(303189),i=r(441342),o=function(){var e,t,r=(0,n.D)(),o=r.currentPlan,a=r.isCurrentPlanLoading,s=(0,i.wh)(),l=s.isLoading,c=s.currentCommunity,u=null==o?void 0:o.email_hub_billing,d=null==u?void 0:u.billing_status,f=null==o||null==(e=o.email_hub_billing)?void 0:e.free_period,m=null==c?void 0:c.is_on_trial,p=!m&&"free_period"===d,b=!m&&"active"===d,h=null!=(t=null==u?void 0:u.free_tier)&&t;return{emailHubBilling:u,emailHubBillingFreePeriod:f,isLoading:a||l,billingStatus:d,isTrialing:m,isInFreePeriod:p,isActive:b,isInactive:!(b||p||m)||"inactive"===d,isCancelAtPeriodEnd:"cancel_at_period_end"===d,isFreeTier:h}}},476866:function(e,t,r){"use strict";r.d(t,{z:()=>a});var n=r(131906),i=r(93199),o=r(547144),a=function(e,t){var r=(0,n.useMutation)(function(e){var t,r,n=e.reason,a=e.reasonDescription;return t=n,r=a,(0,i.Cu)(o.av.emailHubSubscription.cancel(t,r))},{onSuccess:function(){null==e||e()},onError:function(){null==t||t()}});return{cancelEmailHubSubscription:r.mutate,isCancellingEmailHubSubscription:r.isLoading}}},788277:function(e,t,r){"use strict";r.d(t,{w:()=>i});var n=r(289424),i=function(){return(0,n.$)(".community__switcher")}},436372:function(e,t,r){"use strict";r.d(t,{M:()=>o,T:()=>i});var n=r(289424),i=function(){return(0,n.$)(".bottom-banner")},o=function(){return(0,n.$)("#mainHeader")}},903952:function(e,t,r){"use strict";r.d(t,{i:()=>u});var n=r(275271);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=new(r(507078)).Z,l=new Map,c=function(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.startsWith("rgba("))return e;if(e.startsWith("rgb("))return e.replace("rgb(","rgba(").replace(")",", ".concat(i,")"));if(e.startsWith("hsl(")||e.startsWith("hsla(")){var o=document.createElement("canvas");o.width=1,o.height=1;var s=o.getContext("2d");if(s){s.fillStyle=e,s.fillRect(0,0,1,1);var l=a(s.getImageData(0,0,1,1).data,3),c=l[0],u=l[1],d=l[2];return"rgba(".concat(c,", ").concat(u,", ").concat(d,", ").concat(i,")")}}var f=e.replace("#","");return 3===f.length?(t=Number.parseInt(f[0]+f[0],16),r=Number.parseInt(f[1]+f[1],16),n=Number.parseInt(f[2]+f[2],16)):(t=Number.parseInt(f.slice(0,2),16),r=Number.parseInt(f.slice(2,4),16),n=Number.parseInt(f.slice(4,6),16)),"rgba(".concat(t,", ").concat(r,", ").concat(n,", ").concat(i,")")},u=function(e){var t=e.imageUrl,r=e.fallbackColor,i=void 0===r?"transparent":r,u=e.enabled,d=void 0===u||u,f=a((0,n.useState)(i),2),m=f[0],p=f[1],b=a((0,n.useState)(function(){return c(i)}),2),h=b[0],y=b[1],v=a((0,n.useState)(!1),2),g=v[0],_=v[1],x=a((0,n.useState)(null),2),j=x[0],w=x[1];return(0,n.useEffect)(function(){if(!t||!d){p(i),y(c(i));return}var e,r=l.get(t);if(r){p(r.hex),y(r.rgba);return}var n=!1;return(e=function(){var e,r,o,a;return function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){var c=[s,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:_(!0),w(null),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,s.getColorAsync(t)];case 2:return e=u.sent(),n||(r=e.hex,o=e.rgba,l.set(t,{hex:r,rgba:o}),p(r),y(o)),[3,5];case 3:if(console.error(a=u.sent()),!n){var d;w((null!=(d=Error)&&"undefined"!=typeof Symbol&&d[Symbol.hasInstance]?!!d[Symbol.hasInstance](a):a instanceof d)?a:Error("Failed to extract color")),p(i),y(c(i))}return[3,5];case 4:return n||_(!1),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)})})(),function(){n=!0}},[t,i,d]),{color:m,rgba:h,isLoading:g,error:j}}},693266:function(e,t,r){"use strict";r.d(t,{n:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.connect_core_enabled)}},48266:function(e,t,r){"use strict";r.d(t,{W:()=>o});var n=r(22319),i=r(198250),o=function(){var e=(0,i.q1)(),t=(0,n.TC)().currentTheme;return e&&"default"!==t}},355158:function(e,t,r){"use strict";r.d(t,{g:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.in_app_enabled)}},261193:function(e,t,r){"use strict";r.d(t,{D:()=>o});var n=r(275271),i=r(441342),o=function(){var e=(0,i.nT)(),t=(0,i.e2)(),r=(0,i.wh)(),o=!!e.helpers.isDataLoading(),a=!!t.isLoading,s=!!r.isLoading;return(0,n.useMemo)(function(){return o||a||s},[o,a,s])}},438434:function(e,t,r){"use strict";r.d(t,{p:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunityMember,t=(0,n.L2)().data,r=!!(null==t?void 0:t.is_private),i=!!(null==t?void 0:t.is_space_member),o=!!(null==e?void 0:e.is_admin);return r&&!i&&!o}},340404:function(e,t,r){"use strict";r.d(t,{C:()=>o});var n=r(903225),i=r(441342),o=function(){var e=(0,i.wh)().currentCommunity,t=(0,n.k6)();return{goToCommunityRootPath:function(r){var n=null==e?void 0:e.home_page_enabled,i=r?"?post_login_redirect=".concat(r):"";if(n)return t.push("/home".concat(i));window.location.href="/".concat(i)},goToMessagesRootPath:function(){return t.push("/messages")}}}},351922:function(e,t,r){"use strict";r.d(t,{R:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)(),t=e.currentCommunitySettings;return{isLoading:e.isLoading,isLiveStreamsLimitsEnabled:!!(null==t?void 0:t.live_streams_limits_enabled),isLiveMobileWebRTCEnabled:!!(null==t?void 0:t.live_mobile_webrtc_enabled),isLargeLiveStreamsEnabled:!!(null==t?void 0:t.large_live_streams_enabled)}}},833263:function(e,t,r){"use strict";r.d(t,{m:()=>l});var n=r(131906),i=r(93199),o=r(547144),a=function(e){return(0,i.gN)(o.av.communities.onboardingFlags.update({flag:e}),{flag:e})},s=r(691525),l=function(e){var t=e.onEnableFlagSuccess,r=(0,s.wh)(),i=r.onboardingFlags,o=r.refetch,l=r.isLoading,c=(0,n.useMutation)({mutationFn:a,onSuccess:function(){null==t||t(),o()}});return{onboardingFlags:i,enableFlag:c.mutate,isUpdating:c.isLoading,areFlagsLoading:l}}},62750:function(e,t,r){"use strict";r.d(t,{L8:()=>d,iW:()=>m,lP:()=>f});var n=r(275271),i=r(122612),o=r.n(i),a=r(131906),s=r(93199),l=r(547144);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=30,f="paywalls",m=function(){var e,t,r,i,m,p,b,h,y,v,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=g.query,x=void 0===_?"":_,j=g.filters,w=void 0===j?{}:j,O=g.perPage,S=void 0===O?d:O,k=g.initialPage,N=void 0===k?1:k,P=g.options,C=g.sort,A=void 0===C?{}:C,I=[f,x,w,S,JSON.stringify(A)],T=u({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},void 0===P?{}:P),E=(0,a.useInfiniteQuery)(I,function(e){var t=e.pageParam,r=void 0===t?N:t,n=1;"number"==typeof r&&r>0&&(n=r);var i={page:n,filters:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s,l=(s=o.value,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(s,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(s,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1];t[u]=d}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}(w),per_page:S};return x&&(i.query=x),Object.keys(A).length>0&&(i.order=A),(0,s.UT)(l.av.search.paywalls.index({params:i}))},T),L=(0,n.useMemo)(function(){var e;return(null==(e=E.data)?void 0:e.pages)||[]},[null==(r=E.data)?void 0:r.pages]),D=null!=(h=null==(m=L[0])||null==(i=m.meta)?void 0:i.total_count)?h:0,M=null!=(y=null==(p=L[0])?void 0:p.count)?y:0,R=null!=(v=null==(b=L[0])?void 0:b.per_page)?v:S,B=(0,n.useMemo)(function(){return o()(L.map(function(e){return e.records}))},[L]);return e=u({},E),t=t={queryKey:I,totalPaywalls:D,totalQueryPaywalls:M,paywalls:B,pageSize:R,pages:L},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}},645585:function(e,t,r){"use strict";r.d(t,{a:()=>a});var n=r(759705);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o={id:"connections-pending-recipient",key:"connections",status:"pending",role:"recipient"},a=function(e){var t,r;return(0,n._)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({filters:[o].concat(function(e){if(Array.isArray(e))return i(e)}(r=null!=(t=null==e?void 0:e.filters)?t:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},e))}},773371:function(e,t,r){"use strict";r.d(t,{C:()=>a});var n=r(903225),i=r(547144),o=r(117617),a=function(){var e=(0,n.TH)().pathname,t=(0,o.HE)(),r=(0,o.ac)("(max-width: 1200px)");return{isPlansPageLayout:[i.Lo.plans.general,i.Lo.plans.billing,i.Lo.plans.brandedApps].some(function(t){return e.includes(t)}),isMobileLayout:!t,isDesktopLayout:t,isCompactLayout:t&&r}}},623766:function(e,t,r){"use strict";r.d(t,{E:()=>i});var n=r(824869),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAiWorkflowCategoryRequired,r=e.categories,i=(0,n.E)(),o=i.isCommunityOnEnterprise,a=i.isCommunityOnPlus,s=(void 0===r?[]:r).includes("ai_workflows");return!o&&!a&&(!(void 0!==t&&t)||s)}},313542:function(e,t,r){"use strict";r.d(t,{K:()=>i});var n=r(441342),i=function(){var e=(0,n.wh)().currentCommunity,t=!!(null==e?void 0:e.white_label);return{whiteLabel:t,shouldShowBranding:!t}}},403425:function(e,t,r){"use strict";r.d(t,{x:()=>o});var n=r(275271),i=r(116235),o=function(e){var t=e.isActive,r=e.onToggle,o=e.actions,a=e.steps,s=e.workflowId,l=(0,i.A)({actions:o,steps:a,workflowId:s}),c=l.handleActivationAttempt,u=l.isModalVisible;return{isEffectivelyActive:t&&!u,handleToggleChange:(0,n.useCallback)(function(e){!t&&e?c(r):r()},[t,c,r]),isModalVisible:u,handleActivationAttempt:c}}},231113:function(e,t,r){"use strict";r.d(t,{Q:()=>a});var n=r(275271),i=r(431841);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t,r=e.defaultCommunityView,a=e.views,s=e.activeStorageKey,l=(0,i._)(void 0===s?"members-directory-view-v2":s),c=l.getValue,u=l.setValue,d=(0,n.useRef)(r),f=(0,n.useCallback)(function(){var e=c(),t=d.current;if(!e)return null!=t?t:a.LIST;var r=e.defaultCommunityView,n=e.defaultUserView;return r===t?n:null!=t?t:a.LIST},[c]),m=(t=(0,n.useState)(f),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=m[0],b=m[1];return(0,n.useEffect)(function(){u({defaultCommunityView:d.current,defaultUserView:p})},[p,u]),(0,n.useEffect)(function(){d.current=r,b(f())},[r,f]),[p,b]}},211870:function(e,t,r){"use strict";r.d(t,{L:()=>l});var n=r(275271),i=r(519775),o=r(43226),a=r.n(o);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t,r=e.onFocusWithin,o=void 0===r?a():r,l=e.onBlurWithin,c=void 0===l?a():l,u=e.onFocusWithinChange,d=void 0===u?a():u,f=(t=(0,n.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],p=f[1];return{isFocusWithin:m,focusWithinProps:(0,i.L_)({onFocusWithin:o,onBlurWithin:c,onFocusWithinChange:function(e){p(e),d(e)}}).focusWithinProps}}},983485:function(e,t,r){"use strict";r.d(t,{w:()=>i});var n=r(275271),i=function(e){(0,n.useEffect)(function(){var t=function(t){e(t)};return window.addEventListener("resize",t),e(),function(){window.removeEventListener("resize",t)}},[e])}},618361:function(e,t,r){"use strict";r.d(t,{c:()=>a});var n=r(552676),i=r(775148),o=r(739792),a=function(){return(0,n.jsx)(i.h,{name:"20-back-to-community",ariaLabel:(0,o.t)("back_to_community"),buttonSize:32,iconSize:20,iconClassName:"!text-white",className:"rounded-full border border-white/[0.34] bg-gradient-to-b from-white/[0.08] to-white/[0.32] p-1 text-white shrink-0 z-50 fixed top-6 left-4 hover:!bg-white/[0.16] focus-visible:!bg-white/[0.16]",onClick:function(){window.location.href="/"}})}},447455:function(e,t,r){"use strict";r.d(t,{C:()=>s});var n=r(594337),i=r(151497);(0,n.l7)([i.Z]);var o=["#633EDD","#3CAA7E","#4469FE"],a=function(e,t){var r=(0,n.Vi)(e).toLab(),i=(0,n.Vi)(t).toLab(),o=r.l-i.l,a=r.a-i.a,s=r.b-i.b;return Math.sqrt(o*o+a*a+s*s)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(0===t.length)throw Error("getClosestBrandShade: shades array cannot be empty");for(var r=t[0],n=a(e,r),i=1;i<t.length;i+=1){var s=t[i],l=a(e,s);l<n&&(n=l,r=s)}return r}},545273:function(e,t,r){"use strict";r.d(t,{H:()=>o});var n=r(903225),i=r(375489),o=function(){var e,t,r,o,a,s=!!(0,n.$B)({path:"/feed"}),l=!!(0,n.$B)({path:"/c/:spaceSlug"}),c=!!(0,n.$B)({path:"/s/:spaceSlug"}),u=!!(null==(e=(0,n.$B)({path:"/feed"}))?void 0:e.isExact),d=!!(null==(t=(0,n.$B)({path:"/c/:spaceSlug"}))?void 0:t.isExact),f=!!(null==(r=(0,n.$B)({path:"/members"}))?void 0:r.isExact),m=!!(null==(o=(0,n.$B)({path:"/messages"}))?void 0:o.isExact),p=!!(null==(a=(0,n.$B)({path:"/getting-started"}))?void 0:a.isExact);return{isSpaceRoute:l,isSpaceGroupRoute:c,isFeedRoute:s,isHomePage:u,isSpaceShowPage:d,isMemberDirectoryPage:f,isMessagesPage:m,isSettingsPage:!!(0,n.$B)(i.s),isGettingStartedRoute:p,isLivePage:!!(0,n.$B)({path:"/live/:roomSlug"})}}},304403:function(e,t,r){"use strict";r.d(t,{jV:()=>n,ry:()=>i});var n={paywall:"paywall",access_group:"access_group",other:"other"},i={Space:"Space",SpaceGroup:"SpaceGroup",AccessGroup:"AccessGroup"}},172667:function(e,t,r){"use strict";r.d(t,{p:()=>n});var n="countries_iso3166"},53052:function(e,t,r){"use strict";function n(e){return{name:e.theme_name,value:e.id,cssVariables:e.css_variables,isCustom:e.is_custom,customColors:e.custom_colors}}r.d(t,{$:()=>n})},559462:function(e,t,r){"use strict";r.d(t,{T:()=>n,g:()=>i});var n={affirm:"affirm",afterpay_clearpay:"afterpay_clearpay",apple_pay:"apple_pay",bancontact:"bancontact",card:"card",google_pay:"google_pay",ideal:"ideal",klarna:"klarna",link:"link",pix:"pix",sepa_debit:"sepa_debit",revenue_cat_app_store:"revenue_cat_app_store",revenue_cat_play_store:"revenue_cat_play_store"},i={amex:"amex",diners:"diners",discover:"discover",jcb:"jcb",mastercard:"mastercard",unionpay:"unionpay",visa:"visa",generic:"generic"}},407095:function(e,t,r){"use strict";r.d(t,{R:()=>d});var n=r(552676),i=r(131906),o=r(918594),a=r(103241),s=r(391149),l=r(60878),c=r(844269),u=r(652478),d=function(){return(0,n.jsx)(i.QueryClientProvider,{client:u.E,children:(0,n.jsx)(a.Q,{children:(0,n.jsx)(s.H,{includeSidebar:!0,children:(0,n.jsx)(l.VW,{children:(0,n.jsx)(o.VK,{children:(0,n.jsx)(c.x,{})})})})})})}},572453:function(e,t,r){"use strict";function n(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}r.d(t,{L:()=>n})},963504:function(e,t,r){"use strict";r.d(t,{y:()=>s});var n=r(807258),i=r.n(n),o=r(603345),a=r.n(o);function s(){var e=window.Intl;try{window.Intl=void 0;var t=a().determine().name();return window.Intl=e,t}catch(e){return a().determine().name()}}document.addEventListener("turbolinks:load",function(){i().set("browser_time_zone",s(),{expires:365,path:"/"})})}}]);
//# sourceMappingURL=/packs/js/3774-56b8d8d003c64b2e.js.map