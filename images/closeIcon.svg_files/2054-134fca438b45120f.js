"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["2054"],{544497:function(e,t,r){r.d(t,{$:()=>d});var n=r(275271),a=r(932699),o=r(131906),i=r(739792),l=r(93199),u=r(547144);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var d=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shouldUseDebounce,d=void 0===r||r,p=(e=(0,n.useState)(null),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],m=p[1],y=(0,o.useMutation)(function(e){var t;return t=e,(0,l.Cu)(u.av.emailValidations.create(),{email:t})}),b=y.mutateAsync,v=y.isLoading,h="production"===window.RAILS_ENV,_=(0,n.useCallback)(function(e){var t;return(t=function(){var t;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!h)return[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b(e)];case 2:if(!(t=r.sent()).accept_as_signup)return t.did_you_mean&&m(t.did_you_mean),[2,(0,i.t)("".concat("authentication_app.signup",".form.errors.please_enter_valid_email_address"))];return m(null),[2,!0];case 3:return console.error(r.sent()),m(null),[2,!0];case 4:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(e){s(o,n,a,i,l,"next",e)}function l(e){s(o,n,a,i,l,"throw",e)}i(void 0)})})()},[b,h]),w=(0,n.useMemo)(function(){return(0,a.debounce)(function(e,t){_(e).then(t)},500)},[_]);return{validateEmail:(0,n.useCallback)(function(e){return e?d?new Promise(function(t){w(e,t)}):_(e):(m(null),Promise.resolve(!0))},[w,_,d]),isValidatingEmail:v,suggestedEmail:f}}},94473:function(e,t,r){r.d(t,{F_:()=>i,po:()=>n,rl:()=>a,y_:()=>o});var n="settings.paywalls.modal.tabs.checkout",a={DEFAULT:"default",TESTIMONIALS:"testimonials",BADGES:"badges",BENEFITS:"benefits",COUNTDOWN:"countdown",PRICE_CALLOUTS:"price_callouts",REDUCED_PRICES:"reduced_prices"},o={STARS:"stars",QUOTATION_MARK:"quotation_mark"},i={STARS:"#FDB022",QUOTATION_MARK:"#000000"}},784047:function(e,t,r){r.d(t,{O:()=>i,z:()=>l});var n=r(346705),a=r(223125),o=/\D/g,i=function(e){return null==e?0:Number((String(e)||"0").replace(o,""))},l={serializeCountdownProperties:function(e){var t,r,o;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enabled:null!=(o=null==e?void 0:e.enabled)&&o,displayed_text:(null==e?void 0:e.displayed_text)||"",action:(0,n.d0)(null==e||null==(t=e.action)?void 0:t.action_type)?{action_type:a.KW.REDIRECT_TO,redirect_to:null==e||null==(r=e.action)?void 0:r.redirect_to}:{action_type:a.KW.DO_NOTHING}},(0,n.$Z)(null==e?void 0:e.countdown_type)?{countdown_type:a.sI.REMAINING_TIME,remaining_time:Number(null==e?void 0:e.remaining_time),remaining_time_interval:"minutes"}:{countdown_type:a.sI.FINISH_AT,finish_at:e.finish_at?new Date(e.finish_at).toISOString():new Date().toISOString()})},serializePriceCalloutProperties:function(e){var t,r;return{callout_color:null!=(t=e.callout_color)?t:n.Um,prices:null!=(r=e.prices)?r:[]}},serializeReducedPriceProperties:function(e){return{prices:((null==e?void 0:e.prices)||[]).map(function(e){return{price_id:e.price_id,amount:i(e.amount),upfront_amount:i(e.upfront_amount),enabled:e.enabled}})}}}},169770:function(e,t,r){r.d(t,{K:()=>w});var n=r(739792),a=r(23009),o=r(333448);function i(e,t,r){return(i=m()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&d(a,r.prototype),a}).apply(null,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}var y=function(e){return!!(e&&(void 0===e?"undefined":p(e))==="object"&&"type"in e&&"string"==typeof e.type)},b=function(e){return!!(e&&(void 0===e?"undefined":p(e))==="object"&&"error_details"in e&&e.error_details)},v=function(e){return!!(e&&(void 0===e?"undefined":p(e))==="object"&&"failure"in e&&"object"===p(e.failure)&&(0,o.kW)(e))},h="paywallError",_="unknownError",w=function(e){var t,r;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function o(e,t){var r,n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:_},l=i.type,s=i.cause,d=i.context,f=i.shouldAllowToResubmit;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r=o,n=[t,{cause:s}],r=c(r),u(a=function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,m()?Reflect.construct(r,n||[],c(this).constructor):r.apply(this,n)),"caller",void 0),u(a,"type",void 0),u(a,"context",void 0),u(a,"shouldAllowToResubmit",void 0),a.caller=e,a.context=d,a.shouldAllowToResubmit=null==f||f,a.type=l,a}return o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),e&&d(o,e),t=[{key:"getExtra",value:function(){return this.isStripeError()?{checkout_error_type:this.type,stripe_error_type:this.context.type,stripe_error_code:this.context.code,stripe_error_decline_code:this.context.decline_code}:this.isNewPaywallError()?{checkout_error_type:this.type,paywall_failure_category:this.context.failure.category,paywall_failure_code:this.context.failure.code,paywall_failure_level:this.context.failure.level}:this.isLegacyPaywallError()?{checkout_error_type:this.type,legacy_paywall_error_details:this.context.error_details}:{checkout_error_type:this.type}}},{key:"isStripeError",value:function(){return y(this.context)}},{key:"isLegacyPaywallError",value:function(){return b(this.context)}},{key:"isNewPaywallError",value:function(){return v(this.context)}}],r=[{key:"generic",value:function(e){return new o(e,(0,n.t)("services.paywalls.failures.internal.generic"))}},{key:"stripeNotInitialized",value:function(e){return new o(e,(0,n.t)("services.paywalls.failures.stripe.not_initialized"))}},{key:"fromStripeError",value:function(e,t){var r=t.message;return r||(r=(0,n.t)("services.paywalls.failures.internal.generic")),new o(e,r,{context:t,type:"stripeError"})}},{key:"fromPaywallError",value:function(e,t){return v(t)?new o(e,t.failure.message,{context:t,type:h}):new o(e,t.message,{context:t,type:h})}},{key:"fromApiError",value:function(e,t){return b(t.body)||v(t.body)?o.fromPaywallError(e,t.body):new o(e,t.message,{cause:t,type:"apiError"})}},{key:"fromUnknownError",value:function(e,t){return s(t,a.M)?o.fromApiError(e,t):y(t)?o.fromStripeError(e,t):v(t)||b(t)?o.fromPaywallError(e,t):s(t,Error)?new o(e,t.message,{cause:t,type:_}):o.generic(e)}}],t&&l(o.prototype,t),r&&l(o,r),o}(f(Error))},11795:function(e,t,r){r.d(t,{_:()=>d});var n=r(552676),a=r(275271),o=r(739792),i=r(606760),l=r(194043);function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}var d=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n,a;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=r,a=[e],n=u(n),(t=function(e,t){var r;if(t&&("object"==((r=t)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,s()?Reflect.construct(n,a||[],u(this).constructor):n.apply(this,a))).state={hasError:!1},t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&c(r,e),t=[{key:"componentDidCatch",value:function(e,t){if("true"===window.DISABLE_JS_ERROR_BOUNDARIES)throw e;this.setState({hasError:!0});var r,n,a,o,i,u=this.props,c=u.checkoutProps,s=u.paywallId;(0,l.M)(e,{communityId:null==c||null==(r=c.currentCommunity)?void 0:r.id,communityMemberId:null==c||null==(n=c.currentCommunityMember)?void 0:n.id,communityMemberUserId:null==c||null==(a=c.currentUser)?void 0:a.id,extra:{error_info_component_stack:t.componentStack},paywallId:null!=(i=null==c||null==(o=c.paywall)?void 0:o.id)?i:s})}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?(0,n.jsx)(i.Z,{errorCode:500,title:(0,o.t)("paywall_checkout.error_boundary.title")}):e}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(r.prototype,t),r}(a.Component)},417493:function(e,t,r){r.d(t,{Q:()=>p,M:()=>f});var n=r(552676),a=r(275271),o=r(621775);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var u=function(e){return i({id:(0,o.D)()},e)},c=function(e){if(e){var t,r,n;return l(i({},e),{badge_properties:(t=e.badge_properties)?l(i({},t),{badges:(t.badges||[]).map(u)}):{enabled:!1,badges:[]},testimonial_properties:(r=e.testimonial_properties)?l(i({},r),{testimonials:(r.testimonials||[]).map(u)}):{enabled:!1,testimonials:[]},benefit_properties:(n=e.benefit_properties)?l(i({},n),{benefits:(n.benefits||[]).map(u)}):{enabled:!1,title:"",benefits:[]}})}},s=r(756468),d=(0,a.createContext)(null);d.displayName="PaywallCustomizationProvider";var p=function(){var e=(0,a.useContext)(d);return(0,s.Z)(e,"usePaywallCustomizationContext should be within the PaywallCustomizationContext"),e},f=function(e){var t=e.children,r=e.paywallCustomization,o=e.checkoutPreviewContext,i=c(r),l=(0,a.useMemo)(function(){return{paywallCustomization:i,checkoutPreviewContext:o}},[r,o]);return(0,n.jsx)(d.Provider,{value:l,children:t})}},979220:function(e,t,r){r.d(t,{p:()=>ei});var n=r(552676),a=r(417493),o=r(381636),i=r(275271),l=r(280219),u=r(306915),c=r(701168),s=r(547144),d=r(22319),p=r(223125),f=function(e){var t,r,a=e.icon,o=e.dataTestId,f=a.emoji_type,m={},y=d.OR.LIGHT;if(f===p.BG.EMOJI){var b=a.emoji;m={className:(0,c.A)("!w-6 !p-0"),emptyIcon:i.Fragment,emoji:b}}if(f===p.BG.CUSTOM&&(m={className:(0,c.A)("!w-6 !p-0 !pr-1"),emptyIcon:i.Fragment,customEmojiUrl:(0,s.Gd)(a),customEmojiDarkUrl:(0,s.Gd)(a)}),f===p.BG.SHAPES){var v=a.identifier;m={className:(0,c.A)("!w-4 !p-0 !pr-1"),emptyIcon:i.Fragment,customEmojiUrl:(0,u.c)(v)||null,customEmojiDarkUrl:(0,u.c)(v)||null}}return(0,n.jsx)("span",{"data-testid":o,children:(0,n.jsx)(l.S,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},m),r=r={appearance:y},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},m=function(e){var t=e.background_color,r=e.icon,a=e.label,i=e.text_color;return e.visible?(0,n.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-x-2 rounded-full px-3 py-1",style:{backgroundColor:t},"data-testid":"paywall-badge",children:[(0,n.jsx)(f,{icon:r,"data-testid":"paywall-badge-icon"}),(0,n.jsx)(o.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("span",{style:{color:i},"data-testid":"paywall-badge-label",children:a})})]}):null},y=r(957363);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e,t=(0,i.useRef)(null),r=(e=(0,i.useState)(0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],a=r[1];return(0,i.useEffect)(function(){var e=new ResizeObserver(function(e){var t=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var u=i.value.contentRect.width;u>n&&a(u)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}});return t.current&&e.observe(t.current),function(){t.current&&e.unobserve(t.current)}},[n]),{contentRef:t,maxWidth:n}},h=function(e){var t=e.countdownProperties,r=e.useHook,i=(0,a.Q)().checkoutPreviewContext,l=r({countdownProperties:t}).timeRemainingText,u=v(),c=u.contentRef,s=u.maxWidth;return(0,n.jsxs)("div",{className:"border-primary bg-primary flex flex-row items-center justify-center gap-x-2 rounded-3xl border py-2.5","data-testid":"countdown-container",children:[(0,n.jsx)(y.JO,{type:"16-clock",viewBox:"0 0 16 16"}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-x-1",children:[(0,n.jsx)(o.Z.LabelSm,{weight:"medium",children:t.displayed_text}),(0,n.jsx)("div",{ref:c,style:{minWidth:!i&&s>0?"".concat(s,"px"):"auto"},children:(0,n.jsx)(o.Z.LabelSm,{weight:"semibold",children:l})})]})]})},_=r(346705),w=r(424168),g=r(76516),x=r(468630),j=r(698253),O=r(584983),P=r(76926),S=r(807258),k=r.n(S),C=function(e,t){var r=new Date(e),n=new Date;if(r<=n)return t&&t(Math.abs(Number(n)-Number(r))),"0s";var a=(0,w.Z)(r,n),o=(0,g.Z)(r,n)%24,i=(0,x.Z)(r,n)%60,l=(0,j.Z)(r,n)%60;return 0===a&&0===o?"".concat(i,"m : ").concat(l,"s"):a>0?"".concat(a,"d : ").concat(o,"h : ").concat(i,"m"):"".concat(o,"h : ").concat(i,"m")},I=function(e){var t;return(0,_.$Z)(e.countdown_type)?{finish_at:"minutes"===e.remaining_time_interval?(0,O.default)(new Date,e.remaining_time||1).toISOString():(0,P.Z)(new Date,e.remaining_time||1).toISOString()}:{finish_at:null!=(t=e.finish_at)?t:""}},E=function(e){var t=k().get("checkout_countdown_".concat(e));if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Can't parse the Countdown data"),null}};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var t=e.countdownProperties,r=(0,a.Q)().paywallCustomization,n=(0,i.useMemo)(function(){return E(null==r?void 0:r.paywall_id)||I(t)},[null==r?void 0:r.paywall_id,t]).finish_at,o=T((0,i.useState)(""),2),l=o[0],u=o[1],c=T((0,i.useState)(0),2),s=c[0],d=c[1];return(0,i.useEffect)(function(){var e=new URL(window.location.href);e.searchParams.delete(_.WI),window.history.replaceState({},"",e)},[]),(0,i.useEffect)(function(){if(!n)return void u("");var e=function(){u(C(n,d))};e();var t=setInterval(e,1e3);return function(){return clearInterval(t)}},[n]),{timeRemainingText:l,exceedTime:s}},L=function(e){var t=e.countdownProperties,r="";return(0,_.$Z)(t.countdown_type)&&(r=C((0,O.default)(new Date,Number(t.remaining_time)).toISOString())),(0,_.jS)(t.countdown_type)&&(r=C(t.finish_at||new Date().toISOString())),{timeRemainingText:r}},M=r(942822),D="!max-w-6 !p-0 !max-h-6",R=function(e){var t,r,a=e.icon,o=e.hide,f=a.emoji_type,m={},y=d.OR.LIGHT;if(f===p.BG.ICONS){var b=a.identifier;m={className:(0,c.A)(D),emptyIcon:i.Fragment,customEmojiUrl:(0,M.ir)(b,d.OR.LIGHT)||null,customEmojiDarkUrl:(0,M.ir)(b,d.OR.LIGHT)||null}}if(f===p.BG.EMOJI){var v=a.emoji;m={className:(0,c.A)("!p-0 text-[1.5rem] leading-8"),emptyIcon:i.Fragment,emoji:v}}if(f===p.BG.CUSTOM&&(m={className:(0,c.A)(D),emptyIcon:i.Fragment,customEmojiUrl:(0,s.Gd)(a),customEmojiDarkUrl:(0,s.Gd)(a)}),f===p.BG.SHAPES){var h=a.identifier;m={className:(0,c.A)("!p-0 !w-5 !h-5"),emptyIcon:i.Fragment,customEmojiUrl:(0,u.c)(h)||null,customEmojiDarkUrl:(0,u.c)(h)||null}}return(0,n.jsx)("div",{className:(0,c.A)("flex size-8 items-center justify-center",{invisible:o}),"data-testid":"benefit-icon",children:(0,n.jsx)(l.S,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},m),r=r={appearance:y},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},F=function(e){var t=e.title,r=e.description,a=e.icon;return(0,n.jsxs)("div",{className:"grid grid-cols-8 gap-x-3 md:grid-cols-12","data-testid":"benefit-item",children:[(0,n.jsx)("div",{className:"col-span-1 max-h-[1.875rem] md:col-span-1",children:(0,n.jsx)(R,{icon:a})}),(0,n.jsx)("div",{className:"col-span-7 flex items-center md:col-span-11",children:(0,n.jsx)(o.Z.LabelSm,{weight:"semibold","data-testid":"benefit-title-item",children:t})}),(0,n.jsx)("div",{className:"col-span-1"}),(0,n.jsx)("div",{className:"col-span-7 flex items-center md:col-span-11","data-testid":"benefit-description-item",children:(0,n.jsx)(o.Z.BodySm,{children:r})})]})},U=function(e){var t=e.title;return(0,n.jsx)("div",{className:"py-2","data-testid":"benefits-title",children:(0,n.jsx)(o.Z.TitleSm,{weight:"semibold",children:t})})},B=function(){var e=(0,a.Q)().paywallCustomization,t=(null==e?void 0:e.benefit_properties)||{enabled:!1,benefits:[]},r=t.enabled,o=t.benefits,i=t.title;return r?(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(U,{title:i}),(0,n.jsx)("div",{className:"flex flex-col gap-y-2","data-testid":"benefits-container",children:o.map(function(e){return(0,n.jsx)(F,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),e.id)})})]}):null},Z=r(94473),z=function(e){var t=e.children,r=e.dataTestId;return(0,n.jsx)("div",{className:"flex flex-row gap-x-1","data-testid":r,children:t})},V=function(e){var t=e.color;return(0,n.jsx)(z,{dataTestId:"testimonial-quotation-mark",children:(0,n.jsx)(y.JO,{type:"20-open-quote",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,style:{color:t},viewBox:"0 0 20 20"})})};function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var q=function(e){return{type:"16-star-fill",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0,style:{color:e},className:"!h-4 !w-4"}},G=function(e){var t=e.color;return(0,n.jsxs)(z,{dataTestId:"testimonial-stars",children:[(0,n.jsx)(y.JO,W({},q(t))),(0,n.jsx)(y.JO,W({},q(t))),(0,n.jsx)(y.JO,W({},q(t))),(0,n.jsx)(y.JO,W({},q(t))),(0,n.jsx)(y.JO,W({},q(t)))]})},H=r(532602),Y=r(739792),K=function(e){var t=e.visible,r=e.quote,a=e.name,i=e.avatar_image,l=e.avatar_image_url,u=e.headline,c=e.children;if(!t)return null;var d=i?(0,s.C9)({filename:"avatar_image",signed_id:i}):l;return(0,n.jsxs)("div",{className:"flex flex-col gap-y-3.5","data-testid":"testimonial",children:[c,(0,n.jsx)(o.Z.BodySm,{"data-testid":"testimonial-quote",children:r}),(0,n.jsxs)("div",{className:"flex flex-row gap-x-3",children:[(0,n.jsx)(H.s,{name:a||(0,Y.t)("random"),src:d,size:"10",isFullRounded:!0}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[a&&""!==a&&(0,n.jsx)(o.Z.LabelSm,{weight:"semibold","data-testid":"testimonial-name",children:a}),u&&""!==u&&(0,n.jsx)(o.Z.BodySm,{"data-testid":"testimonial-headline",children:u})]})]})]})},J=function(){var e=(0,a.Q)().paywallCustomization,t=(null==e?void 0:e.testimonial_properties)||{enabled:!1,testimonials:[]},r=t.enabled,o=t.testimonials;return r?(0,n.jsx)("div",{className:"flex flex-col gap-y-[2.125rem]","data-testid":"testimonials-container",children:o.map(function(e){var t,r;return(0,n.jsxs)(K,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:[e.display_style.type===Z.y_.QUOTATION_MARK&&(0,n.jsx)(V,{color:e.display_style.color}),e.display_style.type===Z.y_.STARS&&(0,n.jsx)(G,{color:e.display_style.color})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),e.id)})}):null},$=function(e){var t=e.shouldHide,r=e.className,o=(0,a.Q)(),i=o.paywallCustomization,l=o.checkoutPreviewContext,u=i||{},s=u.testimonial_properties,d=u.benefit_properties;return((null==s?void 0:s.enabled)||(null==d?void 0:d.enabled))&&!t?(0,n.jsxs)("div",{className:(0,c.A)("grid grid-cols-1 gap-y-9 divide-y *:pt-12",r,{"pb-16 md:pb-0":!!l}),children:[(0,n.jsx)(B,{}),(0,n.jsx)(J,{})]}):null},X=function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},Q=function(e,t,r){return .2126*X(e)+.7152*X(t)+.0722*X(r)},ee=function(e,t,r){return Math.round((1-t)*r+t*e)/255},et=function(e,t,r,n){var a=n/255;return Q(ee(e,a,255),ee(t,a,255),ee(r,a,255))},er=function(e){if(!e)return"#FFFFFF";var t=e.startsWith("#")?e.slice(1):e,r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16),o=parseInt(t.substring(6,8),16),i=0;return(i=isNaN(o)?Q(r/255,n/255,a/255):et(r,n,a,o))>.5?"#000000":"#FFFFFF"},en=r(248190),ea=function(e){var t=e.prices,r=e.priceId,n=e.tempId;return null==t?void 0:t.find(function(e){return[r,n].includes(e.price_id)})},eo=function(e){var t=e.priceId,r=e.reducedPriceProperties;return ea({priceId:t,tempId:e.tempId,prices:null==r?void 0:r.prices})},ei=Object.assign($,{Badges:function(){var e=(0,a.Q)().paywallCustomization,t=(null==e?void 0:e.badge_properties)||{enabled:!1,badges:[]},r=t.enabled,o=t.badges;return r?(0,n.jsx)("div",{className:"flex flex-row flex-wrap gap-2",children:o.map(function(e){return(0,n.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),e.id)})}):null},Benefits:B,Countdown:function(){var e=(0,a.Q)(),t=e.paywallCustomization,r=e.checkoutPreviewContext,o=((null==t?void 0:t.countdown_properties)||{enabled:!1}).enabled;if(!(null==t?void 0:t.countdown_properties)||!o)return null;var i=t.countdown_properties;return r?(0,n.jsx)(h,{countdownProperties:i,useHook:L}):(0,n.jsx)(h,{countdownProperties:i,useHook:A})},List:$,PriceCallout:function(e){var t,r=e.price,l=e.children,u=(0,a.Q)().paywallCustomization,s=null==u?void 0:u.price_callout_properties,d=(0,i.useMemo)(function(){return er(null==s?void 0:s.callout_color)},[null==s?void 0:s.callout_color]),p=(0,n.jsx)(n.Fragment,{children:l});if(!u||!s||!(null==u||null==(t=u.price_callout_properties)?void 0:t.prices)||!(null==s?void 0:s.callout_color))return p;var f=u.price_callout_properties.prices.find(function(e){return(null==e?void 0:e.price_id)&&[r.id,r.tmp_id].includes(null==e?void 0:e.price_id)});if(!f||!f.callout_text)return p;var m=f.highlighted;return(0,n.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-x-1",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[l,(0,n.jsx)(o.Z.LabelXs,{color:"text-default",children:(0,Y.t)("separator_dot")})]}),(0,n.jsx)(o.Z.LabelXs,{color:"text-default",children:(0,n.jsx)("span",{className:(0,c.A)("inline-block whitespace-nowrap",{"rounded px-1.5 py-0.5":m}),style:{color:m?d:s.callout_color,backgroundColor:m?s.callout_color:"transparent"},"data-testid":"paywall-price-callout",children:f.callout_text})})]})},Provider:a.M,ReducedPrice:function(e){var t=e.children,r=e.price,n=e.couponPreviewMutation,o=(0,a.Q)().paywallCustomization,l=(0,en._j)(Number(r.id),n),u=l.status!==en.wH.NO_COUPON_APPLIED,c=eo({priceId:Number(r.id),tempId:r.tmp_id,reducedPriceProperties:null==o?void 0:o.reduced_price_properties});return c&&c.enabled?(0,i.cloneElement)(t,{couponApplications:l,reducedPrice:u?void 0:c}):(0,i.cloneElement)(t,{couponApplications:l})},Testimonials:J})},266515:function(e,t,r){r.d(t,{i:()=>e_});var n=r(552676),a=r(242410),o=r(701168),i=function(e){var t=e.currentCommunity;return t.logo_url?(0,n.jsx)("img",{loading:"lazy",className:"max-h-[2.5rem] lg:max-h-10",src:t.logo_url,alt:""}):t.icon_url?(0,n.jsxs)("div",{className:"flex max-h-[2.5rem] flex-row gap-x-1 lg:max-h-10",children:[(0,n.jsx)("div",{className:"box-border size-7 p-1 text-center",children:(0,n.jsx)("img",{loading:"lazy",src:t.icon_url,alt:""})}),(0,n.jsx)("span",{className:"text-lg font-medium",children:t.name})]}):(0,n.jsx)("span",{className:"max-h-[2.5rem] text-lg font-medium lg:max-h-10",children:t.name})},l=r(547144),u=function(){var e=(0,a.Y)().paywall,t=e.paywall_customization.cover_image_url||(0,l.C9)({filename:"cover_image",signed_id:e.paywall_customization.cover_image});return(0,n.jsx)("img",{loading:"lazy",alt:"",src:t,className:"relative max-h-[303px] w-full rounded-t-xl object-cover","data-testid":"paywall-cover-image"})},c=r(932699),s=r(534860),d=r(22319);function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var f=function(){var e=(0,d.TC)().isDarkAppearance,t=(0,a.Y)().paywall.event;if(!t)return null;var r=t.cover_image_url,o=t.cover_image,i=t.cover_image_variants;if(!r||!o)return null;var l=e?(0,s.aP)("dark-mode-cover-thumbnail-2x.png"):(0,s.aP)("light-mode-cover-thumbnail-2x.png"),u=!(0,c.isEmpty)(i),f=p({src:u?i.original:r||l},u?{srcSet:"".concat(i.medium," 640w, ").concat(i.large," 768w, ").concat(i.original," 1024w")}:{});return(0,n.jsx)("img",p({loading:"lazy",alt:"",className:"relative w-full rounded-t-xl object-cover"},f))},m=r(275271),y=r(637811),b=r(979220),v=r(739792),h=r(248190),_=r(860221),w=r(957363),g=r(380171),x=function(e,t,r){var n=(0,c.compact)(["paywall_checkout.coupon.coupon_tag",e,r&&"forever"!=e?"plus":null]);return(0,v.t)(n,{count:t})},j=function(e,t){var r=Number(e.application_count),n=0;return(null==t?void 0:t.scenario)===_.Rt.value&&(n=2),(_.Rt.trialThenValue===(null==t?void 0:t.scenario)||_.Rt.upfrontThenValue===(null==t?void 0:t.scenario))&&(n=2),(_.Rt.trialThenUpfrontThenValue===(null==t?void 0:t.scenario)||_.Rt.upfrontThenTrialThenValue===(null==t?void 0:t.scenario))&&(n=3),Math.max(r-n,0)},O=function(e){var t,r,o,i=e.paywallPriceId,l=(0,a.Y)().couponPreviewMutation,u=null==l||null==(t=l.data)?void 0:t.paywall_coupon,c=(0,h.k$)(Number(i),null==l||null==(o=l.data)||null==(r=o.paywall)?void 0:r.prices),s=(0,h._j)(Number(i),l);if(!u||h.wH.NO_COUPON_APPLIED===s.status)return null;if(h.wH.COUPON_NOT_AVAILABLE===s.status)return(0,n.jsx)("div",{children:(0,n.jsx)(g.T,{content:(0,v.t)("paywall_checkout.form.errors.coupon_code_not_available"),placement:"top",children:(0,n.jsx)(w.JO,{type:"20-no-tags"})})});var d=x(u.duration,j(s,c),s.has_more);return(0,n.jsx)("div",{children:(0,n.jsx)(g.T,{content:d,placement:"top",children:(0,n.jsx)(w.JO,{type:"20-tags"})})})},P=function(e){var t=e.children;return(0,n.jsxs)("div",{className:"inline-block",children:[(0,n.jsx)(w.JO,{type:"16-arrow-right",size:16}),t]})},S=r(742612),k=r(99103),C=function(e){var t=e.price;return(0,n.jsx)(S.f,{price:t,properties:k.YH})},I=r(784047),E=r(102056),N={includeCurrencyCode:!1},T=r(381636),A=function(e){var t=e.prefix,r=e.oldTitle,a=e.title,o=e.suffix;return(0,n.jsxs)("span",{className:"inline-block whitespace-nowrap",children:[t&&(0,n.jsx)("span",{className:"pr-1",children:(0,n.jsx)(T.Z.LabelSm,{weight:"normal",children:t})}),(0,n.jsxs)("span",{children:[r&&(0,n.jsx)(T.Z.LabelXs,{weight:"normal",children:(0,n.jsx)("span",{className:"text-tertiary pr-1 align-text-bottom line-through","data-testid":"old-price",children:r})}),(0,n.jsx)(T.Z.LabelMd,{weight:"semibold","data-testid":"current-price",children:a})]}),o&&(0,n.jsx)("span",{className:"pl-1",children:(0,n.jsx)(T.Z.LabelSm,{weight:"normal",children:o})})]})},L=function(e){var t=e.paywall,r=e.price,n=e.couponApplication;return r.upfront_payment_amount&&n?{title:(0,E.I)(t.currency,r.upfront_payment_amount-((null==n?void 0:n.discount_amount)||0),N),oldTitle:(0,E.I)(t.currency,r.upfront_payment_amount,N),suffix:(0,v.t)("intro_fee").toLowerCase()}:null},M=function(e){var t=e.paywall,r=e.price,n=e.reducedPrice;return!r.upfront_payment_amount||!n||(0,I.O)(n.upfront_amount)<=r.upfront_payment_amount?null:{title:(0,E.I)(t.currency,r.upfront_payment_amount,N),oldTitle:(0,E.I)(t.currency,(0,I.O)(n.upfront_amount),N),suffix:(0,v.t)("intro_fee").toLowerCase()}},D=function(e){var t=e.paywall,r=e.price;return r.upfront_payment_amount?{title:(0,E.I)(t.currency,r.upfront_payment_amount,N),oldTitle:void 0,suffix:(0,v.t)("intro_fee").toLowerCase()}:null},R=function(e){var t=L(e)||M(e)||D(e);return t?(0,n.jsx)(A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t)):null};function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function U(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var B=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Math.max(n,1),o=e,i=-1;return t?(o/=a,i=Math.floor(o-((null==t?void 0:t.discount_amount)||0))):r&&(0,I.O)(r.amount)>e?(o=(0,I.O)(r.amount)/a,i=e/a):o/=a,{totalPrice:o,totalPriceDiscounted:i}},Z=function(e,t,r){var n,a;return r>=0?(n=(0,E.I)(t.currency,e,N),a=(0,E.I)(t.currency,r,N)):a=(0,E.I)(t.currency,e,N),{title:a,oldTitle:n}},z=function(e){var t=e.price,r=e.paywall,n=e.couponApplication,a=e.reducedPrice,o=B(t.amount,n,a);return U(F({},Z(o.totalPrice,r,o.totalPriceDiscounted)),{suffix:"/".concat((0,v.t)(["paywall_checkout.price_value.interval_suffix",t.interval_type]))})},V=function(e){var t=e.price,r=e.paywall,n=e.couponApplication,a=e.reducedPrice;if(!(0,_.t3)(t))return null;var o=B(Math.floor(t.amount-(t.upfront_payment_amount||0)),n,a,t.installments_count||1),i=o.totalPrice,l=o.totalPriceDiscounted;return U(F({prefix:"".concat(t.installments_count,"x")},Z(i,r,l)),{suffix:"/".concat((0,v.t)(["paywall_checkout.price_value.interval_suffix",t.interval_type]))})},W=function(e){var t=e.price,r=e.paywall,n=e.couponApplication,a=e.reducedPrice;if(!(0,_.ZN)(t))return null;var o=B(t.amount,n,a);return F({},Z(o.totalPrice,r,o.totalPriceDiscounted))},q=function(e){return(0,n.jsx)(A,F({},W(e)||V(e)||z(e)))},G=Object.assign(q,{Value:q,Badge:C,IntroFee:R,Arrow:P,Title:A,BadgeWithArrow:function(e){return(0,n.jsx)(P,{children:(0,n.jsx)(C,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})},IntroFeeWithArrow:function(e){return(0,n.jsx)(P,{children:(0,n.jsx)(R,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})},ValueWithArrow:function(e){return(0,n.jsx)(P,{children:(0,n.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})},Subtitle:function(e){var t=e.prefix,r=e.subtitle;return(0,n.jsxs)("span",{className:"flex flex-row",children:[t&&(0,n.jsx)(T.Z.LabelXs,{color:"text-default",weight:"normal",children:(0,n.jsx)("span",{className:"pr-1 align-text-bottom line-through",children:t})}),(0,n.jsx)(T.Z.LabelXs,{color:"text-default",weight:"medium",children:(0,n.jsx)("span",{className:"inline-block whitespace-nowrap",children:r})})]})}}),H={value:[G],trial_then_value:[G.Badge,G.ValueWithArrow],trial_then_upfront_then_value:[G.Badge,G.IntroFeeWithArrow,G.ValueWithArrow],upfront_then_value:[G.IntroFee,G.ValueWithArrow],upfront_then_trial_then_value:[G.IntroFee,G.BadgeWithArrow,G.ValueWithArrow]},Y=function(e){var t=e.price,r=e.paywall,a=e.reducedPrice,o=e.couponApplications,i=H[t.scenario];return(0,n.jsx)("div",{className:"leading-6",children:i.map(function(e,n){return e({price:t,paywall:r,reducedPrice:a,couponApplication:null==o?void 0:o.applications[n]})})},t.id)},K={subscription:function(e){return["settings.paywall_prices.subscription.title",e]},onetime:function(){return["settings.paywall_prices.onetime.type_qualifier"]},installments:function(){return[]}},J=function(e,t){var r=e.upfront_payment_amount||0,n=e.amount-r,a=(0,I.O)(t.upfront_amount),o=(0,I.O)(t.amount),i=0,l=0;return a>r?(i+=a-r,l+=a):l+=r,o>n?(i+=o-n,l+=o):l+=n,{priceOriginal:l,totalDiscount:i}},$=function(e,t,r,n){if((0,_.QT)(e)||(0,_.ZN)(e))return{subtitle:(0,v.t)(K[e.price_type](e.interval_type))};var a,o=e.amount,i=0,l=0;if((null==r?void 0:r.status)===h.wH.COUPON_APPLIED)l=(null==(a=r.applications)?void 0:a.reduce(function(e,t){return t.discount_amount+e},0))||0;else if(n){var u=J(e,n);o=u.priceOriginal,l=u.totalDiscount}return i=Math.max(0,o-l),{prefix:l>0?(0,E.I)(t.currency,o,N):void 0,subtitle:(0,v.t)(["paywall_checkout.price_value.title",e.price_type,e.interval_type],{total_amount:(0,E.I)(t.currency,i,N)})}},X=function(e){var t=e.price,r=e.paywall,a=e.reducedPrice,o=e.couponApplications;return(0,n.jsx)(G.Subtitle,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},$(t,r,o,a)))};function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var ee=function(e){var t=e.price,r=e.couponPreviewMutation;return(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(b.p.ReducedPrice,{price:t,couponPreviewMutation:r,children:(0,n.jsx)(Y,Q({},e))}),(0,n.jsx)(b.p.PriceCallout,{price:t,children:(0,n.jsx)(b.p.ReducedPrice,{price:t,couponPreviewMutation:r,children:(0,n.jsx)(X,Q({},e))})})]}),(0,n.jsx)(O,{paywallPriceId:t.id})]})},et=r(99595),er=function(e){var t=e.id,r=e.value,a=e.isSelected,i=e.label,l=e.dataTestId;return(0,n.jsx)("label",{className:(0,o.A)("mb-0 p-4 first:rounded-t-xl last:rounded-b-xl",{"bg-secondary":a}),htmlFor:t,"data-testid":l,"data-selected":a,children:(0,n.jsx)(et.Y,{id:t,value:r,labelWrapperClassName:"w-full",labelClassName:"flex flex-col gap-y-1 w-full",label:i,checked:a,name:"paywall_price_id"})})},en=r(829862),ea=r(117617),eo=r(928572),ei=r(996773),el=function(e){var t=e.children;return(0,n.jsx)("div",{className:"flex flex-col gap-3","data-testid":"checkout-paywall-detail",children:t})},eu=r(125152),ec=r(973660),es=function(e){var t=e.event,r=e.className;if(!(null==t?void 0:t.event_setting_attributes))return null;var a=t.event_setting_attributes,i=a.starts_at,l=a.ends_at,u=a.time_zone,c=a.time_zone_abbreviations,s=a.location_type,d=new Date(i),p=new Date(l),f=(0,ec.lo)(d,p,u),m=[{icon:"16-calendar",text:"".concat(f," (").concat(c,")")},{icon:s===eu.Bq.IN_PERSON||s===eu.Bq.TBD?"16-location":"16-video",text:eu.gP[s]}];return(0,n.jsx)("div",{className:(0,o.A)("flex flex-col gap-y-2",r),children:m.map(function(e){var t=e.icon,r=e.text;return(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(w.JO,{type:t,size:16,className:"text-default !w-4"}),(0,n.jsx)(T.Z.LabelXs,{children:r})]},t)})})},ed=function(e){var t=e.title;return(0,n.jsx)(T.Z.LabelLg,{weight:"semibold",children:(0,n.jsx)("span",{className:"text-xl",children:t})})},ep=function(e){var t=e.description;return(0,n.jsx)(T.Z.BodySm,{color:"text-default",children:(0,n.jsx)("span",{className:"whitespace-pre-wrap",children:t})})};function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var em=function(e){var t,r=e.description,a=e.className,i=e.shouldShowMoreInitialState,l=e.maximumLength,u=(t=(0,m.useState)(void 0!==i&&i),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ef(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ef(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],s=u[1],d=function(){s(!c)};return(0,n.jsx)("div",{className:(0,o.A)(a),children:(0,n.jsx)(T.Z.BodySm,{color:"text-default",children:c?(0,n.jsxs)("span",{className:"flex flex-col gap-y-1 whitespace-pre-wrap",children:[r,(0,n.jsx)("button",{type:"button",className:"text-left underline",onClick:d,children:(0,v.t)("show_less")})]}):(0,n.jsxs)("span",{className:"whitespace-pre-wrap",children:["".concat(r.substring(0,void 0===l?160:l),"... "),(0,n.jsx)("button",{type:"button",className:"underline",onClick:d,children:(0,v.t)("show_more")})]})})})},ey={desktop:160,tablet:250,mobile:120},eb=function(e){var t=e.description,r=(0,ea.HE)(),a=(0,ea.j)()?"desktop":r?"tablet":"mobile";return t?t.length<=ey[a]?(0,n.jsx)(ep,{description:t}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(em,{description:t,className:"hidden lg:block",shouldShowMoreInitialState:!0,maximumLength:ey.desktop}),(0,n.jsx)(em,{description:t,className:"block lg:hidden",maximumLength:ey[a]})]}):null},ev=r(60227),eh=function(){var e=(0,a.Y)().paywall,t=(0,ev.u)(e),r=(0,ev.r)(e);return(0,n.jsxs)(el,{children:[(0,n.jsx)(ed,{title:t}),(0,n.jsx)(es,{event:e.event}),(0,n.jsx)(eb,{description:r}),(0,n.jsx)(b.p.Badges,{})]})},e_=Object.assign(function(e){var t=e.className,r=e.dataTestId,i=(0,a.Y)().authProviderProperties,l=(0,ea.a7)();return(0,n.jsxs)(en.s,{className:(0,o.A)("flex flex-row-reverse justify-center lg:justify-normal",t,{"pointer-events-none !hidden opacity-60 lg:!flex":null==i?void 0:i.is_sso_authentication_required}),dataTestId:void 0===r?"paywall-checkout-left-column":r,children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)(e_.CommunityHeader,{}),(0,n.jsx)(b.p.Countdown,{}),(0,n.jsxs)("div",{className:"bg-primary border-primary flex h-fit w-full flex-col rounded-xl border shadow-lg","data-testid":"paywall-checkout-info",children:[(0,n.jsx)(e_.Cover,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 p-4 pb-5 md:p-7",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)(eh,{}),(0,n.jsx)(e_.PriceSelector,{})]}),(0,n.jsx)(eo.d.CouponForm,{className:"pb-4"}),(0,n.jsx)(ei.F,{variant:"with_modals"})]})]})]}),(0,n.jsx)(b.p.List,{shouldHide:!l,className:"px-4"})]})},{Upsell:function(){return(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsxs)("div",{className:"bg-primary border-primary flex h-fit w-full flex-col rounded-xl border shadow-lg","data-testid":"paywall-checkout-info",children:[(0,n.jsx)(e_.Cover,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 p-4 pb-5 md:p-7",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)(eh,{}),(0,n.jsx)(e_.PriceSelector,{})]}),(0,n.jsx)(eo.d.CouponForm,{className:"pb-4",shouldHideCoupon:!0}),(0,n.jsx)(ei.F,{variant:"with_modals"})]})]})})},Cover:function(){var e,t=(0,a.Y)().paywall;return t.event?(0,n.jsx)(f,{}):(null==t||null==(e=t.paywall_customization)?void 0:e.cover_image)?(0,n.jsx)(u,{}):null},PriceSelector:function(){var e=(0,a.Y)(),t=e.paywall,r=e.setSelectedPrice,o=e.isSelectedPrice,i=e.couponPreviewMutation,l=(0,m.useCallback)(function(e){r(e)},[r]);return(0,n.jsx)(y.p,{divProps:{className:"border border-primary rounded-xl divide-y flex flex-col"},onChange:function(e){return l(Number(e.target.id))},children:t.prices.map(function(e){return(0,n.jsx)(er,{id:e.id.toString(),value:e.value,isSelected:o(e),label:(0,n.jsx)(ee,{paywall:t,price:e,couponPreviewMutation:i}),dataTestId:"checkout-paywall-price-option"},"paywall_price-".concat(e.id))})})},CommunityHeader:function(e){var t=e.className,r=(0,a.Y)().currentCommunity;return(0,n.jsx)("div",{className:(0,o.A)("flex flex-row justify-center py-[1.625rem] md:py-[2.625rem] lg:justify-start lg:py-10",t),children:(0,n.jsx)(i,{currentCommunity:r})})}})},250867:function(e,t,r){r.d(t,{g:()=>i});var n=r(552676),a=r(619803),o=r.n(a),i=function(e){var t=e.className,r=e.children;return(0,n.jsx)("div",{className:o()("border-secondary-200 flex flex-col empty:hidden",t),children:r})}},128890:function(e,t,r){r.d(t,{$:()=>ek});var n,a,o,i,l=r(552676),u=r(739792),c=r(381636),s=r(275271),d=r(701168),p=r(250867),f="default",m="paywall_customization",y=r(932699),b=r(572806),v=function(e){var t;return(null==e||null==(t=e.trial_period)?void 0:t.free)?{hide:!0}:{}},h=function(e){return e.first_payment.discount<0||e.first_payment.tax>0||e.first_payment.ending_balance<0},_=r(860221),w=Object.assign({},{DefaultLine:function(e){var t=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},EndingBalanceLine:function(e){var t=e.preview,r=e.options;return!h(t)||t.first_payment.ending_balance>=0?null:(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.first_payment.ending_balance"),tooltip:(0,u.t)("paywall_checkout.first_payment.ending_balance_tooltip"),value:t.first_payment.formatted_ending_balance,valueColor:"text-green-600",dataTestId:"checkout-form-preview-carry-over"},r))},FreeTrialLine:function(e){var t,r=e.preview,n=e.options;return[_.Rt.trialThenValue,_.Rt.trialThenUpfrontThenValue].includes(r.preview_scenario)?(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.free_trial_day",{count:null==r||null==(t=r.trial_period)?void 0:t.days}),value:r.formatted_amount_due_now,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-free-trial"},n)):null},PaidTrialLine:function(e){var t,r=e.preview,n=e.options;return h(r)||![_.Rt.upfrontThenTrialThenValue].includes(r.preview_scenario)?null:(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.first_payment.total_due_for_paid_trial",{count:null==r||null==(t=r.trial_period)?void 0:t.days}),value:r.formatted_amount_due_now,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-paid-trial"},n))},SubtotalLine:function(e){var t=e.preview,r=e.options;return!h(t)||t.first_payment.subtotal<0?null:(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.coupon.subtotal"),value:t.first_payment.formatted_subtotal,dataTestId:"checkout-form-preview-today-payment-subtotal"},r))},TaxLine:function(e){var t=e.preview,r=e.options;return h(t)&&0!==t.first_payment.tax?(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.coupon.tax"),value:t.first_payment.formatted_tax,dataTestId:"checkout-form-preview-today-tax"},r)):null},DiscountLine:function(e){var t=e.preview,r=e.options;return!h(t)||t.first_payment.discount>=0?null:(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.coupon.discount"),value:t.first_payment.formatted_discount,valueColor:"text-green-600",dataTestId:"checkout-form-preview-today-discount"},r))},TodayPaymentLine:function(e){var t=e.preview,r=e.options;return t.first_payment?(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:t.first_payment.due_on_phrase,value:t.first_payment.formatted_amount_due,labelWeight:"semibold",valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-total"},r)):null},TotalDueTodayLine:function(e){var t=e.preview,r=e.options;return h(t)?(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.amount_due"),value:t.formatted_amount_due_now,dataTestId:"checkout-form-preview-total-due-today-line"},r)):null}}),g=r(916823),x="paywall_checkout.todays_payment",j=function(e){var t={label:(0,u.t)(x),value:e.formatted_amount_due_now,valueWeight:"semibold"},r={label:(0,u.t)(x),value:void 0};if([_.Rt.trialThenValue,_.Rt.trialThenUpfrontThenValue].includes(e.preview_scenario))return r;if([_.Rt.upfrontThenValue,_.Rt.upfrontThenTrialThenValue].includes(e.preview_scenario))return!h(e)&&(null==e||null==(o=e.trial_period)?void 0:o.paid)?r:t;if([_.Rt.value].includes(e.preview_scenario)){var n,a,o,i,l=1+ +!!e.future_payments+((null==e||null==(i=e.remaining_payments)?void 0:i.installments_preview.length)||0),c=(0,y.compact)([l>1?(0,u.t)("paywall_checkout.first_payment.header_installments"):(0,u.t)("paywall_checkout.todays_payment"),l>1?"(".concat((0,u.t)("progress_counter",{count:(0,g.hi)(1),total_count:l}),")"):null]).join(" ");return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),a=a={label:c},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n}return t},O=Object.assign({},{TodayPaymentLine:function(e){var t=e.preview,r=j(t);return(0,l.jsx)(w.TodayPaymentLine,{preview:t,options:r})},TotalDueTodayLine:function(e){var t=e.preview,r=[_.Rt.upfrontThenTrialThenValue,_.Rt.upfrontThenValue].includes(t.preview_scenario)?{label:(0,u.t)("paywall_checkout.amount_due_intro_fee")}:[_.Rt.trialThenValue,_.Rt.trialThenUpfrontThenValue].includes(t.preview_scenario)?{hide:!0}:{};return(0,l.jsx)(w.TotalDueTodayLine,{preview:t,options:r})}}),P=[[O.TodayPaymentLine,y.noop],[w.FreeTrialLine,y.noop],[w.SubtotalLine,v],[w.DiscountLine,v],[w.TaxLine,v],[w.EndingBalanceLine,v],[w.PaidTrialLine,y.noop],[O.TotalDueTodayLine,y.noop]],S=[[w.TodayPaymentLine,function(){return{label:(0,u.t)("paywall_checkout.todays_payment")}}],[w.SubtotalLine,y.noop],[w.DiscountLine,y.noop],[w.TaxLine,y.noop],[w.EndingBalanceLine,y.noop],[w.TotalDueTodayLine,y.noop]],k=[[w.TodayPaymentLine,function(e){return[_.Rt.trialThenValue,_.Rt.trialThenUpfrontThenValue].includes(e.preview_scenario)?{label:(0,u.t)("paywall_checkout.todays_payment"),value:null}:{label:(0,u.t)("paywall_checkout.todays_payment")}}],[w.FreeTrialLine,y.noop],[w.SubtotalLine,v],[w.DiscountLine,v],[w.TaxLine,v],[w.EndingBalanceLine,v],[w.TotalDueTodayLine,v]];function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=[[w.TodayPaymentLine,y.noop],[w.SubtotalLine,y.noop],[w.DiscountLine,y.noop],[w.TaxLine,y.noop],[w.EndingBalanceLine,y.noop]],E={default:(C(n={},b.E4.onetime,I),C(n,b.E4.subscription,I),C(n,b.E4.installments,I),n),paywall_customization:(C(a={},b.E4.onetime,S),C(a,b.E4.subscription,k),C(a,b.E4.installments,P),a)};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.className,r=e.preview,n=e.variant,a=(E[void 0===n?f:n]||E[f])[r.paywall_price.price_type];return(0,l.jsx)(p.g,{className:(0,d.A)("gap-y-2",t),children:(0,l.jsx)(s.Fragment,{children:a.map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return N(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return(0,t[0])({preview:r,options:(0,t[1])(r)||{}})})},Math.random())})},A=Object.assign({},{DiscountLine:function(e){var t,r,n=e.preview,a=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.coupon.discount"),value:null==n||null==(t=n.future_payments)?void 0:t.formatted_discount,valueColor:"text-green-600",tooltip:null==n||null==(r=n.future_payments)?void 0:r.discount_phrase,dataTestId:"checkout-form-preview-future-payments-discount"},a))},HeaderLine:function(e){var t,r=e.preview,n=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",value:null==r||null==(t=r.future_payments)?void 0:t.formatted_total,valueWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"},n))},HeaderPaywallCustomizationLine:function(){return(0,l.jsx)(ek.PreviewEntry,{label:(0,u.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"})},RegularPriceLine:function(e){var t,r=e.preview,n=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)(["settings.paywall_prices.subscription.regular_price",r.paywall_price.interval_type]),value:null==r||null==(t=r.future_payments)?void 0:t.formatted_subtotal,dataTestId:"checkout-form-preview-future-payments-regular-price"},n))},SubtotalLine:function(e){var t,r,n=e.preview,a=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:null==n||null==(t=n.future_payments)?void 0:t.start_on_phrase,value:null==n||null==(r=n.future_payments)?void 0:r.formatted_subtotal,dataTestId:"checkout-form-preview-future-payments-subtotal"},a))},TaxLine:function(e){var t,r=e.preview,n=e.options;return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("paywall_checkout.coupon.tax"),value:null==r||null==(t=r.future_payments)?void 0:t.formatted_tax,dataTestId:"checkout-form-preview-future-payments-tax"},n))}}),L=function(e){var t,r,n;return[_.Rt.upfrontThenTrialThenValue,_.Rt.trialThenUpfrontThenValue,_.Rt.upfrontThenValue].includes(e.preview_scenario)?1+((null==e||null==(n=e.remaining_payments)||null==(r=n.installments_preview)?void 0:r.length)||0):1+ +!!e.future_payments+((null==e||null==(t=e.remaining_payments)?void 0:t.installments_preview.length)||0)},M=function(e){return 1===L(e)},D=function(e){return e.future_payments&&(e.future_payments.discount<0||e.future_payments.tax>0)},R=Object.assign({},{DiscountLine:function(e){var t=e.preview,r=e.options;return!t.future_payments||t.future_payments.discount>=0?null:(0,l.jsx)(A.DiscountLine,{preview:t,options:r})},HeaderLine:function(e){var t=e.preview,r=e.options;return t.future_payments?(0,l.jsx)(A.HeaderLine,{preview:t,options:r}):null},HeaderPaywallCustomizationLine:function(){return(0,l.jsx)(A.HeaderPaywallCustomizationLine,{})},RegularPriceLine:function(e){var t=e.preview,r=e.options;return t.future_payments&&D(t)?(0,l.jsx)(A.RegularPriceLine,{preview:t,options:r}):null},SubtotalLine:function(e){var t=e.preview,r=e.options;return t.future_payments?(0,l.jsx)(A.SubtotalLine,{preview:t,options:r}):null},TaxLine:function(e){var t=e.preview,r=e.options;return!t.future_payments||t.future_payments.tax<=0?null:(0,l.jsx)(A.TaxLine,{preview:t,options:r})}});function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U={total_amount_due:0,coupons_applied_quantity:0,installments_preview:[]},B=function(e){if((0,_.Mf)(e.preview_scenario)&&e.future_payments){var t,r=e.remaining_payments||U,n=e.future_payments;return{total_amount_due:(null==r?void 0:r.total_amount_due)+n.amount_due,coupons_applied_quantity:(null==r?void 0:r.coupons_applied_quantity)+ +(n.discount<0),installments_preview:[{amount_due:n.amount_due,start_on:n.start_on,coupon_status:n.discount<0?"applied":"not_applied"}].concat(function(e){if(Array.isArray(e))return F(e)}(t=r.installments_preview)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return F(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}return e.remaining_payments},Z=function(e,t){return"applied"===t.coupon_status&&e.discounted?(e.discounted.totalAmountDue+=t.amount_due,e.discounted.singleInstallmentAmountDue=t.amount_due,e.discounted.quantity+=1):"not_applied"===t.coupon_status&&e.standard&&(e.standard.totalAmountDue+=t.amount_due,e.standard.singleInstallmentAmountDue=t.amount_due,e.standard.quantity+=1),e},z=function(e){var t,r;return{tooltip:void 0,hide:0===((null==(t=e.future_payments)?void 0:t.discount)||0),value:null==(r=e.future_payments)?void 0:r.formatted_discount}},V={trial_then_value:function(e){var t;return{tooltip:void 0,hide:0===((null==(t=e.first_payment)?void 0:t.discount)||0),value:e.first_payment.formatted_discount}},trial_then_upfront_then_value:z,upfront_then_trial_then_value:z,upfront_then_value:z,value:function(){return{hide:!0}}},W=function(e){if(!e.paywall_coupon)return{hide:!0};if(1===L(e))return V[e.preview_scenario](e);var t,r,n=B(e),a=((null==n?void 0:n.coupons_applied_quantity)||0)>0?(0,u.t)(["paywall_checkout.future_payments.discount_phrase_v2",null==e||null==(t=e.paywall_coupon)?void 0:t.duration],{count:null==n?void 0:n.coupons_applied_quantity}):void 0;return(0,_.Mf)(e.preview_scenario)?{hide:0===e.first_payment.discount,value:e.first_payment.formatted_discount,tooltip:a}:{hide:0===((null==(r=e.future_payments)?void 0:r.discount)||0),tooltip:a}},q=function(e){var t,r;return{label:(0,u.t)("paywall_checkout.future_payments.future_payment_after_x_trial_days",{count:null==e||null==(t=e.trial_period)?void 0:t.days}),value:D(e)?null==(r=e.future_payments)?void 0:r.formatted_amount_due:void 0,valueWeight:"semibold"}},G=function(e){var t;return{label:(0,u.t)("paywall_checkout.future_payments.header_installments.one_installment"),value:D(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0,valueWeight:"semibold"}},H={trial_then_value:function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},q(e)),r=r={value:h(e)?e.first_payment.formatted_amount_due:void 0},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},trial_then_upfront_then_value:q,upfront_then_trial_then_value:G,upfront_then_value:G,value:function(){return{hide:!0}}},Y=function(e){var t,r=L(e);return{label:(0,y.compact)([(0,u.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,u.t)("progress_counter",{count:(0,g.hi)(1),total_count:r}),")")]).join(" "),value:D(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0}},K={trial_then_value:function(e){var t,r=L(e);return{label:(0,y.compact)([(0,u.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,u.t)("progress_counter",{count:(0,g.hi)(1),total_count:r}),")")]).join(" "),value:h(e)?null==(t=e.first_payment)?void 0:t.formatted_amount_due:void 0}},trial_then_upfront_then_value:Y,upfront_then_trial_then_value:function(e){var t,r=L(e),n=(0,y.compact)([(0,u.t)(["paywall_checkout.future_payments.header_installments.first_payment",e.paywall_price.interval_type]),"(".concat((0,u.t)("progress_counter",{count:(0,g.hi)(1),total_count:r}),")")]).join(" ");return D(e)?{label:n,value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:"semibold"}:{label:n,value:void 0}},upfront_then_value:Y,value:function(e){var t,r=L(e);return{label:[(0,u.t)(["paywall_checkout.future_payments.header_installments.next_payment",e.paywall_price.interval_type]),"(".concat((0,u.t)("progress_counter",{count:(0,g.hi)(2),total_count:r}),")")].join(" "),value:D(e)?null==(t=e.future_payments)?void 0:t.formatted_amount_due:void 0}}},J=function(e){var t;return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_subtotal,hide:!D(e)}},$={trial_then_value:function(e){return{value:e.first_payment.formatted_subtotal,hide:!h(e)}},trial_then_upfront_then_value:J,upfront_then_trial_then_value:J,upfront_then_value:J,value:function(){return{hide:!0}}},X=function(e){var t,r;return{value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,label:(0,u.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.future_payments)?void 0:r.formatted_start_on}),valueWeight:D(e)?"normal":"semibold"}},Q={trial_then_value:function(e){var t,r;return{valueWeight:h(e)?"normal":"semibold",value:null==(t=e.first_payment)?void 0:t.formatted_amount_due,label:(0,u.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.first_payment)?void 0:r.formatted_due_on})}},trial_then_upfront_then_value:function(e){var t,r;return{valueWeight:D(e)?"normal":"semibold",value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,label:(0,u.t)("paywall_checkout.future_payments.one_time_payment_on",{date:null==(r=e.future_payments)?void 0:r.formatted_start_on})}},upfront_then_trial_then_value:X,upfront_then_value:X,value:function(){return{hide:!0}}},ee=function(e){var t,r,n,a;return(0,_.Mf)(e.preview_scenario)?{value:null==(n=e.first_payment)?void 0:n.formatted_amount_due,valueWeight:h(e)?"normal":"semibold",label:(0,u.t)(["paywall_checkout.future_payments.next_payment_on_v2",e.paywall_price.interval_type],{date:null==e||null==(a=e.first_payment)?void 0:a.formatted_due_on})}:{value:null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:D(e)?"normal":"semibold",label:(0,u.t)(["paywall_checkout.future_payments.next_payment_on_v2",e.paywall_price.interval_type],{date:null==(r=e.future_payments)?void 0:r.formatted_start_on})}},et=function(e){return(e||0)>0},er=function(e){var t,r;return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_tax,hide:!et(null==e||null==(r=e.future_payments)?void 0:r.tax)}},en={trial_then_value:function(e){var t;return{value:e.first_payment.formatted_tax,hide:!et(null==e||null==(t=e.first_payment)?void 0:t.tax)}},trial_then_upfront_then_value:er,upfront_then_trial_then_value:er,upfront_then_value:er,value:function(){return{hide:!0}}},ea=function(e){var t;return M(e)?en[e.preview_scenario](e):{hide:!et(null==e||null==(t=e.future_payments)?void 0:t.tax)}},eo=Object.assign({},{DiscountLine:function(e){var t=e.preview,r=W(t);return(0,l.jsx)(A.DiscountLine,{preview:t,options:r})},HeaderLine:function(e){var t=e.preview,r=1===L(t)?H[t.preview_scenario](t):K[t.preview_scenario](t);return(0,l.jsx)(A.HeaderLine,{preview:t,options:r})},RegularPriceLine:function(e){var t=e.preview,r=M(t)?$[t.preview_scenario](t):{hide:!D(t)};return(0,l.jsx)(A.RegularPriceLine,{preview:t,options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)("subtotal")},r)})},SubtotalLine:function(e){var t=e.preview,r=1===L(t)?Q[t.preview_scenario](t):ee(t);return(0,l.jsx)(A.SubtotalLine,{preview:t,options:r})},TaxLine:function(e){var t=e.preview,r=ea(t);return(0,l.jsx)(A.TaxLine,{preview:t,options:r})}}),ei=[[eo.HeaderLine,y.noop],[eo.RegularPriceLine,y.noop],[eo.DiscountLine,y.noop],[eo.TaxLine,y.noop],[eo.SubtotalLine,y.noop]],el=r(102056),eu=function(e,t,r){var n=(0,y.compact)(["paywall_checkout.future_payments.discount_phrase_v2",e,r&&"forever"!=e?"plus":null]);return(0,u.t)(n,{count:t})},ec=function(e){var t=Number(e.coupon_applications.application_count),r=0;return e.preview_scenario===_.Rt.value&&(r=2),[_.Rt.trialThenValue,_.Rt.upfrontThenValue].includes(e.preview_scenario)&&(r=2),[_.Rt.trialThenUpfrontThenValue,_.Rt.upfrontThenTrialThenValue].includes(e.preview_scenario)&&(r=3),Math.max(t-r,0)},es=[[R.HeaderLine,function(e){var t,r;return(0,_.Mf)(e.preview_scenario)?{label:(0,u.t)("paywall_checkout.future_payments.future_payments_after_x_trial_days",{count:null==e||null==(r=e.trial_period)?void 0:r.days}),value:h(e)?e.first_payment.formatted_amount_due:null}:{value:D(e)?null==e||null==(t=e.future_payments)?void 0:t.formatted_amount_due:null}}],[A.RegularPriceLine,function(e){var t;return(0,_.Mf)(e.preview_scenario)?{hide:!h(e),value:e.first_payment.formatted_subtotal}:{hide:!D(e),value:null==(t=e.future_payments)?void 0:t.formatted_subtotal}}],[A.DiscountLine,function(e){var t,r,n=null==e||null==(t=e.paywall_coupon)?void 0:t.duration,a=ec(e),o=e.coupon_applications.has_more;return(0,_.Mf)(e.preview_scenario)?{hide:0===e.first_payment.discount,value:e.first_payment.formatted_discount,tooltip:n&&a>0&&eu(n,a,o)}:{hide:0===((null==e||null==(r=e.future_payments)?void 0:r.discount)||0),tooltip:n&&a>0&&eu(n,a,o)}}],[A.TaxLine,function(e){var t,r;return(0,_.Mf)(e.preview_scenario)?{hide:0===e.first_payment.tax,value:e.first_payment.formatted_tax}:{hide:0===((null==e||null==(t=e.future_payments)?void 0:t.tax)||0),value:null==e||null==(r=e.future_payments)?void 0:r.formatted_tax}}],[A.SubtotalLine,function(e){var t;if((0,_.Mf)(e.preview_scenario)){var r,n,a,o,i,l,c=e.paywall_price,s="",d={};return(null==e||null==(r=e.paywall_coupon)?void 0:r.duration)==="forever"?(s=(null==e||null==(a=e.future_payments)?void 0:a.formatted_start_on)||"",d={value:(0,el.I)(e.currency,(null==(o=e.future_payments)?void 0:o.amount_due)||e.paywall_price.amount),valueWeight:"normal"}):(null==e||null==(n=e.paywall_coupon)?void 0:n.duration)==="once"?(s=(null==e||null==(i=e.future_payments)?void 0:i.formatted_start_on)||"",d={value:(0,el.I)(e.currency,e.paywall_price.amount),valueWeight:"normal"}):(s=e.first_payment.formatted_due_on,d={value:null==e||null==(l=e.first_payment)?void 0:l.formatted_amount_due,valueWeight:h(e)?"normal":"semibold"}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:(0,u.t)(["paywall_checkout.future_payments.payments_starting_on_phrase",c.price_type,c.interval_type],{date:s})},d)}return{value:null==e||null==(t=e.future_payments)?void 0:t.formatted_amount_due,valueWeight:D(e)?"normal":"semibold"}}]];function ed(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ep=[[R.HeaderLine,y.noop],[R.SubtotalLine,y.noop],[R.DiscountLine,y.noop],[R.TaxLine,y.noop]],ef={default:(ed(o={},b.E4.subscription,ep),ed(o,b.E4.installments,ep),o),paywall_customization:(ed(i={},b.E4.subscription,es),ed(i,b.E4.installments,ei),i)};function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ey=function(e){var t=e.preview,r=e.className,n=e.variant;if("onetime"===t.paywall_price.price_type)return null;var a=(ef[void 0===n?f:n]||ef[f])[t.paywall_price.price_type];return(0,l.jsx)(p.g,{className:(0,d.A)("gap-y-2 border-t",r),children:(0,l.jsx)(s.Fragment,{children:a.map(function(e){var r=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return em(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return em(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return(0,r[0])({preview:t,options:(0,r[1])(t)||{}})})},Math.random())})},eb=r(957363),ev=r(770434),eh={xs:c.Z.LabelXs,sm:c.Z.LabelSm,md:c.Z.LabelMd,default:c.Z.LabelMd},e_=function(e){var t=e.className,r=e.label,n=e.labelSize,a=e.labelWeight,o=e.labelColor,i=e.labelClassName,u=e.tooltip,s=e.value,p=e.valueSize,f=void 0===p?"sm":p,m=e.valueColor,y=e.valueWeight,b=e.hide,v=e.dataTestId;if(void 0!==b&&b)return null;var h=eh[void 0===n?"sm":n]||eh.default,_="sm"===f?c.Z.LabelSm:"md"===f?c.Z.LabelMd:c.Z.LabelLg;return(0,l.jsxs)("div",{className:(0,d.A)(t,"flex flex-row items-center justify-between space-x-2 whitespace-nowrap md:space-x-3"),"data-testid":v,children:[(0,l.jsxs)("div",{className:"flex flex-row gap-x-2 whitespace-normal",children:[(0,l.jsx)(h,{weight:void 0===a?"normal":a,color:o,children:(0,l.jsx)("span",{className:void 0===i?"":i,children:r})}),u&&(0,l.jsx)(ev.Y,{dataTestId:"checkout-form-preview-entry-tooltip",className:"inline-flex",content:u,children:(0,l.jsx)(eb.JO,{type:"16-question-mark",size:16,color:"text-primary"})})]}),s&&(0,l.jsx)(_,{weight:void 0===y?"normal":y,color:void 0===m?"text-primary":m,children:s})]})},ew=function(e){var t,r=null==(t=e.remaining_payments)?void 0:t.installments_preview.reduce(Z,{discounted:{quantity:0,singleInstallmentAmountDue:0,totalAmountDue:0}});if(!(null==r?void 0:r.discounted)||(null==r?void 0:r.discounted.quantity)===0)return{hide:!0};var n=(0,el.I)(e.currency,(null==r?void 0:r.discounted.singleInstallmentAmountDue)||0);return{label:(0,u.t)(["paywall_checkout.future_payments.discounted_installments",e.paywall_price.interval_type],{count:null==r?void 0:r.discounted.quantity}),value:"".concat(null==r?void 0:r.discounted.quantity,"x ").concat(n)}},eg=function(e){var t,r=null==(t=e.remaining_payments)?void 0:t.installments_preview.reduce(Z,{standard:{quantity:0,singleInstallmentAmountDue:0,totalAmountDue:0}});if(!(null==r?void 0:r.standard)||(null==r?void 0:r.standard.quantity)===0||(null==r?void 0:r.standard.totalAmountDue)===0)return{hide:!0};var n=(0,el.I)(e.currency,(null==r?void 0:r.standard.singleInstallmentAmountDue)||0);return{label:(0,u.t)(["paywall_checkout.future_payments.standard_installments",e.paywall_price.interval_type],{count:null==r?void 0:r.standard.quantity}),value:"".concat(null==r?void 0:r.standard.quantity,"x ").concat(n)}},ex=function(e){var t,r;return{label:(0,u.t)(["paywall_checkout.future_payments.remaining_payments",e.paywall_price.interval_type],{count:null==(t=e.remaining_payments)?void 0:t.installments_preview.length}),labelWeight:"semibold",valueWeight:"semibold",value:(0,el.I)(e.currency,(null==e||null==(r=e.remaining_payments)?void 0:r.total_amount_due)||0)}},ej=Object.assign({},{TitleLine:function(e){var t=ex(e.preview);return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},StandardInstallmentsLine:function(e){var t=eg(e.preview);return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))},DiscountedInstallmentsLine:function(e){var t=ew(e.preview);return(0,l.jsx)(ek.PreviewEntry,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:""},t))}}),eO=r(742612),eP=r(99103),eS=function(e){var t=e.preview,r=e.variant;return(0,l.jsx)(p.g,{className:"gap-y-3 border-t py-8",children:(0,l.jsx)(ek.PreviewEntry,{label:(0,l.jsxs)(l.Fragment,{children:[(0,u.t)("paywall_checkout.amount_due"),(void 0===r?f:r)===f&&(0,l.jsx)(eO.f,{preview:t,properties:eP.z8})]}),labelClassName:"flex flex-row gap-x-2 items-baseline",labelSize:"md",labelWeight:"semibold",value:t.formatted_amount_due_now,valueSize:"lg",valueWeight:"semibold",dataTestId:"checkout-form-preview-total-due-today"})})},ek=Object.assign(function(e){var t=e.preview;return(0,l.jsxs)("div",{className:"flex flex-col gap-y-6 md:pt-6",children:[(0,l.jsx)("div",{className:"mb-4 flex flex-row items-center",children:(0,l.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,u.t)("paywall_checkout.order_summary")})}),(0,l.jsx)(T,{className:"pb-4",preview:t}),(0,l.jsx)(ey,{className:"py-4",preview:t}),(0,l.jsx)(eS,{preview:t})]})},{ModalPreviewTemplate:function(e){var t=e.preview;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(ek.FirstPaymentPreview,{preview:t,className:"pb-4",variant:m}),(0,l.jsx)(ek.PaymentAfterTrialPreview,{preview:t,className:"py-4",variant:m}),(0,l.jsx)(ek.FuturePaymentsPreview,{preview:t,className:"py-4",variant:m}),(0,l.jsx)(ek.RemainingPaymentsPreview,{preview:t,className:"py-4",variant:m}),(0,l.jsx)(ek.PaymentSchedulePreview,{preview:t,className:"py-4",variant:m}),(0,l.jsx)(ek.TotalDueTodayPreview,{preview:t})]})},FirstPaymentPreview:T,FuturePaymentsPreview:ey,TotalDueTodayPreview:eS,ProratedCreditPreview:function(e){var t=e.preview,r=e.className,n=t.first_payment,a=n.prorated_credit_description,o=n.prorated_credit_amount,i=n.formatted_prorated_credit_amount;return a&&0!==o?(0,l.jsxs)(p.g,{className:(0,d.A)("gap-y-1 border-t",r),children:[(0,l.jsx)(ek.PreviewEntry,{label:(0,u.t)("paywall_checkout.prorated_credit"),labelWeight:"semibold",value:i,valueColor:o<0?"text-green-600":"text-primary",dataTestId:"checkout-form-preview-prorated-credit"}),(0,l.jsx)(c.Z.LabelXs,{children:a})]}):null},PaymentAfterTrialPreview:function(e){var t=e.preview,r=e.className;if(e.variant===f||![_.Rt.trialThenUpfrontThenValue].includes(t.preview_scenario)||!t.trial_period)return null;var n=t.first_payment.discount<0,a=t.first_payment.tax>0,o=a||n;return(0,l.jsxs)(p.g,{className:(0,d.A)("gap-y-2 border-t",r),children:[(0,l.jsx)(e_,{label:(0,u.t)("paywall_checkout.payment_after_trial.intro_fee_after_x_trial_days",{count:t.trial_period.days}),labelWeight:"semibold",value:o?t.first_payment.formatted_amount_due:void 0,valueWeight:o?"semibold":"normal"}),o&&(0,l.jsx)(e_,{label:(0,u.t)("subtotal"),value:t.first_payment.formatted_subtotal}),n&&(0,l.jsx)(e_,{label:(0,u.t)("paywall_checkout.coupon.discount"),valueColor:"text-green-600",value:t.first_payment.formatted_discount}),a&&(0,l.jsx)(e_,{label:(0,u.t)("paywall_checkout.coupon.tax"),value:t.first_payment.formatted_tax}),(0,l.jsx)(e_,{label:(0,u.t)("paywall_checkout.payment_after_trial.onetime_payment_due_on",{date:t.first_payment.formatted_due_on}),value:t.first_payment.formatted_amount_due,valueWeight:o?"normal":"semibold"})]})},RemainingPaymentsPreview:function(e){var t,r,n=e.preview,a=e.className;if(e.variant===f||"installments"!==n.paywall_price.price_type)return null;var o=(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},n),r=r={remaining_payments:B(n)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t);return(null==o?void 0:o.remaining_payments)?(0,l.jsxs)(p.g,{className:(0,d.A)("gap-y-2 border-t",a),children:[(0,l.jsx)(ej.TitleLine,{preview:o}),(0,l.jsx)(ej.DiscountedInstallmentsLine,{preview:o}),(0,l.jsx)(ej.StandardInstallmentsLine,{preview:o})]}):null},PaymentSchedulePreview:function(e){var t,r,n=e.className,a=e.preview;return e.variant!==f&&(null==a||null==(t=a.future_payments)?void 0:t.payment_schedule_line)?(0,l.jsx)(p.g,{className:(0,d.A)("gap-y-2 border-t",n),children:(0,l.jsx)(ek.PreviewEntry,{label:(0,u.t)("paywall_checkout.payment_schedule",{payment_sentence:null==(r=a.future_payments)?void 0:r.payment_schedule_line}),labelSize:"xs",labelWeight:"medium",labelColor:"text-default",dataTestId:"checkout-form-payment-schedule"})}):null},PreviewEntry:e_})},996773:function(e,t,r){r.d(t,{F:()=>L});var n=r(552676),a=r(242410),o=r(846051),i=r(751169),l=r(128890),u=r(739792),c=r(102056),s=r(701168),d=r(840905),p=r(381636),f=function(e){var t,r=e.className,o=(0,a.Y)().previewMutation,i=o.data;if(!i||o.isLoading)return(0,n.jsx)(d.gi,{variant:"row",lg:!0,className:r});if(i.first_payment.discount>=0||(null==(t=i.trial_period)?void 0:t.free))return null;var l=(0,c.I)(i.currency,-1*i.first_payment.discount);return(0,n.jsx)("div",{className:(0,s.A)("text-right first:w-full first:text-right",r),children:(0,n.jsx)(p.Z.LabelXs,{weight:"medium",color:"text-green-success",children:(0,u.t)("total_savings_today",{formatted_discount:l})})})},m=r(134870),y=r(860221);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){if(e){var t=e.match(/(\d\d\d\d)-(\d\d)-(\d\d)/);if(t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,4)||function(e,t){if(e){if("string"==typeof e)return b(e,4);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[1],a=r[2],o=r[3],i=new Date(Number(n),Number(a)-1,Number(o));return(0,m.w)({dateTime:i,format:m.f.short_month_and_date_with_year})}}},h=function(e){var t=e.className,r=(0,a.Y)().previewMutation,o=r.data;if(!o||r.isLoading)return(0,n.jsx)(d.gi,{variant:"row",lg:!0,className:t});var i=[];if((((null==o||null==(c=o.first_payment)?void 0:c.tax)||0)>0||((null==o||null==(f=o.future_payments)?void 0:f.tax)||0)>0)&&i.push((0,u.t)("tax_included")),(0,y.Mf)(o.preview_scenario)||(0,y.$v)(o.preview_scenario)){var l=v(o.first_payment.due_on);l&&i.push((0,u.t)("next_payment",{next_payment_date:l}))}else{var c,f,m,b=v(null==(m=o.future_payments)?void 0:m.start_on);o.future_payments&&b&&i.push((0,u.t)("next_payment",{next_payment_date:b}))}return(0,n.jsx)("div",{className:(0,s.A)("size-full",t),children:(0,n.jsx)(p.Z.BodyXs,{color:"text-default",children:i.join(" ")})})},_=r(742612),w=r(99103),g=function(){var e=(0,a.Y)().previewMutation.data;return(0,n.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:(0,u.t)("paywall_checkout.amount_due")}),e&&(0,n.jsx)(_.f,{preview:e,properties:w.BD})]})},x=function(){var e,t,r=(0,a.Y)().previewMutation,o=r.data;if(!o||r.isLoading)return(0,n.jsx)("div",{className:"flex flex-row items-center gap-x-1.5",children:(0,n.jsx)(d.gi,{variant:"row",lg:!0})});var i=!(null==o||null==(e=o.trial_period)?void 0:e.free)&&(null==(t=o.first_payment)?void 0:t.discount)<0;return(0,n.jsxs)("div",{className:"flex flex-row gap-x-1.5",children:[i&&(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",color:"text-disabled",children:(0,n.jsx)("span",{className:"line-through",children:(0,c.I)(o.currency,o.first_payment.price_amount,{includeCurrencyCode:!1})})}),(0,n.jsx)(p.Z.LabelMd,{weight:"semibold",children:(0,c.I)(o.currency,o.amount_due_now)})]})},j=Object.assign(function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{}),(0,n.jsx)(x,{})]})},{Value:x}),O=r(39905),P=r(757105),S=r(117617),k=r(984208),C=r(437416),I=r(185633),E=P.gk.create(function(e){var t=e.preview,r=(0,P.dd)(),a=function(){r.hide()};return(0,S.kK)()?(0,n.jsxs)(C.x,{isOpen:r.visible,onClose:a,shouldShowCloseButton:!0,className:"!h-auto !max-h-[80%] rounded-t-2xl",children:[(0,n.jsx)(C.x.Header,{className:"border-none !py-4",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,n.jsx)(p.Z.TitleMd,{weight:"font-bold",children:(0,u.t)("paywall_checkout.order_summary")}),(0,n.jsx)(I.o,{onClick:a})]})}),(0,n.jsx)(C.x.Body,{className:"px-5",children:(0,n.jsx)(l.$.ModalPreviewTemplate,{preview:t})})]}):(0,n.jsx)(k.W,{title:(0,u.t)("paywall_checkout.order_summary"),titleClassName:"!text-left !px-0",isOpen:r.visible,onClose:a,children:(0,n.jsx)(l.$.ModalPreviewTemplate,{preview:t})})}),N=function(e){var t=e.className,r=(0,a.Y)().previewMutation,o=(0,P.dd)(E);return(0,n.jsx)(O.z,{variant:"link",small:!0,className:(0,s.A)("!p-0 text-left",t),type:"button",onClick:function(){(null==r?void 0:r.data)&&o.show({preview:null==r?void 0:r.data})},disabled:r.isLoading,children:(0,n.jsx)(p.Z.LabelXs,{color:(0,s.A)("underline",{"text-secondary":!r.isLoading,"text-lightest":r.isLoading}),children:(0,n.jsx)("span",{className:"cursor-pointer",children:(0,u.t)("view_order_details")})})})},T=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,n.jsx)("div",{className:"flex flex-row justify-between",children:(0,n.jsx)(j,{})}),(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(N,{}),(0,n.jsx)(f,{})]})]}),(0,n.jsx)(h,{})]})},A=Object.assign(T,{CheckoutPagePreview:T,MobileFixedOnTopPreview:function(){var e=(0,a.Y)().previewMutation.data;return(0,n.jsxs)("div",{className:"bg-primary fixed z-10 flex w-full flex-row justify-between border-b px-5 py-4 md:hidden",children:[(0,n.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[(0,n.jsx)(N,{}),e&&(0,n.jsx)(_.f,{properties:w.BD,preview:e})]}),(0,n.jsx)(j.Value,{})]})}}),L=function(e){var t=e.variant,r=void 0===t?"classical":t,u=(0,a.Y)(),c=u.previewMutation,s=u.hasAlreadyPurchased,d=u.paywall,p=c.data;return"with_modals"===r?(0,n.jsx)(A,{}):"mobile_fixed_on_top"===r?(0,n.jsx)(A.MobileFixedOnTopPreview,{}):c.isLoading?(0,n.jsx)(i.a,{variant:"default"}):(0,o.y9)(s,d)||c.isIdle||c.isError||!p?null:(0,n.jsx)(l.$,{preview:p})}},928572:function(e,t,r){r.d(t,{d:()=>rg});var n=r(552676),a=r(275271),o=r(739792),i=r(242410),l=r(846051),u=r(701168),c=r(547144),s=r(227851),d=r(957363),p=r(102056),f=r(380171),m=r(39905),y=r(381636),b=r(248190),v=function(e,t){return(0,o.t)(["paywall_checkout.coupon_badge",e.duration],{amount:"PaywallCoupons::Percent"===e.type?"".concat(Number(null==e?void 0:e.amount),"%"):(0,p.I)(t,Number(null==e?void 0:e.amount),{amountInCents:!1,includeCurrencyCode:!1}),count:null==e?void 0:e.duration_in_months})},h=function(){var e,t,r,a,l=(0,s.Gc)().watch,u=(0,i.Y)(),c=u.couponPreviewMutation,p=u.clearCouponCode,h=u.getSelectedPrice,_=l("coupon_code"),w=null==c||null==(e=c.data)?void 0:e.paywall_coupon,g=null==c||null==(r=c.data)||null==(t=r.paywall)?void 0:t.currency,x=null==(a=h())?void 0:a.id,j=(0,b._j)(x,c);return c.isLoading?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-secondary flex w-fit max-w-full flex-row items-center justify-between gap-x-1 rounded-lg px-3 py-2.5 sm:w-fit md:gap-x-3 md:px-4","data-testid":"checkout-form-coupon-code",children:[(0,n.jsx)(d.JO,{type:"16-tags-topics",size:16,className:"text-default shrink-0"}),(0,n.jsxs)("div",{className:"flex max-w-[80%] shrink flex-row items-center gap-x-2",children:[(0,n.jsx)(y.Z.BodySm,{weight:"medium",color:"text-dark",children:_}),w&&g&&(0,n.jsx)(f.T,{content:v(w,g),placement:"top",className:"text-default truncate text-xs font-normal normal-case leading-4 tracking-normal",children:v(w,g)})]}),(0,n.jsxs)(m.z,{small:!0,className:"text-default !p-0",type:"button",variant:"plain",onClick:function(){p({resetPreview:!0})},"data-testid":"checkout-form-remove-coupon",children:[(0,n.jsx)("span",{className:"sr-only",children:(0,o.t)("paywall_checkout.form.buttons.remove_coupon")}),(0,n.jsx)(d.JO,{type:"24-close",size:24,className:"text-default"})]})]}),j.status!==b.wH.COUPON_APPLIED&&(0,n.jsx)(y.Z.LabelXs,{weight:"normal",color:"text-feedback-error",children:(0,o.t)("paywall_checkout.form.errors.paywall_coupon_does_not_apply_to_price")})]})},_=r(751169),w=r(619803),g=r.n(w),x=(0,a.forwardRef)(function(e,t){var r,a,o=e.className,i=e.error,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["className","error"]);return(0,n.jsx)("input",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:(0,u.A)(o,"placeholder:text-light h-11 grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0 placeholder:opacity-100 focus:border focus:border-gray-500 focus:shadow-none focus:outline-0 focus:ring-0",{"border-red-600 focus:border-red-600":void 0!==i&&i})},l),a=a={ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))}),r))});function j(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}x.displayName="CheckoutFormInput";var O=function(e){var t,r,a=e.autoFocus,i=e.className,l=e.name,u=e.placeholder,c=e.options,d=e.type,p=e.children,f=e.disabled,m=e.wrapperClassName,b=e.checkoutFormClassName,v=e.onBlur,h=e.onKeyDown,_=(0,s.Gc)(),w=_.register,O=_.formState.errors,P=(0,s.U2)(O,l),S=w(l,void 0===c?{}:c);return(0,n.jsxs)("div",{className:g()(i,"flex flex-col gap-y-1"),children:[(0,n.jsxs)("div",{className:g()("flex flex-row gap-x-2.5",m),children:[(0,n.jsx)(x,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({autoFocus:void 0!==a&&a,type:d,error:!!P,placeholder:u},S),r=r={onBlur:function(e){var t;return(t=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,S.onBlur(e)];case 1:return t.sent(),v&&v(e),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(e){j(o,n,a,i,l,"next",e)}function l(e){j(o,n,a,i,l,"throw",e)}i(void 0)})})()},disabled:f,className:b,onKeyDown:h},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),p]}),P&&"password"!==l&&(0,n.jsx)(y.Z.LabelXs,{weight:"normal",color:"text-feedback-error",children:(0,o.t)("paywall_checkout.form.errors.".concat(l,"_").concat(String(P.type)))})]})},P=function(e){var t=e.applyCoupon,r=(0,s.Gc)(),l=r.watch,u=r.setError,c=(0,i.Y)().couponPreviewMutation,d=l("coupon_code");(0,a.useEffect)(function(){var e,t,r,n,a,o,i=null==c||null==(e=c.error)?void 0:e.body;(null==i||null==(r=i.failure)||null==(t=r.code)?void 0:t.match(/coupon_/))&&u("coupon_code",{type:null==i||null==(a=i.failure)||null==(n=a.code)?void 0:n.replace("coupon_",""),message:null==i||null==(o=i.failure)?void 0:o.message})},[c.error]);var p=function(e){return!["",void 0,null].includes(null==e?void 0:e.trim())};return(0,n.jsx)(O,{type:"text",name:"coupon_code",disabled:c.isLoading,checkoutFormClassName:"grow w-[150px] md:w-auto",wrapperClassName:"w-full",onKeyDown:function(e){"Enter"===e.key&&p(d)&&(e.preventDefault(),t())},placeholder:(0,o.t)("coupon_code"),children:d&&(0,n.jsx)(m.z,{large:!0,type:"button",className:"grow md:grow-0",variant:"secondary",disabled:c.isLoading,onClick:function(){p(d)&&t()},"data-testid":"checkout-form-apply-coupon",children:c.isLoading?(0,n.jsx)(_.a,{}):(0,n.jsx)(y.Z.LabelSm,{weight:"medium",children:(0,o.t)("paywall_checkout.form.buttons.apply_coupon")})})})};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=r(996773),C=r(117617),I=r(715622),E=r(852770),N=r(672530),T=r(169770),A=r(194043),L=r(501553),M=r(880676),D=r(544497),R=r(131906),F=r(242856),U=r(343553),B=function(){var e=(0,I.useStripe)(),t=(0,I.useElements)();return(0,a.useCallback)(function(r){if(!t||!e)throw T.K.stripeNotInitialized(r);return{elements:t,stripe:e}},[t,e])};function Z(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Z(o,n,a,i,l,"next",e)}function l(e){Z(o,n,a,i,l,"throw",e)}i(void 0)})}}function V(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var W=function(){var e=(0,i.Y)(),t=e.currentCommunity,r=e.stripePaymentMethodType,n=e.currentUser,a=e.memberBillingInfo,o=B(),u=function(e,t){return(null==a?void 0:a[e])||t.billing_info_attributes[e]||""};return{onSubmitMutation:(0,R.useMutation)(function(e){return z(function(){return V(this,function(a){switch(a.label){case 0:return e.payment_method_type=r,[4,z(function(){var r,a,i,c,s,d,p,f,m,y,b,v,h,_;return V(this,function(w){switch(w.label){case 0:r=o("useBuyNowPayLater.prepare").stripe,a=e.name,i=e.email,c=e.payment_method_type,s=e.paywall_price_id,d=e.coupon_code,p=e.community_member_billing_info_attributes,f=e.password,w.label=1;case 1:return w.trys.push([1,3,,4]),y={name:a,email:i,payment_method_type:c,paywall_price_id:s,community_id:t.id,coupon_code:d,community_member_billing_info_attributes:p,password:f},[4,F.k.prepare(y)];case 2:return m=w.sent(),[3,4];case 3:throw b=w.sent(),T.K.fromUnknownError("useBuyNowPayLater.prepare",b);case 4:v={payment_intent_client_secret:m.payment_intent_client_secret,billing_info_attributes:p,email:i||(null==n?void 0:n.email),name:a||(0,U.q)(n)},w.label=5;case 5:if(w.trys.push([5,12,,13]),!(0,l.dm)(e.payment_method_type))return[3,7];return[4,r.confirmKlarnaPayment(v.payment_intent_client_secret,{payment_method:{billing_details:{email:v.email,address:{country:u("address_country",v)}}},return_url:(0,L.xB)({paymentMethodType:l.Lt.KLARNA})})];case 6:case 8:return h=w.sent(),[3,11];case 7:if(!(0,l.AL)(e.payment_method_type))return[3,9];return[4,r.confirmAfterpayClearpayPayment(v.payment_intent_client_secret,{payment_method:{billing_details:{email:v.email,name:v.name,address:{country:u("address_country",v),line1:u("address_line1",v),city:u("address_city",v),postal_code:u("address_postal_code",v)}}},shipping:{name:v.name,address:{country:u("address_country",v),line1:u("address_line1",v),city:u("address_city",v),postal_code:u("address_postal_code",v)}},return_url:(0,L.xB)({paymentMethodType:l.Lt.AFTERPAY_CLEARPAY})})];case 9:if(!(0,l.Br)(e.payment_method_type))return[3,11];return[4,r.confirmAffirmPayment(v.payment_intent_client_secret,{payment_method:{billing_details:{email:v.email,name:v.name,address:{country:u("address_country",v),line1:u("address_line1",v),city:u("address_city",v),state:u("address_state",v),postal_code:u("address_postal_code",v)}}},shipping:{name:v.name,address:{country:u("address_country",v),line1:u("address_line1",v),city:u("address_city",v),state:u("address_state",v),postal_code:u("address_postal_code",v)}},return_url:(0,L.xB)({paymentMethodType:l.Lt.AFFIRM})})];case 10:h=w.sent(),w.label=11;case 11:return[3,13];case 12:throw _=w.sent(),T.K.fromUnknownError("useBuyNowPayLater.prepare.confirmPayment",_);case 13:if(!h)throw T.K.generic("useBuyNowPayLater.prepare.confirmPayment");if(h.error)throw T.K.fromStripeError("useBuyNowPayLater.prepare.confirmPayment",h.error);return[2,m]}})})()];case 1:return a.sent(),[2]}})})()})}},q=r(903225),G=r(483807),H=r(932699),Y=function(){var e,t,r,n,a,o,l=(0,i.Y)().memberBillingInfo,u=(0,s.Gc)().getValues("name")||"";return{paymentMethodDataParams:(0,H.isEmpty)(l)?{payment_method_data:{billing_details:{name:u}}}:{payment_method_data:{billing_details:{address:(t=(e=l||{}).address_line1,r=e.address_line2,n=e.address_city,a=e.address_state,o=e.address_postal_code,{line1:t,line2:r,city:n,state:a,country:e.address_country,postal_code:o}),name:u}}}}};function K(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function J(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){K(o,n,a,i,l,"next",e)}function l(e){K(o,n,a,i,l,"throw",e)}i(void 0)})}}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function X(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Q(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ee=function(){var e=B(),t=(0,q.k6)(),r=(0,i.Y)(),n=r.checkoutConfirmationUrl,a=r.currentCommunity,o=r.getSelectedPrice,l=r.isCardInfoRequired,u=r.isMemberUsingSavedPaymentMethod,c=r.stripeElementsMode,s=r.stripePaymentMethodType,d=r.isPaywallsCheckoutWithoutInternalResourcesEnabled,p=Y().paymentMethodDataParams,f=c===M.hX.setup,m=function(e,t){return J(function(){return Q(this,function(r){switch(r.label){case 0:return[4,(0,G.m5)(n,e,t)];case 1:return[2,r.sent()]}})})()},y=function(t){return J(function(){var r,n;return Q(this,function(a){switch(a.label){case 0:return[4,e(t).elements.submit()];case 1:if(n=null==(r=a.sent())?void 0:r.error)throw T.K.fromStripeError(t,n);return[2,!0]}})})()},b=o(),v=function(e){var r=e.paymentIntentId,n=e.invoiceId,a=(0,L.$v)({paymentMethodType:s,paymentIntentId:r,invoiceId:n});t.replace(a)};return{onSubmitMutation:(0,R.useMutation)(function(t){return J(function(){var r,n,o,i,c,h,_,w,g;return Q(this,function(x){switch(x.label){case 0:if(r=t,o=(n=e("onSubmitMutation")).elements,i=n.stripe,!l)return[3,8];return[4,y("useCard.onSubmitMutation.isCardInfoRequired")];case 1:if(x.sent(),!f)return[3,8];return[4,F.k.prepare_DEPRECATED(a.id,b.id)];case 2:if(!(!(c=x.sent())||!c.ok))return[3,4];return[4,null==c||null==(h=c.json)?void 0:h.call(c)];case 3:throw _=x.sent(),T.K.fromPaywallError("useCard.onSubmitMutation.prepare_DEPRECATED",_);case 4:return[4,c.json()];case 5:return w=x.sent().setup_intent.client_secret,[4,i.retrieveSetupIntent(w)];case 6:if((g=x.sent()).error)throw T.K.fromStripeError("useCard.onSubmitMutation.retrieveSetupIntent",g.error);if("succeeded"===g.setupIntent.status)return[3,8];return[4,i.confirmSetup({elements:o,clientSecret:w,confirmParams:$({return_url:window.location.href},p),redirect:"if_required"})];case 7:if((g=x.sent()).error)throw T.K.fromStripeError("useCard.onSubmitMutation.confirmSetup",g.error);r.payment_method_processor_id=g.setupIntent.payment_method,x.label=8;case 8:var j;return[4,(j=r,J(function(){var t,r,n;return Q(this,function(a){switch(a.label){case 0:return[4,F.k.create_DEPRECATED({formData:X($({},j),{payment_method_type:s,community_member_adding_payment_method:!u})})];case 1:if(!(!(t=a.sent())||!t.ok))return[3,3];return[4,null==t||null==(r=t.json)?void 0:r.call(t)];case 2:throw n=a.sent(),T.K.fromPaywallError("useCard.execCheckoutRequest.create_DEPRECATED",n);case 3:return[4,t.json()];case 4:var o;return[4,(o=a.sent(),J(function(){var t,r,n,a,i,l,u,c,b;return Q(this,function(h){switch(h.label){case 0:if(r=(t=e("useCard.processPaymentInStripe")).stripe,n=t.elements,a=o.payment_intent_processor_id,i=o.payment_intent_client_secret,l=o.invoice_processor_id,!(!a||!i))return[3,4];if(!d)return[3,1];return v({invoiceId:l}),[3,3];case 1:return[4,m(o,0)];case 2:h.sent(),h.label=3;case 3:return[2];case 4:return[4,r.retrievePaymentIntent(i)];case 5:if((u=h.sent()).error)throw T.K.fromStripeError("useCard.processPaymentInStripe.retrievePaymentIntent",u.error);if((null==(c=null==u?void 0:u.paymentIntent)?void 0:c.status)!=="succeeded")return[3,9];if(!d)return[3,6];return v({paymentIntentId:a}),[3,8];case 6:return[4,m(o,0)];case 7:h.sent(),h.label=8;case 8:return[2];case 9:if(!f)return[3,11];return[4,y("useCard.processPaymentInStripe.isSettingUpPaymentMethod")];case 10:h.sent(),h.label=11;case 11:return[4,r.confirmPayment({elements:n,clientSecret:i,confirmParams:X($({},p),{return_url:(0,L.xB)({paymentMethodType:s,paymentIntentId:a,invoiceId:l})}),redirect:"if_required"})];case 12:if((b=h.sent()).error)throw T.K.fromStripeError("useCard.processPaymentInStripe.confirmPayment",b.error);return v({paymentIntentId:a,invoiceId:l}),[2]}})})())];case 5:return a.sent(),[2]}})})())];case 9:return x.sent(),[2]}})})()})}},et=function(e){return(null==e?void 0:e.status)==="requires_action"};function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function ea(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){en(o,n,a,i,l,"next",e)}function l(e){en(o,n,a,i,l,"throw",e)}i(void 0)})}}function eo(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ei=function(e){throw Error(null==e?void 0:e.message,{cause:e.body})},el=function(){var e,t=(0,I.useStripe)(),r=(0,i.Y)().checkoutConfirmationUrl,n=(0,R.useMutation)(function(e){if(!t)throw Error("Stripe has not been initialized.");return t.confirmPixPayment(e.payment_intent_client_secret,{payment_method:{}})}),o=(e=(0,a.useState)({}),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return er(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],u=o[1],c=(0,R.useMutation)(function(e){return F.k.prepare(e)}),s=(0,R.useMutation)(function(e){return F.k.create({formData:e})}),d=(0,R.useMutation)(function(e){return F.k.attempts.show(e)});return{onSubmitMutation:(0,R.useMutation)(function(e){return ea(function(){var a,o;return eo(this,function(i){var p,f;switch(i.label){case 0:return[4,ea(function(){var r,a,o,i,s,d,p,f;return eo(this,function(m){switch(m.label){case 0:if(!(a=JSON.stringify(l)===JSON.stringify(e)))return[3,4];if(!t)return[3,2];return[4,t.retrievePaymentIntent((null==c||null==(r=c.data)?void 0:r.payment_intent_client_secret)||"")];case 1:return s=m.sent(),[3,3];case 2:s=null,m.label=3;case 3:return i=s,[3,5];case 4:i=null,m.label=5;case 5:if(o=i,p=a&&et(null==o?void 0:o.paymentIntent)&&(null==c?void 0:c.data))return[3,7];return[4,c.mutateAsync(e,{onSuccess:function(){u(e)},onError:ei})];case 6:p=m.sent(),m.label=7;case 7:if(!(d=p))return[3,9];return[4,n.mutateAsync(d)];case 8:if(et(f=m.sent().paymentIntent))throw Error("Pix modal is closed",{cause:L.zS});if((null==f?void 0:f.status)!=="succeeded")throw c.reset(),u({}),Error("Pix payment expired",{cause:L.C});m.label=9;case 9:return[2,d]}})})()];case 1:if(!(a=i.sent()))return[3,4];return[4,(0,G.Tm)({executor:function(){var e;return e=a,ea(function(){var t,r;return eo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,d.mutateAsync(e.payment_intent_id)];case 1:if("completed"===(t=n.sent()).status)return[2,t];return[2,null];case 2:if(404===(r=n.sent()).status)return[2,null];throw r;case 3:return[2]}})})()}})];case 2:if(!((o=i.sent())&&"completed"===o.status))return[3,4];return[4,s.mutateAsync((p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),f=f={payment_intent_id:a.payment_intent_id},Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(f)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(f)).forEach(function(e){Object.defineProperty(p,e,Object.getOwnPropertyDescriptor(f,e))}),p))];case 3:return i.sent(),[2,(0,G.yy)({payment_intent_processor_id:a.payment_intent_id},r)];case 4:throw Error("Pix payment failed",{cause:L.PC})}})})()}),mutations:{prepareMutation:c,checkoutMutation:s,confirmPixPaymentMutation:n}}};function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var ec=function(){var e=(0,i.Y)(),t=e.currentCommunity,r=e.currentCommunityMember,n=e.currentUser,o=e.handleError,l=e.loginRedirectUrl,u=e.paywall,c=e.resetPasswordRedirectUrl,s=e.setPaywallFailure,d=e.stripeElementsMode,p=e.stripePaymentMethodType,f=(0,a.useMemo)(function(){return{communityId:null==t?void 0:t.id,communityMemberId:null==r?void 0:r.id,communityMemberUserId:null==n?void 0:n.id,paywallId:null==u?void 0:u.id,stripeElementsMode:d,stripePaymentMethodType:p}},[t,r,n,u,d,p]);return{handleCheckoutError:(0,a.useCallback)(function(e){if((0,A.M)(e,(t=eu({},f),r=r={caller:e.caller,extra:e.getExtra()},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),e.isNewPaywallError())return void s(e.context.failure);var t,r,n={message:e.message,disablePayButton:!e.shouldAllowToResubmit};e.isLegacyPaywallError()&&(n=eu({},n,(0,L.bE)(e.context,{loginUrl:l,resetPasswordRedirectUrl:c}))),o(n)},[f,o,l,c,s])}};function es(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function ed(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){es(o,n,a,i,l,"next",e)}function l(e){es(o,n,a,i,l,"throw",e)}i(void 0)})}}function ep(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ef(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var em=function(e){var t;return ep(e,Error)&&"cause"in e&&"object"==((t=e.cause)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)&&null!==e.cause&&"error_details"in e.cause&&e.cause.error_details===L.zS.error_details},ey=function(){var e=(0,i.Y)(),t=e.setIsProcessingPayment,r=e.stripePaymentMethodType,n=e.clearAlerts,a=e.currentUser,o=e.previewMutation,u=e.isPaywallsCheckoutWithoutInternalResourcesEnabled,c=ec().handleCheckoutError,d=ee(),p=el(),f=W(),m=(0,D.$)({shouldUseDebounce:!1}).validateEmail,y=(0,s.Gc)(),b=y.setError,v=y.clearErrors,h=y.setFocus,_={pix:p,card:d,link:d,klarna:f,afterpay_clearpay:f,affirm:f,google_pay:d,apple_pay:d,sepa_debit:d,ideal:d,bancontact:d};return{onSubmit:function(e){return ed(function(){var i,s,p,f,y;return ef(this,function(w){switch(w.label){case 0:if(e.coupon_code=(null==o||null==(s=o.variables)||null==(i=s.queryParams)?void 0:i.coupon_code)||"",n(),(0,L.IF)()&&(e.referral_metadata=(0,L.IF)()),u)p=d.onSubmitMutation;else{if(!_[f=(0,l.F_)(e.payment_method_type)?r:e.payment_method_type])throw Error("Invalid payment method type ".concat(f));p=_[f].onSubmitMutation}w.label=1;case 1:var g;return w.trys.push([1,4,5,6]),t(!0),[4,(g=e.email,ed(function(){return ef(this,function(e){switch(e.label){case 0:if(!(!a&&g))return[3,2];return v("email"),[4,m(g)];case 1:if(!0!==e.sent())return b("email",{type:"manual"}),h("email"),[2,!1];e.label=2;case 2:return[2,!0]}})})())];case 2:if(!w.sent())return[2];return[4,p.mutateAsync(e)];case 3:return w.sent(),[3,6];case 4:return em(y=w.sent())||(ep(y,T.K)?c(y):c(T.K.fromUnknownError("useOnSubmit",y))),[3,6];case 5:return t(!1),[7];case 6:return[2]}})})()}}};function eb(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var ev=function(){var e=(0,s.Gc)().getValues,t=ey().onSubmit;return(0,a.useCallback)(function(){var r;return(r=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return[4,t(e())];case 1:return r.sent(),[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){eb(o,n,a,i,l,"next",e)}function l(e){eb(o,n,a,i,l,"throw",e)}i(void 0)})})()},[e,t])};function eh(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function e_(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){eh(o,n,a,i,l,"next",e)}function l(e){eh(o,n,a,i,l,"throw",e)}i(void 0)})}}function ew(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eg(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ex=function(){var e=(0,i.Y)(),t=e.currentCommunityProcessorPaymentMethodConfigurationId,r=e.isLinkPreferenceEnabled,n=e.currentCommunityMemberPaymentProcessorSessionClientSecret,o=e.isMemberWithSavedPaymentMethods,u=e.isMemberUsingSavedPaymentMethod,c=e.stripePaymentMethodType,s=e.stripeElementsMode,d=e.isPaywallsCheckoutWithoutInternalResourcesEnabled,p=(0,I.useElements)(),f=ev(),m=(0,a.useRef)(null),y=(0,a.useCallback)(function(){return e_(function(){var e,a,i,y;return eg(this,function(b){switch(b.label){case 0:if(!p)return[2];if(s!==M.hX.setup)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,f()];case 2:case 3:return b.sent(),[3,4];case 4:return[2];case 5:return e=function(){e_(function(){var e;return eg(this,function(r){switch(r.label){case 0:if(!m.current)return[2];p.off("update-end",m.current),m.current=null,(0,E.EZ)("onSubmitWithPMC.elements.off('update-end') - removed listener",{type:"manual"}),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,f()];case 2:case 3:return r.sent(),[3,5];case 4:return e={customerSessionClientSecret:n,payment_method_configuration:t,payment_method_types:null,setup_future_usage:null},(0,E.EZ)("onSubmitWithPMC.elements.update - restored original options",{metadata:ew({},e),type:"manual"}),p.update(e),[7];case 5:return[2]}})})()},m.current=e,(0,E.EZ)("onSubmitWithPMC.elements.on('update-end') - attached listener",{type:"manual"}),p.on("update-end",e),a=(0,l.Lm)(c)?[l.Lt.CARD]:(0,l.F_)(c)||(0,l.u$)(c)?r?[l.Lt.CARD,l.Lt.LINK]:[l.Lt.CARD]:[c],i=(0,l.F_)(c)&&o&&!u?null:n,y={customerSessionClientSecret:i,payment_method_configuration:null,payment_method_types:a,setup_future_usage:(0,l.mG)(c)||d&&(0,l.dm)(c)?M.pB.off_session:null},(0,E.EZ)("onSubmitWithPMC.elements.update - triggered 'update-end' event",{metadata:ew({},y),type:"manual"}),p.update(y),[2]}})})()},[t,r,c,n,o,u,s,p,f,d]);return(0,a.useEffect)(function(){return function(){p&&m.current&&(p.off("update-end",m.current),m.current=null,(0,E.EZ)("onSubmitWithPMC.elements.off('update-end') - cleaned up listener",{type:"manual"}))}},[p]),{onSubmit:y}},ej=function(){var e=(0,s.Gc)().watch,t=(0,i.Y)(),r=t.currentUser,n=t.hasAlreadyPurchased,o=t.loginUrl,u=t.communityRootUrl,c=t.paywall,d=t.getSelectedPrice,p=t.previewMutation,f=t.paymentError,m=t.isCardInfoValid,y=t.isPaywallActive,b=t.isCardInfoComplete,v=t.setIsCardInfoComplete,h=t.isTaxIdMandatory,_=t.shouldShowTaxIdForm,w=t.setStripePaymentMethodType,g=t.setIsMemberUsingSavedPaymentMethod,x=t.currentCommunity,j=t.currentCommunityMember,O=(0,I.useStripe)(),P=d(),S=e(),k=S.name,C=S.email,M=S.password,D=S.termsOfService,R=S.community_member_billing_info_address_attributes_complete,F=S.community_member_billing_info_attributes,U=F.tax_id_value,B=F.tax_id_type,Z=N.CU.test(C),z=N.zU.test(M),V=!R||!D||!r&&(!k||!Z||!z)||!m||!y||f.disablePayButton||(0,l.y9)(n,c)||p.isLoading||p.isError||h&&_&&(!U||!B),W=p.data,q=(0,L.Gs)({isPaywallActive:y,selectedPrice:P,preview:W,currency:c.currency}),G=ex().onSubmit,H=(0,a.useCallback)(function(e){var t,r,n,a,o;w(e.value.type),e.complete?((0,E.EZ)("usePayment.onChange - completed payment method",{metadata:{payment_method_id:null==(a=e.value)||null==(n=a.payment_method)?void 0:n.id,payment_method_type:null==(o=e.value)?void 0:o.type},type:"manual"}),v(!0)):b&&v(!1),g(!!(null==(r=e.value)||null==(t=r.payment_method)?void 0:t.id))},[b,v,g,w]),Y=(0,a.useCallback)(function(e){var t=T.K.fromStripeError("usePayment.onLoadError",e.error);(0,A.M)(t,{caller:t.caller,communityId:null==x?void 0:x.id,communityMemberId:null==j?void 0:j.id,communityMemberUserId:null==r?void 0:r.id,extra:t.getExtra(),paywallId:null==c?void 0:c.id})},[x,j,r,c]);return{paymentError:f,isSubmitDisabled:V,selectedPrice:P,currentUser:r,stripe:O,loginUrl:o,communityRootUrl:u,payButtonLabel:q,hasAlreadyPurchased:n,handleOnChangeCard:H,handleOnReadyCard:function(e){return r&&e.focus()},onLoadError:Y,onSubmit:G}},eO=r(266515),eP=r(979220),eS=r(829862),ek=r(441342),eC=r(250867),eI=r(664657),eE=r(417493),eN=r(346705),eT=function(){var e,t=(0,eE.Q)().paywallCustomization,r=((null==t?void 0:t.countdown_properties)||{enabled:!1}).enabled,n=null==t?void 0:t.countdown_properties;return r&&(0,eN.d0)(null==n||null==(e=n.action)?void 0:e.action_type)},eA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=eT();return(0,a.useMemo)(function(){var r=new URL(window.location.href),n=Object.keys(e);return t&&r.searchParams.set(eN.WI,"true"),n.forEach(function(t){r.searchParams.set(t,e[t])}),r.href},[t,e])},eL=function(){var e=(0,i.Y)(),t=e.currentUser,r=e.currentCommunityMember||t,a=eA();if(!r)return null;var l="".concat((0,c.jE)(),"?redirect_back_url=").concat(a);return(0,n.jsxs)("div",{className:"border-primary bg-primary shadow-xs flex flex-row items-center gap-x-4 rounded-xl border p-4","data-testid":"checkout-form-account-details",children:[(0,n.jsx)(eI.W,{src:r.avatar_url,name:r.name,size:"10"}),(0,n.jsxs)("div",{className:"flex w-full flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(y.Z.LabelSm,{weight:"medium","data-testid":"checkout-form-account-details-name",children:r.name}),(0,n.jsx)(y.Z.LabelXs,{weight:"medium",children:(0,n.jsx)("a",{className:"!text-dark cursor-pointer",href:l,children:(0,o.t)("sign_out")})})]}),(0,n.jsx)(y.Z.LabelXs,{weight:"medium",color:"text-default","data-testid":"checkout-form-account-details-email",children:r.email})]})]})},eM=r(709981);function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eR(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function eF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eU=function(e){var t=e.fieldName,r=eF((0,a.useState)(!1),2),n=r[0],o=r[1],i=eF((0,a.useState)(!1),2),l=i[0],u=i[1],c=(0,s.Gc)(),d=c.watch,p=c.formState.errors,f=c.trigger,m=d(t),y=(0,s.U2)(p,t),b=(0,a.useMemo)(function(){return(0,eM.eF)(m||"")},[m]);return(0,a.useEffect)(function(){m||o(!1)},[m]),(0,a.useEffect)(function(){(0,eM.G2)(b)&&y&&f(t)},[b,y,f,t]),{isPasswordVisible:n,isFocused:l,setIsPasswordVisible:o,passwordFieldError:y,passwordValue:m,passwordStrength:b,handleBlur:function(){var e;return(e=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return u(!1),[4,f(t)];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){eR(o,n,a,i,l,"next",e)}function l(e){eR(o,n,a,i,l,"throw",e)}i(void 0)})})()},handleFocus:(0,a.useCallback)(function(){u(!0)},[])}},eB=r(929570),eZ=r(782542),ez=function(e){var t=e.email,r=e.onClose,a=(0,C.kK)();return(0,n.jsxs)("div",{className:"bg-secondary flex items-center justify-between rounded-t-xl py-[13px]",children:[(0,n.jsx)(y.Z.BodySm,{weight:"normal",size:"text-base",children:t}),(0,n.jsx)(m.z,{type:"button",variant:"tertiary",onClick:r,className:"rounded-full !p-1",children:(0,n.jsx)(d.JO,{type:a?"24-close":"20-close",size:a?24:20,className:(0,u.A)({"!text-dark":a,"text-primary":!a})})})]})},eV=function(){return(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border px-2 py-1",children:[(0,n.jsx)(d.JO,{type:"16-safe-lock",size:16,color:"text-tertiary"}),(0,n.jsx)(y.Z.LabelXs,{weight:"medium",color:"text-tertiary",children:(0,o.t)("paywall_checkout.form.safe_and_secure")})]})},eW="paywall_checkout.form.email_verification_states.account_setup_state",eq=function(e){var t=e.email,r=e.onClose,a=(0,i.Y)().currentCommunity,l=eU({fieldName:"password"}),u=l.isPasswordVisible,c=l.setIsPasswordVisible,s=l.passwordValue,d=l.passwordFieldError,p=l.passwordStrength,f=l.handleBlur,m=(null==a?void 0:a.name)||(0,o.t)([eW,"community_label"]);return(0,n.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,n.jsx)(ez,{email:t,onClose:r}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"flex flex-col gap-6",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,o.t)([eW,"join_community"],{community_name:m})}),(0,n.jsx)(y.Z.BodySm,{weight:"normal",color:"text-default",children:(0,o.t)([eW,"create_password"],{community_name:m})})]})}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)(rg.Item,{name:"password",children:[(0,n.jsxs)("div",{className:"relative flex items-center",children:[(0,n.jsx)(O,{type:u&&s?"text":"password",name:"password",options:{required:!0,pattern:N.zU},className:"w-full",checkoutFormClassName:"!pr-12",onBlur:f}),(0,n.jsx)(eZ.Z,{passwordValue:s,isPasswordVisible:u,setIsPasswordVisible:c})]}),(0,n.jsx)(eB.o,{passwordStrength:p,passwordFieldError:d,passwordValue:s})]})})]}),(0,n.jsx)("div",{className:"flex items-center justify-start",children:(0,n.jsx)(eV,{})})]})},eG="initial",eH="otp_required",eY="password_signin",eK="signup",eJ="claim",e$="SET_EMAIL",eX="START_VALIDATION",eQ="VALIDATION_SUCCESS",e0="VALIDATION_ERROR",e1="START_OTP_SUBMISSION",e2="OTP_SUBMISSION_SUCCESS",e6="OTP_SUBMISSION_ERROR",e3="START_RESEND_OTP",e4="RESEND_OTP_SUCCESS",e5="RESEND_OTP_ERROR",e7="START_PASSWORD_SUBMISSION",e9="PASSWORD_SUBMISSION_SUCCESS",e8="PASSWORD_SUBMISSION_ERROR",te="START_FORGOT_PASSWORD_SUBMISSION",tt="FORGOT_PASSWORD_SUBMISSION_SUCCESS",tr="FORGOT_PASSWORD_SUBMISSION_ERROR",tn="SHOW_OTP_FORM",ta="SHOW_PASSWORD_FORM",to="SHOW_CLAIM_FORM",ti="RESET_TO_INITIAL",tl=function(e){return"existing_member"===e},tu=function(e){return"new_member"===e},tc=function(e){return"user_with_pending_invitation"===e},ts=function(e){return e===eK};function td(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var tp=function(e){var t=e.onAuthenticationLinkClick,r=(0,s.Gc)(),n=r.trigger,o=r.formState.errors,i=(0,r.watch)("email"),l=(0,a.useCallback)(function(){},[]),u=(0,a.useCallback)(function(){null==t||t()},[t]);return(0,a.useEffect)(function(){var e;(e=function(){var e;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(!((e=null==i?void 0:i.trim())&&N.CU.test(e)&&o.email&&"manual"!==o.email.type))return[3,2];return[4,n("email")];case 1:t.sent(),t.label=2;case 2:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){td(o,n,a,i,l,"next",e)}function l(e){td(o,n,a,i,l,"throw",e)}i(void 0)})})()},[i,n,o.email]),{handleBlur:l,handleAuthenticationClick:u}},tf="paywall_checkout.form.email_verification_states.initial_state",tm=function(e){var t=e.isValidating,r=void 0!==t&&t,a=e.shouldShowAuthenticationLink,i=tp({onAuthenticationLinkClick:e.onAuthenticationLinkClick}),l=i.handleBlur,u=i.handleAuthenticationClick;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,n.jsx)(rg.Item,{name:"email",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(O,{type:"text",name:"email",onBlur:l,options:{required:!0,pattern:N.CU}}),r&&(0,n.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2",children:(0,n.jsx)(_.a,{})})]})}),void 0!==a&&a&&(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,n.jsx)(d.JO,{className:"text-v2-warning",type:"info",size:20,useWithFillCurrentColor:!0}),(0,n.jsxs)(y.Z.LabelXs,{weight:"normal",color:"text-tertiary",children:[(0,n.jsx)(m.z,{type:"button",disabled:r,variant:"link",onClick:u,className:"text-tertiary hover:text-primary !h-auto !p-0 underline",children:(0,n.jsx)(y.Z.LabelXs,{weight:"medium",color:"inherit",children:(0,o.t)([tf,"authenticate_account"])})})," ".concat((0,o.t)([tf,"before_completing_checkout"]))]})]})]})},ty=function(e){var t=e.shouldShowMessage,r=e.messageType;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(_.a,{className:"!py-0"})}),(void 0===t||t)&&(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(y.Z.BodySm,{weight:"normal",color:"text-default",children:(0,o.t)(["paywall_checkout.form","success"===r?"completing_login":"authenticating_account"])})})]})},tb=r(671580),tv=function(){var e=(0,tb.i)().refreshSession;return{reloadPage:function(){e()}}};function th(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var t_=function(e){var t,r=e.status,n=e.isSubmitting,o=void 0!==n&&n,i=e.error,l=void 0===i?null:i,u=e.onOTPSubmit,c=e.onResendCode,s=e.onShowClaimForm,d=(t=(0,a.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return th(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return th(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=d[0],f=d[1],m=tv().reloadPage,y=(0,a.useRef)(!1),b=(0,a.useCallback)(function(e){null==u||u(e)},[u]),v=(0,a.useCallback)(function(){null==c||c()},[c]);(0,a.useEffect)(function(){o?(y.current=!0,f(!1)):y.current&&!o&&(y.current=!1,l||(f(!0),tl(r)||tu(r)?m():(null==s||s(),f(!1))))},[o,l,r,s]),(0,a.useEffect)(function(){l&&f(!1)},[l]);var h=p&&!o&&!l,_=!(o||h);return{isSuccessShown:h,hasError:!!l,shouldShowSuccess:h,shouldShowFooter:_,handleOTPComplete:b,handleResendClick:v}},tw=function(e){var t=e.status,r=e.isSubmitting,a=e.isResending,i=e.onShowPasswordForm;return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[tl(t)&&(0,n.jsx)(m.z,{type:"button",variant:"link",onClick:i,disabled:void 0!==r&&r||void 0!==a&&a,className:"!px-0 underline",children:(0,n.jsx)(y.Z.LabelSm,{weight:"normal",children:(0,o.t)(["paywall_checkout.form.email_verification_states.otp_state","sign_in_with_password"])})}),(0,n.jsx)(eV,{})]})},tg=r(963425);function tx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tP=function(e){var t,r,i=e.onComplete,l=e.onValueChange,u=e.disabled,c=void 0!==u&&u,s=e.error,d=void 0!==s&&s,p=(t=(0,a.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tx(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tx(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],m=p[1],y=(0,C.WJ)();return(0,a.useEffect)(function(){d&&m("")},[d]),(0,n.jsxs)("fieldset",{className:"contents",children:[(0,n.jsx)("legend",{className:"sr-only",children:(0,o.t)("paywall_checkout.form.email_verification_states.otp_state.verification_code_legend")}),(0,n.jsx)(tg.default,{value:f,onChange:function(e){m(e),null==l||l(e),6===e.length&&(null==i||i(e))},numInputs:6,separator:(0,n.jsx)("span",{className:"w-[.65rem] sm:w-[1.9rem]"}),isInputNum:!0,shouldAutoFocus:!c,inputStyle:(r={width:y?"56px":"48px",height:y?"56px":"48px",border:"1px solid",borderRadius:"8px",fontSize:y?"18px":"16px",lineHeight:y?"28px":"24px",fontWeight:"500",textAlign:"center",outline:"none",transition:"all 0.15s ease-in-out",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--color-white)",color:"var(--color-text-darkest)"},c?tO(tj({},r),{borderColor:"var(--color-border-tertiary)",backgroundColor:"var(--color-background-secondary)",cursor:"not-allowed",color:"var(--color-text-disabled)"}):d?tO(tj({},r),{borderColor:"var(--color-feedback-error)"}):tO(tj({},r),{borderColor:"var(--color-border-primary)",boxShadow:"none"})),focusStyle:d?{borderColor:"var(--color-feedback-error)",boxShadow:"0 0 0 2px rgba(220, 38, 38, 0.2)"}:{borderColor:"var(--color-border-light)"},isDisabled:c})]})},tS="paywall_checkout.form.email_verification_states.otp_state",tk=function(e){var t=e.isSubmitting,r=e.isResending,a=void 0!==r&&r,i=e.onResendClick;return(0,n.jsxs)("div",{children:["".concat((0,o.t)([tS,"did_not_receive_code"])," "),(0,n.jsx)(m.z,{type:"button",variant:"link",onClick:i,className:"!h-auto !p-0 underline",disabled:void 0!==t&&t||a,children:(0,n.jsx)(y.Z.LabelSm,{weight:"normal",children:a?(0,o.t)([tS,"sending"]):(0,o.t)([tS,"resend_code"])})})]})},tC="paywall_checkout.form.email_verification_states.otp_state",tI=function(e){var t=e.email,r=e.status,a=e.onClose,i=e.onShowPasswordForm,l=e.onShowClaimForm,u=e.onOTPSubmit,c=e.onResendCode,s=e.isSubmitting,d=void 0!==s&&s,p=e.isResending,f=void 0!==p&&p,m=e.error,b=t_({status:r,isSubmitting:d,error:void 0===m?null:m,onOTPSubmit:u,onResendCode:c,onShowClaimForm:l}),v=b.hasError,h=b.shouldShowSuccess,_=b.shouldShowFooter,w=b.handleOTPComplete,g=b.handleResendClick;return(0,n.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,n.jsx)(ez,{email:t,onClose:a}),(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,o.t)([tC,"enter_verification_code"])}),(0,n.jsxs)(y.Z.BodySm,{weight:"normal",color:"text-default",textAlign:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{children:[(0,o.t)([tC,"enter_the_code_sent_to"]),"\xa0",(0,n.jsx)(y.Z.LabelSm,{weight:"medium",children:t}),"\xa0",(0,o.t)([tC,"to_securely_authenticate_your_account"])]}),(0,n.jsx)(tk,{isSubmitting:d,isResending:f,onResendClick:g})]})]}),(0,n.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,n.jsx)(tP,{onComplete:w,disabled:d||f,error:v})})]}),(d||h)&&(0,n.jsx)(ty,{messageType:h&&(tl(r)||tu(r))?"success":"authenticating"}),_&&(0,n.jsx)(tw,{status:r,isSubmitting:d,isResending:f,onShowPasswordForm:i})]})};function tE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tE(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tT=function(e){var t=e.isSubmitting,r=void 0!==t&&t,n=e.error,o=void 0===n?null:n,i=e.onPasswordSubmit,l=tN((0,a.useState)(""),2),u=l[0],c=l[1],s=tN((0,a.useState)(!1),2),d=s[0],p=s[1],f=(0,a.useRef)(!1),m=tv().reloadPage,y=(0,a.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),u.trim()&&(null==i||i(u))},[u,i]),b=(0,a.useCallback)(function(e){c(e.target.value)},[]),v=(0,a.useCallback)(function(e){"Enter"!==e.key||r||(e.preventDefault(),e.stopPropagation(),y(e))},[r,y]);return(0,a.useEffect)(function(){r?(f.current=!0,p(!1)):f.current&&!r&&(f.current=!1,o||p(!0))},[r,o]),(0,a.useEffect)(function(){o&&p(!1)},[o]),(0,a.useEffect)(function(){d&&m()},[d]),{password:u,hasError:!!o,isSuccessShown:d,handleSubmit:y,handlePasswordChange:b,handleKeyDown:v}},tA="paywall_checkout.form.email_verification_states.password_state",tL=function(e){var t=e.isSubmitting,r=e.isSubmittingForgotPassword,a=e.onForgotPasswordSubmit,i=e.onShowOTPForm;return(0,n.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsxs)("div",{className:"flex justify-between sm:gap-4",children:[(0,n.jsx)(m.z,{type:"button",variant:"link",onClick:a,disabled:t||r,className:"!px-0 underline",children:(0,n.jsx)(y.Z.LabelSm,{weight:"normal",children:(0,o.t)([tA,"forgot_password.link"])})}),(0,n.jsx)(m.z,{type:"button",variant:"link",onClick:i,disabled:t||r,className:"!px-0 underline",children:(0,n.jsx)(y.Z.LabelSm,{weight:"normal",children:(0,o.t)([tA,"sign_in_with_code"])})})]}),(0,n.jsx)("div",{className:"flex justify-start sm:justify-end",children:(0,n.jsx)(eV,{})})]})},tM="paywall_checkout.form.email_verification_states.password_state",tD=function(e){var t=e.password,r=e.hasError,a=e.isSubmitting,i=e.isSubmittingForgotPassword,l=e.shouldShowActions,u=e.onPasswordChange,c=e.onKeyDown,s=e.onSubmit;return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)(y.Z.TitleSm,{weight:"bold",size:"text-base",children:(0,o.t)([tM,"sign_in_to_your_account"])}),(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)(y.Z.LabelSm,{weight:"medium",children:(0,o.t)("paywall_checkout.form.fields.password")}),(0,n.jsx)(x,{type:"password",value:t,onChange:u,onKeyDown:c,disabled:a||i,error:r,autoFocus:!0,autoComplete:"current-password"})]}),l&&(0,n.jsx)(m.z,{type:"button",variant:"circle",disabled:a||i||!t.trim(),onClick:s,className:"self-start !text-sm font-medium","data-testid":"paywall-checkout-password-sign-in-button",children:(0,o.t)([tM,"sign_in"])})]})]})},tR=function(e){var t=e.email,r=e.onClose,a=e.onShowOTPForm,o=e.onPasswordSubmit,i=e.onForgotPasswordSubmit,l=e.isSubmitting,u=void 0!==l&&l,c=e.isSubmittingForgotPassword,s=void 0!==c&&c,d=e.error,p=tT({isSubmitting:u,error:void 0===d?null:d,onPasswordSubmit:o}),f=p.password,m=p.hasError,y=p.isSuccessShown,b=p.handleSubmit,v=p.handlePasswordChange,h=p.handleKeyDown,_=u||s,w=y&&!_,g=!_&&!w;return(0,n.jsxs)("div",{className:"flex flex-col gap-5 pb-6 *:px-6",children:[(0,n.jsx)(ez,{email:t,onClose:r}),(0,n.jsx)(tD,{password:f,hasError:m,isSubmitting:u,isSubmittingForgotPassword:s,shouldShowActions:g,onPasswordChange:v,onKeyDown:h,onSubmit:b}),(_||w)&&(0,n.jsx)(ty,{shouldShowMessage:u||w,messageType:w?"success":"authenticating"}),g&&(0,n.jsx)(tL,{isSubmitting:u,isSubmittingForgotPassword:s,onForgotPasswordSubmit:i,onShowOTPForm:a})]})},tF=function(e){var t=e.displayedStep,r=e.state,a=e.onAuthenticationLinkClick,o=e.resetToInitial,i=e.showPasswordForm,l=e.showClaimForm,u=e.handleOTPSubmit,c=e.handleResendOTP,s=e.showOTPForm,d=e.handlePasswordSubmit,p=e.handleForgotPasswordSubmit;return t===eG||"validating"===t?(0,n.jsx)(tm,{isValidating:r.isLoading,shouldShowAuthenticationLink:r.shouldShowAuthenticationLink,onAuthenticationLinkClick:a}):t===eH?(0,n.jsx)(tI,{email:r.email,status:r.status,onClose:o,onShowPasswordForm:i,onShowClaimForm:l,onOTPSubmit:u,onResendCode:c,isSubmitting:r.isSubmittingOTP,isResending:r.isResendingOTP,error:r.error}):t===eY?(0,n.jsx)(tR,{email:r.email,onClose:o,onShowOTPForm:s,onPasswordSubmit:d,onForgotPasswordSubmit:p,isSubmitting:r.isSubmittingPassword,isSubmittingForgotPassword:r.isSubmittingForgotPassword,error:r.error}):ts(t)||t===eJ?(0,n.jsx)(eq,{email:r.email,onClose:o}):null};function tU(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var tB=function(e){var t=e.verifyEmail,r=e.onEmailChange,n=e.onValidationStart,o=e.onValidationSuccess,i=e.onValidationError,l=(0,(0,s.Gc)().watch)("email")||"",u=(0,a.useMemo)(function(){return(0,H.debounce)(function(e){var r;return(r=function(){return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!N.CU.test(e))return[2];n(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t(e)];case 2:return o(r.sent().status),[3,4];case 3:return r.sent(),i(""),[3,4];case 4:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(n,a){var o=r.apply(e,t);function i(e){tU(o,n,a,i,l,"next",e)}function l(e){tU(o,n,a,i,l,"throw",e)}i(void 0)})})()},500)},[t,n,o,i]),c=(0,a.useCallback)(function(e){r(e),N.CU.test(e)&&u(e)},[r,u]);return(0,a.useEffect)(function(){var e=l.trim();e&&c(e)},[l,c]),{handleEmailChange:c}},tZ=function(e){var t=e.state,r=e.dispatch,n=e.setValue,o=e.mutations,i=o.verifyEmailMutation,l=o.verifyOTPMutation,u=o.resendOTPMutation,c=o.signInWithPasswordMutation,s=o.forgotPasswordMutation;return{handleEmailChange:(0,a.useCallback)(function(e){r({type:e$,payload:e}),n("email",e)},[r,n]),startValidation:(0,a.useCallback)(function(){r({type:eX})},[r]),handleValidationSuccess:(0,a.useCallback)(function(e){r({type:eQ,payload:{status:e}})},[r]),handleValidationError:(0,a.useCallback)(function(e){r({type:e0,payload:e})},[r]),handleOTPSubmit:(0,a.useCallback)(function(e){t.email&&(r({type:e1}),l.mutate({email:t.email,otp:e}))},[t.email,r,l]),handlePasswordSubmit:(0,a.useCallback)(function(e){t.email&&(r({type:e7}),c.mutate({email:t.email,password:e}))},[t.email,r,c]),handleForgotPasswordSubmit:(0,a.useCallback)(function(){t.email&&(r({type:te}),s.mutate(t.email))},[t.email,r,s]),handleResendOTP:(0,a.useCallback)(function(){t.email&&(r({type:e3}),u.mutate(t.email))},[t.email,r,u]),showOTPForm:(0,a.useCallback)(function(){r({type:tn})},[r]),showPasswordForm:(0,a.useCallback)(function(){r({type:ta})},[r]),showClaimForm:(0,a.useCallback)(function(){r({type:to}),t.verifiedOTP&&tc(t.status)&&n("otp",t.verifiedOTP)},[r,t.verifiedOTP,t.status,n]),resetToInitial:(0,a.useCallback)(function(){r({type:ti}),n("password",""),n("otp","")},[r,n]),handleAuthenticationLinkClick:(0,a.useCallback)(function(){t.email&&N.CU.test(t.email)&&(r({type:eX}),i.mutate(t.email))},[t.email,r,i])}},tz=r(93199),tV=r(102499),tW=r(60878),tq=function(e){var t=e.dispatch,r=(0,tW.pm)(),n=r.success,a=r.error,i=function(e){return function(r){var n=(null==r?void 0:r.message)||(0,o.t)("paywall_checkout.form.errors.generic_error");t({type:e,payload:n}),a(n,{duration:"long"})}};return{verifyEmailMutation:(0,R.useMutation)(function(e){return(0,tz.Cu)(c.av.paywallCheckout.emailVerifications.create(),{email:e})},{onSuccess:function(e){t({type:eQ,payload:{status:e.status}})},onError:i(e0)}),verifyOTPMutation:(0,R.useMutation)(function(e){var t=e.email,r=e.otp;return(0,tz.Cu)(c.av.paywallCheckout.otpSessions.create(),{user:{email:t,otp:r}})},{onSuccess:function(e,r){t({type:e2,payload:{otp:r.otp}})},onError:i(e6)}),resendOTPMutation:(0,R.useMutation)(function(e){return(0,tz.Cu)(tV.P.resendOtp(),{user:{email:e}})},{onSuccess:function(){t({type:e4}),n((0,o.t)("paywall_checkout.form.resent_otp"))},onError:i(e5)}),signInWithPasswordMutation:(0,R.useMutation)(function(e){var t=e.email,r=e.password;return(0,tz.Cu)(c.av.paywallCheckout.authSessions.create(),{user:{email:t,password:r}})},{onSuccess:function(){t({type:e9})},onError:i(e8)}),forgotPasswordMutation:(0,R.useMutation)(function(e){return(0,tz.Cu)(tV.P.resetPassword(),{user:{email:e}})},{onSuccess:function(){t({type:tt}),n((0,o.t)("paywall_checkout.form.email_verification_states.password_state.forgot_password.success"))},onError:i(tr)})}};function tG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tK=function(e,t){var r,n;switch(t.type){case e$:return tY(tH({},e),{email:t.payload,error:null});case eX:return tY(tH({},e),{isLoading:!0,error:null});case eQ:return tY(tH({},e),{isLoading:!1,status:t.payload.status,step:"user_not_found"===(r=t.payload.status)?eK:tl(r)||tu(r)||tc(r)?eH:eG,error:null});case e0:return tY(tH({},e),{isLoading:!1,error:t.payload||null});case e1:return tY(tH({},e),{isSubmittingOTP:!0,error:null});case e2:return tY(tH({},e),{isSubmittingOTP:!1,verifiedOTP:(null==(n=t.payload)?void 0:n.otp)||null});case e6:return tY(tH({},e),{isSubmittingOTP:!1,error:t.payload});case e3:return tY(tH({},e),{isResendingOTP:!0,error:null});case e4:return tY(tH({},e),{isResendingOTP:!1});case e5:return tY(tH({},e),{isResendingOTP:!1,error:t.payload});case e7:return tY(tH({},e),{isSubmittingPassword:!0,error:null});case e9:return tY(tH({},e),{isSubmittingPassword:!1});case e8:return tY(tH({},e),{isSubmittingPassword:!1,error:t.payload});case te:return tY(tH({},e),{isSubmittingForgotPassword:!0,error:null});case tt:return tY(tH({},e),{isSubmittingForgotPassword:!1});case tr:return tY(tH({},e),{isSubmittingForgotPassword:!1,error:t.payload});case tn:return tY(tH({},e),{step:eH,error:null});case ta:return tY(tH({},e),{step:eY,error:null});case"SHOW_SIGNUP_FORM":return tY(tH({},e),{step:eK,error:null});case to:return tY(tH({},e),{step:eJ,error:null});case ti:return tY(tH({},e),{step:eG,status:null,verifiedOTP:null,error:null,shouldShowAuthenticationLink:!0});default:return e}},tJ={step:eG,email:"",status:null,verifiedOTP:null,isLoading:!1,isSubmittingOTP:!1,isResendingOTP:!1,isSubmittingPassword:!1,isSubmittingForgotPassword:!1,error:null,shouldShowAuthenticationLink:!1},t$=function(){var e,t=(e=(0,a.useReducer)(tK,tJ),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tG(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tG(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1],o=(0,s.Gc)(),i=o.setValue,l=o.formState.errors,u=o.setFocus,c=tq({dispatch:n}),d=tZ({state:r,dispatch:n,setValue:i,mutations:c});return(0,a.useEffect)(function(){l.email&&ts(r.step)&&setTimeout(function(){n({type:ti}),i("password",""),u("email")},0)},[l.email,r.step,i,u]),tH({state:r,verifyEmail:c.verifyEmailMutation.mutateAsync},d)};function tX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tX(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t0=function(e){var t=e.currentStep,r=tQ((0,a.useState)(!1),2),n=r[0],o=r[1],i=tQ((0,a.useState)(void 0),2),l=i[0],u=i[1],c=tQ((0,a.useState)(t),2),s=c[0],d=c[1],p=(0,a.useRef)(null);return(0,a.useEffect)(function(){t!==s&&p.current&&(o(!0),u(p.current.offsetHeight),setTimeout(function(){d(t),setTimeout(function(){p.current&&(u(p.current.scrollHeight),setTimeout(function(){o(!1),u(void 0)},300))},50)},200))},[t,s]),{isTransitioning:n,currentHeight:l,displayedStep:s,contentRef:p}},t1=function(){var e=t$(),t=e.state,r=e.verifyEmail,a=e.handleEmailChange,o=e.startValidation,i=e.handleValidationSuccess,l=e.handleValidationError,c=e.handleOTPSubmit,s=e.handlePasswordSubmit,d=e.handleForgotPasswordSubmit,p=e.handleResendOTP,f=e.showOTPForm,m=e.showPasswordForm,y=e.showClaimForm,b=e.resetToInitial,v=e.handleAuthenticationLinkClick;tB({verifyEmail:r,onEmailChange:a,onValidationStart:o,onValidationSuccess:i,onValidationError:l});var h=t0({currentStep:t.step}),_=h.isTransitioning,w=h.currentHeight,g=h.displayedStep,x=h.contentRef;return(0,n.jsx)("div",{className:(0,u.A)("border-primary shadow-xs rounded-xl border bg-white","relative w-full overflow-hidden","mx-auto","sm:mx-auto md:mx-0"),children:(0,n.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-out",style:{height:w?"".concat(w,"px"):"auto"},children:(0,n.jsx)("div",{ref:x,className:(0,u.A)("transition-all duration-200 ease-in-out",{"-translate-y-2 opacity-0":_,"translate-y-0 opacity-100":!_}),children:(0,n.jsx)(tF,{displayedStep:g,state:t,onAuthenticationLinkClick:v,resetToInitial:b,showPasswordForm:m,showClaimForm:y,handleOTPSubmit:c,handleResendOTP:p,showOTPForm:f,handlePasswordSubmit:s,handleForgotPasswordSubmit:d})})})})},t2=function(){var e=(0,i.Y)().currentUser;return(0,ek.wh)().isLoading?null:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 lg:pb-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)(y.Z.TitleSm,{weight:"semibold",children:(0,o.t)("paywall_checkout.your_account")})}),(0,n.jsx)(eC.g,{className:"gap-y-5 !py-0",children:e?(0,n.jsx)(eL,{}):(0,n.jsx)(t1,{})})]})},t6=r(608386),t3=r(71367),t4=function(){return(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"inline-flex items-start gap-3",children:(0,n.jsx)(t3.X,{id:"terms",name:"termsOfService",label:(0,n.jsx)(t6.y,{variant:"paywallCheckout"})})})})},t5=r(786812),t7=r(577459),t9=r(800625),t8={addressCountry:"community_member_billing_info_attributes.address_country",taxIdType:"community_member_billing_info_attributes.tax_id_type",taxIdTypeLabel:"community_member_billing_info_attributes.tax_id_type_label",taxIdValue:"community_member_billing_info_attributes.tax_id_value"},re=function(){var e,t=(0,(0,s.Gc)().watch)().community_member_billing_info_attributes,r=(void 0===t?{}:t).address_country,o=(0,i.Y)(),l=o.isTaxCollectionEnabled,u=o.isBrazilianAccountAndProcessorStripeBr,c=(0,a.useMemo)(function(){return{fieldNames:t8,selectedCountry:r,isBrazilianCommunity:u,isTaxCollectionEnabled:l}},[r,u,l]),d=(0,t7.g)(c),p=d.handleTaxIdTypeChange,f=d.isRequired,m=d.isTaxIdValueRequired,y=d.isVisible,b=d.selectedTaxIdType,v=d.selectOptions,h=d.taxIdTypeLabel;if(!y)return null;var _=(null==b||null==(e=b.formOptions)?void 0:e.pattern)||/.+/;return(0,n.jsxs)(rg.Item,{name:"tax_id",optional:!f,children:[(0,n.jsx)(t9.P,{variant:"single",name:"taxIdTypeLabel",data:v,value:h,onChange:p,filterBy:t5.gf,hideSelectedItems:!0}),h&&(0,n.jsx)(O,{className:"mt-2 grow",type:"text",name:"community_member_billing_info_attributes.tax_id_value",placeholder:null==b?void 0:b.example,options:{required:m,pattern:_}})]})},rt=function(){var e=(0,(0,s.Gc)().watch)().community_member_billing_info_attributes.address_country,t=(0,i.Y)(),r=t.isMemberAddressRequired,a=t.isTaxIdCollectionEnabled,l=t.shouldShowTaxIdForm,u=t.enableTaxIdCollection;return l&&(!r||e)&&(!e||(0,t5.Zx)(e))?a?(0,n.jsx)(re,{}):(0,n.jsx)("div",{className:"flex flex-row items-center gap-x-1 underline",children:(0,n.jsx)(m.z,{type:"button",variant:"link",className:"!p-0",onClick:u,children:(0,n.jsx)(y.Z.LabelSm,{weight:"normal",color:"text-default",children:(0,o.t)("paywall_checkout.form.tax_id.cta")})})}):null},rr=r(594023),rn=function(e){var t=e.children,r=e.value,a=e.className;return(0,n.jsx)(rr.E.Option,{value:r,className:function(e){var t=e.checked;return g()("bg-primary hover:border-secondary relative flex cursor-pointer justify-center rounded-xl border py-3 transition-colors focus:outline-none",{"border-secondary bg-secondary border-1":t,"border-primary":!t},a)},children:(0,n.jsx)("span",{className:"flex flex-row items-center space-x-2",children:t})})},ra=function(){var e,t=(0,s.Gc)(),r=t.control,u=t.setValue,c=(0,i.Y)(),p=c.getSelectedPrice,f=c.amountDue,m=p(),b=(null==m||null==(e=m.payable_payment_methods)?void 0:e.length)===1,v=f<l.eq.MINIMUM||f>l.eq.MAXIMUM;return((0,a.useEffect)(function(){(b||v)&&u("payment_method_type",l.Lt.CARD)},[b,f]),b||v)?null:(0,n.jsx)(s.Qr,{control:r,name:"payment_method_type",render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,n.jsx)(rr.E,{value:a,onChange:r,children:(0,n.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,n.jsxs)(rn,{value:l.Lt.CARD,className:"basis-1/2",children:[(0,n.jsx)(d.JO,{type:"credit-card",size:16}),(0,n.jsx)(y.Z.LabelMd,{children:(0,o.t)("paywall_checkout.payment_method_type.card")})]}),(0,n.jsxs)(rn,{value:l.Lt.PIX,className:"basis-1/2",children:[(0,n.jsx)(d.JO,{type:"20-pix",viewBox:"0 0 24 24",size:24}),(0,n.jsx)(y.Z.LabelMd,{children:(0,o.t)("paywall_checkout.payment_method_type.pix")})]})]})})}})},ro=r(182691),ri=r.n(ro),rl=function(){return(0,n.jsx)(rg.Item,{name:"business_name",optional:!0,children:(0,n.jsx)(O,{type:"text",name:"community_member_billing_info_attributes[business_name]",options:{maxLength:200}})})},ru=function(e){var t=e.name,r=e.addon,a=e.className,i=e.childClassName,l=e.children,c=e.optional,s=e.LabelComponent,d=void 0===s?y.Z.LabelSm:s,p=e["data-testid"];return(0,n.jsxs)("div",{className:(0,u.A)(a,"flex flex-col"),"data-testid":p,children:[(0,n.jsxs)("div",{className:(0,u.A)(i,"mb-1 flex flex-row items-center"),children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(d,{weight:"semibold",children:o.ZP.t("paywall_checkout.form.fields.".concat(t))}),c&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(y.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(o.ZP.t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),l]})},rc=function(){return(0,n.jsx)(ru,{name:"name",children:(0,n.jsx)(O,{type:"text",name:"name",options:{required:!0}})})},rs=r(307587),rd=r(309394),rp=r(451911),rf=function(){var e=(0,i.Y)(),t=e.setMemberAddressAttributes,r=e.currentUser,o=e.memberBillingInfo,l=M.I7.billing,u=(0,rs.u)({billingInfo:o,name:(0,U.q)(r)}),c=(0,rp.X)(),s=(0,rd.B)(),d=(0,a.useMemo)(function(){return{mode:l,defaultValues:u,fields:c,display:s}},[l,u,c,s]);return(0,n.jsx)(I.AddressElement,{options:d,onChange:t})};let rm=r.p+"static/images/paywalls/payment-form-desktop-96eca658a6c63cf0.png",ry=r.p+"static/images/paywalls/payment-form-mobile-0db9dd043640c20c.png",rb=r.p+"static/images/paywalls/payment-form-tablet-96eca658a6c63cf0.png";var rv=function(){var e=(0,s.Gc)().watch,t=(0,i.Y)(),r=t.currentUser,n=t.memberBillingInfo,o=e("email"),l=e("name");return(0,a.useMemo)(function(){var e,t,a={};return a.email=null!=(e=null==r?void 0:r.email)?e:o,a.name=null!=(t=(0,U.q)(r))?t:l,(null==n?void 0:n.address_country)&&(a.address={line1:n.address_line1,line2:n.address_line2||void 0,city:n.address_city,state:n.address_state,postal_code:n.address_postal_code,country:n.address_country}),{billingDetails:a}},[r,n,o,l])},rh=function(){var e=(0,i.Y)(),t=e.getSelectedPrice,r=e.checkoutPreviewContext,l=t(),u=rv(),c=(0,a.useMemo)(function(){return{billingDetails:{name:"never",address:"auto"}}},[]),s=(0,a.useMemo)(function(){return{card:"never",googlePay:"never",applePay:"never"}},[]),p={type:M.jw.accordion,radios:!0},m=(0,a.useMemo)(function(){return{defaultValues:u,fields:c,terms:s,layout:p}},[u,c,p,s]),b=ej(),v=b.handleOnChangeCard,h=b.handleOnReadyCard,_=b.onLoadError,w=!!r;return(0,n.jsxs)(ru,{name:"payment",childClassName:"!mb-4",LabelComponent:y.Z.TitleSm,addon:l.trial_enabled&&(0,n.jsx)("span",{className:"inline-flex",children:(0,n.jsx)(f.T,{className:"inline-flex",content:o.ZP.t("paywall_checkout.payment_subtitle_tooltip"),children:(0,n.jsx)(d.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),"data-testid":"checkout-form-payment-methods-field-wrapper",children:[w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:rm,alt:"",loading:"lazy",className:"hidden lg:block"}),(0,n.jsx)("img",{src:rb,alt:"",loading:"lazy",className:"hidden sm:block lg:hidden"}),(0,n.jsx)("img",{src:ry,alt:"",loading:"lazy",className:"sm:hidden"})]}),!w&&(0,n.jsx)(I.PaymentElement,{options:m,onChange:v,onReady:h,onLoadError:_})]})},r_=function(){var e=(0,s.Gc)().watch,t=(0,i.Y)(),r=t.paywall,n=t.getSelectedPrice,o=t.couponPreviewMutation,u=n(),c=(0,l.Lf)(e("payment_method_type")),d=(0,b._j)(u.id,o);return(0,a.useMemo)(function(){return(!u.trial_enabled||u.trial_requires_upfront_payment||r.trial_requires_card)&&!c&&!(null==d?void 0:d.free_forever)},[r,u,c,null==d?void 0:d.free_forever])},rw=function(){var e=(0,i.Y)(),t=e.currentUser,r=e.isMemberAddressRequired,a=e.memberBillingInfo,o=e.stripePaymentMethodType,u=r_(),c=!t||ri()(a)||!(null==a?void 0:a.address_complete),s=(r||(0,l.wO)(o))&&c,d=!(null==a?void 0:a.business_name);return(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsx)(rh,{}),s&&(0,n.jsx)(rf,{}),!s&&!t&&(0,n.jsx)(rc,{}),d&&(0,n.jsx)(rl,{})]})},rg=Object.assign(function(e){var t=e.className,r=(0,s.Gc)().handleSubmit,a=(0,i.Y)(),l=a.isProcessingPayment,c=a.authProviderProperties,p=a.checkoutPreviewContext,f=a.isPaywallsCheckoutWithoutInternalResourcesEnabled,y=ej(),b=y.onSubmit,v=y.payButtonLabel,h=y.stripe,w=y.isSubmitDisabled,g=(0,C.a7)();return(null==c?void 0:c.is_sso_authentication_required)?null:(0,n.jsxs)(eS.s,{className:(0,u.A)("flex h-auto w-full flex-col items-center lg:items-start",t,{"pb-6":!!p}),dataTestId:"paywall-checkout-right-column",children:[(0,n.jsx)(eO.i.CommunityHeader,{className:"hidden lg:invisible lg:block"}),l&&(0,n.jsx)(_.a,{variant:"fullscreen",message:(0,o.t)("paywalls.checkout.bnpl_processing")}),(0,n.jsxs)("form",{className:"flex flex-col gap-y-6",onSubmit:r(b),"data-testid":"checkout-form",children:[(0,n.jsx)(rg.Alerts,{className:"hidden lg:block",shouldFocus:!0}),(0,n.jsx)(t2,{}),(0,n.jsxs)(eC.g,{className:"gap-y-5",children:[!f&&(0,n.jsx)(ra,{}),(0,n.jsx)(rw,{}),(0,n.jsx)(rt,{})]}),(0,n.jsx)(rg.Alerts,{className:"block lg:hidden"}),(0,n.jsxs)(eC.g,{className:"gap-y-5",children:[(0,n.jsx)(t4,{}),(0,n.jsxs)(m.z,{type:"submit",extraLarge:!0,variant:"circle",disabled:!h||w||l,"data-testid":"checkout-form-submit-button",className:"flex flex-row items-center justify-center gap-x-2",children:[(0,n.jsx)(d.JO,{size:20,type:"20-lock"}),v]})]})]}),(0,n.jsx)(eP.p,{shouldHide:g})]})},{Item:function(e){var t=e.name,r=e.addon,a=e.className,i=e.childClassName,l=e.children,c=e.optional,s=e.LabelComponent,d=void 0===s?y.Z.LabelSm:s;return(0,n.jsxs)("div",{className:(0,u.A)(a,"flex flex-col"),children:[(0,n.jsxs)("div",{className:(0,u.A)(i,"mb-1 flex flex-row items-center"),children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,n.jsx)(d,{weight:"semibold",children:o.ZP.t("paywall_checkout.form.fields.".concat(t))}),c&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(y.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(o.ZP.t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),l]})},PricePreview:k.F,CouponForm:function(e){var t,r,o=e.className,l=e.shouldHideCoupon,d=void 0!==l&&l,p=(0,s.Gc)(),f=p.getValues,m=p.setValue,y=(0,i.Y)(),b=y.areCouponsEnabled,v=y.applyCouponCode,_=y.checkoutPreviewContext,w=y.couponPreviewMutation,g=y.previewMutation,x=y.paywall,j=(t=(0,a.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return S(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=j[0],k=j[1],C=(0,a.useCallback)(function(){var e=f().coupon_code,t={paywall_id:x.id,coupon_code:e,scenario:"apply_coupon"};w.mutate(t,{onSuccess:function(e){v({data:e})}})},[f,v,m,w,x.id]);return((0,a.useEffect)(function(){var e,t=(0,c.Ph)("coupon_code")||(null==_||null==(e=_.coupon_applied)?void 0:e.code);t&&!O&&g.isSuccess&&(k(!0),m("coupon_code",t),C())},[O,null==_||null==(r=_.coupon_applied)?void 0:r.code,m,C,g.isSuccess]),b)?w.isSuccess?(0,n.jsx)("div",{className:(0,u.A)("flex flex-col gap-y-3",{hidden:d}),children:(0,n.jsx)(h,{})}):(0,n.jsx)("div",{className:(0,u.A)("flex w-full flex-col gap-y-2",o,{hidden:d}),children:(0,n.jsx)(P,{applyCoupon:C})}):null},Alerts:function(e){var t=e.className,r=e.shouldFocus,s=(0,i.Y)(),d=s.paywall,p=s.communityRootUrl,f=s.hasAlreadyPurchased,m=s.paymentError,y=s.paywallFailure,b=s.isPerformingVerification,v=(0,a.useRef)(null),h="",_="";return((0,l.y9)(f,d)?(h="warning",_=(0,o.t)("services.paywalls.failures.paywall.already_purchased",{billing_url:"".concat(p).concat(c.G3.billing.slice(1))})):y?(h=y.level,_=y.message):m&&m.message&&(h=m.type,_=m.message),(0,a.useEffect)(function(){if(r&&v&&_){var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})}},[_,r]),!b&&h&&_)?(0,n.jsx)("div",{ref:v,className:(0,u.A)("rounded-xl border px-6 py-5",t,{"border-red-500 bg-red-50 text-red-800":"danger"===h,"border-yellow-500 bg-yellow-50 text-yellow-800":"warning"===h}),dangerouslySetInnerHTML:{__html:_},"data-testid":"checkout-alert"}):null}})},829862:function(e,t,r){r.d(t,{s:()=>o});var n=r(552676),a=r(701168),o=function(e){var t=e.children,r=e.className,o=e.wrapperClassName,i=e.dataTestId;return(0,n.jsx)("div",{className:(0,a.A)("w-full",r),"data-testid":i,children:(0,n.jsx)("div",{className:(0,a.A)("w-full sm:max-w-[540px]",o),children:t})})}},99103:function(e,t,r){r.d(t,{BD:()=>l,YH:()=>o,z8:()=>i});var n="!bg-blue-100 py-1 px-2",a="!text-blue-800 font-medium",o={trial_then_value:{labelLocale:"price_badge",className:n,labelClassName:a},trial_then_upfront_then_value:{labelLocale:"price_badge",className:n,labelClassName:a},upfront_then_trial_then_value:{labelLocale:"price_badge",className:"!bg-tertiary text-dark px-2 py-1",labelClassName:"!text-primary font-medium"},value:null,upfront_then_value:null},i={trial_then_value:{labelLocale:"free_trial",className:n,labelClassName:a},trial_then_upfront_then_value:{labelLocale:"free_trial",className:n,labelClassName:a},upfront_then_trial_then_value:{labelLocale:"paid_trial",className:"!bg-tertiary text-dark px-2 py-1",labelClassName:"!text-primary font-medium"},value:null,upfront_then_value:null},l={trial_then_value:{labelLocale:"free_trial",className:n,labelClassName:a},trial_then_upfront_then_value:{labelLocale:"free_trial",className:"!bg-blue-100 py-1  px-2",labelClassName:a},upfront_then_trial_then_value:null,value:null,upfront_then_value:null}},742612:function(e,t,r){r.d(t,{f:()=>l});var n=r(552676),a=r(739792),o=r(701168),i=r(524330),l=function(e){var t=e.price,r=e.preview,l=e.properties;if(!t&&!r)return null;var u=l[(null==t?void 0:t.scenario)||(null==r?void 0:r.preview_scenario)||"value"];return u?(0,n.jsx)(i.g,{label:(0,a.t)([u.labelLocale],{count:null==t?void 0:t.trial_days}),className:(0,o.A)("rounded-md border-0",u.className),labelClassName:u.labelClassName,textSizeClassName:"text-xs"}):null}},649767:function(e,t,r){r.d(t,{o:()=>E});var n=r(552676),a=r(275271),o=r(497202),i=r(142748),l=r(131906),u=r(22319),c=r(652478),s=r(60878),d=r(11795),p=r(227851),f=r(242410),m=r(159335),y=r(343553),b=r(547144),v=r(498303),h=function(e){var t,r=e.paywall,n=(0,b.Ph)("price_id");if(n){var a=parseInt(n,10);isNaN(a)||(t=a)}return(0,v.r)(r,t)},_=function(e,t,r,n){var a,o=(a=null==n?void 0:n.address_country)?a:e&&"brl"===t?m.n.br:void 0;return{address_city:null==n?void 0:n.address_city,address_complete:r,address_country:o,address_line1:null==n?void 0:n.address_line1,address_line2:null==n?void 0:n.address_line2,address_postal_code:null==n?void 0:n.address_postal_code,address_state:null==n?void 0:n.address_state,business_name:null==n?void 0:n.business_name,tax_id_type:null==n?void 0:n.tax_id_type,tax_id_value:null==n?void 0:n.tax_id_value}},w=function(e){var t,r=e.currentCommunity,n=e.currentUser,a=e.isMemberAddressComplete,o=e.isBrazilianAccountAndProcessorStripeBr,i=e.memberBillingInfo,l=e.paywall,u=h(e);return(0,p.cI)({defaultValues:{community_id:r.id,paywall_price_id:u.id,user_id:null==n?void 0:n.id,email:null==n?void 0:n.email,name:(0,y.q)(n),payment_method_type:"card",coupon_code_applied:!1,community_member_billing_info_attributes:_(o,null==l||null==(t=l.currency)?void 0:t.code,a,i),community_member_billing_info_address_attributes_complete:a}})},g=r(979220);function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var O=function(e){var t,r=e.children,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["children"]),o=w(a);return(0,n.jsx)(d._,{checkoutProps:a,children:(0,n.jsx)(p.RV,j(x({},o),{children:(0,n.jsx)(f.G,j(x({},a),{children:(0,n.jsx)(g.p.Provider,{paywallCustomization:null==a||null==(t=a.paywall)?void 0:t.paywall_customization,checkoutPreviewContext:null==a?void 0:a.checkoutPreviewContext,children:r})}))}))})},P=r(60227),S=function(e){var t=e.paywall;return(0,P.u)(t)};function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function I(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var E=Object.assign(function(e){var t=e.children,r=I(e,["children"]),d=(0,a.useMemo)(function(){return new l.QueryClient(c.V)},[]),p=S(r);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.q,{children:(0,n.jsx)("title",{children:p})}),(0,n.jsx)(u.hk,{children:(0,n.jsx)(l.QueryClientProvider,{client:d,children:(0,n.jsx)(s.VW,{children:(0,n.jsx)(o.ZP.Provider,{children:(0,n.jsx)(O,C(k({},r),{children:t}))})})})})]})},{Preview:function(e){var t=e.children,r=I(e,["children"]);return(0,n.jsx)(u.hk,{children:(0,n.jsx)(O,C(k({},r),{children:t}))})}})},194043:function(e,t,r){r.d(t,{M:()=>o});var n=r(852770),a=r(911638),o=function(e,t){var r,o,i={checkout:(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t.extra),o=o={caller:t.caller,community_id:t.communityId,community_member_id:t.communityMemberId,community_member_user_id:t.communityMemberUserId,paywall_id:t.paywallId,stripe_elements_mode:t.stripeElementsMode,stripe_payment_method_type:t.stripePaymentMethodType,url:window.location.href},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)};(0,n.dD)(e,i),(0,a.aD)()&&console.error(e,t)}},671580:function(e,t,r){r.d(t,{l:()=>v,i:()=>h});var n=r(552676),a=r(275271),o=r(739792),i=r(131906),l=r(93199),u=r(838084);function c(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}var s=Object.freeze({pending:"pending",completed:"completed",abandoned:"abandoned",offered:"offered",processing:"processing",declined:"declined",failed:"failed"}),d=function(e){return[s.pending,s.offered].includes(e.status)},p=r(606760);function f(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,l,"next",e)}function l(e){f(o,n,a,i,l,"throw",e)}i(void 0)})}}function y(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var b=(0,a.createContext)(void 0);b.displayName="CheckoutSessionContext";var v=function(e){var t=e.children,r=e.paywallId,s=(0,i.useMutation)({mutationFn:function(e){var t;return(t=function(){var t;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){return t=u.c.create(),[2,(0,l.Cu)(t,{checkout_session:{paywall_id:e.paywallId,referrer:e.referrer}})]})},function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(e){c(o,n,a,i,l,"next",e)}function l(e){c(o,n,a,i,l,"throw",e)}i(void 0)})})()},retry:3}),f=s.mutateAsync,v=s.data,h=s.isLoading,_=s.error,w=(0,a.useCallback)(function(e){return null==v?void 0:v.steps.find(function(t){return t.id===e})},[v]),g=(0,a.useCallback)(function(e){return null==v?void 0:v.steps.find(function(t){return t.sequence===e})},[v]),x=(0,a.useCallback)(function(e){return null==v?void 0:v.steps.filter(function(t){return t.sequence>e&&d(t)}).sort(function(e,t){return e.sequence-t.sequence})[0]},[v]),j=(0,a.useCallback)(function(e){return(null==v?void 0:v.steps.some(function(t){return t.sequence>e&&d(t)}))||!1},[v]),O=(0,a.useCallback)(function(){return m(function(){return y(this,function(e){switch(e.label){case 0:if(!r)return[3,2];return[4,f({paywallId:r,referrer:globalThis.location.href})];case 1:e.sent(),e.label=2;case 2:return[2]}})})()},[r,f]);(0,a.useEffect)(function(){!r||v||h||_||O()},[r,v,h,_,O]);var P=(0,a.useMemo)(function(){var e;return{session:v||null,isLoading:h,error:(null!=(e=Error)&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](_):_ instanceof e)?_:null,getStepById:w,getStepBySequence:g,getNextPendingStep:x,hasMoreSteps:j,refreshSession:O}},[v,h,_,w,g,x,j,O]);return _?(0,n.jsx)(p.Z,{errorCode:500,title:(0,o.t)("paywall_checkout.error_boundary.title")}):(0,n.jsx)(b.Provider,{value:P,children:t})},h=function(){var e=(0,a.useContext)(b);return void 0===e?{session:null,isLoading:!1,error:null,getStepById:function(){},getStepBySequence:function(){},getNextPendingStep:function(){},hasMoreSteps:function(){return!1},refreshSession:function(){return m(function(){return y(this,function(e){return[2]})})()}}:e}},60227:function(e,t,r){r.d(t,{r:()=>a,u:()=>n});var n=function(e){var t;return(null==e||null==(t=e.event)?void 0:t.name)?e.event.name:e.display_name},a=function(e){var t,r,n;return e.description?r=e.description:(null==(t=e.event)?void 0:t.body)&&(r=null==(n=e.event)?void 0:n.body),r}},343553:function(e,t,r){r.d(t,{q:()=>n});var n=function(e){var t;return(null==e?void 0:e.name)?t=e.name:((null==e?void 0:e.first_name)||(null==e?void 0:e.last_name))&&(t=[e.first_name,e.last_name].filter(function(e){return!!e}).join(" ").trim()),t}},483807:function(e,t,r){r.d(t,{Tm:()=>f,yy:()=>d,m5:()=>m});var n=r(93199),a=r(547144),o=r(242856),i=r(294260),l=r(169770);function u(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,l,"next",e)}function l(e){u(o,n,a,i,l,"throw",e)}i(void 0)})}}function s(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var d=function(e,t){var r,n,a=(null==e?void 0:e.subscription_processor_id)||(null==e?void 0:e.payment_intent_processor_id)||(null==e?void 0:e.invoice_processor_id),o="".concat(t).concat(a);return null==(n=window.webview)||null==(r=n.paymentSuccessful)||r.call(n,{redirect_url:o}),window.open(o,"_self")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return c(function(){return s(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})()},f=function(e){var t=e.retriesThreshold,r=void 0===t?30:t,n=e.sleepTimeInMilliseconds,a=void 0===n?2e3:n,o=e.executor;return c(function(){var e,t;return s(this,function(n){switch(n.label){case 0:e=null,t=0,n.label=1;case 1:if(!(t<r))return[3,5];return[4,o()];case 2:if(e=n.sent())return[3,5];return[4,p(a)];case 3:n.sent(),n.label=4;case 4:return t++,[3,1];case 5:return[2,e]}})})()},m=function(e,t,r){return c(function(){var u,c,f,y,b,v,h;return s(this,function(s){switch(s.label){case 0:var _;if(u=t.payment_intent_processor_id,c=t.invoice_processor_id,r>30)throw l.K.generic("useCard.verifyPayment.tries");return[4,(_=null!=u?u:c,(0,n.t5)(a.av.communityMemberCharge.show({processorId:_}),{method:"GET"}))];case 1:if(!((f=s.sent())&&f.ok))return[3,6];return[4,f.json()];case 2:if(y=s.sent(),!(0,i.Om)(y))return[3,6];return[4,o.k.complete(t)];case 3:if(!(!(b=s.sent())||!b.ok))return[3,5];return[4,null==b||null==(v=b.json)?void 0:v.call(b)];case 4:throw h=s.sent(),l.K.fromPaywallError("useCard.verifyPayment.complete",h);case 5:return[2,d(t,e)];case 6:return[4,p()];case 7:return s.sent(),[4,m(e,t,r+1)];case 8:return s.sent(),[2,void 0]}})})()}},651527:function(e,t,r){r.d(t,{h:()=>X});var n,a,o,i,l=r(552676),u=r(242410),c=r(701168),s=r(275271),d=r(131906),p=r(903225),f=r(739792),m=r(501553),y=r(483807),b=r(23009),v=r(852770),h=r(846051),_=r(242856),w=r(751169),g=r(547144),x=function(){var e=(0,g.Ph)("invoice")||"",t=(0,g.Ph)("payment_intent")||"";return{invoiceId:e,paymentIntentId:t,paymentMethodType:(0,g.Ph)("payment_method_type")||"",wasForwarded:!!(0,g.Ph)("forwarded"),isVerifiable:!!t||!!e}},j=r(671580),O=r(441342),P=r(488250);function S(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){r(e);return}l.done?t(u):Promise.resolve(u).then(n,a)}function k(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){S(o,n,a,i,l,"next",e)}function l(e){S(o,n,a,i,l,"throw",e)}i(void 0)})}}function C(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(u){var c=[l,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var I=function(){var e=(0,u.Y)(),t=e.checkoutConfirmationUrl,r=e.handleError,n=e.isPerformingVerification,a=e.setIsPerformingVerification,o=(0,j.i)().getNextPendingStep,i=(0,O.wh)().currentCommunitySettings,c=(0,p.k6)(),g=(0,p.UO)().checkoutPath,S=x(),I=S.invoiceId,E=S.paymentIntentId,N=S.paymentMethodType,T=S.wasForwarded,A=function(){var e=new URL(window.location.href);e.searchParams.delete("forwarded"),e.searchParams.delete("invoice"),e.searchParams.delete("payment_intent_client_secret"),e.searchParams.delete("payment_intent"),e.searchParams.delete("payment_method_type"),e.searchParams.delete("redirect_status"),window.history.replaceState({},"",e)},L=(0,d.useMutation)(function(){return _.k.verifications.create({invoice_id:I,payment_intent_id:E,payment_method_type:N})}),M=function(){return k(function(){var e,t;return C(this,function(r){var n,a,o;switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,L.mutateAsync()];case 1:if(!(e=r.sent())||(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)!="object")return[2,{failure:{message:m.PC}}];if("failure"in e)return[2,e];if("checkout_attempt_status"in e){if("processing"===(o=e.checkout_attempt_status)||"waiting_for_confirmation"===o)return[2,null];return[2,e]}return[3,3];case 2:if(n=t=r.sent(),null!=(a=b.M)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](n):n instanceof a)return[2,t.body];return(0,v.dD)(t),[2,{failure:{message:t.message||m.PC}}];case 3:return[2]}})})()},D=function(e){var t=e||m.PC;if(!T&&((0,h.LZ)(N)||(0,h.Vr)(N))){var n=new URL(window.location.href);n.searchParams.append("forwarded","true"),window.location.replace(n.toString());return}setTimeout(function(){r({message:t,disablePayButton:!1}),a(!1),A()},2e3)},R=function(e){if(null===e)return void U();if("failure"in e){var r;D((null==e||null==(r=e.failure)?void 0:r.message)||null);return}if(F(e)){if((null==i?void 0:i.paywall_upsells_enabled)&&g){var n=o(0);return n?void c.push((0,P.QZ)(g,n.id)):void c.push((0,P.UZ)(g))}return void(0,y.yy)(e,t)}D(null)},F=function(e){return"checkout_attempt_status"in e&&("completed"===e.checkout_attempt_status||"delayed_confirmation"===e.checkout_attempt_status)},U=function(){r({message:m.PC,disablePayButton:!1}),a(!1),A()};return((0,s.useEffect)(function(){k(function(){return C(this,function(e){switch(e.label){case 0:if(!E&&!I)return[2];a(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,y.Tm)({executor:M})];case 2:return R(e.sent()),[3,4];case 3:return e.sent(),D(null),[3,4];case 4:return[2]}})})()},[E,I]),n)?(0,l.jsx)(w.a,{variant:"fullscreen",message:(0,f.t)("paywalls.checkout.bnpl_processing")}):null},E=r(715622),N=r(676289);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){T(e,t,r[t])})}return e}var L={variables:{borderRadius:"12px",colorPrimary:"#19283a"},rules:(T(o={},".AccordionItem",{padding:"1.5rem"}),T(o,".RadioIcon",{width:"18px"}),T(o,".RadioIconOuter",{stroke:"#D4D4D8"}),T(o,".RadioIconOuter--checked",{stroke:"#000000",strokeWidth:"28px"}),T(o,".RadioIconInner--checked",{r:"0"}),o)},M={appearance:{theme:"stripe",variables:{spacingGridRow:"20px"},rules:(T(i={},".Label",{color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"14px",fontWeight:"600",lineHeight:"20px",margin:"0",padding:"0"}),T(i,".Input",{backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(229, 231, 235)",borderColor:"rgb(229, 231, 235)",borderRadius:"8px",borderStyle:"solid",borderWidth:"1px",boxShadow:"none",color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"16px",fontWeight:"400",lineHeight:"18px",margin:"0",marginTop:"4px",outline:"transparent solid 0px",outlineOffset:"0",padding:"12px 16px",transition:"none"}),T(i,".Input:focus",{border:"1px solid rgba(107, 114, 128)",borderColor:"rgba(107, 114, 128)",borderWidth:"1px",boxShadow:"none",outline:"transparent solid 0px",outlineOffset:"0",transition:"none"}),i)}}.appearance,D=(n=A({},M),a=a={variables:A({},M.variables,L.variables),rules:A({},M.rules,L.rules)},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n),R=r(880676),F=r(498303),U=function(){var e,t=(0,u.Y)(),r=t.currentCommunityProcessorPaymentMethodConfigurationId,n=t.currentCommunityMemberPaymentProcessorSessionClientSecret,a=t.paywall,o=t.getSelectedPrice,i=t.previewMutation,l=a.currency.code,c=o(),d=i.data,p=(0,F.J)(c,d);return e=0===p?R.hX.setup:R.hX.payment,(0,s.useMemo)(function(){return{appearance:D,paymentMethodConfiguration:r,customerSessionClientSecret:n,mode:e,currency:l,amount:p}},[r,n,e,l,p])},B=function(e){var t=e.children,r=(0,u.Y)(),n=r.processorId,a=r.processorKey,o=r.setStripeElementsMode,i=(0,s.useMemo)(function(){return(0,N.O)({stripeAccountId:n,stripePublicKey:a,locale:window.locale})},[n,a]),c=U(),d=c.mode;return(0,s.useEffect)(function(){d&&o(d)},[o,d]),(0,l.jsx)(E.Elements,{stripe:i,options:c,children:t})},Z=r(266515),z=r(928572),V=r(996773),W=r(39905),q=r(381636),G=r(829862),H=function(e){var t=e.className,r=(0,u.Y)(),n=r.currentCommunity,a=r.loginRedirectUrl,o=r.authProviderProperties;return(null==o?void 0:o.is_sso_authentication_required)?(0,l.jsxs)(G.s,{className:(0,c.A)("flex size-full flex-col items-center text-center lg:h-auto lg:items-start",t),wrapperClassName:"h-full lg:pt-20 flex flex-col items-center",children:[(0,l.jsx)(Z.i.CommunityHeader,{className:"lg:invisible lg:block"}),(0,l.jsx)("div",{className:"flex h-full items-center justify-center lg:h-auto",children:(0,l.jsxs)("div",{className:"flex max-w-[24rem] flex-col gap-y-8",children:[n.icon_url&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("img",{loading:"lazy",className:"w-[4rem]",src:n.icon_url,alt:""})}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,l.jsx)(q.Z.TitleMd,{children:(0,f.t)("paywall_checkout.sso_login_prompt.title")}),(0,l.jsx)(q.Z.BodyMd,{color:"text-default",children:(0,f.t)("paywall_checkout.sso_login_prompt.subtitle",{community_name:n.name})})]}),(0,l.jsx)("div",{className:"flex flex-row justify-center",children:(0,l.jsx)("a",{href:a,children:(0,l.jsx)(W.z,{variant:"circle",large:!0,children:(0,f.t)("paywall_checkout.sso_login_prompt.call_to_action",{auth_provider_name:o.name})})})}),(0,l.jsx)(q.Z.LabelXs,{color:"text-default",children:(0,f.t)("paywall_checkout.sso_login_prompt.note")})]})})]}):null},Y=function(e){var t=e.children,r=e.className;return(0,l.jsx)("div",{className:(0,c.A)("flex h-full flex-col",r),children:t})},K=function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,l.jsx)("div",{className:(0,c.A)("flex w-full flex-col lg:grid lg:grid-cols-2",r),"data-testid":n,children:t})},J=function(){var e=(0,u.Y)().authProviderProperties;return(0,l.jsxs)(Y,{children:[!(null==e?void 0:e.is_sso_authentication_required)&&(0,l.jsx)(V.F,{variant:"mobile_fixed_on_top"}),(0,l.jsxs)(K,{className:(0,c.A)("bg-primary h-full gap-y-6 *:px-5 md:gap-y-10 md:pt-0",{"pt-12 *:lg:pt-0":!(null==e?void 0:e.is_sso_authentication_required)}),dataTestId:"paywall-checkout-container",children:[(0,l.jsx)(Z.i,{className:"!bg-secondary pb-8 md:pb-10 xl:pr-28"}),(0,l.jsx)(H,{className:"xl:pl-28"}),(0,l.jsx)(B,{children:(0,l.jsx)(z.d,{className:"bg-primary pb-8 xl:pl-28"})})]}),(0,l.jsx)(I,{})]})},$=r(649767),X=function(e){var t,r,n=e.shouldUseWrapper,a=null==n||n?$.o:$.o.Preview;return(0,l.jsx)(a,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={children:(0,l.jsx)(J,{})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},488250:function(e,t,r){r.d(t,{BC:()=>n,QZ:()=>a,UZ:()=>o});var n={MAIN_OFFER:"/checkout/:checkoutPath",OFFER:"/checkout/:checkoutPath/step/:stepId",CONFIRMATION:"/checkout/:checkoutPath/confirmation"},a=function(e,t){return"/checkout/".concat(e,"/step/").concat(t)},o=function(e){return"/checkout/".concat(e,"/confirmation")}},307587:function(e,t,r){r.d(t,{u:()=>a});var n=r(275271),a=function(e){var t=e.billingInfo,r=e.name;return(0,n.useMemo)(function(){var e={};return t&&t.address_country&&(e.name=r,e.address={line1:t.address_line1,line2:t.address_line2,city:t.address_city,state:t.address_state,postal_code:t.address_postal_code,country:t.address_country}),e},[t,r])}},309394:function(e,t,r){r.d(t,{B:()=>a});var n=r(275271),a=function(){return(0,n.useMemo)(function(){return{name:"full"}},[])}},451911:function(e,t,r){r.d(t,{X:()=>a});var n=r(275271),a=function(){return(0,n.useMemo)(function(){return{phone:"never"}},[])}},709981:function(e,t,r){r.d(t,{E0:()=>c,G2:()=>i,eF:()=>u});var n=r(739792),a="great",o="none",i=function(e){return e.status===a},l=function(e,t){var r=0,i=o,l="",u="bg-neutral-200",c=t.length,s=[t.uppercase,t.number,t.symbol].filter(Boolean).length,d="paywalls.checkout.password_strength";return e?c&&3===s?(i=a,r=100,l=(0,n.t)("".concat(d,".great")),u="bg-green-600"):c&&s>=1?(i="better",r=20,l=(0,n.t)("".concat(d,".better")),u="bg-amber-400"):(i="weak",r=10,l=(0,n.t)("".concat(d,".weak")),u="bg-red-500"):(i=o,r=0,l="",u="bg-neutral-200"),{status:i,percentage:r,strengthMessage:l,progressBarColor:u}},u=function(e){var t,r,n={uppercase:/[A-Z]/.test(e),number:/\d/.test(e),symbol:/\W/.test(e),length:e.length>=6};return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l(e,n)),r=r={requirementsMet:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="paywalls.checkout.password_requirement";if(i(e))return r?"":(0,n.t)("".concat(a,".success_message"));var o=[];return e.requirementsMet.length&&t||o.push((0,n.t)("".concat(a,".min_length"),{count:6})),t?(e.requirementsMet.uppercase||o.push((0,n.t)("".concat(a,".uppercase"))),e.requirementsMet.number||o.push((0,n.t)("".concat(a,".number"))),e.requirementsMet.symbol||o.push((0,n.t)("".concat(a,".symbol")))):(o.push((0,n.t)("".concat(a,".uppercase"))),o.push((0,n.t)("".concat(a,".number"))),o.push((0,n.t)("".concat(a,".symbol")))),(0,n.t)("".concat(a,".prefix"),{requirements:o.join(", ")})}},346705:function(e,t,r){r.d(t,{$Z:()=>c,Ll:()=>x,Um:()=>m,V5:()=>p,WI:()=>f,Wt:()=>v,bB:()=>g,d0:()=>d,hZ:()=>y,jS:()=>s,uf:()=>b});var n=r(932699),a=r(739792),o=r(94473),i=r(29607),l=r(223125),u=r(860221),c=function(e){return e===l.sI.REMAINING_TIME},s=function(e){return e===l.sI.FINISH_AT},d=function(e){return e===l.KW.REDIRECT_TO},p=10,f="skip_redirect",m="#063CFF",y={name:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.name_placeholder"),avatar_image_url:"",avatar_image:"",quote:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.quote_placeholder"),headline:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.testimonials.fields.headline_placeholder"),visible:!0,display_style:{type:o.y_.STARS,color:o.F_.STARS}},b={background_color:"#F6F6F6",icon:{emoji_type:"emoji",emoji:"\uD83D\uDE00"},label:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.badges.fields.label_placeholder"),text_color:"#000000",visible:!0},v={title:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.fields.title_placeholder"),description:(0,a.t)("settings.paywalls.modal.tabs.checkout.builder.benefits.fields.description_placeholder"),icon:{emoji_type:"emoji",emoji:""}},h=function(e){var t=e.upfront_payment_amount||0,r=e.amount;return(0,u.ZN)(e)?{amount:r,upfront_amount:0}:(0,u.t3)(e)?{amount:r-t,upfront_amount:t}:{amount:r,upfront_amount:t}},_=function(e,t,r){if((null==e?void 0:e._destroy)||!t)return null;var n=(0,i.Bj)(t),a=(r||[]).find(function(t){return t.price_id===((null==e?void 0:e.id)||(null==e?void 0:e.tmp_id))}),o=h(e);return{price_id:(null==a?void 0:a.price_id)||(null==e?void 0:e.id)||(null==e?void 0:e.tmp_id),amount:n((null==a?void 0:a.amount)||o.amount)||0,original_amount:n(o.amount),upfront_amount:n((null==a?void 0:a.upfront_amount)||o.upfront_amount)||0,original_upfront_amount:n(o.upfront_amount),enabled:(null==a?void 0:a.enabled)||!1}},w=function(e,t){if(null==e?void 0:e._destroy)return null;var r=(t||[]).find(function(t){return t.price_id===((null==e?void 0:e.id)||(null==e?void 0:e.tmp_id))});return r||{price_id:(null==e?void 0:e.id)||(null==e?void 0:e.tmp_id),callout_text:"",highlighted:!1}},g=function(e,t){return(0,n.compact)(e.map(function(e){return w(e,t)}))},x=function(e,t,r){return(0,n.compact)(e.map(function(e){return _(e,r,t)}))}},676289:function(e,t,r){r.d(t,{C:()=>l,O:()=>i});var n=r(580478),a=r(441342),o={en:"en",pt:"pt-BR",es:"es",fr:"fr",it:"it"},i=function(e){var t,r=e.stripeAccountId,a=e.stripePublicKey,i={stripeAccount:r,locale:o[null!=(t=e.locale)?t:"en"]};return("development"===window.RAILS_ENV||"staging"===window.RAILS_ENV)&&(i.developerTools={assistant:{enabled:!0}}),(0,n.J)(a,i)},l=function(){var e,t,r=(0,a.wh)().currentCommunity;return{stripePromise:i({stripeAccountId:null==r||null==(e=r.payment_processor)?void 0:e.id,stripePublicKey:(null==r||null==(t=r.payment_processor)?void 0:t.public_api_key)||window.STRIPE_PUBLIC_KEY,locale:window.locale||"en"})}}},223125:function(e,t,r){r.d(t,{BG:()=>o,KW:()=>n,sI:()=>a});var n={DO_NOTHING:"do_nothing",REDIRECT_TO:"redirect_to"},a={REMAINING_TIME:"remaining_time",FINISH_AT:"finish_at"},o={EMOJI:"emoji",CUSTOM:"custom",SHAPES:"shapes",ICONS:"icons"}},159335:function(e,t,r){r.d(t,{R:()=>a,n:()=>n});var n={br:"BR",us:"US"},a=function(e,t){var r,n,a,o,i=null!=(a=null==e||null==(r=e.toUpperCase())?void 0:r.trim())?a:"",l=null!=(o=null==t||null==(n=t.toUpperCase())?void 0:n.trim())?o:"";return!!(i&&l&&i===l)}},577459:function(e,t,r){r.d(t,{g:()=>s});var n=r(275271),a=r(227851),o=r(739792),i=r(159335),l=r(786812),u=r(397987);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=e.fieldNames,r=e.isBrazilianCommunity,s=e.isTaxCollectionEnabled,d=e.selectedCountry,p=t.taxIdType,f=t.taxIdTypeLabel,m=t.taxIdValue,y=(0,a.Gc)(),b=y.setValue,v=(0,y.watch)(f),h=(0,l.SU)(v),_=(0,i.R)(d,i.n.br),w=(0,n.useMemo)(function(){return d?u.A.filter(function(e){return(0,i.R)(e.countryCode,d)}):u.A},[d]),g=(0,n.useMemo)(function(){return w.map(l.xG)},[w]),x=(0,n.useMemo)(function(){return(r||s)&&w.length>0},[r,s,w]),j=(0,n.useMemo)(function(){var e=function(e){if(Array.isArray(e))return c(e)}(g)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(g)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(g)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return _||e.unshift({value:"",text:(0,o.t)("not_applicable")}),e},[g,_]);(0,n.useEffect)(function(){h?b(p,h.enum):(b(p,""),b(m,""))},[h,b,p,m]),(0,n.useEffect)(function(){d&&h&&!(0,i.R)(h.countryCode,d)&&b(f,"")},[d,h,b,f]),(0,n.useEffect)(function(){if(r&&_&&!v){var e=(0,l.Re)();e&&b(f,e.label,{shouldDirty:!0})}},[r,b,_,f,v]);var O=(0,n.useCallback)(function(e){b(f,e.value,{shouldDirty:!0})},[b,f]),P=_||!!h;return{handleTaxIdTypeChange:O,isRequired:_,isTaxIdValueRequired:P,isVisible:x,selectedTaxIdType:h,selectOptions:j,taxIdTypeLabel:v}}}}]);
//# sourceMappingURL=/packs/js/2054-134fca438b45120f.js.map