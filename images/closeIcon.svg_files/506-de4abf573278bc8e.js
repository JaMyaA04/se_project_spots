"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([["506"],{805765:function(e,t,r){r.d(t,{F:()=>f});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(392042),s=r.n(l),c=r(957363),u=r(39905),d=r(943544),f=function(e){var t=e.variant,r=e.options,i=e.selectedAction,l=e.setSelectedAction,f=e.onChange,p=e.disabled,m=e.type,b=e.large,y=void 0!==b&&b,h=i||r[0],v=(0,o.useMemo)(function(){return r.filter(function(e){return e.value!==h.value})},[r,h]);return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(u.z,{type:void 0===m?"button":m,variant:t,className:"truncate rounded-r-sm",disabled:p,"data-testid":"perform-action-button",large:y,tabIndex:0,onClick:function(){s()(h.onClick)&&h.onClick()},children:h.label}),(0,n.jsx)(d.Lt,{direction:"top-end",buttonType:"button",linkType:"button",buttonWrapperClassName:a()({"pointer-events-none":p}),popperOptions:{modifiers:[{name:"offset",options:{offset:[0,8]}}]},button:(0,n.jsx)("div",{className:"ml-0.5",children:(0,n.jsx)(u.z,{type:"button",variant:t,className:"rounded-l-sm !px-2.5",disabled:p,"data-testid":"select-action-button",large:y,children:(0,n.jsx)(c.JO,{type:"16-chevron-down",size:16,className:"mb-[1px]"})})}),options:v,onChange:function(e){var t=r.find(function(t){return t.value===e});l(t),s()(f)&&f(t)}})]})}},534842:function(e,t,r){r.d(t,{c:()=>a});var n=r(552676),o=r(739792),i=r(957363),a=function(){return(0,n.jsxs)("span",{className:"text-default border-dark bg-primary inline-flex h-5 items-center gap-1 rounded-2xl border px-1.5 py-[3px] pr-2",children:[(0,n.jsx)(i.JO,{type:"12-ai-agent-badge",size:12,className:"!w-3"}),(0,n.jsx)("span",{className:"text-[0.6rem] font-medium",children:(0,o.t)("community_bot.profile_tag")})]})}},432050:function(e,t,r){r.d(t,{b:()=>u});var n=r(552676),o=r(619803),i=r.n(o),a=r(957363),l=r(381636),s={info:"20-info",success:"20-checkmark-circle-fill",alert:"20-alert",warning:"20-alert"},c={info:"border-v2-info text-v2-info",success:"border-v2-success text-v2-success",alert:"border-v2-danger text-v2-danger",warning:"border-v2-warning text-v2-warning"},u=function(e){var t=e.type,r=void 0===t?"info":t,o=e.icon,u=e.title,d=e.showIcon,f=e.description,p=e.className,m=e.children;return(0,n.jsx)("div",{className:i()("rounded-lg border border-l-8 px-6 py-4",c[r],void 0===p?"":p),role:"alert",children:(0,n.jsxs)("div",{className:"flex w-full gap-x-3",children:[(void 0===d||d)&&(o||(0,n.jsx)(a.JO,{type:s[r],size:20,className:"mt-1 !self-start"})),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[u&&(0,n.jsx)(l.Z.LabelMd,{weight:"semibold",children:u}),f&&(0,n.jsx)(l.Z.LabelSm,{children:f}),m&&(0,n.jsx)(n.Fragment,{children:m})]})]})})}},237919:function(e,t,r){r.d(t,{D:()=>c});var n=r(552676),o=r(275271),i=r(19769),a=r(227851);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var c=(0,o.forwardRef)(function(e,t){var r=e.name,c=e.style,u=void 0===c?{}:c,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","style"]),f=(0,o.useRef)(null),p=(0,a.Gc)(),m=p.watch,b=p.control,y=m(r);return(0,o.useEffect)(function(){f.current&&(f.current.style.height="inherit",f.current.style.height="".concat(f.current.scrollHeight,"px"))},[y]),(0,n.jsx)("div",{className:"react-auto-expanding-text-input form-input",children:(0,n.jsx)(a.Qr,{name:r,control:b,render:function(e){var r=e.field,o=r.onChange,a=r.value,c=r.ref;return(0,n.jsx)("textarea",s(l({},d),{value:a,onChange:function(e){e.preventDefault(),o(e.target.value.replaceAll("\n",""))},ref:(0,i.Z)(f,t,c),className:"form-control placeholder:text-light placeholder:opacity-100",rows:1,style:s(l({},u),{resize:"none"})}))}})})});c.displayName="AutoExpandingTextInput"},680132:function(e,t,r){r.d(t,{I:()=>a});var n=r(552676),o=r(701168),i=r(957363),a=function(e){var t=e.label,r=e.isAdmin,a=void 0!==r&&r;return(0,n.jsxs)("div",{className:(0,o.A)("text-tertiary flex h-[22px] max-w-fit items-center rounded-xl px-2 text-[10px] font-bold uppercase tracking-wide",a?"group-hover:bg-overlay-dark bg-[#ECF5FF] dark:bg-[#34373D] dark:group-hover:bg-[#202226]":"bg-tertiary group-hover:bg-overlay-dark dark:group-hover:bg-[#202226]"),"aria-label":t,children:[(0,n.jsx)(i.JO,{type:"14-moderator-icon",size:14,className:(0,o.A)("mr-0.5 !w-4",a?"text-[#2563EB]":"text-tertiary")}),t]})}},44820:function(e,t,r){r.d(t,{_:()=>a});var n=r(552676),o=r(739792),i=r(39905),a=function(e){var t,r,a=e.type,l=e.classNames,s=e.children,c=e.submitting,u=void 0!==c&&c,d=e.submittingText,f=void 0===d?(0,o.t)("submitting"):d,p=e.isDisabled,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["type","classNames","children","submitting","submittingText","isDisabled"]);return(0,n.jsxs)(i.z,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:void 0===a?"button":a,disabled:u||void 0!==p&&p},m),r=r={className:void 0===l?"":l,children:[u&&f,!u&&s]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},920220:function(e,t,r){r.d(t,{C:()=>c});var n=r(552676),o=r(619803),i=r.n(o),a=r(739792),l=r(957363),s=r(39905),c=function(e){var t=e.children,r=e.onClick,o=e.onButtonClick;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(s.z,{variant:"secondary",type:"button",className:i()("rounded-r-none border-r-0 !pl-3 !pr-2 !font-light",{"pointer-events-none":!o}),onClick:o,children:t}),(0,n.jsx)("div",{className:"ml-[-1px]",children:(0,n.jsx)(s.z,{type:"button",onClick:r,variant:"secondary",className:"rounded-l-none border-l-0 !px-1.5","data-testid":"clear-action-button","aria-label":(0,a.t)("clear"),title:(0,a.t)("clear"),children:(0,n.jsx)(l.JO,{"aria-hidden":!0,type:"16-close",size:16,className:"mb-[1px]"})})})]})}},422636:function(e,t,r){r.d(t,{T:()=>l});var n=r(552676),o=r(598222),i=r(739792),a=r(957363),l=function(e){var t=e.handleChangeCoverClick,r=e.showAddCoverBtn,l=e.customAddCoverBtn;return(0,n.jsx)(o.u,{show:!!r,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-75",leave:"transition-opacity duration-300",leaveFrom:"opacity-75",leaveTo:"opacity-0",children:(0,n.jsx)("div",{role:"button",onClick:t,onKeyDown:t,tabIndex:0,children:l||(0,n.jsxs)("button",{type:"button",className:"form-section__add-cover",children:[(0,n.jsx)(a.JO,{type:"toolbar-image",className:"no-fill"}),(0,i.t)("add_cover")]})})})}},525958:function(e,t,r){r.d(t,{B:()=>a});var n=r(552676),o=r(441342),i=r(39905),a=function(e){var t=e.onChange,r=e.onDelete,a=e.changeButtonText,l=e.removeButtonText,s=(0,o.wh)().isViewOnlyMasquerading;return(0,n.jsxs)("div",{className:"cover-image-overlay hover:opacity-100","data-testid":"cover-image-overlay",children:[(0,n.jsx)(i.z,{variant:"secondary",onClick:t,disabled:s,children:a}),(0,n.jsx)(i.z,{variant:"secondary",onClick:r,type:"button",disabled:s,children:l})]})}},257462:function(e,t,r){r.d(t,{Z:()=>i});var n=r(552676),o=r(957363),i=function(e){var t=e.title,r=e.description;return(0,n.jsxs)("div",{className:"image-input-banner__add",children:[(0,n.jsx)("div",{className:"image-input-banner__add__icon-wrapper",children:(0,n.jsx)(o.JO,{type:"plus-big",viewBox:"0 0 20 20"})}),t&&(0,n.jsx)("span",{className:"image-input-banner__label",children:t}),r&&(0,n.jsx)("span",{className:"image-input-banner__description !text-dark",children:r})]})}},206394:function(e,t,r){r.d(t,{D:()=>f});var n=r(552676),o=r(739792),i=r(61641),a=r(422636),l=r(720624),s=r(525958),c=function(e){var t=e.changeImageText,r=void 0===t?(0,o.t)("edit_cover_image"):t,i=e.handleChangeCoverClick,a=e.handleDelete,c=e.imageUrl,u=e.processing,d=e.value,f=!!u;return(0,n.jsxs)("div",{className:"cover-image-input__preview",children:[f&&(0,n.jsx)("div",{className:"quickpost-progress",children:(0,n.jsx)(l.m,{})}),!!d&&!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{loading:"lazy",src:c,alt:""}),(0,n.jsx)(s.B,{onDelete:a,onChange:i,removeButtonText:(0,o.t)("remove_cover_image"),changeButtonText:r})]})]})};function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var d=function(e){var t=e.value,r=e.processing;return t||r?(0,n.jsx)(c,u({},e)):(0,n.jsx)(a.T,u({},e))},f=function(e){var t=e.renderer,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["renderer"]);return(0,n.jsx)(i.a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({renderer:void 0===t?d:t,title:(0,o.t)("quick_post_v2.choose_cover_image")},r))}},773262:function(e,t,r){r.d(t,{W:()=>f});var n=r(552676),o=r(227851),i=r(619803),a=r.n(i),l=r(932699),s=r(125533),c=r(739792),u=r(957363),d=function(e){var t=e.onChange,r=e.value,o=e.fullWidth,i=e.disabled,d=e.minDate,f=e.maxDate,p=e.required,m=e.withIcon,b=e.minuteIncrement,y=e.isStatic,h=e.dateInputOptions,v=e.dataTestId,g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({enableTime:!0,dateFormat:"F d, Y G:i K",minDate:d,maxDate:f,disableMobile:!0,minuteIncrement:b,static:y},void 0===h?{}:h);return(0,n.jsx)("div",{className:"form-input","data-testid":v,children:(0,n.jsxs)("div",{className:a()("flex",{"flatpickr--static":y}),children:[(0,n.jsx)(s.default,{className:a()("flatpickr bg-primary border-primary text-dark h-[46px] px-4 text-left text-base font-normal",{"w-full":void 0!==o&&o,"!cursor-not-allowed opacity-40":i,"!rounded-r-none !border-r-0":m}),"data-enable-time":!0,options:g,value:r,onValueUpdate:function(e){(0,l.first)(e)&&t(e[0].toISOString())},disabled:i,placeholder:(0,c.t)("select_a_date"),required:p}),!!m&&(0,n.jsx)("div",{className:a()("bg-primary border-primary relative -ml-px inline-flex items-center space-x-2 rounded-r-lg border border-l-0 px-4 py-2",{"cursor-not-allowed opacity-40":i}),children:(0,n.jsx)(u.JO,{type:"16-calendar",useWithFillCurrentColor:!0,size:16,className:"text-light"})})]})})},f=function(e){var t=e.name,r=e.rules,i=e.disabled,a=void 0!==i&&i,l=e.fullWidth,s=void 0!==l&&l,c=e.minDate,u=void 0===c?"":c,f=e.maxDate,p=void 0===f?"":f,m=e.minuteIncrement,b=void 0===m?15:m,y=e.required,h=void 0!==y&&y,v=e.withIcon,g=void 0!==v&&v,x=e.isStatic,j=void 0!==x&&x,O=e.dataTestId,w=void 0===O?"":O,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","rules","disabled","fullWidth","minDate","maxDate","minuteIncrement","required","withIcon","isStatic","dataTestId"]),_=(0,o.Gc)().control;return(0,n.jsx)(o.Qr,{control:_,name:t,rules:void 0===r?{}:r,render:function(e){var t=e.field,r=t.onChange,o=t.value;return(0,n.jsx)(d,{onChange:r,value:o,fullWidth:s,disabled:a,minDate:u,maxDate:p,withIcon:g,required:h,minuteIncrement:b,isStatic:j,dateInputOptions:S,dataTestId:w})}})}},306685:function(e,t,r){r.d(t,{D:()=>u});var n=r(552676),o=r(76926),i=r(698253),a=r(227851),l=r(739792),s=r(404393),c=r(864608),u=function(e){var t=e.startsAtConfig,r=e.endsAtConfig,u=e.durationConfig,d=e.disabled,f=void 0!==d&&d,p=(0,a.Gc)(),m=p.register,b=p.setValue,y=p.getValues,h=y(t.name),v=(0,s.bl)(h);return(0,n.jsxs)("div",{className:"flex flex-col items-start gap-2 md:flex-row md:items-center",children:[(0,n.jsx)(c.x,{name:t.name,onChange:function(e){var t=y(u.name),n=(0,o.Z)(e,t);b(r.name,n)},minDate:t.minDate,dataTestId:"event_starts_at",disabled:f}),(0,n.jsx)("div",{className:"mx-2",children:(0,l.t)("to")}),(0,n.jsx)(c.x,{name:r.name,onChange:function(){var e=y(t.name),n=(0,s.bl)(e),o=y(r.name),a=(0,s.bl)(o),l=(0,i.Z)(a,n);l<0||b(u.name,l,{shouldDirty:!0})},minDate:v,dataTestId:"event_ends_at",disabled:f}),(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({type:"hidden"},m(u.name)))})]})}},864608:function(e,t,r){r.d(t,{x:()=>v});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(185487),s=r(932699),c=r(489931),u=r.n(c),d=r(227851),f=r(404393),p=r(957363),m=r(381636),b=r(704783),y=r(141784);function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var v=function(e){var t=e.className,r=void 0===t?"":t,i=e.classNameDate,c=void 0===i?"":i,v=e.classNameTime,g=void 0===v?"":v,x=e.dataTestId,j=e.datePlaceholder,O=void 0===j?"":j,w=e.disabled,S=void 0!==w&&w,_=e.labelDate,P=void 0===_?"":_,D=e.labelTime,k=void 0===D?"":D,E=e.maxDate,A=e.minDate,N=e.name,T=e.onChange,C=void 0===T?s.noop:T,I=e.timePlaceholder,M=void 0===I?"":I,L=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["className","classNameDate","classNameTime","dataTestId","datePlaceholder","disabled","labelDate","labelTime","maxDate","minDate","name","onChange","timePlaceholder"]),R=(0,d.Gc)().control,U=(0,o.useRef)(),F=(0,o.useRef)(),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.noop;return function(t){var r;if(null!=(r=Date)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r){var n=t;A&&(0,l.default)(n,A)&&(0,f.qB)(n)&&(n=(0,f.qe)(A)),e(n.toUTCString()),C(n)}}};return(0,n.jsx)(d.Qr,{control:R,name:N,render:function(e){var t=e.field,o=t.onChange,i=t.value,s=i&&new Date(i),d=s&&A&&E&&(0,l.default)(s,A)&&(0,l.default)(s,E)?{minTime:A,maxTime:E}:s&&A&&(0,l.default)(s,A)?{minTime:A,maxTime:(0,b.default)(A)}:s&&E&&(0,l.default)(s,E)?{minTime:(0,y.default)(E),maxTime:E}:{minTime:void 0,maxTime:void 0},f=d.minTime,v=d.maxTime;return(0,n.jsxs)("div",{className:a()("flex",r),"data-testid":x,children:[(0,n.jsxs)("div",{className:c,children:[P&&(0,n.jsx)("label",{htmlFor:N,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:P})}),(0,n.jsxs)("div",{className:"relative mr-1","data-testid":"event_date",children:[(0,n.jsx)(u(),h({ref:U,selected:s,dateFormat:"MMM d, yyyy",onChange:$(o),minDate:A,maxDate:E,name:N,disabled:S,placeholderText:O,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=U.current)||null==(e=t.input)||e.focus()}})]})]}),(0,n.jsxs)("div",{className:g,children:[k&&(0,n.jsx)("label",{htmlFor:N,className:"mb-2",children:(0,n.jsx)(m.Z.LabelSm,{weight:"semibold",children:k})}),(0,n.jsxs)("div",{className:"relative ml-1","data-testid":"event_hour",children:[(0,n.jsx)(u(),h({ref:F,selected:s,onChange:$(o),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa",disabled:S,placeholderText:M,minTime:f,maxTime:v,className:"relative"},L)),(0,n.jsx)(p.JO,{type:"cheveron-down",className:"absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:text-gray-800",onClick:function(){var e,t;null==(t=F.current)||null==(e=t.input)||e.focus()}})]})]})]})}})}},291704:function(e,t,r){r.d(t,{P:()=>y});var n=r(552676),o=r(275271),i=r(240507),a=r.n(i),l=r(619803),s=r.n(l),c=r(589252),u=r(903225),d=r(729504),f=r(810958),p=r(715731),m=r(230380);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t,r,i,a=e.content,l=e.disableFullScreenPreview,y=void 0!==l&&l,h=e.contentParentPath,v=e.transformLinks,g=void 0===v?f.G5:v,x=(0,u.k6)(),j=(0,o.useRef)(null),O=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1],_=(0,o.useRef)(null),P=(0,p.I)();(0,o.useEffect)(function(){if(j.current){var e=j.current.querySelector(".trix-content");(0,f.GL)(e),g({containerElement:e,shouldIncludeInternalLinks:P}),(0,f.BU)(e),(0,f.el)(e),new d.W(j.current).addAttachmentClickEventHandler(function(e){var t=e.attachments,r=e.currentIndex;y?x.push(h):(_.current={attachments:t,currentIndex:r},S(!0))})}},[j,P,h,y,x]);var D=(0,o.useMemo)(function(){return(0,f.ND)(a)},[a]);return(0,n.jsxs)("div",{className:s()("react-trix-content text-dark",{"fullscreen-preview-enabled":!y}),ref:j,children:[w&&(0,n.jsx)(m._,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},_.current),i=i={onClose:function(){_.current=null,S(!1)},show:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r)),(0,n.jsx)(c.Z,{html:D})]})};y.propTypes={content:a().string.isRequired,disableFullScreenPreview:a().bool,contentParentPath:a().string,transformLinks:a().func}},900555:function(e,t,r){r.d(t,{u:()=>l});var n=r(552676),o=r(900795),i=r(39905),a=r(381636),l=function(e){var t,r,l,s,c=e.header,u=e.description,d=e.primaryLabel,f=e.primaryDisabled,p=e.onPrimaryClick,m=e.secondaryLabel,b=e.secondaryDisabled,y=e.onSecondaryClick,h=e.tertiaryLabel,v=e.tertiaryDisabled,g=e.onTertiaryClick,x=e.fontSize,j=!!(p&&d),O=!!(y&&m),w=!!(g&&h),S={};return"sm"===(void 0===x?"md":x)?(l=a.Z.TitleSm,S={weight:"semibold"},s=a.Z.BodySm):(l=a.Z.TitleMd,s=a.Z.BodyMd),(0,n.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-9 p-8 text-center","data-testid":"empty-state",children:[(0,n.jsxs)("div",{className:"flex max-w-lg flex-col gap-3",children:[(0,n.jsx)(l,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},S),r=r={children:c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),u&&(0,n.jsx)(s,{children:(0,n.jsx)(o.w,{content:u})})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[j&&(0,n.jsx)(i.z,{type:"button",variant:"circle",onClick:p,disabled:void 0!==f&&f,children:d}),O&&(0,n.jsx)(i.z,{type:"button",variant:"secondary",onClick:y,disabled:void 0!==b&&b,children:m})]}),w&&(0,n.jsx)(i.z,{type:"button",variant:"link",onClick:g,disabled:void 0!==v&&v,children:h})]})}},196619:function(e,t,r){r.d(t,{n:()=>c});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(227851),s=r(363665),c=(0,o.forwardRef)(function(e,t){var r=e.name,o=e.className,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","className"]),c=(0,l.Gc)().control;return(0,n.jsx)(l.Qr,{control:c,name:r,render:function(e){var r,l,c=e.field,u=c.onChange,d=c.value,f=c.name;return(0,n.jsx)(s.Z,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},i),l=l={className:a()("placeholder:text-light placeholder:opacity-100",o),name:f,onChange:function(e){return u(e.target.value)},value:d,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(l,e))}),r))}})});c.displayName="FormTextAreaAutosize"},359892:function(e,t,r){r.d(t,{$:()=>l});var n=r(552676),o=r(932699),i=r(227851),a=r(322825),l=function(e){var t=e.name,r=e.onChangeCallback,l=void 0===r?o.noop:r,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","onChangeCallback"]),c=(0,i.Gc)().control;return(0,n.jsx)(i.Qr,{control:c,name:t,render:function(e){var t=e.field,r=t.onChange,i=t.value;return(0,n.jsx)(a.Rs,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({value:i,onChange:function(e){(0,o.isFunction)(l)&&l(e),r(e)}},s))}})}},889228:function(e,t,r){r.d(t,{D:()=>i,X:()=>o});var n=r(275271),o=(0,n.createContext)(!1);o.displayName="ConnectPopoverContext";var i=function(){return(0,n.useContext)(o)}},38500:function(e,t,r){r.d(t,{Fv:()=>h,G7:()=>f,JB:()=>b,nw:()=>y});var n,o=r(552676),i=r(275271),a=r(739792),l=r(502504),s=r(431841);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f={INBOX:"inbox",MENTIONS:"mentions",FOLLOWING:"following",ALL:"all",ARCHIVED:"archived"},p=(u(n={},f.INBOX,(0,a.t)("notifications.group_tabs.inbox")),u(n,f.MENTIONS,(0,a.t)("notifications.group_tabs.mentions")),u(n,f.FOLLOWING,(0,a.t)("notifications.group_tabs.following")),u(n,f.ALL,(0,a.t)("notifications.group_tabs.all")),u(n,f.ARCHIVED,(0,a.t)("notifications.group_tabs.archived")),n),m=(0,i.createContext)(null);m.displayName="NotificationContext";var b=function(e){var t=e.children,r=e.onClose,n=(0,l.t)().setDesktopAppNotificationCount,a=d((0,i.useState)(f.INBOX),2),c=a[0],b=a[1],y=d((0,i.useState)({inbox:0,mentions:0,notifications:0}),2),h=y[0],v=y[1],g=(0,s._)("notification_last_marked_as_read"),x=g.setValue,j=(0,g.getValue)()||null,O=h.notifications;return(0,i.useEffect)(function(){n(O)},[O]),(0,o.jsx)(m.Provider,{value:{activeTab:c,setActiveTab:b,notificationCount:O,setNotificationCount:function(e){var t,r;v((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}({},h),r=r={notifications:e},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},getTabLabel:function(e){return p[e]},onClose:r,setNotificationTabCounters:v,lastMarkedAsRead:j,setLastMarkedAsRead:x},children:t})},y=function(){var e=(0,i.useContext)(m);if(!e)throw Error("useNotificationContext must be used within a NotificationProvider");return e},h=function(){return Object.values(f)}},302451:function(e,t,r){r.d(t,{bh:()=>y,SA:()=>h,hR:()=>b,uQ:()=>p,Io:()=>v,s5:()=>g,N7:()=>m});var n=r(932699),o=r(131906),i=r(758664),a=r(93199),l=r(38500);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var f={mark_as_read:function(e){var t=e.id;return(0,a.gN)(i.N.markAsRead({id:t}))},mark_all_as_read:function(){return(0,a.Cu)(i.N.markAllAsRead({}))},follow:function(e){var t=e.postId;return(0,a.Cu)(i.N.follow({postId:t}))},unfollow:function(e){var t=e.postId,r=e.followerId;return(0,a.pC)(i.N.unfollow({postId:t,followerId:r}))},archive:function(e){var t=e.id;return(0,a.gN)(i.N.archive({id:t}))}},p=function(e){e.queryClient.invalidateQueries(["notifications"])},m=function(e){e.queryClient.invalidateQueries(["notifications","count"])},b=function(e){var t,r=e.notification,n=e.queryClient,o=["notifications",l.G7.INBOX],i=n.getQueryData(o);if(null==i||null==(t=i.pages)?void 0:t.length){var a=i.pages[0];if(!new Set(a.records.map(function(e){return e.id})).has(r.id)){var c,f=[r].concat(function(e){if(Array.isArray(e))return s(e)}(c=a.records)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}}(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0,15),p=f[f.length-1],m=p?String(p.id):a.next_search_after,b=d(u({},a),{records:f,total_count:a.total_count+1,has_next_page:!0,next_search_after:m});n.setQueryData(o,d(u({},i),{pages:[b],pageParams:[i.pageParams[0]]}))}}},y=function(e){var t=e.perPage,r=void 0===t?15:t,n=e.notificationGroup,s=void 0===n?l.G7.INBOX:n,u=(0,o.useInfiniteQuery)(["notifications",s],function(e){var t,n=e.pageParam,o=void 0===n?1:n;return(t=function(){var e,t;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){return e={per_page:String(r),notification_group:s},1===o||(null==(t=null==f?void 0:f.pages[o-2])?void 0:t.next_search_after)&&(e.next_search_after=t.next_search_after),e.page=o,[2,(0,a.UT)(i.N.fetch(e))]})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){c(i,n,o,a,l,"next",e)}function l(e){c(i,n,o,a,l,"throw",e)}a(void 0)})})()},{staleTime:6e4,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),d=u.isLoading,f=u.data,p=u.refetch,m=u.fetchNextPage,b=u.isFetchingNextPage,y=null==f?void 0:f.pages[(null==f?void 0:f.pages.length)-1];return{isLoading:d,isFetchingNextPage:b,notifications:f,refetch:p,fetchNextPage:m,hasNextPage:!!(null==y?void 0:y.has_next_page)}},h=function(e,t){return(0,o.useQuery)(["notifications","count",e],function(){return(0,a.UT)(i.N.fetchNotificationCount({community_id:e}))},{enabled:!!e,onSuccess:function(e){var r=e.new_notifications_count,n=e.new_mentions_count;t({inbox:e.new_inbox_count,mentions:n,notifications:r})}})},v=function(e){return{mutate:(0,o.useMutation)(function(){return(0,a.Cu)(i.N.resetNotificationCount())},{onSuccess:function(t){e(t.new_notifications_count)}}).mutate}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.noop,t=(0,o.useQueryClient)(),r=(0,o.useMutation)(function(e){var t=e.action,r=e.id,n=e.postId,o=e.followerId;return f[t]({id:r,postId:n,followerId:o})},{onSuccess:function(r){p({queryClient:t}),e(r)}});return{mutate:r.mutate,isLoading:r.isLoading}}},657808:function(e,t,r){r.d(t,{L:()=>u});var n=r(552676),o=r(275271),i=r(43226),a=r.n(i),l=r(541363),s=function(e){var t=e.editor,r=e.inputRef,n=(0,o.useRef)(null);if(t)n.current={getText:function(){return t.getText()},insertText:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.selection.anchor;t.chain().focus().insertContentAt(r,e).run()},insertLink:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r?t.state.selection.anchor-2:t.state.selection.anchor,o=t.chain().focus();r&&o.deleteRange({from:n,to:n+2}),o.insertContentAt(n,'<a href="'.concat(e,'">').concat(e,"</a>")).run()},getCursorPosition:function(){return t.state.selection.anchor},textUpToAnchor:function(){return t.state.doc.textBetween(0,t.state.selection.anchor," ")}};else if(null==r?void 0:r.current){var i=r.current;n.current={getText:function(){return i.value},insertText:function(e){var t,r,n=null!=(t=i.selectionStart)?t:0,o=null!=(r=i.selectionEnd)?r:0,a=i.value.substring(0,n),l=i.value.substring(o);i.value=a+e+l,i.setSelectionRange(n+e.length,n+e.length),i.focus()},insertLink:function(){},getCursorPosition:function(){var e,t;return(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1},textUpToAnchor:function(){var e,t;return i.value.substring(0,(null!=(t=null==r||null==(e=r.current)?void 0:e.selectionStart)?t:0)+1)}}}return n.current},c=["{{community.url}}","{{trigger.event.url}}","{{trigger.event.space.url}}","{{trigger.event.space.space_group.url}}","{{trigger.comment.url}}","{{trigger.comment.post.url}}","{{trigger.comment.post.space.url}}","{{trigger.comment.post.space.space_group.url}}","{{trigger.post.url}}","{{trigger.post.space.url}}","{{trigger.post.space.space_group.url}}"],u=function(e){var t=e.editor,r=e.inputRef,i=e.setInputChangeHandler,u=void 0===i?a():i,d=e.variables,f=e.wrapperClassName,p=e.optionsClassName,m=e.enableLinkInsertion,b=e.children,y=e.shouldRenderPortal,h=s({editor:t,inputRef:r}),v=!!t&&!!(void 0!==m&&m),g=function(){if(!h)return"";var e=h.textUpToAnchor();return e.length>=2?e.slice(-2):e},x=function(e){var t="{{"===g(),r=t?e.slice(2):e,n=c.includes(e);v&&n?null==h||h.insertLink(e,t):null==h||h.insertText(r)},j=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=function(){"{{"===g()&&j.current&&j.current.click()};return t?t.on("update",e):u(e),function(){t?t.off("update",e):u(a())}},[h]),(0,n.jsx)("div",{className:void 0===f?"max-w-sm pt-3":f,children:(0,n.jsx)(l.l,{options:d,groupBy:function(e){return e.group},onSelect:function(e){return x(e)},buttonRef:j,optionsClassName:p,shouldRenderPortal:void 0!==y&&y,children:b})})}},671963:function(e,t,r){r.d(t,{m:()=>f,q:()=>d});var n=r(552676),o=r(619803),i=r.n(o),a=r(739792),l=r(380171),s=r(775148),c=r(657808),u=(0,a.t)("dynamic_vars_groups.member"),d=[{group:u,label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:u,label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:u,label:"{{member.name}}",value:"{{member.name}}"},{group:u,label:"{{member.email}}",value:"{{member.email}}"},{group:u,label:"{{member.public_uid}}",value:"{{member.public_uid}}"}],f=function(e){var t,r,o=e.tooltipPlacement,u=e.className,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["tooltipPlacement","className"]);return(0,n.jsx)(c.L,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},d),r=r={children:(0,n.jsx)(l.T,{placement:void 0===o?"bottom":o,delay:300,content:(0,a.t)("tiptap.add_variable"),interactive:!1,children:(0,n.jsx)(s.h,{iconSize:20,buttonSize:32,name:"20-variables",className:i()("disabled:cursor-not-allowed disabled:opacity-40",u),ariaLabel:(0,a.t)("tiptap.add_variable")})})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},247075:function(e,t,r){r.d(t,{Q:()=>a});var n=r(552676),o=r(619803),i=r.n(o),a=function(e){var t,r,o=e.href,a=e.variant,l=void 0===a?"primary":a,s=e.children,c=e.full,u=e.small,d=e.extraLarge,f=e.large,p=e.className,m=e.forwardedRef,b=e.rel,y=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["href","variant","children","full","small","extraLarge","large","className","forwardedRef","rel"]);return(0,n.jsx)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},y),r=r={href:o,rel:void 0===b?"noopener noreferrer":b,ref:m,className:i()("focus-visible:!outline-secondary inline-block rounded-md font-bold leading-5 transition-colors duration-150 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"px-8 py-3 leading-normal":d,"px-6 py-2 leading-normal":f,"px-[18px] py-[6px] text-sm":!f&&!u&&!d,"px-2 py-1 text-xs":u,"w-full":c,"bg-brand !text-brand-button hover:opacity-90":"primary"===l,"border-secondary bg-primary !text-darkest hover:bg-tertiary border !font-medium":"secondary"===l,"border-hover bg-primary !text-darkest hover:bg-primary border":"secondary-light"===l,"!text-link bg-transparent":"plain"===l,"border-v2-danger bg-v2-danger border !text-white hover:opacity-90":"danger"===l,"border-v2-danger bg-primary !text-v2-danger border !font-medium hover:opacity-90":"danger-outline"===l,"border-circle-button bg-circle-button !text-circle-button hover:border-circle-button-hover hover:bg-circle-button-hover border":"circle"===l,"!text-default hover:!text-darkest bg-transparent !p-0 font-medium transition-colors":"text"===l,"!text-darkest hover:bg-tertiary !font-semibold":"circle-plain"===l,"!text-circle !p-0 !font-semibold":"circle-text"===l},p),children:s},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},366988:function(e,t,r){r.d(t,{E:()=>l});var n=r(131906),o=r(739792),i=r(251630),a=r(60878),l=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,a.pm)(),l=r.success,s=r.error,c=(0,n.useQueryClient)(),u=(0,n.useQuery)({queryKey:["mediaSettings",e],queryFn:function(){return i.Ss.show(e)},enabled:!!e&&t}),d=u.data,f=u.isLoading,p=u.refetch,m=(0,n.useMutation)({mutationFn:function(t){return i.Ss.update(e,t)},onSuccess:function(){l((0,o.t)("media_settings.success")),p(),c.invalidateQueries(["mediaSettings",e])},onError:function(e){s((0,o.t)("media_settings.error")),console.error(e)}}),b=m.mutate;return{mediaSettings:d,isLoading:f,isUpdating:m.isLoading,update:b,refetch:p}}},523386:function(e,t,r){r.d(t,{m:()=>v});var n=r(552676),o=r(739792),i=r(456918),a=r(701168),l=r(935565),s=r(524330),c=r(619803),u=r.n(c),d=r(594337),f=r(22319),p=r(280219);function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var b=function(e){var t=e.memberTag,r=e.className,o=(0,f.TC)().currentAppearance,i=t||{},a=i.name,l=i.emoji,c=i.color,b=i.display_format,y=i.custom_emoji_url,h=i.custom_emoji_dark_url,v=i.is_public,g=i.is_background_enabled;if(!v)return null;var x={};return g&&(x.borderColor=c,x.backgroundColor=c,x.color=c&&(0,d.Vi)(c).isDark()?"#ffffff":"#000000"),(0,n.jsx)(s.g,m({className:u()(r,{"cursor-pointer":"icon"===b,"font-medium":!0,"px-2":!0})},(l||y||h)&&{emoji:(0,n.jsx)(p.S,{emoji:l,className:"!h-3",appearance:o,customEmojiUrl:y,customEmojiDarkUrl:h})},"icon"===b?{tooltipText:a}:{label:a},c&&{styles:m({},x)}))},y=r(380171),h=function(e){var t=e.memberTags,r=e.labelVariant,i=(0,f.TC)().currentAppearance,a=(0,n.jsx)("ul",{className:"flex !list-none flex-col gap-1 py-1",children:t.map(function(e){return(0,n.jsx)("li",{children:(0,n.jsx)(b,{memberTag:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),className:"border-secondary"})},e.id)})}),l="words"===(void 0===r?"words":r)?(0,o.t)("member_tags.show_more",{count:t.length}):"+".concat(t.length);return(0,n.jsx)("div",{children:(0,n.jsx)(y.T,{content:a,className:"flex",theme:i,children:(0,n.jsx)(s.g,{label:l})})})},v=function(e){var t=e.isAdmin,r=void 0!==t&&t,c=e.limit,u=void 0===c?3:c,d=e.memberTags,f=e.showMoreTag,p=e.memberId,m=e.shouldShowActivityScore,y=void 0!==m&&m,v=e.showMoreLabelVariant,g=e.className,x=(void 0===d?[]:d).filter(function(e){return e.is_public});if(!x.length&&!r&&!y)return null;var j=x.slice(0,u),O=x.slice(u,x.length);return(0,n.jsxs)("div",{className:(0,a.A)("flex flex-wrap gap-2",g),children:[y&&p&&(0,n.jsx)(l.XR,{ids:[p],children:(0,n.jsx)(i.z,{memberId:p,shouldHideIfNoScore:!0})}),r&&(0,n.jsx)(s.g,{className:"!bg-brand !text-brand-button !border-none",label:(0,o.t)("admin"),dataTestId:"admin-badge"}),j.map(function(e){return(0,n.jsx)(b,{memberTag:e},e.id)}),(void 0===f||f)&&O.length>0&&(0,n.jsx)(h,{memberTags:O,labelVariant:v})]})}},26950:function(e,t,r){r.d(t,{u:()=>b});var n=r(552676),o=r(275271),i=r(598222),a=r(681111),l=r(311779),s=r(619803),c=r.n(s),u=r(739792),d=function(e){var t=e.id,r=e.children,s=e.show,d=e.onClose,f=e.title,p=e.className,m=e.hideCloseButton,b=e.overflowVisible,y=e.containerClassName;return(0,n.jsx)(i.u.Root,{show:s,as:o.Fragment,children:(0,n.jsx)(a.V,{as:"div",static:!0,className:"react-modal react-modal--default ".concat(void 0===y?"default":y),open:s,onClose:d,children:(0,n.jsxs)("div",{className:"react-modal__wrapper",children:[(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsxs)("div",{id:t,className:c()("react-modal__container",{"overflow-hidden":!(void 0!==b&&b)},void 0===p?"px-6 py-6":p),children:[(0,n.jsx)("div",{className:"react-modal__close-button-container",children:!m&&(0,n.jsxs)("button",{type:"button",className:"react-modal__close-button",onClick:d,children:[(0,n.jsx)("span",{className:"sr-only",children:(0,u.t)("close")}),(0,n.jsx)(l.Z,{className:"size-6","aria-hidden":"true"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a.V.Title,{as:"h3",className:"text-darkest text-lg font-medium leading-6",children:f}),(0,n.jsx)("div",{className:"h-full",children:r})]})]})})]})})})},f=r(957363),p=function(e){var t,r,l=e.show,s=e.onClose,c=e.className,u=e.title,d=e.passThroughProps,p=e.hideCloseButton,m=e.hideTitle,b=e.children,y=(0,o.useRef)(null),h=(0,o.useRef)(null);return(0,n.jsx)(i.u.Root,{show:l,as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullscreen-modal ".concat(c),initialFocus:p?h:y,open:l,onClose:s},d),r=r={children:(0,n.jsxs)("div",{className:"fullscreen-modal__body-outer",children:[(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)("div",{className:"fullscreen-modal__body-wrap",children:(0,n.jsxs)("div",{className:"fullscreen-modal__body",ref:h,children:[!p&&(0,n.jsx)("button",{type:"submit",className:"fullscreen-modal__close-icon",onClick:s,ref:y,children:(0,n.jsx)(f.JO,{type:"close"})}),!m&&(0,n.jsx)("h2",{className:"fullscreen-modal__title",children:u}),b]})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},m=function(e){var t,r,l=e.show,s=e.title,c=e.onClose,u=e.hideCloseButton,d=e.className,p=e.passThroughProps,m=e.children,b=(0,o.useRef)(null);return(0,n.jsx)(i.u.Root,{show:l,as:o.Fragment,children:(0,n.jsx)(a.V,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",static:!0,className:"fullpage-modal fixed inset-0 z-10 overflow-y-auto ".concat(d),initialFocus:b,open:l,onClose:c},p),r=r={children:(0,n.jsxs)("div",{className:"fullpage-modal__body-outer size-full",children:[(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(a.V.Overlay,{className:"fixed inset-0 bg-gray-900/50"})}),(0,n.jsx)("span",{className:"hidden","aria-hidden":"true",style:{content:"&#8203;"}}),(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,n.jsx)("div",{className:"z-1 fullpage-modal__body-wrap relative m-0 size-full",children:(0,n.jsxs)("div",{className:"bg-primary fullpage-modal__body h-full rounded-none md:rounded-lg","data-testid":"modal",children:[(0,n.jsx)("h2",{className:"fullpage-modal__title sticky",children:s}),!u&&(0,n.jsx)("button",{type:"submit",className:"fullpage-modal__close-icon z-10",onClick:c,ref:b,children:(0,n.jsx)(f.JO,{type:"close",useWithFillCurrentColor:!0})}),m]})})})]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})},b=function(e){var t,r=e.variant,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["variant"]);switch(r){case"fullscreen":t=p;break;case"large":t=m;break;default:t=d}return(0,n.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o))}},310989:function(e,t,r){r.d(t,{q:()=>l});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=(0,o.forwardRef)(function(e,t){var r=e.children,o=e.iconEl,i=e.actionButtonEl,l=e.className;return(0,n.jsxs)("div",{ref:t,className:a()("flex gap-3 rounded-lg px-4 py-3",l),children:[o,(0,n.jsx)("div",{className:"flex-1",children:r}),i]})})},592768:function(e,t,r){r.d(t,{a:()=>c});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(381636),s=r(310989),c=(0,o.forwardRef)(function(e,t){var r,o,i=e.children,c=e.className,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","className"]);return(0,n.jsx)(s.q,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:a()("bg-v2-warning/5 border-v2-warning border",c),ref:t},u),o=o={children:(0,n.jsx)(l.Z.LabelSm,{color:"text-stroke-foreground",as:"span",children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r))})},129576:function(e,t,r){r.d(t,{R:()=>l});var n=r(552676),o=r(594023),i=r(619803),a=r.n(i),l=function(e){var t=e.children,r=e.value,i=e.className,l=void 0===i?"":i;return(0,n.jsx)(o.E.Option,{value:r,className:function(e){var t=e.checked;return a()("bg-primary hover:border-secondary relative flex cursor-pointer rounded-lg border p-6 shadow-sm transition-colors focus:outline-none",{"border-secondary":t,"border-primary":!t},l)},children:function(e){var r=e.checked;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"flex flex-1",children:(0,n.jsx)("span",{className:"flex flex-col",children:t})}),(0,n.jsx)("span",{className:a()("mt-1.5 flex size-4 shrink-0 items-center justify-center rounded-full border border-transparent",{"bg-toggle-active":r,"bg-primary":!r}),"aria-hidden":"true",children:(0,n.jsx)("span",{className:"bg-primary size-1.5 rounded-full"})})]})}})}},619347:function(e,t,r){r.d(t,{Mz:()=>x,Q_:()=>O,l3:()=>j,S0:()=>w});var n=r(552676),o=r(275271),i=r(932699),a=r(696969),l=r(117617),s=r(72727),c=r(701168),u=r(660512),d=r(864743),f=r(800504),p=r(431841),m=r(840905),b=r(619803),y=r.n(b),h=function(e){var t=e.startResizing,r=e.isMessagingModalOpen,o=e.isTrialBannerExists,i=(0,f.f)();return(0,n.jsx)("div",{className:y()("border-primary hover:bg-circle invisible z-[21] shrink-0 grow-0 basis-0.5 cursor-col-resize resize-x justify-self-end hover:w-0.5 md:visible",{"h-[calc(100vh-40px)]":r,"h-[calc(100vh-64px)]":!r&&!o,"h-[calc(100vh-64px-48px)]":!r&&!o&&i,"h-[calc(100vh-112px)]":!r&&o,"h-[calc(100vh-144px-48px)]":!r&&o&&i}),onMouseDown:t})};function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=64,j=48,O=64,w=function(e){var t,r=e.isBelowHeader,b=e.noBorderLeft,y=e.isLoading,v=e.loaderVariant,x=e.children,j=e.className,O=e.shouldHideRailbarDragger,w=void 0!==O&&O,S=e.isFullWidth,_=void 0!==S&&S,P=e.isSmallScreen,D=(0,a.k)().isTrialBannerExists,k=(0,d.U)().isMessagingModalOpen,E=(0,u.x)(),A=E.isLiveStream,N=E.isCourseSpace,T=E.isDrawer,C=(0,l.BT)()||void 0!==P&&P,I=(0,f.f)(),M=(0,s.L)().isElectron,L=(0,o.useRef)(null),R=g((0,o.useState)(!1),2),U=R[0],F=R[1],$=(0,p._)("circle-railbar-width"),z=$.setValue,B=$.getValue,Z=g((0,o.useState)(B()||360),2),H=Z[0],q=Z[1],V=(0,o.useCallback)(function(){F(!0)},[]),W=(0,o.useCallback)(function(){F(!1)},[]),G=(0,o.useCallback)(function(e){if(U){var t,r=(null==(t=L.current)?void 0:t.getBoundingClientRect().right)||0,n=Math.abs(e.clientX-r);n>332&&n<720&&(q(n),z(n))}},[U]);(0,o.useEffect)(function(){return window.addEventListener("mousemove",G),window.addEventListener("mouseup",W),function(){window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",W)}},[G,W]);var J=w||A||N;if(y)return(0,n.jsx)(m.gi,{variant:void 0===v?"rail-bar":v});var K=w?360:H;return(0,n.jsxs)("div",{className:(0,c.A)("flex h-full flex-row",void 0===j?"":j),style:{width:K},children:[!J&&(0,n.jsx)(h,{startResizing:V,isMessagingModalOpen:k,isTrialBannerExists:D}),(0,n.jsx)("div",{ref:L,id:"rail-content",className:(0,c.A)("bg-primary border-primary fixed right-[inherit] top-0 z-20 h-full border-l opacity-100",{"md:top-16":!k,"lg:!top-0":k||A||T||(t=document.getElementById("lesson-hello-bar"),N&&(0,i.isEmpty)(t)),"lg:top-28":D&&!N||I,"lg:top-40":D&&!N&&I,"lg:top-20":void 0!==r&&r,"border-l-0":void 0!==b&&b,"z-50 !h-full !w-full":C,"absolute !h-[calc(100vh-32px)] rounded-lg":A&&!C,"!w-96":A&&!_,"!w-full":T||_,"!top-[6.325rem]":M}),style:{width:K},children:x})]})};w.Header=function(e){var t=e.hasNoBorder,r=e.children,o=e.className,i=(0,d.U)().isMessagingModalOpen,a=(0,u.x)(),l=a.isChatSpace,s=a.isCourseSpace,c="min-h-[64px]";return t?c="min-h-[48px]":i?c="min-h-[56px]":(l||s)&&(c="min-h-[72px]"),(0,n.jsx)("div",{className:y()("text-darkest flex items-center px-6 font-medium",c,{"border-primary border-b py-3":!t},o),children:r})},w.Content=function(e){var t=e.children,r=e.heightGap,i=e.noPadding,s=e.adaptHeightToLgScreen,c=void 0===s||s,u=e.isBelowHeader,f=void 0!==u&&u,p=e.isCourseSpace,m=void 0!==p&&p,b=e.className,h=e.id,v=(0,a.k)().isTrialBannerExists,g=(0,d.U)().isMessagingModalOpen,O=(0,l.j)(),w=(0,o.useMemo)(function(){var e=x;return r?e=r:f&&(e=x+j),g?e+=40:(v&&!m&&(e+=48),O&&c&&(e+=48)),e},[r,f,v,g,O,m,c]);return(0,n.jsx)("div",{id:void 0===h?"":h,className:y()("scrollbar-hide overflow-auto",{"px-6 py-4":!(void 0!==i&&i)},void 0===b?"":b),style:{height:"calc(100dvh - ".concat(w,"px)")},children:t})}},805116:function(e,t,r){r.d(t,{O:()=>c});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(227851),s=r(892640),c=(0,o.forwardRef)(function(e,t){var r=e.name,o=e.className,i=e.textboxClassName,c=void 0===i?"":i,u=(0,l.Gc)().control;return(0,n.jsx)("div",{className:a()("react-rich-text-input",void 0===o?"":o),children:(0,n.jsx)(l.Qr,{control:u,name:r,render:function(r){var o,i,a=r.field,l=a.onChange,u=a.value;return(0,n.jsx)(s.y,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),i=i={className:c,onChange:function(e){return l(e.target.innerHTML)},value:u,ref:t},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o))}})})});c.displayName="RichTextInputControlledInput"},672851:function(e,t,r){r.d(t,{X:()=>b});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(932699),s=r(377282),c=r(739792),u=r(282859),d={1:"line-clamp-1",2:"line-clamp-2",3:"line-clamp-3",4:"line-clamp-4",5:"line-clamp-5",6:"line-clamp-6",7:"line-clamp-7",8:"line-clamp-8"},f={1:"overflow-hidden max-h-6 h-6",2:"overflow-hidden max-h-12 h-12",3:"overflow-hidden max-h-18 h-18",4:"overflow-hidden max-h-24 h-24",5:"overflow-hidden max-h-30 h-30",6:"overflow-hidden max-h-36 h-36",7:"overflow-hidden max-h-42 h-42",8:"overflow-hidden max-h-48 h-48"};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var t,r,i=e.children,p=e.disabled,b=void 0!==p&&p,y=e.hideToggle,h=e.lines,v=void 0===h?2:h,g=e.onToggle,x=e.seeMoreClassName,j=(0,o.useRef)(null),O=(0,o.useRef)(null),w=m((0,o.useState)(!1),2),S=w[0],_=w[1],P=m((0,o.useState)(!b),2),D=P[0],k=P[1],E=m((0,o.useState)(!1),2),A=E[0],N=E[1],T=(0,u.G6)()||(0,u.qx)()?f[v]:d[v];(0,o.useEffect)(function(){!b&&D&&g&&g(S)},[b,S,D,g]),(0,o.useEffect)(function(){if(!S&&j.current&&D&&A){var e=j.current,t=setTimeout(function(){(0,s.Z)(e,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"})},100);return function(){return clearTimeout(t)}}},[j,A,S,D]),(0,o.useLayoutEffect)(function(){var e=(0,l.defer)(function(){if(O.current&&!b){var e=O.current;requestAnimationFrame(function(){k(e.scrollHeight>e.offsetHeight)})}});return function(){return clearTimeout(e)}},[b,O]);var C=!D||b||void 0!==y&&y,I=S||b||!D;return(0,n.jsxs)("div",{className:"flex flex-col","data-testid":"see-more-less",children:[(0,n.jsx)("div",{ref:O,className:a()((t={"line-clamp-none h-auto":I},r=!I,T in t?Object.defineProperty(t,T,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[T]=r,t)),"data-testid":"see-more-less-content",children:i}),(0,n.jsx)("button",{type:"button",ref:j,"data-testid":"show-expand",onClick:function(){b||(N(!0),_(function(e){return!e}))},className:a()("text-light hover:text-dark focus-visible:text-dark inline-flex text-base",{hidden:C},x),children:S?(0,c.t)("show_less"):(0,c.t)("show_more")})]})}},524304:function(e,t,r){r.d(t,{S:()=>u});var n=r(552676),o=r(594023),i=r(380171),a=r(701168),l=r(381636);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={sm:"px-2 py-1.5",md:"px-3 py-2"},u=function(e){var t,r=e.value,u=e.onChange,d=e.options,f=e.size,p=e.className,m=e.checkedClassName,b=void 0===m?"bg-tertiary":m,y=e.optionClassName,h=void 0===y?"":y,v=null!=(t=c[void 0===f?"md":f])?t:c.md;return(0,n.jsx)(o.E,{value:r,onChange:u,children:(0,n.jsx)("div",{className:(0,a.A)("flex items-center gap-6",void 0===p?"":p),children:d.map(function(e){var t=e.label,r=e.value,c=e.tooltipText;return(0,n.jsx)(o.E.Option,{value:r,className:function(e){var t=e.checked;return(0,a.A)("hover:bg-tertiary","focus:bg-tertiary focus:ring-primary focus:ring-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2","flex cursor-pointer select-none rounded-lg leading-none transition-colors",v,s({},b,t),h)},children:function(e){var r,u,d=e.checked,f="string"==typeof t?(0,n.jsx)(l.Z.LabelSm,{weight:d?"medium":"normal",children:t}):t;return(0,n.jsx)(o.E.Label,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}({as:"span",className:(0,a.A)("flex whitespace-nowrap",{"text-light":!d,"text-dark":d})},d&&{"aria-checked":d}),u=u={children:c?(0,n.jsx)(i.T,{content:c,arrow:!1,delay:100,duration:100,children:f}):f},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(u)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(u,e))}),r))}},r)})})})}},141782:function(e,t,r){r.d(t,{D:()=>l,d:()=>a});var n=r(552676),o=r(275271),i=(0,o.createContext)({item:{},listeners:{}});i.displayName="ListItemData";var a=function(){return(0,o.useContext)(i)},l=function(e){var t=e.item,r=e.listeners,o=e.children;return(0,n.jsx)(i.Provider,{value:{item:t,listeners:r},children:o})}},137585:function(e,t,r){r.d(t,{d:()=>c,y:()=>u});var n=r(552676),o=r(275271),i=r(971691),a=r(932699);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=(0,o.createContext)({activeItem:{},distance:0,items:[],lockedHorizontalAxis:!1,lockedVerticalAxis:!1,onSort:a.noop,setActiveItem:a.noop,useAnimation:!1,useDragHandle:!1});s.displayName="SortableListData";var c=function(){return(0,o.useContext)(s)},u=function(e){var t,r=e.children,c=e.distance,u=e.items,d=e.lockedHorizontalAxis,f=e.lockedVerticalAxis,p=e.onDragEnd,m=e.onDragOver,b=e.onDragStart,y=e.onSort,h=e.useAnimation,v=e.useDragHandle,g=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=g[0],j=g[1],O=function(e){var t=e.active,r=e.over;if(t.id!==r.id){var n=u.findIndex(function(e){return e.id===t.id}),o=u.findIndex(function(e){return e.id===r.id});y((0,i.Rp)(u,n,o))}};return(0,n.jsx)(s.Provider,{value:{activeItem:x,distance:void 0===c?0:c,items:u,lockedHorizontalAxis:void 0!==d&&d,lockedVerticalAxis:void 0!==f&&f,onDragEnd:function(e){return j(null),(0,a.isFunction)(p)?p(e):O(e)},onDragOver:m,onDragStart:(0,a.isFunction)(b)?b:function(e){j(u.find(function(t){return t.id===e.active.id}))},onSort:y,setActiveItem:j,useAnimation:void 0===h||h,useDragHandle:void 0!==v&&v},children:r})}},164714:function(e,t,r){r.d(t,{dw:()=>i.d,yx:()=>i.y,dI:()=>l.d,LB:()=>f,Fo:()=>a});var n=r(552676),o=r(971691),i=r(137585),a=function(e){var t,r=e.id,a=e.items,l=e.children,s=(0,i.d)(),c=s.items,u=s.lockedVerticalAxis,d=s.lockedHorizontalAxis;return u?t=o.qw:d&&(t=o.PG),(0,n.jsx)(o.Fo,{id:r,items:null!=a?a:c,strategy:t,children:l})},l=r(141782),s=r(808782),c=r(85281);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t=e.children,r=e.shouldUseKeyboardSensor,a=(0,i.d)(),l=a.lockedVerticalAxis,u=a.lockedHorizontalAxis,f=a.onDragStart,p=a.onDragEnd,m=a.onDragOver,b=a.distance,y=(0,s.VT)(s.we,{activationConstraint:{distance:b}}),h=(0,s.VT)(s.Lg,{coordinateGetter:o.is}),v=[y];r&&v.push(h);var g=s.Dy.apply(void 0,d(v)),x=[c.hg].concat(d(l?[c.DL]:[]),d(u?[c.K7]:[]));return(0,n.jsx)(s.LB,{sensors:g,modifiers:x,collisionDetection:s.pE,onDragStart:f,onDragEnd:p,onDragOver:m,children:t})}},489213:function(e,t,r){r.d(t,{y:()=>u});var n=r(552676),o=r(808782),i=r(85281),a=r(230967),l=r(574307),s=r(137585),c=r(151256),u=function(e){var t,r,u,d=e.children,f=e.portalTo,p=e.shouldRestrictToParent,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","portalTo","shouldRestrictToParent"]),b=(0,l.useFrame)(),y=null==b||null==(u=b.document)?void 0:u.documentElement,h=(0,s.d)(),v=h.activeItem,g=h.useAnimation,x=(void 0===f?null:f)||y||window.document.body;return(0,n.jsx)(n.Fragment,{children:(0,a.createPortal)((0,n.jsx)(o.y9,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({adjustScale:!0,dropAnimation:{duration:100*!!g}},void 0!==p&&p&&{modifiers:[i.F4]},m),r=r={children:v?(0,n.jsx)(c.g,{item:v,isDragOverlay:!0,children:d}):null},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),x)})}},49705:function(e,t,r){r.d(t,{c:()=>s});var n=r(552676),o=r(971691),i=r(137585),a=r(151256);function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var s=function(e){var t,r,s=e.item,c=e.disabled,u=e.dataTestId,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["item","disabled","dataTestId"]),f=s.id,p=(0,i.d)().useAnimation,m=(0,o.nB)((t=l({id:f},!p&&{transition:{duration:0,easing:"linear"}}),r=r={disabled:void 0!==c&&c},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),b=m.attributes,y=m.listeners,h=m.transform,v=m.transition,g=m.isDragging,x=m.setNodeRef;return(0,n.jsx)(a.g,l({ref:x,item:s,attributes:b,listeners:y,transform:h,transition:v,isDragging:g,dataTestId:void 0===u?"":u},d))}},345185:function(e,t,r){r.d(t,{a:()=>l});var n=r(552676),o=r(619803),i=r.n(o),a=r(164714),l=function(e){var t,r,o=e.gap,l=e.className,s=e.children,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["gap","className","children"]);return(0,n.jsx)(a.Fo,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},c),r=r={children:(0,n.jsx)("ul",{className:i()("grid gap-".concat(void 0===o?2:o),void 0===l?"":l),children:s})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},151256:function(e,t,r){r.d(t,{g:()=>d});var n=r(275271),o=r(552676),i=r(978434),a=r(619803),l=r.n(a),s=r(141782),c=r(137585),u=(0,n.forwardRef)(function(e,t){var r,n,a=e.item,u=e.transform,d=e.transition,f=e.listeners,p=e.attributes,m=e.isDragging,b=e.isDragOverlay,y=e.placeholder,h=e.className,v=e.children,g=e.dataTestId,x=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["item","transform","transition","listeners","attributes","isDragging","isDragOverlay","placeholder","className","children","dataTestId"]),j=(0,c.d)().useDragHandle,O={transform:i.ux.Transform.toString(u),transition:d};return(0,o.jsx)("li",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,style:O,className:l()("w-full min-w-0 list-none",{"cursor-auto":j,"cursor-move":!j},h)},p,x,!j&&f),n=n={"data-testid":void 0===g?"":g,children:(0,o.jsx)(s.D,{item:a,listeners:f,children:!(void 0!==m&&m&&!(void 0!==b&&b))&&v?v:y?(0,o.jsx)(y,{}):(0,o.jsx)("div",{className:"h-10"})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))});u.displayName="ListItem";var d=(0,n.memo)(u);d.displayName="ListItemMemo"},844081:function(e,t,r){r.d(t,{cm:()=>l,dI:()=>o.dI,dw:()=>o.dw,Fo:()=>o.Fo});var n=r(552676),o=r(164714),i=r(489213),a=r(49705),l=Object.assign(function(e){var t,r,i=e.children,a=e.shouldUseKeyboardSensor,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","shouldUseKeyboardSensor"]);return(0,n.jsx)(o.yx,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},l),r=r={children:(0,n.jsx)(o.LB,{shouldUseKeyboardSensor:void 0===a||a,children:i})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},{List:r(345185).a,Item:a.c,DragOverlay:i.y})},595342:function(e,t,r){r.d(t,{O:()=>s});var n=r(552676),o=r(619803),i=r.n(o),a={success:"text-v2-success",warning:"text-v2-warning-900",danger:"text-v2-danger",default:"text-dark",info:"text-v2-info"},l={success:"bg-v2-success-100",warning:"bg-v2-warning-100",danger:"bg-v2-danger-100",default:"bg-secondary",info:"bg-blue-100"},s=function(e){var t=e.children,r=e.variant,o=void 0===r?"default":r,s=e.textTransform,c=a[o]||a.default,u=l[o]||l.default;return(0,n.jsx)("span",{className:i()("rounded-md px-2 py-1 text-xs font-semibold",c,u,s),"data-testid":"status-badge",children:t})}},807730:function(e,t,r){r.d(t,{E:()=>s});var n=r(552676),o=r(275271),i=r(701168),a=r(942642),l={2:"h-2 w-2 border-2","3.5":"h-3.5 w-3.5 border-3",5:"h-5 w-5 border-4"},s=function(e){var t,r,s,c=e.idleColor,u=e.onlineColor,d=e.size,f=e.status,p=(0,o.useMemo)(function(){var e="idle"===f?c:u;return e&&(0,a.V)(e).isValid()?e:void 0},[c,u,f]),m=(0,o.useMemo)(function(){return p?{backgroundColor:p}:void 0},[p]),b=!!p;return(0,n.jsx)("div",{className:(0,i.A)("border-tertiary rounded-full border-solid content-none",l[void 0===d?"3.5":d],(t={},r="idle"===f?"bg-amber-500":"bg-green-500",s=!b,r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t)),"data-testid":"status-indicator-element",style:m})};s.displayName="StatusIndicator"},876987:function(e,t,r){r.d(t,{r:()=>u});var n=r(552676),o=r(946929),i=r(619803),a=r.n(i),l=r(43226),s=r.n(l),c=r(957363),u=function(e){var t=e.as,r=e.checked,i=void 0!==r&&r,l=e.onChange,u=void 0===l?s():l,d=e.disabled,f=void 0!==d&&d;return(0,n.jsx)(o.r,{as:void 0===t?"button":t,checked:i,onChange:u,disabled:f,className:a()("disabled:bg-disabled relative mb-0 flex h-4 w-6 items-center rounded-full transition-colors disabled:cursor-not-allowed",{"bg-toggle-checked":i,"bg-toggle-unchecked":!i}),children:(0,n.jsx)("span",{className:a()("text-darkest inline-block size-2.5 rounded-full transition-transform",{"bg-toggle-circle-checked translate-x-2.5":i,"bg-toggle-circle-unchecked translate-x-1":!i}),children:(0,n.jsx)(c.JO,{type:"10-circle-check",size:10,style:{width:"auto",display:"block"},className:a()("text-selector-active transition-opacity",{"opacity-30":i&&f,"opacity-100":i&&!f,"opacity-0":!i}),useWithStrokeCurrentColor:!0})})})}},729806:function(e,t,r){r.d(t,{p:()=>a});var n=r(552676),o=r(532602);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t=e.isFullRounded,r=void 0!==t&&t,a=e.size,l=void 0===a?"7":a,s=e.users;if(0===s.length)return null;var c=function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(s,3)||function(e,t){if(e){if("string"==typeof e)return i(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(s,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1],f=c[2];return(0,n.jsxs)("div",{className:"inline-flex flex-row-reverse border-inherit","data-testid":"three-user-row",children:[f&&(0,n.jsx)("div",{className:"-ml-1 inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:f.name,size:l,src:f.src})}),d&&(0,n.jsx)("div",{className:"-ml-1 inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:d.name,size:l,src:d.src})}),u&&(0,n.jsx)("div",{className:"inline-flex border-inherit","data-testid":"user-row",children:(0,n.jsx)(o.s,{hasBorder:!0,isFullRounded:r,name:u.name,size:l,src:u.src})})]})};a.displayName="ThreeUserRow"},880909:function(e,t,r){r.d(t,{V:()=>i});var n=r(552676),o=r(586735),i=function(e){var t=e.content_type;return"application/pdf"==t?(0,n.jsx)(o.Q3,{}):(null==t?void 0:t.startsWith("audio"))?(0,n.jsx)(o.Bb,{}):(null==t?void 0:t.startsWith("video"))?(0,n.jsx)(o.nk,{}):(0,n.jsx)(o.$B,{})}},71575:function(e,t,r){r.d(t,{P:()=>l});var n=r(356745);function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a=function(e){try{var t=window.location.host,r=new URL(e).host;return t===r}catch(e){return!1}},l=n.ZP.extend({inclusive:!1,addOptions:function(){var e;return i(o({},null==(e=this.parent)?void 0:e.call(this)),{openInternalLinksInCurrentTab:!1})},addAttributes:function(){var e,t=this;return i(o({},null==(e=this.parent)?void 0:e.call(this)),{target:{default:this.options.HTMLAttributes.target,renderHTML:function(e){return{target:t.options.openInternalLinksInCurrentTab&&a(e.href)?null:e.target}}}})},addPasteRules:function(){var e;return((null==(e=this.parent)?void 0:e.call(this))||[]).map(function(e){return i(o({},e),{find:function(t){var r,n="function"==typeof e.find&&null!=(r=e.find(t))?r:[];if(!n.length)return n;var o=t.match(/\{\{\s*(?![%}])([^{}"]|"[^"]*")+\s*\}\}/g);return(null==o?void 0:o.length)?n.filter(function(e){return!o.some(function(t){return t.includes(e.text)})}):n}})})},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([class *= "mention__name"])'}]}})},919625:function(e,t,r){r.d(t,{Uc:()=>o,jF:()=>i,lK:()=>a});var n=r(739792),o=function(e,t){var r=0,n=0,o=0,i=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(o+=u,e<o){n=e-(o-u);break}r++}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return{groupIndex:r,insideGroupIndex:n}},i=function(e){return({space:(0,n.t)("tiptap.extensions.entities.spaces"),post:(0,n.t)("tiptap.extensions.entities.posts"),event:(0,n.t)("tiptap.extensions.entities.events"),lesson:(0,n.t)("tiptap.extensions.entities.lessons"),course:(0,n.t)("tiptap.extensions.entities.courses")})[e]},a=function(e){var t="space"===e.type||"Space"===e.type;return"comment"===e.type||"Comment"===e.type?e.comment:t?"#"+e.name:e.name}},102386:function(e,t,r){r.d(t,{Y:()=>L,B:()=>M});var n=r(387513),o=r(103936),i=r(886331),a=r(826079),l=r(566019),s=r(205606),c=r(765010),u=r(552676),d=r(739792),f=r(852950),p=r(72727),m=r(380171),b=r(691667),y=r(322825),h=r(919625),v=function(e){var t=e.node,r=(0,p.L)(),n=r.navigateToUrl,i=r.isElectron,a=(0,y.pU)(),l=(0,b.S)()||a,s=l.sgidToObjectMap,c=l.localSgidToObjectMap,v=(void 0===c?{}:c)[t.attrs.sgid]||(void 0===s?{}:s)[t.attrs.sgid],g=function(){var e=v.url;i?n(e):window.open(e,"_blank","noreferrer")},x=(0,f.k)(g);if(!v)return(0,u.jsx)(o.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:(0,d.t)("unavailable_entity_message"),placement:"top",children:(0,u.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 font-medium",children:(0,d.t)("unavailable_entity")})})});var j="space"===v.type||"Space"===v.type,O=(0,h.lK)(v);return(0,u.jsx)(o.T5,{as:"span",children:(0,u.jsx)(m.T,{interactive:!1,content:O,placement:"top",disabled:!O,children:(0,u.jsxs)("span",{onClick:g,onKeyDown:x,role:"button",contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 px-0.5 text-left font-medium",tabIndex:0,children:[j&&"#",v.name||(0,d.t)("tiptap.entity_untitled")]})})})},g=r(275271),x=r(932699),j=r(131906),O=r(381636),w=r(93199),S=r(547144),_=r(1943),P=r(400594),D=r(619803),k=r.n(D),E=r(22319),A=r(280219),N=function(e){var t=e.entity,r=e.handleClick,n=e.isSelected,o=t||{},i=o.name,a=o.emoji,l=o.custom_emoji_url,s=o.custom_emoji_dark_url,c=(0,E.TC)().currentAppearance;return(0,u.jsx)(m.T,{interactive:!1,content:i,disabled:(null==i?void 0:i.length)<40,children:(0,u.jsxs)("button",{type:"button",className:k()("hover:bg-tertiary flex w-full cursor-pointer items-center truncate px-6 py-2.5 text-left",{"bg-tertiary":n}),onClick:r,children:["space"===t.type&&(0,u.jsx)(A.S,{className:"!text-dark mr-2 flex !h-5 !w-auto items-center",emoji:a,customEmojiUrl:l,customEmojiDarkUrl:s,appearance:c}),(0,u.jsx)(O.Z.LabelSm,{weight:"medium",children:(0,x.truncate)(i,{length:40})})]})})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var C=(0,g.forwardRef)(function(e,t){var r,n=e.query,o=e.command,i=(0,b.S)(),a=(0,y.pU)(),l=(i||a).addToLocalSgidToObjectMap,s=(0,_.O)().setPopupsVisible,c=(r=(0,g.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return T(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],f=c[1],p=(0,j.useQuery)(["entities",n],function(){return(0,w.UT)(S.av.searchV2.advanced.index({params:{query:n,per_page:10,page:1,type:"entity_list"}}))},{select:function(e){return(e.records||[]).map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={label:e.name},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})},enabled:!!n,retry:1,keepPreviousData:!0}),m=p.data,v=void 0===m?[]:m,D=p.isLoading,k=(0,x.isArray)(v)&&v.length>0,E=function(e){e&&(l({sgid:e.sgid,object:e}),o(e))};(0,g.useEffect)(function(){n&&!D&&k?s(!0):s(!1)},[k,n,D,s]);var A=Object.values((0,x.groupBy)(v,"type")),C=A.map(function(e){return e.length}),I=(0,x.flatten)(A),M=(0,g.useCallback)(function(e,t){var r=(0,h.Uc)(d,C),n=r.groupIndex,o=r.insideGroupIndex;return n===e&&o===t},[d,C]);return((0,P.h)({selectedIndex:d,setSelectedIndex:f,ref:t,items:I,selectItem:function(e){E(I[e])}}),k)?(0,u.jsx)("div",{className:"bg-primary border-primary relative max-h-[550px] min-w-[250px] max-w-[320px] space-y-6 overflow-auto rounded-lg border pt-4 text-sm shadow-md",children:A.map(function(e,t){var r=e[0].type;return(0,u.jsxs)("div",{className:"flex flex-col",children:[(0,u.jsx)("div",{className:"px-6 pb-2",children:(0,u.jsx)(O.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,h.jF)(r)})}),e.map(function(e,r){return(0,u.jsx)(N,{entity:e,handleClick:function(){E(e),(0,x.defer)(function(){return s(!1)})},isSelected:M(t,r)},e.id)})]},r)})}):(0,u.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});C.displayName="EntityList";var I=function(e){var t=e.href,r=e.command,n=(0,b.S)(),o=(0,y.pU)(),i=(n||o).addToLocalSgidToObjectMap;return(0,j.useQuery)({queryKey:[S.av.richTextFields.unfurlURLs({params:{urls:[t]}})],initialData:[],onSuccess:function(e){var t,n=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};n.type&&(i({sgid:n.sgid,object:n}),r(n.sgid))}}),null};I.displayName="EntityPaste";var M={name:"entity",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1100,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},addOptions:function(){return{portalTargetId:null,frameDocument:null}},parseHTML:function(){return[{tag:"entity-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["entity-react",(0,n.P1)(t)]},addNodeView:function(){return(0,o.fW)(v)},addProseMirrorPlugins:function(){var e=this,t=this.editor,r=this.name;return[new a.Sy({key:new a.H$("entityLinkPaste"),props:{handlePaste:function(e,n){if(!e.state.selection.empty)return!1;var i=n.clipboardData.getData("text/plain").trim(),a=RegExp("^https?://".concat(window.location.host,"/c/[-\\]_.~!*'();:@&=+$,/?%#[A-z0-9]*$"),"g").exec(i);if(!a)return!1;var l=a[0],s=e.state.selection.ranges[0].$from.pos;t.chain().focus().insertContentAt(s,{type:"text",text:l,marks:[{type:"link",attrs:{href:l,target:"_blank"}}]}).run();var u=new o.M_(I,{props:{href:l,command:function(e){(0,c.R)({editor:t,range:{from:s,to:s+l.length},name:r,attrs:{sgid:e}}),u.destroy()}},editor:t});return!0}}}),(0,i.ZP)({editor:this.editor,char:"#",allowSpaces:!0,pluginKey:new a.H$("entity"),command:function(t){var r=t.editor,n=t.range,o=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:o})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var r,n,i=(0,s.D)(e.options.portalTargetId,e.options.frameDocument),a=e.options.frameDocument||document;return{onStart:function(e){r=new o.M_(C,{props:e,editor:e.editor}),n=(0,l.ZP)(i,{getReferenceClientRect:function(){var t;return(null==(t=e.clientRect)?void 0:t.call(e))||new DOMRect(0,0,0,0)},content:r.element,appendTo:function(){return i||a.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var o;if("Space"===e.event.code){var i=t.getText();if((null==i?void 0:i.at(-1))==" ")return n[0].hide(),!1}else if("Escape"===e.event.code)return n[0].hide(),!1;return null==(o=r.ref)?void 0:o.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}},L=n.NB.create(M)},809467:function(e,t,r){r.d(t,{X:()=>S,A:()=>_});var n=r(552676),o=r(275271),i=r(932699),a=r(25593),l=r(1943),s=r(751169),c=r(691667),u=r(322825),d=r(400594),f=r(619803),p=r.n(f),m=r(664657),b=r(381636),y=r(957363),h=function(e){var t=e.member,r=e.isSelected,o=e.handleClick;return(0,n.jsxs)("button",{type:"button","data-testid":"mention-item",className:p()("hover:bg-tertiary flex w-full cursor-pointer items-center px-3 py-1.5",{"bg-tertiary":r}),onClick:o,children:[(0,n.jsx)("div",{className:"mr-3",children:"group_mention"===t.type?(0,n.jsx)(y.JO,{type:"20-members",size:20,className:"!text-darkest ml-1 mr-2"}):(0,n.jsx)(m.W,{size:"8",name:t.name,src:t.avatar_url})}),(0,n.jsx)(b.Z.LabelSm,{weight:"medium",children:t.name})]})},v=function(e){var t=e.spaceId,r=e.isDirectMessaging,n=e.isThread,o=e.editorType,i=e.isUpdate,a=e.disableGroupMentions;return"block"===o?"post":n||i||a?"thread":t?"space":r?"direct":"group_chat"},g=r(131906),x=r(93199),j=r(547144),O=function(e){var t=e.query,r=e.scope,n=void 0===r?"space":r,o=e.spaceId,a=(0,g.useInfiniteQuery)(["entities",t],function(e){var r,i=e.pageParam;return r=void 0===i?1:i,(0,x.UT)(j.av.searchV2.advanced.index({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({query:t,per_page:20,page:r,type:"mentions",mention_scope:n,order:"relevance"},o&&{space_id:o})}))},{select:function(e){var t=e.pages,r=void 0===t?[]:t;return{pages:(0,i.flatten)(r.map(function(e){return e.records})),pageParams:r.map(function(e){return e.page}),pagesList:r}},enabled:!!t,retry:1,getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),l=a.data,s=(void 0===l?{}:l).pages;return{items:void 0===s?[]:s,isLoading:a.isLoading,fetchNextPage:a.fetchNextPage,hasNextPage:a.hasNextPage}};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S="mentionList",_=(0,o.forwardRef)(function(e,t){var r,f=e.query,p=e.command,m=(0,c.S)(),b=(0,u.pU)(),y=m||b,g=y.addToLocalSgidToObjectMap,x=y.spaceId,j=y.chatProps,_=y.type,P=y.isUpdate,D=j||{},k=D.isThread,E=D.isDirectMessaging,A=D.disableGroupMentions,N=(0,l.O)().setPopupsVisible,T=O({query:f,spaceId:x,scope:v({spaceId:x,isDirectMessaging:E,isThread:k,editorType:_,isUpdate:P,disableGroupMentions:A})}),C=T.items,I=T.fetchNextPage,M=T.hasNextPage,L=T.isLoading,R=(0,i.isArray)(C)&&C.length>0,U=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return w(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),F=U[0],$=U[1],z=function(e){var t=C[e];t&&(g({sgid:t.sgid,object:t}),p(t))};return((0,o.useEffect)(function(){return $(0)},[C]),(0,d.h)({selectedIndex:F,setSelectedIndex:$,ref:t,items:C,selectItem:z}),(0,o.useEffect)(function(){f&&!L&&R?N(!0):N(!1)},[R,f,N,L]),R)?(0,n.jsx)("div",{className:"bg-primary border-primary relative flex max-h-[50vh] min-w-[250px] max-w-[320px] flex-col space-y-0.5 overflow-y-auto rounded border py-1.5 text-sm shadow-md",id:S,children:(0,n.jsx)(a.Z,{scrollThreshold:.8,next:I,hasMore:!!M,dataLength:C.length,loader:(0,n.jsx)(s.a,{center:!0}),scrollableTarget:"mentionList",children:C.map(function(e,t){return(0,n.jsx)(h,{member:e,handleClick:function(){z(t),(0,i.defer)(function(){return N(!1)})},isSelected:t===F},e.id)})})}):(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[320px] bg-transparent"})});_.displayName="MentionList"},706812:function(e,t,r){r.d(t,{R:()=>j,z:()=>O});var n=r(387513),o=r(103936),i=r(886331),a=r(826079),l=r(566019),s=r(205606),c=r(765010),u=r(809467),d=r(552676),f=r(619803),p=r.n(f),m=r(451980),b=r(441342),y=r(859834),h=r(691667),v=r(322825),g=["GroupMention","group_mention"],x=function(e){var t,r,n=e.node,i=(0,b.N3)(),a=(0,h.S)(),l=(0,v.pU)(),s=a||l,c=s.sgidToObjectMap,u=s.localSgidToObjectMap,f=s.type,x=s.disableMentionClicks,j=void 0!==x&&x,O=(void 0===u?{}:u)[n.attrs.sgid]||(void 0===c?{}:c)[n.attrs.sgid],w=(0,y.O)({public_uid:null==O?void 0:O.public_uid});if(!O)return null;var S="chat"===f,_="CommunityMember"===O.type,P=g.some(function(e){return e===O.type}),D=P||_&&O.id===(null==i?void 0:i.id),k=p()("mx-0.5 rounded-sm px-0.5 py-[1px] font-normal",P?"text-[#42464D]":"text-circle cursor-pointer",D?"bg-amber-100":"bg-indigo-100");return(0,d.jsx)(o.T5,{as:"span",children:(0,d.jsx)(m.C,{communityMemberId:O.id,name:O.name,publicUid:O.public_uid,headline:O.headline,avatarURL:O.avatar_url,side:"top",sideOffset:10,disabled:j||P,children:(0,d.jsxs)("span",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({contentEditable:!1,className:S?k:"text-link cursor-pointer font-medium"},j||P?{}:w),r=r={children:[S?"@":"",O.name]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))})})},j={name:"mention",group:"inline",inline:!0,selectable:!0,atom:!0,addOptions:function(){return{portalTargetId:null,frameDocument:null}},addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"mention-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["mention-react",(0,n.P1)(t)]},addNodeView:function(){return(0,o.fW)(x)},addProseMirrorPlugins:function(){var e=this,t=(0,s.D)(this.options.portalTargetId,this.options.frameDocument);return[(0,i.ZP)({editor:this.editor,char:"@",allowSpaces:!0,pluginKey:new a.H$("mention"),command:function(t){var r=t.editor,n=t.range,o=t.props;return(0,c.R)({editor:r,range:n,name:e.name,attrs:o})},allow:function(t){var r=t.state,n=t.range;return(0,c.k)({state:r,range:n,name:e.name})},render:function(){var r,n,i=e.options.frameDocument||document;return{onStart:function(e){r=new o.M_(u.A,{props:e,editor:e.editor});var a={top:0,left:0,width:0,height:0,right:0,bottom:0,x:0,y:0,toJSON:function(){return""}};n=(0,l.ZP)(t,{getReferenceClientRect:function(){var t;return(null==(t=e.clientRect)?void 0:t.call(e))||a},appendTo:function(){return t||i.body},content:r.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",popperOptions:{modifiers:[{name:"offset",options:{offset:[-20,0]}}]}})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var t;return"Escape"===e.event.key?(n[0].hide(),!0):null==(t=r.ref)?void 0:t.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}},O=n.NB.create(j)},400594:function(e,t,r){r.d(t,{h:()=>a});var n=r(275271),o=r(932699),i=r(1943),a=function(e){var t=e.selectedIndex,r=e.setSelectedIndex,a=e.items,l=e.ref,s=e.selectItem,c=(0,i.O)().setPopupsVisible;(0,n.useImperativeHandle)(l,function(){return{onKeyDown:function(e){switch(e.event.key){case"ArrowUp":return r((Number(t)+Number(a.length)-1)%a.length),!0;case"ArrowDown":return r((Number(t)+1)%a.length),!0;case"Enter":if(!a.length)return!1;return s(t),(0,o.defer)(function(){return c(!1)}),!0;default:return c(!1),!1}}}},[a,t,s,c,r])}},765010:function(e,t,r){r.d(t,{R:()=>n,k:()=>o});var n=function(e){var t,r=e.editor,n=e.range,o=e.name,i=e.attrs,a=r.view.state.selection.$to.nodeAfter;(null==a||null==(t=a.text)?void 0:t.startsWith(" "))&&(n.to+=1),r.chain().focus().insertContentAt(n,[{type:o,attrs:i},{type:"text",text:" "}]).run()},o=function(e){var t=e.state,r=e.range,n=e.name,o=t.doc.resolve(r.from),i=t.schema.nodes[n];return!!o.parent.type.contentMatch.matchType(i)}},263395:function(e,t,r){r.d(t,{a:()=>n});var n=r(759764).Z.extend({parseHTML:function(){return[{tag:"u"}]}})},231464:function(e,t,r){r.d(t,{l:()=>i});var n=r(552676),o=r(957363),i=function(e){var t=e.type,r=e.iconSize,i=e.className;return(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)(o.JO,{type:t,size:void 0===r?20:r,className:i,useWithFillCurrentColor:!0})})}},293006:function(e,t,r){r.d(t,{p:()=>c});var n=r(552676),o=r(392042),i=r.n(o),a=r(701168),l=r(770434),s=r(231464),c=function(e){var t=e.label,r=e.isActive,o=e.onClick,c=e.tooltipPlacement,u=e.iconType,d=e.iconSize,f=e.iconClassName,p=(0,n.jsx)("button",{type:"button",onClick:function(){return i()(o)&&o()},className:(0,a.A)("rounded-full p-1.5","text-default","hover:bg-secondary",{"bg-tertiary text-dark":r}),children:(0,n.jsx)(s.l,{type:u,iconSize:d,className:f})});return t?(0,n.jsx)(l.Y,{content:t,placement:void 0===c?"top":c,theme:"text-modifiers-tooltip",children:p}):(0,n.jsx)(n.Fragment,{children:p})}},522148:function(e,t,r){r.d(t,{E:()=>o});var n=r(387513),o=function(e){var t=e.view,r=e.state,o=e.from,i=e.to,a=r.doc,l=r.selection,s=l.empty,c=l.$from.node(),u=!a.textBetween(o,i).length&&(0,n.xh)(l),d=t.hasFocus(),f=["paragraph","heading"].includes(c.type.name);return d&&!s&&f&&!u}},513467:function(e,t,r){r.d(t,{o:()=>c});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(953529),s=r(957363),c=(0,o.forwardRef)(function(e,t){var r,i,c=e.icon,u=e.isLight,d=e.shouldAnimateSpin,f=e.className,p=e.disabled,m=e.size,b=void 0===m?20:m,y=e.isSendButton,h=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["icon","isLight","shouldAnimateSpin","className","disabled","size","isSendButton"]),v=(0,l.TC)().isDarkAppearance,g=(0,o.useMemo)(function(){return"28-message-send"===c?v?"28-message-send-dark":"28-message-send":c},[c,v]);return(0,n.jsx)("button",(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,type:"button",className:a()("flex size-7 items-center justify-center rounded",{"hover:bg-tertiary focus-visible:bg-tertiary p-1":!y,"cursor-not-allowed":p},f),disabled:p},h),i=i={children:(0,n.jsx)(s.JO,{type:g,size:b,className:a()(28===b?"h-7 !w-7":"size-5",{"text-default dark:text-dark":u,"text-light dark:text-default":!u,"animate-spin":d,"!text-brand":y&&u,"!text-disabled":y&&!u})})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))});c.displayName="MenuIconButton"},691667:function(e,t,r){r.d(t,{S:()=>i,i:()=>o});var n=r(275271),o=(0,n.createContext)(null);o.displayName="TipTapEditorContext";var i=function(){return(0,n.useContext)(o)}},422767:function(e,t,r){r.d(t,{$:()=>o});var n=r(552676),o=function(){return(0,n.jsxs)("svg",{className:"size-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},121728:function(e,t,r){r.d(t,{B7:()=>m,$j:()=>d.$,KN:()=>u});var n=r(552676),o=r(275271),i=r(739792),a=r(957363),l=r(701168),s=r(936565),c=r(86678),u=function(e){var t=e.onClose,r=(0,o.useMemo)(function(){return(0,s.zs)()},[]),u=(0,c.Y)({recordingId:r}),f=u.isRecording,p=u.status,b=u.isBusy,y=u.isError,h=u.onSubmit,v=u.setServerError;(0,c.r)({onClose:t,recordingId:r,setServerError:v});var g=(0,i.t)("tiptap.voice_message.".concat(p));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex size-full items-center justify-center rounded-lg",children:(0,n.jsxs)("div",{className:(0,l.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":f}),children:[(0,n.jsx)("button",{type:"submit",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)(a.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:g}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(m,{isRecording:f})}),(0,n.jsx)(a.JO,{type:"20-microphone",className:(0,l.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":f})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:h,disabled:b,children:b?(0,n.jsx)(d.$,{}):(0,n.jsx)(a.JO,{type:y?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},d=r(422767),f=r(404393);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t,r=e.isRecording,i=(t=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return(0,o.useEffect)(function(){if(r){var e=setInterval(function(){l(function(e){return e+1})},1e3);return function(){return clearInterval(e)}}return function(){}},[r]),(0,n.jsx)("div",{children:(0,f.He)(a)})}},99165:function(e,t,r){r.d(t,{Fq:()=>n,K2:()=>i,mq:()=>o,x4:()=>a});var n=60,o={WAITING_FOR_MIC_PERMISSION:"waiting_for_mic_permission",RECORDING:"recording",PROCESSING:"processing",UPLOADING:"uploading",UPLOAD_ERROR:"upload_error",SERVER_ERROR:"server_error"},i="VOICE_MESSAGE_PROCESSED",a="VOICE_MESSAGE_ERROR"},936565:function(e,t,r){r.d(t,{PW:()=>a,g5:()=>l,zs:()=>i});var n=r(99165);function o(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var i=function(){var e=new Uint8Array(5);return crypto.getRandomValues(e),Array.from(e,function(e){return e.toString(36)}).join("").slice(0,7)},a=function(e){return{isRecording:e===n.mq.RECORDING,isBusy:e===n.mq.UPLOADING||e===n.mq.PROCESSING,isError:e===n.mq.UPLOAD_ERROR||e===n.mq.SERVER_ERROR}},l=function(e){var t;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.permissions.query({name:"microphone"})];case 1:if("granted"!==t.sent().state)throw Error("Microphone permission not granted");return[3,3];case 2:return t.sent(),e(n.mq.WAITING_FOR_MIC_PERMISSION),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function l(e){o(a,n,i,l,s,"next",e)}function s(e){o(a,n,i,l,s,"throw",e)}l(void 0)})})()}},86678:function(e,t,r){r.d(t,{r:()=>S,Y:()=>g});var n=r(275271),o=r(934990),i=r(504615),a=r(99165),l=r(936565),s=r(932699),c=r(547144);function u(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)})}}function f(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var p={accept:"application/json","content-type":"application/json"},m=function(e,t,r){return d(function(){var n;return f(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,fetch(c.av.voiceMessages.processFileUrl(),{method:"POST",headers:p,body:JSON.stringify({object_id:e,recording_id:t})})];case 1:return o.sent(),[3,3];case 2:return n=o.sent(),(0,s.isFunction)(r)&&r(),console.error("Error processing audio file:",n),[3,3];case 3:return[2]}})})()};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){y(i,n,o,a,l,"next",e)}function l(e){y(i,n,o,a,l,"throw",e)}a(void 0)})}}function v(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var g=function(e){var t,r=e.recordingId,s=(t=(0,n.useState)(a.mq.RECORDING),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return b(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],y=s[1],g=(0,n.useRef)(null),x=(0,n.useRef)(null),j=(0,n.useRef)(null),O=(0,n.useRef)([]),w=(0,n.useRef)(null),S=(0,n.useRef)(!1),_=(0,n.useRef)(null),P=(0,l.PW)(u),D=P.isRecording,k=P.isBusy,E=P.isError,A=(0,n.useCallback)(function(){j.current&&x.current&&(j.current.stop(),j.current=null,x.current.getTracks().forEach(function(e){return e.stop()}),x.current=null,O.current=[],w.current&&clearTimeout(w.current))},[]),N=(0,n.useCallback)(function(){return h(function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,l.g5)(y),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 1:return x.current=e=t.sent(),j.current=new MediaRecorder(e),j.current.addEventListener("dataavailable",function(e){O.current.push(e.data)}),j.current.addEventListener("stop",function(){if(S.current){S.current=!1;return}y(a.mq.UPLOADING);var e=new Blob(O.current,{type:"audio/mp4"});g.current=new i.Z,g.current.use(o.Z,{shouldUseMultipart:!1,getUploadParameters:function(e){return h(function(){var t;return v(this,function(r){switch(r.label){case 0:var n;return r.trys.push([0,2,,3]),[4,(n=e.data,d(function(){var e,t;return f(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(c.av.voiceMessages.signedUploadUrl(),{method:"POST",headers:p,body:JSON.stringify({filename:n.name,contentType:n.type})})];case 1:return[4,r.sent().json()];case 2:return[2,{method:(e=r.sent()).method,url:e.url,fields:e.fields,headers:{"Content-Type":n.type}}];case 3:throw t=r.sent(),L(),console.error("Error uploading audio file:",t),t;case 4:return[2]}})})())];case 1:if(!(t=r.sent()))throw Error("Failed to get upload parameters");return[2,t];case 2:return console.error(r.sent()),[2,{url:"",error:"Failed to get upload parameters"}];case 3:return[2]}})})()}}),g.current.addFile({name:"audio.mp4",data:e}),g.current.upload(),g.current.on("upload-success",function(e,t){var n,o=null==t||null==(n=t.uploadURL)?void 0:n.split(".com/")[1].split("/")[0];o?(_.current=o,m(o,r,M),y(a.mq.PROCESSING)):L()}),g.current.on("upload-error",function(){return L()})}),j.current.start(),y(a.mq.RECORDING),w.current=setTimeout(function(){return A()},60*a.Fq*1e3),[3,3];case 2:return console.error("Error accessing microphone:",t.sent()),[3,3];case 3:return[2]}})})()},[A,r]),T=(0,n.useCallback)(function(){S.current=!0,A()},[A]),C=function(){y(a.mq.UPLOADING),g.current&&g.current.retryAll()},I=function(){y(a.mq.PROCESSING),_.current?m(_.current,r):L()},M=function(){return y(a.mq.SERVER_ERROR)},L=function(){return y(a.mq.UPLOAD_ERROR)};return(0,n.useEffect)(function(){return N(),function(){T()}},[N,T]),{setServerError:M,status:u,isRecording:D,isBusy:k,isError:E,onSubmit:function(){E?u===a.mq.UPLOAD_ERROR?C():I():A()}}},x=r(884579),j=r(441342),O=r(691667);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,o=((0,j.wh)().currentCommunityMember||{}).id,i=(0,O.S)(),l=i.localAttachments,s=i.setLocalAttachments;(0,x.I)(void 0===o?0:o,function(e){if((e.event===a.K2||e.event===a.x4)&&e.json_message.recording_id===r)if(e.event===a.K2)s(((function(e){if(Array.isArray(e))return w(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}])),t();else e.event===a.x4&&n()})}},575473:function(e,t,r){r.d(t,{V:()=>o,v:()=>n});var n={content:[{content:[],type:"paragraph"}],type:"doc"},o={chatParticipantsCount:0,disableGroupMentions:!1,isChatAdminOrModerator:!1,isDirectMessaging:!1,isThread:!1,isTyping:!1,unfurlUrls:{}}},326120:function(e,t,r){r.d(t,{T:()=>t2});var n=r(552676),o=r(275271),i=r(103936),a=r(932699),l=r(72622),s=r(342417),c=r(739792),u=r(447640),d=r(72048),f=r(954578),p=r(701168),m=r(624804),b=r(78580),y=r(293006),h=r(522148),v=r(426703),g=r(134982),x=function(e){var t=e.editor,r=e.allowBubbleMenuOverflow,o=(0,g.K)(),a=(0,v.k)("top",void 0===r||r),l=[{name:"bold",iconType:"20-character-bold",label:(0,c.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,c.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"strike",iconType:"20-character-strike",label:(0,c.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,c.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"blockquote",iconType:"16-blockquote",label:(0,c.t)("tiptap.bubble_menu.blockquote"),onClick:function(){return t.chain().focus().toggleBlockquote().run()},iconSize:16,iconClassName:"!h-5 !w-5"},{name:"link",iconType:"20-character-link",label:(0,c.t)("tiptap.bubble_menu.link"),onClick:function(){return o.show({editor:t})}}];return(0,n.jsx)("div",{children:(0,n.jsx)(i.NM,{editor:t,tippyOptions:a,shouldShow:h.E,children:(0,n.jsx)("div",{className:"bg-primary border-dark divide-primary flex gap-1 divide-x rounded-full border p-0.5 shadow-sm",children:(0,n.jsx)("div",{children:l.map(function(e){return(0,n.jsx)(y.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:t.isActive(e.name)},e),e.name)})})})})})},j=r(1943),O=r(957363),w=function(){return(0,n.jsxs)("p",{className:"text-light bg-secondary/90 absolute left-0 top-0 z-20 flex size-full items-center justify-center space-x-2 rounded-lg",children:[(0,n.jsx)(O.JO,{size:20,type:"20-attachment"}),(0,n.jsx)("span",{children:(0,c.t)("tiptap.drag_and_drop_file")})]})},S=r(952725),_=r(825252),P=r(883279),D=r(508546),k=r(85415),E=r(259928),A=r(241432),N=r(141324),T=r(981179),C=r(298524),I=r(376695),M=r(20735),L=r(926416),R=r(675117),U=r(381467),F=r(398941),$=r(495782),z=r(147514),B=r(818369),Z=r(977742),H=r(656364),q=r(387513),V=function(e){return e.editor.commands.first(function(e){var t=e.commands;return[function(){return t.splitListItem("listItem")},function(){return t.newlineInCode()},function(){return t.createParagraphNear()},function(){return t.liftEmptyBlock()},function(){return t.splitBlock()}]})},W=q.hj.create({name:"desktopKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return V({editor:e})},Enter:function(){return!0}}}}),G=q.hj.create({name:"mobileKeymap",addKeyboardShortcuts:function(){var e=this.editor;return{"Shift-Enter":function(){return V({editor:e})},Enter:function(){return V({editor:e})}}}}),J=r(263395),K=r(135218),Q=r(671963),X=r(826079),Y=r(765010),ee=r(441342),et=r(852950),er=r(963549),en=r(380171),eo=r(691667),ei=r(322825),ea=r(381636),el=r(93199),es=r(547144);function ec(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var eu=function(e,t){var r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var l=i.value;if(Object.prototype.hasOwnProperty.call(l,e)&&!0===l[e])return!0}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return!1},ed=function(e){var t,r=e.chatRoomUuid,n=e.messageId;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,el.UT)(es.av.chatRoomMessages.show({uuid:r,id:n}))];case 1:if(e.sent())return[2,!0];return[2,void 0];case 2:return console.error("No chat message access",e.sent()),[2,!1];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){ec(i,n,o,a,l,"next",e)}function l(e){ec(i,n,o,a,l,"throw",e)}a(void 0)})})()};function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ep(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ef(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ef(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eb=function(e){var t=e.node,r=em((0,o.useState)(!1),2),a=r[0],l=r[1],s=(0,ee.N3)(),u=em((0,m.k)(),2),d=u[0],f=u[1],p=(0,ei.pU)(),b=(0,eo.S)(),y=b||p,h=y.sgidToObjectMap,v=y.localSgidToObjectMap,g=b.addMessageAttachments,x=b.removeMessageAttachments,j=b.chatRoomAccessArr,O=void 0===j?[]:j,w=b.setShouldShowPrivateMessageConfirmationOnSubmit,S=b.editor,_=(void 0===v?{}:v)[t.attrs.sgid]||(void 0===h?{}:h)[t.attrs.sgid],P=(0,et.k)(function(){E()});if((0,o.useEffect)(function(){return _?(g(_),_.is_private_message&&w(!0)):l(!0),function(){x(_),(null==_?void 0:_.is_private_message)&&w(!1)}},[_]),(0,o.useEffect)(function(){if(a){var e=setTimeout(function(){l(!1)},1e3);return function(){return clearTimeout(e)}}},[a]),a)return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("tiptap.extensions.entities.loading")})});if(!_)return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{interactive:!1,content:(0,c.t)("unavailable_entity_message"),placement:"top",children:(0,n.jsx)("span",{className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 font-medium",children:(0,c.t)("unavailable_entity")})})});var D=_.data,k=_.sender,E=function(){var e;return(e=function(){var e,t,r,n,o,i,a;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:if(e=O.length>0,t=!S.isEditable&&!e,r=k.community_member_id===(null==s?void 0:s.id),n=function(){return!!S.isEditable||eu(_.id,O)},o=function(){return ed({chatRoomUuid:D.chat_room_uuid,messageId:_.id})},!r)return[3,1];return i=!0,[3,5];case 1:if(!t)return[3,3];return[4,o()];case 2:return a=l.sent(),[3,4];case 3:a=n(),l.label=4;case 4:i=a,l.label=5;case 5:return i?window.open(D.url,"_blank","noreferrer"):f(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ep(i,n,o,a,l,"next",e)}function l(e){ep(i,n,o,a,l,"throw",e)}a(void 0)})})()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{interactive:!1,content:D.url,placement:"top",children:(0,n.jsx)("span",{role:"button",id:"message-link-".concat(D.id),contentEditable:!1,className:"text-circle mx-0.5 cursor-pointer rounded-sm bg-indigo-100 p-0.5 py-[1px] font-medium",onClick:E,onKeyDown:P,tabIndex:0,children:D.label})})}),(0,n.jsx)(er.c,{isOpen:d,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:f,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,n.jsx)(ea.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},ey=r(131906),eh=r(903225),ev=r(558808),eg=function(){var e,t=(0,eh.TH)().pathname.includes("/messages"),r=(0,ee.L2)().data,n=(0,ev.z)({forEdition:!1}).currentLesson,o=void 0===n?{}:n;return{chatRoomUuid:t?null==(e=window.location.pathname)?void 0:e.split("messages/")[1]:(null==r?void 0:r.chat_room_uuid)||(null==o?void 0:o.chat_room_uuid)}},ex=function(e){var t=e.href,r=e.command,n=(0,eo.S)(),o=(0,ei.pU)(),i=(n||o).addToLocalSgidToObjectMap,a=eg().chatRoomUuid;return(0,ey.useQuery)({queryKey:[es.av.richTextFields.unfurlURLs({params:{urls:[t],open_chat_room_uuid:a}})],initialData:[],onSuccess:function(e){var t,n=null!=(t=null==e?void 0:e[0])?t:{type:"",sgid:""};n.type&&(i({sgid:n.sgid,object:n}),r(n.sgid))}}),null};ex.displayName="ChatMessagePaste";var ej=q.NB.create({name:"message",group:"inline",inline:!0,selectable:!1,atom:!0,priority:1200,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("data-sgid")},renderHTML:function(e){return e.sgid?{"data-sgid":e.sgid}:{}}}}},parseHTML:function(){return[{tag:"chat-message-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["chat-message-react",(0,q.P1)(t)]},addNodeView:function(){return(0,i.fW)(eb)},addProseMirrorPlugins:function(){var e=this.editor,t=this.name;return[new X.Sy({key:new X.H$("chatMessageLinkPaste"),props:{handlePaste:function(r,n){var o=n.clipboardData.getData("text/plain");if(!o.includes("#message_"))return!1;var a=r.state.selection.ranges[0].$from.pos;e.chain().focus().insertContentAt(a,{type:"text",text:o,marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}).run();var l=new i.M_(ex,{props:{href:o,command:function(r){(0,Y.R)({editor:e,range:{from:a,to:a+o.length},name:t,attrs:{sgid:r}}),l.destroy()}},editor:e});return!0}}})]}}),eO=r(71575),ew=r(857338),eS=function(){var e=(0,eo.S)().editedAt,t=(0,ew.H)(e||new Date),r=t.day,o=t.time;return(0,n.jsx)(i.T5,{as:"span",children:(0,n.jsx)(en.T,{content:"".concat(r," at ").concat(o),disabled:!e,children:(0,n.jsx)("span",{style:{color:"#717680"},className:"ml-0.5 cursor-default",children:(0,c.t)("edited")})})})},e_=q.NB.create({name:"editedlabel",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{default:(0,a.random)()}}},parseHTML:function(){return[{tag:"edited-label"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["edited-label",(0,q.P1)(t)]},addNodeView:function(){return(0,i.fW)(eS)},addCommands:function(){return{addEditedLabelNode:function(){return function(e){var t=e.commands;return e.editor.isEmpty?t.insertContent({type:"paragraph",content:[{type:"text",text:""},{type:"editedlabel"}]}):t.insertContent({type:"editedlabel"})}}}}}),eP=q.hj.create({name:"emojiReplacer",addInputRules:function(){return[(0,q.DS)({find:/-___- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/:'-\) $/,replace:"\uD83D\uDE02 "}),(0,q.DS)({find:/':-\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/':-D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/>:-\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/-__- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/':-\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/:'-\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/>:-\( $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/O:-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:-3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0;\^\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O;-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0;-\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:-3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/:'\) $/,replace:"\uD83D\uDE02 "}),(0,q.DS)({find:/:-D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/':\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/'=\) $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/':D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/'=D $/,replace:"\uD83D\uDE05 "}),(0,q.DS)({find:/>:\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/>;\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/>=\) $/,replace:"\uD83D\uDE06 "}),(0,q.DS)({find:/;-\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/\*-\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;-\] $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;\^\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/B-\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8-\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/B-D $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8-D $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/:-\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:\^\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:-\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/-_- $/,replace:"\uD83D\uDE11 "}),(0,q.DS)({find:/:-X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:-# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:-x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/>.< $/,replace:"\uD83D\uDE23 "}),(0,q.DS)({find:/:-O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:-o $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/O_O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/>:O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:-P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:-p $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:- $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:-b $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/>:P $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/X-P $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/x-p $/,replace:"\uD83D\uDE1C "}),(0,q.DS)({find:/':\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/'=\( $/,replace:"\uD83D\uDE13 "}),(0,q.DS)({find:/>:\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/>:\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:-\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:-. $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/>:\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:-\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:-\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:'\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/;-\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/#-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/%-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/X-\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/>:\( $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/0:3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/0:\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O=\) $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/O:3 $/,replace:"\uD83D\uDE07 "}),(0,q.DS)({find:/<\/3 $/,replace:"\uD83D\uDC94 "}),(0,q.DS)({find:/:D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/=D $/,replace:"\uD83D\uDE03 "}),(0,q.DS)({find:/;\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/\*\) $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;\] $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/;D $/,replace:"\uD83D\uDE09 "}),(0,q.DS)({find:/B\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/8\) $/,replace:"\uD83D\uDE0E "}),(0,q.DS)({find:/:\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/=\* $/,replace:"\uD83D\uDE18 "}),(0,q.DS)({find:/:\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/=\] $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/=\) $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/:\] $/,replace:"\uD83D\uDE42 "}),(0,q.DS)({find:/:X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=X $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:x $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/=# $/,replace:"\uD83D\uDE36 "}),(0,q.DS)({find:/:O $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:o $/,replace:"\uD83D\uDE2E "}),(0,q.DS)({find:/:P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/=P $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:p $/,replace:"\uD83D\uDE1B  "}),(0,q.DS)({find:/=p $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:b $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/d: $/,replace:"\uD83D\uDE1B "}),(0,q.DS)({find:/:\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=\/ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=\\ $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:L $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/=L $/,replace:"\uD83D\uDE15 "}),(0,q.DS)({find:/:\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/:\[ $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/=\( $/,replace:"\uD83D\uDE1E "}),(0,q.DS)({find:/;\( $/,replace:"\uD83D\uDE22 "}),(0,q.DS)({find:/D: $/,replace:"\uD83D\uDE28 "}),(0,q.DS)({find:/:\$ $/,replace:"\uD83D\uDE33 "}),(0,q.DS)({find:/=\$ $/,replace:"\uD83D\uDE33 "}),(0,q.DS)({find:/#\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/%\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/X\) $/,replace:"\uD83D\uDE35 "}),(0,q.DS)({find:/:@ $/,replace:"\uD83D\uDE20 "}),(0,q.DS)({find:/<3 $/,replace:" "}),(0,q.DS)({find:/\/shrug $/,replace:"\xaf\\_()_/\xaf"})]}}),eD=r(102386),ek=r(706812);function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eN(e){return function(e){if(Array.isArray(e))return eE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eE(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eE(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Promise.all([r.e("5622"),r.e("7813")]).then(r.bind(r,488921)).then(function(e){e.default.highlightAll()}).catch(console.error);var eT=function(e){var t=e.placeholder,r=e.maxLength,n=e.menubarProps,o=e.type,i=e.shouldDisableEntities,a=void 0!==i&&i,s=e.shouldDisableMentions,c=e.portalTargetId,u=void 0===c?null:c,d=e.shouldSupportCodeBlocks,f=e.shouldSupportTables,p=e.frameDocument,m=void 0===p?null:p,b="workflow"==o;return eN(void 0!==f&&f?[U.ZP.configure({resizable:!1}),F.Z,$.Z,z.Z]:[]).concat(eN(void 0!==d&&d?[k.Z.configure({lowlight:Z.$,HTMLAttributes:{spellCheck:"false"}})]:[]),[E.Z,M.Z,B.Z,_.ZP,S.ZP,C.ZP,R.ZP,N.ZP.configure({HTMLAttributes:{class:"highlight-class"}}),J.a,e_,T.Z,l.isMobile?G:W,eO.P.configure({openOnClick:!1,autolink:!0,validate:function(e){return!(n.dynamicVariables||Q.q).map(function(e){return e.label.replace(/{{|}}/g,"")}).some(function(t){return t.includes(e)})}}),L.Z.configure({placeholder:t,emptyEditorClass:"is-editor-empty"}),eA({},!b&&!(void 0!==s&&s)&&ek.z.configure({portalTargetId:u,frameDocument:m})),eA({},!a&&eD.Y.configure({portalTargetId:u,frameDocument:m})),eA({},!a&&ej),A.Z.extend({addKeyboardShortcuts:function(){return{}}}),eP,D.Z.configure({limit:void 0===r?null:r}),P.ZP,I.ZP,K.E.configure({type:o}),H.r.configure({portalTargetId:u,frameDocument:m})])},eC=r(275753),eI=r(39905),eM=r(645111),eL=r(205606),eR=r(228469),eU=r(513467),eF=r(121728);function e$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ez=function(e){var t,r=e.isLight,i=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e$(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e$(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return(0,eR.X)()?(0,n.jsxs)("div",{children:[(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.voice_message.action"),dataTestId:"add_voice_message",children:(0,n.jsx)(eU.o,{type:"submit",onClick:function(){return l(!0)},"aria-label":(0,c.t)("tiptap.voice_message.action"),icon:"20-mic-2",isLight:r,iconClassName:"relative top-[2px] left-[2px]"})}),a&&(0,n.jsx)(eF.KN,{onClose:function(){return l(!1)}})]}):null},eB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"message-scroll-view",t=document.getElementById(e);t&&(t.scrollTop=t.scrollHeight)},eZ=function(e){var t=!1;try{e.state.doc.descendants(function(e){"editedlabel"==e.type.name&&(t=!0)})}catch(e){console.error(e)}return t},eH=r(383294),eq=r(230967),eV=r(321405),eW=r(25593),eG=r(544477),eJ=r(18317);function eK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eQ=function(e){var t=e.gif,r=e.close,o=(0,eo.S)(),i=o.localAttachments,a=void 0===i?[]:i,l=o.setLocalAttachments;return(0,n.jsx)("button",{type:"submit",onClick:function(){var e="video"===t.type;l(((function(e){if(Array.isArray(e))return eK(e)})(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return eK(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eK(e,t)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{url:t.images.original.url,id:t.id,content_type:e?"video/mp4":"image/gif",toUpload:!0,progress:0}])),r()},"aria-label":t.title,children:(0,n.jsx)("img",{loading:"eager",alt:"",width:180,src:t.images.preview_gif.url})})},eX=function(e){var t=e.query,r=e.setQuery;return(0,n.jsx)("div",{className:"p-2 pb-0",children:(0,n.jsx)("input",{type:"text",placeholder:c.ZP.t("tiptap.search_giphy"),onChange:function(e){return r(e.target.value)},value:t||"",className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})};function eY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e0=function(e){var t,r=e.close,i=(t=(0,o.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eY(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eY(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],s=i[1],u=(0,ey.useInfiniteQuery)(["chat-members-search",l],function(e){var t=e.pageParam,r=void 0===t?1:t;return l?eJ.y(l,{offset:r,limit:10}):eJ.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),d=u.data,f=u.fetchNextPage,p=u.hasNextPage,m=u.isLoading,b=(0,o.useMemo)(function(){var e;return(0,a.uniqBy)((0,a.flatten)(null==d||null==(e=d.pages)?void 0:e.map(function(e){return e.data})),"id")},[d]);return(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-[360px] flex-col space-y-1 rounded border shadow","data-testid":"giphy-picker",children:[(0,n.jsx)(eX,{query:l,setQuery:s}),(0,n.jsxs)("div",{className:"h-[360px]",children:[!b.length&&(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:m?(0,n.jsx)(O.JO,{type:"loader"}):(0,n.jsx)("span",{children:(0,c.t)("tiptap.no_results_found")})}),!!b.length&&(0,n.jsx)(eW.Z,{dataLength:b.length,next:f,hasMore:!!p,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-2 flex justify-center py-3",children:(0,n.jsx)(O.JO,{type:"loader"})}),className:"mb-2 p-2",children:(0,n.jsx)(eG.Z,{columnsCount:2,gutter:"8",children:b.map(function(e){return(0,n.jsx)(eQ,{gif:e,close:r},e.id)})})})]})]})};function e1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e1(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e3=function(e){var t=e.isLight,r=e2((0,o.useState)(null),2),i=r[0],a=r[1],l=e2((0,o.useState)(null),2),s=l[0],d=l[1],f=(0,eV.D)(i,s,{placement:"top",modifiers:[{name:"offset",enabled:!0,options:{offset:[80,10]}}]}),p=f.styles,m=f.attributes,b=(0,eo.S)().portalTargetId,y=(0,u.D)().frameDocument,h=(0,eL.D)(b,y);return(0,n.jsx)(eH.J,{className:"relative",children:function(e){var r,o,i=e.open,l=e.close;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_gif"),dataTestId:"add_gif_message",children:(0,n.jsx)(eH.J.Button,{as:eU.o,ref:a,isLight:t,icon:"20-gif-2","aria-label":(0,c.t)("tiptap.add_gif")})}),i&&(0,eq.createPortal)((0,n.jsx)(eH.J.Panel,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({static:!0,className:"z-[1060]",ref:d,style:p.popper},m.popper),o=o={children:(0,n.jsx)(e0,{close:l})},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r)),h||(null==y?void 0:y.body)||document.body)]})}})},e6=function(e){var t=e.editor,r=e.handleSubmit,o=e.openFilePicker,i=e.isUploading,a=e.editorHasNoContent,l=e.isFocused,s=e.isSubmitting,d=e.isUpdate,f=e.isLiveStream,m=e.submitButtonLabel,b=e.submittingLabel,y=e.portalTargetId,h=(0,ee.Cc)().record.voice_messages_enabled,v=(0,eC.T)(),g=(0,u.D)(),x=g.frameDocument,j=g.isInFrame,O=y?(0,eL.D)(y,x):(null==x?void 0:x.body)||document.body,w=l||document.getElementById("tiptapMessageTextBox")===document.activeElement||!a();return(0,n.jsxs)("div",{className:(0,p.A)("flex items-end justify-between",m?"mt-3":"mt-4"),children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[v&&(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_image"),dataTestId:"add_image_message",children:(0,n.jsx)(eU.o,{onClick:o,"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-image-2",isLight:w})}),(0,n.jsx)(eM.c,{portalTo:O,placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).insertContent(" ").run()},targetWrapperClassName:"!flex",popoverPanelClassName:j?"max-w-full":void 0,target:(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_emoji"),dataTestId:"add_emoji_message",children:(0,n.jsx)(eU.o,{"aria-label":(0,c.t)("tiptap.add_image"),icon:"20-reaction",isLight:w})})}),(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(eU.o,{onClick:function(){t.chain().focus().insertContent(" #").run()},"aria-label":(0,c.t)("add_entity"),icon:"20-hash",isLight:w})}),(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.add_mention"),dataTestId:"add_mention_message",children:(0,n.jsx)(eU.o,{onClick:function(){t.chain().focus().insertContent(" @").run()},"aria-label":(0,c.t)("add_mention"),icon:"20-mention",isLight:w})}),v&&(0,n.jsx)(e3,{isLight:w}),v&&(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("tiptap.attach_file"),dataTestId:"add_attachment_message",children:(0,n.jsx)(eU.o,{onClick:o,"aria-label":(0,c.t)("tiptap.attach_file"),icon:"20-attachment",isLight:w})}),h&&!(void 0!==f&&f)&&!d&&(0,n.jsx)(ez,{isLight:w})]}),m?(0,n.jsx)(eI.z,{type:"submit",variant:"circle",onClick:r,disabled:s||a()||i,small:!0,className:"!px-4",children:s&&b||m}):(0,n.jsx)(en.T,{placement:"bottom",interactive:!1,content:(0,c.t)("chat_space.send_message"),dataTestId:"submit_button_message",children:(0,n.jsx)(eU.o,{type:"submit",onClick:r,disabled:s||a()||i,id:"tiptap-send","aria-label":(0,c.t)("chat_space.send_message"),icon:i||s?"loader":"28-message-send",size:i||s?20:28,isLight:!a(),shouldAnimateSpin:i||s,isSendButton:!0})})]})},e5=r(66588),e8=r(279460),e7=r(936353),e9=r(412367),e4=r(763793),te=r(437614),tt=r(590996),tr=r(880909),tn=function(e){var t=e.attachment;return(0,n.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,n.jsx)("div",{className:"mb-1 flex items-center",children:(0,n.jsx)(tr.V,{content_type:t.content_type})}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)("div",{className:"truncate text-left",children:(0,n.jsx)(ea.Z.LabelSm,{weight:"semibold",children:t.filename})}),(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(ea.Z.LabelXs,{weight:"regular",children:(0,tt.s)(t.byte_size)})})]})]})},to=r(71068),ti=function(e){var t=e.queuedForCancellation,r=e.removeCurrentAttachment,o=e.progress,i=e.isUploading;return(0,n.jsxs)("button",{type:"button",onClick:function(e){t.current=!0,r(),e.preventDefault()},className:(0,p.A)("group/close-button bg-primary absolute -right-3 -top-3 flex cursor-pointer items-center justify-center rounded-full",{"hidden group-hover:block":!i}),children:[i&&(0,n.jsx)("div",{className:"m-1 flex !h-4 !w-4 items-center justify-center group-hover/close-button:hidden",children:(0,n.jsx)(to.D,{percentage:o,size:14,strokeWidth:2})}),(0,n.jsx)(en.T,{content:c.ZP.t("tiptap.remove_attachment"),children:(0,n.jsx)("div",{className:(0,p.A)({"hidden group-hover/close-button:block":i}),children:(0,n.jsx)(O.JO,{type:"16-close-rounded",className:"m-1 !h-4 !w-4",size:16})})})]})},ta=function(e){var t=e.url;return(0,n.jsx)("button",{type:"submit",className:"from-primary pointer-events-none absolute right-0 -my-2 hidden h-full items-center rounded-md bg-gradient-to-l px-1 pl-36 group-hover:flex",children:(0,n.jsx)("a",{className:"bg-primary pointer-events-auto p-2",href:t,download:!0,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(O.JO,{type:"download"})})})},tl=function(e){var t,r=e5.$.isImage(e.content_type),n=!!(null==(t=e.metadata)?void 0:t.voice_message),o=!n&&e5.$.isNativelySupportedVideo(e.content_type),i=!n&&(0,e5.c)(e.content_type);return{isImage:r,isVoiceMessage:n,isVideo:o,doesAttachmentSupportGalleryPreview:i,isImageOrVideo:r||o}};function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tc(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function tu(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tc(i,n,o,a,l,"next",e)}function l(e){tc(i,n,o,a,l,"throw",e)}a(void 0)})}}function td(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tp(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(e,t){if(e){if("string"==typeof e)return ts(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ts(e,t)}}function tm(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var tb=function(e){var t,r,i,a,l,s=e.attachmentsForGalleryPreview,u=e.attachment,d=e.index,f=e.shouldShowEnlarged,m=(0,eo.S)(),b=m.disableAttachmentClicks,y=void 0!==b&&b,h=m.editor,v=m.setLocalAttachments,g=m.shouldScrollIntoView,x=(0,e9.T)().show,j=(0,e7.Op)().scrollerId,w=tf((0,o.useState)(0),2),S=w[0],_=w[1],P=tf((0,o.useState)(!1),2),D=P[0],k=P[1],E=tf((0,o.useState)(!1),2),A=E[0],N=E[1],T=(0,o.useRef)(!1),C=u.image_variants||{},I=(0,o.useCallback)(function(e){v(function(t){var r=function(e){if(Array.isArray(e))return ts(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tp(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return r[d]=e,r})},[d,v]),M=function(e){var t=e.url,r=e.filename,n=e.content_type;return tu(function(){var e,o;return tm(this,function(i){switch(i.label){case 0:return[4,fetch(t)];case 1:return e=i.sent(),o=File.bind,[4,e.blob()];case 2:return[2,new(o.apply(File,[void 0,[i.sent()],r,{type:n}]))]}})})()},L=(0,o.useCallback)(function(){return tu(function(){var e,t;return tm(this,function(r){switch(r.label){case 0:if(N(!0),t=u.file)return[3,2];return[4,M({url:u.url,filename:"".concat(u.id,".").concat(u.content_type.split("/")[1]),content_type:u.content_type})];case 1:t=r.sent(),r.label=2;case 2:return e=t,new e8.TX(e,(0,es.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",function(t){T.current&&(e.abort(),N(!1)),_(t.loaded/t.total*100)})}}).create(function(e,t){if(e)throw Error("Direct upload failed: ".concat(String(e)));var r,n,o=(0,es.Gd)({signed_id:t.signed_id,filename:t.filename});I((r=td({},t),n=n={url:o,uploaded:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r)),N(!1)}),[2]}})})()},[u,I]);(0,o.useEffect)(function(){u.toUpload&&!A&&L()},[u,A,L]);var R=tl(u),U=R.isImage,F=R.isVoiceMessage,$=R.isVideo,z=R.doesAttachmentSupportGalleryPreview,B=R.isImageOrVideo,Z=u.url;return h.isEditable||(Z=f?null!=(a=C.small)?a:u.url:null!=(l=C.thumbnail)?l:u.url),Z=null!=Z?Z:null==u?void 0:u.url,(0,n.jsxs)("button",{type:"button",onClick:function(){return!y&&!h.isEditable&&z&&x({attachments:s,startIndex:s.findIndex(function(e){return e.url==u.url})})},className:(0,p.A)("group relative flex max-w-[264px]",{"cursor-pointer":!y,"cursor-default":y,"h-[60px] min-w-[150px] px-4 py-2":!B&&!F,"h-[60px] w-[60px]":B&&!f&&!F,"h-[200px] w-auto min-w-[150px]":B&&f&&!F,"border-tertiary bg-tertiary group gap-2 rounded-md border":!F}),children:[h.isEditable&&(0,n.jsx)(ti,{isUploading:A,progress:S,queuedForCancellation:T,removeCurrentAttachment:function(){v(function(e){return e.filter(function(e,t){return t!==d})})}}),$&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(te.W,{src:u.url,type:u.content_type,poster:null==u||null==(t=u.image_variants)?void 0:t.thumbnail,className:"h-full rounded-md border object-cover",controls:!1,preload:"none"}),f?(0,n.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center rounded bg-black/50 py-0.5 pr-2",children:[(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"size-4 text-white"}),(0,n.jsx)(ea.Z.BodyXs,{color:"text-white",weight:"font-medium",children:(0,c.t)("tiptap.video")})]}):(0,n.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center rounded bg-black/50 px-0.5 py-1",children:(0,n.jsx)(O.JO,{type:"12-play",size:12,className:"text-white"})})]}),!z&&!h.isEditable&&!F&&(0,n.jsx)(ta,{url:u.url}),U&&(0,n.jsx)("img",td({loading:"eager",alt:(0,c.t)("tiptap.attachment_previews.image"),className:(0,p.A)("rounded-md object-cover",D?"border-primary size-full border":"hidden"),src:Z},{onLoad:function(){k(!0),g&&eB(j)},onError:function(){k(!0)}})),F&&(0,n.jsx)(e4.z,{src:u.url,controls:["play","progress","current-time"],isVoiceMessage:F,transcriptionId:null==(r=u.metadata)?void 0:r.transcript_id,transcriptionPreview:null==(i=u.metadata)?void 0:i.transcript_preview}),!z&&!F&&(0,n.jsx)(tn,{attachment:u})]})},ty=function(e){var t=e.attachmentsList,r=(0,eo.S)().editor;if(!t.length)return null;var o=1===t.length,i=t.filter(function(e){return(0,e5.c)(e.content_type)});return(0,n.jsx)("div",{className:(0,p.A)("flex items-center gap-2 pb-2",{"flex-wrap":!r.isEditable}),children:t.map(function(e,t){return(0,n.jsx)(tb,{index:t,attachmentsForGalleryPreview:i,attachment:e,shouldShowEnlarged:!r.isEditable&&o},e.signed_id)})})},th=function(e){var t=e.onRemove;return(0,n.jsx)("button",{type:"button",className:"text-default bg-primary group absolute -right-3 -top-3 hidden cursor-pointer items-center justify-center rounded-full group-hover:flex",onClick:t,"aria-label":(0,c.t)("tiptap.attachment_previews.remove_link_preview"),children:(0,n.jsx)(en.T,{content:(0,c.t)("tiptap.attachment_previews.remove_link_preview"),children:(0,n.jsx)(O.JO,{type:"16-close-rounded","aria-hidden":!0,size:16,className:"m-1 !h-4 !w-4"})})})};function tv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tg=function(e){var t=e.url,r=e.meta,o=(0,eo.S)(),i=o.editor,a=o.setLinkPreviews,l=o.linkPreviews,s=o.isWorkflowType;if(!(t&&r.title))return null;var u=i.isEditable;return(0,n.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:(0,p.A)("border-primary bg-primary hover:border-dark hover:bg-tertiary group relative flex min-w-[200px] max-w-full shrink-0 flex-col rounded-md border px-4 py-3 sm:w-[304px]",u?"h-[68px] w-[274px] md:w-[328px]":"max-h-[114px] w-[286px] md:w-[363px]"),children:[(0,n.jsxs)("div",{className:"text-default flex items-center pb-1.5",children:[r.favicon?(0,n.jsx)("img",{loading:"eager",alt:"",src:r.favicon,className:"mr-1.5 size-4"}):(0,n.jsx)(O.JO,{type:"12-globe",size:12,className:"mr-1 !w-3"}),(0,n.jsx)("div",{className:"flex-1 truncate text-xs font-semibold",children:r.site_name||function(e){try{return new URL(e).hostname}catch(t){return null==e?void 0:e.replace(/(^\w+:|^)\/\//,"")}}(t)})]}),u?(0,n.jsxs)("div",{className:"mt-0.5 flex w-full flex-row items-center truncate",children:[(0,n.jsx)("div",{className:"text-dark text-sm font-semibold",children:r.title}),r.description&&(0,n.jsxs)("div",{className:"text-light line-clamp-1 truncate text-sm",children:[(0,n.jsx)("span",{className:"px-1",children:(0,c.t)("typing_cursor")}),(0,n.jsx)("span",{children:r.description})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-dark mb-0.5 truncate text-sm font-semibold",children:r.title}),r.description&&(0,n.jsx)("div",{className:"text-light line-clamp-2 flex-1 text-sm",children:r.description})]}),!s&&u&&(0,n.jsx)(th,{onRemove:function(e){e.preventDefault(),e.stopPropagation(),l&&Object.keys(l).includes(t)&&a(function(e){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tv(e,t,r[t])})}return e}({},e),n=null!=(n=tv({},t,!1))?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r})}})]})},tx=r(664657),tj=r(308683);function tO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tw(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var tS=function(e){var t,r=e.message,o=(0,ee.N3)(),i=(t=(0,m.k)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tO(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tO(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1],s=(0,eo.S)()||{},u=s.chatRoomAccessArr,d=void 0===u?[]:u,f=s.editor,b=r.sender,y=r.data,h=y.url,v=y.chat_room_uuid,g=y.message_body,x=y.sent_at,j=y.attachments_count,O=void 0===j?0:j,w=r.sender.community_member_id,S=r.id,_=(0,tj.TF)(x),P=function(){var e;return(e=function(){var e,t,r,n,i,a,s;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:if(e=d.length>0,t=!f.isEditable&&!e,r=w===(null==o?void 0:o.id),n=function(){return!!f.isEditable||eu(S,d)},i=function(){return ed({chatRoomUuid:v,messageId:S})},!r)return[3,1];return a=!0,[3,5];case 1:if(!t)return[3,3];return[4,i()];case 2:return s=c.sent(),[3,4];case 3:s=n(),c.label=4;case 4:a=s,c.label=5;case 5:return a?window.open(h,"_blank","noreferrer"):l(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tw(i,n,o,a,l,"next",e)}function l(e){tw(i,n,o,a,l,"throw",e)}a(void 0)})})()},D=(0,et.k)(function(){P()});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",onClick:P,onKeyDown:D,className:(0,p.A)("bg-primary border-primary hover:border-dark focus-visible:border-secondary hover:bg-tertiary relative flex max-w-full shrink-0 cursor-pointer flex-row space-x-3 rounded-md border px-4 py-3 text-left sm:w-[304px]",f.isEditable?"w-[274px] md:w-[328px]":"w-[286px] md:w-[363px]"),children:[(0,n.jsx)(tx.W,{src:b.avatar_url,name:b.name,size:"9"}),(0,n.jsxs)("div",{className:"max-w-[calc(100%-48px)]",children:[(0,n.jsxs)("div",{className:"mb-0.5 flex flex-row space-x-2 truncate",children:[(0,n.jsx)(ea.Z.LabelSm,{weight:"semibold",children:b.name}),(0,n.jsx)(ea.Z.BodyXs,{color:"text-light",children:_})]}),g&&(0,n.jsx)("div",{className:"text-default line-clamp-2 flex-1",children:g}),O>0&&(0,n.jsx)(ea.Z.BodySm,{color:"text-light",children:(0,c.t)("bookmarks.attachments_count",{count:O})})]})]}),(0,n.jsx)(er.c,{isOpen:a,title:(0,c.t)("messaging.actions.unable_to_open_link.title"),onConfirm:l,confirmVariant:"danger",confirmText:(0,c.t)("close"),children:(0,n.jsx)(ea.Z.BodyMd,{children:(0,c.t)("messaging.actions.unable_to_open_link.description")})})]})},t_=function(e){var t=e.linkHrefs,r=e.setHasLinks,n=(0,eo.S)(),i=n.linkPreviews,a=n.setLinkPreviews,l=n.editor,s=function(e){return e.title||e.description},c=function(e){a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},Object.keys(i).filter(function(e){return t.includes(e)}).reduce(function(e,t){return e[t]=i[t],e},{}),e.filter(function(e){return!Object.keys(i).includes(e.url)}).reduce(function(e,t){return e[t.url]=!0,e},{})))},u=(0,ey.useQuery)(["unfurlURLs",t],function(){return(0,el.UT)(es.av.richTextFields.unfurlURLs({params:{urls:t}}))},{enabled:t.length>0,keepPreviousData:!0,initialData:[],onSuccess:function(e){r(e.filter(function(e){return t.includes(e.url)&&s(e)}).length>0)}}),d=u.data,f=void 0===d?[]:d,p=u.isLoading;(0,o.useEffect)(function(){l.isEditable&&c(f.filter(function(e){return t.includes(e.url)&&s(e)}))},[f,l.isEditable,t.length]);var m=f.filter(function(e){return!Object.keys(i).includes(e.url)||Object.keys(i).some(function(t){return t===e.url&&!0===i[t]})});return{unfurledLinks:f,isLoading:p,filteredUnfurledLinks:m}},tP=r(621775),tD=function(e){var t=e.linkMarks,r=e.messageAttachments,i=e.hasAttachments,l=e.setHasLinks,s=e.isEditMode,c=(0,eo.S)().shouldScrollIntoView,u=(0,a.uniq)(t.map(function(e){var t;return null==e||null==(t=e.attrs)?void 0:t.href})),d=(0,o.useMemo)(function(){return(0,tP.D)()},[]),f=t_({linkHrefs:u.map(function(e){return null==e?void 0:e.replace(/\/$/,"")}),setHasLinks:l}),m=f.filteredUnfurledLinks,b=f.isLoading;return((0,o.useEffect)(function(){c&&m.length>0&&!b&&eB()},[m,b,c]),!(m.length||r.length)||b)?null:(0,n.jsxs)(n.Fragment,{children:[i&&s&&(0,n.jsx)("div",{className:"border-primary mx-0.5 h-16 w-px rounded-lg border-l-2"}),(0,n.jsxs)("div",{className:(0,p.A)("flex w-full gap-2 pb-2",{"flex-wrap":!i,"flex-col":!s}),children:[r.map(function(e){return(0,n.jsx)(tS,{message:e},e.id)}),m.map(function(e){var t=e.url,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["url"]);return(0,n.jsx)(tg,{url:t,meta:r},"".concat(t,"-").concat(d))})]})]})};function tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tN=function(e){var t=e.editor,r=e.type;try{var n=t.getJSON().content,o=[];return((null==n?void 0:n.filter(function(e){return"paragraph"==e.type}))||[]).forEach(function(e){var t;null==e||null==(t=e.content)||t.forEach(function(e){"hardBreak"!==e.type&&e.marks&&e.marks.forEach(function(e){var t;e.type==r&&(o=(t=o,function(e){if(Array.isArray(e))return tk(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return tk(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tk(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))})})}),o}catch(e){return console.error("Error while fetching marks by type ".concat(r),e),[]}},tT=function(e){var t=e.marks,r=!1;return{marks:t.map(function(e){return"link"==e.type&&"_blank"!==e.attrs.target&&"_self"!==e.attrs.target?(r=!0,tA(tE({},e),{attrs:tA(tE({},e.attrs),{target:"_blank"})})):e}),isMarkUpdated:r}},tC=function(e){var t=e.editor;try{var r=!1,n=t.getJSON().content,o=(void 0===n?[]:n).map(function(e){if("paragraph"==e.type){var t,n=null==(t=e.content)?void 0:t.map(function(e){if("text"===e.type&&e.marks){var t=tT({marks:e.marks}),n=t.marks,o=t.isMarkUpdated;return r=r||o,tA(tE({},e),{marks:n})}return e});return tA(tE({},e),{content:n})}return e});r&&t.commands.setContent(o)}catch(e){console.error("Error while updating link marks",e)}};function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tM=function(){var e,t=(0,eo.S)(),r=t.editor,i=t.attachments,a=t.localAttachments,l=t.messageAttachments,s=r.isEditable?void 0===a?[]:a:void 0===i?[]:i,c=tN({editor:r,type:"link"}),u=Number(c.length),d=Number(null==s?void 0:s.length),f=Number(null==l?void 0:l.length),m=(e=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tI(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tI(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],y=m[1],h=d>0;if((0,o.useEffect)(function(){y(u>0)},[u]),!h&&!b&&!(f>0))return null;var v=u+d+f,g=r.isEditable;return(0,n.jsxs)("div",{className:(0,p.A)("flex gap-x-2",g?"items-center pt-4":"flex-col items-start pt-2",{"overflow-x-auto":v>2}),children:[(0,n.jsx)(ty,{attachmentsList:s}),(0,n.jsx)(tD,{linkMarks:c,setHasLinks:y,messageAttachments:l,hasAttachments:h,isEditMode:g})]})},tL=r(575473),tR=r(151960),tU=function(e,t){var r=e.replace(/\r\n?|\n/g,"\n").split("\n"),n=[];r.forEach(function(e,o){if(e.length>0){var i,a={type:"paragraph",content:[{type:"text",text:e}]};(null==(i=r[o+1])?void 0:i.length)==0&&a.content.push({type:"hardBreak"}),n.push(tR.NB.fromJSON(t.doc.type.schema,a))}});var o=tR.HY.from(n);return tR.p2.maxOpen(o)};function tF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function t$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var tz=function(e){var t=e.editor;t.isEmpty||tC({editor:t})},tB=function(e){try{if(!e)return;var t=e.content.map(function(e){if("paragraph"==e.type){var t,r=null==(t=e.content)?void 0:t.filter(function(e){return"text"!==e.type||""!==e.text});return t$(tF({},e),{content:r})}return e});return t$(tF({},e),{content:t})}catch(e){console.error("Error while sanitizing jsonContent",e)}},tZ=function(e){if(!e||e.isEmpty)return!0;var t=e.getJSON();if(!t)return!0;var r=(t||{}).content;return!r||!r.some(function(e){if("paragraph"===e.type){var t;return null==(t=e.content)?void 0:t.some(function(e){return"mention"===e.type||"entity"===e.type||"message"===e.type})}})},tH=r(683461);function tq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tG(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tG(e,t){if(e){if("string"==typeof e)return tq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tq(e,t)}}var tJ=function(e){var t=e.initialValue,r=tW((0,m.k)(!1),3),n=r[0],i=r[2],a=tW((0,o.useState)(void 0===t?{}:t),2),l=a[0],s=a[1],c=tW((0,o.useState)([]),2),u=c[0],d=c[1];return{isFocused:n,setIsFocused:i,localSgidToObjectMap:l,setLocalSgidToObjectMap:s,addToLocalSgidToObjectMap:function(e){var t=e.sgid,r=e.object;s(function(e){var n,o;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tV(e,t,r[t])})}return e}({},e),o=null!=(o=tV({},t,r))?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n})},messageAttachments:u,setMessageAttachments:d,addMessageAttachments:function(e){d(function(t){return t.some(function(t){return t.id===e.id})?t:((function(e){if(Array.isArray(e))return tq(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tG(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e])})},removeMessageAttachments:function(e){d(function(t){return e?t.filter(function(t){return t.id!==e.id}):t})}}};function tK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tQ(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function tX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function tY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||t1(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t0(e){return function(e){if(Array.isArray(e))return tK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t1(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t1(e,t){if(e){if("string"==typeof e)return tK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tK(e,t)}}var t2=function(e){var t,r,y,h,v=e.autofocus,g=e.chatProps,O=void 0===g?tL.V:g,S=e.chatRoomAccessArr,_=e.className,P=e.disabled,D=e.editable,k=void 0===D||D,E=e.editedAt,A=e.editorClassName,N=e.editorRef,T=e.isChatSpace,C=e.isLiveStream,I=e.isUpdate,M=void 0!==I&&I,L=e.maxLength,R=e.menuBarComponent,U=e.menubarProps,F=void 0===U?{}:U,$=e.messageBoxClassName,z=e.onBlur,B=e.onChange,Z=e.onDelete,H=e.onFocus,q=e.onSubmit,V=e.placeholder,W=void 0===V?(0,c.t)("message_placeholder"):V,G=e.portalTargetId,J=e.rich_text_body,K=e.shouldDisableEntities,Q=e.shouldDisableMentions,X=e.shouldRefetch,Y=e.shouldScrollIntoView,ee=e.shouldShowPreviewBlocks,et=void 0===ee||ee,er=e.shouldShowTextModifiersMenu,en=e.shouldSupportCodeBlocks,ei=e.shouldSupportTables,ea=e.showMenuBar,el=e.spaceId,es=e.submitOnEnter,ec=e.type,eu=void 0===ec?"chat":ec,ed=e.value,ef=e.isMediaUploadAllowed,ep=void 0===ef||ef,em=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["autofocus","chatProps","chatRoomAccessArr","className","disabled","editable","editedAt","editorClassName","editorRef","isChatSpace","isLiveStream","isUpdate","maxLength","menuBarComponent","menubarProps","messageBoxClassName","onBlur","onChange","onDelete","onFocus","onSubmit","placeholder","portalTargetId","rich_text_body","shouldDisableEntities","shouldDisableMentions","shouldRefetch","shouldScrollIntoView","shouldShowPreviewBlocks","shouldShowTextModifiersMenu","shouldSupportCodeBlocks","shouldSupportTables","showMenuBar","spaceId","submitOnEnter","type","value","isMediaUploadAllowed"]),eb=tY((0,m.k)(),2),ey=eb[0],eh=eb[1],ev=tY((0,m.k)(),2),eg=ev[0],ex=ev[1],ej=tY((0,o.useState)(!1),2),eO=ej[0],ew=ej[1],eS="workflow"===eu,e_=(k&&eS?{body:(null==ed?void 0:ed.body)||ed,sgids_to_object_map:(null==ed?void 0:ed.localSgidToObjectMap)||{}}:void 0===J?{}:J)||{},eP=e_.body,eD=e_.attachments,ek=void 0===eD?[]:eD,eE=e_.sgids_to_object_map,eA=void 0===eE?{}:eE,eN=(0,j.O)().arePopupsVisible,eC=(0,u.D)(),eI=eC.frameDocument,eM=eC.isInFrame,eL=tJ({initialValue:M||eS?eA:{}}),eR=eL.isFocused,eU=eL.setIsFocused,eF=eL.localSgidToObjectMap,e$=eL.addToLocalSgidToObjectMap,ez=eL.setLocalSgidToObjectMap,eB=eL.messageAttachments,eH=eL.addMessageAttachments,eq=eL.removeMessageAttachments,eV=eL.setMessageAttachments,eW=(0,o.useRef)(eF);eW.current=eF;var eG=tY((0,o.useState)(!1),2),eJ=eG[0],eK=eG[1],eQ=tY((0,o.useState)(k?ek:[]),2),eX=eQ[0],eY=eQ[1],e0=tY((0,o.useState)(O.unfurlUrls||{}),2),e1=e0[0],e2=e0[1],e3=!!E,e5=(0,a.debounce)(function(e){(0,a.isFunction)(B)&&B({body:e.getJSON(),localSgidToObjectMap:eW.current})},500),e8=(0,o.useMemo)(function(){return eS?tB((null==ed?void 0:ed.body)||ed||eP):tB(ed||eP)},[eS,ed,eP]),e7=(0,i.jE)({editable:k,content:e8,onUpdate:function(e){var t=e.editor;tz({editor:t}),e5(t)},onFocus:function(){eU(!0),(0,a.isFunction)(H)&&H()},onBlur:function(){eU(!1),(0,a.isFunction)(z)&&z()},autofocus:void 0!==v&&v,extensions:eT({placeholder:W,maxLength:L,menubarProps:F,type:eu,shouldDisableEntities:void 0!==K&&K,shouldDisableMentions:void 0!==Q&&Q,shouldSupportCodeBlocks:void 0!==en&&en,shouldSupportTables:void 0!==ei&&ei,portalTargetId:G,frameDocument:eI}),editorProps:{transformPastedHTML:function(e){var t=e.replace(/<edited-label[^>]*>.*?<\/edited-label>/gi,""),r=(0,tH.n)(t);return r.length&&(0,tH.S)({sgids:r,setLocalSgidToObjectMap:ez}),t},clipboardTextParser:tU,attributes:{class:(0,p.A)(A,"tiptap-editor")}}});(0,o.useEffect)(function(){(null==e7?void 0:e7.isEditable)?M&&O.unfurlUrls?e2(O.unfurlUrls):e2({}):e2(O.unfurlUrls||{})},[null==e7?void 0:e7.isEditable,M,O.unfurlUrls]);var e9=eX.some(function(e){return e.progress>=0}),e4=function(){var e,t;return(null==e7||null==(t=e7.state)||null==(e=t.doc)?void 0:e.textContent.trim().length)===0},te=function(){return tZ(e7)&&((null==e7?void 0:e7.isEmpty)||e4())},tt=function(){null==e7||e7.commands.clearContent(),eY([]),ez({}),eV([]),e2({})},tr=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e=function(){var e,r,n;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:if((e=te()&&!eX.length)&&!M||e9)return[2];if(e&&M)return[2,null==Z?void 0:Z()];if(r=Object.values(eF).some(function(e){return"group_mention"==e.type}),!t&&r)return eh(),[2];if(eO)return ex(),[2];if(!(0,a.isFunction)(q))return[3,5];n=q({body:te()?tL.v:null==e7?void 0:e7.getJSON(),attachments:eX.map(function(e){return e.signed_id}),localAttachments:eX,localSgidToObjectMap:eF,unfurlUrls:e1}),o.label=1;case 1:return o.trys.push([1,3,4,5]),eK(!0),[4,n];case 2:return o.sent(),[3,5];case 3:return console.error(o.sent()),[3,5];case 4:return eK(!1),tt(),[7];case 5:return[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tQ(i,n,o,a,l,"next",e)}function l(e){tQ(i,n,o,a,l,"throw",e)}a(void 0)})})()};(0,b.M)("enter",function(){tr()},{enabled:eR&&(void 0===es||es)&&!eN&&!l.isMobile&&!function(e){if(!e)return!1;var t=e.getText();return/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/.test(t)}(e7),enableOnContentEditable:!0},[e7,eX,eN,eR,eO,e1]);var tn=function(e){return eY(function(t){return t0(t).concat(t0(e.map(function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,byte_size:e.size,content_type:e.type,toUpload:!0,progress:0}})))})},to=(0,s.uI)({onDrop:ep?tn:a.noop,noClick:!0,disabled:!ep}),ti=to.getRootProps,ta=to.getInputProps,tl=to.isDragActive,ts=to.open,tc=ta();if((0,o.useEffect)(function(){X&&!k&&e7&&e7.commands.setContent(e8),!k&&e3&&e7&&"addEditedLabelNode"in e7.commands&&"function"==typeof e7.commands.addEditedLabelNode&&requestAnimationFrame(function(){eZ(e7)||e7.chain().focus("end").addEditedLabelNode().run()})},[e8,e7,X,e3,k]),!e7)return null;N&&(N.current=e7);var tu=(null==e7||null==(h=e7.storage)||null==(y=h.characterCount)?void 0:y.characters())||0,td="".concat(String(tu),"/").concat(String(L)),tf=O.isTyping;return(0,n.jsxs)(eo.i.Provider,{value:{addMessageAttachments:eH,addToLocalSgidToObjectMap:e$,attachments:ek,chatProps:O,chatRoomAccessArr:void 0===S?[]:S,disableAttachmentClicks:eM,disableMentionClicks:eM,editedAt:E,editor:e7,isUpdate:M,localAttachments:eX,localSgidToObjectMap:eF,messageAttachments:eB,portalTargetId:G,removeMessageAttachments:eq,setLocalAttachments:eY,setShouldShowPrivateMessageConfirmationOnSubmit:ew,sgidToObjectMap:eA,shouldRefetch:X,shouldScrollIntoView:Y,spaceId:el,type:eu,linkPreviews:e1,setLinkPreviews:e2,isWorkflowType:eS},children:[e7.isEditable?(0,n.jsxs)("div",(t=tX({className:(0,p.A)("text-dark relative flex flex-col px-4 py-3 text-sm transition-colors",void 0!==T&&T?"md:mb-6":"mb-6","bg-secondary-dark focus-within:bg-primary hover:bg-primary active:bg-primary hover:border-dark border-hover rounded-xl border active:border-very-dark focus-within:border-very-dark hover:focus-within:border-very-dark",{"border-none":tl,"border-light":!te(),"pointer-events-none opacity-70":void 0!==P&&P||eJ,"!mb-0":tf,"!bg-primary":M},_)},em,ti()),r=r={onPaste:function(e){var t,r;ep&&(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&(e.preventDefault(),tn(Array.from(e.clipboardData.files)))},"data-testid":"tiptap-editor",children:[tl&&(0,n.jsx)(w,{}),(0,n.jsx)("input",tX({},tc)),(0,n.jsxs)("div",{className:(0,p.A)("chat-message-word-wrap max-h-[300px] cursor-text overflow-auto",$),children:[(0,n.jsx)(i.kg,{editor:e7}),L&&(0,n.jsx)("div",{className:"text-light",children:td})]}),e7&&(void 0===er||er)&&(0,n.jsx)(x,{editor:e7,allowBubbleMenuOverflow:"chat"!==eu}),et&&(0,n.jsx)(tM,{}),(void 0===ea||ea)&&(0,n.jsx)(void 0===R?e6:R,tX({isSubmitting:eJ,isUploading:e9,openFilePicker:ts,editor:e7,handleSubmit:tr,editorHasNoContent:function(){return!M&&te()&&!eX.length},isFocused:eR,isUpdate:M,isLiveStream:void 0!==C&&C,portalTargetId:G},F))]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)):(0,n.jsxs)(n.Fragment,{children:[!te()&&(0,n.jsx)(i.kg,{editor:e7}),et&&!M&&(0,n.jsx)(tM,{})]}),(0,n.jsx)(d.s,{shouldShowConfirmationModal:ey,toggleConfirmationModal:eh,handleSubmit:tr,chatParticipantsCount:O.chatParticipantsCount}),eg&&(0,n.jsx)(f.u,{shouldShowPrivateMessageConfirmationModal:eg,togglePrivateMessageConfirmationModal:ex,handleSubmit:tr,setShouldShowPrivateMessageConfirmationOnSubmit:ew,shouldShowPrivateMessageConfirmationOnSubmit:eO})]})}},1943:function(e,t,r){r.d(t,{O:()=>n});var n=(0,r(798104).Ue)(function(e){return{arePopupsVisible:!1,setPopupsVisible:function(t){return e({arePopupsVisible:t})}}})},904614:function(e,t,r){r.d(t,{$U:()=>o,F_:()=>s,H9:()=>i,Ln:()=>n,Om:()=>a,Z9:()=>l});var n=function(e){return{body:{type:"doc",content:e.bodyContent},inline_attachments:e.inlineAttachments}},o=function(e){return{type:"text",text:e.text}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content;return{type:"paragraph",content:void 0===t?[]:t}},a=function(e){return{type:"file",attrs:{signed_id:e.file.signed_id}}},l=function(e){return i({content:[o({text:e.text})]})},s=function(e){return{type:"mention",attrs:{sgid:e.sgid}}}},66588:function(e,t,r){r.d(t,{$:()=>i,c:()=>a});var n=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},o=function(e){return["video/mp4","video/mpeg","video/ogg"].includes(e)},i={isImage:n,isVideo:function(e){return e.startsWith("video/")},isNativelySupportedVideo:o,isAudio:function(e){return["audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(e)},isPDF:function(e){return e.startsWith("application/pdf")}},a=function(e){return n(e)||o(e)}},205606:function(e,t,r){r.d(t,{D:()=>n});var n=function(e,t){var r=t||document;return(e?r.getElementById(e):null)||r.body}},683461:function(e,t,r){r.d(t,{S:()=>l,n:()=>a});var n=r(93199),o=r(547144);function i(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var a=function(e){return Array.from(new DOMParser().parseFromString(e,"text/html").querySelectorAll("[data-sgid]")).map(function(e){return String(e.getAttribute("data-sgid"))})},l=function(e){var t,r=e.sgids,a=e.setLocalSgidToObjectMap;return(t=function(){var e;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,n.UT)(o.av.richTextFields.fetchSgidRecords({params:{sgids:r}}))];case 1:return e=t.sent(),a(function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t,e)}),[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function l(e){i(a,n,o,l,s,"next",e)}function s(e){i(a,n,o,l,s,"throw",e)}l(void 0)})})()}},426703:function(e,t,r){r.d(t,{k:()=>n});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{duration:[200,150],arrow:!1,placement:e,theme:"text-modifiers",animation:"shift-away-subtle",maxWidth:"none",popperOptions:{strategy:"fixed",modifiers:[{name:"preventOverflow",options:{boundary:t?"clippingParents":"scrollParent",rootBoundary:"viewport",altAxis:!0,altBoundary:!0,tether:!1,padding:8}}]},interactive:!0,interactiveBorder:20,interactiveDebounce:75,trigger:"manual",hideOnClick:!1,delay:[100,0]}}},887498:function(e,t,r){r.d(t,{u:()=>c});var n=r(552676),o=r(739792),i=r(39905),a=r(767900),l=r(434519),s=r(993920);function c(e){var t=e.inputRef,r=e.submitButtonVariant,c=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.u_.Body,{children:(0,n.jsx)(a.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"url",label:(0,o.t)("tiptap.extensions.link.link"),children:(0,n.jsx)(s.R,{name:"url",ref:t})})}),(0,n.jsxs)(l.u_.Footer,{className:"px-5 md:px-8",children:[(0,n.jsx)(i.z,{full:!0,type:"submit",variant:void 0===r?"primary":r,children:(0,o.t)("tiptap.extensions.link.save")}),c]})]})}},845031:function(e,t,r){r.d(t,{b:()=>a});var n=r(552676),o=r(739792),i=r(434519);function a(e){var t=e.isEditable,r=e.onClose;return(0,n.jsxs)(i.u_.Header,{children:[(0,n.jsx)(i.u_.Title,{className:"text-center",size:"md",children:t?(0,o.t)("tiptap.extensions.link.edit"):(0,o.t)("tiptap.extensions.link.add")}),(0,n.jsx)(i.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(i.u_.CloseButton,{onClick:r})})]})}},948874:function(e,t,r){r.d(t,{R:()=>a});var n=r(552676),o=r(739792),i=r(39905);function a(e){var t=e.isEditable,r=e.onClick;return void 0!==t&&t?(0,n.jsx)("div",{className:"mt-4 flex justify-end",children:(0,n.jsx)(i.z,{full:!0,variant:"secondary",type:"button",onClick:r,children:(0,o.t)("tiptap.extensions.link.remove")})}):null}},134982:function(e,t,r){r.d(t,{K:()=>b});var n=r(552676),o=r(275271),i=r(757105),a=r(767900),l=r(434519),s=r(887498),c=r(845031),u=r(948874),d=r(378885);function f(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var p=function(e){var t,r=e.editor,p=e.isAdminUsageContext,m=e.isEmailEditor,b=void 0!==m&&m,y=(0,i.dd)(),h=r.isActive("link"),v=(0,o.useRef)(null),g=null==(t=r.getAttributes("link"))?void 0:t.href;return(0,n.jsxs)(l.u_,{isOpen:y.visible,onClose:y.hide,initialFocus:v,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:h,onClose:function(){y.hide()}}),(0,n.jsx)(a.l,{onSubmit:function(e,t){var n,o=e.url,i=t.setError;return(n=function(){var e,t,n,a,l,s,c;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,d.T.validate({url:o})];case 1:return u.sent(),e=r.isActive("link"),l=(n=(t=r.state.selection).from)!==(a=t.to),s=r.state.doc.textBetween(n,a),c=l&&""===s.trim(),e||l&&!c||!b?r.chain().focus().extendMarkRange("link").setLink({href:o}).run():r.chain().focus().insertContent([{type:"text",text:o,marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}]).run(),y.hide(),[3,3];case 2:return i("url",{type:"manual",message:u.sent().message||"Invalid URL"}),[3,3];case 3:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){f(i,r,o,a,l,"next",e)}function l(e){f(i,r,o,a,l,"throw",e)}a(void 0)})})()},defaultValues:{url:g},autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:v,submitButtonVariant:void 0!==p&&p?"circle":"primary",children:(0,n.jsx)(u.R,{isEditable:h,onClick:function(){r.chain().focus().extendMarkRange("link").unsetLink().run(),y.hide()}})})})]})]})},m=i.gk.create(function(e){var t=e.editor,r=e.isAdminUsageContext,o=e.isEmailEditor;return(0,n.jsx)(p,{editor:t,isAdminUsageContext:r,isEmailEditor:o})}),b=function(){return(0,i.dd)(m)}},378885:function(e,t,r){r.d(t,{T:()=>i});var n=r(779774),o=r(739792),i=n.Ry().shape({url:n.Vo(function(e){return e.startsWith("mailto:")?n.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,(0,o.t)("link_url_invalid")).required((0,o.t)("link_url_required")):n.Z_().url((0,o.t)("link_url_invalid")).required((0,o.t)("link_url_required"))})})},344815:function(e,t,r){r.d(t,{t:()=>a});var n=r(275271),o=r(932699);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t,r=e.optionsCount,a=void 0===r?0:r,l=e.onEnter,s=(t=(0,n.useState)(0),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,n.useEffect)(function(){var e=function(e){if(["ArrowDown","ArrowUp","Enter"].includes(e.key)&&("Enter"!==e.key||!e.shiftKey))switch(e.preventDefault(),e.key){case"ArrowDown":u((c+1)%a);break;case"ArrowUp":u((c-1+a)%a);break;case"Enter":(0,o.isFunction)(l)&&l(c)}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[c,l,a]),{activeIndex:c,setActiveIndex:u}}},102038:function(e,t,r){r.d(t,{Y:()=>w});var n=r(552676),o=r(275271),i=r(739792),a=r(757105),l=r(22319),s=r(381636),c=r(434519),u=r(932699),d=r(779774),f=r(39905),p=r(767900),m=r(241420),b=r(491152),y=r(571863),h=r(993920),v=r(252833),g="settings.emails.builder";function x(e){var t=e.inputRef,r=e.editor,o=e.range,a=e.onClose,l=e.defaultValues,s=e.isWithinEmailEditor,c=!!l.label;return(0,n.jsxs)(p.l,{defaultValues:l,onSubmit:function(e){r.chain().focus().insertContentAt(o,[{type:"cta",attrs:s?e:(0,u.omit)(e,"text_color")},!c&&{type:"hardBreak"}].filter(Boolean)).run(),a()},validationSchema:d.Ry().shape(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:d.Z_().required((0,i.t)([g,"errors.label_is_required"])),url:d.Z_().transform(function(e,t){return(0,v.t)(t,{allowMailTo:!s})}).test("is-url-or-mailto",(0,i.t)([g,"errors.url_is_invalid"]),function(e){return!e||(!s&&e.toLowerCase().startsWith("mailto:")?d.Z_().email().isValidSync(e.replace(/^mailto:/i,"")):d.Z_().url().isValidSync(e))}).required((0,i.t)([g,"errors.url_is_required"])),color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,i.t)([g,"errors.color_is_required"])).required((0,i.t)([g,"errors.color_is_required"]))},s&&{text_color:d.Z_().matches(/^#[0-9A-Fa-f]{6}$/,(0,i.t)([g,"errors.color_is_required"])).required((0,i.t)([g,"errors.color_is_required"]))})),shouldStopPropagation:!0,noValidate:!0,children:[(0,n.jsxs)("div",{className:"flex flex-col pb-4",children:[(0,n.jsx)(y.c,{name:"label",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.label"),required:!0,children:(0,n.jsx)(b.y,{ref:t,name:"label",label:(0,i.t)("email_editor.cta.label"),placeholder:(0,i.t)("email_editor.cta.label"),autocomplete:"off"})}),(0,n.jsx)(y.c,{name:"url",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.url"),required:!0,children:(0,n.jsx)(h.R,{allowMailTo:!s,label:(0,i.t)("email_editor.cta.url"),name:"url",autocomplete:"off"})}),(0,n.jsx)(y.c,{name:"color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.color"),required:!0,children:(0,n.jsx)(m.s,{name:"color"})}),s&&(0,n.jsx)(y.c,{name:"text_color",hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,label:(0,i.t)("email_editor.cta.text_color"),required:!0,children:(0,n.jsx)(m.s,{name:"text_color"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-x-3 pb-5 pt-2.5",children:[(0,n.jsx)(f.z,{type:"button",onClick:a,variant:"secondary-light",children:(0,i.t)("cancel")}),(0,n.jsx)(f.z,{type:"submit",variant:"circle",children:(0,i.t)("email_editor.cta.save")})]})]})}var j=function(e){var t,r,u,d,f,p,m,b=e.editor,y=e.range,h=e.isWithinEmailEditor,v=(0,a.dd)(),g=(0,l.TC)(),j=(0,o.useRef)(null);if(!b)return null;var O=null!=(p=g.brandColor.light)?p:"#000000",w=null!=(m=g.brandTextColor.light)?m:"#FFFFFF",S=(r=(t=b.isActive("cta")?b.getAttributes("cta"):{}).label,u=t.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({label:void 0===r?"":r,url:void 0===u?"":u,color:void 0===(d=t.color)?O:d,text_color:void 0===(f=t.text_color)?w:f},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["label","url","color","text_color"]))),_=!!S.label;return(0,n.jsxs)(c.u_,{isOpen:v.visible,onClose:v.remove,initialFocus:j,children:[(0,n.jsx)(c.u_.Overlay,{}),(0,n.jsxs)(c.u_.Content,{children:[(0,n.jsxs)(c.u_.Header,{children:[(0,n.jsx)(c.u_.Title,{size:"sm",children:(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:_?(0,i.t)("email_editor.cta.edit_title"):(0,i.t)("email_editor.cta.title")})}),(0,n.jsx)(c.u_.HeaderActions,{children:(0,n.jsx)(c.u_.CloseButton,{onClick:v.remove})})]}),(0,n.jsx)(c.u_.Body,{children:(0,n.jsx)(x,{inputRef:j,range:y,editor:b,onClose:v.remove,defaultValues:S,isWithinEmailEditor:void 0!==h&&h})})]})]})},O=a.gk.create(function(e){var t=e.editor,r=e.range,o=e.isWithinEmailEditor;return(0,n.jsx)(j,{editor:t,range:r,isWithinEmailEditor:o})}),w=function(){return(0,a.dd)(O)}},135218:function(e,t,r){r.d(t,{E:()=>d});var n=r(387513),o=r(244507),i=r(363304),a=function(){return function(e){var t=e.tr,r=e.state,n=e.dispatch;try{var o=(0,i.GJ)(r.doc,r.selection.$from.pos,-1);if(null==o)return!1;return t.join(o,2),n&&n(t),!0}catch(e){return!1}}},l=function(e,t){for(var r=t.selection.$from,o=(0,n.jo)(e,t.schema),i=null,a=r.depth,l=r.pos,s=null;a>0&&null===s;)r.node(a).type===o?s=a:(a-=1,l-=1);return null===s?null:{$pos:t.doc.resolve(l),depth:s}},s=function(e,t){var r,n=t.selection.$anchor,o=t.doc.resolve(n.pos-2);return 0!==o.index()&&(null==(r=o.nodeBefore)?void 0:r.type.name)===e},c=function(e){var t=e.selection,r=t.$from,n=t.$to;return!(r.parentOffset>0||r.pos!==n.pos)},u=function(e,t,r){if(!r)return!1;var o=(0,n.jo)(e,t.schema),i=!1;return r.descendants(function(e){e.type===o&&(i=!0)}),i},d=o.Z.extend({addCommands:function(){return{joinListItemBackward:a}},addKeyboardShortcuts:function(){var e,t,r,o,i=this,a=null==(o=this.parent)?void 0:o.call(this);return(e=this.options)&&"string"==typeof e.type&&"chat"===this.options.type&&(null==a||delete a.Enter),t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},a),r=r={Backspace:function(){if(i.editor.commands.undoInputRule())return!0;var e,t=i.editor.state.selection.$from.node(),r=(null==t||null==(e=t.content)?void 0:e.size)===0;if((0,n.Ig)(i.editor.state,i.name)&&r)return i.editor.commands.lift(i.name),!0;if(!c(i.editor.state))return!1;var o=l(i.name,i.editor.state);if(!o){var a=i.editor.state.doc.resolve(i.editor.state.selection.$from.pos-2).nodeBefore;if((null==a?void 0:a.type.name)!==i.name||!r)return!1;throw Error("ListItem error (intentional)")}var d=i.editor.state.doc.resolve(o.$pos.pos-2).node(o.depth),f=u(i.name,i.editor.state,d);return!s(i.name,i.editor.state)||f||r?i.editor.chain().liftListItem(i.name).run():i.editor.commands.joinListItemBackward(i.name)}},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}})},917905:function(e,t,r){r.d(t,{E:()=>b});var n=r(552676),o=r(739792),i=r(39905),a=r(767900),l=r(121804),s=r(131906),c=r(757105),u=r(93199),d=r(547144),f=r(60878),p=function(e){var t=e.editor,r=e.range,n=e.addToLocalSgidToObjectMap,i=(0,f.pm)(),a=(0,c.dd)();return(0,s.useMutation)(function(e){return(0,u.Cu)(d.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){if(!(null==e?void 0:e.oembed))return i.error((0,o.t)("courses.edit.lesson.embed_failed"));t.chain().focus().insertContentAt(r,{type:"embed",attrs:{sgid:e.sgid}}).run(),n({sgid:e.sgid,object:e.oembed}),a.remove()},onError:function(e,n){"string"==typeof n&&(t.chain().focus().insertContentAt(r,{type:"paragraph",content:[{type:"text",text:n,marks:[{type:"link",attrs:{href:n,target:"_blank"}}]}]}).run(),a.remove())}})},m=r(381636),b=function(e){var t=e.addToLocalSgidToObjectMap,r=e.editor,s=e.range,c=e.inputRef,u=e.provider,d=p({addToLocalSgidToObjectMap:t,editor:r,range:s});return(0,n.jsx)(a.l,{onSubmit:function(e){var t=e.url;return d.mutate(t)},defaultValues:{url:""},validationSchema:(0,l.o)(),autoComplete:"off",children:(0,n.jsxs)("div",{className:"mb-6 flex h-full flex-col items-center rounded-md",role:"tabpanel",children:[(0,n.jsx)(a.l.Item,{name:"url",fullWidth:!0,hideBorder:!0,hideLabel:!0,hideDescription:!0,className:"!pt-0",placeholder:(0,o.t)("courses.edit.lesson.embed_placeholder"),children:(0,n.jsx)(a.l.Input,{ref:c})}),(0,n.jsxs)("div",{className:"mt-4 text-center",children:[(0,n.jsx)(i.z,{disabled:d.isLoading,type:"submit",variant:"circle",children:d.isLoading?(0,o.t)("courses.edit.lesson.embedding"):(0,o.t)("courses.edit.lesson.embed_media")}),(0,n.jsx)("div",{className:"mt-2",children:u?(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,o.t)("tiptap.extensions.embed.provider_description.works_with",{provider:u}),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,o.t)("tiptap.extensions.embed.provider_description.providers")})]}):(0,n.jsxs)(m.Z.LabelSm,{weight:"semibold",children:[(0,o.t)("tiptap.extensions.embed.description.start"),(0,n.jsx)("a",{href:"https://iframely.com/domains",target:"_blank",rel:"noreferrer",children:(0,o.t)("tiptap.extensions.embed.description.providers")}),(0,o.t)("tiptap.extensions.embed.description.end")]})})]})]})})}},856516:function(e,t,r){r.d(t,{d:()=>d});var n=r(552676),o=r(275271),i=r(739792),a=r(757105),l=r(917905),s=r(434519),c=function(e){var t=e.editor,r=e.range,c=e.addToLocalSgidToObjectMap,u=e.provider,d=(0,a.dd)(),f=(0,o.useRef)(null);return(0,n.jsxs)(s.u_,{isOpen:d.visible,onClose:d.remove,initialFocus:f,children:[(0,n.jsx)(s.u_.Overlay,{}),(0,n.jsxs)(s.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(s.u_.Header,{children:[(0,n.jsx)(s.u_.Title,{size:"sm",children:u?(0,i.t)("tiptap.extensions.embed.add_provider",{provider:u}):(0,i.t)("tiptap.extensions.embed.add")}),(0,n.jsx)(s.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(s.u_.CloseButton,{onClick:d.remove})})]}),(0,n.jsx)(s.u_.Body,{children:(0,n.jsx)(l.E,{inputRef:f,addToLocalSgidToObjectMap:c,editor:t,range:r,provider:u})})]})]})},u=a.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalSgidToObjectMap,i=e.provider;return(0,n.jsx)(c,{editor:t,range:r,provider:i,addToLocalSgidToObjectMap:o})}),d=function(){return(0,a.dd)(u)}},121804:function(e,t,r){r.d(t,{o:()=>i});var n=r(779774),o=r(739792),i=function(){var e=(0,o.t)("courses.edit.lesson.embed_invalid_url");return n.Ry().shape({url:n.Z_().required(e).url(e)})}},763793:function(e,t,r){r.d(t,{z:()=>C});var n=r(552676),o=r(275271),i=r(619803),a=r.n(i),l=r(93785),s=r.n(l),c=r(441342),u=r(78456),d=r(240507),f=r.n(d),p=r(383294),m=r(230967),b=r(321405),y=r(739792),h=r(381636),v=r(957363),g=r(547661),x=r(538431),j=r(316295),O=r(665648),w=r(740881),S=r(839869),_=r(796378),P=r(974050),D=function(e){var t,r=e.toggleFullscreen,o=e.togglePopup,i=e.onSeek,a=e.mediaTranscriptId,l=e.currentTime,s=e.onFullscreenSeek,c=e.renderFullscreenPlayer,u=e.isFullscreen,d="function"==typeof c,f=(0,_.g)(),p=f.containerRef,m=f.shouldAutoScroll,b=(0,P.q)(a).parsedWebvtt,D=null!=(t=null==b?void 0:b.cues)?t:[],k=!!(null==D?void 0:D.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-primary ml-2 flex h-72 w-96 flex-col rounded-md p-4 shadow-sm",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(v.JO,{type:"16-star-ai",viewBox:"0 0 20 16",className:"mr-1"}),(0,n.jsx)(h.Z.LabelMd,{as:"div",color:"text-dark",weight:"bold",children:(0,y.t)("media_player.transcript")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[d&&(0,n.jsx)(O.d,{onClick:r}),(0,n.jsx)(x.P,{onClick:o})]})]}),(0,n.jsxs)("div",{className:"grow overflow-auto",ref:p,children:[!k&&(0,n.jsx)(g.b,{}),k&&D.map(function(e){return(0,n.jsx)(j.N,{cue:e,isCurrentCue:(0,S.O4)(e,l),shouldScroll:m,onSeek:i},"transcript-".concat(a,"-").concat(e.startTime))})]})]}),d&&k&&(0,n.jsx)(w.n,{isOpen:u,onClose:r,cues:D,onSeek:null!=s?s:function(){},currentTime:l,children:null==c?void 0:c()})]})};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var t=e.mediaTranscriptId,r=e.onSeek,i=e.onFullscreenSeek,a=e.onFullscreenToggle,l=e.renderFullscreenPlayer,s=e.currentTime,c=e.transcriptPreview,u=E((0,o.useState)(!1),2),d=u[0],f=u[1],v=function(){null==a||a(),f(!d)},g=(0,o.useRef)(null),x=E((0,o.useState)(null),2),j=x[0],O=x[1],w=E((0,o.useState)(null),2),S=w[0],_=w[1],P=(0,b.D)(j,S,{placement:"auto-end",modifiers:[{name:"offset",options:{offset:[0,5]}}]}),k=P.styles,A=P.attributes,N=function(){var e;return null==(e=g.current)?void 0:e.click()};return(0,n.jsx)(p.J,{className:"relative",children:function(e){var o,a,u=e.open;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)("div",{className:"text-left",children:(0,n.jsx)(h.Z.BodyXs,{as:"div",children:c})}),(0,n.jsx)(p.J.Button,{as:"div",className:"flex",ref:O,children:(0,n.jsx)("button",{type:"button",className:"text-link text-xs hover:underline",ref:g,children:u?(0,y.t)("media_player.hide_transcript"):(0,y.t)("media_player.show_transcript")})})]}),(0,m.createPortal)((0,n.jsx)(p.J.Panel,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({as:"div",className:"z-[10000]",ref:_,style:k.popper},A.popper),a=a={children:(0,n.jsx)(D,{toggleFullscreen:v,togglePopup:N,onSeek:r,mediaTranscriptId:t,currentTime:s,onFullscreenSeek:i,renderFullscreenPlayer:l,isFullscreen:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o)),document.getElementById("headless-ui-popover-root")||document.body)]})}})},N=function(e){var t=e.transcriptionId,r=e.transcriptionPreview,o=e.audioPlayer;return(0,n.jsxs)("div",{className:"mt-2 flex",children:[(0,n.jsx)("div",{className:"mr-2 h-auto w-1 rounded bg-gray-300"}),(0,n.jsx)(A,{mediaTranscriptId:t,onSeek:function(e){o.currentTime=e,o.play()},transcriptPreview:r})]})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}N.propTypes={transcriptionId:f().number.isRequired,transcriptionPreview:f().string.isRequired,audioPlayer:f().instanceOf(HTMLAudioElement).isRequired};var C=function(e){var t=e.src,r=e.downloadUrl,i=e.controls,l=void 0===i?["play","progress","current-time","mute","volume","settings"]:i,d=e.isVoiceMessage,f=void 0!==d&&d,p=e.transcriptionId,m=e.transcriptionPreview,b=(0,c.wh)().currentCommunityMember,y=(0,u.vb)(b),h=(0,o.useRef)(null),v=y&&!f?((function(e){if(Array.isArray(e))return T(e)})(l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(["download"]):l;return(0,o.useEffect)(function(){if(h.current){var e=new(s())(h.current,{controls:v,invertTime:!1,speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},storage:{enabled:!1},urls:{download:null!=r?r:t}});return function(){return e.destroy()}}},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:a()("post-audio-player",{"default mt-2":!f,"voice-message":f}),children:(0,n.jsx)("audio",{ref:h,preload:"metadata",controls:!0,children:(0,n.jsx)("source",{src:t})})}),p&&m&&(null==h?void 0:h.current)&&(0,n.jsx)(N,{transcriptionId:p,transcriptionPreview:m,audioPlayer:h.current})]})}},179895:function(e,t,r){r.d(t,{Z:()=>g});var n=r(552676),o=r(275271),i=r(932699),a=r(342417),l=r(739792),s=r(757105),c=r(957363),u=r(39905),d=r(60878),f=r(381636),p=r(917905),m=r(434519),b=r(411944);function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}var h=function(e){var t,r,h=e.editor,v=e.range,g=void 0===v?{from:0,to:0}:v,x=e.addToLocalSgidToObjectMap,j=void 0===x?i.noop:x,O=e.type,w=void 0===O?"file":O,S=e.maxFileUploadSize,_=void 0===S?0x100000000:S,P=(0,s.dd)(),D=(0,d.pm)(),k=(0,o.useCallback)(function(e){var t=e[0];"too-many-files"===t.errors[0].code&&D.error((0,l.t)("tiptap.one_file_limit")),"file-too-large"===t.errors[0].code&&D.error((0,l.t)("tiptap.file_too_large",{size:(0,l.ZJ)(_)}))},[D]),E=(0,a.uI)({onDropAccepted:function(e){h.chain().focus().deleteRange(g).run(),e.forEach(function(e){h.chain().focus().insertContent({type:"file-loader",attrs:{file:e}}).run()}),P.remove()},onDropRejected:k,noClick:!0,multiple:!0,maxSize:_}),A=E.getRootProps,N=E.getInputProps,T=E.open,C="video"===w?(0,l.t)("tiptap.drag_and_drop_any_video"):(0,l.t)("tiptap.drag_and_drop_".concat(w));return(0,n.jsxs)(m.u_,{isOpen:P.visible,onClose:P.remove,children:[(0,n.jsx)(m.u_.Overlay,{}),(0,n.jsxs)(m.u_.Content,{size:"lg",children:[(0,n.jsxs)(m.u_.Header,{children:[(0,n.jsx)(m.u_.Title,{size:"sm",children:(0,l.t)("tiptap.attach_".concat(w))}),(0,n.jsx)(m.u_.HeaderActions,{children:(0,n.jsx)(m.u_.CloseButton,{onClick:P.remove})})]}),(0,n.jsx)(m.u_.Body,{className:"!px-5 md:!px-8",children:(0,n.jsxs)(b.O.Group,{className:"overflow-hidden",children:["video"==w&&(0,n.jsxs)(b.O.List,{className:"border-primary border-b",children:[(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.upload")}),(0,n.jsx)(b.O,{children:(0,l.t)("tiptap.embed_link")})]}),(0,n.jsxs)(b.O.Panels,{children:[(0,n.jsx)(b.O.Panel,{children:(0,n.jsxs)("div",(t=y({className:"border-primary mb-6 mt-2 flex min-h-[220px] flex-col items-center justify-center rounded-md border border-dotted"},A()),r=r={children:[(0,n.jsx)("input",y({},N())),(0,n.jsx)(c.JO,{size:42,className:"h-[42px] !w-[42px]",type:"new-file-plus"}),(0,n.jsx)("div",{className:"text-dark my-4",children:(0,n.jsx)(f.Z.LabelSm,{weight:"semibold",children:C})}),(0,n.jsx)(u.z,{type:"button",onClick:T,variant:"circle",children:(0,l.t)("tiptap.choose_".concat(w))})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}),(0,n.jsx)(b.O.Panel,{className:"px-px py-5",children:(0,n.jsx)(p.E,{addToLocalSgidToObjectMap:j,editor:h,range:g,provider:(0,l.t)("tiptap.extensions.embed.provider_description.top_video_providers")})})]})]})})]})]})},v=s.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=e.addToLocalSgidToObjectMap,a=e.type,l=e.maxSize;return(0,n.jsx)(h,{editor:t,range:r,type:a,addToLocalInlineAttachments:o,addToLocalSgidToObjectMap:i,maxSize:l})}),g=function(){return(0,s.dd)(v)}},407963:function(e,t,r){r.d(t,{v:()=>m});var n=r(552676),o=r(275271),i=r(757105),a=r(767900),l=r(434519),s=r(887498),c=r(845031),u=r(948874),d=r(378885),f=function(e){var t=e.editor,r=(0,i.dd)(),f=(0,o.useRef)(null),p=t.getAttributes("image").href,m=!!p,b=r.hide;return(0,n.jsxs)(l.u_,{isOpen:r.visible,onClose:b,initialFocus:f,children:[(0,n.jsx)(l.u_.Overlay,{}),(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(c.b,{isEditable:m,onClose:b}),(0,n.jsx)(a.l,{onSubmit:function(e){var r=e.url;t.chain().updateAttributes("image",{href:r}).run(),b()},defaultValues:{url:p},validationSchema:d.T,autoComplete:"off",children:(0,n.jsx)(s.u,{inputRef:f,submitButtonVariant:"circle",children:(0,n.jsx)(u.R,{isEditable:m,onClick:function(){t.chain().updateAttributes("image",{href:null}).run(),b()}})})})]})]})},p=i.gk.create(function(e){var t=e.editor;return(0,n.jsx)(f,{editor:t})}),m=function(){return(0,i.dd)(p)}},706233:function(e,t,r){r.d(t,{d:()=>k});var n=r(552676),o=r(757105),i=r(275271),a=r(619803),l=r.n(a),s=r(932699),c=r(739792),u=r(434519),d=r(540432),f=r(957363),p=r(883525),m=r(302898),b=r(814408),y=r(106729),h=r(515392),v=r(525815),g=r(381636);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){j(i,n,o,a,l,"next",e)}function l(e){j(i,n,o,a,l,"throw",e)}a(void 0)})}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var _=function(e){var t=e.isOpen,r=e.onClose,o=e.onComplete,a=w((0,i.useState)([]),2),x=a[0],j=a[1],_=w((0,i.useState)(0),2),P=_[0],D=_[1],k=w((0,i.useState)(""),2),E=k[0],A=k[1],N=w((0,i.useState)(!1),2),T=N[0],C=N[1],I=w((0,i.useState)(""),2),M=I[0],L=I[1],R=function(e,t,r){C(!1),D(0),o({url:e,signed_id:t,content_type:r})},U=function(e){new v.Q(e,R,"","",D).start()},F=function(e){return["image/gif","image/jpeg","image/png"].includes(e)},$=function(e){var t=e.url,r=e.id,n=void 0===r?(0,s.uniqueId)():r;return O(function(){var e,r,o;return S(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),C(!0),[4,fetch(t)];case 1:return[4,(e=i.sent()).blob()];case 2:return r=i.sent(),F(null!=(o=e.headers.get("content-type"))?o:"")?U(new File([r],n,{type:"image/jpeg"})):(A(c.ZP.t("image_upload.invalid_file_type_error")),C(!1)),[3,4];case 3:return i.sent(),A(c.ZP.t("image_upload.embed_network_error")),C(!1),[3,4];case 4:return[2]}})})()},z=function(e){return O(function(){var t,r,n;return S(this,function(o){switch(o.label){case 0:if(!e.trim().length)return[2];return[4,h.q.search.getPhotos({query:e.trim(),page:1,perPage:30,orientation:"landscape"})];case 1:return(n=(null==(r=o.sent())||null==(t=r.response)?void 0:t.results)||[]).length>=1&&j(n),[2]}})})()};return(0,i.useEffect)(function(){z("wallpapers")},[]),(0,n.jsxs)(u.u_,{isOpen:t,onClose:r,className:"editor-modal trix-modal__upload",children:[(0,n.jsx)(u.u_.Overlay,{}),(0,n.jsxs)(u.u_.Content,{className:"relative transition-all duration-200",size:T?"sm":"lg",children:[!T&&(0,n.jsx)("div",{className:"absolute right-4 top-4",children:(0,n.jsx)(u.u_.CloseButton,{onClick:r})}),(0,n.jsx)(u.u_.Body,{children:T?(0,n.jsxs)("div",{className:l()("bg-primary pointer-events-none flex w-full flex-col items-center justify-center py-6"),children:[(0,n.jsx)(f.JO,{type:"loader"}),(0,n.jsx)("div",{className:"mt-2 flex flex-col items-center",children:P?(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.ZP.t("image_upload.progress",{progress:P})}):(0,n.jsx)(g.Z.LabelSm,{weight:"medium",children:c.ZP.t("image_upload.preparing")})})]}):(0,n.jsxs)(d.m,{defaultValue:c.ZP.t("upload"),controlled:!1,children:[(0,n.jsx)("div",{label:c.ZP.t("upload"),children:(0,n.jsx)("div",{className:"pb-4",children:(0,n.jsx)(m.p,{imageError:E,insertFiles:function(e){var t=null==e?void 0:e[0];t&&F(t.type)?(C(!0),A(""),U(t)):A(c.ZP.t("image_upload.invalid_file_type_error"))}})})}),(0,n.jsx)("div",{label:(0,n.jsx)(b.$,{}),className:"unsplash-tab",children:(0,n.jsx)(y.A,{unsplashResults:x,searchUnsplash:z,addUnsplash:function(e){return $({url:e.urls.regular,id:e.id})}})}),(0,n.jsx)("div",{label:c.ZP.t("image_upload.embed"),children:(0,n.jsx)(p.u,{imageError:E,embedUrl:M,onChangeEmbedUrl:function(e){return L(e.target.value)},addEmbed:function(){return $({url:M})}})})]})})]})]})},P=function(e){var t=e.editor,r=e.range,i=e.addToLocalInlineAttachments,a=e.isWithinEmailEditor,l=(0,o.dd)();return(0,n.jsx)(_,{onComplete:function(e){var n=e.url,o=e.signed_id,s=e.content_type;i({url:n,signed_id:o,content_type:s});var c={url:n,signed_id:o,content_type:s,width_ratio:1,alignment:"center",use_intrinsic_size:!1};a&&(c={url:n,signed_id:o,content_type:s,width_ratio:0,alignment:"left",use_intrinsic_size:!0}),t.chain().focus().insertContentAt(r,[{type:"image",attrs:c},{type:"hardBreak"}]).run(),l.remove()},isOpen:l.visible,onClose:l.remove})},D=o.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=e.isWithinEmailEditor;return(0,n.jsx)(P,{editor:t,range:r,addToLocalInlineAttachments:o,isWithinEmailEditor:i})}),k=function(){return(0,o.dd)(D)}},495973:function(e,t,r){r.d(t,{h:()=>x,k:()=>g});var n=r(552676),o=r(275271),i=r(932699),a=r(349708),l=r(1943),s=r(400594),c=r(452997);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var f=function(e){var t,r=(t=(0,o.useState)([]),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],i=r[1];return(0,o.useEffect)(function(){var t;(t=function(){var t;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e,(")"===e||"("===e)&&(t=":".concat(e)),[4,(0,c.S)()];case 1:return[4,r.sent().SearchIndex.search(t||"face")];case 2:return i(r.sent().filter(function(e){var t,r;return null==e||null==(r=e.skins)||null==(t=r[0])?void 0:t.native})),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){d(i,n,o,a,l,"next",e)}function l(e){d(i,n,o,a,l,"throw",e)}a(void 0)})})()},[e]),{emojis:n}},p=r(619803),m=r.n(p),b=r(381636),y=function(e){var t=e.emoji,r=e.index,o=e.isSelected,a=e.setSelectedIndex,s=e.insertEmoji,c=(0,l.O)().setPopupsVisible,u=function(){a(r)};return(0,n.jsxs)("button",{type:"button",tabIndex:0,id:"emoji-".concat(t.id),onClick:function(){s(t),(0,i.defer)(function(){return c(!1)})},onMouseOver:u,onFocus:u,className:m()("text-light flex w-full cursor-pointer items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":o}),children:[(0,n.jsx)("span",{className:"text-base",children:t.skins[0].native}),(0,n.jsx)("div",{className:"truncate",children:(0,n.jsxs)(b.Z.LabelSm,{children:[":",t.id,":"]})})]},t.id)};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var g="emojiList",x=(0,o.forwardRef)(function(e,t){var r,u=e.editor,d=e.range,p=e.query,m=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],x=m[1],j=(0,l.O)().setPopupsVisible;(0,a.M)({options:{onSuccess:function(e){var t;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,(0,c.S)()];case 1:return(0,t.sent().init)({data:e}),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){v(i,n,o,a,l,"next",e)}function l(e){v(i,n,o,a,l,"throw",e)}a(void 0)})})()}}});var O=f(p).emojis;(0,o.useEffect)(function(){j(!0)},[j]);var w=function(e){u.chain().focus().deleteRange(d).insertContent(e.skins[0].native).insertContent(" ").run()};return((0,o.useEffect)(function(){var e,t;null==(e=document.getElementById("emoji-".concat(null==(t=O[b])?void 0:t.id)))||e.scrollIntoView({behavior:"smooth",block:"nearest"})},[b,O]),(0,s.h)({selectedIndex:b,setSelectedIndex:x,ref:t,items:O,selectItem:function(e){w(O[e])}}),(0,i.isEmpty)(O))?(0,n.jsx)("div",{className:"h-[50vh] min-w-[250px] max-w-[300px] bg-transparent"}):(0,n.jsx)("div",{ref:t,className:"border-primary bg-primary relative max-h-[50vh] min-w-[250px] max-w-[300px] overflow-auto rounded border py-1.5 text-sm shadow-md",id:g,children:O.map(function(e,t){var r=t===b;return(0,n.jsx)(y,{emoji:e,index:t,setSelectedIndex:x,isSelected:r,insertEmoji:w},e.id)})})});x.displayName="EmojiPicker"},452997:function(e,t,r){r.d(t,{S:()=>n});var n=function(){return r.e("6234").then(r.bind(r,512987))}},656364:function(e,t,r){r.d(t,{r:()=>u});var n=r(387513),o=r(103936),i=r(886331),a=r(826079),l=r(566019),s=r(205606),c=r(495973),u=n.hj.create({addOptions:function(){return{portalTargetId:null,frameDocument:null}},addProseMirrorPlugins:function(){var e=(0,s.D)(this.options.portalTargetId,this.options.frameDocument),t=this.options.frameDocument||document;return[(0,i.ZP)({editor:this.editor,char:":",pluginKey:new a.H$("emoji"),render:function(){var r,n;return{onStart:function(i){r=new o.M_(c.h,{props:i,editor:i.editor}),n=(0,l.ZP)(e,{getReferenceClientRect:function(){var e;return(null==(e=i.clientRect)?void 0:e.call(i))||new DOMRect(0,0,0,0)},content:r.element,appendTo:function(){return e||t.body},showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border"})},onUpdate:function(e){var t;r.updateProps(e),null==(t=n[0])||t.setProps({getReferenceClientRect:e.clientRect})},onKeyDown:function(e){var t;return"Escape"===e.event.key?(n[0].hide(),!0):null==(t=r.ref)?void 0:t.onKeyDown(e)},onExit:function(){var e;null==(e=n[0])||e.destroy(),null==r||r.destroy()}}}})]}})},342275:function(e,t,r){r.d(t,{W:()=>o,v:()=>i});var n=function(e){var t;return(null==e||null==(t=e.$cursor)?void 0:t.pos)!==null},o=function(e){var t=e.editor;if(n(t.state.selection)){var r,o,i,a=null==(i=t.state)||null==(o=i.selection)||null==(r=o.$cursor)?void 0:r.pos;if(a>0){var l=Math.max(0,a-1),s=a&&t.state.doc.nodeAt(l);s&&(null==s?void 0:s.isText)&&(s.textBetween(l,a," ").endsWith(" ")||t.chain().focus().insertContent(" ").run())}}return t.chain().focus().insertContent("/").run()},i=function(e){var t=e.editor.state.selection;return{from:t.from,to:t.to}}},152988:function(e,t,r){r.d(t,{o:()=>u});var n=r(552676),o=r(912306),i=r(739792),a=r(380171),l=r(645111),s=r(775148),c=r(342275),u=function(e){var t=e.editor,r=e.portalId,u=e.showImagePickerModal,d=e.showFileUploadModal,f=e.showGiphyPickerModal,p=e.showPollModal,m=e.disabledExtensions,b=e.showVoiceMessageModal;return t&&r?(0,n.jsx)(o.h,{selectorQuery:"#".concat(r),children:(0,n.jsxs)("ul",{className:"flex list-none items-center gap-1.5",children:[(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.open_slash_commands_menu"),dataTestId:"open_slash_commands_menu",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-add-circle",ariaLabel:(0,i.t)("tiptap.open_slash_commands_menu"),onClick:function(){(0,c.W)({editor:t})}})})}),(0,n.jsx)("li",{children:!m.entities&&(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_entity"),dataTestId:"add_entity_list",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.add_entity"),name:"20-tiptap-entity",onClick:function(){t.chain().focus().insertContent(" #").run()}})})}),!m.file_loader&&(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.attach_file"),dataTestId:"attach_file",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.attach_file"),name:"20-attach",onClick:function(){return d({editor:t,range:(0,c.v)({editor:t})})}})})}),!m.file_loader&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.attach_video"),dataTestId:"attach_video",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-video",ariaLabel:(0,i.t)("tiptap.attach_video"),onClick:function(){return d({editor:t,range:(0,c.v)({editor:t}),type:"video"})}})})}),!m.file_loader&&(0,n.jsx)("li",{className:"hidden md:flex",children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_gif"),dataTestId:"add_gif",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-gif",ariaLabel:(0,i.t)("tiptap.add_gif"),onClick:function(){return f({editor:t,range:(0,c.v)({editor:t})})}})})}),!m.image&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_image"),dataTestId:"add_image",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",ariaLabel:(0,i.t)("tiptap.add_image"),onClick:function(){return u({editor:t,range:(0,c.v)({editor:t})})},name:"20-file-image"})})}),!m.emojipicker&&(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_emoji"),dataTestId:"add_emoji",children:(0,n.jsx)(l.c,{placement:"top-start",onEmojiSelect:function(e){return t.chain().focus().insertContent(e.emoji).run()},as:"li",shouldEmojiPickerRenderAsPortal:!0,targetWrapperClassName:"!flex",target:(0,n.jsx)(s.h,{iconSize:20,ariaLabel:(0,i.t)("tiptap.add_emoji"),iconClassName:"!text-dark",name:"20-emoji"})})}),!m.poll&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.add_poll"),dataTestId:"add_poll",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-editor-poll",ariaLabel:(0,i.t)("tiptap.add_poll"),onClick:function(){return p({editor:t,range:(0,c.v)({editor:t})})}})})}),!m.voice_message&&(0,n.jsx)("li",{children:(0,n.jsx)(a.T,{placement:"top",interactive:!1,content:(0,i.t)("tiptap.record_voice_message"),dataTestId:"record_voice_message",children:(0,n.jsx)(s.h,{iconSize:20,iconClassName:"!text-dark",name:"20-microphone",ariaLabel:(0,i.t)("tiptap.record_voice_message"),onClick:function(){return b({editor:t,range:(0,c.v)({editor:t})})}})})})]})}):null}},866522:function(e,t,r){r.d(t,{$:()=>n,M:()=>o});var n={LEFT:"left",CENTER:"center",RIGHT:"right"},o=["paragraph","heading","listItem","blockquote"]},41928:function(e,t,r){r.d(t,{m:()=>o});var n=r(441342),o=function(){var e=(0,n.wh)().currentCommunitySettings;return!!(null==e?void 0:e.text_editor_text_alignment_enabled)}},322825:function(e,t,r){r.d(t,{kJ:()=>ny,Rs:()=>nv,pU:()=>nh});var n=r(552676),o=r(275271),i=r(952725),a=r(825252),l=r(883279),s=r(85415),c=r(259928),u=r(195126),d=r(759247),f=r(542738),p=r(241432),m=r(90170),b=r(141324),y=r(981179),h=r(142712),v=r(298524),g=r(376695),x=r(20735),j=r(926416),O=r(675117),w=r(381467),S=r(398941),_=r(495782),P=r(147514),D=r(818369),k=r(838973),E=r(135042),A=r(103936),N=r(932699),T=r(977742),C=r(228469),I=r(624804),M=r(102386),L=r(683461),R=r(387513),U=r(131906),F=r(739792),$=r(957363),z=r(880909),B=r(757105),Z=r(998471),H=r(434519),q=function(e){var t=e.file,r=(0,B.dd)();return"application/pdf"!==t.content_type?null:(0,n.jsx)(H.u_,{isOpen:r.visible,onClose:r.remove,children:(0,n.jsx)(H.u_.Overlay,{children:(0,n.jsxs)(H.u_.Content,{size:"full",children:[(0,n.jsxs)(H.u_.Header,{children:[(0,n.jsx)(H.u_.Title,{size:"sm",children:t.filename}),(0,n.jsxs)(H.u_.HeaderActions,{children:[(0,n.jsx)("a",{href:t.url,download:!0,className:"text-dark hover:text-darkest focus:text-dark flex items-center justify-center",children:(0,n.jsx)($.JO,{type:"16-download",size:16})}),(0,n.jsx)(H.u_.CloseButton,{onClick:r.remove})]})]}),(0,n.jsx)(H.u_.Body,{children:(0,n.jsx)(Z.X,{className:"size-full",src:t.url})})]})})})},V=B.gk.create(function(e){var t=e.file;return(0,n.jsx)(q,{file:t})}),W=r(381636),G=r(590996),J=r(701168),K=r(547144),Q=r(66588),X=r(763793),Y=r(354191),ee=function(e){var t,r=e.attachment,o=e.isTranscodingEnabled;return(0,n.jsx)(A.T5,{as:"div",id:"file-wrapper",children:(0,n.jsx)(Y.T,{src:r.url,type:r.content_type,mediaTranscoding:r.media_transcoding,mediaTranscriptId:r.media_transcript_id,isDownloadable:r.is_downloadable,isTranscodingEnabled:void 0!==o&&o,poster:null==(t=r.image_variants)?void 0:t.thumbnail,downloadUrl:r.url,chaptersUrl:r.chapters_url,previewThumbnailsUrl:r.preview_thumbnails_url,variants:r.video_variants,signedId:r.signed_id})})},et=function(e){var t=e.onClick;return(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute -right-2.5 -top-2.5 flex scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:t,"aria-label":(0,F.t)("close"),children:(0,n.jsx)($.JO,{type:"close"})})};function er(e){var t=e.attachment,r=e.isEditable,o=e.onDelete;return(0,n.jsx)(A.T5,{as:"div",id:"file-wrapper",children:(0,n.jsxs)("div",{className:"group relative inline-block pe-4",children:[(0,n.jsx)("a",{href:t.url,download:!0,target:"_blank",rel:"noreferrer",children:t.filename}),r&&(0,n.jsx)("button",{type:"button",className:"bg-secondary border-primary text-dark absolute right-0 top-0 flex -translate-y-1/2 translate-x-1/2 scale-50 cursor-pointer items-center justify-center rounded-full border opacity-0 transition-all duration-200 group-hover:scale-100 group-hover:opacity-100",onClick:o,"aria-label":(0,F.t)("delete"),children:(0,n.jsx)($.JO,{type:"close"})})]})})}var en=function(e){var t,r,o=e.attachment,i=e.isEditable,a=e.onDelete;return(0,n.jsxs)(A.T5,{id:"file-wrapper",as:"div",className:"group relative max-w-[500px]",children:[i&&(0,n.jsx)(et,{onClick:a}),(0,n.jsx)(X.z,{src:o.url,controls:["play","progress","current-time"],isVoiceMessage:!0,transcriptionId:null==(t=o.metadata)?void 0:t.transcript_id,transcriptionPreview:null==(r=o.metadata)?void 0:r.transcript_preview})]})},eo=function(e){var t,r,o,i,a,l,s,c,u=e.node,d=e.editor,f=e.deleteNode,p=d.isEditable,m=(0,B.dd)(V),b=null!=(c=nh())?c:{},y=b.localInlineAttachments,h=b.inlineAttachments,v=b.addToLocalInlineAttachments,g=b.shouldPreviewFilesAsLinks,x=null==(o=u.attrs)?void 0:o.signed_id,j=(null==y?void 0:y.find(function(e){return e.signed_id===x}))||(null==h?void 0:h.find(function(e){return e.signed_id===x})),O=(0,U.useQuery)({queryKey:[K.av.richTextFields.fetchAttachment({signedId:x})],enabled:!j&&p,retry:!1,retryOnMount:!1,onSuccess:v}).isLoading,w=function(e){f(),e.preventDefault(),e.stopPropagation()};if(O)return(0,n.jsx)(A.T5,{as:"div",className:"my-4",children:(0,n.jsx)($.JO,{type:"loader",size:16})});if(!j)return(0,n.jsxs)(A.T5,{as:"div",className:"bg-tertiary group flex items-start gap-2 rounded-md p-4",children:[p&&(0,n.jsx)(et,{onClick:w}),(0,n.jsx)($.JO,{type:"16-trash-bin-2",size:20}),(0,n.jsx)(W.Z.BodySm,{as:"span",children:(0,F.t)("tiptap.file_not_found")})]});if(g)return(0,n.jsx)(er,{attachment:j,isEditable:p,onDelete:w});var S=Q.$.isNativelySupportedVideo(j.content_type),_=Q.$.isVideo(j.content_type)&&!!j.media_transcoding,P=S||_,D=Q.$.isAudio(j.content_type),k=Q.$.isPDF(j.content_type),E=!P&&!D&&!k,T=!!(null==(i=j.metadata)?void 0:i.voice_message),C=D?{}:{href:j.url,download:!0};return P?(0,n.jsx)(ee,{attachment:j,isTranscodingEnabled:_}):T?(0,n.jsx)(en,{attachment:j,isEditable:p,onDelete:w}):(0,n.jsxs)(A.T5,{as:"div",id:"file-wrapper",className:(0,J.A)("bg-secondary hover:bg-tertiary border-primary group relative w-full flex-col rounded border px-3 py-2",{"max-w-[350px]":E,"max-w-[500px]":D||k}),children:[p&&(0,n.jsx)(et,{onClick:w}),(0,n.jsxs)("a",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},C),r=r={className:"inline-flex items-center space-x-3 truncate",children:[(0,n.jsx)(z.V,{content_type:j.content_type}),(0,n.jsxs)("div",{className:"flex flex-col truncate",children:[(0,n.jsx)(W.Z.LabelSm,{weight:"semibold",children:(0,N.truncate)(j.filename,{length:35})}),(0,n.jsx)(W.Z.LabelXs,{weight:"regular",children:(0,G.s)(j.byte_size)})]})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),k&&(0,n.jsxs)("div",{className:"relative mt-2 flex max-h-[500px] items-center justify-center overflow-hidden",children:[(0,n.jsx)("button",{type:"button",onClick:function(){m.show({file:j})},className:"absolute left-0 top-0 size-full cursor-zoom-in","aria-label":(0,F.t)("view_attachment")}),(null==(a=j.image_variants)?void 0:a.thumbnail)&&(0,n.jsx)("img",{loading:"lazy",className:"h-48 w-full object-cover object-top",src:j.image_variants.thumbnail,alt:(0,F.t)("tiptap.pdf_preview")})]}),D&&(0,n.jsx)(X.z,{src:(null==(s=j.audio_variants)||null==(l=s.optimized)?void 0:l.url)||j.url,downloadUrl:j.url})]})},ei=R.NB.create({name:"file",group:"block",atom:!0,addAttributes:function(){return{signed_id:{default:null}}},parseHTML:function(){return[{tag:"file-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-react",(0,R.P1)(t)]},addNodeView:function(){return function(e){var t,r,n,o=(0,A.fW)(eo)(e),i=!1,a=null==(t=o.stopEvent)?void 0:t.bind(o),l=null==(r=o.selectNode)?void 0:r.bind(o),s=null==(n=o.deselectNode)?void 0:n.bind(o);return o.selectNode=function(){i=!0,null==l||l()},o.deselectNode=function(){i=!1,null==s||s()},o.stopEvent=function(e){return!!i&&"mousedown"===e.type||a(e)},o}}}),ea=r(179895),el=r(656364),es=r(121728),ec=r(936565),eu=r(86678),ed=r(884579),ef=r(99165),ep=r(441342),em=function(e){var t=e.onClose,r=e.recordingId,n=e.setServerError,o=e.addToLocalInlineAttachments,i=e.editor,a=e.range,l=((0,ep.wh)().currentCommunityMember||{}).id;(0,ed.I)(void 0===l?0:l,function(e){(e.event===ef.K2||e.event===ef.x4)&&e.json_message.recording_id===r&&(e.event===ef.K2?(o({url:e.json_message.url,signed_id:e.json_message.signed_id,content_type:e.json_message.content_type,metadata:{voice_message:!0}}),i.chain().focus().deleteRange(a).insertContent({type:"file",attrs:{signed_id:e.json_message.signed_id}}).run(),t()):e.event===ef.x4&&n())})},eb=function(e){var t=e.onClose,r=e.addToLocalInlineAttachments,i=e.editor,a=e.range,l=(0,o.useMemo)(function(){return(0,ec.zs)()},[]),s=(0,eu.Y)({recordingId:l}),c=s.isRecording,u=s.status,d=s.isBusy,f=s.isError,p=s.onSubmit;em({onClose:t,recordingId:l,setServerError:s.setServerError,addToLocalInlineAttachments:r,editor:i,range:a});var m=(0,F.t)("tiptap.voice_message.".concat(u));return(0,n.jsx)("div",{className:"bg-primary shadow-voice-message absolute left-0 top-0 z-10 flex size-full items-center justify-center rounded-lg",children:(0,n.jsxs)("div",{className:(0,J.A)("flex items-center rounded-full bg-gray-100 p-1 text-gray-700 dark:bg-gray-900 dark:text-gray-300",{"text-red-600 dark:text-red-600":c}),children:[(0,n.jsx)("button",{type:"button",onClick:t,className:"bg-primary flex items-center justify-center rounded-full p-2",children:(0,n.jsx)($.JO,{type:"20-close",viewBox:"0 0 20 20",className:"text-icon dark:text-white"})}),(0,n.jsxs)("div",{className:"ml-4 mr-2 flex",children:[(0,n.jsx)("div",{className:"min-w-[160px]",children:m}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"mr-2 min-w-[45px]",children:(0,n.jsx)(es.B7,{isRecording:c})}),(0,n.jsx)($.JO,{type:"20-microphone",className:(0,J.A)("mt-[2px] text-gray-700 dark:text-gray-300",{"text-red-600 dark:text-red-600":c})})]})]}),(0,n.jsx)("button",{type:"submit",className:"bg-brand flex items-center justify-center rounded-full p-2",onClick:p,disabled:d,children:d?(0,n.jsx)(es.$j,{}):(0,n.jsx)($.JO,{type:f?"20-retry":"20-checkmark",viewBox:"0 0 20 20",className:"text-white"})})]})})},ey=function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments,i=void 0===o?N.noop:o,a=(0,B.dd)();return(0,n.jsxs)(H.u_,{isOpen:a.visible,onClose:a.remove,children:[(0,n.jsx)(H.u_.Overlay,{}),(0,n.jsxs)(H.u_.Content,{size:"md",children:[(0,n.jsx)(H.u_.Header,{children:(0,n.jsx)(H.u_.Title,{size:"sm",children:(0,F.t)("tiptap.voice_message.action")})}),(0,n.jsx)(H.u_.Body,{children:(0,n.jsx)(eb,{onClose:a.remove,addToLocalInlineAttachments:i,editor:t,range:r})})]})]})},eh=B.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments;return(0,n.jsx)(ey,{editor:t,range:r,addToLocalInlineAttachments:o})}),ev=r(71575),eg=r(706812),ex=r(263395),ej=r(342275),eO=r(619803),ew=r.n(eO),eS=r(117617),e_=r(231464),eP=function(e){var t=e.isActive,r=e.onClick,o=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:ew()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":void 0!==t&&t}),children:(0,n.jsx)(e_.l,{type:o,iconSize:16})})},eD=r(102038),ek=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=(0,eD.Y)(),l=(0,eS.ef)(),s=(nh()||{}).isWithinEmailEditor;return(0,n.jsx)("div",{className:ew()("absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",{invisible:!l}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex overflow-hidden rounded-lg p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(eP,{onClick:function(){o({alignment:"left",full_width:!1})},isActive:"left"==r.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(eP,{onClick:function(){o({alignment:"center",full_width:!1})},isActive:"center"==r.attrs.alignment&&!r.attrs.full_width,iconType:"16-image-centre"}),(0,n.jsx)(eP,{onClick:function(){o({alignment:"center",full_width:!0})},isActive:"center"==r.attrs.alignment&&r.attrs.full_width,iconType:"16-image-full-width"}),(0,n.jsx)(eP,{onClick:function(){o({alignment:"right",full_width:!1})},isActive:"right"==r.attrs.alignment,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"m-1 inline-block w-px self-stretch bg-gray-500","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(eP,{iconType:"16-edit",onClick:function(){return a.show({editor:t,range:(0,ej.v)({editor:t}),isWithinEmailEditor:s})}}),(0,n.jsx)(eP,{onClick:i,iconType:"16-trash"})]})]})})},eE=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=e.selected,l=t.isEditable,s=(0,eD.Y)(),c=(nh()||{}).isWithinEmailEditor;return(0,n.jsxs)(A.T5,{as:"div",className:(0,J.A)("group relative my-2 flex items-center rounded-lg border py-4",{"justify-center":"center"===r.attrs.alignment,"justify-start":"left"===r.attrs.alignment,"justify-end":"right"===r.attrs.alignment},{"border-transparent":!l,"hover:border-dark border-transparent":l&&!a,"border-circle":l&&a}),children:[(0,n.jsx)("a",{style:{backgroundColor:r.attrs.color,color:r.attrs.text_color},className:(0,J.A)("tiptap-cta focus-visible:!outline-secondary group relative block rounded-full px-6 py-2.5 font-bold transition-opacity hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",r.attrs.full_width?"w-[350px] text-center":"w-auto",!r.attrs.text_color&&"!text-white"),target:"_blank",href:r.attrs.url,rel:"noreferrer",onClick:function(e){l&&(e.preventDefault(),s.show({editor:t,range:(0,ej.v)({editor:t}),isWithinEmailEditor:c}).catch(console.error))},children:r.attrs.label}),l&&(0,n.jsx)(ek,{editor:t,node:r,updateAttributes:o,deleteNode:i})]})},eA=R.NB.create({name:"cta",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},label:{default:null},color:{default:null},text_color:{default:"#FFFFFF"},full_width:{default:!1},alignment:{default:"center"}}},parseHTML:function(){return[{tag:"cta-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["cta-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eE)}}),eN=R.hj.create({name:"disableModEnter",addKeyboardShortcuts:function(){return{"Mod-Enter":function(){return!0}}}}),eT=r(93199);function eC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eI=(0,r(798104).Ue)(function(e){return{failedLinkEmbeds:[],addFailedLinkEmbed:function(t){e(function(e){var r;return{failedLinkEmbeds:((function(e){if(Array.isArray(e))return eC(e)})(r=e.failedLinkEmbeds)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return eC(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(e,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t])}})}}}),eM=R.NB.create({name:"embed-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{href:{default:null},text:{default:null}}},parseHTML:function(){return[{tag:"embed-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-loader",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eL)},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){var t=eI.getState().failedLinkEmbeds,r=e.editor.state;if(r.selection.$from.pos>0){var n=r.doc.resolve(r.selection.$from.pos-1).marks(),o=r.doc.resolve(r.selection.$from.pos).marks();if(n.some(function(e){return"link"===e.type.name})&&!o.some(function(e){return"link"===e.type.name})){var i=n.find(function(e){return"link"===e.type.name}),a=i.attrs,l=r.doc.nodeAt(r.selection.$from.pos-1),s=a.href===l.text;return!t.includes(a.href)&&!!l&&!!i&&!!s&&(e.editor.chain().focus().setTextSelection(r.selection.$from.pos-1).extendMarkRange("link").deleteSelection().run(),e.editor.view.dispatch(e.editor.view.state.tr.insert(e.editor.view.state.selection.anchor,e.editor.schema.nodes["embed-loader"].create({href:a.href,text:l.text})).setMeta("addToHistory",!1)),!0)}return!1}}}}}),eL=function(e){var t=e.node,r=e.editor,i=e.HTMLAttributes,a=e.getPos,l=nh().addToLocalSgidToObjectMap,s=eI().addFailedLinkEmbed,c=function(){var e=r.state,n=r.view.dispatch,o=a();o&&n(e.tr.delete(o,o+t.nodeSize).setMeta("addToHistory",!1))},u=(0,U.useMutation)(function(e){return(0,eT.Cu)(K.av.richTextFields.createOembed({params:{url:e}}))},{onSuccess:function(e){c(),r.chain().focus().insertContent({type:"embed",attrs:{sgid:e.sgid}}).run(),l({sgid:e.sgid,object:e.oembed})},onError:function(){s(t.attrs.href),c(),r.chain().focus().insertContent({type:"text",text:t.attrs.text,marks:[{type:"link",attrs:{href:t.attrs.href}}]}).run()}}),d=r.isEditable;return(0,o.useEffect)(function(){if(d){var e=t.attrs.href;return u.mutate(e),function(){u.reset()}}},[]),(0,n.jsxs)(A.T5,{as:"span",HTMLAttributes:i,children:[(0,n.jsx)("a",{href:t.attrs.href,className:ew()({"pointer-events-none mr-px animate-pulse":d}),target:"_blank",rel:"noopener noreferrer",children:t.attrs.text}),d&&(0,n.jsx)($.JO,{type:"loader",className:"mb-[3px]",size:14})]})},eR=r(379610),eU=r(371290),eF=r(129832),e$=r(961217);function ez(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function eZ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ez(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ez(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eq=function(e){var t=e.onComplete,r=eH((0,o.useState)("idle"),2),n=r[0],i=r[1],a=eH((0,o.useState)(null),2),l=a[0],s=a[1],c=eH((0,o.useState)(null),2),u=c[0],d=c[1],f=(0,U.useMutation)(function(e){return eU.O.create({blobSignedId:e.signed_id})},{onError:function(){s("processing_failed"),i("failed")}}).mutate,p=(0,eF.S)({onUploadStarted:function(){return i("uploading")},onUploadComplete:function(e){if(d(e),Q.$.isVideo(e.content_type))i("processing"),f(e);else{var r=e.signed_id,n=e.filename,o=(0,K.Gd)({signed_id:r,filename:n});t(eZ(eB({},e),{url:o})),i("succeeded")}},onUploadFailed:function(){s("upload_failed"),i("failed")}}),m=p.uppy,b=p.progress;return(0,e$.k)({enabled:"processing"===n&&!!(null==u?void 0:u.signed_id),signedId:null==u?void 0:u.signed_id,onSuccess:function(e){var r=e.hlsUrl,n=e.previewThumbnailsUrl;if(u){var o=u.signed_id,a=u.filename,l=(0,K.Gd)({signed_id:o,filename:a});t(eZ(eB({},u),{url:l,media_transcoding:{status:"succeeded"},video_variants:{original:l,hls:r},preview_thumbnails_url:n})),i("succeeded")}},onError:function(){s("processing_failed"),i("failed")}}),{status:n,progress:b,error:l,addFile:(0,o.useCallback)(function(e){i("preparing"),s(null),d(null),m.addFile(e)},[m]),cancelUpload:(0,o.useCallback)(function(){i("idle"),s(null),d(null),m.cancelAll()},[m])}},eV="tiptap.file_upload",eW=R.NB.create({name:"file-loader",group:"inline",inline:!0,atom:!0,addAttributes:function(){return{file:{default:null}}},parseHTML:function(){return[{tag:"file-loader"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["file-loader",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(eG)}}),eG=function(e){var t,r=e.node,i=e.editor,a=e.HTMLAttributes,l=e.getPos,s=i.isEditable,c=r.attrs.file,u=nh()||{},d=u.addToLocalInlineAttachments,f=u.isWithinEmailEditor,p=function(e){e&&i.view.dispatch(i.state.tr.delete(e,e+r.nodeSize).setMeta("addToHistory",!1))},m=eq({onComplete:function(e){var t=e.signed_id,r=e.content_type,n=Q.$.isImage(r),o=l();null==d||d(e),p(o),i.view.dispatch((0,eR.SJ)(i.state.tr.insert(o,i.schema.nodes[n?"image":"file"].create({signed_id:t,alignment:f?"left":"center",use_intrinsic_size:f}))))}}),b=m.status,y=m.progress,h=m.error,v=m.addFile,g=m.cancelUpload,x=null!=(t=File)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](c):c instanceof t;return((0,o.useEffect)(function(){if(s)return x?(v(c),function(){return g()}):void p(l())},[]),s&&x)?(0,n.jsx)(A.T5,{as:"div",HTMLAttributes:a,children:(0,n.jsxs)("div",{className:"bg-secondary border-primary relative my-2 inline-flex w-full space-x-3 rounded border px-3 py-2 md:w-[75%] lg:w-[50%]",children:["failed"===b?(0,n.jsx)($.JO,{type:"20-alert",className:"!h-5 !w-5",size:20}):(0,n.jsx)($.JO,{type:"loader",className:"animate-spin",size:24}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(W.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,N.truncate)(c.name,{length:15})}),(0,n.jsx)(W.Z.LabelSm,{children:function(){switch(b){case"preparing":return(0,F.t)([eV,"preparing"]);case"uploading":return(0,F.t)([eV,"uploading"],{progress:y.toFixed(0)});case"processing":return(0,F.t)([eV,"processing"]);case"failed":return(0,F.t)([eV,"errors",h||""]);default:return""}}()})]})]})}):null},eJ=r(25593),eK=r(544477),eQ=r(18317),eX=r(522974),eY=r(720624),e0=r(751169),e1=(0,o.forwardRef)(function(e,t){var r=e.query,o=e.setQuery;return(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)("input",{ref:t,type:"text",placeholder:F.ZP.t("tiptap.search_giphy"),onChange:function(e){return o(e.target.value)},value:r,className:"bg-secondary placeholder:text-light w-full rounded border-none text-sm placeholder:opacity-100 focus:border-none focus:shadow-none focus:ring-0"})})});function e2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e3(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}function e6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e2(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e1.displayName="SearchBox";var e5=function(e){var t=e.editor,r=e.range,i=void 0===r?{from:0,to:0}:r,a=e.addToLocalInlineAttachments,l=void 0===a?N.noop:a,s=(0,B.dd)(),c=e6((0,o.useState)(""),2),u=c[0],d=c[1],f=e6((0,o.useState)(!1),2),p=f[0],m=f[1],b=(0,o.useRef)(null),y=(0,U.useInfiniteQuery)(["chat-members-search",u],function(e){var t=e.pageParam,r=void 0===t?1:t;return u?eQ.y(u,{offset:r,limit:10}):eQ.q({offset:r,limit:10})},{getNextPageParam:function(e){return e.pagination.offset+e.pagination.count<e.pagination.total_count?e.pagination.offset+10:null}}),h=y.data,v=y.fetchNextPage,g=y.hasNextPage,x=y.isLoading,j=(0,o.useMemo)(function(){var e;return(0,N.uniqBy)((0,N.flatten)(null==h||null==(e=h.pages)?void 0:e.map(function(e){return e.data})),"id")},[h]),O=(0,eX.A)(),w=O.uploadFile,S=O.status,_=O.isError,P=O.response,D=O.progress,k=!_&&"uploading"===S,E=function(){if(P.signed_id&&P.filename&&P.content_type){var e=P.signed_id,r=P.filename,n=P.content_type,o=(0,K.Gd)({signed_id:e,filename:r});l({url:o,signed_id:e,content_type:n}),(0,N.defer)(function(){t.chain().focus().insertContentAt(i,[{type:"image",attrs:{url:o,signed_id:e,content_type:n,width_ratio:1}},{type:"hardBreak"}]).run(),s.remove()})}},A=function(e){var t;return(t=function(){var t,r,n;return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:return m(!0),[4,fetch(e.images.original.url)];case 1:return t=o.sent(),r="video"==e.type?"video/mp4":"image/gif",n=File.bind,[4,t.blob()];case 2:return w(new(n.apply(File,[void 0,[o.sent()],"".concat(e.id,".").concat(r.split("/")[1]),{type:r}]))),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){e3(i,n,o,a,l,"next",e)}function l(e){e3(i,n,o,a,l,"throw",e)}a(void 0)})})()};return(0,o.useEffect)(function(){"uploading"===S&&m(!1),"completed"===S&&P&&E()},[S,P]),(0,n.jsxs)(H.u_,{isOpen:s.visible,onClose:s.remove,initialFocus:b,children:[(0,n.jsx)(H.u_.Overlay,{}),(0,n.jsxs)(H.u_.Content,{size:"lg",children:[(0,n.jsxs)(H.u_.Header,{children:[(0,n.jsx)(H.u_.Title,{size:"sm",children:(0,F.t)("tiptap.add_gif")}),(0,n.jsx)(H.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,n.jsx)(H.u_.CloseButton,{onClick:s.remove})})]}),(0,n.jsx)(H.u_.Body,{children:k||p?(0,n.jsx)("div",{className:"bg-primary pointer-events-none flex min-h-[240px] w-full flex-col items-center justify-center py-6",children:(0,n.jsxs)("div",{className:"mb-4 flex flex-col items-center",children:[(0,n.jsx)(e0.a,{center:!0}),D?(0,n.jsx)(W.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.progress",{progress:D.toFixed(0)})}):(0,n.jsx)(W.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.preparing")})]})}):(0,n.jsxs)("div",{className:"bg-primary border-primary flex w-full flex-col space-y-1",children:[(0,n.jsx)(e1,{ref:b,query:u,setQuery:d}),x&&(0,n.jsx)(eY.m,{}),!!j.length&&(0,n.jsx)(eJ.Z,{dataLength:j.length,next:v,hasMore:!!g,scrollThreshold:.6,height:360,loader:(0,n.jsx)("div",{className:"col-span-3 flex justify-center py-3",children:(0,n.jsx)(eY.m,{})}),className:"mb-2 py-2",children:(0,n.jsx)(eK.Z,{columnsCount:3,gutter:"8",children:j.map(function(e){return(0,n.jsx)("button",{type:"submit",onClick:function(){return A(e)},"aria-label":e.title,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:"rounded",width:180,src:e.images.preview_gif.url})},e.id)})})})]})})]})]})},e8=B.gk.create(function(e){var t=e.editor,r=e.range,o=e.addToLocalInlineAttachments;return(0,n.jsx)(e5,{editor:t,range:r,addToLocalInlineAttachments:o})}),e7=r(60589),e9=r(260622),e4=r(943544),te=r(775148),tt=r(117383),tr=r(767900),tn=r(73578),to=r(60878),ti=function(e){var t=e.sgid,r=e.options;return(0,U.useQuery)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({queryKey:["poll",t],queryFn:function(){if(!t)throw Error("sgid is required");return(0,eT.UT)(K.av.polls.showBySgid(t))},enabled:!!t},void 0===r?{}:r))},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options;return(0,U.useMutation)(function(e){return(0,eT.pC)(K.av.polls.undo(e))},void 0===t?{}:t)},tl=function(){var e=(0,to.pm)(),t=(0,U.useMutation)({mutationFn:function(e){return(0,eT.Cu)(K.av.polls.exportCsv(e))},onSuccess:function(t){e.success((0,F.t)("export_member_csv.message",{email:t.email}))},onError:function(t){e.error(t.message)}});return{handleExportPollResponses:t.mutate,isExporting:t.isLoading}},ts=r(227851),tc=r(844081),tu=r(49705),td=r(345185),tf=r(88004),tp=r(779774),tm=function(e){return new Set(e.map(function(e){return e.value.trim()})).size===e.length},tb={value:""},ty=function(e){var t,r,o,i,a,l=e.index,s=e.insert,c=e.fields,u=e.remove,d=e.disabled,f=(0,tc.dI)().listeners,p=(0,tt.y1)("enter",function(e){e.preventDefault(),s(l+1,tb)},{enabled:c.length<5,enableOnFormTags:["INPUT"]}),m=(0,ts.cl)({name:"options"}).errors,b=null==m||null==(a=m.options)||null==(i=a[l])||null==(o=i.value)?void 0:o.message;return(0,n.jsxs)("div",{className:ew()("group flex items-center justify-between md:pl-2",{"form-group--has-error":b}),children:[(0,n.jsx)(tf.h,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({name:"16-drag-handle",className:"invisible mr-1 hidden cursor-move group-hover:visible md:block"},f),r=r={children:(0,n.jsx)($.JO,{type:"16-drag-handle",size:16})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),(0,n.jsx)(tr.l.Input,{ref:p,id:"poll_options-".concat(l),name:"poll_options.".concat(l,".value"),placeholder:(0,F.t)("tiptap.extensions.poll.option_placeholder",{number:l+1}),disabled:d}),!d&&(0,n.jsx)(te.h,{className:ew()("border-primary invisible ml-2 rounded-full border",{"group-hover:visible":c.length>1}),name:"20-close",onClick:function(){c.length>1&&u(l)},iconSize:20,buttonSize:32,ariaLabel:(0,F.t)("close")})]})},th=function(){var e=(0,tc.dI)().item;return(0,n.jsx)("div",{className:"h-auto w-full pl-8 pr-10",children:(0,n.jsx)("input",{disabled:!0,className:"border-primary bg-tertiary z-50 w-full rounded-md border-2 border-dashed px-4 py-[11px] leading-[1.25]",value:null==e?void 0:e.value})})},tv=function(e){var t,r=e.disabled,o=(0,ts.Dq)({name:"poll_options"}),i=o.insert,a=o.fields,l=o.remove,s=o.replace,c=(0,(0,ts.Gc)().watch)("poll_options"),u=a.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,c[t])}),d=(0,ts.cl)({name:"poll_options"}).errors;return(0,n.jsxs)("div",{className:"md:pr-8",children:[(0,n.jsx)(tc.cm,{shouldUseKeyboardSensor:!1,items:u,onSort:s,lockedVerticalAxis:!0,distance:10,useDragHandle:!0,children:(0,n.jsxs)(td.a,{gap:2,className:ew()({"mb-2":u.length>=5}),children:[u.map(function(e,t){return(0,n.jsx)(tu.c,{tabIndex:-1,item:e,disabled:1===u.length||r,placeholder:th,dataTestId:"poll-option-item",children:(0,n.jsx)(ty,{index:t,insert:i,fields:u,remove:l,disabled:r},e.id)},e.id)}),!r&&u.length<5&&(0,n.jsxs)("button",{type:"button",tabIndex:0,className:"hover:bg-tertiary inline-flex w-fit cursor-pointer items-center space-x-1 rounded-md p-1 pr-1.5 md:ml-8",onClick:function(){return i(u.length,tb)},children:[(0,n.jsx)($.JO,{type:"20-plus-v2",size:20}),(0,n.jsx)("div",{children:(0,n.jsx)(W.Z.LabelSm,{weight:"medium",children:(0,F.t)("tiptap.extensions.poll.add_option")})})]})]})}),d.poll_options&&(0,n.jsx)("p",{className:"form-group__error pl-5 md:pl-8",children:null==(t=d.poll_options.message)?void 0:t.toString()})]})},tg=r(864608),tx=function(){return(0,(0,ts.Gc)().watch)("enable_poll_duration")?(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(tg.x,{datePlaceholder:(0,F.t)("tiptap.extensions.poll.settings.cutoff_date_placeholder"),timePlaceholder:(0,F.t)("tiptap.extensions.poll.settings.cutoff_time_placeholder"),name:"closes_at",minDate:new Date})}):null},tj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,U.useMutation)(function(e){return(0,eT.Cu)(K.av.polls.create(),e)},e)},tO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,U.useMutation)(function(e){return(0,eT.aU)(K.av.polls.update(e.id),e)},e)},tw=r(39905),tS=function(e){var t=e.isEdit,r=e.isLoading,o=(0,B.dd)();return(0,n.jsxs)("footer",{className:"border-primary flex justify-end gap-x-4 border-t px-5 py-4","data-testid":"poll-modal-footer",children:[(0,n.jsx)(tw.z,{onClick:o.remove,variant:"secondary",type:"button",children:(0,F.t)("tiptap.extensions.poll.cancel")}),(0,n.jsx)(tw.z,{variant:"circle",type:"submit",disabled:r,children:t?(0,F.t)("tiptap.extensions.poll.save"):(0,F.t)("tiptap.extensions.poll.insert")})]})},t_=function(e){var t,r=e.initialFocusRef,o=e.onComplete,i=e.isEdit,a=e.pollSgid,l=e.closeModal,s=(0,B.dd)(),c=(0,to.pm)().success,u=ti({sgid:a,options:{enabled:!!a&&i}}),d=u.data,f=u.isLoading,p=(0,U.useQueryClient)(),m=tj({onSuccess:function(e){o(e),s.remove()}}),b=m.mutate,y=m.isLoading,h=tO({onSuccess:function(e){c((0,F.t)("tiptap.extensions.poll.edit_success")),p.setQueryData(["poll",e.sgid],e),o(e),s.remove()}}),v=h.mutate,g=h.isLoading;if((0,tt.y1)("mod+enter",function(e){e.preventDefault(),e.stopPropagation()}),f)return(0,n.jsx)(eY.m,{});var x=!i||!(null==d||null==(t=d.results)?void 0:t.total_responses),j=i?{title:null==d?void 0:d.title,poll_options:null==d?void 0:d.poll_options,allow_members_to_view_results:null==d?void 0:d.allow_members_to_view_results,enable_poll_duration:!!(null==d?void 0:d.closes_at),closes_at:null==d?void 0:d.closes_at}:{title:"",poll_options:[tb],allow_members_to_view_results:!0,enable_poll_duration:!1,closes_at:null};return(0,n.jsxs)(tr.l,{onSubmit:function(e){if(e.enable_poll_duration||(e.closes_at=null),i&&d){var t,r;v((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={id:d.id},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}else b(e)},defaultValues:j,validationSchema:tp.Ry().shape({title:tp.Z_().required((0,F.t)("tiptap.extensions.poll.validation_errors.title_required")),poll_options:tp.IX().of(tp.Ry().shape({value:tp.Z_().required((0,F.t)("tiptap.extensions.poll.validation_errors.option_value_required"))})).min(2,(0,F.t)("tiptap.extensions.poll.validation_errors.options_minimum")).max(5,(0,F.t)("tiptap.extensions.poll.validation_errors.options_maximum",{maximum:5})).test("unique-option-values",(0,F.t)("tiptap.extensions.poll.validation_errors.options_unique"),tm).required((0,F.t)("tiptap.extensions.poll.validation_errors.options_minimum"))}),className:"h-full",formClassName:"h-full flex flex-col mb-0",children:[(0,n.jsxs)(H.u_.Header,{children:[(0,n.jsx)(H.u_.Title,{size:"sm",children:(0,F.t)(i?"tiptap.extensions.poll.edit":"tiptap.extensions.poll.title")}),(0,n.jsx)(H.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-4",children:(0,n.jsx)(H.u_.CloseButton,{onClick:l})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto px-5 py-4 md:px-0",children:[(0,n.jsx)("div",{className:"md:px-8",children:(0,n.jsx)(tr.l.Item,{name:"title",label:(0,F.t)("tiptap.extensions.poll.ask_a_question"),placeholder:(0,F.t)("tiptap.extensions.poll.question_placeholder"),hideDescription:!0,hideBorder:!0,isFirstChild:!0,children:(0,n.jsx)(tr.l.Input,{ref:r})})}),(0,n.jsx)(tr.l.Item,{label:(0,F.t)("tiptap.extensions.poll.options"),hideBorder:!0,hideDescription:!0,tooltipText:x?"":(0,F.t)("tiptap.extensions.poll.cannot_edit_options"),labelWrapperClassName:"md:px-8",children:(0,n.jsx)(tv,{disabled:!x})}),(0,n.jsxs)("div",{className:"md:px-8",children:[(0,n.jsx)("div",{className:"border-primary mt-2 border-b"}),(0,n.jsx)(tn.l,{fieldId:"",hideBorder:!0,label:(0,F.t)("tiptap.extensions.poll.settings.title")}),(0,n.jsx)(tr.l.Checkbox,{id:"allow_members_to_view_results",name:"allow_members_to_view_results",label:(0,F.t)("tiptap.extensions.poll.settings.allow_members_to_view_results"),description:"",className:"!mt-0"}),(0,n.jsx)(tr.l.Checkbox,{id:"enable_poll_duration",name:"enable_poll_duration",label:(0,F.t)("tiptap.extensions.poll.settings.poll_duration"),rules:{},description:"",className:"!mt-2"}),(0,n.jsx)(tx,{})]})]}),(0,n.jsx)(tS,{isEdit:!0,isLoading:g||y})]})},tP=function(e){var t=e.pollSgid,r=(0,B.dd)(),i=(0,o.useRef)(null),a=(0,U.useQueryClient)();return(0,n.jsxs)(H.u_,{isOpen:r.visible,onClose:r.remove,initialFocus:i,children:[(0,n.jsx)(H.u_.Overlay,{}),(0,n.jsx)(H.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(t_,{isEdit:!0,pollSgid:t,closeModal:r.remove,onComplete:function(){return a.removeQueries(["poll",t])},initialFocusRef:i})})]})},tD=r(424168),tk=r(76516),tE=r(468630),tA=r(698253),tN=r(217123),tT=r(380171);function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tI=function(e){var t,r,i=e.poll,a=e.canUndo,l=e.undo,s=i.results&&"total_responses"in i.results,c=(t=(0,o.useState)(),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tC(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tC(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=function(){if(i.closes_at){var e=new Date(i.closes_at),t=new Date,r=(0,tD.Z)(e,t),n=(0,tk.Z)(e,t)%24,o=(0,tE.Z)(e,t)%60,a=(0,tA.Z)(e,t)%60;return r>0?(0,F.t)("tiptap.extensions.poll.remaining_days",{count:r}):n>0?(0,F.t)("tiptap.extensions.poll.remaining_hours",{count:n}):o>0?(0,F.t)("tiptap.extensions.poll.remaining_minutes",{count:o}):a>0?(0,F.t)("tiptap.extensions.poll.remaining_seconds",{count:a}):(0,F.t)("tiptap.extensions.poll.closed")}};return(0,o.useEffect)(function(){if(i.closes_at&&(d(f()),10>(0,tE.Z)(new Date(i.closes_at),new Date))){var e=setInterval(function(){return d(f())},1e3);return function(){return clearInterval(e)}}},[]),(0,n.jsxs)("div",{className:"flex items-center space-x-1","data-testid":"poll-footer",children:[s&&(0,n.jsx)(W.Z.LabelSm,{weight:"regular","data-testid":"poll-total-votes",children:(0,F.t)("tiptap.extensions.poll.votes",{count:(null==(r=i.results)?void 0:r.total_responses)||0})}),s&&i.closes_at&&(0,n.jsx)("span",{className:"mx-px",children:(0,F.t)("separator_dot")}),i.closes_at&&(0,n.jsx)(tT.T,{className:"flex items-center",content:(0,F.t)("tiptap.extensions.poll.closes_at",{date:(0,tN.default)(new Date(i.closes_at),"MMMM do, yyyy, h:mm a")}),dataTestId:"poll-closes-at",children:(0,n.jsx)(W.Z.LabelSm,{weight:"regular",children:u})}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mx-px",children:(0,F.t)("separator_dot")}),(0,n.jsx)("button",{type:"button",className:"focus:bg-secondary hover:bg-secondary flex items-center rounded px-0.5",onClick:l,children:(0,n.jsx)(W.Z.LabelSm,{weight:"medium",color:"text-link",children:(0,F.t)("tiptap.extensions.poll.undo")})})]})]})},tM=function(e){return e.checked?(0,n.jsx)("div",{className:"border-secondary bg-dark-primary-button my-0.5 flex size-5 items-center justify-center rounded-full",children:(0,n.jsx)("div",{className:"bg-primary size-2 rounded-full"})}):(0,n.jsx)("div",{className:"border-primary bg-primary my-0.5 size-5 rounded-full border"})},tL=r(880301),tR=r(283780),tU=function(e){var t,r=e.pollOptionId,i=e.pollId,a=e.pollValue,l=e.percentage,s=(0,B.dd)(),c=(0,tR.m)(K.av.polls.voteList({pollId:i,pollOptionId:r,params:{per_page:15}}),{enabled:!!i&&!!r},["poll-vote-list",i,r]),u=c.data,d=c.isLoading,f=c.fetchNextPage,p=c.hasNextPage,m=c.mapPages,b=(0,o.useMemo)(function(){return(0,N.flatten)(m(function(e){return e.records}))},[m]),y=null==u||null==(t=u.pages[0])?void 0:t.count;return(0,n.jsxs)(H.u_,{isOpen:s.visible,onClose:s.remove,children:[(0,n.jsx)(H.u_.Overlay,{}),(0,n.jsxs)(H.u_.Content,{shouldCloseOnOutsideClick:!0,children:[(0,n.jsxs)(H.u_.Header,{children:[(0,n.jsx)(H.u_.Title,{size:"sm",children:a}),(0,n.jsx)(H.u_.HeaderActions,{children:(0,n.jsx)(H.u_.CloseButton,{onClick:s.hide})})]}),!d&&(0,n.jsx)(W.Z.LabelSm,{weight:"regular",children:(0,n.jsxs)("div",{className:"space-x-1 px-5 pb-4 md:px-8",children:[(0,n.jsxs)("span",{children:[l,"%"]}),(0,n.jsx)("span",{children:(0,F.t)("separator_dot")}),(0,n.jsx)("span",{children:(0,F.t)("tiptap.extensions.poll.votes",{count:y})})]})}),(0,n.jsx)(H.u_.Body,{id:"post-likes-modal-".concat(i,"-").concat(r),className:"overflow-auto pb-4 pt-0 sm:max-h-80",children:d?(0,n.jsx)(eY.m,{}):(0,n.jsx)(eJ.Z,{scrollThreshold:.75,next:f,hasMore:p||!1,loader:(0,n.jsx)(eY.m,{}),scrollableTarget:"post-likes-modal-".concat(i,"-").concat(r),dataLength:b.length,className:"flex flex-col space-y-4",children:b.map(function(e){return(0,n.jsx)(tL.N,{member:e.community_member,hideModal:s.hide},e.id)})})})]})]})},tF=function(e){var t,r,o,i,a=e.option,l=e.selectedOptionId,s=e.setSelectedOptionId,c=e.canRespond,u=e.poll,d=e.shouldShowResults,f=(0,U.useQueryClient)(),p=(0,B.dd)(B.gk.create(function(e){return(0,n.jsx)(tU,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})).show,m=(0,U.useMutation)(function(e){return(0,eT.Cu)(K.av.polls.respond(u.id),{poll_option_id:e})},{onSuccess:function(e){(0,N.isEmpty)(e)||f.setQueryData(["poll",u.sgid],function(t){if(t){var r,n;return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t),n=n={community_member_response_option_id:a.id,results:e},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r}})}}),b=null!=(i=null==(o=u.results)||null==(r=o.detailed_results)||null==(t=r.find(function(e){return e.poll_option_id===a.id}))?void 0:t.percentage)?i:0,y=l===a.id,h="closed"===u.status,v=!c||h||!!l;return(0,n.jsxs)("div",{className:ew()("relative flex w-full items-start overflow-hidden rounded-lg border p-3.5",{"hover:border-dark hover:bg-secondary focus:border-dark group":!v,"border-darkest":y,"border-primary":!y}),"data-testid":"poll-option",children:[(0,n.jsxs)("button",{type:"button",disabled:v,onClick:function(){c&&s(a.id),m.mutate(a.id)},className:"flex w-full items-start","data-testid":"select-poll-option",children:[d&&(0,n.jsx)("div",{className:"bg-tertiary absolute inset-y-0 left-0 -z-10 size-full",style:{width:"".concat(b,"%")}}),!h&&(0,n.jsx)(tM,{checked:y}),(0,n.jsx)("div",{className:"ml-3 mr-4 flex-1 text-left",children:(0,n.jsx)(W.Z.LabelMd,{weight:"regular",children:a.value})})]},a.id),d&&(0,n.jsxs)("div",{className:"flex shrink-0 items-center space-x-1","data-testid":"poll-option-info",children:[(0,n.jsxs)(W.Z.LabelSm,{weight:"regular",children:[b,"%"]}),(0,n.jsx)(te.h,{ariaLabel:"",name:"16-chevron-right",iconSize:16,onClick:function(){p({pollId:u.id,pollOptionId:a.id,pollValue:a.value,percentage:b})},dataTestId:"open-poll-option-info"})]})]})};function t$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||tZ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tB(e){return function(e){if(Array.isArray(e))return t$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tZ(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tZ(e,t){if(e){if("string"==typeof e)return t$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t$(e,t)}}var tH=function(e){var t=e.poll,r=e.isEditable,i=e.deleteNode,a=(0,ep.wh)().currentCommunityMember,l=(0,ep.L2)().data,s=(0,e7.Y_)(l),c=tl(),u=c.handleExportPollResponses,d=c.isExporting,f=(0,B.dd)(B.gk.create(function(e){return(0,n.jsx)(tP,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),p=tz((0,o.useState)(!t.community_member_response_option_id&&!!a),2),m=p[0],b=p[1],y=tz((0,o.useState)(t.community_member_response_option_id),2),h=y[0],v=y[1],g=tz((0,o.useState)(0),2),x=g[0],j=g[1],O=!!(t.results&&"detailed_results"in t.results),w=ta();(0,o.useEffect)(function(){h&&(0,N.delay)(function(){b(!1)},15e3)},[h]);var S=!!(h&&m&&x<1);return(0,n.jsx)(e9.T,{children:(0,n.jsxs)("div",{className:"border-primary space-y-4 rounded-lg border px-6 py-5","data-testid":"poll-wrapper",children:[(0,n.jsxs)("div",{className:"text-darkest flex items-start justify-between","data-testid":"poll-header",children:[(0,n.jsx)(W.Z.TitleSm,{weight:"semibold",children:t.title}),(r||s)&&(0,n.jsx)(e4.Lt,{direction:"bottom-end",linkType:"button",button:(0,n.jsx)("div",{children:(0,n.jsx)(e4.Lt.MenuButton,{children:(0,n.jsx)(te.h,{ariaLabel:(0,F.t)("options_dropdown"),name:"16-menu-dots-horizontal"})})}),options:tB(r?[{label:(0,F.t)("tiptap.extensions.poll.edit"),onClick:function(){return f.show({pollSgid:t.sgid})},value:"edit"},{label:(0,F.t)("tiptap.extensions.poll.remove"),value:"remove",onClick:function(){return i()}}]:[]).concat(tB(s?[{label:(0,F.t)("tiptap.extensions.poll.export_responses_csv"),value:"export_csv",onClick:function(){return u(t.id)},isDisabled:d}]:[])),dataTestId:"poll-".concat(t.id,"-").concat(r?"edit":"view","-actions")})]}),(0,n.jsx)("div",{className:"space-y-3","data-testid":"poll-options",children:t.poll_options.map(function(e){return(0,n.jsx)(tF,{poll:t,option:e,canRespond:m,selectedOptionId:h,setSelectedOptionId:v,shouldShowResults:O},e.id)})}),(0,n.jsx)(tI,{poll:t,canUndo:S,undo:function(){v(void 0),b(!0),j(x+1),w.mutate(t.id)}})]})})},tq=function(e){var t,r,o=e.node,i=e.editor,a=e.deleteNode,l=ti({sgid:null==(t=o.attrs)?void 0:t.sgid,options:{enabled:!!(null==(r=o.attrs)?void 0:r.sgid)}}),s=l.data,c=l.isLoading;return(0,n.jsx)(A.T5,{as:"div",children:c||!s?(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)(eY.m,{})}):(0,n.jsx)(tH,{deleteNode:a,isEditable:i.isEditable,poll:s})})},tV=R.NB.create({name:"poll",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"polls-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["polls-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(tq)}}),tW=function(e){var t=e.editor,r=e.range,i=e.addToLocalSgidToObjectMap,a=(0,B.dd)(),l=(0,o.useRef)(null);return(0,n.jsxs)(H.u_,{isOpen:a.visible,onClose:a.remove,initialFocus:l,className:"h-full max-h-full overflow-visible",children:[(0,n.jsx)(H.u_.Overlay,{}),(0,n.jsx)(H.u_.Content,{size:"lg",shouldCloseOnOutsideClick:!0,children:(0,n.jsx)(t_,{closeModal:a.remove,onComplete:function(e){t.chain().focus().insertContentAt(r,[{type:"poll",attrs:{sgid:e.sgid}},{type:"hardBreak"}]).run(),i({sgid:e.sgid,object:e})},initialFocusRef:l})})]})},tG=r(826079);function tJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tK=function(e){var t=e.types,r=e.node;return r&&(Array.isArray(t)&&t.includes(r.type)||r.type===t)},tQ=R.hj.create({name:"trailingNode",addOptions:function(){return{node:"paragraph",notAfter:["paragraph"]}},addProseMirrorPlugins:function(){var e=this,t=new tG.H$(this.name),r=Object.entries(this.editor.schema.nodes).map(function(e){return(function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return tJ(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tJ(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]}).filter(function(t){return e.options.notAfter.includes(t.name)});return[new tG.Sy({key:t,appendTransaction:function(r,n,o){var i=o.doc,a=o.tr,l=o.schema,s=t.getState(o),c=i.content.size,u=l.nodes[e.options.node];if(s)return a.insert(c,u.create())},state:{init:function(e,t){var n=t.tr.doc.lastChild;return n&&!tK({node:n,types:r})},apply:function(e,t){return e.docChanged?!tK({node:e.doc.lastChild,types:r}):t}}})]}}),tX=r(240507),tY=r.n(tX),t0=r(22319),t1=r(293006),t2=r(522148),t3=r(426703),t6=r(134982),t5=r(866522),t8=r(41928),t7=r(443066),t9=r(497202),t4=r(946582),re=r(168204);function rt(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rr=function(){var e=(0,t4.b)(),t=function(){var e;return(e=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return[4,Promise.all(Object.keys(r).map(function(e){return t9.ZP.hide(e)}))];case 1:return e.sent(),[2]}})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){rt(i,n,o,a,l,"next",e)}function l(e){rt(i,n,o,a,l,"throw",e)}a(void 0)})})()},r=(0,o.useContext)(t9.ZP.NiceModalContext);return{openUpgradeModal:function(){e.show({feature:re.Kj,onSuccess:t}).catch(function(e){console.error("Error showing Community AI Modal:",e)})}}},rn=function(){var e,t=(0,ep.wh)(),r=t.currentCommunityMember,n=t.currentCommunity,o=t.isLoading;return{shouldShowCopilot:!o&&!!(null==r||null==(e=r.policies)?void 0:e.can_use_copilot),shouldShowPlanUpgradeModal:!o&&!(null==n?void 0:n.community_ai_feature_flag_enabled)&&!(null==n?void 0:n.content_copilot_ui_enabled)&&(null==r?void 0:r.is_admin)}},ro=function(e){var t=e.editor,r=rr().openUpgradeModal,o=rn().shouldShowPlanUpgradeModal,i=function(){var e=t.state,r=e.selection.$to.after(),n=e.selection.$from.pos,o=e.selection.$to.pos;t.chain().focus().setHighlight({color:"#B3D8FF"}).run(),t.commands.insertContentAt(r,{type:"aicopilot",attrs:{placeholder:(0,F.t)("tiptap.extensions.ai_copilot.input.edit_placeholder"),range:{from:n,to:o}}})};return(0,n.jsx)("button",{type:"button",onClick:function(){o?r():i()},className:"text-dark hover:bg-secondary rounded-md p-1.5 pr-2 transition-colors",children:(0,n.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,n.jsx)($.JO,{type:"16-ask-ai-gradient",size:16}),(0,n.jsx)(W.Z.LabelSm,{weight:"medium",color:"from-ai-start to-ai-end bg-gradient-to-r bg-clip-text text-transparent",children:(0,F.t)("tiptap.bubble_menu.ai_copilot")})]})})},ri=function(e,t){return(0,n.jsx)(n.Fragment,{children:t.map(function(t){return(0,n.jsx)(t1.p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({isActive:(0,N.isFunction)(t.isActiveFn)?t.isActiveFn():e.isActive(t.name)},t),t.name)})})},ra=function(e){var t=e.editor,r=e.shouldShowCopilot,o=e.showListsInTextModifierMenu,i=void 0!==o&&o,a=e.placement,l=e.headingLevels,s=e.allowBubbleMenuOverflow,c=(0,t6.K)(),u=(0,t0.ww)().isAdminUsageContext,d=nh(),f=(null==d?void 0:d.isWithinEmailEditor)||!1,p=(0,t8.m)(),m=(0,t3.k)(void 0===a?"top":a,void 0===s||s),b=[{name:"bold",iconType:"20-character-bold",label:(0,F.t)("tiptap.bubble_menu.bold"),onClick:function(){return t.chain().focus().toggleBold().run()}},{name:"italic",iconType:"20-character-italic",label:(0,F.t)("tiptap.bubble_menu.italic"),onClick:function(){return t.chain().focus().toggleItalic().run()}},{name:"h1",iconType:"16-heading1",label:(0,F.t)("tiptap.bubble_menu.h1"),onClick:function(){return t.chain().focus().toggleHeading({level:1}).run()},isActiveFn:function(){return t.isActive("heading",{level:1})}},{name:"h2",iconType:"20-character-h2",label:(0,F.t)("tiptap.bubble_menu.h2"),onClick:function(){return t.chain().focus().toggleHeading({level:2}).run()},isActiveFn:function(){return t.isActive("heading",{level:2})}},{name:"h3",iconType:"20-character-h3",label:(0,F.t)("tiptap.bubble_menu.h3"),onClick:function(){return t.chain().focus().toggleHeading({level:3}).run()},isActiveFn:function(){return t.isActive("heading",{level:3})}},{name:"strike",iconType:"20-character-strike",label:(0,F.t)("tiptap.bubble_menu.strike"),onClick:function(){return t.chain().focus().toggleStrike().run()}},{name:"underline",iconType:"20-character-underline",label:(0,F.t)("tiptap.bubble_menu.underline"),onClick:function(){return t.chain().focus().toggleUnderline().run()}},{name:"link",iconType:"20-character-link",label:(0,F.t)("tiptap.bubble_menu.link"),onClick:function(){return c.show({editor:t,isAdminUsageContext:u,isEmailEditor:f})}},{name:"bullet_list",iconType:"16-editor-ul",label:(0,F.t)("tiptap.bubble_menu.bullet_list"),onClick:function(){return t.chain().focus().toggleBulletList().run()}},{name:"ordered_list",iconType:"16-editor-ol",label:(0,F.t)("tiptap.bubble_menu.ordered_list"),onClick:function(){return t.chain().focus().toggleOrderedList().run()}}].filter(function(e){return("h1"!==e.name||!!l.includes(1))&&("h2"!==e.name||!!l.includes(2))&&("h3"!==e.name||!!l.includes(3))&&("bullet_list"!==e.name||!!i)&&!("ordered_list"===e.name&&!i)}),y=[{name:"align-left",iconType:"20-alignment-left",label:(0,F.t)("settings.emails.builder.align_left"),onClick:function(){return t.chain().focus().setTextAlign(t5.$.LEFT).run()},isActiveFn:function(){return(0,t7.K)(t,t5.$.LEFT)}},{name:"align-center",iconType:"20-alignment-center",label:(0,F.t)("settings.emails.builder.align_center"),onClick:function(){return t.chain().focus().setTextAlign(t5.$.CENTER).run()},isActiveFn:function(){return(0,t7.K)(t,t5.$.CENTER)}},{name:"align-right",iconType:"20-alignment-right",label:(0,F.t)("settings.emails.builder.align_right"),onClick:function(){return t.chain().focus().setTextAlign(t5.$.RIGHT).run()},isActiveFn:function(){return(0,t7.K)(t,t5.$.RIGHT)}}];return(0,n.jsx)(A.NM,{editor:t,tippyOptions:m,shouldShow:t2.E,children:(0,n.jsxs)("div",{className:"bg-primary border-primary divide-primary flex gap-1 divide-x rounded-lg border p-1 shadow-sm",children:[void 0!==r&&r&&(0,n.jsx)(ro,{editor:t}),(0,n.jsx)("div",{children:ri(t,b)}),p&&f&&(0,n.jsx)("div",{className:"flex items-center justify-center pl-2",children:ri(t,y)})]})})};function rl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}ra.propTypes={editor:tY().object.isRequired,shouldShowCopilot:tY().bool,showListsInTextModifierMenu:tY().bool,placement:tY().oneOf(["top","bottom"]),headingLevels:tY().arrayOf(tY().number),allowBubbleMenuOverflow:tY().bool};var rs=(0,o.createContext)({});rs.displayName="AiBlockContext";var rc=function(){return(0,o.useContext)(rs)},ru=function(e){var t,r=e.children,i=e.editor,a=e.node,l=e.getPos,s=e.deleteNode,c=a.attrs.range,u=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return rl(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rl(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],f=u[1];return(0,n.jsx)(rs.Provider,{value:{editor:i,node:a,getPos:l,deleteNode:s,isLoadingResponse:d,setIsLoadingResponse:f,cleanupNode:function(){c&&(i.commands.setTextSelection({from:0,to:i.state.doc.content.size}),i.chain().focus().unsetHighlight().run()),i.commands.setTextSelection(l()+1),s()}},children:r})};ru.propTypes={children:tY().element.isRequired};var rd=function(e){var t=e.children,r=(0,o.useRef)(null),i=rc(),a=i.isLoadingResponse,l=i.cleanupNode;return(0,tt.y1)("esc",l,{enableOnFormTags:["INPUT"],enableOnContentEditable:!0,enabled:!a}),(0,o.useEffect)(function(){var e=function(e){if(a){e.preventDefault(),e.stopPropagation();return}r.current&&!r.current.contains(e.target)&&l()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[a,l]),(0,n.jsx)("div",{ref:r,children:t})},rf=r(363665),rp=(0,o.forwardRef)(function(e,t){var r=e.className,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["className"]);return(0,n.jsx)(rf.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({ref:t,autoComplete:"off",minRows:1,maxRows:3,type:"text",className:ew()("text-dark placeholder:text-default w-full resize-none border-0 bg-transparent p-0 leading-5 outline-none focus:ring-0",r)},o))});rp.displayName="Input";var rm=function(e){var t=e.children,r=e.className;return(0,n.jsx)("div",{className:ew()("bg-primary flex items-start gap-3 rounded-md px-4 py-2.5 shadow-md",r),children:t})};rm.AiIcon=function(){return(0,n.jsx)("span",{className:"flex items-start",children:(0,n.jsx)($.JO,{type:"20-ask-ai-gradient",size:20,className:"size-5"})})},rm.Input=rp,rm.LoadingIcon=function(){return(0,n.jsx)("span",{className:"flex animate-spin items-center overflow-hidden",children:(0,n.jsx)($.JO,{type:"20-stardust-gradient",size:20,useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})})},rm.Text=function(e){var t,r,o=e.hasGradient,i=e.children;return(0,n.jsx)(W.Z.LabelMd,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({weight:"medium"},o&&{color:"text-transparent bg-clip-text bg-gradient-to-r from-ai-start to-ai-end"}),r=r={children:i},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},rm.EditOptions=function(e){var t=e.options,r=e.onClick,i=e.activeIndex,a=e.setActiveIndex,l=e.shouldShowEnterIcon,s=(0,o.useRef)(null);return(0,o.useEffect)(function(){s.current&&s.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[i]),(0,n.jsxs)("div",{className:"bg-primary text-dark border-primary absolute top-full mt-1 max-h-80 w-80 overflow-auto rounded-lg border p-2 shadow-xl",children:[(0,n.jsx)("div",{className:"px-4 py-0.5",children:(0,n.jsx)(W.Z.LabelXxs,{color:"text-light",weight:"semibold",children:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.title")})}),t.map(function(e,t){var o=function(){return a(t)};return(0,n.jsxs)("button",{ref:t===i?s:null,type:"button",onMouseOver:o,onFocus:o,className:ew()("text-default hover:text-dark flex w-full items-center gap-2 rounded-md px-4 py-2 text-left text-sm font-normal transition-colors",{"bg-secondary":t===i}),onClick:function(){return r({item:e,index:t})},children:[(0,n.jsx)("span",{className:"flex items-center",children:(0,n.jsx)($.JO,{type:"16-thunder",className:"!h-4 !w-4",size:16})}),(0,n.jsx)("span",{className:"text-dark",children:e.label}),t===i&&l&&(0,n.jsx)("span",{className:"ml-auto flex items-center",children:(0,n.jsx)($.JO,{type:"16-arrow-enter",className:"!h-4 !w-4",size:16})})]},e.label)})]})};var rb=function(){return(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.LoadingIcon,{}),(0,n.jsx)(rm.Text,{hasGradient:!0,children:(0,F.t)("tiptap.extensions.ai_copilot.input.generating")})]})},ry="help_write",rh=r(171476);function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rg(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rx=function(){var e,t=(e=(0,I.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rv(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createCompletion:function(e){var t,r=e.type,o=e.previous_text,i=void 0===o?"":o,a=e.user_prompt,l=e.title,s=e.onOpen,c=e.onMessage,u=e.onClose;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rh.L)("/internal_api/copilot/completions",{method:"POST",body:JSON.stringify({context:{title:l,previous_text:i,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?s():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){c(JSON.parse(e.data).content)},onclose:function(){n(!1),u()},onerror:function(e){throw n(!1),e}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){rg(i,n,o,a,l,"next",e)}function l(e){rg(i,n,o,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},rj=r(43226),rO=r.n(rj),rw=r(540539),rS=function(e){var t=e.isLoading,r=(0,ep.Zh)().setIsSubmitEnabled,n=void 0===r?rO():r,i=(0,rw.D)().setIsSubmitEnabled,a=void 0===i?rO():i;(0,o.useEffect)(function(){n(!t),a(!t)},[t,n,a])},r_=r(344815),rP=[{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.suggest_ideas.label"),value:"suggest_ideas"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.outline.label"),value:"outline"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.paragraph.label"),value:"paragraph"},{label:(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.conclusion.label"),value:"conclusion"}],rD=function(e){var t=e.onClick,r=(0,r_.t)({optionsCount:rP.length,onEnter:function(e){t(rP[e].value,(0,F.t)("tiptap.extensions.ai_copilot.prompt_options.completions.".concat(rP[e].value,".prompt_prefix")))}}),o=r.activeIndex,i=r.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:o,setActiveIndex:i,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:rP,shouldShowEnterIcon:!0})};function rk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rk(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rA=function(){var e,t,r=rE((0,o.useState)(""),2),i=r[0],a=r[1],l=rE((0,o.useState)(!1),2),s=l[0],c=l[1],u=(0,o.useRef)(null),d=rx(),f=d.createCompletion,p=d.isLoading,m=nh().aiCopilotTitle,b=rc(),y=b.editor,h=b.node,v=b.getPos,g=b.setIsLoadingResponse,x=rE((0,o.useState)(ry),2),j=x[0],O=x[1];rS({isLoading:p}),(0,o.useEffect)(function(){var e;null==(e=u.current)||e.focus()},[]),(0,o.useEffect)(function(){g(p)},[p,g]);var w=function(e){e.stopPropagation(),e.preventDefault(),i&&!s&&(c(!0),f({type:j,title:m,user_prompt:i,previous_text:y.state.doc.textBetween(0,v(),"\n",". "),onMessage:_,onOpen:P,onClose:S}))},S=function(){var e;O(ry),a(""),c(!1),null==(e=u.current)||e.focus()},_=function(e){y.commands.insertContent(e),D()},P=function(){y.commands.insertContentAt(v(),"\n"),a("")},D=function(){document.querySelectorAll(["[data-ai-scrollable]"]).forEach(function(e){e.scrollTop=e.scrollTop+24})};return p?(0,n.jsx)(rb,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{onSubmit:w,children:(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.AiIcon,{}),(0,n.jsx)(rm.Input,{ref:u,id:"input-".concat(null==(e=h.attrs)?void 0:e.id),placeholder:null==(t=h.attrs)?void 0:t.placeholder,onChange:function(e){return a(e.target.value)},value:i,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(e))}})]})}),!i&&(0,n.jsx)(rD,{onClick:function(e,t){O(e),a(t),u.current.focus()}})]})},rN=r(900795);function rT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rC(e,t,r,n,o,i,a){try{var l=e[i](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,o)}var rI=function(){var e,t=(e=(0,I.k)(!1),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return rT(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rT(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];return{createEdition:function(e){var t,r=e.type,o=e.selected_text,i=void 0===o?"":o,a=e.user_prompt,l=e.onOpen,s=e.onMessage,c=e.onClose;return(t=function(){return function(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(e){switch(e.label){case 0:return n(!0),[4,(0,rh.L)("/internal_api/copilot/editions",{method:"POST",body:JSON.stringify({context:{selected_text:i,type:r,user_prompt:a}}),headers:{Accept:"text/event-stream","Content-Type":"application/json"},onopen:function(e){e.ok&&200===e.status?l():e.status>=400&&e.status<500&&429!==e.status&&n(!1)},onmessage:function(e){s(JSON.parse(e.data).content)},onclose:function(){n(!1),c()},onerror:function(){n(!1)}})];case 1:return e.sent(),[2]}})},function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){rC(i,n,o,a,l,"next",e)}function l(e){rC(i,n,o,a,l,"throw",e)}a(void 0)})})()},isLoading:r}},rM=function(e){var t=e.onClick,r="tiptap.extensions.ai_copilot.prompt_options.editions",o=[{label:(0,F.t)("".concat(r,".improve_writing")),value:"improve_writing"},{label:(0,F.t)("".concat(r,".fix_text")),value:"fix_text"},{label:(0,F.t)("".concat(r,".make_shorter")),value:"make_shorter"},{label:(0,F.t)("".concat(r,".make_longer")),value:"make_longer"},{label:(0,F.t)("".concat(r,".simplify_language")),value:"simplify_language"},{label:(0,F.t)("".concat(r,".summarize")),value:"summarize"},{label:(0,F.t)("".concat(r,".explain")),value:"explain"},{label:(0,F.t)("".concat(r,".translate_spanish")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_french")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_dutch")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_italian")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_portuguese")),value:"translate"},{label:(0,F.t)("".concat(r,".translate_english")),value:"translate"}],i=(0,r_.t)({optionsCount:o.length,onEnter:function(e){t(o[e].value,o[e].label)}}),a=i.activeIndex,l=i.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:a,setActiveIndex:l,onClick:function(e){var r=e.item;return t(r.value,r.label)},options:o,shouldShowEnterIcon:!0})},rL=function(e){var t=e.promptResponse,r=rc(),o=r.node,i=r.editor,a=r.cleanupNode,l=o.attrs.range,s=i.state.selection.$to.after(),c=[{label:(0,F.t)("tiptap.replace_selection"),value:"replace",onClick:function(){i.commands.setTextSelection(l),i.commands.insertContentAt(l,t),a()}},{label:(0,F.t)("tiptap.insert_bellow"),value:"insert_below",onClick:function(){i.commands.insertContentAt(s,t),a()}}],u=function(e){(0,N.isFunction)(c[e].onClick)&&c[e].onClick()},d=(0,r_.t)({optionsCount:c.length,onEnter:function(e){u(e)}}),f=d.activeIndex,p=d.setActiveIndex;return(0,n.jsx)(rm.EditOptions,{activeIndex:f,setActiveIndex:p,onClick:function(e){return u(e.index)},options:c,shouldShowEnterIcon:!0})};function rR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rR(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rF=function(){var e,t,r=(0,o.useRef)(null),i=rU((0,o.useState)(""),2),a=i[0],l=i[1],s=rU((0,o.useState)(!1),2),c=s[0],u=s[1],d=rI(),f=d.createEdition,p=d.isLoading,m=rU((0,o.useState)(""),2),b=m[0],y=m[1],h=rU((0,o.useState)(""),2),v=h[0],g=h[1],x=rc(),j=x.node,O=x.editor,w=j.attrs.range,S=O.state.doc.textBetween(w.from,w.to,"\n",". "),_=rU((0,o.useState)(!1),2),P=_[0],D=_[1];rS({isLoading:p}),(0,o.useEffect)(function(){!p&&b&&D(!0)},[p,b]),(0,o.useEffect)(function(){var e;null==(e=r.current)||e.focus()},[]),(0,o.useEffect)(function(){a&&A()},[v]);var k=function(e){y(function(t){return t+e})},E=function(){l(""),g(""),u(!1),(0,N.defer)(function(){var e;null==(e=r.current)||e.focus()})},A=function(){a&&!c&&(y(""),u(!0),f({type:v||"improve_writing",user_prompt:a,selected_text:S,onMessage:k,onOpen:function(){l("")},onClose:E}))},T=function(e){e.stopPropagation(),e.preventDefault(),A()};return(0,n.jsxs)("div",{className:"bg-primary rounded-md",children:[b&&(0,n.jsx)("div",{className:"select-none p-4",children:(0,n.jsx)(rN.w,{content:b})}),p?(0,n.jsx)(rb,{}):(0,n.jsx)("form",{onSubmit:T,children:(0,n.jsxs)(rm,{children:[(0,n.jsx)(rm.AiIcon,{}),(0,n.jsx)(rm.Input,{ref:r,id:"input-".concat(null==(e=j.attrs)?void 0:e.id),placeholder:null==(t=j.attrs)?void 0:t.placeholder,onChange:function(e){return l(e.target.value)},value:a,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T(e))}})]})}),!a&&!b&&(0,n.jsx)(rM,{onClick:function(e,t){l(t),g(e)}}),P&&!a&&(0,n.jsx)(rL,{promptResponse:b})]})},r$=function(e){var t=e.editor,r=e.node,o=e.getPos,i=e.deleteNode,a=r.attrs.range;return rn().shouldShowCopilot?(0,n.jsx)(ru,{editor:t,node:r,getPos:o,deleteNode:i,children:(0,n.jsx)(A.T5,{children:(0,n.jsx)(rd,{children:(0,n.jsx)("div",{className:"mx-auto my-4 flex items-center justify-center",children:(0,n.jsx)("div",{className:"from-ai-start to-ai-end relative z-10 w-full rounded-lg bg-gradient-to-r p-0.5 shadow-xl",children:a?(0,n.jsx)(rF,{}):(0,n.jsx)(rA,{})})})})})}):null},rz=R.NB.create({name:"aicopilot",group:"block",selectable:!1,atom:!0,renderHTML:function(e){return["aicopilot",e.HTMLAttributes,0]},addAttributes:function(){return{placeholder:{default:null},id:{default:(0,N.random)()},range:{default:null},type:{default:"completion"}}},parseHTML:function(){return[{tag:"aicopilot"}]},addNodeView:function(){return(0,A.fW)(r$)},addCommands:function(){return{addAiCopilotNode:function(){return function(e){return e.commands.insertContent({type:"aicopilot",attrs:{placeholder:(0,F.t)("tiptap.extensions.ai_copilot.input.placeholder")}})}}}}}),rB=r(135218),rZ=r(589252),rH=function(e){var t,r=e.node,o=e.editor.isEditable,i=nh()||{},a=i.sgidToObjectMap,l=i.localSgidToObjectMap,s=i.addToLocalSgidToObjectMap,c=null==r||null==(t=r.attrs)?void 0:t.sgid,u=a[c]||l[c];return(0,U.useQuery)({queryKey:[K.av.richTextFields.fetchOembed({sgid:c})],enabled:!u&&o,retry:!1,retryOnMount:!1,onSuccess:function(e){null==s||s({sgid:c,object:e})}}).isLoading?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)($.JO,{type:"loader",size:16})}):u?!u.html&&u.url?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsxs)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"bg-secondary hover:bg-tertiary border-primary group relative inline-flex max-w-full items-center justify-between space-x-4 break-all rounded border px-3 py-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(W.Z.LabelSm,{weight:"semibold",children:(0,N.truncate)(u.title,{length:100})})}),u.description&&(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(W.Z.LabelSm,{children:(0,N.truncate)(u.description,{length:100})})}),(0,n.jsx)("div",{children:(0,n.jsx)(W.Z.LabelSm,{color:"text-light",children:(0,N.truncate)(u.url,{length:100})})})]}),u.thumbnail_url&&(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)("img",{loading:"lazy",src:u.thumbnail_url,alt:u.title,className:"size-16 rounded object-contain"})})]})}):(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(rZ.Z,{className:"overflow-auto",html:u.html})}):null},rq=R.NB.create({name:"embed",group:"block",atom:!0,addAttributes:function(){return{sgid:{default:null,parseHTML:function(e){return e.getAttribute("sgid")},renderHTML:function(e){return e.sgid?{sgid:e.sgid}:{}}}}},parseHTML:function(){return[{tag:"embed-react"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["embed-react",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(rH)}}),rV=r(856516),rW=r(412367),rG=function(e){var t=e.isActive,r=e.onClick,o=e.iconType;return(0,n.jsx)("button",{type:"button",onClick:r,className:ew()("text-feature-dark bg-text-editor-modifier hover:bg-text-editor-modifier-hover rounded p-1",{"bg-text-editor-modifier-active":t}),children:(0,n.jsx)(e_.l,{type:o,iconSize:16})})},rJ=r(407963),rK=function(e){var t=e.editor,r=e.node,o=e.updateAttributes,i=e.deleteNode,a=r.attrs,l=a.use_intrinsic_size&&"left"===a.alignment,s="right"===a.alignment,c=1===a.width_ratio,u=a.use_intrinsic_size&&"center"===a.alignment,d=(0,rJ.v)();return(0,n.jsx)("div",{className:(0,J.A)("invisible absolute left-0 top-0 inline-flex w-full -translate-y-full items-center pb-1 hover:visible group-hover:visible group-active:visible",{"justify-start":l,"justify-center":u,"justify-end":s||c},{"justify-end":!l&&!s&&!c&&!u}),children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier flex rounded-md p-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rG,{onClick:function(){o({alignment:"left",width_ratio:0,use_intrinsic_size:!0})},isActive:l,iconType:"16-image-left"}),(0,n.jsx)(rG,{onClick:function(){o({alignment:"center",width_ratio:0,use_intrinsic_size:!0})},isActive:u,iconType:"16-image-centre"}),(0,n.jsx)(rG,{onClick:function(){o({alignment:null,width_ratio:1,use_intrinsic_size:!0})},isActive:c,iconType:"16-image-full-width"}),(0,n.jsx)(rG,{onClick:function(){o({alignment:"right",width_ratio:0,use_intrinsic_size:!0})},isActive:s,iconType:"16-image-right"})]}),(0,n.jsx)("span",{className:"text-default m-1 inline-block w-px self-stretch bg-current","aria-hidden":!0}),(0,n.jsxs)("div",{className:"flex gap-x-1",children:[(0,n.jsx)(rG,{onClick:function(){return d.show({editor:t})},isActive:!!a.href,iconType:"16-interface-link"}),(0,n.jsx)(rG,{onClick:i,isActive:!1,iconType:"16-trash"})]})]})})};function rQ(e){var t=e.href,r=e.isEditable,o=e.children;return!t||void 0!==r&&r?(0,n.jsx)(n.Fragment,{children:o}):(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:o})}var rX=function(e){var t=e.attachmentMeta,r=e.node,o=e.editor,i=e.updateAttributes,a=e.deleteNode,l=r.attrs,s=l.alignment,c=l.width_ratio,u=l.href,d=1===c,f=o.isEditable;return(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)("div",{className:"group relative",children:(0,n.jsx)("div",{className:(0,J.A)("flex",{"justify-center":"center"===s,"justify-start":"left"===s,"justify-end":"right"===s}),children:(0,n.jsxs)("div",{className:(0,J.A)("relative inline-block",{grow:d}),children:[(0,n.jsx)(rQ,{href:u,isEditable:f,children:(0,n.jsx)("img",{loading:"lazy",alt:"",className:(0,J.A)("max-w-full",{"w-full":d}),src:t.url})}),f&&(0,n.jsx)(rK,{editor:o,node:r,deleteNode:a,updateAttributes:i})]})})})})},rY=r(839931),r0=function(e){var t=e.node,r=e.updateAttributes;return(0,n.jsx)("div",{className:"invisible absolute right-0 top-0 flex w-full -translate-y-full items-center justify-end pb-1 group-hover:visible",children:(0,n.jsxs)("div",{className:"bg-text-editor-modifier space-x-1 overflow-hidden rounded-md p-1 text-sm",children:[(0,n.jsx)(rG,{onClick:function(){r({alignment:"left",width_ratio:.5})},isActive:"left"==t.attrs.alignment,iconType:"16-image-left"}),(0,n.jsx)(rG,{onClick:function(){r({alignment:"center",width_ratio:1})},isActive:"center"==t.attrs.alignment,iconType:"16-image-centre"})]})})},r1=function(e){var t,r,o,i=e.node,a=e.editor,l=e.attachmentMeta,s=e.onClickOpenAttachmentGallery,c=e.updateAttributes,u=e.deleteNode,d=(0,ep.wh)().currentCommunitySettings,f=(null!=(o=nh())?o:{}).isWithinEmailEditor,p=!!(null==d?void 0:d.progressive_image_loading_on_post_space_enabled),m=a.isEditable,b=(0,Q.c)(l.content_type),y=m&&!f,h=m&&f,v=1;i.attrs.width_ratio?v=i.attrs.width_ratio:i.attrs.width&&(v="100%"===i.attrs.width?1:.5);var g="".concat(100*v,"%"),x=null==l||null==(t=l.metadata)?void 0:t.width,j=null==l||null==(r=l.metadata)?void 0:r.height,O=x&&j?"".concat(x," / ").concat(j):void 0;return(0,n.jsxs)("div",{style:{width:g},className:(0,J.A)("group relative",{"mx-auto":"center"===i.attrs.alignment}),children:[(0,n.jsx)("button",{type:"button",className:"w-full",onClick:s,"aria-label":(0,F.t)("tiptap.extensions.image_preview.view_attachment"),disabled:!m&&!b,children:p?(0,n.jsx)(rY.Q,{alt:"",src:l.url,className:(0,J.A)("w-full",{"cursor-zoom-in":!m&&b}),srcVariants:null==l?void 0:l.image_variants,aspectRatio:O}):(0,n.jsx)("img",{loading:"lazy",alt:"",className:(0,J.A)("w-full",{"cursor-zoom-in":!m&&b}),src:l.url})}),y&&(0,n.jsx)(r0,{node:i,updateAttributes:c}),h&&(0,n.jsx)(rK,{editor:a,node:i,updateAttributes:c,deleteNode:u})]})},r2=function(e){var t,r,o=e.editor,i=e.node,a=e.updateAttributes,l=e.deleteNode,s=(0,rW.T)().show,c=o.isEditable,u=null!=(r=nh())?r:{},d=u.localInlineAttachments,f=u.inlineAttachments,p=u.addToLocalInlineAttachments,m=u.isWithinEmailEditor,b=null==(t=i.attrs)?void 0:t.signed_id,y=(null==d?void 0:d.find(function(e){return e.signed_id===b}))||(null==f?void 0:f.find(function(e){return e.signed_id===b})),h=null==f?void 0:f.filter(function(e){return(0,Q.c)(e.content_type)});return(0,U.useQuery)({queryKey:[K.av.richTextFields.fetchAttachment({signedId:b})],enabled:!y&&c,retry:!1,retryOnMount:!1,onSuccess:p}).isLoading?(0,n.jsx)(A.T5,{as:"div",className:"my-4",children:(0,n.jsx)($.JO,{type:"loader",size:16})}):y?m&&(i.attrs.use_intrinsic_size||i.attrs.href)?(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(rX,{node:i,editor:o,attachmentMeta:y,updateAttributes:a,deleteNode:l})}):(0,n.jsx)(A.T5,{as:"div",children:(0,n.jsx)(r1,{node:i,editor:o,attachmentMeta:y,onClickOpenAttachmentGallery:function(){c||s({attachments:h,startIndex:null==h?void 0:h.findIndex(function(e){return e.signed_id==y.signed_id})})},updateAttributes:a,deleteNode:l})}):(0,n.jsxs)(A.T5,{as:"div",className:"bg-tertiary group flex items-start gap-2 rounded-md p-4",children:[c&&(0,n.jsx)(et,{onClick:l}),(0,n.jsx)($.JO,{type:"16-trash-bin-2",size:20}),(0,n.jsx)(W.Z.BodySm,{as:"span",children:(0,F.t)("tiptap.file_not_found")})]})},r3=R.NB.create({name:"image",group:"block",atom:!0,addAttributes:function(){return{url:{default:null},signed_id:{default:null},content_type:{default:null},width:{},width_ratio:{},alignment:{default:"center"},use_intrinsic_size:{default:!1},href:{default:null}}},parseHTML:function(){return[{tag:"img-resizable"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["img-resizable",(0,R.P1)(t)]},addNodeView:function(){return(0,A.fW)(r2)}}),r6=r(706233),r5=r(886331),r8=r(566019),r7=function(e){var t,r=e.activeMenuIndex,i=e.setActiveMenuIndex,a=e.flattenedCommands,l=e.item,s=e.editor,c=e.range,u=(null==(t=a[r])?void 0:t.name)===l.name,d=(0,o.useRef)();(0,o.useEffect)(function(){u&&d.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[u]);var f=function(){i(a.findIndex(function(e){return e.name===l.name}))};return(0,n.jsxs)("button",{type:"button",ref:d,onClick:function(){document.exitPointerLock&&document.exitPointerLock(),l.command({editor:s,range:c})},onMouseOver:f,onFocus:f,className:ew()("text-dark flex items-center space-x-2 px-5 py-2 first:pt-2",{"bg-tertiary":u}),children:[(0,n.jsx)($.JO,{type:l.icon,size:16}),(0,n.jsx)("div",{children:(0,n.jsx)(W.Z.LabelSm,{children:l.title})})]},l.name)},r9=function(e){var t=e.editor,r=e.range,n=e.activeMenuIndex,i=e.setActiveMenuIndex,a=e.items,l=e.ref,s=function(){n<a.length-1?i(n+1):i(0)},c=function(){n>0?i(n-1):i(a.length-1)},u=function(){var e;return null==(e=a[n])?void 0:e.command({editor:t,range:r})};(0,o.useImperativeHandle)(l,function(){return{onKeyDown:function(e){var t=e.event;if(["ArrowDown","ArrowUp","Enter"].includes(t.key)){switch(t.preventDefault(),t.stopPropagation(),document.body.requestPointerLock&&document.body.requestPointerLock(),t.key){case"ArrowDown":s();break;case"ArrowUp":c();break;case"Enter":u(),document.exitPointerLock&&document.exitPointerLock()}return!0}return!1}}})};function r4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=(0,o.forwardRef)(function(e,t){var r,i=e.items,a=e.editor,l=e.range,s=(r=(0,o.useState)(0),function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(r,2)||function(e,t){if(e){if("string"==typeof e)return r4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r4(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1],d=i.flatMap(function(e){return e.commands});return(r9({ref:t,editor:a,range:l,items:d,activeMenuIndex:c,setActiveMenuIndex:u}),(0,o.useEffect)(function(){if(document.exitPointerLock){var e=function(){document.exitPointerLock()};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}},[]),i.length)?(0,n.jsx)("div",{className:"bg-primary border-primary relative max-h-[50vh] min-w-[250px] max-w-[320px] overflow-auto rounded border py-2 text-sm shadow-md","data-testid":"slash-commands-list",children:(0,n.jsx)("div",{className:"flex flex-col",children:i.map(function(e){return e.commands.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center space-x-2 px-5 py-2 uppercase first:pt-2",children:(0,n.jsx)(W.Z.LabelXxs,{color:"text-light",children:e.name})},e.name),e.commands.map(function(e){return(0,n.jsx)(r7,{activeMenuIndex:c,setActiveMenuIndex:u,flattenedCommands:d,item:e,editor:a,range:l},e.name)})]}):null})})}):null});ne.displayName="CommandsList";var nt=[{name:"youtube",title:(0,F.t)("tiptap.slash_commands.youtube")},{name:"wistia",title:(0,F.t)("tiptap.slash_commands.wistia")},{name:"vimeo",title:(0,F.t)("tiptap.slash_commands.vimeo")},{name:"loom",title:(0,F.t)("tiptap.slash_commands.loom")},{name:"soundcloud",title:(0,F.t)("tiptap.slash_commands.soundcloud")},{name:"spotify",title:(0,F.t)("tiptap.slash_commands.spotify")},{name:"simplecast",title:(0,F.t)("tiptap.slash_commands.simplecast")},{name:"instagram",title:(0,F.t)("tiptap.slash_commands.instagram")},{name:"facebook",title:(0,F.t)("tiptap.slash_commands.facebook")},{name:"twitter",title:(0,F.t)("tiptap.slash_commands.twitter")},{name:"typeform",title:(0,F.t)("tiptap.slash_commands.typeform")},{name:"airtable",title:(0,F.t)("tiptap.slash_commands.airtable")},{name:"github",title:(0,F.t)("tiptap.slash_commands.github")},{name:"google-maps",title:(0,F.t)("tiptap.slash_commands.google_maps")},{name:"codepen",title:(0,F.t)("tiptap.slash_commands.codepen")}];function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nn=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,o=e.showGiphyPickerModal,i=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.openUpgradeModal,c=e.shouldShowPlanUpgradeModal,u=nt.map(function(e){var r=e.name,n=e.title;return{name:r,title:n,icon:"16-editor-".concat(r),command:function(e){return t({editor:e.editor,range:e.range,provider:n})}}}),d=[{name:"ai_copilot",title:(0,F.t)("tiptap.slash_commands.co_pilot"),icon:"20-community-ai",command:function(e){var t=e.editor,r=e.range;c?s():t.chain().focus().deleteRange(r).addAiCopilotNode().run()}},{name:"paragraph",title:(0,F.t)("tiptap.slash_commands.paragraph"),icon:"16-editor-paragraph",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("paragraph").run()}},{name:"h1",title:(0,F.t)("tiptap.slash_commands.heading_1"),icon:"16-heading1",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:1}).run()}},{name:"h2",title:(0,F.t)("tiptap.slash_commands.heading_2"),icon:"16-editor-h2",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:2}).run()}},{name:"h3",title:(0,F.t)("tiptap.slash_commands.heading_3"),icon:"16-editor-h3",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setNode("heading",{level:3}).run()}},{name:"ordered_list",title:(0,F.t)("tiptap.slash_commands.number_list"),icon:"16-editor-ol",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleOrderedList().run()}},{name:"bullet_list",title:(0,F.t)("tiptap.slash_commands.bullet_list"),icon:"16-editor-ul",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBulletList().run()}},{name:"block-quote",title:(0,F.t)("tiptap.slash_commands.blockquote"),icon:"16-editor-quote",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleBlockquote().run()}},{name:"divider",title:(0,F.t)("tiptap.slash_commands.divider"),icon:"16-editor-divider",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).setHorizontalRule().run()}},{name:"code",title:(0,F.t)("tiptap.slash_commands.code"),icon:"16-editor-code",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).toggleCodeBlock().run()}},{name:"emoji",title:(0,F.t)("tiptap.slash_commands.emoji"),icon:"16-editor-emoji",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent(":").run()}},{name:"mention",title:(0,F.t)("tiptap.slash_commands.mention"),icon:"16-editor-mention",command:function(e){var t=e.editor,r=e.range;t.chain().focus().deleteRange(r).insertContent("@").run()}},{name:"cta",title:(0,F.t)("tiptap.slash_commands.cta"),icon:"16-link",command:a}],f=[{name:"poll",title:(0,F.t)("tiptap.slash_commands.poll"),icon:"16-editor-poll",command:i},{name:"image",title:(0,F.t)("tiptap.slash_commands.image"),icon:"16-editor-image",command:r},{name:"file",title:(0,F.t)("tiptap.slash_commands.file"),icon:"16-editor-file",command:n},{name:"audio",title:(0,F.t)("tiptap.slash_commands.audio"),icon:"16-editor-audio",command:function(e){return n({editor:e.editor,range:e.range,type:"audio"})}},{name:"voice_message",title:(0,F.t)("tiptap.slash_commands.voice_message"),icon:"16-microphone",command:l},{name:"video",title:(0,F.t)("tiptap.slash_commands.video"),icon:"16-editor-video",command:function(e){return n({editor:e.editor,range:e.range,type:"video"})}},{name:"pdf",title:(0,F.t)("tiptap.slash_commands.pdf"),icon:"16-editor-pdf",command:function(e){return n({editor:e.editor,range:e.range,type:"pdf"})}},{name:"giphy",title:(0,F.t)("tiptap.slash_commands.giphy"),icon:"16-editor-giphy",command:o}],p=[{name:"embed",title:(0,F.t)("tiptap.slash_commands.embed"),icon:"16-editor-embed",command:t}].concat(function(e){if(Array.isArray(e))return nr(e)}(u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return nr(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(e,t)}}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return[{name:(0,F.t)("tiptap.slash_commands.basic"),commands:d},{name:(0,F.t)("tiptap.slash_commands.upload"),commands:f},{name:(0,F.t)("tiptap.slash_commands.embed"),commands:p}]};function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function na(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var nl={ai_copilot:["ai_copilot"],mention:["mention"],poll:["poll"],cta:["cta"]};let ns=function(e){var t=e.showEmbedModal,r=e.showImagePickerModal,n=e.showFileUploadModal,o=e.showGiphyPickerModal,i=e.showPollModal,a=e.showCTASettingsModal,l=e.showVoiceMessageModal,s=e.disabledExtensions,c=e.disabledSlashMenuCategories,u=e.disabledSlashMenuCommands,d=e.shouldShowPlanUpgradeModal,f=e.openUpgradeModal,p=e.headingLevels;Object.entries(nl).forEach(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return no(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],n=t[1];s[r]&&n.forEach(function(e){u[e]=!0})});var m=function(e,t){if("Basic"===t.name){var r=t.commands.filter(function(e){return p.includes(1)?p.includes(2)?!!p.includes(3)||"h3"!==e.name:"h2"!==e.name:"h1"!==e.name});if(r.length>0)return e.push(na(ni({},t),{commands:r})),e}return e.push(t),e};return R.hj.create({addOptions:function(){return{suggestion:{char:"/",pluginKey:new tG.H$("slash-commands"),items:function(e){var s=e.query;return Object.values(nn({showEmbedModal:t,showImagePickerModal:r,showFileUploadModal:n,showGiphyPickerModal:o,showPollModal:i,showCTASettingsModal:a,showVoiceMessageModal:l,shouldShowPlanUpgradeModal:d,openUpgradeModal:f})).map(function(e){return na(ni({},e),{commands:e.commands.filter(function(e){return!u[e.name]&&e.title.toLowerCase().includes(s.toLowerCase())})})}).filter(function(e){return!c[e.name]&&!(0,N.isEmpty)(e.commands)}).reduce(m,[])},render:function(){var e,t;return{onStart:function(r){e=new A.M_(ne,{props:r,editor:r.editor}),t=(0,r8.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:function(){return r.editor.options.element},content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"auto-end",theme:"light-border",zIndex:999,onHidden:function(){e.destroy()}})},onUpdate:function(r){e.updateProps(r),r.items.length<1?(t[0].hide(),e&&e.destroy()):(t[0].show(),t[0].setProps({getReferenceClientRect:r.clientRect}))},onKeyDown:function(r){var n;return"Escape"===r.event.key?(t[0].hide(),r.event.preventDefault(),r.event.stopPropagation(),!0):null==(n=e.ref)?void 0:n.onKeyDown(r)},onExit:function(){t&&t[0].destroy(),e&&e.destroy()}}}}}},addProseMirrorPlugins:function(){return[(0,r5.ZP)(ni({editor:this.editor},this.options.suggestion))]}})};function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){nu(e,t,r[t])})}return e}function nf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function np(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||nm(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){if(e){if("string"==typeof e)return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(e,t)}}var nb=function(e){return!!e},ny=(0,o.createContext)(null);ny.displayName="BlockEditorContext";var nh=function(){return(0,o.useContext)(ny)};Promise.all([r.e("5622"),r.e("7813")]).then(r.bind(r,488921)).then(function(e){e.default.highlightAll()}).catch(console.error);var nv=function(e){var t=e.aiCopilotTitle,r=e.allowBubbleMenuOverflow,R=e.className,U=e.disabledExtensions,F=e.disabledSlashMenuCategories,$=e.disabledSlashMenuCommands,z=e.disableMentionClicks,Z=e.editorClassName,H=e.editorRef,q=e.inlineAttachments,V=e.isMediaUploadAllowed,W=void 0===V||V,G=e.isVoiceMessageAllowed,K=void 0!==G&&G,Q=e.onChange,X=e.onFocusChange,Y=e.onLocalAttachmentsChange,ee=e.onLocalSgidToObjectMapChange,et=e.openInternalLinksInCurrentTab,er=e.placeholder,en=e.readOnly,eo=void 0!==en&&en,es=e.sgidToObjectMap,ec=e.shouldPreviewFilesAsLinks,eu=e.shouldShowTextModifiersMenu,ed=e.spaceId,ef=e.textModifierPlacement,ep=e.showListsInTextModifierMenu,em=e.shouldSupportTables,eb=void 0!==em&&em,ey=e.maxFileUploadSize,ej=e.toolbars,eO=e.value,ew=e.shouldRefetch,eS=void 0!==ew&&ew,e_=e.headingLevels,eP=void 0===e_?[2,3]:e_,ek=e.isWithinEmailEditor,eE=void 0!==ek&&ek,eT=(0,rV.d)(),eC=(0,r6.d)(),eI=(0,ea.Z)(),eL=(0,eD.Y)(),eR=(0,B.dd)(e8),eU=(0,B.dd)(B.gk.create(function(e){return(0,n.jsx)(tW,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})),eF=(0,B.dd)(eh),e$=np((0,o.useState)({}),2),ez=e$[0],eB=e$[1],eZ=np((0,o.useState)([]),2),eH=eZ[0],eq=eZ[1],eV=np((0,I.k)(!1),3),eG=eV[0],eJ=eV[2],eK=rn(),eQ=eK.shouldShowCopilot,eX=eK.shouldShowPlanUpgradeModal,eY=rr().openUpgradeModal,e0=(0,t8.m)(),e1=(0,C.X)(),e2=np([void 0===U?[]:U,void 0===F?[]:F,void 0===$?[]:$].map(function(e){return Object.fromEntries(e.map(function(e){return[e,!0]}))}),3),e3=e2[0],e6=e2[1],e5=e2[2];e3.ai_copilot=e3.ai_copilot||!(eQ||eX)||eo,e3.voice_message=e3.voice_message||!K||!e1,e5.voice_message=e5.voice_message||!K||!e1,W||(e3.file=!0,e3.image=!0,e3.file_loader=!0,e5.file=!0,e5.image=!0,e5.video=!0,e5.audio=!0,e5.pdf=!0,e5.giphy=!0);var e7=function(e){var t=e.sgid,r=e.object;eB(function(e){return nf(nd({},e),nu({},t,r))}),(0,N.isFunction)(ee)&&ee(nf(nd({},ez),nu({},t,r)))},e9=function(e){eq(function(t){var r=((function(e){if(Array.isArray(e))return nc(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||nm(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]);return(0,N.isFunction)(Y)&&Y(r),r})},e4=function(e){return eC.show(nf(nd({},e),{addToLocalInlineAttachments:e9,isWithinEmailEditor:eE}))},te=function(e){return eR.show(nf(nd({},e),{addToLocalInlineAttachments:e9}))},tt=function(e){return eI.show(nf(nd({},e),{maxFileUploadSize:ey,addToLocalInlineAttachments:e9,addToLocalSgidToObjectMap:e7}))},tr=function(e){return eU.show(nf(nd({},e),{addToLocalSgidToObjectMap:e7}))},tn=function(e){return eF.show(nf(nd({},e),{addToLocalInlineAttachments:e9}))},to=[!e3.blockquote&&i.ZP,a.ZP,v.ZP,O.ZP,ex.a,c.Z,d.Z,f.Z,p.Z,eb&&w.ZP.configure({resizable:!1}),eb&&S.Z,eb&&_.Z,eb&&P.Z,!e3.code_block&&s.Z.configure({lowlight:T.$,HTMLAttributes:{spellCheck:"false"}}),!e3.headings&&m.Z.configure({levels:eP}),y.Z,l.ZP,rB.E,g.ZP,x.Z,D.Z,e0&&eE&&k.Z.configure({types:Array.from(t5.M),alignments:[t5.$.LEFT,t5.$.RIGHT,t5.$.CENTER]}),E.ZP,b.ZP.configure({multicolor:!0}),ev.P.configure({openInternalLinksInCurrentTab:void 0===et||et,openOnClick:!1,autolink:!1}),j.Z.configure({placeholder:er,emptyEditorClass:"is-block-editor-empty text-light",emptyNodeClass:"is-empty",showOnlyWhenEditable:!1,showOnlyCurrent:!1}),!e3.horizontal_rule&&h.Z,!e3.file&&ei,el.r,eM,!e3.file_loader&&eW,!e3.ai_copilot&&rz,!e3.slash_commands&&ns({showEmbedModal:function(e){return eT.show(nf(nd({},e),{addToLocalSgidToObjectMap:e7}))},showImagePickerModal:e4,showFileUploadModal:tt,showGiphyPickerModal:te,showPollModal:tr,showCTASettingsModal:function(e){return eL.show(nf(nd({},e),{addToLocalSgidToObjectMap:e7,isWithinEmailEditor:eE}))},showVoiceMessageModal:tn,disabledExtensions:e3,disabledSlashMenuCategories:e6,disabledSlashMenuCommands:e5,shouldShowPlanUpgradeModal:eX,openUpgradeModal:eY,headingLevels:eP}),!e3.embeds&&rq,!e3.image&&r3,!e3.mention&&eg.z,!e3.entities&&M.Y,!e3.poll&&tV,!e3.cta&&eA,!eo&&tQ,eN,u.Z.configure({width:2})].filter(nb);(0,o.useEffect)(function(){(0,N.isFunction)(X)&&X(eG)},[eG,X]);var ti=(0,N.debounce)(function(e){var t=e.editor.getJSON();Q&&Q(t)},200),ta=(0,A.jE)({extensions:to,onUpdate:ti,onFocus:function(){eJ(!0)},onBlur:function(){eJ(!1)},content:eO,editable:!eo,editorProps:{transformPastedHTML:function(e){var t=(0,L.n)(e);return t.length&&(0,L.S)({sgids:t,setLocalSgidToObjectMap:eB}),e},attributes:{focus:"",class:(0,J.A)("z-0 max-w-none whitespace-pre-wrap bg-transparent border-none ring-0 circle-block-editor text-dark",Z),"data-readonly":eo}}});H&&(H.current=ta),(0,o.useEffect)(function(){eS&&eo&&ta&&(0,N.defer)(function(){return ta.commands.setContent(eO)})},[ta,eO,eS,eo]),(0,o.useEffect)(function(){ta&&eo===ta.isEditable&&ta.setEditable(!eo)},[eo,ta]);var tl=function(e){!e3.file&&ta&&ta.chain().focus().insertContent(Array.from(e).map(function(e){return{type:"file-loader",attrs:{file:e}}})).run()};return(0,n.jsxs)(ny.Provider,{value:{sgidToObjectMap:void 0===es?{}:es,inlineAttachments:void 0===q?[]:q,localSgidToObjectMap:ez,addToLocalSgidToObjectMap:e7,localInlineAttachments:eH,addToLocalInlineAttachments:e9,spaceId:ed,aiCopilotTitle:t,shouldPreviewFilesAsLinks:void 0!==ec&&ec,type:"block",disableMentionClicks:void 0!==z&&z,isWithinEmailEditor:eE},children:[ta&&(void 0===eu||eu)&&(0,n.jsx)(ra,{shouldShowCopilot:!e3.ai_copilot,editor:ta,headingLevels:eP,placement:void 0===ef?"top":ef,showListsInTextModifierMenu:void 0!==ep&&ep,allowBubbleMenuOverflow:void 0===r||r}),ej&&ej.map(function(e){var t=e.portalId,r=e.component;return(0,n.jsx)(r,{editor:ta,isEditorFocused:eG,portalId:t,showImagePickerModal:e4,showFileUploadModal:tt,showGiphyPickerModal:te,showPollModal:tr,showVoiceMessageModal:tn,disabledExtensions:e3},"editor-toolbar-for-".concat(t))}),(0,n.jsx)(A.kg,{onPaste:function(e){var t,r;W&&(null==(r=e.clipboardData)||null==(t=r.files)?void 0:t.length)>0&&tl(e.clipboardData.files)},onDrop:function(e){if(!ta||!W)return null;e.preventDefault();var t={left:e.clientX,top:e.clientY},r=ta.view.posAtCoords(t);if(r)return Array.from(e.dataTransfer.files).forEach(function(e){ta.chain().focus().insertContentAt(r.pos,{type:"file-loader",attrs:{file:e}}).run()})},className:R,editor:ta,"data-testid":"tip-tap-editor-content"})]})}},443066:function(e,t,r){r.d(t,{K:()=>o});var n=r(866522),o=function(e,t){var r=n.M.some(function(r){return e.isActive(r,{textAlign:t})});return t===n.$.LEFT?r||!n.M.some(function(t){return[n.$.CENTER,n.$.RIGHT].some(function(r){return e.isActive(t,{textAlign:r})})}):r}},579659:function(e,t,r){r.d(t,{Z:()=>l});var n=r(552676),o=r(619803),i=r.n(o),a=r(739792),l=function(e){var t=e.field,r=e.value,o=e.disabled,l=e.onChange,s=e.variant,c=void 0===s?"default":s,u=e.className,d=e.labelClassName,f=e.wrapperClassName,p=e.label,m=void 0===p?(0,a.t)("toggle_switch"):p;return(0,n.jsxs)("div",{className:i()("toggle-switch",f,{"toggle-switch--small":"default"===c,"toggle-switch--large":"large"===c}),id:"field-".concat(t),children:[(0,n.jsx)("input",{type:"checkbox",name:t,id:"checkbox-".concat(t),checked:void 0!==r&&r,onChange:l,disabled:void 0!==o&&o,className:i()("peer",u)}),(0,n.jsx)("label",{htmlFor:"checkbox-".concat(t),className:i()("bg-toggle-unchecked before:bg-toggle-circle-unchecked peer-checked:bg-toggle-checked before:peer-checked:bg-toggle-circle-checked relative",d),children:(0,n.jsx)("span",{className:"sr-only",children:m})})]})}},479840:function(e,t,r){r.d(t,{sI:()=>f,Zh:()=>n.Z});var n=r(579659),o=r(552676),i=r(701168),a=r(43226),l=r.n(a),s=r(739792),c=r(957363),u=r(380171),d=r(876987),f=function(e){var t=e.label,r=void 0===t?(0,s.t)("toggle_switch"):t,a=e.field,f=e.value,p=void 0!==f&&f,m=e.onChange,b=void 0===m?l():m,y=e.tooltipText,h=e.className,v=e.labelClassName,g=e.toggleSwitchClassName,x=e.toggleSwitchLabelClassName,j=e.variant,O=void 0===j?"default":j,w=e.disabled,S=void 0!==w&&w;return(0,o.jsxs)("div",{className:(0,i.A)("flex flex-row items-center justify-between",h),children:[y?(0,o.jsxs)("span",{className:"text-default flex items-center",children:[r,(0,o.jsx)(u.T,{content:y,className:"inline-flex",children:(0,o.jsx)(c.JO,{type:"question-mark",className:"ml-2 !w-3"})})]}):(0,o.jsx)("span",{className:(0,i.A)("text-default",v),children:r}),(0,o.jsx)("div",{id:"field-".concat(a),className:"flex items-center",children:"small"===O?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"checkbox",name:a,id:"checkbox-".concat(a),checked:p,onChange:b,disabled:S,className:"peer hidden"}),(0,o.jsxs)("label",{className:(0,i.A)("m-0",{"cursor-not-allowed opacity-10":S}),htmlFor:"checkbox-".concat(a),children:[(0,o.jsx)(d.r,{as:"span",checked:p,onChange:b}),(0,o.jsx)("span",{className:"sr-only",children:r})]})]}):(0,o.jsx)(n.Z,{field:a,value:p,onChange:b,variant:O,disabled:S,wrapperClassName:g,labelClassName:x})})]})}},635973:function(e,t,r){r.d(t,{D:()=>d});var n=r(552676),o=r(275271),i=r(739792),a=r(547144),l=r(263271),s=r(957363),c=r(381636);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r=e.url,d=e.onNewMediaTranscript,f=e.onMediaTranscriptUpdated,p=e.mediaTranscript,m=e.isLoading,b=(t=(0,o.useState)(!1),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=b[0],h=b[1],v=(0,o.useRef)(!1),g=function(){return h(!0)};(0,l.s)({channel:"MediaTranscriptChannel",url:r,onMessageReceive:function(e){var t,r;"newMediaTranscript"===e.event?(g(),null==d||d(null==(t=e.json_message)?void 0:t.id)):"mediaTranscriptUpdated"===e.event&&(v.current||g(),null==f||f(null==(r=e.json_message)?void 0:r.id))}});var x=null==p?void 0:p.supports_ai;return!y||m?null:(0,n.jsxs)("div",{className:"bg-primary absolute left-5 top-5 z-10 flex w-2/3 max-w-sm items-start gap-3 rounded-md p-4 shadow-xl",children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(s.JO,{type:"20-ai"})}),(0,n.jsxs)("div",{className:"flex grow flex-col gap-4",children:[(0,n.jsx)(c.Z.LabelSm,{as:"div",children:(0,i.t)("media_player.transcript_notification_message")}),!x&&(0,n.jsxs)(c.Z.LabelSm,{as:"div",children:[(0,n.jsx)("span",{children:"".concat((0,i.t)("media_player.transcript_notification_upgrade_message")," ")}),(0,n.jsx)("a",{className:"cursor-pointer",href:(0,a.xn)(),target:"_blank",rel:"noreferrer",children:(0,i.t)("media_player.transcript_notification_upgrade_link")})]})]}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(s.JO,{type:"20-close",onClick:function(){v.current=!0,h(!1)},className:"cursor-pointer"})})]})}},538431:function(e,t,r){r.d(t,{P:()=>s});var n=r(552676),o=r(739792),i=r(380171),a=r(775148),l=(0,o.t)("close"),s=function(e){var t=e.onClick;return(0,n.jsx)(i.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"close",variant:"secondary",onClick:t,ariaLabel:l})})}},316295:function(e,t,r){r.d(t,{N:()=>c});var n=r(552676),o=r(619803),i=r.n(o),a=r(5179),l=r(381636),s=r(839869),c=function(e){var t,r=e.cue,o=e.isCurrentCue,c=void 0!==o&&o,u=e.shouldScroll,d=e.onSeek,f=(0,a.g)(c&&(void 0===u||u));return(0,n.jsxs)("button",{type:"button",className:i()("flex cursor-pointer items-start gap-3 p-1 text-left hover:underline",{"bg-secondary":c}),onClick:function(e){e.stopPropagation(),d(r.startTime)},ref:f,children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(l.Z.BodySm,{as:"div",color:c?"text-dark":"text-light",weight:c?"semibold":"normal",children:(0,s.Ly)(null==(t=r.startTime)?void 0:t.toString())})}),(0,n.jsx)(l.Z.LabelSm,{as:"div",color:"text-dark",weight:c?"semibold":"normal",children:r.text})]})}},665648:function(e,t,r){r.d(t,{d:()=>s});var n=r(552676),o=r(739792),i=r(380171),a=r(775148),l=(0,o.t)("live_streams.room.button_tooltips.fullscreen"),s=function(e){var t=e.onClick;return(0,n.jsx)(i.T,{content:l,interactive:!1,children:(0,n.jsx)(a.h,{name:"fullscreen",variant:"secondary",onClick:t,ariaLabel:l})})}},740881:function(e,t,r){r.d(t,{n:()=>b});var n=r(552676),o=r(275271),i=r(739792),a=r(957363),l=r(437416),s=r(381636),c=r(316295),u=r(932699),d=function(e){var t=e.onChange,r=void 0===t?u.noop:t;return(0,n.jsx)("input",{type:"search",placeholder:(0,i.t)("media_player.search"),className:"shadow-xs placeholder:text-light border-primary w-full rounded-lg placeholder:opacity-100",onChange:r})},f=r(839869),p=r(796378);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t,r=e.isOpen,u=e.onClose,b=e.cues,y=e.onSeek,h=e.currentTime,v=e.children,g=(t=(0,o.useState)(""),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return m(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=g[0],j=g[1],O=(0,p.g)(),w=O.containerRef,S=O.shouldAutoScroll,_=b.filter(function(e){return!x||e.text.toLowerCase().includes(x.toLowerCase())});return(0,n.jsx)(l.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!0,isOpen:r,contentPortalId:"fullscreen-transcripts-portal",position:"bottom",onClose:u,children:(0,n.jsxs)("div",{className:"flex h-full overflow-hidden",children:[(0,n.jsx)("div",{className:"bg-dark relative flex-1",children:(0,n.jsx)("div",{id:"transcripts-fullscreenmodal-player",className:"flex size-full items-center justify-center",children:v})}),(0,n.jsxs)("div",{className:"border-primary flex w-1/3 max-w-sm shrink-0 flex-col border-l",children:[(0,n.jsxs)("div",{className:"border-primary mb-2 flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,n.jsx)(a.JO,{type:"20-ai",size:20}),(0,n.jsx)(s.Z.LabelLg,{weight:"semibold",children:(0,i.t)("media_player.transcript")})]}),(0,n.jsx)("div",{className:"px-4 py-2",children:(0,n.jsx)(d,{onChange:function(e){return j(e.target.value)}})}),(0,n.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,n.jsx)("div",{className:"h-full overflow-auto p-4",ref:w,children:_.map(function(e){return(0,n.jsx)(c.N,{cue:e,isCurrentCue:(0,f.O4)(e,h),shouldScroll:S,onSeek:y},"transcript-fullscreen-".concat(e.startTime))})})})]})]})})}},839869:function(e,t,r){r.d(t,{Ly:()=>i,O4:()=>a});var n=r(932699),o=function(e){return(0,n.padStart)(e.toString(),2,"0")},i=function(e){var t=Number(e),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),i=Math.floor(t-3600*r-60*n);return r?"".concat(o(r),":").concat(o(n),":").concat(o(i)):"".concat(o(n),":").concat(o(i))},a=function(e,t){if(!e)return!1;var r=e.startTime,n=e.endTime;return t>=r&&t<n}},201157:function(e,t,r){r.d(t,{Y:()=>y});var n=r(552676),o=r(275271),i=r(309757),a=r(739792),l=r(381636),s=r(538431),c=r(316295),u=r(665648),d=r(740881),f=r(839869),p=r(796378);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(e){var t=e.onSeek,r=e.onFullscreenSeek,m=e.onFullscreenToggle,y=e.renderFullscreenPlayer,h=e.cues,v=void 0===h?[]:h,g=e.currentTime,x=(0,o.useRef)(null),j=b((0,o.useState)(!1),2),O=j[0],w=j[1],S=b((0,o.useState)(!1),2),_=S[0],P=S[1],D=function(){return w(!O)};(0,i.Z)(x,function(){return w(!1)});var k=(0,p.g)(),E=k.containerRef,A=k.shouldAutoScroll,N=function(){null==m||m(),w(!1),P(!_)};if(!(null==v?void 0:v.length))return null;var T=v[0]||{text:"",startTime:0};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("blockquote",{children:[(0,n.jsx)(l.Z.BodyXs,{as:"div",children:T.text}),(0,n.jsx)("div",{children:(0,n.jsxs)("button",{type:"button",className:"text-link relative cursor-pointer text-xs hover:underline",onClick:D,ref:x,children:[O?(0,a.t)("media_player.hide_transcript"):(0,a.t)("media_player.show_transcript"),O&&(0,n.jsxs)("div",{className:"bg-primary border-light absolute bottom-0 left-full z-20 ml-2 flex h-72 w-96 flex-col rounded-md border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex shrink-0 items-start justify-between",children:[(0,n.jsx)(l.Z.BodyMd,{as:"div",color:"text-dark",children:(0,a.t)("media_player.transcript")}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(u.d,{onClick:N}),(0,n.jsx)(s.P,{onClick:D})]})]}),(0,n.jsx)("div",{className:"grow overflow-auto",ref:E,children:v.map(function(e){return(0,n.jsx)(c.N,{cue:e,isCurrentCue:(0,f.O4)(e,g),shouldScroll:A,onSeek:t},"transcript-".concat(e.startTime))})})]})]})})]}),(0,n.jsx)(d.n,{isOpen:_,onClose:N,cues:v,onSeek:r,currentTime:g,children:y()})]})}},796378:function(e,t,r){r.d(t,{g:()=>i});var n=r(275271);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i=function(){var e,t=(0,n.useRef)(null),r=(e=(0,n.useState)(!0),function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],a=r[1],l=t.current;return(0,n.useEffect)(function(){var e=function(){return a(!1)};return null==l||l.addEventListener("mousewheel",e),function(){return null==l?void 0:l.removeEventListener("mousewheel",e)}},[l]),{containerRef:t,shouldAutoScroll:i}}},354191:function(e,t,r){r.d(t,{T:()=>eD});var n=r(552676);r(537840);var o=r(271738),i=r(60878),a=r(228341),l=r(851037),s=r(275271),c=r(441342),u=r(78456),d=r(547144),f=r(961217),p=r(908706),m=r(932699),b=r(93785),y=r.n(b),h=r(739792),v=r(701168),g=r(434502),x=function(e){var t=e.id,r=e.contentType,o=e.children,i=e.poster,a=e.preload,l=void 0===a?"none":a,c=e.signedId,u=null==r?void 0:r.match("audio.*"),d=(0,s.useRef)(null);return((0,g.p)(d,c),u)?(0,n.jsx)("audio",{id:t,preload:l,controls:!0,children:o}):(0,n.jsx)("video",{id:t,preload:l,controls:!0,poster:i,"data-poster":i,"data-testid":"media-player",ref:d,children:o})};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t;return null!=(t=HTMLMediaElement)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t},w=function(e){var t,r=e.id,n=e.renderKey,o=e.src,i=e.enabled,a=void 0===i||i,l=e.autoStartLoadEnabled,c=void 0!==l&&l,u=(0,s.useRef)(null),d=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return j(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],m=d[1],b=(0,s.useRef)(!1);return(0,s.useEffect)(function(){if(a&&o&&r){var e=document.getElementById(r);if(O(e))return u.current=new p.ZP({autoStartLoad:c}),u.current.loadSource(o),u.current.attachMedia(e),u.current.once(p.ZP.Events.MANIFEST_PARSED,function(){if(u.current&&!b.current){var e=u.current.levels;m({default:e[e.length-1].height,options:e.map(function(e){return e.height}),forced:!0,onChange:function(t){e.forEach(function(e,r){u.current&&e.height===t&&(u.current.currentLevel=r)})}}),b.current=!0}}),function(){var e;null==(e=u.current)||e.destroy(),u.current=null}}},[n,r,o,a,c]),{quality:f,startLoad:(0,s.useCallback)(function(){var e;return null==(e=u.current)?void 0:e.startLoad()},[])}};function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||D(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}}var k=(0,s.memo)(function(e){var t=e.captionsUrl,r=e.contentType,o=e.downloadUrl,i=e.isDownloadable,a=void 0!==i&&i,l=e.onTimeUpdate,c=e.onEnded,u=e.playerRef,d=void 0===u?null:u,f=e.poster,b=e.src,g=e.startTime,j=e.preload,O=void 0===j?"none":j,S=e.onProgress,D=e.menuPosition,k=e.signedId,E=_((0,s.useState)((0,m.uniqueId)("plyr-container-")),2),A=E[0],N=E[1],T=(0,s.useRef)((0,m.uniqueId)("plyr-")),C=(0,s.useRef)(null),I=_((0,s.useState)(!1),2),M=I[0],L=I[1],R=p.ZP.isSupported(),U=b.endsWith(".m3u8")&&R,F="none"!==O,$=w({id:T.current,renderKey:A,src:b,enabled:U,autoStartLoadEnabled:F}),z=$.quality,B=$.startLoad,Z=(0,s.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({controls:["play-large","play","progress","current-time","mute","volume"].concat(P(t?["captions"]:[]),["settings","pip","fullscreen"],P(a?["download"]:[])),urls:{download:o},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]}},z?{quality:z}:{})},[t,o,z,a]);(0,s.useEffect)(function(){return function(){var e;null==(e=C.current)||e.destroy(),N((0,m.uniqueId)("plyr-container-"))}},[Z]),(0,s.useEffect)(function(){C.current=new(y())("#".concat(T.current),Z),d&&(d.current={plyr:C.current})},[Z,A,d]);var H=function(){C.current&&g&&(C.current.currentTime=g)},q=function(){C.current&&(0,m.isFunction)(c)&&c()},V=(0,m.isFunction)(S)?function(e){S({currentTime:e.detail.plyr.currentTime,duration:e.detail.plyr.duration})}:null;return(0,s.useEffect)(function(){return g&&C.current&&C.current.once("canplay",H),C.current&&(C.current.once("ended",q),V&&C.current.on("timeupdate",V)),function(){var e,t;null==(e=C.current)||e.off("canplay",H),V&&(null==(t=C.current)||t.off("timeupdate",V))}},[C.current]),(0,s.useEffect)(function(){if(g&&C.current)return C.current.once("play",H),function(){var e;return null==(e=C.current)?void 0:e.off("play",H)}},[C.current]),(0,s.useEffect)(function(){if(C.current&&U&&!F)return C.current.once("play",B),function(){var e;return null==(e=C.current)?void 0:e.off("play",B)}},[A,U,F,B]),(0,s.useEffect)(function(){var e,t=function(){C.current&&l&&l(C.current.currentTime)};return l&&(null==(e=C.current)||e.on("timeupdate",t)),function(){if(l){var e;null==(e=C.current)||e.off("timeupdate",t)}}},[l,C.current]),(0,s.useEffect)(function(){if(C.current){var e=function(){return L(!0)},t=function(){return L(!1)};return C.current.on("enterfullscreen",e),C.current.on("exitfullscreen",t),function(){var r,n;null==(r=C.current)||r.off("enterfullscreen",e),null==(n=C.current)||n.off("exitfullscreen",t)}}},[C.current]),(0,s.useEffect)(function(){C.current&&f&&(C.current.poster=f)},[f]),(0,n.jsx)("div",{className:(0,v.A)("plyr-container",{"plyr-container--fullscreen":M,"plyr-container__menu--bottom":"bottom"===(void 0===D?"top":D)}),children:(0,n.jsxs)(x,{id:T.current,contentType:r,poster:f,preload:O,signedId:k,children:[!U&&(0,n.jsx)("source",{src:b,type:r}),t&&(0,n.jsx)("track",{kind:"captions",label:(0,h.t)("default"),src:t,srcLang:"en"})]})},A)});k.displayName="MediaPlayer";var E=r(366988),A=r(39905),N=r(767900),T=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,o=e.isUpdatingMediaSettings,i=e.closePopover,a={make_downloadable:t.make_downloadable,custom_thumbnail:t.custom_thumbnail_signed_id};return(0,n.jsxs)(N.l,{id:"download-settings",onSubmit:function(e){r(e),i()},defaultValues:a,children:[(0,n.jsx)(N.l.Item,{name:"make_downloadable",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:o,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",name:"make_downloadable"})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:o,className:"mt-3",children:(0,h.t)("save")})})]})},C=r(227851),I=r(594023),M=r(606011),L=r(595971),R=r(957363),U=r(129576);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e){var t,r=e.name,o=e.errorMessage,a=e.onChange,l=(0,i.pm)().error,c=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],f=(0,s.useRef)(null);return(0,s.useEffect)(function(){o&&l(o)},[o]),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:(0,v.A)("bg-primary flex cursor-pointer rounded-md border border-gray-600 px-2 py-1.5 text-sm",{"justify-center":!u,"hover:bg-selector-active":!u,"border-red-500":o}),children:[!u&&(0,n.jsx)("span",{children:(0,h.t)("media_player.transcript_menu.file_type.user_file")}),u&&(0,n.jsxs)("span",{className:"flex gap-2",children:[(0,n.jsx)(R.JO,{type:"20-attach",size:20,className:"shrink-0"}),(0,n.jsx)("span",{className:"grow",children:(0,m.truncate)(u,{length:17,omission:"..."})}),(0,n.jsx)(R.JO,{type:"16-close",size:16,onClick:function(e){e.preventDefault(),e.stopPropagation(),f.current&&(f.current.value=""),a(""),d(null)},className:"shrink-0"})]}),(0,n.jsx)("input",{type:"file",name:r,onChange:function(e){var t,r=null==(t=e.target.files)?void 0:t[0];if(r){var n=new FileReader;n.onload=function(){a(n.result)},n.readAsDataURL(r),d(r.name)}},className:"hidden",itemType:"text/vtt",accept:".vtt",ref:f})]})})},z=function(e){var t=e.name,r=e.rules,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["name","rules"]),i=(0,C.Gc)(),a=i.control,l=i.formState.errors,s=(0,m.get)(l,t),c="string"==typeof(null==s?void 0:s.message)?s.message:"";return(0,n.jsx)(C.Qr,{control:a,name:t,rules:r,render:function(e){var r,i,a=e.field.onChange;return(0,n.jsx)($,(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},o),i=i={name:t,onChange:a,errorMessage:c},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}),r))}})},B=function(e){var t=e.onChange,r=e.value,o=e.supportsAi,i=e.aiFileDownloadUrl,a="ai"===r,l=a&&!o&&!i,s=a&&!!i;return(0,n.jsx)(I.E,{value:r,name:"file_type",onChange:t,className:"w-full",children:(0,n.jsxs)("div",{className:(0,v.A)("flex flex-col items-stretch gap-3",{"flex-col-reverse":!o}),children:[(0,n.jsxs)(U.R,{value:"ai",className:"py-4",children:[(0,n.jsx)(I.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,h.t)("media_player.transcript_menu.file_type.ai")}),(0,n.jsxs)(I.E.Description,{as:"span",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,h.t)("media_player.transcript_menu.file_type.ai_description"),l&&(0,n.jsx)(A.z,{variant:"circle",onClick:function(e){e.preventDefault(),window.open((0,d.xn)(),"_blank")},children:(0,h.t)("media_player.transcript_menu.file_type.upgrade_label")}),s&&(0,n.jsxs)(A.z,{variant:"secondary",onClick:function(e){e.preventDefault(),window.open(i,"_blank")},children:[(0,n.jsx)(R.JO,{type:"16-download",className:"mr-1.5",size:16}),(0,h.t)("media_player.transcript_menu.file_type.download_vtt_label")]})]})]}),(0,n.jsxs)(U.R,{value:"user",className:"py-4",children:[(0,n.jsx)(I.E.Label,{as:"span",className:"text-darkest block text-sm font-medium",children:(0,h.t)("media_player.transcript_menu.file_type.user")}),(0,n.jsxs)(I.E.Description,{as:"div",className:"text-default mt-1 flex flex-col justify-center gap-1 text-sm",children:[(0,h.t)("media_player.transcript_menu.file_type.user_description"),"user"===r&&(0,n.jsx)(z,{name:"user_webvtt_file",rules:{validate:function(e){if(!e)return!0;var t,r=(0,L.H)(e),n=new M.WebVTTParser().parse(r);return null==n||null==(t=n.errors)||!t.length||(console.error("Invalid VTT file",null==n?void 0:n.errors),(0,h.t)("media_player.transcript_menu.file_type.user_file_error"))}}})]})]})]})})},Z=function(e){var t=e.name,r=e.rules,o=e.supportsAi,i=e.aiFileDownloadUrl,a=(0,C.Gc)().control;return(0,n.jsx)(C.Qr,{control:a,name:t,rules:r,render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,n.jsx)(B,{onChange:r,value:a,supportsAi:o,aiFileDownloadUrl:i})}})},H="media_player.transcript_menu",q=function(e){var t=e.isUpdating,r=e.supportsAi,o=e.aiFileDownloadUrl,i=(0,(0,C.Gc)().watch)("enabled"),a=function(e){return"ai"!==e||!!r||(0,h.t)("media_player.transcript_menu.file_type.ai_not_supported_error")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.l.Item,{name:"enabled",translationRoot:H,hideBorder:!0,fullWidth:!0,inline:!0,className:"!p-0",isDisabled:t,children:(0,n.jsx)(N.l.ToggleSwitch,{variant:"small",name:"enabled"})}),i&&(0,n.jsx)(N.l.Item,{name:"selected_file",translationRoot:H,hideBorder:!0,fullWidth:!0,inline:!0,hideLabel:!0,hideDescription:!0,isDisabled:t,rules:{validate:a},className:"flex flex-col",children:(0,n.jsx)(Z,{name:"selected_file",rules:{validate:a},supportsAi:r,aiFileDownloadUrl:o})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:t,className:"mt-1",children:(0,h.t)("save")})})]})},V=function(e){var t=e.mediaTranscript,r=e.updateAsync,o=e.isUpdating;if(!t)return null;var i={enabled:!!(null==t?void 0:t.enabled),selected_file:null==t?void 0:t.selected_file};return(0,n.jsx)(N.l,{id:"media-transcript",onSubmit:function(e){null==r||r(e)},defaultValues:i,children:(0,n.jsx)(q,{isUpdating:!!o,supportsAi:!!(null==t?void 0:t.supports_ai),aiFileDownloadUrl:(null==t?void 0:t.is_ai_ready)&&(null==t?void 0:t.webvtt_file_url)||""})})},W=function(e){var t=e.children;return(0,n.jsx)("div",{className:"bg-primary border-light absolute right-0 top-1 w-80 cursor-default rounded-lg border p-5",children:t})},G=(0,s.forwardRef)(function(e,t){var r=e.iconType,o=e.onClick;return(0,n.jsx)("button",{ref:t,type:"button",onClick:o,className:"bg-primary text-dark border-light hover:bg-secondary flex size-8 cursor-pointer items-center justify-center rounded-full border",children:(0,n.jsx)(R.JO,{type:r,size:16})})});G.displayName="Button";var J=r(383294),K=r(598222),Q=r(831574),X=r(321405),Y=r(309757);function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function et(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function en(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ei={strategy:"fixed",placement:"bottom-end"},ea={enter:"transition ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},el=Object.assign(function(e){var t=e.iconType,r=e.isOpen,o=e.onToggle,i=e.children,a=eo((0,s.useState)(null),2),l=a[0],c=a[1],u=eo((0,s.useState)(null),2),d=u[0],f=u[1],p=(0,s.useRef)(null),m=(0,X.D)(d,l,ei),b=m.styles,y=m.attributes;return(0,Y.Z)(p,function(e){if(et(e.target,Node)){var t;et(e,MouseEvent)&&et(e.target,Node)&&(null==d?void 0:d.contains(e.target))||et(t=e.target,Element)&&null!==t.closest(".modal__box")||o()}}),(0,n.jsxs)(J.J,{as:"div",className:"relative",children:[(0,n.jsx)(G,{iconType:t,onClick:o,ref:f}),(0,n.jsx)(K.u,en(er({},ea),{show:r,children:r&&(0,n.jsx)(Q.h,{as:s.Fragment,children:(0,n.jsx)(J.J.Panel,en(er({ref:c,style:b.popper},y.popper),{className:"z-20",children:(0,n.jsx)("div",{ref:p,children:(0,n.jsx)(W,{children:i})})}))})}))]})},{Body:W,Button:G}),es=r(900795),ec=r(206394),eu=function(e){var t=e.mediaSettings,r=e.updateMediaSettings,o=e.isUpdatingMediaSettings,i=e.closePopover;return(0,n.jsxs)(N.l,{id:"thumbnail-image-settings",onSubmit:function(e){r(e),i()},shouldStopPropagation:!0,defaultValues:{custom_thumbnail:t.custom_thumbnail_signed_id},children:[(0,n.jsx)(N.l.Item,{name:"custom_thumbnail",translationRoot:"media_settings",hideBorder:!0,fullWidth:!0,hideDescription:!0,className:"!p-0",children:(0,n.jsx)(ec.D,{name:"custom_thumbnail",aspectRatio:16/9,hideUnsplash:!0,showAddCoverBtn:!0,changeImageText:(0,h.t)("replace"),title:(0,h.t)("media_settings.thumbnail_title"),customAddCoverBtn:(0,n.jsxs)("div",{className:"bg-primary border-primary text-dark my-2 flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border border-dashed px-4 py-5 text-center",children:[(0,n.jsx)("div",{className:"bg-tertiary flex size-8 items-center justify-center rounded-full",children:(0,n.jsx)(R.JO,{type:"plus",viewBox:"0 0 20 20"})}),(0,n.jsx)("span",{className:"mt-0.5 text-xs",children:(0,n.jsx)(es.w,{content:(0,h.t)("media_settings.image_upload_description")})})]})})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(A.z,{type:"submit",variant:"circle",disabled:o,className:"mt-3",children:(0,h.t)("save")})})]})};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ef=function(e){var t,r,o=e.mediaTranscript,i=e.canEditTranscript,a=e.updateAsyncTranscript,l=e.isUpdatingTranscript,d=e.signedId,f=e.contentType,p=(0,c.wh)().currentCommunityMember,m=(0,u.vb)(p),b=null==f?void 0:f.match("audio.*"),y=null==(r=window.webview)?void 0:r.isInsideMobileWebview,h=(0,E.E)(d||""),g=h.mediaSettings,x=h.update,j=h.isUpdating,O=(t=(0,s.useState)(null),function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ed(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],S=O[1],_=function(e){S(w===e?null:e)};return(0,n.jsxs)("div",{className:(0,v.A)("invisible absolute z-10 flex gap-3 group-hover:visible",{"!visible":w,"right-4 top-4":!b,"bottom-12 right-2.5":b}),children:[g&&m&&!y&&(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(el,{isOpen:"thumbnail"===w,onToggle:function(){return _("thumbnail")},iconType:"16-file-image",children:(0,n.jsx)(eu,{mediaSettings:g,updateMediaSettings:x,isUpdatingMediaSettings:j,closePopover:function(){return _("thumbnail")}})}),(0,n.jsx)(el,{isOpen:"download"===w,onToggle:function(){return _("download")},iconType:"16-download",children:(0,n.jsx)(T,{mediaSettings:g,updateMediaSettings:x,isUpdatingMediaSettings:j,closePopover:function(){return _("download")}})})]}),i&&(0,n.jsx)(el,{isOpen:"transcript"===w,onToggle:function(){return _("transcript")},iconType:"16-transcript",children:(0,n.jsx)(V,{mediaTranscript:o,updateAsync:a,isUpdating:l})})]})},ep=r(381636),em="media_player.transcoding",eb=function(e){var t=e.status,r="failed"===t?"failed":"in_progress";return(0,n.jsxs)("div",{className:"absolute left-0 top-0 z-10 size-full",children:[(0,n.jsx)("div",{className:"size-full bg-black opacity-80"}),(0,n.jsx)("div",{className:"absolute left-0 top-0 flex size-full items-center justify-center",children:(0,n.jsxs)("div",{className:"w-10/12 max-w-[360px] text-center",children:[(0,n.jsxs)("div",{className:"space-x-2",children:["failed"===t&&(0,n.jsx)(R.JO,{type:"20-alert",size:20,className:"!h-4 !w-4 !text-white"}),(0,n.jsx)(ep.Z.LabelSm,{color:"text-white",weight:"semibold",children:(0,h.t)([em,r,"title"])})]}),(0,n.jsx)(ep.Z.LabelSm,{color:"text-white",children:(0,h.t)([em,r,"description"])})]})})]})},ey=r(635973),eh=r(201157),ev=r(798104),eg=r(354346);function ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ej=(0,ev.Ue)()((0,eg.tJ)(function(e,t){return{blobs:[],saveProgress:function(t,r){e(function(e){var n;return{blobs:[{signedId:t,progress:r}].concat(function(e){if(Array.isArray(e))return ex(e)}(n=e.blobs.filter(function(e){return e.signedId!==t}).slice(0,99))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return ex(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ex(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}})},getProgress:function(e){var r,n=t().blobs.find(function(t){return t.signedId===e});return null!=(r=null==n?void 0:n.progress)?r:0},deleteProgress:function(t){e(function(e){return{blobs:e.blobs.filter(function(e){return e.signedId!==t})}})}}},{name:"media-progress",version:1})),eO=r(974050);function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e_=(0,s.memo)(function(e){var t,r,o=e.src,i=e.poster,a=e.type,l=e.mediaTranscoding,p=e.mediaTranscriptId,m=e.isDownloadable,b=void 0!==m&&m,y=e.isTranscodingEnabled,h=void 0!==y&&y,v=e.downloadUrl,g=e.variants,x=e.preload,j=void 0===x?"none":x,O=e.signedId,w=e.onProgress,S=e.menuPosition,_=void 0===S?"top":S,P=(0,c.wh)(),D=P.currentCommunityMember,A=P.currentCommunitySettings,N=(0,u.vb)(D),T=(0,s.useRef)(null),C=(0,s.useRef)(null),I=eS((0,s.useState)(null),2),M=I[0],L=I[1],R=h?null==g?void 0:g.hls:null,U=eS((0,s.useState)(null!=R?R:o),2),F=U[0],$=U[1],z=F.endsWith(".m3u8"),B=["video/mp4","video/mpeg","video/ogg","audio/mpeg","audio/ogg","audio/mp4","audio/wav","audio/x-wav"].includes(a),Z=z||B,H=ej(function(e){return e.getProgress(O||"")}),q=ej(function(e){return e.deleteProgress}),V=ej(function(e){return e.saveProgress}),W=function(){O&&q(O)},G=eS((0,s.useState)(H),2),J=G[0],K=G[1],Q=p||M,X=!!(null==A?void 0:A.community_ai_settings_enabled),Y=(0,E.E)(O||"").mediaSettings;(0,s.useEffect)(function(){J&&O&&V(O,J)},[J,O,V]);var ee=(0,f.k)({enabled:h&&!Z,signedId:O,mediaTranscoding:l,onSuccess:function(e){var t=e.hlsUrl;return t&&$(t)}}).status,et=(0,eO.q)(Q),er=et.parsedWebvtt,en=et.mediaTranscript,eo=et.canEdit,ei=et.updateAsync,ea=et.isUpdating,el=et.isLoading,es=et.refetch,ec=null!=(t=null==er?void 0:er.cues)?t:[],eu=null!=(r=null==Y?void 0:Y.poster_url)?r:i,ed=h&&!Z&&"succeeded"!==ee,ep=X&&(null==en?void 0:en.enabled)&&(null==en?void 0:en.is_ready),em=X&&!p&&(null==D?void 0:D.is_admin),ev="number"==typeof p?String(p):"",eg=ep?d.CG.showVtt({id:ev}):void 0;return(0,n.jsxs)("div",{className:"group relative",children:[ed&&(0,n.jsx)(eb,{status:ee}),(0,n.jsx)(k,{captionsUrl:eg,contentType:a,downloadUrl:null!=v?v:null==g?void 0:g.original,isDownloadable:b||N,onTimeUpdate:K,playerRef:T,poster:eu,src:F,menuPosition:_,startTime:J,preload:j,onEnded:W,onProgress:w,signedId:O}),(0,n.jsx)(ef,{signedId:O,mediaTranscript:en,canEditTranscript:eo,updateAsyncTranscript:ei,isUpdatingTranscript:ea,contentType:a}),ep&&(0,n.jsx)(eh.Y,{onSeek:function(e){var t=T.current;t&&(t.plyr.currentTime=e)},onFullscreenSeek:function(e){var t=C.current;t&&(t.plyr.currentTime=e)},renderFullscreenPlayer:function(){return(0,n.jsx)(k,{captionsUrl:eg,contentType:a,downloadUrl:null!=v?v:null==g?void 0:g.original,isDownloadable:b||N,onTimeUpdate:K,playerRef:C,poster:eu,src:F,startTime:J,preload:j,onEnded:W,onProgress:w,menuPosition:_,signedId:O})},onFullscreenToggle:function(){var e=T.current;e&&e.plyr.pause()},cues:ec,currentTime:J}),em&&(0,n.jsx)(ey.D,{url:o,onNewMediaTranscript:L,onMediaTranscriptUpdated:function(e){Q!==e?L(e):es()},mediaTranscript:en,isLoading:el})]})});e_.displayName="TranscriptsPlayerComponent";var eP=function(e){var t=e.type.toLowerCase().startsWith("video/"),r=(0,l.T)({signedId:e.signedId,posterUrl:e.poster,isDownloadable:e.isDownloadable,mediaTranscriptId:e.mediaTranscriptId}),o=r.posterUrl,i=r.isDownloadable,s=r.mediaTranscriptId;return t?(0,n.jsx)(a.Y,{src:e.src,contentType:e.type,mediaTranscoding:e.mediaTranscoding,mediaTranscriptId:s,downloadable:i,downloadUrl:e.downloadUrl,posterUrl:o,chaptersUrl:e.chaptersUrl,previewThumbnailsUrl:e.previewThumbnailsUrl,signedId:e.signedId,variants:e.variants,onProgress:e.onProgress,preload:e.preload}):(0,n.jsx)(e_,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))},eD=function(e){return(0,n.jsx)(o.aH,{children:(0,n.jsx)(i.VW,{children:(0,n.jsx)(eP,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e))})})}},974050:function(e,t,r){r.d(t,{q:()=>d});var n=r(131906),o=r(739792),i=r(251630),a=r(60878),l=r(275271),s=r(606011),c=r(547144),u=function(e){var t=e||{},r=t.id,o=t.enabled,i=t.is_ready,a=(0,n.useQuery)(["mediaTranscript","webvtt",r],function(){var e;return fetch(c.CG.showVtt({id:null!=(e=null==r?void 0:r.toString())?e:""})).then(function(e){return e.text()})},{enabled:!!r&&i&&o}),u=a.data,d=a.isError,f=a.refetch,p=(0,l.useMemo)(function(){if(!u||d)return null;var e=new s.WebVTTParser().parse(u);return(null==e?void 0:e.cues)&&(e.cues=e.cues.map(function(e){var t,r;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e),r=r={text:e.text.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&apos;/g,"'")},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t})),e},[u,d]);return{webvtt:u,parsedWebvtt:p,refetch:f}},d=function(e){var t=(0,a.pm)(),r=t.success,l=t.error,s=(0,n.useQuery)(["mediaTranscript",e],function(){return i.ac.show(null!=e?e:-1)},{enabled:!!e}),c=s.data,d=s.isLoading,f=s.refetch,p=u(c)||{},m=p.webvtt,b=p.parsedWebvtt,y=p.refetch,h=(0,n.useMutation)(function(t){return i.ac.update(null!=e?e:-1,t)},{onSuccess:function(){r((0,o.t)("media_player.transcript_menu.success")),f(),y()},onError:function(e){l((0,o.t)("media_player.transcript_menu.error")),console.error(e)}}),v=h.mutateAsync,g=h.mutate,x=h.isLoading,j=null==c?void 0:c.can_edit;return{mediaTranscript:c,canEdit:j,isLoading:d,isUpdating:x,webvtt:m,parsedWebvtt:b,update:g,updateAsync:v,refetch:f}}},428414:function(e,t,r){r.d(t,{Y:()=>u});var n=r(552676),o=r(619803),i=r.n(o),a=r(932699),l=r(770434),s=function(e){var t=e.className,r=e.children;return(0,n.jsx)("span",{className:i()("truncate",t),children:r})},c="flex min-w-0",u=function(e){var t,r,o=e.className,u=e.tooltipOptions,d=e.children;return(0,a.isEmpty)(u)||(0,a.isEmpty)(null==u?void 0:u.content)?(0,n.jsx)("span",{className:i()(c,o),children:(0,n.jsx)(s,{children:d})}):(0,n.jsx)(l.Y,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},u),r=r={className:i()(c,null==u?void 0:u.className),children:(0,n.jsx)(s,{children:d})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},667239:function(e,t,r){r.d(t,{g:()=>l});var n=r(552676),o=r(807730),i=r(532602),a={5:"2",6:"2",7:"3.5",8:"3.5",9:"3.5",10:"3.5",14:"3.5",16:"5",24:"5"},l=function(e){var t=e.idleColor,r=e.isFullRounded,l=e.name,s=e.onlineColor,c=e.size,u=void 0===c?"8":c,d=e.src,f=e.status;return(0,n.jsxs)("div",{className:"relative inline-flex flex-col","data-testid":"user-image-status-element",children:[(0,n.jsx)(i.s,{isFullRounded:r,name:l,size:u,src:d}),!!f&&"string"==typeof f&&("online"===f||"idle"===f||"offline"===f)&&"offline"!==f&&(0,n.jsx)("div",{className:"absolute bottom-1 right-1 translate-x-1/2 translate-y-1/2","data-testid":"status-indicator-container",children:(0,n.jsx)(o.E,{idleColor:t,onlineColor:s,size:a[u],status:f})})]})};l.displayName="UserImageStatus"},437614:function(e,t,r){r.d(t,{W:()=>l});var n=r(552676),o=r(619803),i=r.n(o),a=r(547144),l=function(e){var t,r,o=e.src,l=e.type,s=e.poster,c=e.rounded,u=e.isInset,d=void 0!==u&&u,f=e.mediaTranscriptId,p=e.preload,m=e.controlsList,b=e.description,y=void 0===b?"":b,h=e.className,v=e.shouldAutoPlay,g=e.styles,x=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["src","type","poster","rounded","isInset","mediaTranscriptId","preload","controlsList","description","className","shouldAutoPlay","styles"]);return(0,n.jsxs)("video",(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({className:i()(h,{"wb-rounded-md":(void 0===c||c)&&!d,"wb-h-full wb-w-full wb-bg-black":d}),controls:!0,controlsList:void 0===m?"nodownload":m,preload:void 0===p?"metadata":p,poster:s,autoPlay:void 0!==v&&v,style:g},x),r=r={children:[(0,n.jsx)("source",{src:o,type:l}),y&&(0,n.jsx)("p",{className:"wb-sr-only",children:y}),f&&(0,n.jsx)("track",{kind:"captions",src:a.CG.showVtt({id:String(f)})})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))}},400770:function(e,t,r){r.d(t,{t:()=>a});var n=r(552676),o=r(619803),i=r.n(o),a=function(e){var t=e.children,r=e.backgroundNone,o=void 0!==r&&r,a=e.className;return(0,n.jsx)("div",{className:i()("rounded-md bg-none px-4 py-5 sm:p-6",{"bg-none":o,"bg-tertiary":!o},void 0===a?"":a),children:t})}}}]);
//# sourceMappingURL=/packs/js/506-de4abf573278bc8e.js.map